const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./request-B81tzgri-CGG_CFUr.js","./main-CsLUkpBy.js","./main-C3xr9yAQ.css","./IdentityManager-BxUN4JOA-BJ_7rzTq.js","./substitute-DhfhSQS_-DSPgsMbc.js","./pe-wasm-LKD1FDeM-D0WVrMrn.js","./ElevationLayer-B05qqUHG-DmRF1XZT.js","./resourceUtils-PAYBmvyK-Dcqq-dzT.js","./layersCreator-OT3cNiQJ-CxTWe27Y.js","./portalLayers-CM-2NZvt-BvDviaTl.js","./associatedFeatureServiceUtils-vfs_1QFD-BOqzXTvB.js","./fetchService-DhIYtzwD-2gsvkO7K.js","./WhereClause-D233Ox-8-rXdW2d9D.js","./TimeOnly-BR6daUyu-B3p4ZLHW.js","./arcadeUtils-BUv04XWE-DQPMFaGM.js","./languageUtils-Bxl5LDSi-Ct-EjnE0.js","./ImmutableArray-CiJxhY8_-Kqx7aWRu.js","./shared-CWBqh2zd-1zH2Z4KD.js","./number-BJi_xsDz-CVg2ydLA.js","./webStyleSymbolUtils-C8zbY7A8-Clgur_5v.js","./devEnvironmentUtils-CxrVv3RG-CX5aoxVE.js","./geometryEngineJSON-cnFh4oQ2-BA0BxkoC.js","./geometryEngineBase-DDJcGEx2-B9Hw96eo.js","./arcgisLayers-QbqpTmsN-D2TW13iu.js","./statsWorker-CVqNZGtA-BZRvG25M.js","./utils-CpnbG32Y-BZ7oc5VB.js","./utils-BszyTz9P-DnN6XH7A.js","./utils-DN5yax8A-W8d0ehPg.js","./geometryEngineWorker-ChH1og6m-BDBohSYU.js","./CSVSourceWorker-B3hIddO8-Bac32haq.js","./date-Cqvy-TgA-DIf-QFLz.js","./FeatureStore-CGZUrE_U-CMakeFJA.js","./BoundsStore-5unyB8-T-BQ4Pn4q4.js","./PooledRBush-DFMOIq_L-C-OmpoZ7.js","./timeSupport-sB9XTwIv-h3cwKcJ2.js","./optimizedFeatureQueryEngineAdapter-kZ9wH51p-BzWzbwXD.js","./QueryEngine-DDOrno8f-D52KEomN.js","./QueryEngineCapabilities-Gr588n9t-DjYb9CEb.js","./clientSideDefaults-DaxivApY-B5rPOW4f.js","./capabilities-Cjn77swe-Y9lFlGVh.js","./EdgeProcessingWorker-CCyU7nQH-BNX99n5O.js","./InterleavedLayout-BMFLQBGy-BtioV1j6.js","./BufferView-BDYk8Sh_-Cv8PXz9Y.js","./types-ChhhI6OU-Cxh6dPlX.js","./Util-cAlFLh9R-CyPLXCS2.js","./edgeProcessing-DDKzdzmf-BUEnvWYK.js","./deduplicate-KcKkQhWf-CGLjlhGb.js","./Indices-CMOcLwPM-BkosdJeK.js","./VertexAttribute-DqD5S0a2-3q90nikV.js","./glUtil-BonlLoq2-UWGwjh4A.js","./VertexElementDescriptor-BAy1DPb3-BOhpDZGx.js","./ElevationSamplerWorker-CV3bb9WV-DKgI--tG.js","./MeshLocalVertexSpace-DkOk3052-q6-F4gvG.js","./vertexSpaceConversion-J1a6a3Ka-duDw22SV.js","./mat3f64-Dh9_zhFu-BIT-k8Dm.js","./mat4f64-Dn1WEGBx-C99QVUMW.js","./spatialReferenceEllipsoidUtils-a1l2O8Wm-BqZpajjp.js","./computeTranslationToOriginAndRotation-DlPeD1c9-DkmbPYZb.js","./projectPointToVector-D1BQGAFG-DEE3wd5g.js","./meshVertexSpaceUtils-VVkhP71b-NRpHG3pF.js","./vec3-DeYubiaN-CS4a6ERP.js","./vec4-DamUQeRS-BB_OMEQZ.js","./FeatureServiceSnappingSourceWorker-BYYDVeWH-DJ1-Dr1a.js","./GeoJSONSourceWorker-CHI6EPL7-CBcFzdkx.js","./geojson-C0tfEHKN-aVOHgLi4.js","./sourceUtils-0xHA9963-CawXraxJ.js","./LercWorker-BkmvW0JQ-K4PZ8VZ_.js","./MemorySourceWorker-CT6it2x9-BMpBoYX2.js","./objectIdUtils-EszJVKSV-Bi133oF_.js","./PBFDecoderWorker-DsvW97vv-DCIy1m6t.js","./FeaturePipelineWorker-B6npgGNK-Cw7RCSIT.js","./AttributeStore-BysBgiw_-DOstyQDT.js","./LabelMetric-DpMX58iW-IB5VzNkd.js","./Program-1XjJitsM-EcoGUBaj.js","./BufferObject-DqJSjWFs-BhAkLLcP.js","./UpdateTracking2D-swFQJIjy-DrSp7uUZ.js","./BidiEngine-Bdqv5H5j-Dyqh9XG-.js","./GeometryUtils-v59R1Z6F-CHOfVRFe.js","./Rect-DD6XS68q-D_hsV3ag.js","./BindType-9iOk18Ed-CRW1cdX4.js","./MeshWriterRegistry-C8HGD9pG-BV1zc4M4.js","./PieChartMeshWriter-DYJnKx_X-DhW11ZB3.js","./TurboLine-Bj3gCfCh-BRYjJvEK.js","./earcut-XDcq3zAf-BcwyrT7l.js","./constants-Bqe1QJ4u-F8oTIn7N.js","./grouping-Bl3jGfSC-l1_INyfL.js","./ogcFeatureUtils-p7pCRYtz-BRsn-V8Y.js","./CircularArray-DaQg3PQl-BXS52LZy.js","./createConnection-DV-PsVt_-C73YkRuA.js","./PointCloudWorker-Dk-j6i2u-BL1wGldP.js","./quat-Xt9oEsiT-B6ruTW5h.js","./quatf64-C16JxGFv-BKWK1F8U.js","./vec3f32-BS0cezmI-B_madU1n.js","./PointCloudUniqueValueRenderer-xBokarMf-Duv6_pXI.js","./I3SBinaryReader-B-IG1_cG-CIH8UJVM.js","./orientedBoundingBox-CdpnVLBk-BHUcvCfE.js","./plane-B2J4G_40-YEDqrpJy.js","./RasterWorker-ZkCMSWCk-BKOqbzT0.js","./PolynomialTransform-C_RaF2be-DwRygspY.js","./rasterProjectionHelper-CgVEist9-CYHXzCpP.js","./SceneLayerSnappingSourceWorker-D6NZRe0M-BD7U9ub4.js","./lineSegment-CMEPBlyR-BAB-eRfw.js","./sphere-_Zcui0FU-CoSuXPKk.js","./Octree-xqikAfA7-Da60B8Kc.js","./SceneLayerWorker-BUmujHQy-CKKwoRKs.js","./I3SUtil-D0XpA9Sd-C5q-GJDo.js","./projectVectorToVector-JABAqSd1-Dd8NudTO.js","./floatRGBA-CNeCgBBY-DcNNIP7E.js","./NormalAttribute.glsl-CIowDxbJ-zx40DyAJ.js","./interfaces-DN2-jsJC-DzMTiT5R.js","./WFSSourceWorker-B-kunUXT-OGEAc3Mm.js","./wfsUtils-CNKQxjHE-BzrI6ZRL.js","./xmlUtils-TLuV3CJ7-Cs2DGP6C.js","./WorkerTileHandler-DT-WHOow-IU1BEtOB.js","./enums-qHpGJ28Q-CmnLAccm.js","./config-nuMERBvb-MDUrh2eL.js","./StyleDefinition-CovmM7Ch-Cdj37yeO.js","./SourceLayerData-CPPRyeus-Bx3bDbAu.js","./StyleRepository-BI7Mau-3-Db94MvCh.js","./Lyr3DWorker-CneISuaM-BHiupoo6.js","./HUDMaterial.glsl-DIvhvazX-BAKe4Gwh.js","./AttributeArray-BZcPy4-N-BCg2MJvR.js","./requestImageUtils-D-UkoZHx-DYvKq5HT.js","./basicInterfaces-Dsf65ICa-DkQ9Rsnx.js","./boundedPlane-DPc-vTSV-DmaZ3JQ4.js","./renderState-CRtOsw3X-BExhPaNw.js","./doublePrecisionUtils-BJbYwoii-kIP-tL_t.js","./NestedMap-Ddo7BfvO-BpVPk8mz.js","./IntersectorInterfaces-CrXe7z5S-tY6PKd-m.js","./VertexArrayObject-C4kjI814-BP6Di09J.js","./triangle-P3uC8zu1-CXtutgmm.js","./deleteForwardEdits-B0g8BhFg-72-DwheA.js","./DeleteForwardEditsParameters-BIwbWFAr-CKa7Tx5s.js","./editingSupport-tOQy13o6-eA48Jl56.js","./hydrated-Bw6jVxCj-DrGZCQ7v.js","./layersLoader-BOdP4LjI-rYTm93uP.js","./jsonContext-v1mRP0aL-BQHMYdCN.js","./featureLayerUtils-0tw9isWJ-BrJzFv3G.js","./utils-2iHN6TbU-CNNDRLEV.js","./originUtils-BLsWtgV9-B4sclfuf.js","./multiOriginJSONSupportUtils-DGETddQl-BrWaY9_8.js","./saveUtils-BQy3eBhU-BUi0DYhH.js","./FeatureLayerSource-Boc5do0a-UuYUnVZf.js","./External-BllXL05R-Bl5d_KcP.js","./MeshTransform-BFYjlBv2-J0cR3yfw.js","./symbolLayerUtils-C6oko-gw-CdCkTL8p.js","./lerc-wasm-BoCw-igV-Ch_0wPmV.js","./imageryUtils-DUQ3sTvH-DWUTYkb_.js","./meshFeatureSet-C6Ooe2ib-B6PZ-2TO.js","./Mesh-BvaroTE0-dPFWmgYF.js","./MeshVertexAttributes-D9RxS-0O-Be7jDKKw.js","./meshFeatureAttributes-DC-71SuC-Bw8QlBTs.js","./executeRelationshipQuery-BZ4gZDaW-C2QzJdP8.js","./queryAttachments-OI415YXy-BEdaEONT.js","./executeBinsQuery-X2ai-A43-D0EwA2iF.js","./executeTopFeaturesQuery-ODAvPcMT-3dM9CmvF.js","./queryTopFeatures-Cam5OLhi-QlqaObEw.js","./executeForTopIds-BxuORtfH-B1gjrBzT.js","./executeForTopExtents-DjV2dYml-D73q7aVi.js","./executeForTopCount-D87ySeOH-C357ZMuc.js","./ElevationQuery-CPj-liUn-B8bRoP1N.js","./Popup-ChvDUefZ-CWljpouw.js","./ReactiveSet-D6-WgKAK-BrACh536.js","./layerViewUtils-DyE3oc1e-CYjDhqwq.js","./geometryServiceUtils-D2bq_wSl-C90lHlfh.js","./project-NnYH-8_O-BNp7UhbW.js","./webglDeps-Dw9YmB8n-D327Cymv.js","./ProgramTemplate-B_NcbdFz-Q2ML1liD.js","./mapViewDeps-Z1Pn0MJe-C2o-zjHA.js","./FeatureCommandQueue-F8dH-mVd-P46-EUD1.js","./WGLContainer-whJgsi2t-CGq78sXN.js","./Container-C-rqKhNk-Dyxae02C.js","./SDFHelper-DaBS7X2--lClFpq42.js","./GridShader--au302uP-C26cxcsO.js","./testSVGPremultipliedAlpha-DmWsO1ZL-D_MCD8w3.js","./RenderingContext-3XJ9Znm--IYP_dIFo.js","./rasterizingUtils-DQBnGB7y-DaDBafuU.js","./utils-CsPw9DoV-B4OW7GaD.js","./GraphicsView2D-DGP_h330-zRsVL_dx.js","./normalizeUtilsSync-BGR0Mvo7-Jx1rU3Tk.js","./GraphicContainer-DPQzFmqj-H_iGWEWE.js","./AGraphicContainer-aPpZ1eAs-Dz-23LA8.js","./TechniqueInstance-DBGJNG3B-28gQqNgE.js","./TileContainer-C5yGwaDr-CIMkIbQf.js","./geodesicUtils-mOcz5huG-C8B4kXeV.js","./TileLayerView2D-Bpx_TyJu-BkCc60d1.js","./imageUtils-BQMOAI7a-LnFubJTt.js","./Bitmap-DixeSrEO-yb6FVZm9.js","./LayerView-DONYuvqR-D1uYbtvo.js","./HighlightGraphicContainer-cUb9kmn3-C2NJ_Fad.js","./RefreshableLayerView-D30wcOhz-CVoYFm4S.js","./MapServiceLayerViewHelper-CyPZdm17-B0Lw7Hdc.js","./drapedUtils-Bj2xRBlq-B9Li_3aB.js","./popupUtils-CGEHI2En-BRqaMOQD.js","./FeatureLayerView2D-BuwByqi6-Mm6-4Jhk.js","./timeSupport-m80hv0JM-aOU1dVtS.js","./HighlightCounter-DFWq7PnG-L3ompOf4.js","./BaseDynamicLayerView2D-STJ2_8Ou-Bcf7RNrQ.js","./BitmapContainer-Cpw_vXaU-v0Y3ADb6.js","./ExportStrategy-BZfM4Ojc-DYzjSMHW.js","./CatalogLayerView2D-XzvEyTyi-qN9I8z1F.js","./CatalogDynamicGroupLayerView2D-C3GrQqN8-lvGAd_nm.js","./CatalogFootprintLayerView2D-DV1Pbenx-DCVEaqeE.js","./GeoRSSLayerView2D-DN1NyDgA-GuCOtukP.js","./GraphicsLayerView2D-DB_o6F5P-CU56GF4h.js","./GroupLayerView2D-BFNo2cZi-DIwLe7q8.js","./ImageryLayerView2D-BZ8xlRHu-Cn0lOImW.js","./RasterVFDisplayObject-DH4gEjoh-Cc0yTg5u.js","./ImageryTileLayerView2D-D_thjFMp-CGA5BwqE.js","./rasterUtils-5M5hehll-PjLtRah8.js","./RawBlockCache-DasbueeU-Cjyxwl0g.js","./KMLLayerView2D-BYmL22tu-BVux4hOL.js","./kmlUtils-Cl5qi9-0-CZUBHpGG.js","./KnowledgeGraphLayerView2D-PmMnbqbF-BYgRUjLK.js","./MapImageLayerView2D-DdbbjR7X-5Xja-bSL.js","./MapNotesLayerView2D-CXBTQ81l-D8zKoefw.js","./MediaLayerView2D-s3jmdbCI-dW_V5VM0.js","./perspectiveUtils-CAHA4mHB-CKRIu3l6.js","./OverlayContainer-8YXsjMqg-DzvLvZm8.js","./OGCFeatureLayerView2D-BwXpgdwd-BqtUTIGu.js","./RouteLayerView2D-BsyIGh1D-Dg5Re9tN.js","./Stop-BXnpxd-C-DVvF2gg8.js","./StreamLayerView2D-C1yEz9lA-lZeUZyQK.js","./SubtypeGroupLayerView2D-Ds6xFnOx-DbucFQTI.js","./VectorTileLayerView2D-DtS79O1b-B3XRQdK8.js","./VideoLayerView2D-DOWtjEH4-DCdfDshy.js","./TelemetryDisplay-C0-2h0NX-BaYt-Aze.js","./WMSLayerView2D-DPEhttA5-CFlp5C1F.js","./WMTSLayerView2D-B2NrsaCP-DtAj6HsK.js","./gif-Bui8aA6k-C67NI_vy.js","./apng-CJzaTn1o-DgTHv046.js","./calcite-button-f0Oiah94-C0JiqHnl.js","./form-DdIDvPV9-CLtobCO_.js","./dom-N58V0tYi-DBU3jlah.js","./interactive-XU74NapU-DdUEny12.js","./label-Dys24PJn-BCewo2Re.js","./component-CWGf1hug-BASJpoEG.js","./loadable-CnW_ULGP-CF1IECRU.js","./locale-Dj-q8Iw4-gimrLkFb.js","./key-CZySMiwx-kmS7VeUz.js","./observers-tBXut0i3-Ba73lqZq.js","./t9n-B7zlVVF4-SSumtHTC.js","./icon-Dh3ZJmTl-YoltNlDz.js","./loader-HhR8XX0c-Dp4Rhdcx.js","./guid-Dls486Er-CBh637k4.js","./calcite-icon-C7cRkbvP-C2iXNAOL.js","./shp.min-_5t7-MuG-B0QJb5Xa.js","./_commonjs-dynamic-modules-BpilXLfW-CQY1QSED.js","./jszip.min-BZRU6n00-DN1PYNg1.js","./index-h-lK-OBq-D6XfwCBO.js","./index-BqPraQYi-DzQHXW9J.js","./screen-WW-GdCBL-vCy0mcUr.js","./index-Df9T6Yx6-CNWf4VAS.js","./index-CGM-kaEo-CahlkxeZ.js","./index-DYBxjHjA-2AXE5PMW.js","./hilight-defs-DzKgjtLG-D-utaUCJ.js","./index-BdFGz0ZK-DK_J5XDY.js","./fabric-CZsIQ6qk-DXgHKXB7.js","./index-r09zd3NW-CRhHQWj4.js","./index-CCTc-ZuK-Cc-iU_D_.js","./index-Dmxwlr4l-C1lDB6vR.js","./index-B3sR5Tw1-NDkDef01.js","./index-8hKUfhZy-DL5e5WQS.js","./index-Dyl_htzs-BVbNVDHz.js","./index-DFkNa04r-BbCFNOq2.js","./screen-CvvgRI4n-BkC3PrYE.js","./index-DKcBQ-la-DULXc8jr.js","./index-tjx40fMd-kbDFx9vw.js","./index-B8jc3R3Y-DRPpukME.js","./index-CabmG4oY-CGkQts9N.js","./table-state-manager-CQv-OGS1-24xBkGVS.js","./index-DIsrZz1v-CfzCgDS9.js","./index-DyJM8kjq-u9lMOvrx.js","./index-Bcz8meSs-WA5qj3ta.js","./index-Dr1s3TmU-DJEvoFNu.js","./index-Dfj2vO5M-DPcjyD6H.js","./index-PSDu7VmZ-Ct9vFxOi.js","./index-BsxLcVtw-CnGaJN6W.js","./index-25Z1fbt7-zvMEZTOd.js","./index-BzmEpvZx-D0-O9B3x.js","./index-BdlNnUMT-B_mTzHAk.js","./index-cRInSZkq-D_dfo1il.js","./index-DOx2BZjw-BJaRak_0.js","./index-CJnA3qdc-Dtl1hPru.js","./screen-BRctjP38-Dtq4IITu.js","./screen-C2TWWEbc-DsENoiQ-.js","./screen-BcX9zXg8-BdYK3iHm.js","./screen-DJOm0-ro-Bls3W9xV.js","./marked.esm-DgqJBp_S-CCvGNfAT.js","./screen-Ch7JUwmt-D9xgg2v5.js","./index-Dc4yX_Cr-oYkr-in2.js","./screen-DrFdgBNX-zIQkPOIu.js","./screen-DJtQ3R-8-yaZSjRmj.js","./screen-BC5DKtOw-Cz5-LxKX.js","./toggle-switch-control-Dthqmxzf-gaDD-6qf.js","./screen-okiN5Pfd-C0PdoCDA.js","./panel-CSvhyPPE.js"])))=>i.map(i=>d[i]);
import{c as tI,d as Jt,r as Ye,a as Mr,w as Ky,o as ns,b as ET,e as Yw,f as Ie,g as Ne,h as Ce,i as fi,v as Qb,t as Vr,j as Nie,k as Ss,l as mi,m as sn,F as Dn,n as Wn,p as Jr,q as ml,u as Lie,s as nc,x as Zi,T as dEe,y as fEe,z as Qg,A as mEe,B as yEe,C as Pie,D as sB,E as eg,G as tr,_ as Me,H as gEe,I as pe,J as vEe,K as bEe,L as yi,M as JH,N as Ik,O as Ak,P as wEe,Q as zh,R as _Ee,S as xEe,U as YH,V as Wi,W as SEe,X as EEe,Y as oB}from"./main-CsLUkpBy.js";function rI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var TEe={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,s){function o(u,c){if(!i[u]){if(!n[u]){var h=typeof rI=="function"&&rI;if(!c&&h)return h(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var m=i[u]={exports:{}};n[u][0].call(m.exports,function(y){var g=n[u][1][y];return o(g||y)},m,m.exports,r,n,i,s)}return i[u].exports}for(var a=typeof rI=="function"&&rI,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(r,n,i){var s=r("./utils"),o=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,c,h,d,m,y,g,b=[],S=0,E=l.length,x=E,w=s.getTypeOf(l)!=="string";S<l.length;)x=E-S,h=w?(u=l[S++],c=S<E?l[S++]:0,S<E?l[S++]:0):(u=l.charCodeAt(S++),c=S<E?l.charCodeAt(S++):0,S<E?l.charCodeAt(S++):0),d=u>>2,m=(3&u)<<4|c>>4,y=1<x?(15&c)<<2|h>>6:64,g=2<x?63&h:64,b.push(a.charAt(d)+a.charAt(m)+a.charAt(y)+a.charAt(g));return b.join("")},i.decode=function(l){var u,c,h,d,m,y,g=0,b=0,S="data:";if(l.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var E,x=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&x--,l.charAt(l.length-2)===a.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|x):new Array(0|x);g<l.length;)u=a.indexOf(l.charAt(g++))<<2|(d=a.indexOf(l.charAt(g++)))>>4,c=(15&d)<<4|(m=a.indexOf(l.charAt(g++)))>>2,h=(3&m)<<6|(y=a.indexOf(l.charAt(g++))),E[b++]=u,m!==64&&(E[b++]=c),y!==64&&(E[b++]=h);return E}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),o=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function u(c,h,d,m,y){this.compressedSize=c,this.uncompressedSize=h,this.crc32=d,this.compression=m,this.compressedContent=y}u.prototype={getContentWorker:function(){var c=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return c.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,h,d){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(h.compressWorker(d)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),o=function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l}();n.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,c,h,d){var m=o,y=d+h;u^=-1;for(var g=d;g<y;g++)u=u>>>8^m[255&(u^c[g])];return-1^u}(0|l,a,a.length,0):function(u,c,h,d){var m=o,y=d+h;u^=-1;for(var g=d;g<y;g++)u=u>>>8^m[255&(u^c.charCodeAt(g))];return-1^u}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=r("pako"),a=r("./utils"),l=r("./stream/GenericWorker"),u=s?"uint8array":"array";function c(h,d){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=d,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,h.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(d){h.push({data:d,meta:h.meta})}},i.compressWorker=function(h){return new c("Deflate",h)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(m,y){var g,b="";for(g=0;g<y;g++)b+=String.fromCharCode(255&m),m>>>=8;return b}function o(m,y,g,b,S,E){var x,w,T=m.file,I=m.compression,M=E!==u.utf8encode,C=a.transformTo("string",E(T.name)),k=a.transformTo("string",u.utf8encode(T.name)),N=T.comment,F=a.transformTo("string",E(N)),P=a.transformTo("string",u.utf8encode(N)),B=k.length!==T.name.length,O=P.length!==N.length,v="",A="",R="",U=T.dir,q=T.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!g||(Q.crc32=m.crc32,Q.compressedSize=m.compressedSize,Q.uncompressedSize=m.uncompressedSize);var ee=0;y&&(ee|=8),M||!B&&!O||(ee|=2048);var Y=0,ue=0;U&&(Y|=16),S==="UNIX"?(ue=798,Y|=function(ce,me){var Se=ce;return ce||(Se=me?16893:33204),(65535&Se)<<16}(T.unixPermissions,U)):(ue=20,Y|=function(ce){return 63&(ce||0)}(T.dosPermissions)),x=q.getUTCHours(),x<<=6,x|=q.getUTCMinutes(),x<<=5,x|=q.getUTCSeconds()/2,w=q.getUTCFullYear()-1980,w<<=4,w|=q.getUTCMonth()+1,w<<=5,w|=q.getUTCDate(),B&&(A=s(1,1)+s(c(C),4)+k,v+="up"+s(A.length,2)+A),O&&(R=s(1,1)+s(c(F),4)+P,v+="uc"+s(R.length,2)+R);var de="";return de+=`
\0`,de+=s(ee,2),de+=I.magic,de+=s(x,2),de+=s(w,2),de+=s(Q.crc32,4),de+=s(Q.compressedSize,4),de+=s(Q.uncompressedSize,4),de+=s(C.length,2),de+=s(v.length,2),{fileRecord:h.LOCAL_FILE_HEADER+de+C+v,dirRecord:h.CENTRAL_FILE_HEADER+s(ue,2)+de+s(F.length,2)+"\0\0\0\0"+s(Y,4)+s(b,4)+C+v+F}}var a=r("../utils"),l=r("../stream/GenericWorker"),u=r("../utf8"),c=r("../crc32"),h=r("../signature");function d(m,y,g,b){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=g,this.encodeFileName=b,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,l),d.prototype.push=function(m){var y=m.meta.percent||0,g=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,l.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(y+100*(g-b-1))/g:100}}))},d.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var y=this.streamFiles&&!m.file.dir;if(y){var g=o(m,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(m){this.accumulate=!1;var y=this.streamFiles&&!m.file.dir,g=o(m,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),y)this.push({data:function(b){return h.DATA_DESCRIPTOR+s(b.crc32,4)+s(b.compressedSize,4)+s(b.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var m=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var g=this.bytesWritten-m,b=function(S,E,x,w,T){var I=a.transformTo("string",T(w));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(S,2)+s(S,2)+s(E,4)+s(x,4)+s(I.length,2)+I}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(m){this._sources.push(m);var y=this;return m.on("data",function(g){y.processChunk(g)}),m.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),m.on("error",function(g){y.error(g)}),this},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(m){var y=this._sources;if(!l.prototype.error.call(this,m))return!1;for(var g=0;g<y.length;g++)try{y[g].error(m)}catch{}return!0},d.prototype.lock=function(){l.prototype.lock.call(this);for(var m=this._sources,y=0;y<m.length;y++)m[y].lock()},n.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),o=r("./ZipFileWorker");i.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{a.forEach(function(d,m){h++;var y=function(E,x){var w=E||x,T=s[w];if(!T)throw new Error(w+" is not a valid compression method !");return T}(m.options.compression,l.compression),g=m.options.compressionOptions||l.compressionOptions||{},b=m.dir,S=m.date;m._compressWorker(y,g).withStreamInfo("file",{name:d,dir:b,date:S,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(c)}),c.entriesCount=h}catch(d){c.error(d)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),o=r("./external"),a=r("./utf8"),l=r("./zipEntries"),u=r("./stream/Crc32Probe"),c=r("./nodejsUtils");function h(d){return new o.Promise(function(m,y){var g=d.decompressed.getContentWorker().pipe(new u);g.on("error",function(b){y(b)}).on("end",function(){g.streamInfo.crc32!==d.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}n.exports=function(d,m){var y=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,m.optimizedBinaryString,m.base64).then(function(g){var b=new l(m);return b.load(g),b}).then(function(g){var b=[o.Promise.resolve(g)],S=g.files;if(m.checkCRC32)for(var E=0;E<S.length;E++)b.push(h(S[E]));return o.Promise.all(b)}).then(function(g){for(var b=g.shift(),S=b.files,E=0;E<S.length;E++){var x=S[E],w=x.fileNameStr,T=s.resolve(x.fileNameStr);y.file(T,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:m.createFolders}),x.dir||(y.file(T).unsafeOriginalName=w)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),o=r("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var c=this;a.on("data",function(h,d){c.push(h)||c._helper.pause(),u&&u(d)}).on("error",function(h){c.emit("error",h)}).on("end",function(){c.push(null)})}r("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(T,I,M){var C,k=a.getTypeOf(I),N=a.extend(M||{},c);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(T=S(T)),N.createFolders&&(C=b(T))&&E.call(this,C,!0);var F=k==="string"&&N.binary===!1&&N.base64===!1;M&&M.binary!==void 0||(N.binary=!F),(I instanceof h&&I.uncompressedSize===0||N.dir||!I||I.length===0)&&(N.base64=!1,N.binary=!0,I="",N.compression="STORE",k="string");var P=null;P=I instanceof h||I instanceof l?I:y.isNode&&y.isStream(I)?new g(T,I):a.prepareContent(T,I,N.binary,N.optimizedBinaryString,N.base64);var B=new d(T,P,N);this.files[T]=B}var o=r("./utf8"),a=r("./utils"),l=r("./stream/GenericWorker"),u=r("./stream/StreamHelper"),c=r("./defaults"),h=r("./compressedObject"),d=r("./zipObject"),m=r("./generate"),y=r("./nodejsUtils"),g=r("./nodejs/NodejsStreamInputAdapter"),b=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var I=T.lastIndexOf("/");return 0<I?T.substring(0,I):""},S=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},E=function(T,I){return I=I!==void 0?I:c.createFolders,T=S(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:I}),this.files[T]};function x(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var I,M,C;for(I in this.files)C=this.files[I],(M=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&T(M,C)},filter:function(T){var I=[];return this.forEach(function(M,C){T(M,C)&&I.push(C)}),I},file:function(T,I,M){if(arguments.length!==1)return T=this.root+T,s.call(this,T,I,M),this;if(x(T)){var C=T;return this.filter(function(N,F){return!F.dir&&C.test(N)})}var k=this.files[this.root+T];return k&&!k.dir?k:null},folder:function(T){if(!T)return this;if(x(T))return this.filter(function(k,N){return N.dir&&T.test(k)});var I=this.root+T,M=E.call(this,I),C=this.clone();return C.root=M.name,C},remove:function(T){T=this.root+T;var I=this.files[T];if(I||(T.slice(-1)!=="/"&&(T+="/"),I=this.files[T]),I&&!I.dir)delete this.files[T];else for(var M=this.filter(function(k,N){return N.name.slice(0,T.length)===T}),C=0;C<M.length;C++)delete this.files[M[C].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var I,M={};try{if((M=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");a.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var C=M.comment||this.comment||"";I=m.generateWorker(this,M,C)}catch(k){(I=new l("error")).error(k)}return new u(I,M.type||"string",M.mimeType)},generateAsync:function(T,I){return this.generateInternalStream(T).accumulate(I)},generateNodeStream:function(T,I){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(I)}};n.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),h=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===l&&this.data[d+1]===u&&this.data[d+2]===c&&this.data[d+3]===h)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),h=a.charCodeAt(3),d=this.readData(4);return l===d[0]&&u===d[1]&&c===d[2]&&h===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=o},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function o(a){s.call(this,a)}r("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),o=r("../support"),a=r("./ArrayReader"),l=r("./StringReader"),u=r("./NodeBufferReader"),c=r("./Uint8ArrayReader");n.exports=function(h){var d=s.getTypeOf(h);return s.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new u(h):o.uint8array?new c(s.transformTo("uint8array",h)):new a(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),o=r("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),o=r("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),o=r("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=s.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),o=r("./ConvertWorker"),a=r("./GenericWorker"),l=r("../base64"),u=r("../support"),c=r("../external"),h=null;if(u.nodestream)try{h=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(y,g){return new c.Promise(function(b,S){var E=[],x=y._internalType,w=y._outputType,T=y._mimeType;y.on("data",function(I,M){E.push(I),g&&g(M)}).on("error",function(I){E=[],S(I)}).on("end",function(){try{var I=function(M,C,k){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",C),k);case"base64":return l.encode(C);default:return s.transformTo(M,C)}}(w,function(M,C){var k,N=0,F=null,P=0;for(k=0;k<C.length;k++)P+=C[k].length;switch(M){case"string":return C.join("");case"array":return Array.prototype.concat.apply([],C);case"uint8array":for(F=new Uint8Array(P),k=0;k<C.length;k++)F.set(C[k],N),N+=C[k].length;return F;case"nodebuffer":return Buffer.concat(C);default:throw new Error("concat : unsupported type '"+M+"'")}}(x,E),T);b(I)}catch(M){S(M)}E=[]}).resume()})}function m(y,g,b){var S=g;switch(g){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=g,this._mimeType=b,s.checkSupport(S),this._worker=y.pipe(new o(S)),y.lock()}catch(E){this._worker=new a("error"),this._worker.error(E)}}m.prototype={accumulate:function(y){return d(this,y)},on:function(y,g){var b=this;return y==="data"?this._worker.on(y,function(S){g.call(b,S.data,S.meta)}):this._worker.on(y,function(){s.delay(g,arguments,b)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),o=r("./support"),a=r("./nodejsUtils"),l=r("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function d(){l.call(this,"utf-8 encode")}i.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(y){var g,b,S,E,x,w=y.length,T=0;for(E=0;E<w;E++)(64512&(b=y.charCodeAt(E)))==55296&&E+1<w&&(64512&(S=y.charCodeAt(E+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),E++),T+=b<128?1:b<2048?2:b<65536?3:4;for(g=o.uint8array?new Uint8Array(T):new Array(T),E=x=0;x<T;E++)(64512&(b=y.charCodeAt(E)))==55296&&E+1<w&&(64512&(S=y.charCodeAt(E+1)))==56320&&(b=65536+(b-55296<<10)+(S-56320),E++),b<128?g[x++]=b:(b<2048?g[x++]=192|b>>>6:(b<65536?g[x++]=224|b>>>12:(g[x++]=240|b>>>18,g[x++]=128|b>>>12&63),g[x++]=128|b>>>6&63),g[x++]=128|63&b);return g}(m)},i.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(y){var g,b,S,E,x=y.length,w=new Array(2*x);for(g=b=0;g<x;)if((S=y[g++])<128)w[b++]=S;else if(4<(E=u[S]))w[b++]=65533,g+=E-1;else{for(S&=E===2?31:E===3?15:7;1<E&&g<x;)S=S<<6|63&y[g++],E--;1<E?w[b++]=65533:S<65536?w[b++]=S:(S-=65536,w[b++]=55296|S>>10&1023,w[b++]=56320|1023&S)}return w.length!==b&&(w.subarray?w=w.subarray(0,b):w.length=b),s.applyFromCharCode(w)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(h,l),h.prototype.processChunk=function(m){var y=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=y;(y=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),y.set(g,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(E,x){var w;for((x=x||E.length)>E.length&&(x=E.length),w=x-1;0<=w&&(192&E[w])==128;)w--;return w<0||w===0?x:w+u[E[w]]>x?w:x}(y),S=y;b!==y.length&&(o.uint8array?(S=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(S=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:i.utf8decode(S),meta:m.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=h,s.inherits(d,l),d.prototype.processChunk=function(m){this.push({data:i.utf8encode(m.data),meta:m.meta})},i.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),o=r("./base64"),a=r("./nodejsUtils"),l=r("./external");function u(g){return g}function c(g,b){for(var S=0;S<g.length;++S)b[S]=255&g.charCodeAt(S);return b}r("setimmediate"),i.newBlob=function(g,b){i.checkSupport("blob");try{return new Blob([g],{type:b})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(g),S.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(g,b,S){var E=[],x=0,w=g.length;if(w<=S)return String.fromCharCode.apply(null,g);for(;x<w;)b==="array"||b==="nodebuffer"?E.push(String.fromCharCode.apply(null,g.slice(x,Math.min(x+S,w)))):E.push(String.fromCharCode.apply(null,g.subarray(x,Math.min(x+S,w)))),x+=S;return E.join("")},stringifyByChar:function(g){for(var b="",S=0;S<g.length;S++)b+=String.fromCharCode(g[S]);return b},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(g){var b=65536,S=i.getTypeOf(g),E=!0;if(S==="uint8array"?E=h.applyCanBeUsed.uint8array:S==="nodebuffer"&&(E=h.applyCanBeUsed.nodebuffer),E)for(;1<b;)try{return h.stringifyByChunk(g,S,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(g)}function m(g,b){for(var S=0;S<g.length;S++)b[S]=g[S];return b}i.applyFromCharCode=d;var y={};y.string={string:u,array:function(g){return c(g,new Array(g.length))},arraybuffer:function(g){return y.string.uint8array(g).buffer},uint8array:function(g){return c(g,new Uint8Array(g.length))},nodebuffer:function(g){return c(g,a.allocBuffer(g.length))}},y.array={string:d,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},y.arraybuffer={string:function(g){return d(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},y.uint8array={string:d,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return a.newBufferFrom(g)}},y.nodebuffer={string:d,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return y.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:u},i.transformTo=function(g,b){if(b=b||"",!g)return b;i.checkSupport(g);var S=i.getTypeOf(b);return y[S][g](b)},i.resolve=function(g){for(var b=g.split("/"),S=[],E=0;E<b.length;E++){var x=b[E];x==="."||x===""&&E!==0&&E!==b.length-1||(x===".."?S.pop():S.push(x))}return S.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var b,S,E="";for(S=0;S<(g||"").length;S++)E+="\\x"+((b=g.charCodeAt(S))<16?"0":"")+b.toString(16).toUpperCase();return E},i.delay=function(g,b,S){setImmediate(function(){g.apply(S||null,b||[])})},i.inherits=function(g,b){function S(){}S.prototype=b.prototype,g.prototype=new S},i.extend=function(){var g,b,S={};for(g=0;g<arguments.length;g++)for(b in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],b)&&S[b]===void 0&&(S[b]=arguments[g][b]);return S},i.prepareContent=function(g,b,S,E,x){return l.Promise.resolve(b).then(function(w){return s.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,I){var M=new FileReader;M.onload=function(C){T(C.target.result)},M.onerror=function(C){I(C.target.error)},M.readAsArrayBuffer(w)}):w}).then(function(w){var T=i.getTypeOf(w);return T?(T==="arraybuffer"?w=i.transformTo("uint8array",w):T==="string"&&(x?w=o.decode(w):S&&E!==!0&&(w=function(I){return c(I,s.uint8array?new Uint8Array(I.length):new Array(I.length))}(w))),w):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./signature"),l=r("./zipEntry"),u=r("./support");function c(h){this.files=[],this.loadOptions=h}c.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(h)+")")}},isSignature:function(h,d){var m=this.reader.index;this.reader.setIndex(h);var y=this.reader.readString(4)===d;return this.reader.setIndex(m),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),d=u.uint8array?"uint8array":"array",m=o.transformTo(d,h);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,d,m,y=this.zip64EndOfCentralSize-44;0<y;)h=this.reader.readInt(2),d=this.reader.readInt(4),m=this.reader.readData(d),this.zip64ExtensibleData[h]={id:h,length:d,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,d;for(h=0;h<this.files.length;h++)d=this.files[h],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var d=h;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var y=d-m;if(0<y)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),o=r("./utils"),a=r("./compressedObject"),l=r("./crc32"),u=r("./utf8"),c=r("./compressions"),h=r("./support");function d(m,y){this.options=m,this.loadOptions=y}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var y,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var S in c)if(Object.prototype.hasOwnProperty.call(c,S)&&c[S].magic===b)return c[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,y,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var y=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(y),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var y,g,b,S=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<S;)y=m.readInt(2),g=m.readInt(2),b=m.readData(g),this.extraFields[y]={id:y,length:g,value:b};m.setIndex(S)},handleUTF8:function(){var m=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var g=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var S=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileName)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var y=s(m.value);return y.readInt(1)!==1||l(this.fileComment)!==y.readInt(4)?null:u.utf8decode(y.readData(m.length-5))}return null}},n.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(y,g,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=g,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var o=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),l=r("./utf8"),u=r("./compressedObject"),c=r("./stream/GenericWorker");s.prototype={internalStream:function(y){var g=null,b="string";try{if(!y)throw new Error("No output type specified.");var S=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),g=this._decompressWorker();var E=!this._dataBinary;E&&!S&&(g=g.pipe(new l.Utf8EncodeWorker)),!E&&S&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(x){(g=new c("error")).error(x)}return new o(g,b,"")},async:function(y,g){return this.internalStream(y).accumulate(g)},nodeStream:function(y,g){return this.internalStream(y||"nodebuffer").toNodejsStream(g)},_compressWorker:function(y,g){if(this._data instanceof u&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(b,y,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<h.length;m++)s.prototype[h[m]]=d;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,c=new l(y),h=s.document.createTextNode("");c.observe(h,{characterData:!0}),o=function(){h.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){y(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(y,0)};else{var d=new s.MessageChannel;d.port1.onmessage=y,o=function(){d.port2.postMessage(0)}}var m=[];function y(){var g,b;a=!0;for(var S=m.length;S;){for(b=m,m=[],g=-1;++g<S;)b[g]();S=m.length}a=!1}n.exports=function(g){m.push(g)!==1||a||o()}}).call(this,typeof tI<"u"?tI:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function h(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&g(this,S)}function d(S,E,x){this.promise=S,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function m(S,E,x){s(function(){var w;try{w=E(x)}catch(T){return a.reject(S,T)}w===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,w)})}function y(S){var E=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof E=="function")return function(){E.apply(S,arguments)}}function g(S,E){var x=!1;function w(M){x||(x=!0,a.reject(S,M))}function T(M){x||(x=!0,a.resolve(S,M))}var I=b(function(){E(T,w)});I.status==="error"&&w(I.value)}function b(S,E){var x={};try{x.value=S(E),x.status="success"}catch(w){x.status="error",x.value=w}return x}(n.exports=h).prototype.finally=function(S){if(typeof S!="function")return this;var E=this.constructor;return this.then(function(x){return E.resolve(S()).then(function(){return x})},function(x){return E.resolve(S()).then(function(){throw x})})},h.prototype.catch=function(S){return this.then(null,S)},h.prototype.then=function(S,E){if(typeof S!="function"&&this.state===u||typeof E!="function"&&this.state===l)return this;var x=new this.constructor(o);return this.state!==c?m(x,this.state===u?S:E,this.outcome):this.queue.push(new d(x,S,E)),x},d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){m(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){m(this.promise,this.onRejected,S)},a.resolve=function(S,E){var x=b(y,E);if(x.status==="error")return a.reject(S,x.value);var w=x.value;if(w)g(S,w);else{S.state=u,S.outcome=E;for(var T=-1,I=S.queue.length;++T<I;)S.queue[T].callFulfilled(E)}return S},a.reject=function(S,E){S.state=l,S.outcome=E;for(var x=-1,w=S.queue.length;++x<w;)S.queue[x].callRejected(E);return S},h.resolve=function(S){return S instanceof this?S:a.resolve(new this(o),S)},h.reject=function(S){var E=new this(o);return a.reject(E,S)},h.all=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=S.length,w=!1;if(!x)return this.resolve([]);for(var T=new Array(x),I=0,M=-1,C=new this(o);++M<x;)k(S[M],M);return C;function k(N,F){E.resolve(N).then(function(P){T[F]=P,++I!==x||w||(w=!0,a.resolve(C,T))},function(P){w||(w=!0,a.reject(C,P))})}},h.race=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=S.length,w=!1;if(!x)return this.resolve([]);for(var T=-1,I=new this(o);++T<x;)M=S[T],E.resolve(M).then(function(C){w||(w=!0,a.resolve(I,C))},function(C){w||(w=!0,a.reject(I,C))});var M;return I}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/messages"),u=r("./zlib/zstream"),c=Object.prototype.toString,h=0,d=-1,m=0,y=8;function g(S){if(!(this instanceof g))return new g(S);this.options=o.assign({level:d,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=s.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(x!==h)throw new Error(l[x]);if(E.header&&s.deflateSetHeader(this.strm,E.header),E.dictionary){var w;if(w=typeof E.dictionary=="string"?a.string2buf(E.dictionary):c.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(x=s.deflateSetDictionary(this.strm,w))!==h)throw new Error(l[x]);this._dict_set=!0}}function b(S,E){var x=new g(E);if(x.push(S,!0),x.err)throw x.msg||l[x.err];return x.result}g.prototype.push=function(S,E){var x,w,T=this.strm,I=this.options.chunkSize;if(this.ended)return!1;w=E===~~E?E:E===!0?4:0,typeof S=="string"?T.input=a.string2buf(S):c.call(S)==="[object ArrayBuffer]"?T.input=new Uint8Array(S):T.input=S,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(I),T.next_out=0,T.avail_out=I),(x=s.deflate(T,w))!==1&&x!==h)return this.onEnd(x),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&x!==1);return w===4?(x=s.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h):w!==2||(this.onEnd(h),!(T.avail_out=0))},g.prototype.onData=function(S){this.chunks.push(S)},g.prototype.onEnd=function(S){S===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},i.Deflate=g,i.deflate=b,i.deflateRaw=function(S,E){return(E=E||{}).raw=!0,b(S,E)},i.gzip=function(S,E){return(E=E||{}).gzip=!0,b(S,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),o=r("./utils/common"),a=r("./utils/strings"),l=r("./zlib/constants"),u=r("./zlib/messages"),c=r("./zlib/zstream"),h=r("./zlib/gzheader"),d=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||g&&g.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var S=s.inflateInit2(this.strm,b.windowBits);if(S!==l.Z_OK)throw new Error(u[S]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function y(g,b){var S=new m(b);if(S.push(g,!0),S.err)throw S.msg||u[S.err];return S.result}m.prototype.push=function(g,b){var S,E,x,w,T,I,M=this.strm,C=this.options.chunkSize,k=this.options.dictionary,N=!1;if(this.ended)return!1;E=b===~~b?b:b===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?M.input=a.binstring2buf(g):d.call(g)==="[object ArrayBuffer]"?M.input=new Uint8Array(g):M.input=g,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new o.Buf8(C),M.next_out=0,M.avail_out=C),(S=s.inflate(M,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&k&&(I=typeof k=="string"?a.string2buf(k):d.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,S=s.inflateSetDictionary(this.strm,I)),S===l.Z_BUF_ERROR&&N===!0&&(S=l.Z_OK,N=!1),S!==l.Z_STREAM_END&&S!==l.Z_OK)return this.onEnd(S),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&S!==l.Z_STREAM_END&&(M.avail_in!==0||E!==l.Z_FINISH&&E!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=a.utf8border(M.output,M.next_out),w=M.next_out-x,T=a.buf2string(M.output,x),M.next_out=w,M.avail_out=C-w,w&&o.arraySet(M.output,M.output,x,w,0),this.onData(T)):this.onData(o.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(N=!0)}while((0<M.avail_in||M.avail_out===0)&&S!==l.Z_STREAM_END);return S===l.Z_STREAM_END&&(E=l.Z_FINISH),E===l.Z_FINISH?(S=s.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===l.Z_OK):E!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(M.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=m,i.inflate=y,i.inflateRaw=function(g,b){return(b=b||{}).raw=!0,y(g,b)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,h,d){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+h),d);else for(var m=0;m<h;m++)l[d+m]=u[c+m]},flattenChunks:function(l){var u,c,h,d,m,y;for(u=h=0,c=l.length;u<c;u++)h+=l[u].length;for(y=new Uint8Array(h),u=d=0,c=l.length;u<c;u++)m=l[u],y.set(m,d),d+=m.length;return y}},a={arraySet:function(l,u,c,h,d){for(var m=0;m<h;m++)l[d+m]=u[c+m]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(h,d){if(d<65537&&(h.subarray&&a||!h.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(h,d));for(var m="",y=0;y<d;y++)m+=String.fromCharCode(h[y]);return m}l[254]=l[254]=1,i.string2buf=function(h){var d,m,y,g,b,S=h.length,E=0;for(g=0;g<S;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<S&&(64512&(y=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),g++),E+=m<128?1:m<2048?2:m<65536?3:4;for(d=new s.Buf8(E),g=b=0;b<E;g++)(64512&(m=h.charCodeAt(g)))==55296&&g+1<S&&(64512&(y=h.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),g++),m<128?d[b++]=m:(m<2048?d[b++]=192|m>>>6:(m<65536?d[b++]=224|m>>>12:(d[b++]=240|m>>>18,d[b++]=128|m>>>12&63),d[b++]=128|m>>>6&63),d[b++]=128|63&m);return d},i.buf2binstring=function(h){return c(h,h.length)},i.binstring2buf=function(h){for(var d=new s.Buf8(h.length),m=0,y=d.length;m<y;m++)d[m]=h.charCodeAt(m);return d},i.buf2string=function(h,d){var m,y,g,b,S=d||h.length,E=new Array(2*S);for(m=y=0;m<S;)if((g=h[m++])<128)E[y++]=g;else if(4<(b=l[g]))E[y++]=65533,m+=b-1;else{for(g&=b===2?31:b===3?15:7;1<b&&m<S;)g=g<<6|63&h[m++],b--;1<b?E[y++]=65533:g<65536?E[y++]=g:(g-=65536,E[y++]=55296|g>>10&1023,E[y++]=56320|1023&g)}return c(E,y)},i.utf8border=function(h,d){var m;for((d=d||h.length)>h.length&&(d=h.length),m=d-1;0<=m&&(192&h[m])==128;)m--;return m<0||m===0?d:m+l[h[m]]>d?m:d}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,o,a,l){for(var u=65535&s|0,c=s>>>16&65535|0,h=0;a!==0;){for(a-=h=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--h;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();n.exports=function(o,a,l,u){var c=s,h=u+l;o^=-1;for(var d=u;d<h;d++)o=o>>>8^c[255&(o^a[d])];return-1^o}},{}],46:[function(r,n,i){var s,o=r("../utils/common"),a=r("./trees"),l=r("./adler32"),u=r("./crc32"),c=r("./messages"),h=0,d=4,m=0,y=-2,g=-1,b=4,S=2,E=8,x=9,w=286,T=30,I=19,M=2*w+1,C=15,k=3,N=258,F=N+k+1,P=42,B=113,O=1,v=2,A=3,R=4;function U(D,K){return D.msg=c[K],K}function q(D){return(D<<1)-(4<D?9:0)}function Q(D){for(var K=D.length;0<=--K;)D[K]=0}function ee(D){var K=D.state,H=K.pending;H>D.avail_out&&(H=D.avail_out),H!==0&&(o.arraySet(D.output,K.pending_buf,K.pending_out,H,D.next_out),D.next_out+=H,K.pending_out+=H,D.total_out+=H,D.avail_out-=H,K.pending-=H,K.pending===0&&(K.pending_out=0))}function Y(D,K){a._tr_flush_block(D,0<=D.block_start?D.block_start:-1,D.strstart-D.block_start,K),D.block_start=D.strstart,ee(D.strm)}function ue(D,K){D.pending_buf[D.pending++]=K}function de(D,K){D.pending_buf[D.pending++]=K>>>8&255,D.pending_buf[D.pending++]=255&K}function ce(D,K){var H,z,L=D.max_chain_length,G=D.strstart,j=D.prev_length,V=D.nice_match,$=D.strstart>D.w_size-F?D.strstart-(D.w_size-F):0,J=D.window,X=D.w_mask,te=D.prev,le=D.strstart+N,ve=J[G+j-1],ke=J[G+j];D.prev_length>=D.good_match&&(L>>=2),V>D.lookahead&&(V=D.lookahead);do if(J[(H=K)+j]===ke&&J[H+j-1]===ve&&J[H]===J[G]&&J[++H]===J[G+1]){G+=2,H++;do;while(J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&J[++G]===J[++H]&&G<le);if(z=N-(le-G),G=le-N,j<z){if(D.match_start=K,V<=(j=z))break;ve=J[G+j-1],ke=J[G+j]}}while((K=te[K&X])>$&&--L!=0);return j<=D.lookahead?j:D.lookahead}function me(D){var K,H,z,L,G,j,V,$,J,X,te=D.w_size;do{if(L=D.window_size-D.lookahead-D.strstart,D.strstart>=te+(te-F)){for(o.arraySet(D.window,D.window,te,te,0),D.match_start-=te,D.strstart-=te,D.block_start-=te,K=H=D.hash_size;z=D.head[--K],D.head[K]=te<=z?z-te:0,--H;);for(K=H=te;z=D.prev[--K],D.prev[K]=te<=z?z-te:0,--H;);L+=te}if(D.strm.avail_in===0)break;if(j=D.strm,V=D.window,$=D.strstart+D.lookahead,J=L,X=void 0,X=j.avail_in,J<X&&(X=J),H=X===0?0:(j.avail_in-=X,o.arraySet(V,j.input,j.next_in,X,$),j.state.wrap===1?j.adler=l(j.adler,V,X,$):j.state.wrap===2&&(j.adler=u(j.adler,V,X,$)),j.next_in+=X,j.total_in+=X,X),D.lookahead+=H,D.lookahead+D.insert>=k)for(G=D.strstart-D.insert,D.ins_h=D.window[G],D.ins_h=(D.ins_h<<D.hash_shift^D.window[G+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[G+k-1])&D.hash_mask,D.prev[G&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=G,G++,D.insert--,!(D.lookahead+D.insert<k)););}while(D.lookahead<F&&D.strm.avail_in!==0)}function Se(D,K){for(var H,z;;){if(D.lookahead<F){if(me(D),D.lookahead<F&&K===h)return O;if(D.lookahead===0)break}if(H=0,D.lookahead>=k&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+k-1])&D.hash_mask,H=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),H!==0&&D.strstart-H<=D.w_size-F&&(D.match_length=ce(D,H)),D.match_length>=k)if(z=a._tr_tally(D,D.strstart-D.match_start,D.match_length-k),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=k){for(D.match_length--;D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+k-1])&D.hash_mask,H=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart,--D.match_length!=0;);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else z=a._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(z&&(Y(D,!1),D.strm.avail_out===0))return O}return D.insert=D.strstart<k-1?D.strstart:k-1,K===d?(Y(D,!0),D.strm.avail_out===0?A:R):D.last_lit&&(Y(D,!1),D.strm.avail_out===0)?O:v}function Oe(D,K){for(var H,z,L;;){if(D.lookahead<F){if(me(D),D.lookahead<F&&K===h)return O;if(D.lookahead===0)break}if(H=0,D.lookahead>=k&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+k-1])&D.hash_mask,H=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=k-1,H!==0&&D.prev_length<D.max_lazy_match&&D.strstart-H<=D.w_size-F&&(D.match_length=ce(D,H),D.match_length<=5&&(D.strategy===1||D.match_length===k&&4096<D.strstart-D.match_start)&&(D.match_length=k-1)),D.prev_length>=k&&D.match_length<=D.prev_length){for(L=D.strstart+D.lookahead-k,z=a._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-k),D.lookahead-=D.prev_length-1,D.prev_length-=2;++D.strstart<=L&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+k-1])&D.hash_mask,H=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),--D.prev_length!=0;);if(D.match_available=0,D.match_length=k-1,D.strstart++,z&&(Y(D,!1),D.strm.avail_out===0))return O}else if(D.match_available){if((z=a._tr_tally(D,0,D.window[D.strstart-1]))&&Y(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return O}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(z=a._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<k-1?D.strstart:k-1,K===d?(Y(D,!0),D.strm.avail_out===0?A:R):D.last_lit&&(Y(D,!1),D.strm.avail_out===0)?O:v}function ye(D,K,H,z,L){this.good_length=D,this.max_lazy=K,this.nice_length=H,this.max_chain=z,this.func=L}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*M),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*I+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(C+1),this.heap=new o.Buf16(2*w+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*w+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(D){var K;return D&&D.state?(D.total_in=D.total_out=0,D.data_type=S,(K=D.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?P:B,D.adler=K.wrap===2?0:1,K.last_flush=h,a._tr_init(K),m):U(D,y)}function dt(D){var K=ze(D);return K===m&&function(H){H.window_size=2*H.w_size,Q(H.head),H.max_lazy_match=s[H.level].max_lazy,H.good_match=s[H.level].good_length,H.nice_match=s[H.level].nice_length,H.max_chain_length=s[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=k-1,H.match_available=0,H.ins_h=0}(D.state),K}function re(D,K,H,z,L,G){if(!D)return y;var j=1;if(K===g&&(K=6),z<0?(j=0,z=-z):15<z&&(j=2,z-=16),L<1||x<L||H!==E||z<8||15<z||K<0||9<K||G<0||b<G)return U(D,y);z===8&&(z=9);var V=new Fe;return(D.state=V).strm=D,V.wrap=j,V.gzhead=null,V.w_bits=z,V.w_size=1<<V.w_bits,V.w_mask=V.w_size-1,V.hash_bits=L+7,V.hash_size=1<<V.hash_bits,V.hash_mask=V.hash_size-1,V.hash_shift=~~((V.hash_bits+k-1)/k),V.window=new o.Buf8(2*V.w_size),V.head=new o.Buf16(V.hash_size),V.prev=new o.Buf16(V.w_size),V.lit_bufsize=1<<L+6,V.pending_buf_size=4*V.lit_bufsize,V.pending_buf=new o.Buf8(V.pending_buf_size),V.d_buf=1*V.lit_bufsize,V.l_buf=3*V.lit_bufsize,V.level=K,V.strategy=G,V.method=H,dt(D)}s=[new ye(0,0,0,0,function(D,K){var H=65535;for(H>D.pending_buf_size-5&&(H=D.pending_buf_size-5);;){if(D.lookahead<=1){if(me(D),D.lookahead===0&&K===h)return O;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var z=D.block_start+H;if((D.strstart===0||D.strstart>=z)&&(D.lookahead=D.strstart-z,D.strstart=z,Y(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-F&&(Y(D,!1),D.strm.avail_out===0))return O}return D.insert=0,K===d?(Y(D,!0),D.strm.avail_out===0?A:R):(D.strstart>D.block_start&&(Y(D,!1),D.strm.avail_out),O)}),new ye(4,4,8,4,Se),new ye(4,5,16,8,Se),new ye(4,6,32,32,Se),new ye(4,4,16,16,Oe),new ye(8,16,32,32,Oe),new ye(8,16,128,128,Oe),new ye(8,32,128,256,Oe),new ye(32,128,258,1024,Oe),new ye(32,258,258,4096,Oe)],i.deflateInit=function(D,K){return re(D,K,E,15,8,0)},i.deflateInit2=re,i.deflateReset=dt,i.deflateResetKeep=ze,i.deflateSetHeader=function(D,K){return D&&D.state?D.state.wrap!==2?y:(D.state.gzhead=K,m):y},i.deflate=function(D,K){var H,z,L,G;if(!D||!D.state||5<K||K<0)return D?U(D,y):y;if(z=D.state,!D.output||!D.input&&D.avail_in!==0||z.status===666&&K!==d)return U(D,D.avail_out===0?-5:y);if(z.strm=D,H=z.last_flush,z.last_flush=K,z.status===P)if(z.wrap===2)D.adler=0,ue(z,31),ue(z,139),ue(z,8),z.gzhead?(ue(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),ue(z,255&z.gzhead.time),ue(z,z.gzhead.time>>8&255),ue(z,z.gzhead.time>>16&255),ue(z,z.gzhead.time>>24&255),ue(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),ue(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(ue(z,255&z.gzhead.extra.length),ue(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(D.adler=u(D.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(ue(z,0),ue(z,0),ue(z,0),ue(z,0),ue(z,0),ue(z,z.level===9?2:2<=z.strategy||z.level<2?4:0),ue(z,3),z.status=B);else{var j=E+(z.w_bits-8<<4)<<8;j|=(2<=z.strategy||z.level<2?0:z.level<6?1:z.level===6?2:3)<<6,z.strstart!==0&&(j|=32),j+=31-j%31,z.status=B,de(z,j),z.strstart!==0&&(de(z,D.adler>>>16),de(z,65535&D.adler)),D.adler=1}if(z.status===69)if(z.gzhead.extra){for(L=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),ee(D),L=z.pending,z.pending!==z.pending_buf_size));)ue(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=73;if(z.status===73)if(z.gzhead.name){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),ee(D),L=z.pending,z.pending===z.pending_buf_size)){G=1;break}G=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0,ue(z,G)}while(G!==0);z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),G===0&&(z.gzindex=0,z.status=91)}else z.status=91;if(z.status===91)if(z.gzhead.comment){L=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),ee(D),L=z.pending,z.pending===z.pending_buf_size)){G=1;break}G=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0,ue(z,G)}while(G!==0);z.gzhead.hcrc&&z.pending>L&&(D.adler=u(D.adler,z.pending_buf,z.pending-L,L)),G===0&&(z.status=103)}else z.status=103;if(z.status===103&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&ee(D),z.pending+2<=z.pending_buf_size&&(ue(z,255&D.adler),ue(z,D.adler>>8&255),D.adler=0,z.status=B)):z.status=B),z.pending!==0){if(ee(D),D.avail_out===0)return z.last_flush=-1,m}else if(D.avail_in===0&&q(K)<=q(H)&&K!==d)return U(D,-5);if(z.status===666&&D.avail_in!==0)return U(D,-5);if(D.avail_in!==0||z.lookahead!==0||K!==h&&z.status!==666){var V=z.strategy===2?function($,J){for(var X;;){if($.lookahead===0&&(me($),$.lookahead===0)){if(J===h)return O;break}if($.match_length=0,X=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++,X&&(Y($,!1),$.strm.avail_out===0))return O}return $.insert=0,J===d?(Y($,!0),$.strm.avail_out===0?A:R):$.last_lit&&(Y($,!1),$.strm.avail_out===0)?O:v}(z,K):z.strategy===3?function($,J){for(var X,te,le,ve,ke=$.window;;){if($.lookahead<=N){if(me($),$.lookahead<=N&&J===h)return O;if($.lookahead===0)break}if($.match_length=0,$.lookahead>=k&&0<$.strstart&&(te=ke[le=$.strstart-1])===ke[++le]&&te===ke[++le]&&te===ke[++le]){ve=$.strstart+N;do;while(te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&te===ke[++le]&&le<ve);$.match_length=N-(ve-le),$.match_length>$.lookahead&&($.match_length=$.lookahead)}if($.match_length>=k?(X=a._tr_tally($,1,$.match_length-k),$.lookahead-=$.match_length,$.strstart+=$.match_length,$.match_length=0):(X=a._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++),X&&(Y($,!1),$.strm.avail_out===0))return O}return $.insert=0,J===d?(Y($,!0),$.strm.avail_out===0?A:R):$.last_lit&&(Y($,!1),$.strm.avail_out===0)?O:v}(z,K):s[z.level].func(z,K);if(V!==A&&V!==R||(z.status=666),V===O||V===A)return D.avail_out===0&&(z.last_flush=-1),m;if(V===v&&(K===1?a._tr_align(z):K!==5&&(a._tr_stored_block(z,0,0,!1),K===3&&(Q(z.head),z.lookahead===0&&(z.strstart=0,z.block_start=0,z.insert=0))),ee(D),D.avail_out===0))return z.last_flush=-1,m}return K!==d?m:z.wrap<=0?1:(z.wrap===2?(ue(z,255&D.adler),ue(z,D.adler>>8&255),ue(z,D.adler>>16&255),ue(z,D.adler>>24&255),ue(z,255&D.total_in),ue(z,D.total_in>>8&255),ue(z,D.total_in>>16&255),ue(z,D.total_in>>24&255)):(de(z,D.adler>>>16),de(z,65535&D.adler)),ee(D),0<z.wrap&&(z.wrap=-z.wrap),z.pending!==0?m:1)},i.deflateEnd=function(D){var K;return D&&D.state?(K=D.state.status)!==P&&K!==69&&K!==73&&K!==91&&K!==103&&K!==B&&K!==666?U(D,y):(D.state=null,K===B?U(D,-3):m):y},i.deflateSetDictionary=function(D,K){var H,z,L,G,j,V,$,J,X=K.length;if(!D||!D.state||(G=(H=D.state).wrap)===2||G===1&&H.status!==P||H.lookahead)return y;for(G===1&&(D.adler=l(D.adler,K,X,0)),H.wrap=0,X>=H.w_size&&(G===0&&(Q(H.head),H.strstart=0,H.block_start=0,H.insert=0),J=new o.Buf8(H.w_size),o.arraySet(J,K,X-H.w_size,H.w_size,0),K=J,X=H.w_size),j=D.avail_in,V=D.next_in,$=D.input,D.avail_in=X,D.next_in=0,D.input=K,me(H);H.lookahead>=k;){for(z=H.strstart,L=H.lookahead-(k-1);H.ins_h=(H.ins_h<<H.hash_shift^H.window[z+k-1])&H.hash_mask,H.prev[z&H.w_mask]=H.head[H.ins_h],H.head[H.ins_h]=z,z++,--L;);H.strstart=z,H.lookahead=k-1,me(H)}return H.strstart+=H.lookahead,H.block_start=H.strstart,H.insert=H.lookahead,H.lookahead=0,H.match_length=H.prev_length=k-1,H.match_available=0,D.next_in=V,D.input=$,D.avail_in=j,H.wrap=G,m},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,o){var a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k,N,F,P,B,O,v;a=s.state,l=s.next_in,O=s.input,u=l+(s.avail_in-5),c=s.next_out,v=s.output,h=c-(o-s.avail_out),d=c+(s.avail_out-257),m=a.dmax,y=a.wsize,g=a.whave,b=a.wnext,S=a.window,E=a.hold,x=a.bits,w=a.lencode,T=a.distcode,I=(1<<a.lenbits)-1,M=(1<<a.distbits)-1;e:do{x<15&&(E+=O[l++]<<x,x+=8,E+=O[l++]<<x,x+=8),C=w[E&I];t:for(;;){if(E>>>=k=C>>>24,x-=k,(k=C>>>16&255)===0)v[c++]=65535&C;else{if(!(16&k)){if(!(64&k)){C=w[(65535&C)+(E&(1<<k)-1)];continue t}if(32&k){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}N=65535&C,(k&=15)&&(x<k&&(E+=O[l++]<<x,x+=8),N+=E&(1<<k)-1,E>>>=k,x-=k),x<15&&(E+=O[l++]<<x,x+=8,E+=O[l++]<<x,x+=8),C=T[E&M];r:for(;;){if(E>>>=k=C>>>24,x-=k,!(16&(k=C>>>16&255))){if(!(64&k)){C=T[(65535&C)+(E&(1<<k)-1)];continue r}s.msg="invalid distance code",a.mode=30;break e}if(F=65535&C,x<(k&=15)&&(E+=O[l++]<<x,(x+=8)<k&&(E+=O[l++]<<x,x+=8)),m<(F+=E&(1<<k)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(E>>>=k,x-=k,(k=c-h)<F){if(g<(k=F-k)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(B=S,(P=0)===b){if(P+=y-k,k<N){for(N-=k;v[c++]=S[P++],--k;);P=c-F,B=v}}else if(b<k){if(P+=y+b-k,(k-=b)<N){for(N-=k;v[c++]=S[P++],--k;);if(P=0,b<N){for(N-=k=b;v[c++]=S[P++],--k;);P=c-F,B=v}}}else if(P+=b-k,k<N){for(N-=k;v[c++]=S[P++],--k;);P=c-F,B=v}for(;2<N;)v[c++]=B[P++],v[c++]=B[P++],v[c++]=B[P++],N-=3;N&&(v[c++]=B[P++],1<N&&(v[c++]=B[P++]))}else{for(P=c-F;v[c++]=v[P++],v[c++]=v[P++],v[c++]=v[P++],2<(N-=3););N&&(v[c++]=v[P++],1<N&&(v[c++]=v[P++]))}break}}break}}while(l<u&&c<d);l-=N=x>>3,E&=(1<<(x-=N<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=c<d?d-c+257:257-(c-d),a.hold=E,a.bits=x}},{}],49:[function(r,n,i){var s=r("../utils/common"),o=r("./adler32"),a=r("./crc32"),l=r("./inffast"),u=r("./inftrees"),c=1,h=2,d=0,m=-2,y=1,g=852,b=592;function S(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(P){var B;return P&&P.state?(B=P.state,P.total_in=P.total_out=B.total=0,P.msg="",B.wrap&&(P.adler=1&B.wrap),B.mode=y,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new s.Buf32(g),B.distcode=B.distdyn=new s.Buf32(b),B.sane=1,B.back=-1,d):m}function w(P){var B;return P&&P.state?((B=P.state).wsize=0,B.whave=0,B.wnext=0,x(P)):m}function T(P,B){var O,v;return P&&P.state?(v=P.state,B<0?(O=0,B=-B):(O=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?m:(v.window!==null&&v.wbits!==B&&(v.window=null),v.wrap=O,v.wbits=B,w(P))):m}function I(P,B){var O,v;return P?(v=new E,(P.state=v).window=null,(O=T(P,B))!==d&&(P.state=null),O):m}var M,C,k=!0;function N(P){if(k){var B;for(M=new s.Buf32(512),C=new s.Buf32(32),B=0;B<144;)P.lens[B++]=8;for(;B<256;)P.lens[B++]=9;for(;B<280;)P.lens[B++]=7;for(;B<288;)P.lens[B++]=8;for(u(c,P.lens,0,288,M,0,P.work,{bits:9}),B=0;B<32;)P.lens[B++]=5;u(h,P.lens,0,32,C,0,P.work,{bits:5}),k=!1}P.lencode=M,P.lenbits=9,P.distcode=C,P.distbits=5}function F(P,B,O,v){var A,R=P.state;return R.window===null&&(R.wsize=1<<R.wbits,R.wnext=0,R.whave=0,R.window=new s.Buf8(R.wsize)),v>=R.wsize?(s.arraySet(R.window,B,O-R.wsize,R.wsize,0),R.wnext=0,R.whave=R.wsize):(v<(A=R.wsize-R.wnext)&&(A=v),s.arraySet(R.window,B,O-v,A,R.wnext),(v-=A)?(s.arraySet(R.window,B,O-v,v,0),R.wnext=v,R.whave=R.wsize):(R.wnext+=A,R.wnext===R.wsize&&(R.wnext=0),R.whave<R.wsize&&(R.whave+=A))),0}i.inflateReset=w,i.inflateReset2=T,i.inflateResetKeep=x,i.inflateInit=function(P){return I(P,15)},i.inflateInit2=I,i.inflate=function(P,B){var O,v,A,R,U,q,Q,ee,Y,ue,de,ce,me,Se,Oe,ye,Fe,ze,dt,re,D,K,H,z,L=0,G=new s.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return m;(O=P.state).mode===12&&(O.mode=13),U=P.next_out,A=P.output,Q=P.avail_out,R=P.next_in,v=P.input,q=P.avail_in,ee=O.hold,Y=O.bits,ue=q,de=Q,K=d;e:for(;;)switch(O.mode){case y:if(O.wrap===0){O.mode=13;break}for(;Y<16;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(2&O.wrap&&ee===35615){G[O.check=0]=255&ee,G[1]=ee>>>8&255,O.check=a(O.check,G,2,0),Y=ee=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&ee)<<8)+(ee>>8))%31){P.msg="incorrect header check",O.mode=30;break}if((15&ee)!=8){P.msg="unknown compression method",O.mode=30;break}if(Y-=4,D=8+(15&(ee>>>=4)),O.wbits===0)O.wbits=D;else if(D>O.wbits){P.msg="invalid window size",O.mode=30;break}O.dmax=1<<D,P.adler=O.check=1,O.mode=512&ee?10:12,Y=ee=0;break;case 2:for(;Y<16;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(O.flags=ee,(255&O.flags)!=8){P.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){P.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=ee>>8&1),512&O.flags&&(G[0]=255&ee,G[1]=ee>>>8&255,O.check=a(O.check,G,2,0)),Y=ee=0,O.mode=3;case 3:for(;Y<32;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.head&&(O.head.time=ee),512&O.flags&&(G[0]=255&ee,G[1]=ee>>>8&255,G[2]=ee>>>16&255,G[3]=ee>>>24&255,O.check=a(O.check,G,4,0)),Y=ee=0,O.mode=4;case 4:for(;Y<16;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.head&&(O.head.xflags=255&ee,O.head.os=ee>>8),512&O.flags&&(G[0]=255&ee,G[1]=ee>>>8&255,O.check=a(O.check,G,2,0)),Y=ee=0,O.mode=5;case 5:if(1024&O.flags){for(;Y<16;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.length=ee,O.head&&(O.head.extra_len=ee),512&O.flags&&(G[0]=255&ee,G[1]=ee>>>8&255,O.check=a(O.check,G,2,0)),Y=ee=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(q<(ce=O.length)&&(ce=q),ce&&(O.head&&(D=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),s.arraySet(O.head.extra,v,R,ce,D)),512&O.flags&&(O.check=a(O.check,v,ce,R)),q-=ce,R+=ce,O.length-=ce),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(q===0)break e;for(ce=0;D=v[R+ce++],O.head&&D&&O.length<65536&&(O.head.name+=String.fromCharCode(D)),D&&ce<q;);if(512&O.flags&&(O.check=a(O.check,v,ce,R)),q-=ce,R+=ce,D)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(q===0)break e;for(ce=0;D=v[R+ce++],O.head&&D&&O.length<65536&&(O.head.comment+=String.fromCharCode(D)),D&&ce<q;);if(512&O.flags&&(O.check=a(O.check,v,ce,R)),q-=ce,R+=ce,D)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;Y<16;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(ee!==(65535&O.check)){P.msg="header crc mismatch",O.mode=30;break}Y=ee=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),P.adler=O.check=0,O.mode=12;break;case 10:for(;Y<32;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}P.adler=O.check=S(ee),Y=ee=0,O.mode=11;case 11:if(O.havedict===0)return P.next_out=U,P.avail_out=Q,P.next_in=R,P.avail_in=q,O.hold=ee,O.bits=Y,2;P.adler=O.check=1,O.mode=12;case 12:if(B===5||B===6)break e;case 13:if(O.last){ee>>>=7&Y,Y-=7&Y,O.mode=27;break}for(;Y<3;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}switch(O.last=1&ee,Y-=1,3&(ee>>>=1)){case 0:O.mode=14;break;case 1:if(N(O),O.mode=20,B!==6)break;ee>>>=2,Y-=2;break e;case 2:O.mode=17;break;case 3:P.msg="invalid block type",O.mode=30}ee>>>=2,Y-=2;break;case 14:for(ee>>>=7&Y,Y-=7&Y;Y<32;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if((65535&ee)!=(ee>>>16^65535)){P.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&ee,Y=ee=0,O.mode=15,B===6)break e;case 15:O.mode=16;case 16:if(ce=O.length){if(q<ce&&(ce=q),Q<ce&&(ce=Q),ce===0)break e;s.arraySet(A,v,R,ce,U),q-=ce,R+=ce,Q-=ce,U+=ce,O.length-=ce;break}O.mode=12;break;case 17:for(;Y<14;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(O.nlen=257+(31&ee),ee>>>=5,Y-=5,O.ndist=1+(31&ee),ee>>>=5,Y-=5,O.ncode=4+(15&ee),ee>>>=4,Y-=4,286<O.nlen||30<O.ndist){P.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;Y<3;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.lens[j[O.have++]]=7&ee,ee>>>=3,Y-=3}for(;O.have<19;)O.lens[j[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,H={bits:O.lenbits},K=u(0,O.lens,0,19,O.lencode,0,O.work,H),O.lenbits=H.bits,K){P.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;ye=(L=O.lencode[ee&(1<<O.lenbits)-1])>>>16&255,Fe=65535&L,!((Oe=L>>>24)<=Y);){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(Fe<16)ee>>>=Oe,Y-=Oe,O.lens[O.have++]=Fe;else{if(Fe===16){for(z=Oe+2;Y<z;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(ee>>>=Oe,Y-=Oe,O.have===0){P.msg="invalid bit length repeat",O.mode=30;break}D=O.lens[O.have-1],ce=3+(3&ee),ee>>>=2,Y-=2}else if(Fe===17){for(z=Oe+3;Y<z;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}Y-=Oe,D=0,ce=3+(7&(ee>>>=Oe)),ee>>>=3,Y-=3}else{for(z=Oe+7;Y<z;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}Y-=Oe,D=0,ce=11+(127&(ee>>>=Oe)),ee>>>=7,Y-=7}if(O.have+ce>O.nlen+O.ndist){P.msg="invalid bit length repeat",O.mode=30;break}for(;ce--;)O.lens[O.have++]=D}}if(O.mode===30)break;if(O.lens[256]===0){P.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,H={bits:O.lenbits},K=u(c,O.lens,0,O.nlen,O.lencode,0,O.work,H),O.lenbits=H.bits,K){P.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,H={bits:O.distbits},K=u(h,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,H),O.distbits=H.bits,K){P.msg="invalid distances set",O.mode=30;break}if(O.mode=20,B===6)break e;case 20:O.mode=21;case 21:if(6<=q&&258<=Q){P.next_out=U,P.avail_out=Q,P.next_in=R,P.avail_in=q,O.hold=ee,O.bits=Y,l(P,de),U=P.next_out,A=P.output,Q=P.avail_out,R=P.next_in,v=P.input,q=P.avail_in,ee=O.hold,Y=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;ye=(L=O.lencode[ee&(1<<O.lenbits)-1])>>>16&255,Fe=65535&L,!((Oe=L>>>24)<=Y);){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(ye&&!(240&ye)){for(ze=Oe,dt=ye,re=Fe;ye=(L=O.lencode[re+((ee&(1<<ze+dt)-1)>>ze)])>>>16&255,Fe=65535&L,!(ze+(Oe=L>>>24)<=Y);){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}ee>>>=ze,Y-=ze,O.back+=ze}if(ee>>>=Oe,Y-=Oe,O.back+=Oe,O.length=Fe,ye===0){O.mode=26;break}if(32&ye){O.back=-1,O.mode=12;break}if(64&ye){P.msg="invalid literal/length code",O.mode=30;break}O.extra=15&ye,O.mode=22;case 22:if(O.extra){for(z=O.extra;Y<z;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.length+=ee&(1<<O.extra)-1,ee>>>=O.extra,Y-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;ye=(L=O.distcode[ee&(1<<O.distbits)-1])>>>16&255,Fe=65535&L,!((Oe=L>>>24)<=Y);){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(!(240&ye)){for(ze=Oe,dt=ye,re=Fe;ye=(L=O.distcode[re+((ee&(1<<ze+dt)-1)>>ze)])>>>16&255,Fe=65535&L,!(ze+(Oe=L>>>24)<=Y);){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}ee>>>=ze,Y-=ze,O.back+=ze}if(ee>>>=Oe,Y-=Oe,O.back+=Oe,64&ye){P.msg="invalid distance code",O.mode=30;break}O.offset=Fe,O.extra=15&ye,O.mode=24;case 24:if(O.extra){for(z=O.extra;Y<z;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}O.offset+=ee&(1<<O.extra)-1,ee>>>=O.extra,Y-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){P.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(Q===0)break e;if(ce=de-Q,O.offset>ce){if((ce=O.offset-ce)>O.whave&&O.sane){P.msg="invalid distance too far back",O.mode=30;break}me=ce>O.wnext?(ce-=O.wnext,O.wsize-ce):O.wnext-ce,ce>O.length&&(ce=O.length),Se=O.window}else Se=A,me=U-O.offset,ce=O.length;for(Q<ce&&(ce=Q),Q-=ce,O.length-=ce;A[U++]=Se[me++],--ce;);O.length===0&&(O.mode=21);break;case 26:if(Q===0)break e;A[U++]=O.length,Q--,O.mode=21;break;case 27:if(O.wrap){for(;Y<32;){if(q===0)break e;q--,ee|=v[R++]<<Y,Y+=8}if(de-=Q,P.total_out+=de,O.total+=de,de&&(P.adler=O.check=O.flags?a(O.check,A,de,U-de):o(O.check,A,de,U-de)),de=Q,(O.flags?ee:S(ee))!==O.check){P.msg="incorrect data check",O.mode=30;break}Y=ee=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;Y<32;){if(q===0)break e;q--,ee+=v[R++]<<Y,Y+=8}if(ee!==(4294967295&O.total)){P.msg="incorrect length check",O.mode=30;break}Y=ee=0}O.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return m}return P.next_out=U,P.avail_out=Q,P.next_in=R,P.avail_in=q,O.hold=ee,O.bits=Y,(O.wsize||de!==P.avail_out&&O.mode<30&&(O.mode<27||B!==4))&&F(P,P.output,P.next_out,de-P.avail_out)?(O.mode=31,-4):(ue-=P.avail_in,de-=P.avail_out,P.total_in+=ue,P.total_out+=de,O.total+=de,O.wrap&&de&&(P.adler=O.check=O.flags?a(O.check,A,de,P.next_out-de):o(O.check,A,de,P.next_out-de)),P.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(ue==0&&de===0||B===4)&&K===d&&(K=-5),K)},i.inflateEnd=function(P){if(!P||!P.state)return m;var B=P.state;return B.window&&(B.window=null),P.state=null,d},i.inflateGetHeader=function(P,B){var O;return P&&P.state&&2&(O=P.state).wrap?((O.head=B).done=!1,d):m},i.inflateSetDictionary=function(P,B){var O,v=B.length;return P&&P.state?(O=P.state).wrap!==0&&O.mode!==11?m:O.mode===11&&o(1,B,v,0)!==O.check?-3:F(P,B,v,v)?(O.mode=31,-4):(O.havedict=1,d):m},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,h,d,m,y,g,b,S){var E,x,w,T,I,M,C,k,N,F=S.bits,P=0,B=0,O=0,v=0,A=0,R=0,U=0,q=0,Q=0,ee=0,Y=null,ue=0,de=new s.Buf16(16),ce=new s.Buf16(16),me=null,Se=0;for(P=0;P<=15;P++)de[P]=0;for(B=0;B<m;B++)de[h[d+B]]++;for(A=F,v=15;1<=v&&de[v]===0;v--);if(v<A&&(A=v),v===0)return y[g++]=20971520,y[g++]=20971520,S.bits=1,0;for(O=1;O<v&&de[O]===0;O++);for(A<O&&(A=O),P=q=1;P<=15;P++)if(q<<=1,(q-=de[P])<0)return-1;if(0<q&&(c===0||v!==1))return-1;for(ce[1]=0,P=1;P<15;P++)ce[P+1]=ce[P]+de[P];for(B=0;B<m;B++)h[d+B]!==0&&(b[ce[h[d+B]]++]=B);if(M=c===0?(Y=me=b,19):c===1?(Y=o,ue-=257,me=a,Se-=257,256):(Y=l,me=u,-1),P=O,I=g,U=B=ee=0,w=-1,T=(Q=1<<(R=A))-1,c===1&&852<Q||c===2&&592<Q)return 1;for(;;){for(C=P-U,N=b[B]<M?(k=0,b[B]):b[B]>M?(k=me[Se+b[B]],Y[ue+b[B]]):(k=96,0),E=1<<P-U,O=x=1<<R;y[I+(ee>>U)+(x-=E)]=C<<24|k<<16|N|0,x!==0;);for(E=1<<P-1;ee&E;)E>>=1;if(E!==0?(ee&=E-1,ee+=E):ee=0,B++,--de[P]==0){if(P===v)break;P=h[d+b[B]]}if(A<P&&(ee&T)!==w){for(U===0&&(U=A),I+=O,q=1<<(R=P-U);R+U<v&&!((q-=de[R+U])<=0);)R++,q<<=1;if(Q+=1<<R,c===1&&852<Q||c===2&&592<Q)return 1;y[w=ee&T]=A<<24|R<<16|I-g|0}}return ee!==0&&(y[I+ee]=P-U<<24|64<<16|0),S.bits=A,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),o=0,a=1;function l(L){for(var G=L.length;0<=--G;)L[G]=0}var u=0,c=29,h=256,d=h+1+c,m=30,y=19,g=2*d+1,b=15,S=16,E=7,x=256,w=16,T=17,I=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(d+2));l(F);var P=new Array(2*m);l(P);var B=new Array(512);l(B);var O=new Array(256);l(O);var v=new Array(c);l(v);var A,R,U,q=new Array(m);function Q(L,G,j,V,$){this.static_tree=L,this.extra_bits=G,this.extra_base=j,this.elems=V,this.max_length=$,this.has_stree=L&&L.length}function ee(L,G){this.dyn_tree=L,this.max_code=0,this.stat_desc=G}function Y(L){return L<256?B[L]:B[256+(L>>>7)]}function ue(L,G){L.pending_buf[L.pending++]=255&G,L.pending_buf[L.pending++]=G>>>8&255}function de(L,G,j){L.bi_valid>S-j?(L.bi_buf|=G<<L.bi_valid&65535,ue(L,L.bi_buf),L.bi_buf=G>>S-L.bi_valid,L.bi_valid+=j-S):(L.bi_buf|=G<<L.bi_valid&65535,L.bi_valid+=j)}function ce(L,G,j){de(L,j[2*G],j[2*G+1])}function me(L,G){for(var j=0;j|=1&L,L>>>=1,j<<=1,0<--G;);return j>>>1}function Se(L,G,j){var V,$,J=new Array(b+1),X=0;for(V=1;V<=b;V++)J[V]=X=X+j[V-1]<<1;for($=0;$<=G;$++){var te=L[2*$+1];te!==0&&(L[2*$]=me(J[te]++,te))}}function Oe(L){var G;for(G=0;G<d;G++)L.dyn_ltree[2*G]=0;for(G=0;G<m;G++)L.dyn_dtree[2*G]=0;for(G=0;G<y;G++)L.bl_tree[2*G]=0;L.dyn_ltree[2*x]=1,L.opt_len=L.static_len=0,L.last_lit=L.matches=0}function ye(L){8<L.bi_valid?ue(L,L.bi_buf):0<L.bi_valid&&(L.pending_buf[L.pending++]=L.bi_buf),L.bi_buf=0,L.bi_valid=0}function Fe(L,G,j,V){var $=2*G,J=2*j;return L[$]<L[J]||L[$]===L[J]&&V[G]<=V[j]}function ze(L,G,j){for(var V=L.heap[j],$=j<<1;$<=L.heap_len&&($<L.heap_len&&Fe(G,L.heap[$+1],L.heap[$],L.depth)&&$++,!Fe(G,V,L.heap[$],L.depth));)L.heap[j]=L.heap[$],j=$,$<<=1;L.heap[j]=V}function dt(L,G,j){var V,$,J,X,te=0;if(L.last_lit!==0)for(;V=L.pending_buf[L.d_buf+2*te]<<8|L.pending_buf[L.d_buf+2*te+1],$=L.pending_buf[L.l_buf+te],te++,V===0?ce(L,$,G):(ce(L,(J=O[$])+h+1,G),(X=M[J])!==0&&de(L,$-=v[J],X),ce(L,J=Y(--V),j),(X=C[J])!==0&&de(L,V-=q[J],X)),te<L.last_lit;);ce(L,x,G)}function re(L,G){var j,V,$,J=G.dyn_tree,X=G.stat_desc.static_tree,te=G.stat_desc.has_stree,le=G.stat_desc.elems,ve=-1;for(L.heap_len=0,L.heap_max=g,j=0;j<le;j++)J[2*j]!==0?(L.heap[++L.heap_len]=ve=j,L.depth[j]=0):J[2*j+1]=0;for(;L.heap_len<2;)J[2*($=L.heap[++L.heap_len]=ve<2?++ve:0)]=1,L.depth[$]=0,L.opt_len--,te&&(L.static_len-=X[2*$+1]);for(G.max_code=ve,j=L.heap_len>>1;1<=j;j--)ze(L,J,j);for($=le;j=L.heap[1],L.heap[1]=L.heap[L.heap_len--],ze(L,J,1),V=L.heap[1],L.heap[--L.heap_max]=j,L.heap[--L.heap_max]=V,J[2*$]=J[2*j]+J[2*V],L.depth[$]=(L.depth[j]>=L.depth[V]?L.depth[j]:L.depth[V])+1,J[2*j+1]=J[2*V+1]=$,L.heap[1]=$++,ze(L,J,1),2<=L.heap_len;);L.heap[--L.heap_max]=L.heap[1],function(ke,je){var yt,ft,Ot,ct,Te,ht,nt=je.dyn_tree,$t=je.max_code,Wt=je.stat_desc.static_tree,vn=je.stat_desc.has_stree,Xn=je.stat_desc.extra_bits,ss=je.stat_desc.extra_base,Ei=je.stat_desc.max_length,os=0;for(ct=0;ct<=b;ct++)ke.bl_count[ct]=0;for(nt[2*ke.heap[ke.heap_max]+1]=0,yt=ke.heap_max+1;yt<g;yt++)Ei<(ct=nt[2*nt[2*(ft=ke.heap[yt])+1]+1]+1)&&(ct=Ei,os++),nt[2*ft+1]=ct,$t<ft||(ke.bl_count[ct]++,Te=0,ss<=ft&&(Te=Xn[ft-ss]),ht=nt[2*ft],ke.opt_len+=ht*(ct+Te),vn&&(ke.static_len+=ht*(Wt[2*ft+1]+Te)));if(os!==0){do{for(ct=Ei-1;ke.bl_count[ct]===0;)ct--;ke.bl_count[ct]--,ke.bl_count[ct+1]+=2,ke.bl_count[Ei]--,os-=2}while(0<os);for(ct=Ei;ct!==0;ct--)for(ft=ke.bl_count[ct];ft!==0;)$t<(Ot=ke.heap[--yt])||(nt[2*Ot+1]!==ct&&(ke.opt_len+=(ct-nt[2*Ot+1])*nt[2*Ot],nt[2*Ot+1]=ct),ft--)}}(L,G),Se(J,ve,L.bl_count)}function D(L,G,j){var V,$,J=-1,X=G[1],te=0,le=7,ve=4;for(X===0&&(le=138,ve=3),G[2*(j+1)+1]=65535,V=0;V<=j;V++)$=X,X=G[2*(V+1)+1],++te<le&&$===X||(te<ve?L.bl_tree[2*$]+=te:$!==0?($!==J&&L.bl_tree[2*$]++,L.bl_tree[2*w]++):te<=10?L.bl_tree[2*T]++:L.bl_tree[2*I]++,J=$,ve=(te=0)===X?(le=138,3):$===X?(le=6,3):(le=7,4))}function K(L,G,j){var V,$,J=-1,X=G[1],te=0,le=7,ve=4;for(X===0&&(le=138,ve=3),V=0;V<=j;V++)if($=X,X=G[2*(V+1)+1],!(++te<le&&$===X)){if(te<ve)for(;ce(L,$,L.bl_tree),--te!=0;);else $!==0?($!==J&&(ce(L,$,L.bl_tree),te--),ce(L,w,L.bl_tree),de(L,te-3,2)):te<=10?(ce(L,T,L.bl_tree),de(L,te-3,3)):(ce(L,I,L.bl_tree),de(L,te-11,7));J=$,ve=(te=0)===X?(le=138,3):$===X?(le=6,3):(le=7,4)}}l(q);var H=!1;function z(L,G,j,V){de(L,(u<<1)+(V?1:0),3),function($,J,X,te){ye($),ue($,X),ue($,~X),s.arraySet($.pending_buf,$.window,J,X,$.pending),$.pending+=X}(L,G,j)}i._tr_init=function(L){H||(function(){var G,j,V,$,J,X=new Array(b+1);for($=V=0;$<c-1;$++)for(v[$]=V,G=0;G<1<<M[$];G++)O[V++]=$;for(O[V-1]=$,$=J=0;$<16;$++)for(q[$]=J,G=0;G<1<<C[$];G++)B[J++]=$;for(J>>=7;$<m;$++)for(q[$]=J<<7,G=0;G<1<<C[$]-7;G++)B[256+J++]=$;for(j=0;j<=b;j++)X[j]=0;for(G=0;G<=143;)F[2*G+1]=8,G++,X[8]++;for(;G<=255;)F[2*G+1]=9,G++,X[9]++;for(;G<=279;)F[2*G+1]=7,G++,X[7]++;for(;G<=287;)F[2*G+1]=8,G++,X[8]++;for(Se(F,d+1,X),G=0;G<m;G++)P[2*G+1]=5,P[2*G]=me(G,5);A=new Q(F,M,h+1,d,b),R=new Q(P,C,0,m,b),U=new Q(new Array(0),k,0,y,E)}(),H=!0),L.l_desc=new ee(L.dyn_ltree,A),L.d_desc=new ee(L.dyn_dtree,R),L.bl_desc=new ee(L.bl_tree,U),L.bi_buf=0,L.bi_valid=0,Oe(L)},i._tr_stored_block=z,i._tr_flush_block=function(L,G,j,V){var $,J,X=0;0<L.level?(L.strm.data_type===2&&(L.strm.data_type=function(te){var le,ve=4093624447;for(le=0;le<=31;le++,ve>>>=1)if(1&ve&&te.dyn_ltree[2*le]!==0)return o;if(te.dyn_ltree[18]!==0||te.dyn_ltree[20]!==0||te.dyn_ltree[26]!==0)return a;for(le=32;le<h;le++)if(te.dyn_ltree[2*le]!==0)return a;return o}(L)),re(L,L.l_desc),re(L,L.d_desc),X=function(te){var le;for(D(te,te.dyn_ltree,te.l_desc.max_code),D(te,te.dyn_dtree,te.d_desc.max_code),re(te,te.bl_desc),le=y-1;3<=le&&te.bl_tree[2*N[le]+1]===0;le--);return te.opt_len+=3*(le+1)+5+5+4,le}(L),$=L.opt_len+3+7>>>3,(J=L.static_len+3+7>>>3)<=$&&($=J)):$=J=j+5,j+4<=$&&G!==-1?z(L,G,j,V):L.strategy===4||J===$?(de(L,2+(V?1:0),3),dt(L,F,P)):(de(L,4+(V?1:0),3),function(te,le,ve,ke){var je;for(de(te,le-257,5),de(te,ve-1,5),de(te,ke-4,4),je=0;je<ke;je++)de(te,te.bl_tree[2*N[je]+1],3);K(te,te.dyn_ltree,le-1),K(te,te.dyn_dtree,ve-1)}(L,L.l_desc.max_code+1,L.d_desc.max_code+1,X+1),dt(L,L.dyn_ltree,L.dyn_dtree)),Oe(L),V&&ye(L)},i._tr_tally=function(L,G,j){return L.pending_buf[L.d_buf+2*L.last_lit]=G>>>8&255,L.pending_buf[L.d_buf+2*L.last_lit+1]=255&G,L.pending_buf[L.l_buf+L.last_lit]=255&j,L.last_lit++,G===0?L.dyn_ltree[2*j]++:(L.matches++,G--,L.dyn_ltree[2*(O[j]+h+1)]++,L.dyn_dtree[2*Y(G)]++),L.last_lit===L.lit_bufsize-1},i._tr_align=function(L){de(L,2,3),ce(L,x,F),function(G){G.bi_valid===16?(ue(G,G.bi_buf),G.bi_buf=0,G.bi_valid=0):8<=G.bi_valid&&(G.pending_buf[G.pending++]=255&G.bi_buf,G.bi_buf>>=8,G.bi_valid-=8)}(L)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,c,h,d=1,m={},y=!1,g=o.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(o);b=b&&b.setTimeout?b:o,l={}.toString.call(o.process)==="[object process]"?function(w){process.nextTick(function(){E(w)})}:function(){if(o.postMessage&&!o.importScripts){var w=!0,T=o.onmessage;return o.onmessage=function(){w=!1},o.postMessage("","*"),o.onmessage=T,w}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",x,!1):o.attachEvent("onmessage",x),function(w){o.postMessage(h+w,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(w){E(w.data)},function(w){c.port2.postMessage(w)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(w){var T=g.createElement("script");T.onreadystatechange=function(){E(w),T.onreadystatechange=null,u.removeChild(T),T=null},u.appendChild(T)}):function(w){setTimeout(E,0,w)},b.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var T=new Array(arguments.length-1),I=0;I<T.length;I++)T[I]=arguments[I+1];var M={callback:w,args:T};return m[d]=M,l(d),d++},b.clearImmediate=S}function S(w){delete m[w]}function E(w){if(y)setTimeout(E,0,w);else{var T=m[w];if(T){y=!0;try{(function(I){var M=I.callback,C=I.args;switch(C.length){case 0:M();break;case 1:M(C[0]);break;case 2:M(C[0],C[1]);break;case 3:M(C[0],C[1],C[2]);break;default:M.apply(a,C)}})(T)}finally{S(w),y=!1}}}}function x(w){w.source===o&&typeof w.data=="string"&&w.data.indexOf(h)===0&&E(+w.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof tI<"u"?tI:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(TEe);var ms=(e=>(e.Text="text",e.Image="image",e.Map="map",e.InteractiveMap="interactive-map",e.Chart="chart",e.Video="video",e.Audio="audio",e.Slideshow="slideshow",e.Dynamic="dynamic",e.Loading="loading",e))(ms||{});const IEe={class:"sticky w-12 duration-500 ease-in-out transition-width"},AEe={class:"flex px-3 py-2"},MEe=["aria-label"],CEe={class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#707070"},kEe=["d"],REe=["d"],OEe={class:"flex items-center mt-3 py-4 w-72 bg-white"},NEe={class:"flex-2 pl-2 ml-4 leading-normal"},LEe=["aria-label"],PEe={class:"dropdown-nav-content bg-white pb-10 w-72 z-10 border-r border-gray-200"},DEe={key:0},FEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},jEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},UEe=["onClick"],BEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},VEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},GEe=Jt({__name:"mobile-menu",props:{returnToTop:{type:Boolean,default:!0},slides:{type:Array,required:!0},activeChapterIndex:{type:Number,required:!0},lang:{type:String},plugin:{type:Boolean,default:!1}},setup(e){const t=e,r=Ye(!1),n=Ye(!0),i=Ye(-1),s=Mr(()=>t.slides.map((l,u)=>({...l,index:u})).filter(l=>l.includeInToc!==!1));Ky(()=>t.activeChapterIndex,()=>{a()}),ns(()=>{const l=document.getElementById("intro");n.value=!!l});const o=l=>{const u=document.getElementById(l);u&&u.scrollIntoView({behavior:"smooth"})},a=()=>{const l=s.value.filter(u=>u.index<=t.activeChapterIndex);i.value=l.length?l[l.length-1].index:-1};return(l,u)=>{const c=ET("router-link"),h=Yw("tippy");return Ie(),Ne("div",IEe,[Ce("div",AEe,[Ce("button",{onClick:u[0]||(u[0]=d=>r.value=!r.value),"aria-label":l.$t("chapters.menu")},[(Ie(),Ne("svg",CEe,[Ce("path",{class:"transition-all duration-500 ease-in-out",d:`m3.5 7h${r.value?"17":"8.5"}`},null,8,kEe),Ce("path",{class:"transition-all duration-500 ease-in-out",d:`m3.5 12h${r.value?"17":"8.5"}`},null,8,REe),u[3]||(u[3]=Ce("path",{d:"m3.5 17h17"},null,-1))]))],8,MEe)]),fi(Ce("div",OEe,[Ce("span",NEe,Vr(l.$t("chapters.title")),1),Ce("button",{onClick:u[1]||(u[1]=d=>r.value=!r.value),"aria-label":l.$t("chapters.menu")},u[4]||(u[4]=[Ce("svg",{class:"flex-shrink-0 mr-4",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#c0c0c0",stroke:"#c0c0c0"},[Ce("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"})],-1)]),8,LEe)],512),[[Qb,r.value]]),fi(Ce("ul",PEe,[n.value&&e.returnToTop?(Ie(),Ne("li",DEe,[e.plugin?(Ie(),Ne("button",{key:0,class:"flex py-1 px-3",onClick:u[2]||(u[2]=d=>o("intro"))},[u[5]||(u[5]=Nie('<svg class="flex-shrink-0" viewBox="0 0 24 24" width="24px" height="24px" fill="#fff" stroke="#878787" xmlns="http://www.w3.org/2000/svg" data-v-8fbd69d5><path data-v-689fab2c="" d="m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z" stroke-width=".93974" style="fill:rgba(255, 255, 255, 0);fill-opacity:0;" transform="matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)" data-v-8fbd69d5></path><g transform="matrix(1, 0, 0, 1, 0.07912001013755887, 1.1142139434814453)" data-v-8fbd69d5><polygon points="11.956 9.662 9.522 12.097 9.862 12.437 11.956 10.344 14.049 12.437 14.39 12.097" style="" data-v-8fbd69d5></polygon><path style="fill:rgb(135, 135, 135);stroke-width:1.5px;" d="M 11.917 10.545 L 11.917 15.649" data-v-8fbd69d5></path></g><rect x="9.114" y="8.74" width="5.842" height="0.487" style="" transform="matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)" data-v-8fbd69d5></rect></svg>',1)),Ce("span",FEe,Vr(l.$t("chapters.return")),1)])):(Ie(),Ss(c,{key:1,to:{hash:"#intro"},class:"flex py-1 px-3",target:""},{default:mi(()=>[u[6]||(u[6]=Ce("svg",{class:"flex-shrink-0",viewBox:"0 0 24 24",width:"24px",height:"24px",fill:"#fff",stroke:"#878787",xmlns:"http://www.w3.org/2000/svg"},[Ce("path",{"data-v-689fab2c":"",d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974",style:{fill:"rgba(255, 255, 255, 0)","fill-opacity":"0"},transform:"matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)"}),Ce("g",{transform:"matrix(1, 0, 0, 1, 0.07912001013755887, 1.1142139434814453)"},[Ce("polygon",{points:"11.956 9.662 9.522 12.097 9.862 12.437 11.956 10.344 14.049 12.437 14.39 12.097",style:{}}),Ce("path",{style:{fill:"rgb(135, 135, 135)","stroke-width":"1.5px"},d:"M 11.917 10.545 L 11.917 15.649"})]),Ce("rect",{x:"9.114",y:"8.74",width:"5.842",height:"0.487",style:{},transform:"matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)"})],-1)),Ce("span",jEe,Vr(l.$t("chapters.return")),1)]),_:1}))])):sn("",!0),(Ie(!0),Ne(Dn,null,Wn(s.value,(d,m)=>(Ie(),Ne("li",{key:m,class:Jr({"is-active":i.value===d.index})},[e.plugin?fi((Ie(),Ne("button",{key:0,class:"flex py-1 px-3",onClick:y=>o(`${d.index}-${d.title.toLowerCase().replaceAll(" ","-")}`)},[u[7]||(u[7]=Ce("svg",{class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",stroke:"#878787"},[Ce("path",{d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974"})],-1)),Ce("span",BEe,Vr(d.title),1)],8,UEe)),[[h,{delay:"200",placement:"top",offset:[0,0],content:d.title,animateFill:!0,animation:"chapter-menu"}]]):fi((Ie(),Ss(c,{key:1,to:{hash:`#${d.index}-${d.title.toLowerCase().replaceAll(" ","-")}`},class:"flex py-1 px-3",target:""},{default:mi(()=>[u[8]||(u[8]=Ce("svg",{class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",stroke:"#878787"},[Ce("path",{d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974"})],-1)),Ce("span",VEe,Vr(d.title),1)]),_:2},1032,["to"])),[[h,{delay:"200",placement:"top",offset:[0,0],content:d.title,animateFill:!0,animation:"chapter-menu"}]])],2))),128))],512),[[Qb,r.value]])])}}}),zEe=ml(GEe,[["__scopeId","data-v-8fbd69d5"]]);(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function e(x){try{return x.defaultView&&x.defaultView.frameElement||null}catch{return null}}var t=function(x){for(var w=x,T=e(w);T;)w=T.ownerDocument,T=e(w);return w}(window.document),r=[],n=null,i=null;function s(x){this.time=x.time,this.target=x.target,this.rootBounds=y(x.rootBounds),this.boundingClientRect=y(x.boundingClientRect),this.intersectionRect=y(x.intersectionRect||m()),this.isIntersecting=!!x.intersectionRect;var w=this.boundingClientRect,T=w.width*w.height,I=this.intersectionRect,M=I.width*I.height;T?this.intersectionRatio=Number((M/T).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function o(x,w){var T=w||{};if(typeof x!="function")throw new Error("callback must be a function");if(T.root&&T.root.nodeType!=1&&T.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=x,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(T.rootMargin),this.thresholds=this._initThresholds(T.threshold),this.root=T.root||null,this.rootMargin=this._rootMarginValues.map(function(I){return I.value+I.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return n||(n=function(x,w){!x||!w?i=m():i=g(x,w),r.forEach(function(T){T._checkForIntersections()})}),n},o._resetCrossOriginUpdater=function(){n=null,i=null},o.prototype.observe=function(x){var w=this._observationTargets.some(function(T){return T.element==x});if(!w){if(!(x&&x.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:x,entry:null}),this._monitorIntersections(x.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(x){this._observationTargets=this._observationTargets.filter(function(w){return w.element!=x}),this._unmonitorIntersections(x.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var x=this._queuedEntries.slice();return this._queuedEntries=[],x},o.prototype._initThresholds=function(x){var w=x||[0];return Array.isArray(w)||(w=[w]),w.sort().filter(function(T,I,M){if(typeof T!="number"||isNaN(T)||T<0||T>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return T!==M[I-1]})},o.prototype._parseRootMargin=function(x){var w=x||"0px",T=w.split(/\s+/).map(function(I){var M=/^(-?\d*\.?\d+)(px|%)$/.exec(I);if(!M)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(M[1]),unit:M[2]}});return T[1]=T[1]||T[0],T[2]=T[2]||T[0],T[3]=T[3]||T[1],T},o.prototype._monitorIntersections=function(x){var w=x.defaultView;if(w&&this._monitoringDocuments.indexOf(x)==-1){var T=this._checkForIntersections,I=null,M=null;this.POLL_INTERVAL?I=w.setInterval(T,this.POLL_INTERVAL):(u(w,"resize",T,!0),u(x,"scroll",T,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in w&&(M=new w.MutationObserver(T),M.observe(x,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(x),this._monitoringUnsubscribes.push(function(){var N=x.defaultView;N&&(I&&N.clearInterval(I),c(N,"resize",T,!0)),c(x,"scroll",T,!0),M&&M.disconnect()});var C=this.root&&(this.root.ownerDocument||this.root)||t;if(x!=C){var k=e(x);k&&this._monitorIntersections(k.ownerDocument)}}},o.prototype._unmonitorIntersections=function(x){var w=this._monitoringDocuments.indexOf(x);if(w!=-1){var T=this.root&&(this.root.ownerDocument||this.root)||t,I=this._observationTargets.some(function(k){var N=k.element.ownerDocument;if(N==x)return!0;for(;N&&N!=T;){var F=e(N);if(N=F&&F.ownerDocument,N==x)return!0}return!1});if(!I){var M=this._monitoringUnsubscribes[w];if(this._monitoringDocuments.splice(w,1),this._monitoringUnsubscribes.splice(w,1),M(),x!=T){var C=e(x);C&&this._unmonitorIntersections(C.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var x=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var w=0;w<x.length;w++)x[w]()},o.prototype._checkForIntersections=function(){if(!(!this.root&&n&&!i)){var x=this._rootIsInDom(),w=x?this._getRootRect():m();this._observationTargets.forEach(function(T){var I=T.element,M=d(I),C=this._rootContainsTarget(I),k=T.entry,N=x&&C&&this._computeTargetAndRootIntersection(I,M,w),F=null;this._rootContainsTarget(I)?(!n||this.root)&&(F=w):F=m();var P=T.entry=new s({time:a(),target:I,boundingClientRect:M,rootBounds:F,intersectionRect:N});k?x&&C?this._hasCrossedThreshold(k,P)&&this._queuedEntries.push(P):k&&k.isIntersecting&&this._queuedEntries.push(P):this._queuedEntries.push(P)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(x,w,T){if(window.getComputedStyle(x).display!="none"){for(var I=w,M=S(x),C=!1;!C&&M;){var k=null,N=M.nodeType==1?window.getComputedStyle(M):{};if(N.display=="none")return null;if(M==this.root||M.nodeType==9)if(C=!0,M==this.root||M==t)n&&!this.root?!i||i.width==0&&i.height==0?(M=null,k=null,I=null):k=i:k=T;else{var F=S(M),P=F&&d(F),B=F&&this._computeTargetAndRootIntersection(F,P,T);P&&B?(M=F,k=g(P,B)):(M=null,I=null)}else{var O=M.ownerDocument;M!=O.body&&M!=O.documentElement&&N.overflow!="visible"&&(k=d(M))}if(k&&(I=h(k,I)),!I)break;M=M&&S(M)}return I}},o.prototype._getRootRect=function(){var x;if(this.root&&!E(this.root))x=d(this.root);else{var w=E(this.root)?this.root:t,T=w.documentElement,I=w.body;x={top:0,left:0,right:T.clientWidth||I.clientWidth,width:T.clientWidth||I.clientWidth,bottom:T.clientHeight||I.clientHeight,height:T.clientHeight||I.clientHeight}}return this._expandRectByRootMargin(x)},o.prototype._expandRectByRootMargin=function(x){var w=this._rootMarginValues.map(function(I,M){return I.unit=="px"?I.value:I.value*(M%2?x.width:x.height)/100}),T={top:x.top-w[0],right:x.right+w[1],bottom:x.bottom+w[2],left:x.left-w[3]};return T.width=T.right-T.left,T.height=T.bottom-T.top,T},o.prototype._hasCrossedThreshold=function(x,w){var T=x&&x.isIntersecting?x.intersectionRatio||0:-1,I=w.isIntersecting?w.intersectionRatio||0:-1;if(T!==I)for(var M=0;M<this.thresholds.length;M++){var C=this.thresholds[M];if(C==T||C==I||C<T!=C<I)return!0}},o.prototype._rootIsInDom=function(){return!this.root||b(t,this.root)},o.prototype._rootContainsTarget=function(x){var w=this.root&&(this.root.ownerDocument||this.root)||t;return b(w,x)&&(!this.root||w==x.ownerDocument)},o.prototype._registerInstance=function(){r.indexOf(this)<0&&r.push(this)},o.prototype._unregisterInstance=function(){var x=r.indexOf(this);x!=-1&&r.splice(x,1)};function a(){return window.performance&&performance.now&&performance.now()}function l(x,w){var T=null;return function(){T||(T=setTimeout(function(){x(),T=null},w))}}function u(x,w,T,I){typeof x.addEventListener=="function"?x.addEventListener(w,T,I):typeof x.attachEvent=="function"&&x.attachEvent("on"+w,T)}function c(x,w,T,I){typeof x.removeEventListener=="function"?x.removeEventListener(w,T,I):typeof x.detachEvent=="function"&&x.detachEvent("on"+w,T)}function h(x,w){var T=Math.max(x.top,w.top),I=Math.min(x.bottom,w.bottom),M=Math.max(x.left,w.left),C=Math.min(x.right,w.right),k=C-M,N=I-T;return k>=0&&N>=0&&{top:T,bottom:I,left:M,right:C,width:k,height:N}||null}function d(x){var w;try{w=x.getBoundingClientRect()}catch{}return w?(w.width&&w.height||(w={top:w.top,right:w.right,bottom:w.bottom,left:w.left,width:w.right-w.left,height:w.bottom-w.top}),w):m()}function m(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function y(x){return!x||"x"in x?x:{top:x.top,y:x.top,bottom:x.bottom,left:x.left,x:x.left,right:x.right,width:x.width,height:x.height}}function g(x,w){var T=w.top-x.top,I=w.left-x.left;return{top:T,left:I,height:w.height,width:w.width,bottom:T+w.height,right:I+w.width}}function b(x,w){for(var T=w;T;){if(T==x)return!0;T=S(T)}return!1}function S(x){var w=x.parentNode;return x.nodeType==9&&x!=t?e(x):(w&&w.assignedSlot&&(w=w.assignedSlot.parentNode),w&&w.nodeType==11&&w.host?w.host:w)}function E(x){return x&&x.nodeType===9}window.IntersectionObserver=o,window.IntersectionObserverEntry=s})();const $Ee={class:"flex items-center mt-4 mb-12"},qEe=["aria-label"],HEe={class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"#707070"},WEe=["d"],ZEe=["d"],JEe={class:"flex-1 ml-4 overflow-hidden leading-normal text-left overflow-ellipsis whitespace-nowrap"},YEe={class:"nav-content menu"},XEe={key:0},QEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},KEe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},eTe=["onClick"],tTe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},rTe={class:"flex-1 ml-4 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},nTe=Jt({__name:"chapter-menu",props:{returnToTop:{type:Boolean,default:!0},slides:{type:Array,required:!0},activeChapterIndex:{type:Number,required:!0},lang:{type:String,required:!0},plugin:{type:Boolean,default:!1}},setup(e){const t=e,r=Ye(!1),n=Ye(!1),i=Ye(-1);Ky(()=>t.activeChapterIndex,()=>{o()}),ns(()=>{const a=document.getElementById("intro");n.value=!!a});const s=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})},o=()=>{const a=t.slides.filter(l=>l.index<=t.activeChapterIndex);i.value=a.length?a[a.length-1].index:-1};return(a,l)=>{const u=ET("router-link"),c=Yw("tippy");return Ie(),Ne("div",{class:Jr([r.value?"w-72":"","nav-bar sticky self-start w-12 duration-500 ease-in-out transition-width"])},[Ce("div",$Ee,[fi((Ie(),Ne("button",{class:"flex items-center flex-shrink-0 px-2 py-1 mx-1 overflow-hidden","aria-label":a.$t("chapters.menu"),onClick:l[0]||(l[0]=h=>r.value=!r.value)},[(Ie(),Ne("svg",HEe,[Ce("path",{class:"transition-all duration-500 ease-in-out",d:`m3.5 7h${r.value?"17":"8.5"}`},null,8,WEe),Ce("path",{class:"transition-all duration-500 ease-in-out",d:`m3.5 12h${r.value?"17":"8.5"}`},null,8,ZEe),l[2]||(l[2]=Ce("path",{d:"m3.5 17h17"},null,-1))])),Ce("span",JEe,Vr(a.$t("chapters.title")),1)],8,qEe)),[[c,{delay:"200",placement:"right",content:a.$t("chapters.title"),onShow:()=>!r.value,animateFill:!0}]])]),Ce("ul",YEe,[n.value&&e.returnToTop?(Ie(),Ne("li",XEe,[e.plugin?fi((Ie(),Ne("a",{key:0,class:"flex items-center px-2 py-1 mx-1 cursor-pointer",onClick:l[1]||(l[1]=h=>s("intro"))},[l[3]||(l[3]=Nie('<svg class="flex-shrink-0" viewBox="0 0 24 24" width="24px" height="24px" fill="#fff" stroke="#878787" xmlns="http://www.w3.org/2000/svg" data-v-0aff07d0><path data-v-689fab2c="" d="m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z" stroke-width=".93974" style="fill:rgba(255, 255, 255, 0);fill-opacity:0;" transform="matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)" data-v-0aff07d0></path><g transform="matrix(1, 0, 0, 1, 0.07912001013755887, 1.1142139434814453)" data-v-0aff07d0><polygon points="11.956 9.662 9.522 12.097 9.862 12.437 11.956 10.344 14.049 12.437 14.39 12.097" style="" data-v-0aff07d0></polygon><path style="fill:rgb(135, 135, 135);stroke-width:1.5px;" d="M 11.917 10.545 L 11.917 15.649" data-v-0aff07d0></path></g><rect x="9.114" y="8.74" width="5.842" height="0.487" style="" transform="matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)" data-v-0aff07d0></rect></svg>',1)),Ce("span",QEe,Vr(a.$t("chapters.return")),1)])),[[c,{delay:"200",placement:"right",content:a.$t("chapters.return"),animateFill:!0,animation:"chapter-menu"}]]):fi((Ie(),Ss(u,{key:1,to:{hash:"#intro"},class:"flex items-center px-2 py-1 mx-1",target:""},{default:mi(()=>[l[4]||(l[4]=Ce("svg",{class:"flex-shrink-0",viewBox:"0 0 24 24",width:"24px",height:"24px",fill:"#fff",stroke:"#878787",xmlns:"http://www.w3.org/2000/svg"},[Ce("path",{"data-v-689fab2c":"",d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974",style:{fill:"rgba(255, 255, 255, 0)","fill-opacity":"0"},transform:"matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)"}),Ce("g",{transform:"matrix(1, 0, 0, 1, 0.07912001013755887, 1.1142139434814453)"},[Ce("polygon",{points:"11.956 9.662 9.522 12.097 9.862 12.437 11.956 10.344 14.049 12.437 14.39 12.097",style:{}}),Ce("path",{style:{fill:"rgb(135, 135, 135)","stroke-width":"1.5px"},d:"M 11.917 10.545 L 11.917 15.649"})]),Ce("rect",{x:"9.114",y:"8.74",width:"5.842",height:"0.487",style:{},transform:"matrix(1, 0, 0, 1, 8.881784197001252e-16, 0)"})],-1)),Ce("span",KEe,Vr(a.$t("chapters.return")),1)]),_:1})),[[c,{delay:"200",placement:"right",content:a.$t("chapters.return"),animateFill:!0,animation:"chapter-menu"}]])])):sn("",!0),(Ie(!0),Ne(Dn,null,Wn(e.slides,(h,d)=>(Ie(),Ne("li",{key:d,class:Jr({"is-active":i.value===h.index})},[e.plugin?fi((Ie(),Ne("a",{key:0,class:"flex items-center px-2 py-1 mx-1 cursor-pointer",onClick:m=>s(`${h.index}-${h.title.toLowerCase().replaceAll(" ","-")}`)},[l[5]||(l[5]=Ce("svg",{class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",stroke:"#878787"},[Ce("path",{d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974"})],-1)),Ce("span",tTe,Vr(h.title),1)],8,eTe)),[[c,{delay:"200",placement:"right",content:h.title,animateFill:!0,animation:"chapter-menu"}]]):fi((Ie(),Ss(u,{key:1,to:{hash:`#${h.index}-${h.title.toLowerCase().replaceAll(" ","-")}`},class:"flex items-center px-2 py-1 mx-1",target:""},{default:mi(()=>[l[6]||(l[6]=Ce("svg",{class:"flex-shrink-0",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",stroke:"#878787"},[Ce("path",{d:"m19.325 16.229c-2.4415 1.4096-4.8829 2.8191-7.3244 4.2286-2.4415-1.4096-4.883-2.8192-7.3245-4.2288-3.55e-5 -2.8191-7.1e-5 -5.6383-1.066e-4 -8.4574 2.4415-1.4096 4.8829-2.8191 7.3244-4.2286 2.4415 1.4096 4.883 2.8192 7.3245 4.2288 3.7e-5 2.8191 7.4e-5 5.6383 1.1e-4 8.4574z","stroke-width":".93974"})],-1)),Ce("span",rTe,Vr(h.title),1)]),_:2},1032,["to"])),[[c,{delay:"200",placement:"right",content:h.title,animateFill:!0,animation:"chapter-menu"}]])],2))),128)),l[7]||(l[7]=Ce("div",{class:"h-10 flex-shrink-0"},null,-1))])],2)}}}),iTe=ml(nTe,[["__scopeId","data-v-0aff07d0"]]),sTe={id:"h-navbar",class:"navbar h-11 sticky"},oTe={key:0},aTe={class:"flex-1 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},lTe={class:"flex-1 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},uTe=["onClick"],cTe={class:"flex-1 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},hTe={class:"flex-1 overflow-hidden leading-normal overflow-ellipsis whitespace-nowrap"},pTe=Jt({__name:"horizontal-menu",props:{returnToTop:{type:Boolean,default:!0},slides:{type:Array,required:!0},activeChapterIndex:{type:Number,required:!0},lang:{type:String,required:!0},plugin:{type:Boolean,default:!1}},setup(e){const{t}=Lie(),r=e,n=Ye(!1),i=Ye(-1);Ky(()=>r.activeChapterIndex,()=>{a()}),ns(()=>{const l=document.getElementById("intro");n.value=!!l});const s=l=>{const u=document.getElementById(l);u&&u.scrollIntoView({behavior:"smooth"})},o=l=>l.title!==""?l.title:t("chapters.untitled"),a=()=>{const l=r.slides.filter(u=>u.index<=r.activeChapterIndex);i.value=l.length?l[l.length-1].index:-1};return(l,u)=>{const c=ET("router-link"),h=Yw("tippy");return Ie(),Ne("div",sTe,[Ce("ul",null,[n.value&&e.returnToTop?(Ie(),Ne("li",oTe,[e.plugin?fi((Ie(),Ne("a",{key:0,class:"flex items-center px-2 py-1 mx-1 cursor-pointer",onClick:u[0]||(u[0]=d=>s("intro"))},[Ce("span",aTe,Vr(l.$t("chapters.return")),1)])),[[h,{delay:"200",placement:"bottom",content:l.$t("chapters.return"),animateFill:!0,animation:"chapter-menu"}]]):fi((Ie(),Ss(c,{key:1,to:{hash:"#intro"},class:"flex items-center px-2 py-1 mx-1",target:""},{default:mi(()=>[Ce("span",lTe,Vr(l.$t("chapters.return")),1)]),_:1})),[[h,{delay:"200",placement:"bottom",content:l.$t("chapters.return"),animateFill:!0,animation:"chapter-menu"}]])])):sn("",!0),(Ie(!0),Ne(Dn,null,Wn(e.slides,(d,m)=>(Ie(),Ne("li",{key:m,class:Jr({"is-active":i.value===d.index,separator:!e.returnToTop&&m!==0||e.returnToTop})},[e.plugin?fi((Ie(),Ne("a",{key:0,class:"flex items-center px-2 py-1 mx-1 cursor-pointer",onClick:y=>s(`${d.index}-${d.title.toLowerCase().replaceAll(" ","-")}`)},[Ce("span",cTe,Vr(o(d)),1)],8,uTe)),[[h,{delay:"200",placement:"bottom",content:o(d),animateFill:!0,animation:"chapter-menu"}]]):fi((Ie(),Ss(c,{key:1,to:{hash:`#${d.index}-${d.title.toLowerCase().replaceAll(" ","-")}`},class:"flex items-center px-2 py-1 mx-1",target:""},{default:mi(()=>[Ce("span",hTe,Vr(o(d)),1)]),_:2},1032,["to"])),[[h,{delay:"200",placement:"bottom",content:o(d),animateFill:!0,animation:"chapter-menu"}]])],2))),128))])])}}}),dTe=ml(pTe,[["__scopeId","data-v-f561fd67"]]),fTe={class:"sticky z-10 grid-background overflow-hidden",style:{top:"60px",height:"100vh"}},mTe={key:0,class:"w-full h-full"},yTe=["src"],gTe=["src"],vTe={key:1,class:"w-full h-full"},bTe=Jt({__name:"background-image",props:{src:{type:String,required:!0},configFileStructure:{type:Object},cssClasses:{type:String}},emits:["background-changed"],setup(e,{emit:t}){const r=t,n=e,i={},s=nc({oldImage:"none",newImage:"none"}),o=Ye(0),a=Ye(-1);Ky(()=>n.src,()=>{l(n.src).then(u=>{if(s.oldImage=u,a.value!==-1){const c=document.getElementById("primaryImage");c&&c.getAnimations().forEach(h=>{h.cancel(),h.play()}),clearTimeout(a.value),a.value=-1}o.value=1,n.src!=="none"&&s.newImage!=="none"?a.value=setTimeout(()=>{n.src!=="none"&&(o.value=0,s.oldImage=s.newImage,s.newImage=u,r("background-changed",!0),a.value=-1)},450):(s.newImage=u,o.value=0,r("background-changed",s.newImage!=="none"))})},{immediate:!1});const l=u=>new Promise(c=>{if(u==="none"){c(u);return}if(i[u]!==void 0){c(i[u]);return}if(n.configFileStructure){const h=`${u.substring(u.indexOf("/")+1)}`,d=n.configFileStructure?.zip.file(h);if(d)d.async("blob").then(m=>{const y=URL.createObjectURL(m);i[u]=y,c(i[u])});else{c(u);return}}else fetch(u).then(h=>h.blob()).then(h=>{const d=URL.createObjectURL(h);i[u]=d,c(i[u])})});return(u,c)=>(Ie(),Ne("div",fTe,[Zi(dEe,{name:"fade",mode:"out-in"},{default:mi(()=>[s.newImage!=="none"?(Ie(),Ne("div",mTe,[s.oldImage!=="none"?(Ie(),Ne("img",{key:0,class:"fade-in transition-img w-full h-full object-cover",role:"presentation",src:s.oldImage},null,8,yTe)):sn("",!0),Ce("img",{class:Jr(["fade-in transition-img w-full h-full object-cover",[e.cssClasses,{"transition-hide":o.value===1}]]),src:s.newImage,id:"primaryImage",role:"presentation"},null,10,gTe)])):(Ie(),Ne("div",vTe))]),_:1})]))}}),wTe=ml(bTe,[["__scopeId","data-v-7da3289c"]]);var Pr={};const _Te="",xTe="",STe="",ETe="",TTe="",ITe="",ATe="",MTe="",CTe="",kTe="",RTe="",OTe="",NTe="",LTe="",PTe="",DTe="",FTe="",jTe="",UTe="",BTe="",VTe="",GTe="",zTe="",$Te="",qTe="",HTe="",WTe="&",ZTe="&",JTe="",YTe="",XTe="",QTe="",KTe="",e3e="",t3e="",r3e="",n3e="",i3e="",s3e="",o3e="",a3e="",l3e="",u3e="",c3e="",h3e="",p3e="",d3e="",f3e="",m3e="",y3e="",g3e="",v3e="",b3e="",w3e="",_3e="",x3e="",S3e="",E3e="",T3e="",I3e="",A3e="",M3e="'",C3e="",k3e="",R3e="",O3e="",N3e="",L3e="",P3e="",D3e="",F3e="*",j3e="",U3e="",B3e="",V3e="",G3e="",z3e="",$3e="",q3e="",H3e="",W3e="",Z3e="",J3e="",Y3e="",X3e="",Q3e="",K3e="",eIe="",tIe="",rIe="",nIe="",iIe="",sIe="",oIe="",aIe="",lIe="",uIe="",cIe="",hIe="",pIe="",dIe="",fIe="",mIe="",yIe="",gIe="",vIe="",bIe="",wIe="",_Ie="",xIe="",SIe="",EIe="",TIe="",IIe="",AIe="",MIe="",CIe="",kIe="",RIe="",OIe="",NIe="",LIe="",PIe="",DIe="",FIe="",jIe="",UIe="",BIe="",VIe="",GIe="",zIe="",$Ie="",qIe="",HIe="",WIe="=",ZIe="",JIe="",YIe="",XIe="",QIe="",KIe="",eAe="",tAe="",rAe="",nAe="",iAe="",sAe="",oAe="",aAe="",lAe="",uAe="",cAe="",hAe="",pAe="",dAe="",fAe="",mAe="",yAe="",gAe="",vAe="",bAe="",wAe="",_Ae="",xAe="",SAe="",EAe="",TAe="",IAe="",AAe="",MAe="",CAe="",kAe="",RAe="",OAe="",NAe="",LAe="",PAe="",DAe="",FAe="",jAe="",UAe="",BAe="",VAe="",GAe="",zAe="",$Ae="",qAe="",HAe="",WAe="",ZAe="",JAe="",YAe="",XAe="",QAe="",KAe="",eMe="",tMe="",rMe="\\",nMe="",iMe="",sMe="",oMe="",aMe="",lMe="",uMe="",cMe="",hMe="",pMe="",dMe="",fMe="",mMe="",yMe="",gMe="",vMe="",bMe="",wMe="",_Me="",xMe="",SMe="",EMe="",TMe="",IMe="",AMe="",MMe="",CMe="",kMe="",RMe="",OMe="",NMe="",LMe="",PMe="",DMe="",FMe="",jMe="",UMe="",BMe="",VMe="",GMe="",zMe="",$Me="",qMe="",HMe="",WMe="",ZMe="",JMe="",YMe="",XMe="",QMe="",KMe="",e4e="",t4e="",r4e="",n4e="",i4e="",s4e="",o4e="",a4e="",l4e="",u4e="",c4e="",h4e="",p4e="",d4e="",f4e="",m4e="",y4e="",g4e="",v4e="",b4e="",w4e="",_4e=":",x4e="",S4e="",E4e="",T4e="",I4e=",",A4e="@",M4e="",C4e="",k4e="",R4e="",O4e="",N4e="",L4e="",P4e="",D4e="",F4e="",j4e="",U4e="",B4e="",V4e="",G4e="",z4e="",$4e="",q4e="",H4e="",W4e="",Z4e="",J4e="",Y4e="",X4e="",Q4e="",K4e="",e5e="",t5e="",r5e="",n5e="",i5e="",s5e="",o5e="",a5e="",l5e="",u5e="",c5e="",h5e="",p5e="",d5e="",f5e="",m5e="",y5e="",g5e="",v5e="",b5e="",w5e="",_5e="",x5e="",S5e="",E5e="",T5e="",I5e="",A5e="",M5e="",C5e="",k5e="",R5e="",O5e="",N5e="",L5e="",P5e="",D5e="",F5e="",j5e="",U5e="",B5e="",V5e="",G5e="",z5e="",$5e="",q5e="",H5e="",W5e="",Z5e="",J5e="",Y5e="",X5e="",Q5e="",K5e="",eCe="",tCe="",rCe="",nCe="",iCe="",sCe="",oCe="",aCe="",lCe="",uCe="",cCe="",hCe="",pCe="`",dCe="",fCe="",mCe="",yCe="",gCe="",vCe="",bCe="",wCe="",_Ce="",xCe="",SCe="",ECe="",TCe="",ICe="",ACe="",MCe="",CCe="",kCe="",RCe="$",OCe="",NCe="",LCe="",PCe="",DCe="",FCe="",jCe="",UCe="",BCe="",VCe="",GCe="",zCe="",$Ce="",qCe="",HCe="",WCe="",ZCe="",JCe="",YCe="",XCe="",QCe="",KCe="",eke="",tke="",rke="",nke="",ike="",ske="",oke="",ake="",lke="",uke="",cke="",hke="",pke="",dke="",fke="",mke="",yke="",gke="",vke="",bke="",wke="",_ke="",xke="",Ske="",Eke="",Tke="",Ike="",Ake="",Mke="",Cke="",kke="",Rke="",Oke="",Nke="",Lke="",Pke="",Dke="",Fke="",jke="",Uke="",Bke="",Vke="",Gke="",zke="",$ke="",qke="",Hke="",Wke="",Zke="",Jke="",Yke="",Xke="",Qke="",Kke="",eRe="",tRe="",rRe="",nRe="",iRe="",sRe="",oRe="",aRe="",lRe="",uRe="",cRe="",hRe="",pRe="",dRe="",fRe="",mRe="",yRe="",gRe="",vRe="",bRe="",wRe="",_Re="",xRe="",SRe="",ERe="",TRe="",IRe="",ARe="",MRe="",CRe="",kRe="",RRe="",ORe="",NRe="",LRe="",PRe="",DRe="",FRe="",jRe="",URe="",BRe="",VRe="",GRe="",zRe="",$Re="",qRe="",HRe="",WRe="=",ZRe="",JRe="",YRe="",XRe="",QRe="",KRe="",eOe="",tOe="",rOe="",nOe="",iOe="",sOe="",oOe="",aOe="",lOe="",uOe="",cOe="",hOe="",pOe="",dOe="",fOe="!",mOe="",yOe="",gOe="",vOe="",bOe="",wOe="",_Oe="",xOe="",SOe="",EOe="",TOe="",IOe="",AOe="",MOe="",COe="",kOe="",ROe="",OOe="fj",NOe="",LOe="",POe="",DOe="",FOe="",jOe="",UOe="",BOe="",VOe="",GOe="",zOe="",$Oe="",qOe="",HOe="",WOe="",ZOe="",JOe="",YOe="",XOe="",QOe="",KOe="",eNe="",tNe="",rNe="",nNe="",iNe="",sNe="",oNe="",aNe="",lNe="",uNe="",cNe="",hNe="",pNe="",dNe="",fNe="",mNe="",yNe="",gNe="",vNe="",bNe="",wNe="",_Ne="",xNe="",SNe="",ENe="",TNe="",INe="",ANe="",MNe="",CNe="",kNe="",RNe="",ONe="",NNe="",LNe="",PNe="",DNe="",FNe="",jNe="",UNe="",BNe="",VNe="",GNe="",zNe="",$Ne="",qNe="",HNe="",WNe="",ZNe="",JNe="",YNe="",XNe="",QNe="",KNe="",eLe="",tLe="",rLe="",nLe="",iLe="",sLe="",oLe="`",aLe="",lLe="",uLe="",cLe="",hLe="",pLe="",dLe="",fLe="",mLe="",yLe="",gLe="",vLe="",bLe="",wLe="",_Le=">",xLe=">",SLe="",ELe="",TLe="",ILe="",ALe="",MLe="",CLe="",kLe="",RLe="",OLe="",NLe="",LLe="",PLe="",DLe="",FLe="",jLe="",ULe="",BLe="",VLe="",GLe="",zLe="",$Le="",qLe="",HLe="^",WLe="",ZLe="",JLe="",YLe="",XLe="",QLe="",KLe="",ePe="",tPe="",rPe="",nPe="",iPe="",sPe="",oPe="",aPe="",lPe="",uPe="",cPe="",hPe="",pPe="",dPe="",fPe="",mPe="",yPe="",gPe="",vPe="",bPe="",wPe="",_Pe="",xPe="",SPe="",EPe="",TPe="",IPe="",APe="",MPe="",CPe="",kPe="",RPe="",OPe="",NPe="",LPe="",PPe="",DPe="",FPe="",jPe="",UPe="",BPe="",VPe="",GPe="",zPe="",$Pe="",qPe="",HPe="",WPe="",ZPe="",JPe="",YPe="",XPe="",QPe="",KPe="",eDe="",tDe="",rDe="",nDe="",iDe="",sDe="",oDe="",aDe="",lDe="",uDe="",cDe="",hDe="",pDe="",dDe="",fDe="",mDe="",yDe="",gDe="",vDe="",bDe="",wDe="",_De="",xDe="",SDe="",EDe="",TDe="",IDe="",ADe="",MDe="",CDe="",kDe="",RDe="",ODe="",NDe="",LDe="",PDe="",DDe="",FDe="",jDe="",UDe="",BDe="",VDe="",GDe="",zDe="",$De="",qDe="",HDe="",WDe="",ZDe="",JDe="",YDe="",XDe="",QDe="",KDe="",e6e="",t6e="",r6e="",n6e="",i6e="",s6e="",o6e="",a6e="",l6e="",u6e="",c6e="",h6e="",p6e="",d6e="",f6e="",m6e="",y6e="",g6e="",v6e="",b6e="",w6e="",_6e="",x6e="",S6e="",E6e="",T6e="",I6e="",A6e="",M6e="",C6e="",k6e="",R6e="",O6e="",N6e="",L6e="",P6e="",D6e="",F6e="",j6e="",U6e="",B6e="",V6e="",G6e="",z6e="",$6e="",q6e="",H6e="",W6e="",Z6e="",J6e="",Y6e="",X6e="",Q6e="",K6e="",e8e="{",t8e="[",r8e="",n8e="",i8e="",s8e="",o8e="",a8e="",l8e="",u8e="",c8e="{",h8e="",p8e="",d8e="",f8e="",m8e="",y8e="",g8e="",v8e="",b8e="",w8e="",_8e="",x8e="",S8e="",E8e="",T8e="",I8e="",A8e="",M8e="",C8e="",k8e="",R8e="",O8e="",N8e="",L8e="",P8e="",D8e="",F8e="",j8e="",U8e="",B8e="",V8e="",G8e="",z8e="",$8e="",q8e="",H8e="",W8e="",Z8e="",J8e="",Y8e="",X8e="",Q8e="",K8e="",e9e="",t9e="",r9e="",n9e="",i9e="",s9e="",o9e="",a9e="",l9e="",u9e="",c9e="",h9e="",p9e="",d9e="",f9e="",m9e="",y9e="",g9e="",v9e="",b9e="",w9e="",_9e="",x9e="",S9e="",E9e="",T9e="",I9e="",A9e="",M9e="",C9e="",k9e="",R9e="",O9e="",N9e="",L9e="",P9e="",D9e="",F9e="",j9e="",U9e="",B9e="",V9e="",G9e="",z9e="",$9e="",q9e="",H9e="",W9e="",Z9e="",J9e="",Y9e="",X9e="",Q9e="",K9e="",eFe="",tFe="",rFe="",nFe="",iFe="",sFe="",oFe="",aFe="",lFe="",uFe="",cFe="",hFe="",pFe="",dFe="",fFe="",mFe="",yFe="",gFe="",vFe="",bFe="",wFe="",_Fe="",xFe="",SFe="",EFe="",TFe="_",IFe="",AFe="",MFe="",CFe="",kFe="",RFe="(",OFe="",NFe="",LFe="",PFe="",DFe="",FFe="",jFe="",UFe="",BFe="",VFe="",GFe="",zFe="",$Fe="",qFe="",HFe="",WFe="[",ZFe="",JFe="",YFe="",XFe="",QFe="",KFe="",e7e="<",t7e="<",r7e="",n7e="",i7e="",s7e="",o7e="",a7e="",l7e="",u7e="",c7e="",h7e="",p7e="",d7e="",f7e="",m7e="",y7e="",g7e="",v7e="",b7e="",w7e="",_7e="",x7e="",S7e="",E7e="",T7e="",I7e="",A7e="",M7e="",C7e="",k7e="",R7e="",O7e="",N7e="",L7e="",P7e="",D7e="",F7e="",j7e="*",U7e="",B7e="",V7e="",G7e="",z7e="",$7e="",q7e="",H7e="",W7e="",Z7e="",J7e="",Y7e="",X7e="",Q7e="",K7e="",eje="",tje="",rje="",nje="",ije="",sje="",oje="",aje="",lje="",uje="",cje="",hje="",pje="",dje="",fje="",mje="",yje="",gje="",vje="",bje="",wje="",_je="",xje="",Sje="",Eje="",Tje="",Ije="",Aje="",Mje="",Cje="",kje="",Rje="",Oje="",Nje="",Lje="",Pje="",Dje="",Fje="",jje="",Uje="",Bje="",Vje="",Gje="",zje="",$je="",qje="",Hje="",Wje="",Zje=`
`,Jje="",Yje="",Xje="",Qje="",Kje="",eUe="",tUe="",rUe="",nUe="",iUe="",sUe="",oUe="",aUe="",lUe="",uUe="",cUe="",hUe="",pUe="",dUe="",fUe="",mUe="",yUe="",gUe="",vUe="",bUe="",wUe="",_Ue="",xUe="",SUe="",EUe="",TUe="",IUe="",AUe="",MUe="",CUe="",kUe="",RUe="",OUe="",NUe="",LUe="",PUe="",DUe="",FUe="",jUe="",UUe="",BUe="",VUe="",GUe="",zUe="",$Ue="",qUe="",HUe="",WUe="",ZUe="",JUe="",YUe="",XUe="",QUe="",KUe="",eBe="",tBe="",rBe="",nBe="",iBe="",sBe="",oBe="",aBe="",lBe="",uBe="",cBe="",hBe="",pBe="",dBe="",fBe="",mBe="",yBe="",gBe="",vBe="",bBe="",wBe="",_Be="",xBe="",SBe="",EBe="",TBe="",IBe="",ABe="",MBe="",CBe="",kBe="",RBe="",OBe="",NBe="",LBe="",PBe="",DBe="",FBe="",jBe="",UBe="",BBe="",VBe="",GBe="",zBe="",$Be="",qBe="",HBe="",WBe="",ZBe="",JBe="",YBe="",XBe="",QBe="",KBe="",eVe="",tVe="",rVe="",nVe="",iVe="",sVe="",oVe="",aVe="",lVe="",uVe="",cVe="",hVe="",pVe="",dVe="",fVe="",mVe="",yVe="",gVe="",vVe="",bVe="",wVe="",_Ve="",xVe="",SVe="",EVe="",TVe="",IVe="",AVe="",MVe="",CVe="",kVe="",RVe="",OVe="",NVe="",LVe="",PVe="",DVe="",FVe="",jVe="",UVe="",BVe="",VVe="",GVe="",zVe="",$Ve="",qVe="",HVe="",WVe="",ZVe="",JVe="",YVe="",XVe="",QVe="",KVe="",eGe="",tGe="",rGe="",nGe="#",iGe="",sGe="",oGe="",aGe="",lGe="",uGe="",cGe="",hGe="",pGe=">",dGe="",fGe="",mGe="",yGe="",gGe="<",vGe="",bGe="",wGe="",_Ge="",xGe="",SGe="",EGe="",TGe="",IGe="",AGe="",MGe="",CGe="",kGe="",RGe="",OGe="",NGe="",LGe="",PGe="",DGe="",FGe="",jGe="",UGe="",BGe="",VGe="",GGe="",zGe="",$Ge="",qGe="",HGe="",WGe="",ZGe="",JGe="",YGe="",XGe="",QGe="",KGe="",eze="",tze="",rze="",nze="",ize="",sze="",oze="",aze="",lze="",uze="",cze="",hze="",pze="",dze="",fze="",mze="",yze="",gze="",vze="",bze="",wze="",_ze="",xze="",Sze="",Eze="",Tze="",Ize="",Aze="",Mze="",Cze="",kze="",Rze="",Oze="",Nze="",Lze="",Pze="",Dze="",Fze="",jze="",Uze="",Bze="",Vze="",Gze="",zze="",$ze="",qze="",Hze="",Wze="",Zze="",Jze="",Yze="",Xze="",Qze="",Kze="",e$e="",t$e="",r$e="",n$e="",i$e="%",s$e=".",o$e="",a$e="",l$e="",u$e="",c$e="",h$e="",p$e="",d$e="",f$e="",m$e="",y$e="",g$e="",v$e="",b$e="",w$e="",_$e="",x$e="",S$e="",E$e="",T$e="",I$e="+",A$e="",M$e="",C$e="",k$e="",R$e="",O$e="",N$e="",L$e="",P$e="",D$e="",F$e="",j$e="",U$e="",B$e="",V$e="",G$e="",z$e="",$$e="",q$e="",H$e="",W$e="",Z$e="",J$e="",Y$e="",X$e="",Q$e="",K$e="",eqe="",tqe="",rqe="",nqe="",iqe="",sqe="",oqe="",aqe="",lqe="",uqe="",cqe="",hqe="",pqe="",dqe="",fqe="",mqe="",yqe="",gqe="",vqe="",bqe="",wqe="",_qe="",xqe="",Sqe="",Eqe="",Tqe="",Iqe="",Aqe="",Mqe="",Cqe="",kqe="",Rqe="",Oqe="",Nqe="",Lqe="",Pqe="",Dqe="?",Fqe="",jqe='"',Uqe='"',Bqe="",Vqe="",Gqe="",zqe="",$qe="",qqe="",Hqe="",Wqe="",Zqe="",Jqe="",Yqe="",Xqe="",Qqe="",Kqe="",eHe="",tHe="",rHe="",nHe="",iHe="",sHe="",oHe="",aHe="",lHe="",uHe="",cHe="",hHe="",pHe="",dHe="",fHe="",mHe="",yHe="",gHe="",vHe="",bHe="",wHe="",_He="}",xHe="]",SHe="",EHe="",THe="",IHe="",AHe="",MHe="",CHe="",kHe="",RHe="}",OHe="",NHe="",LHe="",PHe="",DHe="",FHe="",jHe="",UHe="",BHe="",VHe="",GHe="",zHe="",$He="",qHe="",HHe="",WHe="",ZHe="",JHe="",YHe="",XHe="",QHe="",KHe="",eWe="",tWe="",rWe="",nWe="",iWe="",sWe="",oWe="",aWe="",lWe="",uWe="",cWe="",hWe="",pWe="",dWe="",fWe="",mWe="",yWe="",gWe="",vWe="",bWe="",wWe="",_We="",xWe="",SWe="",EWe="",TWe="",IWe="",AWe="",MWe="",CWe="",kWe="",RWe="",OWe="",NWe="",LWe="",PWe="",DWe="",FWe="",jWe="",UWe="",BWe="",VWe="",GWe="",zWe="",$We="",qWe="",HWe="",WWe="",ZWe="",JWe="",YWe="",XWe="",QWe="",KWe="",eZe="",tZe="",rZe=")",nZe="",iZe="",sZe="",oZe="",aZe="",lZe="",uZe="",cZe="",hZe="",pZe="]",dZe="",fZe="",mZe="",yZe="",gZe="",vZe="",bZe="",wZe="",_Ze="",xZe="",SZe="",EZe="",TZe="",IZe="",AZe="",MZe="",CZe="",kZe="",RZe="",OZe="",NZe="",LZe="",PZe="",DZe="",FZe="",jZe="",UZe="",BZe="",VZe="",GZe="",zZe="",$Ze="",qZe="",HZe="",WZe="",ZZe="",JZe="",YZe="",XZe="",QZe="",KZe="",eJe=";",tJe="",rJe="",nJe="",iJe="",sJe="",oJe="",aJe="",lJe="",uJe="",cJe="",hJe="",pJe="",dJe="",fJe="",mJe="",yJe="",gJe="",vJe="",bJe="",wJe="",_Je="",xJe="",SJe="",EJe="",TJe="",IJe="",AJe="",MJe="",CJe="",kJe="",RJe="",OJe="",NJe="",LJe="",PJe="",DJe="",FJe="",jJe="",UJe="",BJe="",VJe="",GJe="",zJe="",$Je="",qJe="",HJe="",WJe="",ZJe="",JJe="/",YJe="",XJe="",QJe="",KJe="",eYe="",tYe="",rYe="",nYe="",iYe="",sYe="",oYe="",aYe="",lYe="",uYe="",cYe="",hYe="",pYe="",dYe="",fYe="",mYe="",yYe="",gYe="",vYe="",bYe="",wYe="",_Ye="",xYe="",SYe="",EYe="",TYe="",IYe="",AYe="",MYe="",CYe="",kYe="",RYe="",OYe="",NYe="",LYe="",PYe="",DYe="",FYe="",jYe="",UYe="",BYe="",VYe="",GYe="",zYe="",$Ye="",qYe="",HYe="",WYe="",ZYe="",JYe="",YYe="",XYe="",QYe="",KYe="",eXe="",tXe="",rXe="",nXe="",iXe="",sXe="",oXe="",aXe="",lXe="",uXe="",cXe="",hXe="",pXe="",dXe="",fXe="",mXe="",yXe="",gXe="",vXe="",bXe="",wXe="",_Xe="",xXe="",SXe="",EXe="",TXe="",IXe="",AXe="",MXe="",CXe="",kXe="",RXe="",OXe="",NXe="",LXe="",PXe="",DXe="",FXe="",jXe="",UXe="",BXe="",VXe="",GXe="",zXe="",$Xe="",qXe="",HXe="",WXe="",ZXe="",JXe="",YXe="",XXe="",QXe="",KXe="",eQe="	",tQe="",rQe="",nQe="",iQe="",sQe="",oQe="",aQe="",lQe="",uQe="",cQe="",hQe="",pQe="",dQe="",fQe="",mQe="",yQe="",gQe="",vQe="",bQe="",wQe="",_Qe="",xQe="",SQe="",EQe="",TQe="",IQe="",AQe="",MQe="",CQe="",kQe="",RQe="",OQe="",NQe="",LQe="",PQe="",DQe="",FQe="",jQe="",UQe="",BQe="",VQe="",GQe="",zQe="",$Qe="",qQe="",HQe="",WQe="",ZQe="",JQe="",YQe="",XQe="",QQe="",KQe="",eKe="",tKe="",rKe="",nKe="",iKe="",sKe="",oKe="",aKe="",lKe="",uKe="",cKe="",hKe="",pKe="",dKe="",fKe="",mKe="",yKe="",gKe="",vKe="",bKe="",wKe="",_Ke="",xKe="",SKe="",EKe="",TKe="",IKe="",AKe="",MKe="",CKe="",kKe="",RKe="",OKe="",NKe="",LKe="",PKe="",DKe="",FKe="",jKe="",UKe="",BKe="",VKe="",GKe="",zKe="",$Ke="",qKe="",HKe="",WKe="",ZKe="",JKe="",YKe="",XKe="",QKe="",KKe="",eet="",tet="",ret="",net="",iet="_",set="",oet="",aet="",uet="",cet="",het="",pet="",det="",fet="",met="",yet="",get="",vet="",bet="",wet="",_et="",xet="",Eet="",Tet="",Iet="",Aet="",Met="",Cet="",ket="",Ret="",Oet="",Net="",Let="",Pet="",Det="",Fet="",jet="",Uet="",Bet="",Vet="",Get="",zet="",$et="",qet="",Het="",Wet="",Zet="",Jet="",Yet="",Xet="",Qet="",Ket="",ett="",ttt="",rtt="",ntt="",itt="",stt="",ott="",att="",ltt="",utt="",ctt="",htt="",ptt="",dtt="",ftt="",mtt="",ytt="",gtt="",vtt="",btt="",wtt="",_tt="",xtt="",Stt="",Ett="",Ttt="",Itt="",Att="",Mtt="",Ctt="",ktt="",Rtt="",Ott="",Ntt="",Ltt="|",Ptt="",Dtt="|",Ftt="",jtt="",Utt="|",Btt="",Vtt="",Gtt="",ztt="",$tt="",qtt="",Htt="",Wtt="",Ztt="",Jtt="",Ytt="",Xtt="",Qtt="",Ktt="",ert="",trt="",rrt="",nrt="",irt="",srt="",ort="",art="",lrt="",urt="",crt="",hrt="",prt="",drt="",frt="",mrt="",yrt="",grt="",vrt="",brt="",wrt="",_rt="",xrt="",Srt="",Ert="",Trt="",Irt="",Art="",Mrt="",Crt="",krt="",Rrt="",Ort="",Nrt="",Lrt="",Prt="",Drt="",Frt="",jrt="",Urt="",Brt="",Vrt="",Grt="",zrt="",$rt="",qrt="",Hrt="",Wrt="",Zrt="",Jrt="",Yrt="",Xrt="",Qrt="",Krt="",ent="",tnt="",rnt="",nnt="",int="",snt="",ont="",ant="",lnt="",unt="",cnt="",hnt="",pnt="",dnt="",fnt="",mnt="",ynt="",gnt="",vnt="",bnt="",wnt="",_nt="",xnt="",Snt="",Ent="",Tnt="",Int="",Ant="",Mnt="",Cnt="",knt="",Rnt="",Ont="",Nnt="",Lnt="",Pnt="",Dnt="",Fnt="",jnt="",Unt="",Bnt={Aacute:_Te,aacute:xTe,Abreve:STe,abreve:ETe,ac:TTe,acd:ITe,acE:ATe,Acirc:MTe,acirc:CTe,acute:kTe,Acy:RTe,acy:OTe,AElig:NTe,aelig:LTe,af:PTe,Afr:DTe,afr:FTe,Agrave:jTe,agrave:UTe,alefsym:BTe,aleph:VTe,Alpha:GTe,alpha:zTe,Amacr:$Te,amacr:qTe,amalg:HTe,amp:WTe,AMP:ZTe,andand:JTe,And:YTe,and:XTe,andd:QTe,andslope:KTe,andv:e3e,ang:t3e,ange:r3e,angle:n3e,angmsdaa:i3e,angmsdab:s3e,angmsdac:o3e,angmsdad:a3e,angmsdae:l3e,angmsdaf:u3e,angmsdag:c3e,angmsdah:h3e,angmsd:p3e,angrt:d3e,angrtvb:f3e,angrtvbd:m3e,angsph:y3e,angst:g3e,angzarr:v3e,Aogon:b3e,aogon:w3e,Aopf:_3e,aopf:x3e,apacir:S3e,ap:E3e,apE:T3e,ape:I3e,apid:A3e,apos:M3e,ApplyFunction:C3e,approx:k3e,approxeq:R3e,Aring:O3e,aring:N3e,Ascr:L3e,ascr:P3e,Assign:D3e,ast:F3e,asymp:j3e,asympeq:U3e,Atilde:B3e,atilde:V3e,Auml:G3e,auml:z3e,awconint:$3e,awint:q3e,backcong:H3e,backepsilon:W3e,backprime:Z3e,backsim:J3e,backsimeq:Y3e,Backslash:X3e,Barv:Q3e,barvee:K3e,barwed:eIe,Barwed:tIe,barwedge:rIe,bbrk:nIe,bbrktbrk:iIe,bcong:sIe,Bcy:oIe,bcy:aIe,bdquo:lIe,becaus:uIe,because:cIe,Because:hIe,bemptyv:pIe,bepsi:dIe,bernou:fIe,Bernoullis:mIe,Beta:yIe,beta:gIe,beth:vIe,between:bIe,Bfr:wIe,bfr:_Ie,bigcap:xIe,bigcirc:SIe,bigcup:EIe,bigodot:TIe,bigoplus:IIe,bigotimes:AIe,bigsqcup:MIe,bigstar:CIe,bigtriangledown:kIe,bigtriangleup:RIe,biguplus:OIe,bigvee:NIe,bigwedge:LIe,bkarow:PIe,blacklozenge:DIe,blacksquare:FIe,blacktriangle:jIe,blacktriangledown:UIe,blacktriangleleft:BIe,blacktriangleright:VIe,blank:GIe,blk12:zIe,blk14:$Ie,blk34:qIe,block:HIe,bne:WIe,bnequiv:ZIe,bNot:JIe,bnot:YIe,Bopf:XIe,bopf:QIe,bot:KIe,bottom:eAe,bowtie:tAe,boxbox:rAe,boxdl:nAe,boxdL:iAe,boxDl:sAe,boxDL:oAe,boxdr:aAe,boxdR:lAe,boxDr:uAe,boxDR:cAe,boxh:hAe,boxH:pAe,boxhd:dAe,boxHd:fAe,boxhD:mAe,boxHD:yAe,boxhu:gAe,boxHu:vAe,boxhU:bAe,boxHU:wAe,boxminus:_Ae,boxplus:xAe,boxtimes:SAe,boxul:EAe,boxuL:TAe,boxUl:IAe,boxUL:AAe,boxur:MAe,boxuR:CAe,boxUr:kAe,boxUR:RAe,boxv:OAe,boxV:NAe,boxvh:LAe,boxvH:PAe,boxVh:DAe,boxVH:FAe,boxvl:jAe,boxvL:UAe,boxVl:BAe,boxVL:VAe,boxvr:GAe,boxvR:zAe,boxVr:$Ae,boxVR:qAe,bprime:HAe,breve:WAe,Breve:ZAe,brvbar:JAe,bscr:YAe,Bscr:XAe,bsemi:QAe,bsim:KAe,bsime:eMe,bsolb:tMe,bsol:rMe,bsolhsub:nMe,bull:iMe,bullet:sMe,bump:oMe,bumpE:aMe,bumpe:lMe,Bumpeq:uMe,bumpeq:cMe,Cacute:hMe,cacute:pMe,capand:dMe,capbrcup:fMe,capcap:mMe,cap:yMe,Cap:gMe,capcup:vMe,capdot:bMe,CapitalDifferentialD:wMe,caps:_Me,caret:xMe,caron:SMe,Cayleys:EMe,ccaps:TMe,Ccaron:IMe,ccaron:AMe,Ccedil:MMe,ccedil:CMe,Ccirc:kMe,ccirc:RMe,Cconint:OMe,ccups:NMe,ccupssm:LMe,Cdot:PMe,cdot:DMe,cedil:FMe,Cedilla:jMe,cemptyv:UMe,cent:BMe,centerdot:VMe,CenterDot:GMe,cfr:zMe,Cfr:$Me,CHcy:qMe,chcy:HMe,check:WMe,checkmark:ZMe,Chi:JMe,chi:YMe,circ:XMe,circeq:QMe,circlearrowleft:KMe,circlearrowright:e4e,circledast:t4e,circledcirc:r4e,circleddash:n4e,CircleDot:i4e,circledR:s4e,circledS:o4e,CircleMinus:a4e,CirclePlus:l4e,CircleTimes:u4e,cir:c4e,cirE:h4e,cire:p4e,cirfnint:d4e,cirmid:f4e,cirscir:m4e,ClockwiseContourIntegral:y4e,CloseCurlyDoubleQuote:g4e,CloseCurlyQuote:v4e,clubs:b4e,clubsuit:w4e,colon:_4e,Colon:x4e,Colone:S4e,colone:E4e,coloneq:T4e,comma:I4e,commat:A4e,comp:M4e,compfn:C4e,complement:k4e,complexes:R4e,cong:O4e,congdot:N4e,Congruent:L4e,conint:P4e,Conint:D4e,ContourIntegral:F4e,copf:j4e,Copf:U4e,coprod:B4e,Coproduct:V4e,copy:G4e,COPY:z4e,copysr:$4e,CounterClockwiseContourIntegral:q4e,crarr:H4e,cross:W4e,Cross:Z4e,Cscr:J4e,cscr:Y4e,csub:X4e,csube:Q4e,csup:K4e,csupe:e5e,ctdot:t5e,cudarrl:r5e,cudarrr:n5e,cuepr:i5e,cuesc:s5e,cularr:o5e,cularrp:a5e,cupbrcap:l5e,cupcap:u5e,CupCap:c5e,cup:h5e,Cup:p5e,cupcup:d5e,cupdot:f5e,cupor:m5e,cups:y5e,curarr:g5e,curarrm:v5e,curlyeqprec:b5e,curlyeqsucc:w5e,curlyvee:_5e,curlywedge:x5e,curren:S5e,curvearrowleft:E5e,curvearrowright:T5e,cuvee:I5e,cuwed:A5e,cwconint:M5e,cwint:C5e,cylcty:k5e,dagger:R5e,Dagger:O5e,daleth:N5e,darr:L5e,Darr:P5e,dArr:D5e,dash:F5e,Dashv:j5e,dashv:U5e,dbkarow:B5e,dblac:V5e,Dcaron:G5e,dcaron:z5e,Dcy:$5e,dcy:q5e,ddagger:H5e,ddarr:W5e,DD:Z5e,dd:J5e,DDotrahd:Y5e,ddotseq:X5e,deg:Q5e,Del:K5e,Delta:eCe,delta:tCe,demptyv:rCe,dfisht:nCe,Dfr:iCe,dfr:sCe,dHar:oCe,dharl:aCe,dharr:lCe,DiacriticalAcute:uCe,DiacriticalDot:cCe,DiacriticalDoubleAcute:hCe,DiacriticalGrave:pCe,DiacriticalTilde:dCe,diam:fCe,diamond:mCe,Diamond:yCe,diamondsuit:gCe,diams:vCe,die:bCe,DifferentialD:wCe,digamma:_Ce,disin:xCe,div:SCe,divide:ECe,divideontimes:TCe,divonx:ICe,DJcy:ACe,djcy:MCe,dlcorn:CCe,dlcrop:kCe,dollar:RCe,Dopf:OCe,dopf:NCe,Dot:LCe,dot:PCe,DotDot:DCe,doteq:FCe,doteqdot:jCe,DotEqual:UCe,dotminus:BCe,dotplus:VCe,dotsquare:GCe,doublebarwedge:zCe,DoubleContourIntegral:$Ce,DoubleDot:qCe,DoubleDownArrow:HCe,DoubleLeftArrow:WCe,DoubleLeftRightArrow:ZCe,DoubleLeftTee:JCe,DoubleLongLeftArrow:YCe,DoubleLongLeftRightArrow:XCe,DoubleLongRightArrow:QCe,DoubleRightArrow:KCe,DoubleRightTee:eke,DoubleUpArrow:tke,DoubleUpDownArrow:rke,DoubleVerticalBar:nke,DownArrowBar:ike,downarrow:ske,DownArrow:oke,Downarrow:ake,DownArrowUpArrow:lke,DownBreve:uke,downdownarrows:cke,downharpoonleft:hke,downharpoonright:pke,DownLeftRightVector:dke,DownLeftTeeVector:fke,DownLeftVectorBar:mke,DownLeftVector:yke,DownRightTeeVector:gke,DownRightVectorBar:vke,DownRightVector:bke,DownTeeArrow:wke,DownTee:_ke,drbkarow:xke,drcorn:Ske,drcrop:Eke,Dscr:Tke,dscr:Ike,DScy:Ake,dscy:Mke,dsol:Cke,Dstrok:kke,dstrok:Rke,dtdot:Oke,dtri:Nke,dtrif:Lke,duarr:Pke,duhar:Dke,dwangle:Fke,DZcy:jke,dzcy:Uke,dzigrarr:Bke,Eacute:Vke,eacute:Gke,easter:zke,Ecaron:$ke,ecaron:qke,Ecirc:Hke,ecirc:Wke,ecir:Zke,ecolon:Jke,Ecy:Yke,ecy:Xke,eDDot:Qke,Edot:Kke,edot:eRe,eDot:tRe,ee:rRe,efDot:nRe,Efr:iRe,efr:sRe,eg:oRe,Egrave:aRe,egrave:lRe,egs:uRe,egsdot:cRe,el:hRe,Element:pRe,elinters:dRe,ell:fRe,els:mRe,elsdot:yRe,Emacr:gRe,emacr:vRe,empty:bRe,emptyset:wRe,EmptySmallSquare:_Re,emptyv:xRe,EmptyVerySmallSquare:SRe,emsp13:ERe,emsp14:TRe,emsp:IRe,ENG:ARe,eng:MRe,ensp:CRe,Eogon:kRe,eogon:RRe,Eopf:ORe,eopf:NRe,epar:LRe,eparsl:PRe,eplus:DRe,epsi:FRe,Epsilon:jRe,epsilon:URe,epsiv:BRe,eqcirc:VRe,eqcolon:GRe,eqsim:zRe,eqslantgtr:$Re,eqslantless:qRe,Equal:HRe,equals:WRe,EqualTilde:ZRe,equest:JRe,Equilibrium:YRe,equiv:XRe,equivDD:QRe,eqvparsl:KRe,erarr:eOe,erDot:tOe,escr:rOe,Escr:nOe,esdot:iOe,Esim:sOe,esim:oOe,Eta:aOe,eta:lOe,ETH:uOe,eth:cOe,Euml:hOe,euml:pOe,euro:dOe,excl:fOe,exist:mOe,Exists:yOe,expectation:gOe,exponentiale:vOe,ExponentialE:bOe,fallingdotseq:wOe,Fcy:_Oe,fcy:xOe,female:SOe,ffilig:EOe,fflig:TOe,ffllig:IOe,Ffr:AOe,ffr:MOe,filig:COe,FilledSmallSquare:kOe,FilledVerySmallSquare:ROe,fjlig:OOe,flat:NOe,fllig:LOe,fltns:POe,fnof:DOe,Fopf:FOe,fopf:jOe,forall:UOe,ForAll:BOe,fork:VOe,forkv:GOe,Fouriertrf:zOe,fpartint:$Oe,frac12:qOe,frac13:HOe,frac14:WOe,frac15:ZOe,frac16:JOe,frac18:YOe,frac23:XOe,frac25:QOe,frac34:KOe,frac35:eNe,frac38:tNe,frac45:rNe,frac56:nNe,frac58:iNe,frac78:sNe,frasl:oNe,frown:aNe,fscr:lNe,Fscr:uNe,gacute:cNe,Gamma:hNe,gamma:pNe,Gammad:dNe,gammad:fNe,gap:mNe,Gbreve:yNe,gbreve:gNe,Gcedil:vNe,Gcirc:bNe,gcirc:wNe,Gcy:_Ne,gcy:xNe,Gdot:SNe,gdot:ENe,ge:TNe,gE:INe,gEl:ANe,gel:MNe,geq:CNe,geqq:kNe,geqslant:RNe,gescc:ONe,ges:NNe,gesdot:LNe,gesdoto:PNe,gesdotol:DNe,gesl:FNe,gesles:jNe,Gfr:UNe,gfr:BNe,gg:VNe,Gg:GNe,ggg:zNe,gimel:$Ne,GJcy:qNe,gjcy:HNe,gla:WNe,gl:ZNe,glE:JNe,glj:YNe,gnap:XNe,gnapprox:QNe,gne:KNe,gnE:eLe,gneq:tLe,gneqq:rLe,gnsim:nLe,Gopf:iLe,gopf:sLe,grave:oLe,GreaterEqual:aLe,GreaterEqualLess:lLe,GreaterFullEqual:uLe,GreaterGreater:cLe,GreaterLess:hLe,GreaterSlantEqual:pLe,GreaterTilde:dLe,Gscr:fLe,gscr:mLe,gsim:yLe,gsime:gLe,gsiml:vLe,gtcc:bLe,gtcir:wLe,gt:_Le,GT:xLe,Gt:SLe,gtdot:ELe,gtlPar:TLe,gtquest:ILe,gtrapprox:ALe,gtrarr:MLe,gtrdot:CLe,gtreqless:kLe,gtreqqless:RLe,gtrless:OLe,gtrsim:NLe,gvertneqq:LLe,gvnE:PLe,Hacek:DLe,hairsp:FLe,half:jLe,hamilt:ULe,HARDcy:BLe,hardcy:VLe,harrcir:GLe,harr:zLe,hArr:$Le,harrw:qLe,Hat:HLe,hbar:WLe,Hcirc:ZLe,hcirc:JLe,hearts:YLe,heartsuit:XLe,hellip:QLe,hercon:KLe,hfr:ePe,Hfr:tPe,HilbertSpace:rPe,hksearow:nPe,hkswarow:iPe,hoarr:sPe,homtht:oPe,hookleftarrow:aPe,hookrightarrow:lPe,hopf:uPe,Hopf:cPe,horbar:hPe,HorizontalLine:pPe,hscr:dPe,Hscr:fPe,hslash:mPe,Hstrok:yPe,hstrok:gPe,HumpDownHump:vPe,HumpEqual:bPe,hybull:wPe,hyphen:_Pe,Iacute:xPe,iacute:SPe,ic:EPe,Icirc:TPe,icirc:IPe,Icy:APe,icy:MPe,Idot:CPe,IEcy:kPe,iecy:RPe,iexcl:OPe,iff:NPe,ifr:LPe,Ifr:PPe,Igrave:DPe,igrave:FPe,ii:jPe,iiiint:UPe,iiint:BPe,iinfin:VPe,iiota:GPe,IJlig:zPe,ijlig:$Pe,Imacr:qPe,imacr:HPe,image:WPe,ImaginaryI:ZPe,imagline:JPe,imagpart:YPe,imath:XPe,Im:QPe,imof:KPe,imped:eDe,Implies:tDe,incare:rDe,in:"",infin:nDe,infintie:iDe,inodot:sDe,intcal:oDe,int:aDe,Int:lDe,integers:uDe,Integral:cDe,intercal:hDe,Intersection:pDe,intlarhk:dDe,intprod:fDe,InvisibleComma:mDe,InvisibleTimes:yDe,IOcy:gDe,iocy:vDe,Iogon:bDe,iogon:wDe,Iopf:_De,iopf:xDe,Iota:SDe,iota:EDe,iprod:TDe,iquest:IDe,iscr:ADe,Iscr:MDe,isin:CDe,isindot:kDe,isinE:RDe,isins:ODe,isinsv:NDe,isinv:LDe,it:PDe,Itilde:DDe,itilde:FDe,Iukcy:jDe,iukcy:UDe,Iuml:BDe,iuml:VDe,Jcirc:GDe,jcirc:zDe,Jcy:$De,jcy:qDe,Jfr:HDe,jfr:WDe,jmath:ZDe,Jopf:JDe,jopf:YDe,Jscr:XDe,jscr:QDe,Jsercy:KDe,jsercy:e6e,Jukcy:t6e,jukcy:r6e,Kappa:n6e,kappa:i6e,kappav:s6e,Kcedil:o6e,kcedil:a6e,Kcy:l6e,kcy:u6e,Kfr:c6e,kfr:h6e,kgreen:p6e,KHcy:d6e,khcy:f6e,KJcy:m6e,kjcy:y6e,Kopf:g6e,kopf:v6e,Kscr:b6e,kscr:w6e,lAarr:_6e,Lacute:x6e,lacute:S6e,laemptyv:E6e,lagran:T6e,Lambda:I6e,lambda:A6e,lang:M6e,Lang:C6e,langd:k6e,langle:R6e,lap:O6e,Laplacetrf:N6e,laquo:L6e,larrb:P6e,larrbfs:D6e,larr:F6e,Larr:j6e,lArr:U6e,larrfs:B6e,larrhk:V6e,larrlp:G6e,larrpl:z6e,larrsim:$6e,larrtl:q6e,latail:H6e,lAtail:W6e,lat:Z6e,late:J6e,lates:Y6e,lbarr:X6e,lBarr:Q6e,lbbrk:K6e,lbrace:e8e,lbrack:t8e,lbrke:r8e,lbrksld:n8e,lbrkslu:i8e,Lcaron:s8e,lcaron:o8e,Lcedil:a8e,lcedil:l8e,lceil:u8e,lcub:c8e,Lcy:h8e,lcy:p8e,ldca:d8e,ldquo:f8e,ldquor:m8e,ldrdhar:y8e,ldrushar:g8e,ldsh:v8e,le:b8e,lE:w8e,LeftAngleBracket:_8e,LeftArrowBar:x8e,leftarrow:S8e,LeftArrow:E8e,Leftarrow:T8e,LeftArrowRightArrow:I8e,leftarrowtail:A8e,LeftCeiling:M8e,LeftDoubleBracket:C8e,LeftDownTeeVector:k8e,LeftDownVectorBar:R8e,LeftDownVector:O8e,LeftFloor:N8e,leftharpoondown:L8e,leftharpoonup:P8e,leftleftarrows:D8e,leftrightarrow:F8e,LeftRightArrow:j8e,Leftrightarrow:U8e,leftrightarrows:B8e,leftrightharpoons:V8e,leftrightsquigarrow:G8e,LeftRightVector:z8e,LeftTeeArrow:$8e,LeftTee:q8e,LeftTeeVector:H8e,leftthreetimes:W8e,LeftTriangleBar:Z8e,LeftTriangle:J8e,LeftTriangleEqual:Y8e,LeftUpDownVector:X8e,LeftUpTeeVector:Q8e,LeftUpVectorBar:K8e,LeftUpVector:e9e,LeftVectorBar:t9e,LeftVector:r9e,lEg:n9e,leg:i9e,leq:s9e,leqq:o9e,leqslant:a9e,lescc:l9e,les:u9e,lesdot:c9e,lesdoto:h9e,lesdotor:p9e,lesg:d9e,lesges:f9e,lessapprox:m9e,lessdot:y9e,lesseqgtr:g9e,lesseqqgtr:v9e,LessEqualGreater:b9e,LessFullEqual:w9e,LessGreater:_9e,lessgtr:x9e,LessLess:S9e,lesssim:E9e,LessSlantEqual:T9e,LessTilde:I9e,lfisht:A9e,lfloor:M9e,Lfr:C9e,lfr:k9e,lg:R9e,lgE:O9e,lHar:N9e,lhard:L9e,lharu:P9e,lharul:D9e,lhblk:F9e,LJcy:j9e,ljcy:U9e,llarr:B9e,ll:V9e,Ll:G9e,llcorner:z9e,Lleftarrow:$9e,llhard:q9e,lltri:H9e,Lmidot:W9e,lmidot:Z9e,lmoustache:J9e,lmoust:Y9e,lnap:X9e,lnapprox:Q9e,lne:K9e,lnE:eFe,lneq:tFe,lneqq:rFe,lnsim:nFe,loang:iFe,loarr:sFe,lobrk:oFe,longleftarrow:aFe,LongLeftArrow:lFe,Longleftarrow:uFe,longleftrightarrow:cFe,LongLeftRightArrow:hFe,Longleftrightarrow:pFe,longmapsto:dFe,longrightarrow:fFe,LongRightArrow:mFe,Longrightarrow:yFe,looparrowleft:gFe,looparrowright:vFe,lopar:bFe,Lopf:wFe,lopf:_Fe,loplus:xFe,lotimes:SFe,lowast:EFe,lowbar:TFe,LowerLeftArrow:IFe,LowerRightArrow:AFe,loz:MFe,lozenge:CFe,lozf:kFe,lpar:RFe,lparlt:OFe,lrarr:NFe,lrcorner:LFe,lrhar:PFe,lrhard:DFe,lrm:FFe,lrtri:jFe,lsaquo:UFe,lscr:BFe,Lscr:VFe,lsh:GFe,Lsh:zFe,lsim:$Fe,lsime:qFe,lsimg:HFe,lsqb:WFe,lsquo:ZFe,lsquor:JFe,Lstrok:YFe,lstrok:XFe,ltcc:QFe,ltcir:KFe,lt:e7e,LT:t7e,Lt:r7e,ltdot:n7e,lthree:i7e,ltimes:s7e,ltlarr:o7e,ltquest:a7e,ltri:l7e,ltrie:u7e,ltrif:c7e,ltrPar:h7e,lurdshar:p7e,luruhar:d7e,lvertneqq:f7e,lvnE:m7e,macr:y7e,male:g7e,malt:v7e,maltese:b7e,Map:"",map:w7e,mapsto:_7e,mapstodown:x7e,mapstoleft:S7e,mapstoup:E7e,marker:T7e,mcomma:I7e,Mcy:A7e,mcy:M7e,mdash:C7e,mDDot:k7e,measuredangle:R7e,MediumSpace:O7e,Mellintrf:N7e,Mfr:L7e,mfr:P7e,mho:D7e,micro:F7e,midast:j7e,midcir:U7e,mid:B7e,middot:V7e,minusb:G7e,minus:z7e,minusd:$7e,minusdu:q7e,MinusPlus:H7e,mlcp:W7e,mldr:Z7e,mnplus:J7e,models:Y7e,Mopf:X7e,mopf:Q7e,mp:K7e,mscr:eje,Mscr:tje,mstpos:rje,Mu:nje,mu:ije,multimap:sje,mumap:oje,nabla:aje,Nacute:lje,nacute:uje,nang:cje,nap:hje,napE:pje,napid:dje,napos:fje,napprox:mje,natural:yje,naturals:gje,natur:vje,nbsp:bje,nbump:wje,nbumpe:_je,ncap:xje,Ncaron:Sje,ncaron:Eje,Ncedil:Tje,ncedil:Ije,ncong:Aje,ncongdot:Mje,ncup:Cje,Ncy:kje,ncy:Rje,ndash:Oje,nearhk:Nje,nearr:Lje,neArr:Pje,nearrow:Dje,ne:Fje,nedot:jje,NegativeMediumSpace:Uje,NegativeThickSpace:Bje,NegativeThinSpace:Vje,NegativeVeryThinSpace:Gje,nequiv:zje,nesear:$je,nesim:qje,NestedGreaterGreater:Hje,NestedLessLess:Wje,NewLine:Zje,nexist:Jje,nexists:Yje,Nfr:Xje,nfr:Qje,ngE:Kje,nge:eUe,ngeq:tUe,ngeqq:rUe,ngeqslant:nUe,nges:iUe,nGg:sUe,ngsim:oUe,nGt:aUe,ngt:lUe,ngtr:uUe,nGtv:cUe,nharr:hUe,nhArr:pUe,nhpar:dUe,ni:fUe,nis:mUe,nisd:yUe,niv:gUe,NJcy:vUe,njcy:bUe,nlarr:wUe,nlArr:_Ue,nldr:xUe,nlE:SUe,nle:EUe,nleftarrow:TUe,nLeftarrow:IUe,nleftrightarrow:AUe,nLeftrightarrow:MUe,nleq:CUe,nleqq:kUe,nleqslant:RUe,nles:OUe,nless:NUe,nLl:LUe,nlsim:PUe,nLt:DUe,nlt:FUe,nltri:jUe,nltrie:UUe,nLtv:BUe,nmid:VUe,NoBreak:GUe,NonBreakingSpace:zUe,nopf:$Ue,Nopf:qUe,Not:HUe,not:WUe,NotCongruent:ZUe,NotCupCap:JUe,NotDoubleVerticalBar:YUe,NotElement:XUe,NotEqual:QUe,NotEqualTilde:KUe,NotExists:eBe,NotGreater:tBe,NotGreaterEqual:rBe,NotGreaterFullEqual:nBe,NotGreaterGreater:iBe,NotGreaterLess:sBe,NotGreaterSlantEqual:oBe,NotGreaterTilde:aBe,NotHumpDownHump:lBe,NotHumpEqual:uBe,notin:cBe,notindot:hBe,notinE:pBe,notinva:dBe,notinvb:fBe,notinvc:mBe,NotLeftTriangleBar:yBe,NotLeftTriangle:gBe,NotLeftTriangleEqual:vBe,NotLess:bBe,NotLessEqual:wBe,NotLessGreater:_Be,NotLessLess:xBe,NotLessSlantEqual:SBe,NotLessTilde:EBe,NotNestedGreaterGreater:TBe,NotNestedLessLess:IBe,notni:ABe,notniva:MBe,notnivb:CBe,notnivc:kBe,NotPrecedes:RBe,NotPrecedesEqual:OBe,NotPrecedesSlantEqual:NBe,NotReverseElement:LBe,NotRightTriangleBar:PBe,NotRightTriangle:DBe,NotRightTriangleEqual:FBe,NotSquareSubset:jBe,NotSquareSubsetEqual:UBe,NotSquareSuperset:BBe,NotSquareSupersetEqual:VBe,NotSubset:GBe,NotSubsetEqual:zBe,NotSucceeds:$Be,NotSucceedsEqual:qBe,NotSucceedsSlantEqual:HBe,NotSucceedsTilde:WBe,NotSuperset:ZBe,NotSupersetEqual:JBe,NotTilde:YBe,NotTildeEqual:XBe,NotTildeFullEqual:QBe,NotTildeTilde:KBe,NotVerticalBar:eVe,nparallel:tVe,npar:rVe,nparsl:nVe,npart:iVe,npolint:sVe,npr:oVe,nprcue:aVe,nprec:lVe,npreceq:uVe,npre:cVe,nrarrc:hVe,nrarr:pVe,nrArr:dVe,nrarrw:fVe,nrightarrow:mVe,nRightarrow:yVe,nrtri:gVe,nrtrie:vVe,nsc:bVe,nsccue:wVe,nsce:_Ve,Nscr:xVe,nscr:SVe,nshortmid:EVe,nshortparallel:TVe,nsim:IVe,nsime:AVe,nsimeq:MVe,nsmid:CVe,nspar:kVe,nsqsube:RVe,nsqsupe:OVe,nsub:NVe,nsubE:LVe,nsube:PVe,nsubset:DVe,nsubseteq:FVe,nsubseteqq:jVe,nsucc:UVe,nsucceq:BVe,nsup:VVe,nsupE:GVe,nsupe:zVe,nsupset:$Ve,nsupseteq:qVe,nsupseteqq:HVe,ntgl:WVe,Ntilde:ZVe,ntilde:JVe,ntlg:YVe,ntriangleleft:XVe,ntrianglelefteq:QVe,ntriangleright:KVe,ntrianglerighteq:eGe,Nu:tGe,nu:rGe,num:nGe,numero:iGe,numsp:sGe,nvap:oGe,nvdash:aGe,nvDash:lGe,nVdash:uGe,nVDash:cGe,nvge:hGe,nvgt:pGe,nvHarr:dGe,nvinfin:fGe,nvlArr:mGe,nvle:yGe,nvlt:gGe,nvltrie:vGe,nvrArr:bGe,nvrtrie:wGe,nvsim:_Ge,nwarhk:xGe,nwarr:SGe,nwArr:EGe,nwarrow:TGe,nwnear:IGe,Oacute:AGe,oacute:MGe,oast:CGe,Ocirc:kGe,ocirc:RGe,ocir:OGe,Ocy:NGe,ocy:LGe,odash:PGe,Odblac:DGe,odblac:FGe,odiv:jGe,odot:UGe,odsold:BGe,OElig:VGe,oelig:GGe,ofcir:zGe,Ofr:$Ge,ofr:qGe,ogon:HGe,Ograve:WGe,ograve:ZGe,ogt:JGe,ohbar:YGe,ohm:XGe,oint:QGe,olarr:KGe,olcir:eze,olcross:tze,oline:rze,olt:nze,Omacr:ize,omacr:sze,Omega:oze,omega:aze,Omicron:lze,omicron:uze,omid:cze,ominus:hze,Oopf:pze,oopf:dze,opar:fze,OpenCurlyDoubleQuote:mze,OpenCurlyQuote:yze,operp:gze,oplus:vze,orarr:bze,Or:wze,or:_ze,ord:xze,order:Sze,orderof:Eze,ordf:Tze,ordm:Ize,origof:Aze,oror:Mze,orslope:Cze,orv:kze,oS:Rze,Oscr:Oze,oscr:Nze,Oslash:Lze,oslash:Pze,osol:Dze,Otilde:Fze,otilde:jze,otimesas:Uze,Otimes:Bze,otimes:Vze,Ouml:Gze,ouml:zze,ovbar:$ze,OverBar:qze,OverBrace:Hze,OverBracket:Wze,OverParenthesis:Zze,para:Jze,parallel:Yze,par:Xze,parsim:Qze,parsl:Kze,part:e$e,PartialD:t$e,Pcy:r$e,pcy:n$e,percnt:i$e,period:s$e,permil:o$e,perp:a$e,pertenk:l$e,Pfr:u$e,pfr:c$e,Phi:h$e,phi:p$e,phiv:d$e,phmmat:f$e,phone:m$e,Pi:y$e,pi:g$e,pitchfork:v$e,piv:b$e,planck:w$e,planckh:_$e,plankv:x$e,plusacir:S$e,plusb:E$e,pluscir:T$e,plus:I$e,plusdo:A$e,plusdu:M$e,pluse:C$e,PlusMinus:k$e,plusmn:R$e,plussim:O$e,plustwo:N$e,pm:L$e,Poincareplane:P$e,pointint:D$e,popf:F$e,Popf:j$e,pound:U$e,prap:B$e,Pr:V$e,pr:G$e,prcue:z$e,precapprox:$$e,prec:q$e,preccurlyeq:H$e,Precedes:W$e,PrecedesEqual:Z$e,PrecedesSlantEqual:J$e,PrecedesTilde:Y$e,preceq:X$e,precnapprox:Q$e,precneqq:K$e,precnsim:eqe,pre:tqe,prE:rqe,precsim:nqe,prime:iqe,Prime:sqe,primes:oqe,prnap:aqe,prnE:lqe,prnsim:uqe,prod:cqe,Product:hqe,profalar:pqe,profline:dqe,profsurf:fqe,prop:mqe,Proportional:yqe,Proportion:gqe,propto:vqe,prsim:bqe,prurel:wqe,Pscr:_qe,pscr:xqe,Psi:Sqe,psi:Eqe,puncsp:Tqe,Qfr:Iqe,qfr:Aqe,qint:Mqe,qopf:Cqe,Qopf:kqe,qprime:Rqe,Qscr:Oqe,qscr:Nqe,quaternions:Lqe,quatint:Pqe,quest:Dqe,questeq:Fqe,quot:jqe,QUOT:Uqe,rAarr:Bqe,race:Vqe,Racute:Gqe,racute:zqe,radic:$qe,raemptyv:qqe,rang:Hqe,Rang:Wqe,rangd:Zqe,range:Jqe,rangle:Yqe,raquo:Xqe,rarrap:Qqe,rarrb:Kqe,rarrbfs:eHe,rarrc:tHe,rarr:rHe,Rarr:nHe,rArr:iHe,rarrfs:sHe,rarrhk:oHe,rarrlp:aHe,rarrpl:lHe,rarrsim:uHe,Rarrtl:cHe,rarrtl:hHe,rarrw:pHe,ratail:dHe,rAtail:fHe,ratio:mHe,rationals:yHe,rbarr:gHe,rBarr:vHe,RBarr:bHe,rbbrk:wHe,rbrace:_He,rbrack:xHe,rbrke:SHe,rbrksld:EHe,rbrkslu:THe,Rcaron:IHe,rcaron:AHe,Rcedil:MHe,rcedil:CHe,rceil:kHe,rcub:RHe,Rcy:OHe,rcy:NHe,rdca:LHe,rdldhar:PHe,rdquo:DHe,rdquor:FHe,rdsh:jHe,real:UHe,realine:BHe,realpart:VHe,reals:GHe,Re:zHe,rect:$He,reg:qHe,REG:HHe,ReverseElement:WHe,ReverseEquilibrium:ZHe,ReverseUpEquilibrium:JHe,rfisht:YHe,rfloor:XHe,rfr:QHe,Rfr:KHe,rHar:eWe,rhard:tWe,rharu:rWe,rharul:nWe,Rho:iWe,rho:sWe,rhov:oWe,RightAngleBracket:aWe,RightArrowBar:lWe,rightarrow:uWe,RightArrow:cWe,Rightarrow:hWe,RightArrowLeftArrow:pWe,rightarrowtail:dWe,RightCeiling:fWe,RightDoubleBracket:mWe,RightDownTeeVector:yWe,RightDownVectorBar:gWe,RightDownVector:vWe,RightFloor:bWe,rightharpoondown:wWe,rightharpoonup:_We,rightleftarrows:xWe,rightleftharpoons:SWe,rightrightarrows:EWe,rightsquigarrow:TWe,RightTeeArrow:IWe,RightTee:AWe,RightTeeVector:MWe,rightthreetimes:CWe,RightTriangleBar:kWe,RightTriangle:RWe,RightTriangleEqual:OWe,RightUpDownVector:NWe,RightUpTeeVector:LWe,RightUpVectorBar:PWe,RightUpVector:DWe,RightVectorBar:FWe,RightVector:jWe,ring:UWe,risingdotseq:BWe,rlarr:VWe,rlhar:GWe,rlm:zWe,rmoustache:$We,rmoust:qWe,rnmid:HWe,roang:WWe,roarr:ZWe,robrk:JWe,ropar:YWe,ropf:XWe,Ropf:QWe,roplus:KWe,rotimes:eZe,RoundImplies:tZe,rpar:rZe,rpargt:nZe,rppolint:iZe,rrarr:sZe,Rrightarrow:oZe,rsaquo:aZe,rscr:lZe,Rscr:uZe,rsh:cZe,Rsh:hZe,rsqb:pZe,rsquo:dZe,rsquor:fZe,rthree:mZe,rtimes:yZe,rtri:gZe,rtrie:vZe,rtrif:bZe,rtriltri:wZe,RuleDelayed:_Ze,ruluhar:xZe,rx:SZe,Sacute:EZe,sacute:TZe,sbquo:IZe,scap:AZe,Scaron:MZe,scaron:CZe,Sc:kZe,sc:RZe,sccue:OZe,sce:NZe,scE:LZe,Scedil:PZe,scedil:DZe,Scirc:FZe,scirc:jZe,scnap:UZe,scnE:BZe,scnsim:VZe,scpolint:GZe,scsim:zZe,Scy:$Ze,scy:qZe,sdotb:HZe,sdot:WZe,sdote:ZZe,searhk:JZe,searr:YZe,seArr:XZe,searrow:QZe,sect:KZe,semi:eJe,seswar:tJe,setminus:rJe,setmn:nJe,sext:iJe,Sfr:sJe,sfr:oJe,sfrown:aJe,sharp:lJe,SHCHcy:uJe,shchcy:cJe,SHcy:hJe,shcy:pJe,ShortDownArrow:dJe,ShortLeftArrow:fJe,shortmid:mJe,shortparallel:yJe,ShortRightArrow:gJe,ShortUpArrow:vJe,shy:bJe,Sigma:wJe,sigma:_Je,sigmaf:xJe,sigmav:SJe,sim:EJe,simdot:TJe,sime:IJe,simeq:AJe,simg:MJe,simgE:CJe,siml:kJe,simlE:RJe,simne:OJe,simplus:NJe,simrarr:LJe,slarr:PJe,SmallCircle:DJe,smallsetminus:FJe,smashp:jJe,smeparsl:UJe,smid:BJe,smile:VJe,smt:GJe,smte:zJe,smtes:$Je,SOFTcy:qJe,softcy:HJe,solbar:WJe,solb:ZJe,sol:JJe,Sopf:YJe,sopf:XJe,spades:QJe,spadesuit:KJe,spar:eYe,sqcap:tYe,sqcaps:rYe,sqcup:nYe,sqcups:iYe,Sqrt:sYe,sqsub:oYe,sqsube:aYe,sqsubset:lYe,sqsubseteq:uYe,sqsup:cYe,sqsupe:hYe,sqsupset:pYe,sqsupseteq:dYe,square:fYe,Square:mYe,SquareIntersection:yYe,SquareSubset:gYe,SquareSubsetEqual:vYe,SquareSuperset:bYe,SquareSupersetEqual:wYe,SquareUnion:_Ye,squarf:xYe,squ:SYe,squf:EYe,srarr:TYe,Sscr:IYe,sscr:AYe,ssetmn:MYe,ssmile:CYe,sstarf:kYe,Star:RYe,star:OYe,starf:NYe,straightepsilon:LYe,straightphi:PYe,strns:DYe,sub:FYe,Sub:jYe,subdot:UYe,subE:BYe,sube:VYe,subedot:GYe,submult:zYe,subnE:$Ye,subne:qYe,subplus:HYe,subrarr:WYe,subset:ZYe,Subset:JYe,subseteq:YYe,subseteqq:XYe,SubsetEqual:QYe,subsetneq:KYe,subsetneqq:eXe,subsim:tXe,subsub:rXe,subsup:nXe,succapprox:iXe,succ:sXe,succcurlyeq:oXe,Succeeds:aXe,SucceedsEqual:lXe,SucceedsSlantEqual:uXe,SucceedsTilde:cXe,succeq:hXe,succnapprox:pXe,succneqq:dXe,succnsim:fXe,succsim:mXe,SuchThat:yXe,sum:gXe,Sum:vXe,sung:bXe,sup1:wXe,sup2:_Xe,sup3:xXe,sup:SXe,Sup:EXe,supdot:TXe,supdsub:IXe,supE:AXe,supe:MXe,supedot:CXe,Superset:kXe,SupersetEqual:RXe,suphsol:OXe,suphsub:NXe,suplarr:LXe,supmult:PXe,supnE:DXe,supne:FXe,supplus:jXe,supset:UXe,Supset:BXe,supseteq:VXe,supseteqq:GXe,supsetneq:zXe,supsetneqq:$Xe,supsim:qXe,supsub:HXe,supsup:WXe,swarhk:ZXe,swarr:JXe,swArr:YXe,swarrow:XXe,swnwar:QXe,szlig:KXe,Tab:eQe,target:tQe,Tau:rQe,tau:nQe,tbrk:iQe,Tcaron:sQe,tcaron:oQe,Tcedil:aQe,tcedil:lQe,Tcy:uQe,tcy:cQe,tdot:hQe,telrec:pQe,Tfr:dQe,tfr:fQe,there4:mQe,therefore:yQe,Therefore:gQe,Theta:vQe,theta:bQe,thetasym:wQe,thetav:_Qe,thickapprox:xQe,thicksim:SQe,ThickSpace:EQe,ThinSpace:TQe,thinsp:IQe,thkap:AQe,thksim:MQe,THORN:CQe,thorn:kQe,tilde:RQe,Tilde:OQe,TildeEqual:NQe,TildeFullEqual:LQe,TildeTilde:PQe,timesbar:DQe,timesb:FQe,times:jQe,timesd:UQe,tint:BQe,toea:VQe,topbot:GQe,topcir:zQe,top:$Qe,Topf:qQe,topf:HQe,topfork:WQe,tosa:ZQe,tprime:JQe,trade:YQe,TRADE:XQe,triangle:QQe,triangledown:KQe,triangleleft:eKe,trianglelefteq:tKe,triangleq:rKe,triangleright:nKe,trianglerighteq:iKe,tridot:sKe,trie:oKe,triminus:aKe,TripleDot:lKe,triplus:uKe,trisb:cKe,tritime:hKe,trpezium:pKe,Tscr:dKe,tscr:fKe,TScy:mKe,tscy:yKe,TSHcy:gKe,tshcy:vKe,Tstrok:bKe,tstrok:wKe,twixt:_Ke,twoheadleftarrow:xKe,twoheadrightarrow:SKe,Uacute:EKe,uacute:TKe,uarr:IKe,Uarr:AKe,uArr:MKe,Uarrocir:CKe,Ubrcy:kKe,ubrcy:RKe,Ubreve:OKe,ubreve:NKe,Ucirc:LKe,ucirc:PKe,Ucy:DKe,ucy:FKe,udarr:jKe,Udblac:UKe,udblac:BKe,udhar:VKe,ufisht:GKe,Ufr:zKe,ufr:$Ke,Ugrave:qKe,ugrave:HKe,uHar:WKe,uharl:ZKe,uharr:JKe,uhblk:YKe,ulcorn:XKe,ulcorner:QKe,ulcrop:KKe,ultri:eet,Umacr:tet,umacr:ret,uml:net,UnderBar:iet,UnderBrace:set,UnderBracket:oet,UnderParenthesis:aet,Union:uet,UnionPlus:cet,Uogon:het,uogon:pet,Uopf:det,uopf:fet,UpArrowBar:met,uparrow:yet,UpArrow:get,Uparrow:vet,UpArrowDownArrow:bet,updownarrow:wet,UpDownArrow:_et,Updownarrow:xet,UpEquilibrium:Eet,upharpoonleft:Tet,upharpoonright:Iet,uplus:Aet,UpperLeftArrow:Met,UpperRightArrow:Cet,upsi:ket,Upsi:Ret,upsih:Oet,Upsilon:Net,upsilon:Let,UpTeeArrow:Pet,UpTee:Det,upuparrows:Fet,urcorn:jet,urcorner:Uet,urcrop:Bet,Uring:Vet,uring:Get,urtri:zet,Uscr:$et,uscr:qet,utdot:Het,Utilde:Wet,utilde:Zet,utri:Jet,utrif:Yet,uuarr:Xet,Uuml:Qet,uuml:Ket,uwangle:ett,vangrt:ttt,varepsilon:rtt,varkappa:ntt,varnothing:itt,varphi:stt,varpi:ott,varpropto:att,varr:ltt,vArr:utt,varrho:ctt,varsigma:htt,varsubsetneq:ptt,varsubsetneqq:dtt,varsupsetneq:ftt,varsupsetneqq:mtt,vartheta:ytt,vartriangleleft:gtt,vartriangleright:vtt,vBar:btt,Vbar:wtt,vBarv:_tt,Vcy:xtt,vcy:Stt,vdash:Ett,vDash:Ttt,Vdash:Itt,VDash:Att,Vdashl:Mtt,veebar:Ctt,vee:ktt,Vee:Rtt,veeeq:Ott,vellip:Ntt,verbar:Ltt,Verbar:Ptt,vert:Dtt,Vert:Ftt,VerticalBar:jtt,VerticalLine:Utt,VerticalSeparator:Btt,VerticalTilde:Vtt,VeryThinSpace:Gtt,Vfr:ztt,vfr:$tt,vltri:qtt,vnsub:Htt,vnsup:Wtt,Vopf:Ztt,vopf:Jtt,vprop:Ytt,vrtri:Xtt,Vscr:Qtt,vscr:Ktt,vsubnE:ert,vsubne:trt,vsupnE:rrt,vsupne:nrt,Vvdash:irt,vzigzag:srt,Wcirc:ort,wcirc:art,wedbar:lrt,wedge:urt,Wedge:crt,wedgeq:hrt,weierp:prt,Wfr:drt,wfr:frt,Wopf:mrt,wopf:yrt,wp:grt,wr:vrt,wreath:brt,Wscr:wrt,wscr:_rt,xcap:xrt,xcirc:Srt,xcup:Ert,xdtri:Trt,Xfr:Irt,xfr:Art,xharr:Mrt,xhArr:Crt,Xi:krt,xi:Rrt,xlarr:Ort,xlArr:Nrt,xmap:Lrt,xnis:Prt,xodot:Drt,Xopf:Frt,xopf:jrt,xoplus:Urt,xotime:Brt,xrarr:Vrt,xrArr:Grt,Xscr:zrt,xscr:$rt,xsqcup:qrt,xuplus:Hrt,xutri:Wrt,xvee:Zrt,xwedge:Jrt,Yacute:Yrt,yacute:Xrt,YAcy:Qrt,yacy:Krt,Ycirc:ent,ycirc:tnt,Ycy:rnt,ycy:nnt,yen:int,Yfr:snt,yfr:ont,YIcy:ant,yicy:lnt,Yopf:unt,yopf:cnt,Yscr:hnt,yscr:pnt,YUcy:dnt,yucy:fnt,yuml:mnt,Yuml:ynt,Zacute:gnt,zacute:vnt,Zcaron:bnt,zcaron:wnt,Zcy:_nt,zcy:xnt,Zdot:Snt,zdot:Ent,zeetrf:Tnt,ZeroWidthSpace:Int,Zeta:Ant,zeta:Mnt,zfr:Cnt,Zfr:knt,ZHcy:Rnt,zhcy:Ont,zigrarr:Nnt,zopf:Lnt,Zopf:Pnt,Zscr:Dnt,zscr:Fnt,zwj:jnt,zwnj:Unt};var Die=Bnt,aB=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Xw={},XH={};function Vnt(e){var t,r,n=XH[e];if(n)return n;for(n=XH[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}function Mk(e,t,r){var n,i,s,o,a,l="";for(typeof t!="string"&&(r=t,t=Mk.defaultChars),typeof r>"u"&&(r=!0),a=Vnt(t),n=0,i=e.length;n<i;n++){if(s=e.charCodeAt(n),r&&s===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(e.slice(n+1,n+3))){l+=e.slice(n,n+3),n+=2;continue}if(s<128){l+=a[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&n+1<i&&(o=e.charCodeAt(n+1),o>=56320&&o<=57343)){l+=encodeURIComponent(e[n]+e[n+1]),n++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(e[n])}return l}Mk.defaultChars=";/?:@&=+$,-_.!~*'()#";Mk.componentChars="-_.!~*'()";var Gnt=Mk,QH={};function znt(e){var t,r,n=QH[e];if(n)return n;for(n=QH[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),n.push(r);for(t=0;t<e.length;t++)r=e.charCodeAt(t),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Ck(e,t){var r;return typeof t!="string"&&(t=Ck.defaultChars),r=znt(t),e.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,s,o,a,l,u,c,h="";for(i=0,s=n.length;i<s;i+=3){if(o=parseInt(n.slice(i+1,i+3),16),o<128){h+=r[o];continue}if((o&224)===192&&i+3<s&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)===128)){c=o<<6&1984|a&63,c<128?h+="":h+=String.fromCharCode(c),i+=3;continue}if((o&240)===224&&i+6<s&&(a=parseInt(n.slice(i+4,i+6),16),l=parseInt(n.slice(i+7,i+9),16),(a&192)===128&&(l&192)===128)){c=o<<12&61440|a<<6&4032|l&63,c<2048||c>=55296&&c<=57343?h+="":h+=String.fromCharCode(c),i+=6;continue}if((o&248)===240&&i+9<s&&(a=parseInt(n.slice(i+4,i+6),16),l=parseInt(n.slice(i+7,i+9),16),u=parseInt(n.slice(i+10,i+12),16),(a&192)===128&&(l&192)===128&&(u&192)===128)){c=o<<18&1835008|a<<12&258048|l<<6&4032|u&63,c<65536||c>1114111?h+="":(c-=65536,h+=String.fromCharCode(55296+(c>>10),56320+(c&1023))),i+=9;continue}h+=""}return h})}Ck.defaultChars=";/?:@&=+$,#";Ck.componentChars="";var $nt=Ck,qnt=function(t){var r="";return r+=t.protocol||"",r+=t.slashes?"//":"",r+=t.auth?t.auth+"@":"",t.hostname&&t.hostname.indexOf(":")!==-1?r+="["+t.hostname+"]":r+=t.hostname||"",r+=t.port?":"+t.port:"",r+=t.pathname||"",r+=t.search||"",r+=t.hash||"",r};function Q4(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Hnt=/^([a-z0-9.+-]+:)/i,Wnt=/:[0-9]*$/,Znt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Jnt=["<",">",'"',"`"," ","\r",`
`,"	"],Ynt=["{","}","|","\\","^","`"].concat(Jnt),Xnt=["'"].concat(Ynt),KH=["%","/","?",";","#"].concat(Xnt),eW=["/","?","#"],Qnt=255,tW=/^[+a-z0-9A-Z_-]{0,63}$/,Knt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rW={javascript:!0,"javascript:":!0},nW={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function eit(e,t){if(e&&e instanceof Q4)return e;var r=new Q4;return r.parse(e,t),r}Q4.prototype.parse=function(e,t){var r,n,i,s,o,a=e;if(a=a.trim(),!t&&e.split("#").length===1){var l=Znt.exec(a);if(l)return this.pathname=l[1],l[2]&&(this.search=l[2]),this}var u=Hnt.exec(a);if(u&&(u=u[0],i=u.toLowerCase(),this.protocol=u,a=a.substr(u.length)),(t||u||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(o=a.substr(0,2)==="//",o&&!(u&&rW[u])&&(a=a.substr(2),this.slashes=!0)),!rW[u]&&(o||u&&!nW[u])){var c=-1;for(r=0;r<eW.length;r++)s=a.indexOf(eW[r]),s!==-1&&(c===-1||s<c)&&(c=s);var h,d;for(c===-1?d=a.lastIndexOf("@"):d=a.lastIndexOf("@",c),d!==-1&&(h=a.slice(0,d),a=a.slice(d+1),this.auth=h),c=-1,r=0;r<KH.length;r++)s=a.indexOf(KH[r]),s!==-1&&(c===-1||s<c)&&(c=s);c===-1&&(c=a.length),a[c-1]===":"&&c--;var m=a.slice(0,c);a=a.slice(c),this.parseHost(m),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){var g=this.hostname.split(/\./);for(r=0,n=g.length;r<n;r++){var b=g[r];if(b&&!b.match(tW)){for(var S="",E=0,x=b.length;E<x;E++)b.charCodeAt(E)>127?S+="x":S+=b[E];if(!S.match(tW)){var w=g.slice(0,r),T=g.slice(r+1),I=b.match(Knt);I&&(w.push(I[1]),T.unshift(I[2])),T.length&&(a=T.join(".")+a),this.hostname=w.join(".");break}}}}this.hostname.length>Qnt&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var M=a.indexOf("#");M!==-1&&(this.hash=a.substr(M),a=a.slice(0,M));var C=a.indexOf("?");return C!==-1&&(this.search=a.substr(C),a=a.slice(0,C)),a&&(this.pathname=a),nW[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Q4.prototype.parseHost=function(e){var t=Wnt.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var tit=eit;Xw.encode=Gnt;Xw.decode=$nt;Xw.format=qnt;Xw.parse=tit;var m0={},kN,iW;function Fie(){return iW||(iW=1,kN=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),kN}var RN,sW;function jie(){return sW||(sW=1,RN=/[\0-\x1F\x7F-\x9F]/),RN}var ON,oW;function rit(){return oW||(oW=1,ON=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),ON}var NN,aW;function Uie(){return aW||(aW=1,NN=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),NN}var lW;function nit(){return lW||(lW=1,m0.Any=Fie(),m0.Cc=jie(),m0.Cf=rit(),m0.P=aB,m0.Z=Uie()),m0}(function(e){function t(O){return Object.prototype.toString.call(O)}function r(O){return t(O)==="[object String]"}var n=Object.prototype.hasOwnProperty;function i(O,v){return n.call(O,v)}function s(O){var v=Array.prototype.slice.call(arguments,1);return v.forEach(function(A){if(A){if(typeof A!="object")throw new TypeError(A+"must be object");Object.keys(A).forEach(function(R){O[R]=A[R]})}}),O}function o(O,v,A){return[].concat(O.slice(0,v),A,O.slice(v+1))}function a(O){return!(O>=55296&&O<=57343||O>=64976&&O<=65007||(O&65535)===65535||(O&65535)===65534||O>=0&&O<=8||O===11||O>=14&&O<=31||O>=127&&O<=159||O>1114111)}function l(O){if(O>65535){O-=65536;var v=55296+(O>>10),A=56320+(O&1023);return String.fromCharCode(v,A)}return String.fromCharCode(O)}var u=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,c=/&([a-z#][a-z0-9]{1,31});/gi,h=new RegExp(u.source+"|"+c.source,"gi"),d=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,m=Die;function y(O,v){var A=0;return i(m,v)?m[v]:v.charCodeAt(0)===35&&d.test(v)&&(A=v[1].toLowerCase()==="x"?parseInt(v.slice(2),16):parseInt(v.slice(1),10),a(A))?l(A):O}function g(O){return O.indexOf("\\")<0?O:O.replace(u,"$1")}function b(O){return O.indexOf("\\")<0&&O.indexOf("&")<0?O:O.replace(h,function(v,A,R){return A||y(v,R)})}var S=/[&<>"]/,E=/[&<>"]/g,x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function w(O){return x[O]}function T(O){return S.test(O)?O.replace(E,w):O}var I=/[.?*+^$[\]\\(){}|-]/g;function M(O){return O.replace(I,"\\$&")}function C(O){switch(O){case 9:case 32:return!0}return!1}function k(O){if(O>=8192&&O<=8202)return!0;switch(O){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var N=aB;function F(O){return N.test(O)}function P(O){switch(O){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function B(O){return O=O.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(O=O.replace(//g,"")),O.toLowerCase().toUpperCase()}e.lib={},e.lib.mdurl=Xw,e.lib.ucmicro=nit(),e.assign=s,e.isString=r,e.has=i,e.unescapeMd=g,e.unescapeAll=b,e.isValidEntityCode=a,e.fromCodePoint=l,e.escapeHtml=T,e.arrayReplaceAt=o,e.isSpace=C,e.isWhiteSpace=k,e.isMdAsciiPunct=P,e.isPunctChar=F,e.escapeRE=M,e.normalizeReference=B})(Pr);var kk={},iit=function(t,r,n){var i,s,o,a,l=-1,u=t.posMax,c=t.pos;for(t.pos=r+1,i=1;t.pos<u;){if(o=t.src.charCodeAt(t.pos),o===93&&(i--,i===0)){s=!0;break}if(a=t.pos,t.md.inline.skipToken(t),o===91){if(a===t.pos-1)i++;else if(n)return t.pos=c,-1}}return s&&(l=t.pos),t.pos=c,l},uW=Pr.unescapeAll,sit=function(t,r,n){var i,s,o=0,a=r,l={ok:!1,pos:0,lines:0,str:""};if(t.charCodeAt(r)===60){for(r++;r<n;){if(i=t.charCodeAt(r),i===10||i===60)return l;if(i===62)return l.pos=r+1,l.str=uW(t.slice(a+1,r)),l.ok=!0,l;if(i===92&&r+1<n){r+=2;continue}r++}return l}for(s=0;r<n&&(i=t.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(t.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(s++,s>32))return l;if(i===41){if(s===0)break;s--}r++}return a===r||s!==0||(l.str=uW(t.slice(a,r)),l.lines=o,l.pos=r,l.ok=!0),l},oit=Pr.unescapeAll,ait=function(t,r,n){var i,s,o=0,a=r,l={ok:!1,pos:0,lines:0,str:""};if(r>=n||(s=t.charCodeAt(r),s!==34&&s!==39&&s!==40))return l;for(r++,s===40&&(s=41);r<n;){if(i=t.charCodeAt(r),i===s)return l.pos=r+1,l.lines=o,l.str=oit(t.slice(a+1,r)),l.ok=!0,l;if(i===40&&s===41)return l;i===10?o++:i===92&&r+1<n&&(r++,t.charCodeAt(r)===10&&o++),r++}return l};kk.parseLinkLabel=iit;kk.parseLinkDestination=sit;kk.parseLinkTitle=ait;var lit=Pr.assign,uit=Pr.unescapeAll,Tg=Pr.escapeHtml,Dh={};Dh.code_inline=function(e,t,r,n,i){var s=e[t];return"<code"+i.renderAttrs(s)+">"+Tg(e[t].content)+"</code>"};Dh.code_block=function(e,t,r,n,i){var s=e[t];return"<pre"+i.renderAttrs(s)+"><code>"+Tg(e[t].content)+`</code></pre>
`};Dh.fence=function(e,t,r,n,i){var s=e[t],o=s.info?uit(s.info).trim():"",a="",l="",u,c,h,d,m;return o&&(h=o.split(/(\s+)/g),a=h[0],l=h.slice(2).join("")),r.highlight?u=r.highlight(s.content,a,l)||Tg(s.content):u=Tg(s.content),u.indexOf("<pre")===0?u+`
`:o?(c=s.attrIndex("class"),d=s.attrs?s.attrs.slice():[],c<0?d.push(["class",r.langPrefix+a]):(d[c]=d[c].slice(),d[c][1]+=" "+r.langPrefix+a),m={attrs:d},"<pre><code"+i.renderAttrs(m)+">"+u+`</code></pre>
`):"<pre><code"+i.renderAttrs(s)+">"+u+`</code></pre>
`};Dh.image=function(e,t,r,n,i){var s=e[t];return s.attrs[s.attrIndex("alt")][1]=i.renderInlineAsText(s.children,r,n),i.renderToken(e,t,r)};Dh.hardbreak=function(e,t,r){return r.xhtmlOut?`<br />
`:`<br>
`};Dh.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};Dh.text=function(e,t){return Tg(e[t].content)};Dh.html_block=function(e,t){return e[t].content};Dh.html_inline=function(e,t){return e[t].content};function Qw(){this.rules=lit({},Dh)}Qw.prototype.renderAttrs=function(t){var r,n,i;if(!t.attrs)return"";for(i="",r=0,n=t.attrs.length;r<n;r++)i+=" "+Tg(t.attrs[r][0])+'="'+Tg(t.attrs[r][1])+'"';return i};Qw.prototype.renderToken=function(t,r,n){var i,s="",o=!1,a=t[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&t[r-1].hidden&&(s+=`
`),s+=(a.nesting===-1?"</":"<")+a.tag,s+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(s+=" /"),a.block&&(o=!0,a.nesting===1&&r+1<t.length&&(i=t[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(o=!1))),s+=o?`>
`:">",s)};Qw.prototype.renderInline=function(e,t,r){for(var n,i="",s=this.rules,o=0,a=e.length;o<a;o++)n=e[o].type,typeof s[n]<"u"?i+=s[n](e,o,t,r,this):i+=this.renderToken(e,o,t);return i};Qw.prototype.renderInlineAsText=function(e,t,r){for(var n="",i=0,s=e.length;i<s;i++)e[i].type==="text"?n+=e[i].content:e[i].type==="image"?n+=this.renderInlineAsText(e[i].children,t,r):e[i].type==="softbreak"&&(n+=`
`);return n};Qw.prototype.render=function(e,t,r){var n,i,s,o="",a=this.rules;for(n=0,i=e.length;n<i;n++)s=e[n].type,s==="inline"?o+=this.renderInline(e[n].children,t,r):typeof a[s]<"u"?o+=a[e[n].type](e,n,t,r,this):o+=this.renderToken(e,n,t,r);return o};var cit=Qw;function vc(){this.__rules__=[],this.__cache__=null}vc.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};vc.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(r){r.enabled&&r.alt.forEach(function(n){t.indexOf(n)<0&&t.push(n)})}),e.__cache__={},t.forEach(function(r){e.__cache__[r]=[],e.__rules__.forEach(function(n){n.enabled&&(r&&n.alt.indexOf(r)<0||e.__cache__[r].push(n.fn))})})};vc.prototype.at=function(e,t,r){var n=this.__find__(e),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=i.alt||[],this.__cache__=null};vc.prototype.before=function(e,t,r,n){var i=this.__find__(e),s=n||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:r,alt:s.alt||[]}),this.__cache__=null};vc.prototype.after=function(e,t,r,n){var i=this.__find__(e),s=n||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:r,alt:s.alt||[]}),this.__cache__=null};vc.prototype.push=function(e,t,r){var n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null};vc.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(n){var i=this.__find__(n);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};vc.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(e,t)};vc.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach(function(n){var i=this.__find__(n);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};vc.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};var lB=vc,hit=/\r\n?|\n/g,pit=/\0/g,dit=function(t){var r;r=t.src.replace(hit,`
`),r=r.replace(pit,""),t.src=r},fit=function(t){var r;t.inlineMode?(r=new t.Token("inline","",0),r.content=t.src,r.map=[0,1],r.children=[],t.tokens.push(r)):t.md.block.parse(t.src,t.md,t.env,t.tokens)},mit=function(t){var r=t.tokens,n,i,s;for(i=0,s=r.length;i<s;i++)n=r[i],n.type==="inline"&&t.md.inline.parse(n.content,t.md,t.env,n.children)},yit=Pr.arrayReplaceAt;function git(e){return/^<a[>\s]/i.test(e)}function vit(e){return/^<\/a\s*>/i.test(e)}var bit=function(t){var r,n,i,s,o,a,l,u,c,h,d,m,y,g,b,S,E=t.tokens,x;if(t.md.options.linkify){for(n=0,i=E.length;n<i;n++)if(!(E[n].type!=="inline"||!t.md.linkify.pretest(E[n].content)))for(s=E[n].children,y=0,r=s.length-1;r>=0;r--){if(a=s[r],a.type==="link_close"){for(r--;s[r].level!==a.level&&s[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(git(a.content)&&y>0&&y--,vit(a.content)&&y++),!(y>0)&&a.type==="text"&&t.md.linkify.test(a.content)){for(c=a.content,x=t.md.linkify.match(c),l=[],m=a.level,d=0,u=0;u<x.length;u++)g=x[u].url,b=t.md.normalizeLink(g),t.md.validateLink(b)&&(S=x[u].text,x[u].schema?x[u].schema==="mailto:"&&!/^mailto:/i.test(S)?S=t.md.normalizeLinkText("mailto:"+S).replace(/^mailto:/,""):S=t.md.normalizeLinkText(S):S=t.md.normalizeLinkText("http://"+S).replace(/^http:\/\//,""),h=x[u].index,h>d&&(o=new t.Token("text","",0),o.content=c.slice(d,h),o.level=m,l.push(o)),o=new t.Token("link_open","a",1),o.attrs=[["href",b]],o.level=m++,o.markup="linkify",o.info="auto",l.push(o),o=new t.Token("text","",0),o.content=S,o.level=m,l.push(o),o=new t.Token("link_close","a",-1),o.level=--m,o.markup="linkify",o.info="auto",l.push(o),d=x[u].lastIndex);d<c.length&&(o=new t.Token("text","",0),o.content=c.slice(d),o.level=m,l.push(o)),E[n].children=s=yit(s,r,l)}}}},Bie=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,wit=/\((c|tm|r|p)\)/i,_it=/\((c|tm|r|p)\)/ig,xit={c:"",r:"",p:"",tm:""};function Sit(e,t){return xit[t.toLowerCase()]}function Eit(e){var t,r,n=0;for(t=e.length-1;t>=0;t--)r=e[t],r.type==="text"&&!n&&(r.content=r.content.replace(_it,Sit)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function Tit(e){var t,r,n=0;for(t=e.length-1;t>=0;t--)r=e[t],r.type==="text"&&!n&&Bie.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}var Iit=function(t){var r;if(t.md.options.typographer)for(r=t.tokens.length-1;r>=0;r--)t.tokens[r].type==="inline"&&(wit.test(t.tokens[r].content)&&Eit(t.tokens[r].children),Bie.test(t.tokens[r].content)&&Tit(t.tokens[r].children))},cW=Pr.isWhiteSpace,hW=Pr.isPunctChar,pW=Pr.isMdAsciiPunct,Ait=/['"]/,dW=/['"]/g,fW="";function nI(e,t,r){return e.substr(0,t)+r+e.substr(t+1)}function Mit(e,t){var r,n,i,s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I;for(w=[],r=0;r<e.length;r++){for(n=e[r],l=e[r].level,E=w.length-1;E>=0&&!(w[E].level<=l);E--);if(w.length=E+1,n.type==="text"){i=n.content,o=0,a=i.length;e:for(;o<a&&(dW.lastIndex=o,s=dW.exec(i),!!s);){if(b=S=!0,o=s.index+1,x=s[0]==="'",c=32,s.index-1>=0)c=i.charCodeAt(s.index-1);else for(E=r-1;E>=0&&!(e[E].type==="softbreak"||e[E].type==="hardbreak");E--)if(e[E].content){c=e[E].content.charCodeAt(e[E].content.length-1);break}if(h=32,o<a)h=i.charCodeAt(o);else for(E=r+1;E<e.length&&!(e[E].type==="softbreak"||e[E].type==="hardbreak");E++)if(e[E].content){h=e[E].content.charCodeAt(0);break}if(d=pW(c)||hW(String.fromCharCode(c)),m=pW(h)||hW(String.fromCharCode(h)),y=cW(c),g=cW(h),g?b=!1:m&&(y||d||(b=!1)),y?S=!1:d&&(g||m||(S=!1)),h===34&&s[0]==='"'&&c>=48&&c<=57&&(S=b=!1),b&&S&&(b=d,S=m),!b&&!S){x&&(n.content=nI(n.content,s.index,fW));continue}if(S){for(E=w.length-1;E>=0&&(u=w[E],!(w[E].level<l));E--)if(u.single===x&&w[E].level===l){u=w[E],x?(T=t.md.options.quotes[2],I=t.md.options.quotes[3]):(T=t.md.options.quotes[0],I=t.md.options.quotes[1]),n.content=nI(n.content,s.index,I),e[u.token].content=nI(e[u.token].content,u.pos,T),o+=I.length-1,u.token===r&&(o+=T.length-1),i=n.content,a=i.length,w.length=E;continue e}}b?w.push({token:r,pos:s.index,single:x,level:l}):S&&x&&(n.content=nI(n.content,s.index,fW))}}}}var Cit=function(t){var r;if(t.md.options.typographer)for(r=t.tokens.length-1;r>=0;r--)t.tokens[r].type!=="inline"||!Ait.test(t.tokens[r].content)||Mit(t.tokens[r].children,t)};function Kw(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Kw.prototype.attrIndex=function(t){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===t)return n;return-1};Kw.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Kw.prototype.attrSet=function(t,r){var n=this.attrIndex(t),i=[t,r];n<0?this.attrPush(i):this.attrs[n]=i};Kw.prototype.attrGet=function(t){var r=this.attrIndex(t),n=null;return r>=0&&(n=this.attrs[r][1]),n};Kw.prototype.attrJoin=function(t,r){var n=this.attrIndex(t);n<0?this.attrPush([t,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};var uB=Kw,kit=uB;function Vie(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}Vie.prototype.Token=kit;var Rit=Vie,Oit=lB,LN=[["normalize",dit],["block",fit],["inline",mit],["linkify",bit],["replacements",Iit],["smartquotes",Cit]];function cB(){this.ruler=new Oit;for(var e=0;e<LN.length;e++)this.ruler.push(LN[e][0],LN[e][1])}cB.prototype.process=function(e){var t,r,n;for(n=this.ruler.getRules(""),t=0,r=n.length;t<r;t++)n[t](e)};cB.prototype.State=Rit;var Nit=cB,PN=Pr.isSpace;function DN(e,t){var r=e.bMarks[t]+e.tShift[t],n=e.eMarks[t];return e.src.substr(r,n-r)}function mW(e){var t=[],r=0,n=e.length,i,s=!1,o=0,a="";for(i=e.charCodeAt(r);r<n;)i===124&&(s?(a+=e.substring(o,r-1),o=r):(t.push(a+e.substring(o,r)),a="",o=r+1)),s=i===92,r++,i=e.charCodeAt(r);return t.push(a+e.substring(o)),t}var Lit=function(t,r,n,i){var s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I;if(r+2>n||(c=r+1,t.sCount[c]<t.blkIndent)||t.sCount[c]-t.blkIndent>=4||(a=t.bMarks[c]+t.tShift[c],a>=t.eMarks[c])||(T=t.src.charCodeAt(a++),T!==124&&T!==45&&T!==58)||a>=t.eMarks[c]||(I=t.src.charCodeAt(a++),I!==124&&I!==45&&I!==58&&!PN(I))||T===45&&PN(I))return!1;for(;a<t.eMarks[c];){if(s=t.src.charCodeAt(a),s!==124&&s!==45&&s!==58&&!PN(s))return!1;a++}for(o=DN(t,r+1),h=o.split("|"),y=[],l=0;l<h.length;l++){if(g=h[l].trim(),!g){if(l===0||l===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(g))return!1;g.charCodeAt(g.length-1)===58?y.push(g.charCodeAt(0)===58?"center":"right"):g.charCodeAt(0)===58?y.push("left"):y.push("")}if(o=DN(t,r).trim(),o.indexOf("|")===-1||t.sCount[r]-t.blkIndent>=4||(h=mW(o),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),d=h.length,d===0||d!==y.length))return!1;if(i)return!0;for(E=t.parentType,t.parentType="table",w=t.md.block.ruler.getRules("blockquote"),m=t.push("table_open","table",1),m.map=b=[r,0],m=t.push("thead_open","thead",1),m.map=[r,r+1],m=t.push("tr_open","tr",1),m.map=[r,r+1],l=0;l<h.length;l++)m=t.push("th_open","th",1),y[l]&&(m.attrs=[["style","text-align:"+y[l]]]),m=t.push("inline","",0),m.content=h[l].trim(),m.children=[],m=t.push("th_close","th",-1);for(m=t.push("tr_close","tr",-1),m=t.push("thead_close","thead",-1),c=r+2;c<n&&!(t.sCount[c]<t.blkIndent);c++){for(x=!1,l=0,u=w.length;l<u;l++)if(w[l](t,c,n,!0)){x=!0;break}if(x||(o=DN(t,c).trim(),!o)||t.sCount[c]-t.blkIndent>=4)break;for(h=mW(o),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),c===r+2&&(m=t.push("tbody_open","tbody",1),m.map=S=[r+2,0]),m=t.push("tr_open","tr",1),m.map=[c,c+1],l=0;l<d;l++)m=t.push("td_open","td",1),y[l]&&(m.attrs=[["style","text-align:"+y[l]]]),m=t.push("inline","",0),m.content=h[l]?h[l].trim():"",m.children=[],m=t.push("td_close","td",-1);m=t.push("tr_close","tr",-1)}return S&&(m=t.push("tbody_close","tbody",-1),S[1]=c),m=t.push("table_close","table",-1),b[1]=c,t.parentType=E,t.line=c,!0},Pit=function(t,r,n){var i,s,o;if(t.sCount[r]-t.blkIndent<4)return!1;for(s=i=r+1;i<n;){if(t.isEmpty(i)){i++;continue}if(t.sCount[i]-t.blkIndent>=4){i++,s=i;continue}break}return t.line=s,o=t.push("code_block","code",0),o.content=t.getLines(r,s,4+t.blkIndent,!1)+`
`,o.map=[r,t.line],!0},Dit=function(t,r,n,i){var s,o,a,l,u,c,h,d=!1,m=t.bMarks[r]+t.tShift[r],y=t.eMarks[r];if(t.sCount[r]-t.blkIndent>=4||m+3>y||(s=t.src.charCodeAt(m),s!==126&&s!==96)||(u=m,m=t.skipChars(m,s),o=m-u,o<3)||(h=t.src.slice(u,m),a=t.src.slice(m,y),s===96&&a.indexOf(String.fromCharCode(s))>=0))return!1;if(i)return!0;for(l=r;l++,!(l>=n||(m=u=t.bMarks[l]+t.tShift[l],y=t.eMarks[l],m<y&&t.sCount[l]<t.blkIndent));)if(t.src.charCodeAt(m)===s&&!(t.sCount[l]-t.blkIndent>=4)&&(m=t.skipChars(m,s),!(m-u<o)&&(m=t.skipSpaces(m),!(m<y)))){d=!0;break}return o=t.sCount[r],t.line=l+(d?1:0),c=t.push("fence","code",0),c.info=a,c.content=t.getLines(r+1,l,o,!0),c.markup=h,c.map=[r,t.line],!0},yW=Pr.isSpace,Fit=function(t,r,n,i){var s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k=t.lineMax,N=t.bMarks[r]+t.tShift[r],F=t.eMarks[r];if(t.sCount[r]-t.blkIndent>=4||t.src.charCodeAt(N++)!==62)return!1;if(i)return!0;for(l=m=t.sCount[r]+1,t.src.charCodeAt(N)===32?(N++,l++,m++,s=!1,w=!0):t.src.charCodeAt(N)===9?(w=!0,(t.bsCount[r]+m)%4===3?(N++,l++,m++,s=!1):s=!0):w=!1,y=[t.bMarks[r]],t.bMarks[r]=N;N<F&&(o=t.src.charCodeAt(N),yW(o));){o===9?m+=4-(m+t.bsCount[r]+(s?1:0))%4:m++;N++}for(g=[t.bsCount[r]],t.bsCount[r]=t.sCount[r]+1+(w?1:0),c=N>=F,E=[t.sCount[r]],t.sCount[r]=m-l,x=[t.tShift[r]],t.tShift[r]=N-t.bMarks[r],I=t.md.block.ruler.getRules("blockquote"),S=t.parentType,t.parentType="blockquote",d=r+1;d<n&&(C=t.sCount[d]<t.blkIndent,N=t.bMarks[d]+t.tShift[d],F=t.eMarks[d],!(N>=F));d++){if(t.src.charCodeAt(N++)===62&&!C){for(l=m=t.sCount[d]+1,t.src.charCodeAt(N)===32?(N++,l++,m++,s=!1,w=!0):t.src.charCodeAt(N)===9?(w=!0,(t.bsCount[d]+m)%4===3?(N++,l++,m++,s=!1):s=!0):w=!1,y.push(t.bMarks[d]),t.bMarks[d]=N;N<F&&(o=t.src.charCodeAt(N),yW(o));){o===9?m+=4-(m+t.bsCount[d]+(s?1:0))%4:m++;N++}c=N>=F,g.push(t.bsCount[d]),t.bsCount[d]=t.sCount[d]+1+(w?1:0),E.push(t.sCount[d]),t.sCount[d]=m-l,x.push(t.tShift[d]),t.tShift[d]=N-t.bMarks[d];continue}if(c)break;for(T=!1,a=0,u=I.length;a<u;a++)if(I[a](t,d,n,!0)){T=!0;break}if(T){t.lineMax=d,t.blkIndent!==0&&(y.push(t.bMarks[d]),g.push(t.bsCount[d]),x.push(t.tShift[d]),E.push(t.sCount[d]),t.sCount[d]-=t.blkIndent);break}y.push(t.bMarks[d]),g.push(t.bsCount[d]),x.push(t.tShift[d]),E.push(t.sCount[d]),t.sCount[d]=-1}for(b=t.blkIndent,t.blkIndent=0,M=t.push("blockquote_open","blockquote",1),M.markup=">",M.map=h=[r,0],t.md.block.tokenize(t,r,d),M=t.push("blockquote_close","blockquote",-1),M.markup=">",t.lineMax=k,t.parentType=S,h[1]=t.line,a=0;a<x.length;a++)t.bMarks[a+r]=y[a],t.tShift[a+r]=x[a],t.sCount[a+r]=E[a],t.bsCount[a+r]=g[a];return t.blkIndent=b,!0},jit=Pr.isSpace,Uit=function(t,r,n,i){var s,o,a,l,u=t.bMarks[r]+t.tShift[r],c=t.eMarks[r];if(t.sCount[r]-t.blkIndent>=4||(s=t.src.charCodeAt(u++),s!==42&&s!==45&&s!==95))return!1;for(o=1;u<c;){if(a=t.src.charCodeAt(u++),a!==s&&!jit(a))return!1;a===s&&o++}return o<3?!1:(i||(t.line=r+1,l=t.push("hr","hr",0),l.map=[r,t.line],l.markup=Array(o+1).join(String.fromCharCode(s))),!0)},Gie=Pr.isSpace;function gW(e,t){var r,n,i,s;return n=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],r=e.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(s=e.src.charCodeAt(n),!Gie(s))?-1:n}function vW(e,t){var r,n=e.bMarks[t]+e.tShift[t],i=n,s=e.eMarks[t];if(i+1>=s||(r=e.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=s)return-1;if(r=e.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<s&&(r=e.src.charCodeAt(i),!Gie(r))?-1:i}function Bit(e,t){var r,n,i=e.level+2;for(r=t+2,n=e.tokens.length-2;r<n;r++)e.tokens[r].level===i&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}var Vit=function(t,r,n,i){var s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k,N,F,P,B,O,v,A,R=!1,U=!0;if(t.sCount[r]-t.blkIndent>=4||t.listIndent>=0&&t.sCount[r]-t.listIndent>=4&&t.sCount[r]<t.blkIndent)return!1;if(i&&t.parentType==="paragraph"&&t.sCount[r]>=t.blkIndent&&(R=!0),(F=vW(t,r))>=0){if(h=!0,B=t.bMarks[r]+t.tShift[r],S=Number(t.src.slice(B,F-1)),R&&S!==1)return!1}else if((F=gW(t,r))>=0)h=!1;else return!1;if(R&&t.skipSpaces(F)>=t.eMarks[r])return!1;if(b=t.src.charCodeAt(F-1),i)return!0;for(g=t.tokens.length,h?(A=t.push("ordered_list_open","ol",1),S!==1&&(A.attrs=[["start",S]])):A=t.push("bullet_list_open","ul",1),A.map=y=[r,0],A.markup=String.fromCharCode(b),x=r,P=!1,v=t.md.block.ruler.getRules("list"),I=t.parentType,t.parentType="list";x<n;){for(N=F,E=t.eMarks[x],c=w=t.sCount[x]+F-(t.bMarks[r]+t.tShift[r]);N<E;){if(s=t.src.charCodeAt(N),s===9)w+=4-(w+t.bsCount[x])%4;else if(s===32)w++;else break;N++}if(o=N,o>=E?u=1:u=w-c,u>4&&(u=1),l=c+u,A=t.push("list_item_open","li",1),A.markup=String.fromCharCode(b),A.map=d=[r,0],h&&(A.info=t.src.slice(B,F-1)),k=t.tight,C=t.tShift[r],M=t.sCount[r],T=t.listIndent,t.listIndent=t.blkIndent,t.blkIndent=l,t.tight=!0,t.tShift[r]=o-t.bMarks[r],t.sCount[r]=w,o>=E&&t.isEmpty(r+1)?t.line=Math.min(t.line+2,n):t.md.block.tokenize(t,r,n,!0),(!t.tight||P)&&(U=!1),P=t.line-r>1&&t.isEmpty(t.line-1),t.blkIndent=t.listIndent,t.listIndent=T,t.tShift[r]=C,t.sCount[r]=M,t.tight=k,A=t.push("list_item_close","li",-1),A.markup=String.fromCharCode(b),x=r=t.line,d[1]=x,o=t.bMarks[r],x>=n||t.sCount[x]<t.blkIndent||t.sCount[r]-t.blkIndent>=4)break;for(O=!1,a=0,m=v.length;a<m;a++)if(v[a](t,x,n,!0)){O=!0;break}if(O)break;if(h){if(F=vW(t,x),F<0)break;B=t.bMarks[x]+t.tShift[x]}else if(F=gW(t,x),F<0)break;if(b!==t.src.charCodeAt(F-1))break}return h?A=t.push("ordered_list_close","ol",-1):A=t.push("bullet_list_close","ul",-1),A.markup=String.fromCharCode(b),y[1]=x,t.line=x,t.parentType=I,U&&Bit(t,g),!0},Git=Pr.normalizeReference,iI=Pr.isSpace,zit=function(t,r,n,i){var s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T=0,I=t.bMarks[r]+t.tShift[r],M=t.eMarks[r],C=r+1;if(t.sCount[r]-t.blkIndent>=4||t.src.charCodeAt(I)!==91)return!1;for(;++I<M;)if(t.src.charCodeAt(I)===93&&t.src.charCodeAt(I-1)!==92){if(I+1===M||t.src.charCodeAt(I+1)!==58)return!1;break}for(l=t.lineMax,x=t.md.block.ruler.getRules("reference"),y=t.parentType,t.parentType="reference";C<l&&!t.isEmpty(C);C++)if(!(t.sCount[C]-t.blkIndent>3)&&!(t.sCount[C]<0)){for(E=!1,c=0,h=x.length;c<h;c++)if(x[c](t,C,l,!0)){E=!0;break}if(E)break}for(S=t.getLines(r,C,t.blkIndent,!1).trim(),M=S.length,I=1;I<M;I++){if(s=S.charCodeAt(I),s===91)return!1;if(s===93){m=I;break}else s===10?T++:s===92&&(I++,I<M&&S.charCodeAt(I)===10&&T++)}if(m<0||S.charCodeAt(m+1)!==58)return!1;for(I=m+2;I<M;I++)if(s=S.charCodeAt(I),s===10)T++;else if(!iI(s))break;if(g=t.md.helpers.parseLinkDestination(S,I,M),!g.ok||(u=t.md.normalizeLink(g.str),!t.md.validateLink(u)))return!1;for(I=g.pos,T+=g.lines,o=I,a=T,b=I;I<M;I++)if(s=S.charCodeAt(I),s===10)T++;else if(!iI(s))break;for(g=t.md.helpers.parseLinkTitle(S,I,M),I<M&&b!==I&&g.ok?(w=g.str,I=g.pos,T+=g.lines):(w="",I=o,T=a);I<M&&(s=S.charCodeAt(I),!!iI(s));)I++;if(I<M&&S.charCodeAt(I)!==10&&w)for(w="",I=o,T=a;I<M&&(s=S.charCodeAt(I),!!iI(s));)I++;return I<M&&S.charCodeAt(I)!==10||(d=Git(S.slice(1,m)),!d)?!1:(i||(typeof t.env.references>"u"&&(t.env.references={}),typeof t.env.references[d]>"u"&&(t.env.references[d]={title:w,href:u}),t.parentType=y,t.line=r+T+1),!0)},$it=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Rk={},qit="[a-zA-Z_:][a-zA-Z0-9:._-]*",Hit="[^\"'=<>`\\x00-\\x20]+",Wit="'[^']*'",Zit='"[^"]*"',Jit="(?:"+Hit+"|"+Wit+"|"+Zit+")",Yit="(?:\\s+"+qit+"(?:\\s*=\\s*"+Jit+")?)",zie="<[A-Za-z][A-Za-z0-9\\-]*"+Yit+"*\\s*\\/?>",$ie="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Xit="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Qit="<[?][\\s\\S]*?[?]>",Kit="<![A-Z]+\\s+[^>]*>",est="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",tst=new RegExp("^(?:"+zie+"|"+$ie+"|"+Xit+"|"+Qit+"|"+Kit+"|"+est+")"),rst=new RegExp("^(?:"+zie+"|"+$ie+")");Rk.HTML_TAG_RE=tst;Rk.HTML_OPEN_CLOSE_TAG_RE=rst;var nst=$it,ist=Rk.HTML_OPEN_CLOSE_TAG_RE,R1=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+nst.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(ist.source+"\\s*$"),/^$/,!1]],sst=function(t,r,n,i){var s,o,a,l,u=t.bMarks[r]+t.tShift[r],c=t.eMarks[r];if(t.sCount[r]-t.blkIndent>=4||!t.md.options.html||t.src.charCodeAt(u)!==60)return!1;for(l=t.src.slice(u,c),s=0;s<R1.length&&!R1[s][0].test(l);s++);if(s===R1.length)return!1;if(i)return R1[s][2];if(o=r+1,!R1[s][1].test(l)){for(;o<n&&!(t.sCount[o]<t.blkIndent);o++)if(u=t.bMarks[o]+t.tShift[o],c=t.eMarks[o],l=t.src.slice(u,c),R1[s][1].test(l)){l.length!==0&&o++;break}}return t.line=o,a=t.push("html_block","",0),a.map=[r,o],a.content=t.getLines(r,o,t.blkIndent,!0),!0},bW=Pr.isSpace,ost=function(t,r,n,i){var s,o,a,l,u=t.bMarks[r]+t.tShift[r],c=t.eMarks[r];if(t.sCount[r]-t.blkIndent>=4||(s=t.src.charCodeAt(u),s!==35||u>=c))return!1;for(o=1,s=t.src.charCodeAt(++u);s===35&&u<c&&o<=6;)o++,s=t.src.charCodeAt(++u);return o>6||u<c&&!bW(s)?!1:(i||(c=t.skipSpacesBack(c,u),a=t.skipCharsBack(c,35,u),a>u&&bW(t.src.charCodeAt(a-1))&&(c=a),t.line=r+1,l=t.push("heading_open","h"+String(o),1),l.markup="########".slice(0,o),l.map=[r,t.line],l=t.push("inline","",0),l.content=t.src.slice(u,c).trim(),l.map=[r,t.line],l.children=[],l=t.push("heading_close","h"+String(o),-1),l.markup="########".slice(0,o)),!0)},ast=function(t,r,n){var i,s,o,a,l,u,c,h,d,m=r+1,y,g=t.md.block.ruler.getRules("paragraph");if(t.sCount[r]-t.blkIndent>=4)return!1;for(y=t.parentType,t.parentType="paragraph";m<n&&!t.isEmpty(m);m++)if(!(t.sCount[m]-t.blkIndent>3)){if(t.sCount[m]>=t.blkIndent&&(u=t.bMarks[m]+t.tShift[m],c=t.eMarks[m],u<c&&(d=t.src.charCodeAt(u),(d===45||d===61)&&(u=t.skipChars(u,d),u=t.skipSpaces(u),u>=c)))){h=d===61?1:2;break}if(!(t.sCount[m]<0)){for(s=!1,o=0,a=g.length;o<a;o++)if(g[o](t,m,n,!0)){s=!0;break}if(s)break}}return h?(i=t.getLines(r,m,t.blkIndent,!1).trim(),t.line=m+1,l=t.push("heading_open","h"+String(h),1),l.markup=String.fromCharCode(d),l.map=[r,t.line],l=t.push("inline","",0),l.content=i,l.map=[r,t.line-1],l.children=[],l=t.push("heading_close","h"+String(h),-1),l.markup=String.fromCharCode(d),t.parentType=y,!0):!1},lst=function(t,r){var n,i,s,o,a,l,u=r+1,c=t.md.block.ruler.getRules("paragraph"),h=t.lineMax;for(l=t.parentType,t.parentType="paragraph";u<h&&!t.isEmpty(u);u++)if(!(t.sCount[u]-t.blkIndent>3)&&!(t.sCount[u]<0)){for(i=!1,s=0,o=c.length;s<o;s++)if(c[s](t,u,h,!0)){i=!0;break}if(i)break}return n=t.getLines(r,u,t.blkIndent,!1).trim(),t.line=u,a=t.push("paragraph_open","p",1),a.map=[r,t.line],a=t.push("inline","",0),a.content=n,a.map=[r,t.line],a.children=[],a=t.push("paragraph_close","p",-1),t.parentType=l,!0},qie=uB,Ok=Pr.isSpace;function Fh(e,t,r,n){var i,s,o,a,l,u,c,h;for(this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",s=this.src,h=!1,o=a=u=c=0,l=s.length;a<l;a++){if(i=s.charCodeAt(a),!h)if(Ok(i)){u++,i===9?c+=4-c%4:c++;continue}else h=!0;(i===10||a===l-1)&&(i!==10&&a++,this.bMarks.push(o),this.eMarks.push(a),this.tShift.push(u),this.sCount.push(c),this.bsCount.push(0),h=!1,u=0,c=0,o=a+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Fh.prototype.push=function(e,t,r){var n=new qie(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};Fh.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Fh.prototype.skipEmptyLines=function(t){for(var r=this.lineMax;t<r&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Fh.prototype.skipSpaces=function(t){for(var r,n=this.src.length;t<n&&(r=this.src.charCodeAt(t),!!Ok(r));t++);return t};Fh.prototype.skipSpacesBack=function(t,r){if(t<=r)return t;for(;t>r;)if(!Ok(this.src.charCodeAt(--t)))return t+1;return t};Fh.prototype.skipChars=function(t,r){for(var n=this.src.length;t<n&&this.src.charCodeAt(t)===r;t++);return t};Fh.prototype.skipCharsBack=function(t,r,n){if(t<=n)return t;for(;t>n;)if(r!==this.src.charCodeAt(--t))return t+1;return t};Fh.prototype.getLines=function(t,r,n,i){var s,o,a,l,u,c,h,d=t;if(t>=r)return"";for(c=new Array(r-t),s=0;d<r;d++,s++){for(o=0,h=l=this.bMarks[d],d+1<r||i?u=this.eMarks[d]+1:u=this.eMarks[d];l<u&&o<n;){if(a=this.src.charCodeAt(l),Ok(a))a===9?o+=4-(o+this.bsCount[d])%4:o++;else if(l-h<this.tShift[d])o++;else break;l++}o>n?c[s]=new Array(o-n+1).join(" ")+this.src.slice(l,u):c[s]=this.src.slice(l,u)}return c.join("")};Fh.prototype.Token=qie;var ust=Fh,cst=lB,sI=[["table",Lit,["paragraph","reference"]],["code",Pit],["fence",Dit,["paragraph","reference","blockquote","list"]],["blockquote",Fit,["paragraph","reference","blockquote","list"]],["hr",Uit,["paragraph","reference","blockquote","list"]],["list",Vit,["paragraph","reference","blockquote"]],["reference",zit],["html_block",sst,["paragraph","reference","blockquote"]],["heading",ost,["paragraph","reference","blockquote"]],["lheading",ast],["paragraph",lst]];function Nk(){this.ruler=new cst;for(var e=0;e<sI.length;e++)this.ruler.push(sI[e][0],sI[e][1],{alt:(sI[e][2]||[]).slice()})}Nk.prototype.tokenize=function(e,t,r){for(var n,i,s=this.ruler.getRules(""),o=s.length,a=t,l=!1,u=e.md.options.maxNesting;a<r&&(e.line=a=e.skipEmptyLines(a),!(a>=r||e.sCount[a]<e.blkIndent));){if(e.level>=u){e.line=r;break}for(i=0;i<o&&(n=s[i](e,a,r,!1),!n);i++);e.tight=!l,e.isEmpty(e.line-1)&&(l=!0),a=e.line,a<r&&e.isEmpty(a)&&(l=!0,a++,e.line=a)}};Nk.prototype.parse=function(e,t,r,n){var i;e&&(i=new this.State(e,t,r,n),this.tokenize(i,i.line,i.lineMax))};Nk.prototype.State=ust;var hst=Nk;function pst(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}var dst=function(t,r){for(var n=t.pos;n<t.posMax&&!pst(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(r||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)},fst=Pr.isSpace,mst=function(t,r){var n,i,s,o=t.pos;if(t.src.charCodeAt(o)!==10)return!1;if(n=t.pending.length-1,i=t.posMax,!r)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){for(s=n-1;s>=1&&t.pending.charCodeAt(s-1)===32;)s--;t.pending=t.pending.slice(0,s),t.push("hardbreak","br",0)}else t.pending=t.pending.slice(0,-1),t.push("softbreak","br",0);else t.push("softbreak","br",0);for(o++;o<i&&fst(t.src.charCodeAt(o));)o++;return t.pos=o,!0},yst=Pr.isSpace,hB=[];for(var wW=0;wW<256;wW++)hB.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){hB[e.charCodeAt(0)]=1});var gst=function(t,r){var n,i=t.pos,s=t.posMax;if(t.src.charCodeAt(i)!==92)return!1;if(i++,i<s){if(n=t.src.charCodeAt(i),n<256&&hB[n]!==0)return r||(t.pending+=t.src[i]),t.pos+=2,!0;if(n===10){for(r||t.push("hardbreak","br",0),i++;i<s&&(n=t.src.charCodeAt(i),!!yst(n));)i++;return t.pos=i,!0}}return r||(t.pending+="\\"),t.pos++,!0},vst=function(t,r){var n,i,s,o,a,l,u,c,h=t.pos,d=t.src.charCodeAt(h);if(d!==96)return!1;for(n=h,h++,i=t.posMax;h<i&&t.src.charCodeAt(h)===96;)h++;if(s=t.src.slice(n,h),u=s.length,t.backticksScanned&&(t.backticks[u]||0)<=n)return r||(t.pending+=s),t.pos+=u,!0;for(a=l=h;(a=t.src.indexOf("`",l))!==-1;){for(l=a+1;l<i&&t.src.charCodeAt(l)===96;)l++;if(c=l-a,c===u)return r||(o=t.push("code_inline","code",0),o.markup=s,o.content=t.src.slice(h,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),t.pos=l,!0;t.backticks[c]=a}return t.backticksScanned=!0,r||(t.pending+=s),t.pos+=u,!0},Lk={};Lk.tokenize=function(t,r){var n,i,s,o,a,l=t.pos,u=t.src.charCodeAt(l);if(r||u!==126||(i=t.scanDelims(t.pos,!0),o=i.length,a=String.fromCharCode(u),o<2))return!1;for(o%2&&(s=t.push("text","",0),s.content=a,o--),n=0;n<o;n+=2)s=t.push("text","",0),s.content=a+a,t.delimiters.push({marker:u,length:0,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function _W(e,t){var r,n,i,s,o,a=[],l=t.length;for(r=0;r<l;r++)i=t[r],i.marker===126&&i.end!==-1&&(s=t[i.end],o=e.tokens[i.token],o.type="s_open",o.tag="s",o.nesting=1,o.markup="~~",o.content="",o=e.tokens[s.token],o.type="s_close",o.tag="s",o.nesting=-1,o.markup="~~",o.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&a.push(s.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<e.tokens.length&&e.tokens[n].type==="s_close";)n++;n--,r!==n&&(o=e.tokens[n],e.tokens[n]=e.tokens[r],e.tokens[r]=o)}}Lk.postProcess=function(t){var r,n=t.tokens_meta,i=t.tokens_meta.length;for(_W(t,t.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&_W(t,n[r].delimiters)};var Pk={};Pk.tokenize=function(t,r){var n,i,s,o=t.pos,a=t.src.charCodeAt(o);if(r||a!==95&&a!==42)return!1;for(i=t.scanDelims(t.pos,a===42),n=0;n<i.length;n++)s=t.push("text","",0),s.content=String.fromCharCode(a),t.delimiters.push({marker:a,length:i.length,token:t.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return t.pos+=i.length,!0};function xW(e,t){var r,n,i,s,o,a,l=t.length;for(r=l-1;r>=0;r--)n=t[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=t[n.end],a=r>0&&t[r-1].end===n.end+1&&t[r-1].marker===n.marker&&t[r-1].token===n.token-1&&t[n.end+1].token===i.token+1,o=String.fromCharCode(n.marker),s=e.tokens[n.token],s.type=a?"strong_open":"em_open",s.tag=a?"strong":"em",s.nesting=1,s.markup=a?o+o:o,s.content="",s=e.tokens[i.token],s.type=a?"strong_close":"em_close",s.tag=a?"strong":"em",s.nesting=-1,s.markup=a?o+o:o,s.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--))}Pk.postProcess=function(t){var r,n=t.tokens_meta,i=t.tokens_meta.length;for(xW(t,t.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&xW(t,n[r].delimiters)};var bst=Pr.normalizeReference,FN=Pr.isSpace,wst=function(t,r){var n,i,s,o,a,l,u,c,h,d="",m="",y=t.pos,g=t.posMax,b=t.pos,S=!0;if(t.src.charCodeAt(t.pos)!==91||(a=t.pos+1,o=t.md.helpers.parseLinkLabel(t,t.pos,!0),o<0))return!1;if(l=o+1,l<g&&t.src.charCodeAt(l)===40){for(S=!1,l++;l<g&&(i=t.src.charCodeAt(l),!(!FN(i)&&i!==10));l++);if(l>=g)return!1;if(b=l,u=t.md.helpers.parseLinkDestination(t.src,l,t.posMax),u.ok){for(d=t.md.normalizeLink(u.str),t.md.validateLink(d)?l=u.pos:d="",b=l;l<g&&(i=t.src.charCodeAt(l),!(!FN(i)&&i!==10));l++);if(u=t.md.helpers.parseLinkTitle(t.src,l,t.posMax),l<g&&b!==l&&u.ok)for(m=u.str,l=u.pos;l<g&&(i=t.src.charCodeAt(l),!(!FN(i)&&i!==10));l++);}(l>=g||t.src.charCodeAt(l)!==41)&&(S=!0),l++}if(S){if(typeof t.env.references>"u")return!1;if(l<g&&t.src.charCodeAt(l)===91?(b=l+1,l=t.md.helpers.parseLinkLabel(t,l),l>=0?s=t.src.slice(b,l++):l=o+1):l=o+1,s||(s=t.src.slice(a,o)),c=t.env.references[bst(s)],!c)return t.pos=y,!1;d=c.href,m=c.title}return r||(t.pos=a,t.posMax=o,h=t.push("link_open","a",1),h.attrs=n=[["href",d]],m&&n.push(["title",m]),t.md.inline.tokenize(t),h=t.push("link_close","a",-1)),t.pos=l,t.posMax=g,!0},_st=Pr.normalizeReference,jN=Pr.isSpace,xst=function(t,r){var n,i,s,o,a,l,u,c,h,d,m,y,g,b="",S=t.pos,E=t.posMax;if(t.src.charCodeAt(t.pos)!==33||t.src.charCodeAt(t.pos+1)!==91||(l=t.pos+2,a=t.md.helpers.parseLinkLabel(t,t.pos+1,!1),a<0))return!1;if(u=a+1,u<E&&t.src.charCodeAt(u)===40){for(u++;u<E&&(i=t.src.charCodeAt(u),!(!jN(i)&&i!==10));u++);if(u>=E)return!1;for(g=u,h=t.md.helpers.parseLinkDestination(t.src,u,t.posMax),h.ok&&(b=t.md.normalizeLink(h.str),t.md.validateLink(b)?u=h.pos:b=""),g=u;u<E&&(i=t.src.charCodeAt(u),!(!jN(i)&&i!==10));u++);if(h=t.md.helpers.parseLinkTitle(t.src,u,t.posMax),u<E&&g!==u&&h.ok)for(d=h.str,u=h.pos;u<E&&(i=t.src.charCodeAt(u),!(!jN(i)&&i!==10));u++);else d="";if(u>=E||t.src.charCodeAt(u)!==41)return t.pos=S,!1;u++}else{if(typeof t.env.references>"u")return!1;if(u<E&&t.src.charCodeAt(u)===91?(g=u+1,u=t.md.helpers.parseLinkLabel(t,u),u>=0?o=t.src.slice(g,u++):u=a+1):u=a+1,o||(o=t.src.slice(l,a)),c=t.env.references[_st(o)],!c)return t.pos=S,!1;b=c.href,d=c.title}return r||(s=t.src.slice(l,a),t.md.inline.parse(s,t.md,t.env,y=[]),m=t.push("image","img",0),m.attrs=n=[["src",b],["alt",""]],m.children=y,m.content=s,d&&n.push(["title",d])),t.pos=u,t.posMax=E,!0},Sst=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Est=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/,Tst=function(t,r){var n,i,s,o,a,l,u=t.pos;if(t.src.charCodeAt(u)!==60)return!1;for(a=t.pos,l=t.posMax;;){if(++u>=l||(o=t.src.charCodeAt(u),o===60))return!1;if(o===62)break}return n=t.src.slice(a+1,u),Est.test(n)?(i=t.md.normalizeLink(n),t.md.validateLink(i)?(r||(s=t.push("link_open","a",1),s.attrs=[["href",i]],s.markup="autolink",s.info="auto",s=t.push("text","",0),s.content=t.md.normalizeLinkText(n),s=t.push("link_close","a",-1),s.markup="autolink",s.info="auto"),t.pos+=n.length+2,!0):!1):Sst.test(n)?(i=t.md.normalizeLink("mailto:"+n),t.md.validateLink(i)?(r||(s=t.push("link_open","a",1),s.attrs=[["href",i]],s.markup="autolink",s.info="auto",s=t.push("text","",0),s.content=t.md.normalizeLinkText(n),s=t.push("link_close","a",-1),s.markup="autolink",s.info="auto"),t.pos+=n.length+2,!0):!1):!1},Ist=Rk.HTML_TAG_RE;function Ast(e){var t=e|32;return t>=97&&t<=122}var Mst=function(t,r){var n,i,s,o,a=t.pos;return!t.md.options.html||(s=t.posMax,t.src.charCodeAt(a)!==60||a+2>=s)||(n=t.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!Ast(n))||(i=t.src.slice(a).match(Ist),!i)?!1:(r||(o=t.push("html_inline","",0),o.content=t.src.slice(a,a+i[0].length)),t.pos+=i[0].length,!0)},SW=Die,Cst=Pr.has,kst=Pr.isValidEntityCode,EW=Pr.fromCodePoint,Rst=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Ost=/^&([a-z][a-z0-9]{1,31});/i,Nst=function(t,r){var n,i,s,o=t.pos,a=t.posMax;if(t.src.charCodeAt(o)!==38)return!1;if(o+1<a){if(n=t.src.charCodeAt(o+1),n===35){if(s=t.src.slice(o).match(Rst),s)return r||(i=s[1][0].toLowerCase()==="x"?parseInt(s[1].slice(1),16):parseInt(s[1],10),t.pending+=kst(i)?EW(i):EW(65533)),t.pos+=s[0].length,!0}else if(s=t.src.slice(o).match(Ost),s&&Cst(SW,s[1]))return r||(t.pending+=SW[s[1]]),t.pos+=s[0].length,!0}return r||(t.pending+="&"),t.pos++,!0};function TW(e,t){var r,n,i,s,o,a,l,u,c={},h=t.length;if(h){var d=0,m=-2,y=[];for(r=0;r<h;r++)if(i=t[r],y.push(0),(t[d].marker!==i.marker||m!==i.token-1)&&(d=r),m=i.token,i.length=i.length||0,!!i.close){for(c.hasOwnProperty(i.marker)||(c[i.marker]=[-1,-1,-1,-1,-1,-1]),o=c[i.marker][(i.open?3:0)+i.length%3],n=d-y[d]-1,a=n;n>o;n-=y[n]+1)if(s=t[n],s.marker===i.marker&&s.open&&s.end<0&&(l=!1,(s.close||i.open)&&(s.length+i.length)%3===0&&(s.length%3!==0||i.length%3!==0)&&(l=!0),!l)){u=n>0&&!t[n-1].open?y[n-1]+1:0,y[r]=r-n+u,y[n]=u,i.open=!1,s.end=r,s.close=!1,a=-1,m=-2;break}a!==-1&&(c[i.marker][(i.open?3:0)+(i.length||0)%3]=a)}}}var Lst=function(t){var r,n=t.tokens_meta,i=t.tokens_meta.length;for(TW(t,t.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&TW(t,n[r].delimiters)},Pst=function(t){var r,n,i=0,s=t.tokens,o=t.tokens.length;for(r=n=0;r<o;r++)s[r].nesting<0&&i--,s[r].level=i,s[r].nesting>0&&i++,s[r].type==="text"&&r+1<o&&s[r+1].type==="text"?s[r+1].content=s[r].content+s[r+1].content:(r!==n&&(s[n]=s[r]),n++);r!==n&&(s.length=n)},pB=uB,IW=Pr.isWhiteSpace,AW=Pr.isPunctChar,MW=Pr.isMdAsciiPunct;function TT(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}TT.prototype.pushPending=function(){var e=new pB("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};TT.prototype.push=function(e,t,r){this.pending&&this.pushPending();var n=new pB(e,t,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};TT.prototype.scanDelims=function(e,t){var r=e,n,i,s,o,a,l,u,c,h,d=!0,m=!0,y=this.posMax,g=this.src.charCodeAt(e);for(n=e>0?this.src.charCodeAt(e-1):32;r<y&&this.src.charCodeAt(r)===g;)r++;return s=r-e,i=r<y?this.src.charCodeAt(r):32,u=MW(n)||AW(String.fromCharCode(n)),h=MW(i)||AW(String.fromCharCode(i)),l=IW(n),c=IW(i),c?d=!1:h&&(l||u||(d=!1)),l?m=!1:u&&(c||h||(m=!1)),t?(o=d,a=m):(o=d&&(!m||u),a=m&&(!d||h)),{can_open:o,can_close:a,length:s}};TT.prototype.Token=pB;var Dst=TT,CW=lB,UN=[["text",dst],["newline",mst],["escape",gst],["backticks",vst],["strikethrough",Lk.tokenize],["emphasis",Pk.tokenize],["link",wst],["image",xst],["autolink",Tst],["html_inline",Mst],["entity",Nst]],BN=[["balance_pairs",Lst],["strikethrough",Lk.postProcess],["emphasis",Pk.postProcess],["text_collapse",Pst]];function IT(){var e;for(this.ruler=new CW,e=0;e<UN.length;e++)this.ruler.push(UN[e][0],UN[e][1]);for(this.ruler2=new CW,e=0;e<BN.length;e++)this.ruler2.push(BN[e][0],BN[e][1])}IT.prototype.skipToken=function(e){var t,r,n=e.pos,i=this.ruler.getRules(""),s=i.length,o=e.md.options.maxNesting,a=e.cache;if(typeof a[n]<"u"){e.pos=a[n];return}if(e.level<o)for(r=0;r<s&&(e.level++,t=i[r](e,!0),e.level--,!t);r++);else e.pos=e.posMax;t||e.pos++,a[n]=e.pos};IT.prototype.tokenize=function(e){for(var t,r,n=this.ruler.getRules(""),i=n.length,s=e.posMax,o=e.md.options.maxNesting;e.pos<s;){if(e.level<o)for(r=0;r<i&&(t=n[r](e,!1),!t);r++);if(t){if(e.pos>=s)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};IT.prototype.parse=function(e,t,r,n){var i,s,o,a=new this.State(e,t,r,n);for(this.tokenize(a),s=this.ruler2.getRules(""),o=s.length,i=0;i<o;i++)s[i](a)};IT.prototype.State=Dst;var Fst=IT,VN,kW;function jst(){return kW||(kW=1,VN=function(e){var t={};t.src_Any=Fie().source,t.src_Cc=jie().source,t.src_Z=Uie().source,t.src_P=aB.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");var r="[><]";return t.src_pseudo_letter="(?:(?!"+r+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+r+"|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+").|;(?!"+t.src_ZCc+").|\\!+(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}),VN}function ED(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(r){r&&Object.keys(r).forEach(function(n){e[n]=r[n]})}),e}function Dk(e){return Object.prototype.toString.call(e)}function Ust(e){return Dk(e)==="[object String]"}function Bst(e){return Dk(e)==="[object Object]"}function Vst(e){return Dk(e)==="[object RegExp]"}function RW(e){return Dk(e)==="[object Function]"}function Gst(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var Hie={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function zst(e){return Object.keys(e||{}).reduce(function(t,r){return t||Hie.hasOwnProperty(r)},!1)}var $st={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},qst="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Hst="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Wst(e){e.__index__=-1,e.__text_cache__=""}function Zst(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}function OW(){return function(e,t){t.normalize(e)}}function K4(e){var t=e.re=jst()(e.__opts__),r=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||r.push(qst),r.push(t.src_xn),t.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");var i=[];e.__compiled__={};function s(a,l){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+l)}Object.keys(e.__schemas__).forEach(function(a){var l=e.__schemas__[a];if(l!==null){var u={validate:null,link:null};if(e.__compiled__[a]=u,Bst(l)){Vst(l.validate)?u.validate=Zst(l.validate):RW(l.validate)?u.validate=l.validate:s(a,l),RW(l.normalize)?u.normalize=l.normalize:l.normalize?s(a,l):u.normalize=OW();return}if(Ust(l)){i.push(a);return}s(a,l)}}),i.forEach(function(a){e.__compiled__[e.__schemas__[a]]&&(e.__compiled__[a].validate=e.__compiled__[e.__schemas__[a]].validate,e.__compiled__[a].normalize=e.__compiled__[e.__schemas__[a]].normalize)}),e.__compiled__[""]={validate:null,normalize:OW()};var o=Object.keys(e.__compiled__).filter(function(a){return a.length>0&&e.__compiled__[a]}).map(Gst).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Wst(e)}function Jst(e,t){var r=e.__index__,n=e.__last_index__,i=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=i,this.text=i,this.url=i}function NW(e,t){var r=new Jst(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Xl(e,t){if(!(this instanceof Xl))return new Xl(e,t);t||zst(e)&&(t=e,e={}),this.__opts__=ED({},Hie,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ED({},$st,e),this.__compiled__={},this.__tlds__=Hst,this.__tlds_replaced__=!1,this.re={},K4(this)}Xl.prototype.add=function(t,r){return this.__schemas__[t]=r,K4(this),this};Xl.prototype.set=function(t){return this.__opts__=ED(this.__opts__,t),this};Xl.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;var r,n,i,s,o,a,l,u,c;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(r=l.exec(t))!==null;)if(s=this.testSchemaAt(t,r[2],l.lastIndex),s){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+s;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(c=t.indexOf("@"),c>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};Xl.prototype.pretest=function(t){return this.re.pretest.test(t)};Xl.prototype.testSchemaAt=function(t,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(t,n,this):0};Xl.prototype.match=function(t){var r=0,n=[];this.__index__>=0&&this.__text_cache__===t&&(n.push(NW(this,r)),r=this.__last_index__);for(var i=r?t.slice(r):t;this.test(i);)n.push(NW(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Xl.prototype.tlds=function(t,r){return t=Array.isArray(t)?t:[t],r?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(n,i,s){return n!==s[i-1]}).reverse(),K4(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,K4(this),this)};Xl.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Xl.prototype.onCompile=function(){};var Yst=Xl;const vb=2147483647,uh=36,dB=1,cE=26,Xst=38,Qst=700,Wie=72,Zie=128,Jie="-",Kst=/^xn--/,eot=/[^\0-\x7F]/,tot=/[\x2E\u3002\uFF0E\uFF61]/g,rot={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},GN=uh-dB,ch=Math.floor,zN=String.fromCharCode;function jf(e){throw new RangeError(rot[e])}function not(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}function Yie(e,t){const r=e.split("@");let n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(tot,".");const i=e.split("."),s=not(i,t).join(".");return n+s}function fB(e){const t=[];let r=0;const n=e.length;for(;r<n;){const i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){const s=e.charCodeAt(r++);(s&64512)==56320?t.push(((i&1023)<<10)+(s&1023)+65536):(t.push(i),r--)}else t.push(i)}return t}const Xie=e=>String.fromCodePoint(...e),iot=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:uh},LW=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},Qie=function(e,t,r){let n=0;for(e=r?ch(e/Qst):e>>1,e+=ch(e/t);e>GN*cE>>1;n+=uh)e=ch(e/GN);return ch(n+(GN+1)*e/(e+Xst))},mB=function(e){const t=[],r=e.length;let n=0,i=Zie,s=Wie,o=e.lastIndexOf(Jie);o<0&&(o=0);for(let a=0;a<o;++a)e.charCodeAt(a)>=128&&jf("not-basic"),t.push(e.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){const l=n;for(let c=1,h=uh;;h+=uh){a>=r&&jf("invalid-input");const d=iot(e.charCodeAt(a++));d>=uh&&jf("invalid-input"),d>ch((vb-n)/c)&&jf("overflow"),n+=d*c;const m=h<=s?dB:h>=s+cE?cE:h-s;if(d<m)break;const y=uh-m;c>ch(vb/y)&&jf("overflow"),c*=y}const u=t.length+1;s=Qie(n-l,u,l==0),ch(n/u)>vb-i&&jf("overflow"),i+=ch(n/u),n%=u,t.splice(n++,0,i)}return String.fromCodePoint(...t)},yB=function(e){const t=[];e=fB(e);const r=e.length;let n=Zie,i=0,s=Wie;for(const l of e)l<128&&t.push(zN(l));const o=t.length;let a=o;for(o&&t.push(Jie);a<r;){let l=vb;for(const c of e)c>=n&&c<l&&(l=c);const u=a+1;l-n>ch((vb-i)/u)&&jf("overflow"),i+=(l-n)*u,n=l;for(const c of e)if(c<n&&++i>vb&&jf("overflow"),c===n){let h=i;for(let d=uh;;d+=uh){const m=d<=s?dB:d>=s+cE?cE:d-s;if(h<m)break;const y=h-m,g=uh-m;t.push(zN(LW(m+y%g,0))),h=ch(y/g)}t.push(zN(LW(h,0))),s=Qie(i,u,a===o),i=0,++a}++i,++n}return t.join("")},Kie=function(e){return Yie(e,function(t){return Kst.test(t)?mB(t.slice(4).toLowerCase()):t})},ese=function(e){return Yie(e,function(t){return eot.test(t)?"xn--"+yB(t):t})},sot={version:"2.3.1",ucs2:{decode:fB,encode:Xie},decode:mB,encode:yB,toASCII:ese,toUnicode:Kie},oot=Object.freeze(Object.defineProperty({__proto__:null,decode:mB,default:sot,encode:yB,toASCII:ese,toUnicode:Kie,ucs2decode:fB,ucs2encode:Xie},Symbol.toStringTag,{value:"Module"})),aot=fEe(oot);var lot={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},uot={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},cot={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}},dS=Pr,hot=kk,pot=cit,dot=Nit,fot=hst,mot=Fst,yot=Yst,Gy=Xw,tse=aot,got={default:lot,zero:uot,commonmark:cot},vot=/^(vbscript|javascript|file|data):/,bot=/^data:image\/(gif|png|jpeg|webp);/;function wot(e){var t=e.trim().toLowerCase();return vot.test(t)?!!bot.test(t):!0}var rse=["http:","https:","mailto:"];function _ot(e){var t=Gy.parse(e,!0);if(t.hostname&&(!t.protocol||rse.indexOf(t.protocol)>=0))try{t.hostname=tse.toASCII(t.hostname)}catch{}return Gy.encode(Gy.format(t))}function xot(e){var t=Gy.parse(e,!0);if(t.hostname&&(!t.protocol||rse.indexOf(t.protocol)>=0))try{t.hostname=tse.toUnicode(t.hostname)}catch{}return Gy.decode(Gy.format(t),Gy.decode.defaultChars+"%")}function Ql(e,t){if(!(this instanceof Ql))return new Ql(e,t);t||dS.isString(e)||(t=e||{},e="default"),this.inline=new mot,this.block=new fot,this.core=new dot,this.renderer=new pot,this.linkify=new yot,this.validateLink=wot,this.normalizeLink=_ot,this.normalizeLinkText=xot,this.utils=dS,this.helpers=dS.assign({},hot),this.options={},this.configure(e),t&&this.set(t)}Ql.prototype.set=function(e){return dS.assign(this.options,e),this};Ql.prototype.configure=function(e){var t=this,r;if(dS.isString(e)&&(r=e,e=got[r],!e))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Ql.prototype.enable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(e,!0))},this),r=r.concat(this.inline.ruler2.enable(e,!0));var n=e.filter(function(i){return r.indexOf(i)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};Ql.prototype.disable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(e,!0))},this),r=r.concat(this.inline.ruler2.disable(e,!0));var n=e.filter(function(i){return r.indexOf(i)<0});if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};Ql.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ql.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");var r=new this.core.State(e,this,t);return this.core.process(r),r.tokens};Ql.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ql.prototype.parseInline=function(e,t){var r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens};Ql.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var Sot=Ql,Eot=Sot;const Kg=Qg(Eot);function Tot(e,t=document){return typeof e=="string"?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}function Iot(e){const t=document.createElement("div");t.className=`scrollama__debug-step ${e}`,t.style.position="fixed",t.style.left="0",t.style.width="100%",t.style.zIndex="9999",t.style.borderTop="2px solid black",t.style.borderBottom="2px solid black";const r=document.createElement("p");return r.style.position="absolute",r.style.left="0",r.style.height="1px",r.style.width="100%",r.style.borderTop="1px dashed black",t.appendChild(r),document.body.appendChild(t),t}function Aot({id:e,step:t,marginTop:r}){const{index:n,height:i}=t,s=`scrollama__debug-step--${e}-${n}`;let o=document.querySelector(`.${s}`);o||(o=Iot(s)),o.style.top=`${r*-1}px`,o.style.height=`${i}px`,o.querySelector("p").style.top=`${i/2}px`}function Mot(){const e="abcdefghijklmnopqrstuvwxyz",t=Date.now(),r=[];for(let n=0;n<6;n+=1){const i=e[Math.floor(Math.random()*e.length)];r.push(i)}return`${r.join("")}${t}`}function oI(e){console.error(`scrollama error: ${e}`)}function G_(e){return+e.getAttribute("data-scrollama-index")}function Cot(e,t){const r=Math.ceil(e/t),n=[],i=1/r;for(let s=0;s<r+1;s+=1)n.push(s*i);return n}function $N(e){if(typeof e=="string"&&e.indexOf("px")>0){const t=+e.replace("px","");return isNaN(t)?(err("offset value must be in 'px' format. Fallback to 0.5."),{format:"percent",value:.5}):{format:"pixels",value:t}}else if(typeof e=="number"||!isNaN(+e))return e>1&&err("offset value is greater than 1. Fallback to 1."),e<0&&err("offset value is lower than 0. Fallback to 0."),{format:"percent",value:Math.min(Math.max(0,e),1)};return null}function kot(e){e.forEach(t=>t.node.setAttribute("data-scrollama-index",t.index))}function Rot(e){const{top:t}=e.getBoundingClientRect(),r=window.pageYOffset,n=document.body.clientTop||0;return t+r-n}let Y1,JA,kp;function nse(e){const t=e?e.scrollTop:window.pageYOffset;Y1!==t&&(Y1=t,Y1>JA?kp="down":Y1<JA&&(kp="up"),JA=Y1)}function Oot(e){Y1=0,JA=0,document.addEventListener("scroll",()=>nse(e))}function PW(){let e={},t=Mot(),r=[],n,i,s,o=0,a=!1,l=!1,u=!1,c=!1,h=[];function d(){e={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},h=[]}function m(O){O&&!a&&P(),!O&&a&&T(),a=O}function y(O,v){const A=G_(O),R=r[A];v!==void 0&&(R.progress=v);const U={element:O,index:A,progress:v,direction:kp};R.state==="enter"&&e.stepProgress(U)}function g(O,v=!0){const A=G_(O),R=r[A],U={element:O,index:A,direction:kp};R.direction=kp,R.state="enter",h[A]||e.stepEnter(U),c&&(h[A]=!0)}function b(O,v=!0){const A=G_(O),R=r[A];if(!R.state)return!1;const U={element:O,index:A,direction:kp};l&&(kp==="down"&&R.progress<1?y(O,1):kp==="up"&&R.progress>0&&y(O,0)),R.direction=kp,R.state="exit",e.stepExit(U)}function S([O]){const v=G_(O.target),A=r[v],R=O.target.offsetHeight;R!==A.height&&(A.height=R,w(A),C(A),I(A))}function E([O]){nse(i);const{isIntersecting:v,target:A}=O;v?g(A):b(A)}function x([O]){const v=G_(O.target),A=r[v],{isIntersecting:R,intersectionRatio:U,target:q}=O;R&&A.state==="enter"&&y(q,U)}function w({observers:O}){Object.keys(O).map(v=>{O[v].disconnect()})}function T(){r.forEach(w)}function I(O){const v=new ResizeObserver(S);v.observe(O.node),O.observers.resize=v}function M(){r.forEach(I)}function C(O){const v=window.innerHeight,A=O.offset||n,R=A.format==="pixels"?1:v,U=A.value*R,q=O.height/2-U,Q=O.height/2-(v-U),de={rootMargin:`${q}px 0px ${Q}px 0px`,threshold:.5,root:s},ce=new IntersectionObserver(E,de);ce.observe(O.node),O.observers.step=ce,u&&Aot({id:t,step:O,marginTop:q,marginBottom:Q})}function k(){r.forEach(C)}function N(O){const v=window.innerHeight,A=O.offset||n,R=A.format==="pixels"?1:v,U=A.value*R,q=-U+O.height,Q=U-v,ee=`${q}px 0px ${Q}px 0px`,Y=Cot(O.height,o),ue={rootMargin:ee,threshold:Y},de=new IntersectionObserver(x,ue);de.observe(O.node),O.observers.progress=de}function F(){r.forEach(N)}function P(){T(),M(),k(),l&&F()}const B={};return B.setup=({step:O,parent:v,offset:A=.5,threshold:R=4,progress:U=!1,once:q=!1,debug:Q=!1,container:ee=void 0,root:Y=null})=>(Oot(ee),r=Tot(O,v).map((ue,de)=>({index:de,direction:void 0,height:ue.offsetHeight,node:ue,observers:{},offset:$N(ue.dataset.offset),top:Rot(ue),progress:0,state:void 0})),r.length?(l=U,c=q,u=Q,o=Math.max(1,+R),n=$N(A),i=ee,s=Y,d(),kot(r),m(!0),B):(oI("no step elements"),B)),B.enable=()=>(m(!0),B),B.disable=()=>(m(!1),B),B.destroy=()=>(m(!1),d(),B),B.resize=()=>(P(),B),B.offset=O=>O==null?n.value:(n=$N(O),P(),B),B.onStepEnter=O=>(typeof O=="function"?e.stepEnter=O:oI("onStepEnter requires a function"),B),B.onStepExit=O=>(typeof O=="function"?e.stepExit=O:oI("onStepExit requires a function"),B),B.onStepProgress=O=>(typeof O=="function"?e.stepProgress=O:oI("onStepProgress requires a function"),B),B}const Fk=Jt({__name:"scrollama",emits:["step-progress","step-enter","step-exit"],setup(e,{emit:t}){const r=t;let n=Ye();const i=Ye(),s=new Proxy({},{get:(l,u)=>n.value.getAttribute(u),has:(l,u)=>n.value.hasAttribute(u)});ns(()=>{i.value=PW(),o()}),mEe(()=>{i.value&&i.value.destroy(),window.removeEventListener("resize",a)}),yEe(()=>{o()});function o(){if(i.value&&i.value.destroy(),n.value){const l={step:Array.from(n.value.children),progress:"step-progress"in s,...s};i.value=PW().setup(l).onStepProgress(u=>{r("step-progress",u)}).onStepEnter(u=>{r("step-enter",u)}).onStepExit(u=>{r("step-exit",u)}),window.addEventListener("resize",a)}}function a(){i.value&&i.value.resize()}return(l,u)=>(Ie(),Ne("div",{class:"scrollama__steps",ref_key:"rootElement",ref:n},[Pie(l.$slots,"default")],512))}}),Not=["innerHTML"],Lot=Jt({__name:"text-panel",props:{config:{type:Object,required:!0},background:{type:Boolean}},setup(e){const t=e,r=new Kg({html:!0}),n=Ye("");return ns(()=>{n.value=r.render(t.config.content).replace(/<table/g,'<div class="table-container"><table').replace(/<\/table>/g,"</table></div>"),document.querySelectorAll(".storyramp-app a:not([target])").forEach(i=>i.target="_blank")}),(i,s)=>(Ie(),Ss(Fk,{class:Jr(["text-panel prose max-w-none mb-5 mx-1 py-5",{"has-background":e.background}]),style:tr({color:e.config.textColour??"#000"})},{default:mi(()=>[(Ie(),Ss(sB(e.config.titleTag||"h2"),{class:"px-10 mb-0 chapter-title top-20"},{default:mi(()=>[eg(Vr(e.config.title),1)]),_:1})),Ce("div",{class:"px-10 md-content object-contain",innerHTML:n.value},null,8,Not)]),_:1},8,["class","style"]))}}),Pot=ml(Lot,[["__scopeId","data-v-044ceba3"]]);var sh=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))(sh||{}),Hc=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(Hc||{}),ga=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(ga||{}),ise=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(ise||{}),sse=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(sse||{}),ose=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(ose||{}),or=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(or||{}),jk=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(jk||{}),Ct=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.GEOJSONZIPPED="file-zip-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.FLATGEOBUF="file-fgb",e.FLATGEOBUFZIPPED="file-zip-fgb",e.OSM="osm-tile",e.DATACSV="data-csv",e.DATAJSON="data-json",e.DATATABLE="data-esri-table",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(Ct||{}),yl=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.NOLAYER="no-layer",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(yl||{}),Us=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(Us||{}),ai=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(ai||{}),Hi=(e=>(e.GEOMETRIC="geometric",e.SYMBOLIC="symbolic",e.HYBRID="hybrid",e.NONE="none",e))(Hi||{}),Sn=(e=>(e.NEW="new",e.INITIATING="initiating",e.INITIATED="initiated",e.TERMINATING="terminating",e.TERMINATED="terminated",e))(Sn||{}),Hn=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(Hn||{}),Ia=(e=>(e.NOT_LOADED="not-loaded",e.NOT_VISUAL="not-visual",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(Ia||{}),tg=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(tg||{}),co=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.INITIAL="initial",e.API="api",e.PERMANENT="permanent",e))(co||{}),oi=(e=>(e.BoundaryZoom="boundaryZoom",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(oi||{});class Kl{attributes;geometry;style;id;constructor(t,r,n){this.geometry=t,r?this.id=r:this.id=Eg.sharedUtils.generateUUID(),n?this.attributes=n:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}function p(e,t,r,n){var i,s=arguments.length,o=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function Dot(e,t){return function(r,n){t(r,n,e)}}function Fot(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((n=n.apply(e,[])).next())})}let sm;function xe(e){return typeof sm[e]=="function"?sm[e]=sm[e](globalThis):sm[e]}sm=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},xe.add=(e,t,r,n)=>{(n||sm[e]===void 0)&&(sm[e]=t),r&&xe(e)},xe.cache=sm,xe.add("big-integer-warning-enabled",!0),xe.add("esri-deprecation-warnings",!0),xe.add("esri-tests-disable-screenshots",!1),xe.add("esri-tests-use-full-window",!1),xe.add("esri-tests-post-to-influx",!0),xe.add("esri-cim-animations-enable-status","enabled"),xe.add("esri-cim-animations-spotlight",!1),xe.add("esri-cim-animations-freeze-time",!1),xe.add("enable-feature:multiple-highlights",!1),(()=>{xe.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(xe.add("host-browser",e),xe.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),xe.add("dom",e),xe("host-browser")){const t=navigator,r=t.userAgent,n=t.appVersion,i=parseFloat(n);if(xe.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),xe.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),xe.add("khtml",n.includes("Konqueror")?i:void 0),xe.add("edge",parseFloat(r.split("Edge/")[1])||void 0),xe.add("opr",parseFloat(r.split("OPR/")[1])||void 0),xe.add("webkit",!xe("wp")&&!xe("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),xe.add("chrome",!xe("edge")&&!xe("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),xe.add("android",!xe("wp")&&parseFloat(r.split("Android ")[1])||void 0),xe.add("safari",!n.includes("Safari")||xe("wp")||xe("chrome")||xe("android")||xe("edge")||xe("opr")?void 0:parseFloat(n.split("Version/")[1])),xe.add("mac",n.includes("Macintosh")),!xe("wp")&&/(iPhone|iPod|iPad)/.test(r)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));xe.add(s,a),xe.add("ios",a)}xe("webkit")||(!r.includes("Gecko")||xe("wp")||xe("khtml")||xe("edge")||xe.add("mozilla",i),xe("mozilla")&&xe.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&xe.add("esri-mobile",t),r&&xe.add("esri-iPhone",r),xe.add("esri-geolocation",!!navigator.geolocation)}xe.add("esri-wasm","WebAssembly"in globalThis),xe.add("esri-performance-mode-frames-between-render",20),xe.add("esri-force-performance-mode",!1),xe.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),xe.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),xe.add("esri-atomics","Atomics"in globalThis),xe.add("esri-workers","Worker"in globalThis),xe.add("web-feat:cache","caches"in globalThis),xe.add("esri-workers-arraybuffer-transfer",!xe("safari")||Number(xe("safari"))>=12),xe.add("workers-pool-size",8),xe.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),xe.add("featurelayer-simplify-payload-size-factors",[1,1,4]),xe.add("featurelayer-fast-triangulation-enabled",!0),xe.add("featurelayer-animation-enabled",!0),xe.add("featurelayer-snapshot-enabled",!0),xe.add("featurelayer-snapshot-point-min-threshold",8e4),xe.add("featurelayer-snapshot-point-max-threshold",4e5),xe.add("featurelayer-snapshot-point-coverage",.1),xe.add("featurelayer-query-max-depth",4),xe.add("featurelayer-query-pausing-enabled",!1),xe.add("featurelayer-advanced-symbols",!1),xe.add("featurelayer-pbf",!0),xe.add("featurelayer-pbf-statistics",!1),xe.add("feature-layers-workers",!0),xe.add("feature-polyline-generalization-factor",1),xe.add("mapview-transitions-duration",200),xe.add("mapview-essential-goto-duration",200),xe.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),xe.add("mapserver-pbf-version-support",10.81),xe.add("mapservice-popup-identify-max-tolerance",20),xe("host-webworker")||xe("host-browser")&&(xe.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),xe.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{xe.add("esri-image-decode",!0,!0,!0)}).catch(()=>{xe.add("esri-image-decode",!1,!0,!0)})}return!1}),xe.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let rg=class L0{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*L0._m}getInt(){return this._seed=(L0._a*this._seed+L0._c)%L0._m,this._seed}getFloat(){return this.getInt()/(L0._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const n=r-t;return t+this.getInt()/L0._m*n}};rg._m=2147483647,rg._a=48271,rg._c=0;const ase=1.5,jot=1/ase,Uot=.5;function Bot(e,t){return t?e.filter((r,n,i)=>i.findIndex(t.bind(null,r))===n):Array.from(new Set(e))}function AT(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function TD(e,t,r){let n,i;return r?(n=t.filter(s=>!e.some(o=>r(o,s))),i=e.filter(s=>!t.some(o=>r(o,s)))):(n=t.filter(s=>!e.includes(s)),i=e.filter(s=>!t.includes(s))),{added:n,removed:i}}function Vot(e){return e&&typeof e.length=="number"}let gB=class{constructor(){this.last=0}};const lse=new gB;function e5(e,t,r,n){n=n||lse;const i=Math.max(0,n.last-10);for(let o=i;o<r;++o)if(e[o]===t)return n.last=o,o;const s=Math.min(i,r);for(let o=0;o<s;++o)if(e[o]===t)return n.last=o,o;return-1}function use(e,t,r,n){const i=e.length,s=e5(e,t,i,n);if(s!==-1)return e[s]=e[i-1],e.pop(),t}const pu=new Set;function Got(e,t,r=e.length,n=t.length,i,s){if(n===0||r===0)return r;pu.clear();for(let a=0;a<n;++a)pu.add(t[a]);i=i||lse;const o=Math.max(0,i.last-10);for(let a=o;a<r;++a)if(pu.has(e[a])&&(s?.push(e[a]),pu.delete(e[a]),e[a]=e[r-1],--r,--a,pu.size===0||r===0))return pu.clear(),r;for(let a=0;a<o;++a)if(pu.has(e[a])&&(s?.push(e[a]),pu.delete(e[a]),e[a]=e[r-1],--r,--a,pu.size===0||r===0))return pu.clear(),r;return pu.clear(),r}function zot(e,t){let r=0;for(let n=0;n<e.length;++n){const i=e[n];t(i,n)&&(e[r]=i,r++)}e.length=r}function cse(e){return e?(DW.seed=e,()=>DW.getFloat()):Math.random}function hse(e,t){const r=cse(t);for(let n=e.length-1;n>0;n--){const i=Math.floor(r()*(n+1)),s=e[n];e[n]=e[i],e[i]=s}return e}const DW=new rg;function vB(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function Qo(e,t){return e!=null}function pse(e){return 32+e.length}function bB(){return 16}function $ot(e){if(!e)return 0;let t=yse;for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];switch(typeof n){case"string":t+=pse(n);break;case"number":t+=bB();break;case"boolean":t+=4}}return t}function dse(e){if(!e)return 0;if(Array.isArray(e))return qot(e);let t=yse;for(const r in e)e.hasOwnProperty(r)&&(t+=fse(e[r]));return t}function qot(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=gse;for(let n=0;n<t;n++)r+=fse(e[n]);return r}function fse(e){switch(typeof e){case"object":return dse(e);case"string":return pse(e);case"number":return bB();case"boolean":return 4;default:return 8}}function mse(e,t){return gse+e.length*t}const yse=32,gse=16;function Hot(e){return e instanceof ArrayBuffer}function wB(e){return e?.constructor?.name==="Int8Array"}function _B(e){return e?.constructor?.name==="Uint8Array"}function xB(e){return e?.constructor?.name==="Uint8ClampedArray"}function Uk(e){return e?.constructor?.name==="Int16Array"}function SB(e){return e?.constructor?.name==="Uint16Array"}function Bk(e){return e?.constructor?.name==="Int32Array"}function EB(e){return e?.constructor?.name==="Uint32Array"}function Vk(e){return e?.constructor?.name==="Float32Array"}function Gk(e){return e?.constructor?.name==="Float64Array"}function TB(e){return!("buffer"in e)}function vse(...e){return e.reduce((t,r)=>t+(r?TB(r)?mse(r,bB()):r.byteLength+bse:0),0)}const bse=145,zk=1024;function Wot(e){return Gk(e)||Vk(e)||Bk(e)||Uk(e)||wB(e)}function Zot(e){return Gk(e)||Vk(e)}function Jot(e){return Gk(e)?179769e303:Vk(e)?3402823e32:EB(e)?4294967295:SB(e)?65535:_B(e)||xB(e)?255:Bk(e)?2147483647:Uk(e)?32767:wB(e)?127:256}function wse(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function se(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=Sse(e);if(t!=null)return t;if(t5(e))return e.clone();if(_se(e))return e.map(se);if(xse(e))return e.clone();const r={};for(const n of Object.getOwnPropertyNames(e))r[n]=se(e[n]);return r}function ID(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=Sse(e);if(t!=null)return t;if(_se(e)){let r=!0;const n=e.map(i=>{const s=ID(i);return i!=null&&s==null&&(r=!1),s});return r?n:null}if(t5(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!xse(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const n of Object.getOwnPropertyNames(e)){const i=e[n],s=ID(i);if(i!=null&&s==null)return null;r[n]=s}return r}return null}function t5(e){return typeof e.clone=="function"}function _se(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function xse(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function FW(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Sse(e){if(wB(e)||_B(e)||xB(e)||Uk(e)||SB(e)||Bk(e)||EB(e)||Vk(e)||Gk(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,se(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(se(r));return t}return null}function IB(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof e?.getTime=="function"&&typeof t?.getTime=="function"&&e.getTime()===t.getTime()||!1}function Ese(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&AT(e,t):e instanceof Set?t instanceof Set&&Xot(e,t):e instanceof Map?t instanceof Map&&Qot(e,t):!!FW(e)&&FW(t)&&Yot(e,t))}function Yot(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const n of r)if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function Xot(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Qot(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e){const i=t.get(r);if(i!==n||i===void 0&&!t.has(r))return!1}return!0}function AB(e,t,r=!1){return Ise(e,t,r)}function MT(e,t){if(t!=null)return t[e]||Tse(e.split("."),!1,t)}function _i(e,t,r){const n=e.split("."),i=n.pop(),s=Tse(n,!0,r);s&&i&&(s[i]=t)}function AD(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let n=0;n<e.length;n++)if(AD(e[n],r[n]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(AD(e[r],t[r]))return!0;return!1}return e!==t}function Tse(e,t,r){let n=r;for(const i of e){if(n==null)return;if(!(i in n)){if(!t)return;n[i]={}}n=n[i]}return n}function Ise(e,t,r){return t?Object.keys(t).reduce((n,i)=>{let s=n[i],o=t[i];return s===o?n:s===void 0?(n[i]=se(o),n):(Array.isArray(o)||Array.isArray(n)?(s=s?Array.isArray(s)?n[i]=s.slice():n[i]=[s]:n[i]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):n[i]=o.slice())):o&&typeof o=="object"?n[i]=Ise(s,o,r):n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[i]=o),n)},e||{}):e}const pr={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(AB(pr,globalThis.esriConfig,!0),delete pr.has),!pr.assetsPath){{const e="4.31";pr.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}pr.defaultAssetsPath=pr.assetsPath}const Kot=/\{([^}]+)\}/g;function jW(e){return e??""}function CT(e,t){return t?e.replaceAll(Kot,typeof t=="object"?(r,n)=>jW(MT(n,t)):(r,n)=>jW(t(n))):e}function eat(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t?.includes(r)?r:`\\${r}`)}function MB(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let UW;function tat(e){return UW??=new DOMParser,UW.parseFromString(e||"","text/html").body.innerText||""}function rat(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const BW={info:0,warn:1,error:2,none:3};let Pe=class qa{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,qa._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=qa.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,qa._loggers.get(t)||new qa({module:t})}_log(t,r,...n){if(this._matchLevel(t)){if(r!=="always"&&!qa._throttlingDisabled){const i=iat(n),s=this._loggedMessages[t].get(i);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=qa._tickCounter)return;this._loggedMessages[t].set(i,qa._tickCounter),qa._scheduleTickCounterIncrement()}for(const i of pr.log.interceptors)if(i(t,this.module,...n))return;this._inheritedWriter()(t,this.module,...n)}}_parentWithMember(t,r){let n=this;for(;n!=null;){const i=n[t];if(i!=null)return i;n=n.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",nat)}_matchLevel(t){const r=pr.log.level||"warn";return BW[this._parentWithMember("level",r)]<=BW[t]}static _scheduleTickCounterIncrement(){qa._tickCounterScheduled||(qa._tickCounterScheduled=!0,Promise.resolve().then(()=>{qa._tickCounter++,qa._tickCounterScheduled=!1}))}};function nat(e,t,...r){console[e](`[${t}]`,...r)}function iat(...e){return MB(JSON.stringify(e,(t,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}Pe._loggers=new Map,Pe._tickCounter=0,Pe._tickCounterScheduled=!1,Pe._throttlingDisabled=!1;function sat(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,n)=>n===""?"$":(MT(n,t)??"").toString())}let Ase=class{constructor(e,t,r=void 0){this.name=e,this.details=r,this.message=(t&&sat(t,r))??""}toString(){return"["+this.name+"]: "+this.message}},ie=class Mse extends Ase{constructor(t,r,n){super(t,r,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return se(r)}catch{return"[object]"}}))}}catch(t){throw Pe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new Mse(t.name,t.message,t.details)}};ie.prototype.type="error";const VW=new WeakMap;function oat(e,t,r=!1){const n=` DEPRECATED - ${t}`;if(!r)return void e.warn(n);let i=VW.get(e);i||(i=new Set,VW.set(e,i)),i.has(t)||(i.add(t),e.warn(n))}function CB(e,t,r={}){if(xe("esri-deprecation-warnings")){const{moduleName:n}=r;Kb(e,`Function: ${(n?n+"::":"")+t+"()"}`,r)}}function Cse(e,t,r={}){if(xe("esri-deprecation-warnings")){const{moduleName:n}=r;Kb(e,`Property: ${(n?n+"::":"")+t}`,r)}}function aat(e,t,r={}){xe("esri-deprecation-warnings")&&Kb(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function Kb(e,t,r={}){if(xe("esri-deprecation-warnings")){const{replacement:n,version:i,see:s,warnOnce:o}=r;let a=t;n&&(a+=`
	 Replacement: ${n}`),i&&(a+=`
	 Version: ${i}`),s&&(a+=`
	 See ${s} for more details.`),oat(e,a,o)}}function lat(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function kse(e,t){for(const r of e)if(r!=null&&t(r))return r}function r5(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let e1=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(r5(e)){const r=this._getOrCreateGroup(t);for(const n of e)zW(n)&&r.push(n)}else zW(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(aI(e))}remove(e){if(typeof e!="string"&&r5(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(GW(this._getGroup(e)),this._groups.delete(aI(e)),this):this}removeAll(){return this._groups.forEach(GW),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(aI(e),t),t}_getGroup(e){return this._groups.get(aI(e))}};function aI(e){return e||"_default_"}function GW(e){for(const t of e)t instanceof e1?t.removeAll():t.remove()}function zW(e){return e!=null&&(!!e.remove||e instanceof e1)}function td(e,t){if(e==null)throw new Error(t??"value is None")}function pn(e){return e?.destroy(),null}function uat(e){return e?.dispose(),null}function mn(e){return e?.remove(),null}function ew(e){return e?.abort(),null}function cat(e){return e?.release(),null}function Rse(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function hat(e,t){let r;return e.some((n,i)=>(r=t(n,i),r!=null)),r??void 0}const Ose=Symbol("Accessor-beforeDestroy"),pat={remove:()=>{}};function gr(e){return e?{remove(){e&&(e(),e=void 0)}}:pat}function dat(e){e.forEach(t=>t?.remove())}function e_(e){return gr(()=>dat(e))}function fat(e){return gr(()=>e?.abort())}function mat(e){return gr(e!=null?()=>e.destroy():void 0)}function Qi(e){return e.__accessor__??null}function yat(e,t){return e?.metadata?.[t]!=null}function YA(e,t,r){return r?n5(e,t,{policy:r,path:""}):n5(e,t,null)}function n5(e,t,r){return t?Object.keys(t).reduce((n,i)=>{const s=i;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${i}`:i,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(n[s]))return n[s]=t[s],n;if(n[s]===void 0)return n[s]=se(t[s]),n;let l=n[s],u=t[s];if(l===u)return n;if(Array.isArray(u)||Array.isArray(n))l=l?Array.isArray(l)?n[s]=l.slice():n[s]=[l]:n[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(c=>{l.includes(c)||l.push(c)}));else if(u&&typeof u=="object")if(r){const c=r.path;r.path=o,n[s]=n5(l,u,r),r.path=c}else n[s]=n5(l,u,null);else n.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(n[s]=u);return n},e||{}):e}function Nse(e){return Array.isArray(e)?e:e.split(".")}function $W(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function gat(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...$W(r));return t}return $W(e)}function Lse(e,t,r,n){const i=gat(t);if(i.length!==1){const s=i.map(o=>n(e,o,r));return e_(s)}return n(e,i[0],r)}function Pse(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(r,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.at(i)}const n=Qi(t);return yat(n,r)?n.get(r):t[r]}function Dse(e,t,r){if(e==null)return e;const n=Pse(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:Dse(n,t,r+1)}function kT(e,t,r=0){return typeof t!="string"||t.includes(".")?Dse(e,Nse(t),r):Pse(t,e)}function Gl(e,t){return kT(e,t)}function qW(e,t){return kT(t,e)!==void 0}var Ea;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(Ea||(Ea={}));function RT(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const n in t)t[n]=se(t[n]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function OT(e,t){const r=RT(e);let n=r[t];return n||(n=r[t]={}),n}function vat(e,t){return YA(e,t,wat)}const bat=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function wat(e){return bat.test(e)?"replace":"merge"}function _at(e){return e?.release&&typeof e.release=="function"}function xat(e){return e?.acquire&&typeof e.acquire=="function"}let Td=class MD{constructor(t,r,n,i=1,s=0){this._ctor=t,this._acquireFunction=r,this._releaseFunction=n,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let r;if(MD.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let i=0;i<n;i++)this._pool[i]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):xat(r)&&r.acquire(...t),r}release(t){t&&!MD.test.disabled&&(this._releaseFunction?this._releaseFunction(t):_at(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const n=this._pool[r];this._dispose(n)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Td.test={disabled:!1};let Sat=class{constructor(e,t){this._observers=e,this._observer=t}remove(){vB(this._observers,this._observer)}},Fse=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Eat;this._observers==null&&(this._observers=[]);const t=this._observers;let r=!1,n=!1;const i=t.length;for(let s=0;s<i;++s){const o=t[s];if(o.destroyed)n=!0;else if(o===e){r=!0;break}}return r||(t.push(e),n&&this._removeDestroyedObservers()),new Sat(t,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const t=e.length;let r=0;for(let n=0;n<t;++n){for(;n+r<t&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<t))break;e[n]=e[n+r]}}e.length=t-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const t of e)t.onCommitted();this._observers=null}}};const Eat=gr();var et;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(et||(et={}));const CD=et.USER+1;function _o(e){switch(e){case"defaults":return et.DEFAULTS;case"service":return et.SERVICE;case"portal-item":return et.PORTAL_ITEM;case"web-scene":return et.WEB_SCENE;case"web-map":return et.WEB_MAP;case"link-chart":return et.LINK_CHART;case"user":return et.USER;default:return null}}function tw(e){switch(e){case et.DEFAULTS:return"defaults";case et.SERVICE:return"service";case et.PORTAL_ITEM:return"portal-item";case et.WEB_SCENE:return"web-scene";case et.WEB_MAP:return"web-map";case et.LINK_CHART:return"link-chart";case et.USER:return"user"}}function Tat(e){return tw(e)}var Or;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Or||(Or={}));let $k=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const i5=new $k,W2=[];let fS=i5;function It(e){fS.onAccessed(e)}let XA=!1,QA=!1;function pd(e,t,r){if(XA)return kB(e,t,r);let n=null;return jse(e),n=t.call(r),Use(),n}function Iat(e,t){return pd(i5,e,t)}function kB(e,t,r){const n=XA;XA=!0,jse(e);let i=null;try{i=t.call(r)}catch(s){QA&&Pe.getLogger("esri.core.accessorSupport.tracking").error(s)}return Use(),XA=n,i}function jse(e){fS=e,W2.push(e)}function Use(){const e=W2.length;if(e>1){const t=W2.pop();fS=W2[e-2],t.onTrackingEnd()}else if(e===1){const t=W2.pop();fS=i5,t.onTrackingEnd()}else fS=i5}function Bse(e,t){if(t.flags&Or.DepTrackingInitialized)return;t.flags|=Or.DepTrackingInitialized;const r=QA;QA=!1,t.flags&Or.AutoTracked?kB(t.trackingTarget,t.metadata.get,e):Vse(e,t),QA=r}const Aat=[];function Vse(e,t){t.flags&Or.ExplicitlyTracking||(t.flags|=Or.ExplicitlyTracking,kB(t.trackingTarget,()=>{const r=t.metadata.dependsOn||Aat;for(const n of r)if(typeof n!="string"||n.includes(".")){const i=Nse(n);for(let s=0,o=e;s<i.length&&o!=null&&typeof o=="object";++s)o=HW(o,i[s],s!==i.length-1)}else HW(e,n,!1)}),t.flags&=~Or.ExplicitlyTracking)}function HW(e,t,r){const n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(n,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const i=Qi(e);if(i){const s=i.propertiesByName.get(n);s&&(It(s),Bse(e,s))}return r?e[n]:void 0}let WW=class extends Fse{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this.trackingTarget=new $k(this),this.flags=0,this.flags=Or.Dirty|(t.nonNullable?Or.NonNullable:0)|(t.hasOwnProperty("value")?Or.HasDefaultValue:0)|(t.get===void 0?Or.DepTrackingInitialized:0)|(t.dependsOn===void 0?Or.AutoTracked:0)}destroy(){this.flags&Or.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&It(this);const t=e.store,r=this.propertyName,n=this.flags,i=t.get(r);if(n&Or.Computing||~n&Or.Dirty&&t.has(r))return i;this.flags|=Or.Computing;const s=e.host;let o;n&Or.AutoTracked?o=pd(this.trackingTarget,this.metadata.get,s):(Vse(s,this),o=this.metadata.get.call(s)),this.flags|=Or.DepTrackingInitialized,t.set(r,o,et.COMPUTED);const a=t.get(r);return a===i?this.flags&=~Or.Dirty:Iat(this.commit,this),this.flags&=~Or.Computing,a}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Or.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Or.Overridden&&(this.flags|=Or.Dirty);const e=this._observers;if(e&&e.length>0)for(const t of e)t.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const r of t)r.onCommitted()}}},Mat=class Gse{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new Gse;return this._values.forEach((n,i)=>{t&&t.has(i)||r.set(i,se(n))}),r}get(t){return this._values.get(t)}originOf(){return et.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function lI(e,t,r){return e!==void 0}function ZW(e,t,r,n){return e!==void 0&&(!(r==null&&e.flags&Or.NonNullable)||(n.lifecycle,Ea.INITIALIZING,!1))}let Cat=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ea.INITIALIZING,this.store=new Mat,this.mutable=!0,this._origin=et.USER;const t=this.host.constructor.__accessorMetadata__;for(const r in t){const n=new WW(r,t[r]);this.propertiesByName.set(r,n)}this.metadata=t}initialize(){this.lifecycle=Ea.CONSTRUCTING}constructed(){this.lifecycle=Ea.CONSTRUCTED}destroy(){this.lifecycle=Ea.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Ea.INITIALIZING}get(e){const t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);this.mutable&&It(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(t===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&Or.HasDefaultValue)return"defaults"}return tw(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const t=this.propertiesByName.get(e);if(lI(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.propertiesByName.get(e);lI(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const n=this.propertiesByName.get(t);if(!lI(n))return"";const i=new $k,s=pd(i,()=>n.metadata.get?.call(e));let o=`${r}${e.declaredClass.split(".").pop()}.${t}: ${s}
`;const a=i.accessed??new Set;if(a.size===0)return o;r+="  ";for(const l of a)l instanceof WW&&(o+=`${r}${l.propertyName}: undefined
`);return o}setAtOrigin(e,t,r){const n=this.propertiesByName.get(e);if(lI(n))return this._setAtOrigin(n,t,r)}isOverridden(e){const t=this.propertiesByName.get(e);return t!==void 0&&!!(t.flags&Or.Overridden)}clearOverride(e){const t=this.propertiesByName.get(e);t&&t.flags&Or.Overridden&&(t.flags&=~Or.Overridden,t.notifyChange())}override(e,t){const r=this.propertiesByName.get(e);if(!ZW(r,e,t,this))return;const n=r.metadata.cast;if(n){const i=this._cast(n,t),{valid:s,value:o}=i;if(qN.release(i),!s)return;t=o}r.flags|=Or.Overridden,this._internalSet(r,t)}set(e,t){const r=this.propertiesByName.get(e);if(!ZW(r,e,t,this))return;const n=r.metadata.cast;if(n){const s=this._cast(n,t),{valid:o,value:a}=s;if(qN.release(s),!o)return;t=a}const i=r.metadata.set;i?i.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=_o(e)}getDefaultOrigin(){return tw(this._origin)}notifyChange(e){const t=this.propertiesByName.get(e);t!==void 0&&t.notifyChange()}invalidate(e){const t=this.propertiesByName.get(e);t!==void 0&&t.invalidate()}commit(e){const t=this.propertiesByName.get(e);t!==void 0&&t.commit()}_internalSet(e,t){const r=this.lifecycle!==Ea.INITIALIZING?this._origin:et.DEFAULTS;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){const n=this.store,i=e.propertyName;n.has(i,r)&&IB(t,n.get(i))&&~e.flags&Or.Overridden&&r===n.originOf(i)||(e.invalidate(),n.set(i,t,r),e.commit(),Bse(this.host,e))}_cast(e,t){const r=qN.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}},kat=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const qN=new Td(kat);function s5(e,t,r){if(e&&t)if(typeof t=="object")for(const n of Object.getOwnPropertyNames(t))s5(e,n,t[n]);else{if(t.includes(".")){const i=t.split("."),s=i.splice(-1,1)[0];return void s5(Gl(e,i),s,r)}const n=e.__accessor__;n!=null&&Rat(t,n),e[t]=r}}function Rat(e,t){if(xe("esri-unknown-property-errors")&&!Oat(e,t))throw new ie("set:unknown-property",Nat(e,t))}function Oat(e,t){return t.metadata[e]!=null}function Nat(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let Lat;function Pat(){return Lat}var JW;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(JW||(JW={}));function Dat(e){e.length=0}let mo=class{constructor(e=50,t=50){this._pool=new Td(Array,void 0,Dat,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return HN.acquire()}static release(e){return HN.release(e)}static prune(){HN.prune()}};const HN=new mo(100);let zse=class extends Td{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const uI=[];function hE(e){uI.push(e),uI.length===1&&queueMicrotask(()=>{const t=uI.slice();uI.length=0;for(const r of t)r()})}let mS=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var kD;(function(e){const t=(s,o,a,l)=>{let u=o,c=o;const h=a>>>1,d=s[u-1];for(;c<=h;){c=u<<1,c<a&&l(s[c-1],s[c])<0&&++c;const m=s[c-1];if(l(m,d)<=0)break;s[u-1]=m,u=c}s[u-1]=d},r=(s,o)=>s<o?-1:s>o?1:0;function n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(s,c,a,l);const u=o+1;for(let c=a-1;c>o;c--){const h=s[o];s[o]=s[c],s[c]=h,t(s,u,c,l)}}function*i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(s,c,a,l),yield;const u=o+1;for(let c=a-1;c>o;c--){const h=s[o];s[o]=s[c],s[c]=h,t(s,u,c,l),yield}}e.sort=n,e.iterableSort=i})(kD||(kD={}));const YW=kD,Fat=1.5,jat=1.1;let rd=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new gB,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>XW(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const t=new Array;for(let r=0;r<this._length;r++){const n=this.data[r];e(n)&&t.push(n)}return t}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,t){const r=this.data.indexOf(e,t);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,t=e.length){for(let r=0;r<t;r++)this.data[this._length++]=e[r]}fill(e,t){for(let r=0;r<t;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,XW(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const t=e5(this.data,e,this.length,this._hint);if(t!==-1)return this.data.splice(t,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(e5(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,t=e.length,r){this.length=Got(this.data,e,this.length,t,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,t){if(e>=this.length||t>=this.length||e===t)return;const r=this.data[e];this.data[e]=this.data[t],this.data[t]=r}sort(e){YW.sort(this.data,0,this.length,e)}iterableSort(e){return YW.iterableSort(this.data,0,this.length,e)}some(e,t){for(let r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1}find(e,t){const{data:r,length:n}=this;for(let i=0;i<n;++i)if(e.call(t,r[i]))return r[i]}filterInPlace(e,t){let r=0;for(let n=0;n<this._length;++n){const i=this.data[n];e.call(t,i,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=i,r++)}if(this._deallocator)for(let n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this._shrink(),this}forAll(e,t){const{data:r,length:n}=this;for(let i=0;i<n;++i)e.call(t,r[i],i,r)}forEach(e,t){this.data.slice(0,this.length).forEach(e,t)}map(e,t){const r=new Array(this.length);for(let n=0;n<this.length;++n)r[n]=e.call(t,this.data[n],n,this.data);return r}reduce(e,t){let r=t;for(let n=0;n<this.length;++n)r=e(r,this.data[n],n,this.data);return r}has(e){const t=this.length,r=this.data;for(let n=0;n<t;++n)if(r[n]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function XW(e){e.data.length>Fat*e.length&&(e.data.length=Math.floor(e.length*jat))}function Uat(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return gr(()=>e.clearTimeout(n))}}}const t_=Uat(globalThis);function qk(e){return Bat(e)||$se(e)}function Bat(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function $se(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function r_(e,t,r){if(!qk(e))throw new TypeError("target is not a Evented or EventTarget object");return $se(e)?Vat(e,t,r):e.on(t,r)}function Vat(e,t,r,n){if(Array.isArray(t)){const i=t.slice();for(const s of i)e.addEventListener(s,r,n);return gr(()=>{for(const s of i)e.removeEventListener(s,r,n)})}return e.addEventListener(t,r,n),gr(()=>e.removeEventListener(t,r,n))}function RB(e,t,r){if(!qk(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=r_(e,t,i=>{n.remove(),r.call(e,i)});return n}function Xr(e="Aborted"){return new ie("AbortError",e)}function Gr(e,t="Aborted"){if(Ba(e))throw Xr(t)}function n_(e){return e instanceof AbortSignal?e:e?.signal??void 0}function Ba(e){const t=n_(e);return t!=null&&t.aborted}function qo(e){if(Fi(e))throw e}function RD(e){if(!Fi(e))throw e}function Oa(e,t){const r=n_(e);if(r!=null){if(!r.aborted)return RB(r,"abort",()=>t());t()}}function Hk(e,t){const r=n_(e);if(r!=null)return Gr(r),RB(r,"abort",()=>t(Xr()))}function Ll(e,t){return n_(t)==null?e:new Promise((r,n)=>{let i=Oa(t,()=>n(Xr()));const s=()=>{i=mn(i)};e.then(s,s),e.then(r,n)})}function Fi(e){return e?.name==="AbortError"}async function o5(e){try{return await e}catch(t){if(!Fi(t))throw t;return}}async function Wk(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),n=r.map(o=>e[o]),i=await Wk(n),s={};return r.map((o,a)=>s[o]=i[a]),s}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(n,i)=>{const s=r[i];return s.status==="fulfilled"?{promise:n,value:s.value}:{promise:n,error:s.reason}}))}async function qse(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Gat(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function OB(e,t=void 0,r){const n=new AbortController;return Oa(r,()=>n.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(t)},e);Oa(n,()=>{o&&(clearTimeout(o),s(Xr()))})})}function zat(e,t){const r=new AbortController,n=setTimeout(()=>r.abort(),t);return Oa(e,()=>{r.abort(),clearTimeout(n)}),{...e,signal:r.signal}}function bc(e){return e&&typeof e.then=="function"}function OD(e){return bc(e)?e:Promise.resolve(e)}function NT(e,t=-1){let r,n,i,s,o=null;const a=(...l)=>{if(r){n=l,s&&s.reject(Xr()),s=Ko();const d=s.promise;if(o){const m=o;o=null,m.abort()}return d}if(i=s||Ko(),s=null,t>0){const d=new AbortController;r=OD(e(...l,d.signal));const m=r;OB(t).then(()=>{r===m&&(s?d.abort():o=d)})}else r=1,r=OD(e(...l));const u=()=>{const d=n;n=i=r=o=null,d!=null&&a(...d)},c=r,h=i;return c.then(u,u),c.then(h.resolve,h.reject),h.promise};return a}function Ko(){let e,t;const r=new Promise((i,s)=>{e=i,t=s}),n=i=>{e(i)};return n.resolve=i=>e(i),n.reject=i=>t(i),n.timeout=(i,s)=>t_.setTimeout(()=>n.reject(s),i),n.promise=r,n}async function a5(e){await Promise.resolve(),Gr(e)}function $at(e){return e}function Hse(e){return 1e3*e}function qat(e){return e}let Hat=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Wat=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},ND=0;const z_={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},LD=["prepare","preRender","render","postRender","update","finish"],PD=[],Ig=new rd;let Zat=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Jat(){ng!=null&&(cancelAnimationFrame(ng),ng=requestAnimationFrame(NB))}const l5={frameTasks:Ig,willDispatch:!1,clearFrameTasks:Yat,dispatch:Zse,executeFrameTasks:Xat,reschedule:Jat};function i_(e){const t=new Wat(e);return PD.push(t),l5.willDispatch||(l5.willDispatch=!0,hE(Zse)),t}function Ag(e){const t=new Hat(e);return Ig.push(t),ng==null&&(ND=performance.now(),ng=requestAnimationFrame(NB)),new Zat(t)}let ng=null;function Yat(e=!1){Ig.forAll(t=>{t.removed=!0}),e&&Wse()}function NB(){const e=performance.now();ng=null,ng=Ig.length>0?requestAnimationFrame(NB):null,l5.executeFrameTasks(e)}function Xat(e){const t=e-ND;ND=e;const r=1e3/60,n=Math.max(0,t-r);z_.time=e,z_.frameDuration=r-n;for(let i=0;i<LD.length;i++){const s=performance.now(),o=LD[i];Ig.forAll(a=>{a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(z_.elapsedFrameTime=performance.now()-e,z_.deltaTime=a.ticks===0?0:t,a.phases[o]?.call(a,z_)))}),Qat[i].push(performance.now()-s)}Wse(),Kat.push(performance.now()-e)}const cI=new rd;function Wse(){Ig.forAll(e=>{e.removed&&cI.push(e)}),Ig.removeUnorderedMany(cI.data,cI.length),cI.clear()}function Zse(){for(;PD.length;){const e=PD.shift();e.isActive&&e.callback()}l5.willDispatch=!1}function Jse(e=1,t){const r=Ko(),n=()=>{Ba(t)?r.reject(Xr()):e===0?r():(--e,hE(()=>n()))};return n(),r.promise}function Yse(e){return Jse(1,e)}async function Xse(e){await Yse(e),await new Promise(t=>requestAnimationFrame(()=>{e?.aborted||t()}))}const Qat=LD.map(e=>new mS(e)),Kat=new mS("total");function Qse(e,t){for(const r of e.values())if(t(r))return!0;return!1}function pE(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function QW(e,t){return t!=null&&e.add(t),e}function LB(e,t){const r=new Set;return pE(r,e),pE(r,t),r}function Kse(e,t){const r=new Set;for(const n of t)e.has(n)&&r.add(n);return r}function elt(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function tlt(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function eoe(e,t){const r=new Set(e);for(const n of t)r.delete(n);return r}function rlt(e,t){return eoe(LB(e,t),Kse(e,t))}let nlt=0;function yS(){return++nlt}let Zk=class extends $k{constructor(e){super(new ilt(e)),this._observer&&KW.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&KW.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},ilt=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=slt}};const KW=new FinalizationRegistry(e=>{e.deref()?.destroy()});function slt(){}let bb=!1;const u5=[];function toe(e,t){let r=new Zk(s),n=null,i=!1;function s(){if(!r||i)return;if(bb)return void noe(s);const a=n;r.clear(),bb=!0,i=!0,n=pd(r,e),i=!1,bb=!1,t(n,a),ioe()}function o(){r&&(r.destroy(),r=null,n=null)}return i=!0,n=pd(r,e),i=!1,gr(o)}function roe(e,t){let r=new Zk(i),n=null;function i(){t(n,o)}function s(){r&&(r.destroy(),r=null),n=null}function o(){return r?(r.clear(),n=pd(r,e),n):null}return o(),gr(s)}function PB(e,t){let r=!1,n=!1;const i=!!t?.sync;let s=new Zk(()=>{r||n||(n=!0,i?o():queueMicrotask(o))});function o(){n=!1,s&&!r&&(bb?noe(o):(s.clear(),bb=!0,r=!0,pd(s,e),r=!1,bb=!1,ioe()))}function a(){s&&(s.destroy(),s=null)}return r=!0,pd(s,e),r=!1,gr(a)}function noe(e){u5.includes(e)||u5.unshift(e)}function ioe(){for(;u5.length;)u5.pop()()}var gS;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(gS||(gS={}));let dE=class{constructor(){this.uid=yS(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,r,n,i){return this.pool.acquire(gS.Untracked,e,t,r,n,i,IB)}static acquireTracked(e,t,r,n){return this.pool.acquire(gS.Tracked,e,t,r,null,null,n)}notify(e,t){this.type===gS.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,r,n,i,s,o){this.uid=yS(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=n,this.target=i,this.path=s,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=yS(),this.removed=!0}};dE.pool=new zse(dE);const KA=new mo,nd=new Set;let c5;function h5(e){nd.delete(e),nd.add(e),c5||(c5=i_(llt))}function olt(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function alt(e){for(const t of nd.values())t.target===e&&(t.removed=!0)}function llt(){let e=10;for(;c5&&e--;){c5=null;const t=ult(),r=KA.acquire();for(const n of t){const i=n.uid;olt(n),i===n.uid&&n.removed&&r.push(n)}for(const n of nd)n.removed&&(r.push(n),nd.delete(n));for(const n of r)dE.pool.release(n);KA.release(r),KA.release(t),DD.forEach(n=>n())}}function ult(){const e=KA.acquire();e.length=nd.size;let t=0;for(const r of nd)e[t]=r,++t;return nd.clear(),e}const DD=new Set;function clt(e){return DD.add(e),gr(()=>DD.delete(e))}function hlt(e,t,r){let n=Lse(e,t,r,(i,s,o)=>{let a,l,u=roe(()=>kT(i,s),(c,h)=>{i.__accessor__?.lifecycle===Ea.DESTROYED||a&&a.uid!==l?n.remove():(a||(a=dE.acquireUntracked(c,o,h,i,s),l=a.uid),h5(a))});return gr(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,h5(a)),a=null),n=u=null})});return n}function plt(e,t,r){const n=Lse(e,t,r,(i,s,o)=>{let a=!1;return toe(()=>kT(i,s),(l,u)=>{i.__accessor__.lifecycle!==Ea.DESTROYED?a||(a=!0,IB(u,l)||o.call(i,l,u,s,i),a=!1):n.remove()})});return n}function dlt(e,t,r,n=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Ea.DESTROYED?n?plt(e,t,r):hlt(e,t,r):gr()}function flt(e,t,r){let n,i,s=roe(e,(o,a)=>{n&&n.uid!==i?s.remove():(n||(n=dE.acquireTracked(o,t,a,r),i=n.uid),h5(n))});return gr(()=>{s.remove(),n&&(n.uid!==i||n.removed||(n.removed=!0,h5(n)),n=null),s=null})}function mlt(e,t,r){let n=!1;return toe(e,(i,s)=>{n||(n=!0,r(s,i)||t(i,s),n=!1)})}function ylt(e,t,r=!1,n=Ese){return r?mlt(e,t,n):flt(e,t,n)}function eZ(e){return Qse(nd,t=>t.oldValue===e)}function soe(e,t){for(const r of e.values())if(t(r))return!0;return!1}function s_(e,t,r){const n=e.get(t);if(n!==void 0)return n;const i=r();return e.set(t,i),i}function glt(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const wb=()=>Pe.getLogger("esri.core.accessorSupport.ensureTypes");function vlt(e){return e==null?e:new Date(e)}function blt(e){return e==null?e:!!e}function LT(e){return e==null?e:e.toString()}function Ds(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function Jk(e){return e==null?e:Math.round(parseFloat(e))}function wlt(e){return null}function ooe(e,t){return r=>{let n=e(r);return t.step!=null&&(n=Math.round(n/t.step)*t.step),t.min!=null&&(n=Math.max(t.min,n)),t.max!=null&&(n=Math.min(t.max,n)),n}}function aoe(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function p5(e,t){return t!=null&&e&&!(t instanceof e)}function loe(e){return e&&"isCollection"in e}function tZ(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function _lt(e,t){if(!t?.constructor||!loe(t.constructor))return FD(e,t)?t:new e(t);const r=tZ(e.prototype.itemType),n=tZ(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(FD(e,t),t):new e(t):t}function FD(e,t){return!!aoe(t)&&(wb().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+Yk(e)+"'"),!0)}function yn(e,t){return t==null?t:loe(e)?_lt(e,t):p5(e,t)?FD(e,t)?t:new e(t):t}function Yk(e){return e?.prototype?.declaredClass||"unknown"}const xlt=new WeakMap;function Slt(e){switch(e){case Number:return t=>Ds(t);case Ft:return Jk;case Boolean:return blt;case String:return LT;case Date:return vlt;case Xk:return wlt;default:return s_(xlt,e,()=>yn.bind(null,e))}}function Nr(e,t){const r=Slt(e);return arguments.length===1?r:r(t)}function fE(e,t,r){return arguments.length===1?fE.bind(null,e):t&&(Array.isArray(t)?t.map(n=>e(n,r)):[e(t,r)])}function Elt(e,t){return arguments.length===1?fE(r=>Nr(e,r)):fE(r=>Nr(e,r),t)}function uoe(e,t,r){return t!==0&&Array.isArray(r)?r.map(n=>uoe(e,t-1,n)):e(r)}function d5(e,t,r){if(arguments.length===2)return s=>d5(e,t,s);if(!r)return r;r=uoe(e,t,r);let n=t,i=r;for(;n>0&&Array.isArray(i);)n--,i=i[0];if(i!==void 0)for(let s=0;s<n;s++)r=[r];return r}function Tlt(e,t,r){return arguments.length===2?d5(n=>Nr(e,n),t):d5(n=>Nr(e,n),t,r)}function coe(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function jD(e,t){if(arguments.length===2)return jD(e).call(null,t);const r=new Set,n=e.filter(a=>typeof a!="function"),i=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,c=u==="string"||u==="number";return c&&(r.has(a)||i.some(h=>u==="string"&&h===String||u==="number"&&h===Number))||u==="object"&&i.some(h=>!p5(a,h))?a:(c&&n.length?(s||(s=n.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),wb().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>Yk(h)).join(", ")),wb().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):wb().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function eu(e,t){if(arguments.length===2)return eu(e).call(null,t);const r={},n=[],i=[];for(const l in e.typeMap){const u=e.typeMap[l];r[l]=Nr(u),n.push(Yk(u)),i.push(l)}const s=()=>`'${n.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!p5(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,c=r[u];if(!c)return wb().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!p5(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!aoe(l)){const h={};for(const d in l)d!==e.key&&(h[d]=l[d]);return c(h)}return c(l)}}let Ft=class{},Xk=class{};const $_={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Ilt(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function hoe(e){switch(e.type){case"native":return Nr(e.value);case"array":return fE(hoe(e.value));case"one-of":return Alt(e);default:return null}}function Alt(e){let t=null;return(r,n)=>BD(r,e)?r:(t==null&&(t=UD(e)),wb().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function UD(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Ft:return"integer";case Date:return"date";case Xk:return"null";default:return Yk(e.value)}case"array":return`array of ${UD(e.value)}`;case"one-of":{const t=e.values.map(r=>UD(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function BD(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Ft:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case Xk:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!BD(r,t.value));case"one-of":return t.values.some(r=>BD(e,r))}}function f(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),i=OT(t,r);n&&(n.get||n.set?(i.get=n.get||i.get,i.set=n.set||i.set):"value"in n&&("value"in e&&Pe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=n.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let c;i.dependsOn=[l],i.get=function(){let h=Gl(this,l);if(typeof h=="function"){c||(c=l.split(".").slice(0,-1).join("."));const d=Gl(this,c);d&&(h=h.bind(d))}return h},i.readOnly||(i.set=u?function(h){this._override(r,h)}:function(h){s5(this,l,h)})}const o=e.type,a=e.types;if(!i.cast){let l;o?l=Mlt(o):a&&(l=Array.isArray(a)?fE(eu(a[0])):eu(a)),e.cast=Clt(e.cast,l)}vat(i,e),e.range&&(i.cast=ooe(i.cast,e.range))}}function DB(e,t,r){const n=OT(e,r);n.json||(n.json={});let i=n.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function Mlt(e){let t=0,r=e;if(Ilt(e))return hoe(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const n=r;if(coe(n))return t===0?jD(n):d5(jD(n),t);if(t===1)return Elt(n);if(t>1)return Tlt(n,t);const i=e;return i.from?i.from:Nr(i)}function Clt(e,t){if(e||t)return e?t?(r,n)=>t(e(r,n),n):e:t}function klt(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const n in r)if(t[n]){const i=t[n];r[n].forEach(s=>{t[s]=i}),delete t[n]}}}let ea=class extends Ase{constructor(e,t,r){super(e,t,r)}};ea.prototype.type="warning";function poe(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const VD=()=>Pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function rZ(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||Nlt(e)&&_i("read.reader",t1(e),t))}function t1(e){const t=e.ndimArray??0;if(t>1)return Olt(e);if(t===1)return nZ(e);if("type"in e&&foe(e.type)){const r=e.type.prototype?.itemType?.Type,n=nZ(typeof r=="function"?{type:r}:{types:r});return(i,s,o)=>{const a=n(i,s,o);return a&&new e.type(a)}}return FB(e)}function FB(e){return"type"in e?Rlt(e.type):Llt(e.types)}function Rlt(e){return e.prototype.read?(t,r,n)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void VD().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const s=new e;return s.read(t,n),s}:e.fromJSON}function doe(e,t,r,n){return n!==0&&Array.isArray(t)?t.map(i=>doe(e,i,r,n-1)):e(t,void 0,r)}function Olt(e){const t=FB(e),r=doe.bind(null,t),n=e.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=r(i,o,n);let a=n,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)i=[i];return i}}function nZ(e){const t=FB(e);return(r,n,i)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,i);return s!==void 0?[s]:void 0}}function foe(e){if(!poe(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?jB(t.Type):moe(t.Type))}function Nlt(e){return"types"in e?moe(e.types):jB(e.type)}function jB(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||foe(e))}function moe(e){for(const t in e.typeMap)if(!jB(e.typeMap[t]))return!1;return!0}function Llt(e){let t=null;const r=e.errorContext??"type",n=e.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void VD().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=Plt(e));const l=e.key;if(typeof l!="string")return;const u=i[l],c=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!c){const d=`Type '${u||"unknown"}' is not supported`;return o?.messages&&i&&o.messages.push(new ea(`${r}:unsupported`,d,{definition:i,context:o})),void VD().error(d)}const h=new c;return h.read(i,o),n?n(h):h}}function Plt(e){const t={};for(const r in e.typeMap){const n=e.typeMap[r],i=RT(n.prototype);if(typeof e.key=="function")continue;const s=i[e.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){t[s.json.type[0]]=n;continue}const o=s.json?.write;if(!o?.writer){t[r]=n;continue}const a=o.target,l=typeof a=="string"?a:e.key,u={};o.writer(r,u,l),u[l]&&(t[u[l]]=n)}return t}function Dlt(e){if(e.json||(e.json={}),sZ(e.json),oZ(e.json),iZ(e.json),e.json.origins)for(const t in e.json.origins)sZ(e.json.origins[t]),oZ(e.json.origins[t]),iZ(e.json.origins[t]);return!0}function iZ(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function sZ(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function oZ(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function aZ(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;e&&(r===1||"type"in e&&poe(e.type))?t.write.writer=Ult:r>1?t.write.writer=Blt(r):t.types?Array.isArray(t.types)?t.write.writer=jlt(t.types[0]):t.write.writer=Flt(t.types):t.write.writer=mE}function Flt(e){return(t,r,n,i)=>t?yoe(t,e,i)?mE(t,r,n,i):void 0:mE(t,r,n,i)}function yoe(e,t,r){for(const n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r?.messages){const n=t.errorContext??"type",i=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new ie(`${n}:unsupported`,i,{definition:e,context:r})),Pe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function jlt(e){return(t,r,n,i)=>!t||!Array.isArray(t)?mE(t,r,n,i):mE(t.filter(s=>yoe(s,e,i)),r,n,i)}function mE(e,t,r,n){_i(r,f5(e,n),t)}function f5(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?m5(e):e}function m5(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Ult(e,t,r,n){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(s=>f5(s,n)),typeof i.toArray=="function"&&(i=i.toArray())):i=[f5(e,n)],_i(r,i,t)}function goe(e,t,r){return r!==0&&Array.isArray(e)?e.map(n=>goe(n,t,r-1)):f5(e,t)}function Blt(e){return(t,r,n,i)=>{let s;if(t===null)s=null;else{s=goe(t,i,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}_i(n,s,r)}}function Vlt(e,t){return UB(e,"any",t?.origin)}function GD(e,t){return UB(e,"read",t?.origin)}function voe(e,t){return UB(e,"write",t?.origin)}function UB(e,t,r){let n=e?.json;if(n?.origins&&r){let i;i=r==="link-chart"?n.origins[r]&&(t==="any"||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],i&&(t==="any"||t in i)&&(n=i)}return n}function Glt(e){const t=zlt(e);if(e.json.origins)for(const r in e.json.origins){const n=e.json.origins[r],i=n.types?$lt(n):t;rZ(i,n,!1),n.types&&!n.write&&e.json.write?.enabled&&(n.write={...e.json.write}),aZ(i,n)}rZ(t,e.json,!0),aZ(t,e.json)}function zlt(e){return e.json.types?zD(e.json):e.type?boe(e):zD(e)}function $lt(e){return e.type?boe(e):zD(e)}function boe(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!coe(r);)r=r[0],t++;return{type:r,ndimArray:t}}function zD(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function qlt(e){Dlt(e)&&(klt(e),Glt(e))}const WN=new Set,ZN=new Set;function W(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,Wlt(t);const r=[],n=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!WN.has(i.initialize)&&(WN.add(i.initialize),r.push(i.initialize)),i.hasOwnProperty("destroy")&&!ZN.has(i.destroy)&&(ZN.add(i.destroy),n.push(i.destroy)),i=Object.getPrototypeOf(i);WN.clear(),ZN.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),n.length){let l=!1;const u=this[Ose];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let c=0;c<n.length;c++)n[c].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=RT(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function Hlt(e,t){return t.get==null?function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n===void 0)return;r.mutable&&It(n);const i=r.store;return i.has(e)?i.get(e):n.metadata.value}:function(){const r=this.__accessor__,n=r.propertiesByName.get(e);if(n!==void 0)return n.getComputed(r)}}function Wlt(e){const t=e.prototype,r=RT(t),n={};for(const i of Object.getOwnPropertyNames(r)){const s=r[i];qlt(s),n[i]={enumerable:!0,configurable:!0,get:Hlt(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?lZ("read-only",i):a.lifecycle===Ea.CONSTRUCTED&&s.constructOnly?lZ("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,n)}const lZ=(e,t)=>{Pe.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var woe,_oe;function Zlt(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const of=Symbol("Accessor-Handles"),$D=Symbol("Accessor-Initialized");let mt=class eM{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:n,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}RT(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const c=this.inherited;let h;this.inherited=function(...d){if(s.prototype[a])return s.prototype[a].apply(this,d)};try{h=l.apply(this,u)}catch(d){throw this.inherited=c,d}return this.inherited=c,h}:t[a]}for(const a in r){const l=Zlt(r[a]);f(l)(o.prototype,a)}return W(n)(o)}static freeze(t){return t instanceof eM?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof eM?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){if(this[woe]=null,this[_oe]=!1,this.constructor===eM)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Cat(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[$D]=!0}initialize(){}[Ose](){this[of]=pn(this[of])}destroy(){this.destroyed||(alt(this),this.__accessor__.destroy(),Pat()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[$D]}get destroyed(){return this.__accessor__?.lifecycle===Ea.DESTROYED||!1}commitProperty(t){Gl(this,t)}get(t){return CB(Pe.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Gl(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return s5(this,t,r),this}watch(t,r,n){return dlt(this,t,r,n)}addHandles(t,r){if(this.destroyed){const n=Array.isArray(t)?t:[t];for(const i of n)i.remove();return}(this[of]??=new e1).add(t,r)}removeHandles(t){this[of]?.remove(t)}removeAllHandles(){this[of]?.removeAll()}removeHandlesReference(t){this[of]?.removeReference(t)}hasHandles(t){return this[of]?.has(t)===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};woe=of,_oe=$D;let Jlt=class xoe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new xoe;return this._values.forEach((n,i)=>{t&&t.has(i)||r.set(i,se(n.value),n.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const n=this._values.get(t);return r==null||n?.origin===r?n?.value:void 0}originOf(t){return this._values.get(t)?.origin??et.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(n=>this._values.get(n)?.origin===t)}set(t,r,n){if((n=this._normalizeOrigin(n))===et.DEFAULTS){const i=this._values.get(t);if(i?.origin!=null&&i.origin>n)return}this._values.set(t,new Ylt(r,n))}delete(t,r){(r=this._normalizeOrigin(r))!=null&&this._values.get(t)?.origin!==r||this._values.delete(t)}has(t,r){return(r=this._normalizeOrigin(r))!=null?this._values.get(t)?.origin===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},n)=>t(r,n))}_normalizeOrigin(t){if(t!=null)return t===et.DEFAULTS?t:et.USER}},Ylt=class{constructor(e,t){this.value=e,this.origin=t}};function Soe(e,t,r){t.keys().forEach(i=>{r.set(i,t.get(i),et.DEFAULTS)});const n=e.metadata;Object.keys(n).forEach(i=>{e.internalGet(i)&&r.set(i,e.internalGet(i),et.DEFAULTS)})}function Xlt(e,t,r){if(!e?.read||e.read.enabled===!1||!e.read.source)return!1;const n=e.read.source;if(typeof n=="string"){if(n===t||n.includes(".")&&n.indexOf(t)===0&&qW(n,r))return!0}else for(const i of n)if(i===t||i.includes(".")&&i.indexOf(t)===0&&qW(i,r))return!0;return!1}function Qlt(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Klt(e,t,r,n,i){let s=GD(t[r],i);Qlt(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=GD(t[o],i),Xlt(s,r,n)&&(e[o]=!0)}function eut(e,t,r,n){const i=r.metadata,s=Vlt(i[t],n),o=s?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,n):o;a!==void 0&&r.set(t,a)}const Eoe={origin:"service"};function Toe(e,t,r=Eoe){if(!t||typeof t!="object")return;const n=Qi(e),i=n.metadata,s={};for(const o of Object.getOwnPropertyNames(t))Klt(s,i,o,t,r);n.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=GD(i[o],r).read,l=a?.source;let u;u=l&&typeof l=="string"?kT(t,l):t[o],a?.reader&&(u=a.reader.call(e,u,t,r)),u!==void 0&&n.set(o,u)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||eut(e,o,n,r)}n.setDefaultOrigin("user")}function tut(e,t,r,n=Eoe){const i={...n,messages:[]};r(i),i.messages?.forEach(s=>{s.type!=="warning"||e.loaded?n?.messages&&n.messages.push(s):e.loadWarnings.push(s)})}function rut(e,t,r,n,i){const s={};return t.write?.writer?.call(e,n,s,r,i),s}function Ioe(e,t,r,n,i,s){if(!n?.write)return!1;const o=Gl(e,r);if(!i&&n.write.overridePolicy){const a=n.write.overridePolicy.call(e,o,r,s??void 0);a!==void 0&&(i=a)}if(i||(i=n.write),!i||i.enabled===!1||i.layerContainerTypes&&s?.layerContainerType&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new ie("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&s?.messages?s.messages.push(a):a&&!s&&Pe.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===et.DEFAULTS)&&nut(e,r,s,n,o)||!i.ignoreOrigin&&s?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<_o(s.origin))}function nut(e,t,r,n,i){const s=n.default;if(s===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(e,t,r??void 0);return AT(o,i)}return!1}return s===i}function Aoe(e,t,r,n){const i=Qi(e),s=i.metadata,o=voe(s[t],n);return!!o&&Ioe(e,i,t,o,r,n)}function Moe(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return YA(t,e.toJSON(r));const n=Qi(e),i=n.metadata;for(const s in i){const o=voe(i[s],r);if(!Ioe(e,n,s,o,void 0,r))continue;const a=Gl(e,s),l=rut(e,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,r);Object.keys(l).length>0&&(t=YA(t,l),r?.resources?.pendingOperations?.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>YA(t,l,()=>"replace-arrays"))),r?.writtenProperties&&r.writtenProperties.push({target:e,propName:s,oldOrigin:Tat(n.store.originOf(s)),newOrigin:r.origin}))}return t}const o_=e=>{let t=class extends e{constructor(...r){super(...r);const n=Qi(this),i=n.store,s=new Jlt;n.store=s,Soe(n,i,s)}read(r,n){Toe(this,r,n)}write(r,n){return Moe(this,r??{},n)}toJSON(r){return this.write({},r)}static fromJSON(r,n){return iut.call(this,r,n)}};return t=p([W("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function iut(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function rw(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let we=class extends o_(mt){};we=p([W("esri.core.JSONSupport")],we);const sut=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,out={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function qD(e){const t=e?.match(sut);if(!t)return null;const[,r,n,i]=t;if(!r)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:c}=out;if(n)if(s=r,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=c);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function Coe(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function BB(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):n.test(e)&&(e=e.replace(n,"https://qaext.arcgis.com")),e}function koe(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}function aut(e){const t=new Uint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return btoa(r)}const lut=()=>Pe.getLogger("esri.core.urlUtils"),a_=pr.request,uZ="esri/config: esriConfig.request.proxyUrl is not set.",Roe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Ooe=/^\s*http:/i,uut=/^\s*https:/i,cut=/^\s*file:/i,hut=/:\d+$/,put=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,dut=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),fut=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ic=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(dut);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),this.authority!=null&&(t=this.authority.match(fut),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}};const hI={},mut=new ic(pr.applicationUrl);let vo=mut;const yut=vut();let VB=yut;const GB=()=>vo,gut=()=>VB;function vut(){const e=vo.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${vo.scheme}://${vo.host}${vo.port!=null?`:${vo.port}`:""}`}${t}`}function Zn(e){if(!e)return null;const t={path:null,query:null},r=new ic(e),n=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.slice(0,n),t.query=Qk(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function Qk(e){const t=e.split("&"),r={};for(const n of t){if(!n)continue;const i=n.indexOf("=");let s,o;i<0?(s=decodeURIComponent(n),o=""):(s=decodeURIComponent(n.slice(0,i)),o=decodeURIComponent(n.slice(i+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function dd(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const n=e[r];if(n==null)return"";const i=encodeURIComponent(r)+"=",s=t?.[r];return s?i+encodeURIComponent(s(n)):Array.isArray(n)?n.map(o=>rw(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):rw(n)?i+encodeURIComponent(JSON.stringify(n)):i+encodeURIComponent(n)}).filter(r=>r).join("&"):""}function Noe(e=!1){let t,r=a_.proxyUrl;if(typeof e=="string"){t=joe(e);const n=PT(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw lut().warn(uZ),new ie("urlUtils:proxy-not-set",uZ);return t&&WD()&&(r=eR(r)),Zn(r)}function Loe(e,t=!1){const r=PT(e);let n,i;if(r){const s=zB(r.proxyUrl);n=s.path,i=s.query?Qk(s.query):null}else if(t){const s=Noe(e);n=s.path,i=s.query}if(n){const s=Zn(e);e=n+"?"+s.path;const o=dd({...i,...s.query});o&&(e=`${e}?${o}`)}return e}const q_={path:"",query:""};function zB(e){const t=e.indexOf("?");return t!==-1?(q_.path=e.slice(0,t),q_.query=e.slice(t+1)):(q_.path=e,q_.query=null),q_}function Poe(e){return e=(e=g5(e=Boe(e=zB(e).path),!0)).toLowerCase()}function but(e){const t={proxyUrl:e.proxyUrl,urlPrefix:Poe(e.urlPrefix)},r=a_.proxyRules,n=t.urlPrefix;let i=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(n.indexOf(o)===0){if(n.length===o.length)return-1;i=s;break}o.indexOf(n)===0&&(i=s+1)}return r.splice(i,0,t),i}function PT(e){const t=a_.proxyRules,r=Poe(e);for(let n=0;n<t.length;n++)if(r.indexOf(t[n].urlPrefix)===0)return t[n]}function wut(e,t){if(!e||!t)return!1;e=y5(e),t=y5(t);const r=qD(e),n=qD(t);return r!=null&&n!=null?r.portalHostname===n.portalHostname:r==null&&n==null&&Mg(e,t,!0)}function $B(e,t){return e=y5(e),t=y5(t),g5(e)===g5(t)}function y5(e){const t=(e=ll(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function HD(e,t=a_.interceptors){const r=n=>n==null||n instanceof RegExp&&n.test(e)||typeof n=="string"&&e.startsWith(n);if(t){for(const n of t)if(Array.isArray(n.urls)){if(n.urls.some(r))return n}else if(r(n.urls))return n}return null}function Mg(e,t,r=!1){if(!e||!t)return!1;const n=JD(e),i=JD(t);return!(!r&&n.scheme!==i.scheme)&&n.host!=null&&i.host!=null&&n.host.toLowerCase()===i.host.toLowerCase()&&n.port===i.port}function qB(e){if(typeof e=="string"){if(!Na(e))return!0;e=JD(e)}if(Mg(e,vo))return!0;const t=a_.trustedServers||[];for(let r=0;r<t.length;r++){const n=_ut(t[r]);for(let i=0;i<n.length;i++)if(Mg(e,n[i]))return!0}return!1}function _ut(e){return hI[e]||(HB(e)||tu(e)?hI[e]=[new ic(Aa(e))]:hI[e]=[new ic(`http://${e}`),new ic(`https://${e}`)]),hI[e]}function Aa(e,t=VB,r){return tu(e)?r?.preserveProtocolRelative?e:vo.scheme==="http"&&vo.authority===zl(e).slice(2)?`http:${e}`:`https:${e}`:HB(e)?e:Th(e[0]==="/"?Cut(t):t,e)}function Kk(e,t=VB,r){if(e==null||!Na(e))return e;const n=ll(e),i=n.toLowerCase(),s=ll(t).toLowerCase().replace(/\/+$/,""),o=r?ll(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(h,d,m)=>(m=h.indexOf(d,m))===-1?h.length:m;let l=a(i,"/",i.indexOf("//")+2),u=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==i.length);)l=a(i,"/",l+1);if(u===-1||o&&u<o.length)return e;e=n.slice(u);const c=s.slice(u-1).replaceAll(/[^/]+/g,"").length;if(c>0)for(let h=0;h<c;h++)e=`../${e}`;else e=`./${e}`;return e}function ll(e){return e=Nut(e=Out(e=Rut(e=Aa(e=e.trim()))))}function Th(...e){const t=e.filter(Qo);if(!t?.length)return;const r=[];if(Na(t[0])){const i=t[0],s=i.indexOf("//");s!==-1&&(r.push(i.slice(0,s+1)),Aut(t[0])&&(r[0]+="/"),t[0]=i.slice(s+2))}else t[0][0]==="/"&&r.push("");const n=t.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<n.length;i++){const s=n[i];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&i===n.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function zl(e,t=!1){if(e==null||DT(e)||Hm(e))return null;let r=e.indexOf("://");if(r===-1&&tu(e))r=2;else{if(r===-1)return null;r+=3}const n=e.indexOf("/",r);return n!==-1&&(e=e.slice(0,n)),t&&(e=g5(e,!0)),e}function Na(e){return tu(e)||HB(e)}function DT(e){return e!=null&&e.slice(0,5)==="blob:"}function Hm(e){return e!=null&&e.slice(0,5)==="data:"}function Doe(e){const t=Cg(e);return t?.isBase64?koe(t.data):null}function xut(e){return aut(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const Sut=/^data:(.*?)(;base64)?,(.*)$/;function Cg(e){const t=e.match(Sut);if(!t)return null;const[,r,n,i]=t;return{mediaType:r,isBase64:!!n,data:i}}function Foe(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Eut(e){return(await fetch(e)).blob()}function Tut(e){const t=Doe(e);if(!t)return null;const r=Cg(e);return new Blob([t],{type:r.mediaType})}function tu(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function HB(e){return e!=null&&Roe.test(e)}function joe(e){return e!=null&&uut.test(e)||vo.scheme==="https"&&tu(e)}function Iut(e){return e!=null&&Ooe.test(e)||vo.scheme==="http"&&tu(e)}function Aut(e){return e!=null&&cut.test(e)}function eR(e){return tu(e)?`https:${e}`:e.replace(Ooe,"https:")}function Mut(){return vo.scheme==="http"}function WD(){return vo.scheme==="https"}function g5(e,t=!1){return tu(e)?e.slice(2):(e=e.replace(Roe,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Cut(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Uoe(e){let t=0;if(Na(e)){const n=e.indexOf("//");n!==-1&&(t=n+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function kut(e,t){if(!e)return"";const r=Zn(e).path.replace(/\/+$/,""),n=r.slice(r.lastIndexOf("/")+1);if(!t?.length)return n;const i=new RegExp(`\\.(${t.join("|")})$`,"i");return n.replace(i,"")}function Boe(e){return e.endsWith("/")?e:`${e}/`}function WB(e){return e.replace(/\/+$/,"")}function Rut(e){if(/^https?:\/\//i.test(e)){const t=zB(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Out(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Nut(e){const t=a_.httpsDomains;if(!Iut(e))return e;const r=e.indexOf("/",7);let n;if(n=r===-1?e:e.slice(0,r),n=n.toLowerCase().slice(7),hut.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return Mut()&&n===vo.authority&&!put.test(e)||(WD()&&n===vo.authority||t&&t.some(i=>n===i||n.endsWith(`.${i}`))||WD()&&!PT(e))&&(e=eR(e)),e}function ZD(e,t,r){if(!(t&&r&&e&&Na(e)))return e;const n=e.indexOf("//"),i=e.indexOf("/",n+2),s=e.indexOf(":",n+2),o=Math.min(i<0?e.length:i,s<0?e.length:s);return e.slice(n+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(o)}`}function JD(e){return typeof e=="string"?new ic(Aa(e)):(e.scheme||(e.scheme=vo.scheme),e)}function Lut(e){return jut.test(e)}function Voe(e,t){const r=Zn(e),n=Object.keys(r.query||{});return n.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),r.path}function Put(e,t,r){const n=Zn(e),i=n.query||{};return i[t]=String(r),`${n.path}?${dd(i)}`}function _b(e,t){if(!t)return e;const r=Zn(e),n=r.query||{};for(const[s,o]of Object.entries(t))o!=null&&(n[s]=o);const i=dd(n);return i?`${r.path}?${i}`:r.path}function Dut(e){if(e==null)return null;const t=e.match(Goe);return t?t[2]:null}function cZ(e){if(e==null)return null;const t=e.match(Goe);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Fut(e){return typeof e=="string"?Cg(e)??{data:e}:new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(Cg(n.result)),n.onerror=i=>r(i)})}const Goe=/([^.]*)\.([^/]*)$/,jut=/(^data:image\/svg|\.svg$)/i,zoe="20241122",$oe="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const qoe="4.31";let Er,ZB=qoe;ZB="4.31.6";function Uut(e){Er=e}function But(e){const t=Er?.findCredential(e);return t?.token?Put(e,"token",t.token):e}xe("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),xe("host-webworker");const Vut=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Gut(e){const t=zl(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Vut.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Hoe(e,t){return!(!pr.apiKey||!Gut(e))}function Woe(e,t,r=!1,n){return new Promise((i,s)=>{if(Ba(n))return void s(hZ());let o=()=>{u(),s(new Error(`Unable to load ${t}`))},a=()=>{const c=e;u(),i(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",s(hZ())};const u=()=>{xe("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,n?.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};n?.addEventListener("abort",l),xe("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function hZ(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const Zoe="Timeout exceeded";function zut(){return new Error(Zoe)}function $ut(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===Zoe}function qut(e){pr.request.crossOriginNoCorsDomains||(pr.request.crossOriginNoCorsDomains={});const t=pr.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[zl(r)??""]=0:(t[zl("http://"+r)??""]=0,t[zl("https://"+r)??""]=0)}function Hut(e){const t=pr.request.crossOriginNoCorsDomains;if(t){let r=zl(e);if(r)return r=r.toLowerCase(),!Mg(r,GB())&&t[r]<Date.now()-36e5}return!1}async function Wut(e){const t=Zn(e);e=t.path,t.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const r=pr.request.crossOriginNoCorsDomains,n=zl(e);r&&n&&(r[n.toLowerCase()]=Date.now())}async function Xe(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=Qk(t.query.toString().replaceAll("+"," ")));const r=Hm(e),n=DT(e);n||r||(e=ll(e));const i={url:e,requestOptions:{...t}},s=d=>({data:d,getAllHeaders:nw,getHeader:nw,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=HD(e,Fl.internalInterceptors);if(o){const d=await dZ(o,i);if(d!=null)return s(d)}let a=HD(e);if(a){const d=await dZ(a,i);if(d!=null)return s(d);a.after||a.error||(a=null)}if(e=i.url,(t=i.requestOptions).responseType==="image"&&(xe("host-webworker")||xe("host-node")))throw mh("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(t.method==="head"){if(t.body)throw mh("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(r||n)throw mh("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await Qut(),v5)return v5.execute(e,t);const l=new AbortController,u=Oa(t,()=>l.abort()),c={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:Fl.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=await rct(c).finally(()=>u?.remove());return a?.after?.(h),h}let v5;const Fl=pr.request,Joe="FormData"in globalThis,Zut=new Set([499,498,403,401]),Jut=new Set(["COM_0056","COM_0057","SB_0008"]),Yut=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],nw=()=>null,b5=Symbol();function Xut(e){const t=zl(e);t&&!Xe._corsServers.includes(t)&&Xe._corsServers.push(t)}function pZ(e){const t=zl(e);return!t||t.endsWith(".arcgis.com")||Xe._corsServers.includes(t)||qB(t)}function mh(e,t,r,n){let i="Error";const s={url:r.url,requestOptions:r.requestOptions,getAllHeaders:nw,getHeader:nw,ssl:!1};if(t instanceof ie)return t.details?(t.details=se(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=n&&(()=>Array.from(n.headers)),a=n&&(c=>n.headers.get(c)),l=n?.status,u=t.message;u&&(i=u),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=b5 in t?t[b5]:t}return Fi(t)?Xr():new ie(e,i,s)}async function Qut(){xe("host-webworker")&&!v5&&(v5=await Me(()=>import("./request-B81tzgri-CGG_CFUr.js"),__vite__mapDeps([0,1,2]),import.meta.url))}async function YD(){Er||await Me(()=>import("./IdentityManager-BxUN4JOA-BJ_7rzTq.js"),__vite__mapDeps([3,1,2,4]),import.meta.url)}async function Kut(e){const t=e.params.url,r=e.params.requestOptions,n=e.controller.signal,i=r.body;let s=null,o=null;if(Joe&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Fl.priority,redirect:"follow",signal:n},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||s?.get("token")),!e.hasToken&&Hoe(t)&&(r.query||(r.query={}),r.query.token=pr.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!Yoe(t)&&!Ba(n)){let a;r.authMode==="immediate"?(await YD(),a=await Er.getCredential(t,{signal:n}),e.credential=a):r.authMode==="no-prompt"?(await YD(),a=await Er.getCredential(t,{prompt:!1,signal:n}).catch(()=>{}),e.credential=a):Er&&(a=Er.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function Yoe(e){return Yut.some(t=>t.test(e))}async function ect(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},i=DT(t)||Hm(t),s=r.responseType||"json",o=i?0:r.timeout!=null?r.timeout:Fl.timeout;let a=!1;if(!i){e.useSSL&&(t=eR(t));let d={...r.query};e.credentialToken&&(d.token=e.credentialToken);let m=dd(d);xe("esri-url-encodes-apostrophe")&&(m=m.replaceAll("'","%27"));const y=t.length+1+m.length;let g;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||y>Fl.maxUrlLength;const b=r.useProxy||!!PT(t);if(b){const S=Noe(t);g=S.path,!a&&g.length+1+y>Fl.maxUrlLength&&(a=!0),S.query&&(d={...S.query,...d})}if(n.method==="HEAD"&&(a||b)){if(a)throw y>Fl.maxUrlLength?mh("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):mh("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(b)throw mh("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}a?(n.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=_b(t,d):(n.body=dd(d),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=_b(t,d),b&&(e.useProxy=!0,t=`${g}?${t}`),d.token&&Joe&&n.body instanceof FormData&&!Coe(t)&&n.body.set("token",d.token),r.hasOwnProperty("withCredentials")?e.withCredentials=r.withCredentials:Mg(t,GB())||(qB(t)||Er&&Er.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(n.credentials="include",Hut(t)&&await Wut(a?_b(t,d):t))}let l,u,c=0,h=!1;o>0&&(c=setTimeout(()=>{h=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")u=n,u.url=t,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||a||tct(r.headers)||!i&&!e.useProxy&&Fl.proxyUrl&&!pZ(t)){if(Xe._beforeFetch&&await Xe._beforeFetch(t,n),l=await fetch(t,n),Xe._afterFetch&&await Xe._afterFetch(l),e.useProxy||Xut(t),r.responseType==="native")u=l;else if(n.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=fZ(u,"application/xml");break;case"document":u=fZ(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const d=l.headers.get("Content-Type");if(d&&/application\/json|text\/plain/i.test(d)&&u[s==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}s==="image"&&u instanceof Blob&&(u=await mZ(URL.createObjectURL(u),e,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await mZ(t,e)}catch(d){if(d.name==="AbortError")throw h?zut():Xr("Request canceled");if(!(!l&&d instanceof TypeError&&Fl.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||pZ(t))throw d;e.redoRequest=!0,but({proxyUrl:Fl.proxyUrl,urlPrefix:zl(t)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function dZ(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(i){r=mh("request:interceptor",i,t)}if((n instanceof Error||n instanceof ie)&&(r=mh("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function tct(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function fZ(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function rct(e){let t,r;await Kut(e);try{do[t,r]=await ect(e);while(!await nct(e,t,r))}catch(s){const o=mh("request:server",s,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(o),o}const n=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!qB(n)){const s=zl(n,!0);s&&Fl.trustedServers.push(s)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&qut(r.authorizedCrossOriginNoCorsDomains)}const i=e.credential;if(i&&Er){let s=Er.findServerInfo(i.server)?.owningSystemUrl;if(s){s=s.replace(/\/?$/,"/sharing");const o=Er.findCredential(s,i.userId);o&&Er._getIdenticalSvcIdx(s,o)===-1&&o.resources.unshift(s)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):nw,getHeader:t?s=>t.headers.get(s):nw,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function nct(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const n=e.params.requestOptions;if(!t||n.responseType==="native"||n.responseType==="native-request-init")return!0;let i,s;if(r&&(r.error&&typeof r.error=="object"?i=r.error:r.status==="error"&&Array.isArray(r.messages)&&(i={...r},i[b5]=r,i.details=r.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[b5]=r,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());const l=n.authMode;if(s===403&&(a===4||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&Zut.has(s)&&!Yoe(e.params.url)&&(s!==403||(!o||!Jut.has(o))&&(a==null||a===2&&e.credentialToken))){await YD();try{const u=await Er.getCredential(e.params.url,{error:mh("request:server",i,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;i=u}}if(i)throw i;return!0}function mZ(e,t,r=!1){const n=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=Fl.priority,i.src=e,Woe(i,e,r,n)}Xe._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Xe._beforeFetch=void 0,Xe._afterFetch=void 0;let tM=class Xoe{constructor(){this._emitter=new Xoe.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(i=null){this._target=i,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(i,s){let o=this._listenersMap?.get(i);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const c="deref"in u?u.deref():u;c?c?.call(a,s):l=!0}return l&&(o=o.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return e_(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),gr(()=>{const a=this._listenersMap?.get(i),l=a?.indexOf(s)??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove(),("deref"in s?s.deref():s)?.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap?.get(i);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=n=>{let i=class extends n{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return i=p([W("esri.core.Evented")],i),i};let r=class extends mt{constructor(){super(...arguments),this._emitter=new tM.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,i){return this._emitter.emit(n,i)}on(n,i){return this._emitter.on(n,i)}once(n,i){return this._emitter.once(n,i)}hasEventListener(n){return this._emitter.hasEventListener(n)}};r=p([W("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(tM||(tM={}));const jh=tM;var Tr;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Tr||(Tr={}));function JB(e){return(t,r)=>{t[r]=e}}let l_=class extends Fse{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const r of t)r.onInvalidated(),r.onCommitted()}}};var Up;let ict=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},sct=class{constructor(e,t,r,n,i){this.target=e,this.added=t,this.removed=r,this.start=n,this.deleteCount=i}};const gl=new Td(ict,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function yZ(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function JN(e){return e?e instanceof Rp?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function YN(e){if(e?.length)return e[0]}function oct(e,t,r,n){const i=Math.min(e.length-r,t.length-n);let s=0;for(;s<i&&e[r+s]===t[n+s];)s++;return s}function Qoe(e,t,r,n){t&&t.forEach((i,s,o)=>{e.push(i),Qoe(e,r.call(n,i,s,o),r,n)})}const zd=new Set,$d=new Set,qd=new Set,XN=new Map;let act=0,Rp=Up=class extends jh.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Up}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new l_,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:act++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Up?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return It(this._observable),this._items}set items(e){this._emitBeforeChanges(Tr.ADD)||(this._splice(0,this.length,JN(e)),this._emitAfterChanges(Tr.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return gr();if(e==="change"){const r=this._chgListeners,n={removed:!1,callback:t};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),gr(()=>{n.removed=!0,r.splice(r.indexOf(n),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,n=this.on(e,i=>{r()?.call(null,i),n.remove()});return n}add(e,t){if(It(this._observable),this._emitBeforeChanges(Tr.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(Tr.ADD),this}addMany(e,t=this._items.length){if(It(this._observable),!e?.length)return this;if(this._emitBeforeChanges(Tr.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,JN(e)),this._emitAfterChanges(Tr.ADD),this}at(e){if(It(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(It(this._observable),!this.length||this._emitBeforeChanges(Tr.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Tr.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return It(this._observable),this._createNewInstance({items:this._items.map(se)})}concat(...e){It(this._observable);const t=e.map(JN);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(It(this._observable),!this.length||this._emitBeforeChanges(Tr.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let i=0;i<n;i++)e.call(t,r[i],i,r);this._emitAfterChanges(Tr.REMOVE)}destroyAll(){this.drain(yZ)}destroyMany(e){const t=this.removeMany(e);return t.forEach(yZ),t}every(e,t){return It(this._observable),this._items.every(e,t)}filter(e,t){let r;return It(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return It(this._observable),this._items.find(e,t)}findIndex(e,t){return It(this._observable),this._items.findIndex(e,t)}flatten(e,t){It(this._observable);const r=[];return Qoe(r,this,e,t),new Up(r)}forEach(e,t){return It(this._observable),this._items.forEach(e,t)}getItemAt(e){return It(this._observable),this._items[e]}getNextIndex(e){It(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return It(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return It(this._observable),this._items.indexOf(e,t)}join(e=","){return It(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return It(this._observable),this._items.lastIndexOf(e,t)}map(e,t){It(this._observable);const r=this._items.map(e,t);return new Up({items:r})}reorder(e,t=this.length-1){It(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Tr.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Tr.MOVE)}return e}}pop(){if(It(this._observable),!this.length||this._emitBeforeChanges(Tr.REMOVE))return;const e=YN(this._splice(this.length-1,1));return this._emitAfterChanges(Tr.REMOVE),e}push(...e){return It(this._observable),this._emitBeforeChanges(Tr.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Tr.ADD)),this.length}reduce(e,t){It(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){It(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return It(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(It(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Tr.REMOVE))return;const t=YN(this._splice(e,1));return this._emitAfterChanges(Tr.REMOVE),t}removeMany(e){if(It(this._observable),!e?.length||this._emitBeforeChanges(Tr.REMOVE))return[];const t=e instanceof Up?e.toArray():e,r=this._items,n=[],i=t.length;for(let s=0;s<i;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+oct(t,r,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&n.push.apply(n,u),s+=l-1}}return this._emitAfterChanges(Tr.REMOVE),n}reverse(){if(It(this._observable),this._emitBeforeChanges(Tr.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Tr.MOVE),this}shift(){if(It(this._observable),!this.length||this._emitBeforeChanges(Tr.REMOVE))return;const e=YN(this._splice(0,1));return this._emitAfterChanges(Tr.REMOVE),e}slice(e=0,t=this.length){return It(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return It(this._observable),this._items.some(e,t)}sort(e){if(It(this._observable),!this.length||this._emitBeforeChanges(Tr.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Tr.MOVE),this}splice(e,t,...r){It(this._observable);const n=(t?Tr.REMOVE:0)|(r.length?Tr.ADD:0);if(this._emitBeforeChanges(n))return[];const i=this._splice(e,t,r)||[];return this._emitAfterChanges(n),i}toArray(){return It(this._observable),this._items.slice()}toJSON(){return It(this._observable),this.toArray()}toLocaleString(){return It(this._observable),this._items.toLocaleString()}toString(){return It(this._observable),this._items.toString()}unshift(...e){return It(this._observable),!e.length||this._emitBeforeChanges(Tr.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Tr.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const n=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=i_(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=n.splice(e,t),this.hasEventListener("before-remove")){const a=gl.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),n.splice(e,0,s),e+=1,l-=1,u-=1);gl.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=gl.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);gl.release(a)}}if(r?.length){if(i){const c=[];for(const h of r){const d=i.ensureType(h);d==null&&h!=null||c.push(d)}r=c}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const c=gl.acquire();c.target=this,c.cancellable=!0;const h=gl.acquire();h.target=this,h.cancellable=!1;for(const d of r)a?(c.reset(d),this.emit("before-add",c),c.defaultPrevented||(u?n.push(d):n.splice(e++,0,d),this._set("length",n.length),l&&(h.reset(d),this.emit("after-add",h)))):(u?n.push(d):n.splice(e++,0,d),this._set("length",n.length),h.reset(d),this.emit("after-add",h));gl.release(h),gl.release(c)}else{if(u)for(const c of r)n.push(c);else n.splice(e,0,...r);this._set("length",n.length)}}if((r?.length||o?.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new sct(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=gl.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,gl.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=gl.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),gl.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;zd.clear(),$d.clear(),qd.clear();for(const{added:l,removed:u}of r){if(l)if(qd.size===0&&$d.size===0)for(const c of l)zd.add(c);else for(const c of l)$d.has(c)?(qd.add(c),$d.delete(c)):qd.has(c)||zd.add(c);if(u)if(qd.size===0&&zd.size===0)for(const c of u)$d.add(c);else for(const c of u)zd.has(c)?zd.delete(c):(qd.delete(c),$d.add(c))}const n=mo.acquire();zd.forEach(l=>{n.push(l)});const i=mo.acquire();$d.forEach(l=>{i.push(l)});const s=this._items,o=t.items,a=mo.acquire();if(qd.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(n.length||i.length||a.length)){const l={target:this,added:n,removed:i,moved:a},u=t.listeners.length;for(let c=0;c<u;c++){const h=t.listeners[c];h.removed||h.callback.call(this,l)}}mo.release(n),mo.release(i),mo.release(a)}zd.clear(),$d.clear(),qd.clear()}};Rp.ofType=e=>{if(!e)return Up;if(XN.has(e))return XN.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const n in e.typeMap){const i=e.typeMap[n].prototype.declaredClass;t?t+=` | ${i}`:t=i}let r=class extends Up{};return p([JB({Type:e,ensureType:typeof e=="function"?Nr(e):eu(e)})],r.prototype,"itemType",void 0),r=p([W(`esri.core.Collection<${t}>`)],r),XN.set(e,r),r},p([f()],Rp.prototype,"_updating",void 0),p([f()],Rp.prototype,"length",void 0),p([f()],Rp.prototype,"items",null),p([f({readOnly:!0})],Rp.prototype,"updating",null),Rp=Up=p([W("esri.core.Collection")],Rp);const st=Rp;function fd(e,t,r=st){return t||(t=new r),t===e||(t.removeAll(),lct(e)?t.addMany(e):e&&t.add(e)),t}function YB(e){return e}function lct(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Uf;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Uf||(Uf={}));let uct=class{constructor(){this._resolver=Ko(),this._status=Uf.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Uf.RESOLVED,this._cleanUp()},()=>{this._status=Uf.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===Uf.RESOLVED}isRejected(){return this._status===Uf.REJECTED}isFulfilled(){return this._status!==Uf.PENDING}abort(){this._resolver.reject(Xr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Ko(),t=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(t);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},n=>{this.isFulfilled()||this._allPromise!==r||Fi(n)||this._resolver.reject(n)}),e.resolve()}};const FT=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new uct,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,n){return this._promiseProps.promise.then(()=>this).then(r,n)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=p([W("esri.core.Promise")],t),t};let w5=class extends FT(mt){};w5=p([W("esri.core.Promise")],w5);const cct="not-loaded",hct="loading",pct="failed",gZ="loaded",Koe=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const i=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=Hk(s,l);this.destroyed&&l(new ie("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===cct){this._set("loadStatus",hct);const a=this._loadController=new AbortController;i({signal:a.signal})}return n(),o}})),this.when(()=>{this._set("loadStatus",gZ),this._loadController=null},n=>{this._set("loadStatus",pct),this._set("loadError",n),this._loadController=null})}destroy(){this._loadController&&(this._loadController=ew(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===gZ}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new ie("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return p([f({readOnly:!0})],t.prototype,"loaded",null),p([f({readOnly:!0})],t.prototype,"loadError",void 0),p([f({clonable:!1})],t.prototype,"loadStatus",void 0),p([f({type:[ea],readOnly:!0})],t.prototype,"loadWarnings",null),t=p([W("esri.core.Loadable")],t),t};let Z2=class extends Koe(w5){};Z2=p([W("esri.core.Loadable")],Z2),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=Koe,e.isLoadable=t}(Z2||(Z2={}));const pc=Z2;function dct(e,t,r){return Wk(e.map((n,i)=>t.apply(r,[n,i])))}async function fct(e,t,r){return(await Wk(e.map((n,i)=>t.apply(r,[n,i])))).map(n=>n.value)}function XB(e){return{ok:!0,value:e}}function QB(e){return{ok:!1,error:e}}function mct(e){return e!=null&&e.ok===!0?e.value:null}function yct(e){return e!=null&&e.ok===!1?e.error:null}async function jT(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return XB(await e)}catch(t){return QB(t)}}async function eae(e){try{return XB(await e)}catch(t){return qo(t),QB(t)}}function tR(e,t){return new af(e,t)}let af=class extends mt{get value(){return mct(this._result)}get error(){return yct(this._result)}get finished(){return this._result!=null}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=ew(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(n=>{this._result=XB(n),this._cleanup()},n=>{this._result=QB(n),this._cleanup()}),this._abortHandle=Oa(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=mn(this._abortHandle),this._abortController=null}};p([f()],af.prototype,"value",null),p([f()],af.prototype,"error",null),p([f()],af.prototype,"finished",null),p([f()],af.prototype,"promise",void 0),p([f()],af.prototype,"_result",void 0),af=p([W("esri.core.asyncUtils.ReactiveTask")],af);async function UT(e,t){return await e.load(),tae(e,t)}async function tae(e,t){const r=[],n=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?n(...o):st.isCollection(o)?o.forEach(a=>n(a)):pc.isLoadable(o)&&r.push(o))};t(n);let i=null;if(await fct(r,async s=>{const o=await jT(gct(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return e}function gct(e){return"loadAll"in e&&typeof e.loadAll=="function"}function Re(e,t,r){let n,i;return t===void 0?(i=e,n=[void 0]):typeof t!="string"?(i=e,n=[void 0],r=t):(i=t,n=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of n){const u=DB(s,l,i);u.write&&typeof u.write=="object"||(u.write={}),r&&(u.write.target=r),u.write.writer=a[o]}}}let Pt=class{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=vct(e),this.apiValues=vZ(this._apiToJSON),this.jsonValues=vZ(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,n,i)=>{const s=this.toJSON(r);s!==void 0&&_i(i,s,n)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function vct(e){const t={};for(const r in e)t[e[r]]=r;return t}function vZ(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Mn(){return function(e,t){return new Pt(e,{ignoreUnknown:!0,...t})}}let KB=class{constructor(e,t,r,n,i,s){this.semiMajorAxis=e,this.flattening=t,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=n,this.scaleHeight=i;const o=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*o,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const Fn=new KB(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),yh=new KB(3396190,1/169.8944472236118,23e4,6e4,.111),Tm=new KB(1737400,0,0,0,0);function br(e){if(!pr.assetsPath)throw Pe.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new ie("assets:path-not-set","config.assetsPath is not set");return Th(pr.assetsPath,e)}let QN,fe=null;function rR(){return!!fe}function bct(){return!!xe("esri-wasm")}function eV(){return QN||(QN=Me(()=>import("./pe-wasm-LKD1FDeM-D0WVrMrn.js"),__vite__mapDeps([5,1,2]),import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>br(`esri/geometry/support/${t}`)})).then(e=>{iae(e)}),QN)}var _5,hn;(function(e){function t(s,o,a){fe.ensureCache.prepare();const l=Ry(a),u=a===l,c=fe.ensureFloat64(l),h=fe._pe_geog_to_proj(fe.getPointer(s),o,c);return h&&em(a,o,c,u),h}function r(s,o,a,l){switch(l){case hn.PE_TRANSFORM_P_TO_G:return n(s,o,a);case hn.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function n(s,o,a){return i(s,o,a,0)}function i(s,o,a,l){fe.ensureCache.prepare();const u=Ry(a),c=a===u,h=fe.ensureFloat64(u),d=fe._pe_proj_to_geog_center(fe.getPointer(s),o,h,l);return d&&em(a,o,h,c),d}e.geogToProj=t,e.projGeog=r,e.projToGeog=n,e.projToGeogCenter=i})(_5||(_5={})),function(e){function t(){e.PE_BUFFER_MAX=fe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=fe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=fe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=fe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=fe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=fe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=fe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=fe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=fe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=fe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=fe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=fe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=fe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=fe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=fe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=fe.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=fe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=fe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=fe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=fe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=fe.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=fe.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=fe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=fe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=fe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=fe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=fe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=fe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=fe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=fe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=fe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=fe.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(hn||(hn={}));let rae=null;var x5;(function(e){const t={},r={},n=m=>{const y=m.getType();switch(y){case hn.PE_TYPE_GEOGCS:m=fe.castObject(m,fe.PeGeogcs);break;case hn.PE_TYPE_PROJCS:m=fe.castObject(m,fe.PeProjcs);break;case hn.PE_TYPE_GEOGTRAN:m=fe.castObject(m,fe.PeGeogtran);break;default:y&hn.PE_TYPE_UNIT&&(m=fe.castObject(m,fe.PeUnit))}return m};function i(){fe.PeFactory.prototype.initialize(null)}function s(m){return o(hn.PE_TYPE_COORDSYS,m)}function o(m,y){let g=null,b=t[m];if(b||(b={},t[m]=b),b.hasOwnProperty(String(y))&&(g=b[y],fe.compare(g,fe.NULL)&&(g=null)),!g){const S=fe.PeFactory.prototype.factoryByType(m,y);fe.compare(S,fe.NULL)||(g=n(S),b[y]=g)}return g}function a(m,y){let g=null,b=r[m];if(b||(b={},r[m]=b),b.hasOwnProperty(y)&&(g=b[y],fe.compare(g,fe.NULL)&&(g=null)),!g){const S=fe.PeFactory.prototype.fromString(m,y);fe.compare(S,fe.NULL)||(g=n(S),b[y]=g)}return g}function l(m){return o(hn.PE_TYPE_GEOGCS,m)}function u(m){return o(hn.PE_TYPE_GEOGTRAN,m)}function c(m){return fe.PeFactory.prototype.getCode(m)}function h(m){return o(hn.PE_TYPE_PROJCS,m)}function d(m){return o(hn.PE_TYPE_UNIT,m)}e.initialize=i,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=c,e.projcs=h,e.unit=d})(x5||(x5={}));let nae=null;var S5,XD,E5,QD,KD,T5,I5,e6,A5,yE,t6;function iae(e){function t(s,o,a){s[o]=a(s[o])}fe=e,hn.init(),S5.init(),I5.init(),A5.init(),yE.init(),rae=class extends fe.PeDouble{constructor(s=NaN){super(s)}destroy(){fe.destroy(this)}[Symbol.dispose](){this.destroy()}},nae=class extends fe.PeGCSExtent{destroy(){fe.destroy(this)}[Symbol.dispose](){this.destroy()}};const r=[fe.PeAngunit,fe.PeDatum,fe.PeGeogcs,fe.PeGeogtran,fe.PeObject,fe.PeParameter,fe.PePrimem,fe.PeProjcs,fe.PeSpheroid,fe.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(hn.PE_NAME_MAX))});for(const s of[fe.PeGeogtran,fe.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(hn.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const c=fe.getValue(l,"*");a[u]=c?fe.wrapPointer(c,fe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(fe.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return em(l,a,s.call(this),o),l}),t(fe.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=fe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!fe.compare(l,fe.NULL)){a=[l];const u=this.getSteps();if(u>1){const c=fe.getPointer(l);for(let h=1;h<u;h++)a.push(fe.wrapPointer(c+o*h,fe.PeGTlistExtendedGTs))}}return a}});const n=fe._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!fe.compare(l,fe.NULL)){a=[l];const u=l.getNump();if(u>1){const c=fe.getPointer(l);for(let h=1;h<u;h++)a.push(fe.wrapPointer(c+n*h,fe.PeHorizon))}}return o.set(s,a),a};t(fe.PeProjcs.prototype,"horizonGcsGenerate",i),t(fe.PeProjcs.prototype,"horizonPcsGenerate",i),fe.PeObject.prototype.toString=function(s=hn.PE_STR_OPTS_NONE){fe.ensureCache.prepare();const o=fe.getPointer(this),a=fe.ensureInt8(new Array(hn.PE_BUFFER_MAX));return fe.UTF8ToString(fe._pe_object_to_string_ext(o,s,a))},fe.PeGeogcs.prototype.destroy=function(){this.Delete(),Du(this),this.ptr=0},fe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},fe.PeProjcs.prototype.destroy=function(){this.Delete(),Du(this),this.ptr=0},fe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Du(e){if(!e)return;const t=fe.getClass(e);if(!t)return;const r=fe.getCache(t);if(!r)return;const n=fe.getPointer(e);n&&delete r[n]}function pI(e,t){const r=[],n=new Array(t);for(let i=0;i<e;i++)r.push(fe.ensureInt8(n));return r}function Ry(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function em(e,t,r,n=!1){if(n)for(let i=0;i<2*t;i++)e[i]=fe.getValue(r+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=e.length===0;for(let s=0;s<t;s++)i&&(e[s]=new Array(2)),e[s][0]=fe.getValue(r,"double"),e[s][1]=fe.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=fe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=fe._pe_getPeGTlistExtendedEntrySize()}function n(i,s,o,a,l,u){let c=null;const h=new fe.PeInteger(u);try{const d=fe.PeGTlistExtended.prototype.getGTlist(i,s,o,a,l,h);if((u=h.val)&&(c=[d],u>1)){const m=fe.getPointer(d);for(let y=1;y<u;y++)c.push(fe.wrapPointer(m+t*y,fe.PeGTlistExtendedEntry))}}finally{fe.destroy(h)}return c}e.init=r,e.getGTlist=n})(S5||(S5={})),function(e){function t(r){if(r?.length){for(const n of r)Du(n),n.getEntries().forEach(i=>{Du(i);const s=i.getGeogtran();Du(s),s.getParameters().forEach(Du),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Du(o);const a=o.getDatum();Du(a),Du(a.getSpheroid()),Du(o.getPrimem()),Du(o.getUnit())})});fe.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(XD||(XD={})),function(e){function t(r,n,i,s,o){fe.ensureCache.prepare();const a=Ry(i),l=i===a,u=fe.ensureFloat64(a);let c=0;s&&(c=fe.ensureFloat64(s));const h=fe._pe_geog_to_geog(fe.getPointer(r),n,u,c,o);return h&&em(i,n,u,l),h}e.geogToGeog=t}(E5||(E5={})),function(e){function t(s,o,a,l,u,c,h,d){fe.PeLineType.prototype.geodesic_coordinate(s,o,a,l,u,c,h,d)}function r(s,o,a,l,u,c,h,d,m){fe.PeLineType.prototype.geodetic_coordinate(s,o,a,l,u,c,h,d,m)}function n(s,o,a,l,u,c,h,d,m,y){fe.PeLineType.prototype.geodetic_distance(s,o,a,l,u,c,h,d,m,y)}function i(s,o,a,l,u,c,h,d,m){fe.PeLineType.prototype.great_elliptic_distance(s,o,a,l,u,c,h,d,m)}e.geodesicCoordinate=t,e.geodeticCoordinate=r,e.geodeticDistance=n,e.greatEllipticDistance=i}(QD||(QD={})),function(e){function t(o,a){return fe.PeMath.prototype.phi_to_eta(o,a)}function r(o,a){return fe.PeMath.prototype.eta_to_phi(o,a)}function n(o,a){return fe.PeMath.prototype.phi_to_phig(o,a)}function i(o,a,l){return fe.PeMath.prototype.q(o,a,l)}function s(o,a){return fe.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=r,e.phiToPhig=n,e.q=i,e.q90=s}(KD||(KD={})),function(e){const t=(u,c,h,d,m,y)=>{let g,b;switch(fe.ensureCache.prepare(),u){case"dd":g=fe._pe_geog_to_dd,b=hn.PE_DD_MAX;break;case"ddm":g=fe._pe_geog_to_ddm,b=hn.PE_DDM_MAX;break;case"dms":g=fe._pe_geog_to_dms,b=hn.PE_DMS_MAX}let S=0;c&&(S=fe.getPointer(c));const E=Ry(d),x=fe.ensureFloat64(E),w=pI(h,b),T=g(S,h,x,m,fe.ensureInt32(w));if(T)for(let I=0;I<h;I++)y[I]=fe.UTF8ToString(w[I]);return T},r=(u,c,h,d,m)=>{let y;switch(fe.ensureCache.prepare(),u){case"dd":y=fe._pe_dd_to_geog;break;case"ddm":y=fe._pe_ddm_to_geog;break;case"dms":y=fe._pe_dms_to_geog}let g=0;c&&(g=fe.getPointer(c));const b=d.map(w=>fe.ensureString(w)),S=fe.ensureInt32(b),E=fe.ensureFloat64(new Array(2*h)),x=y(g,h,S,E);return x&&em(m,h,E),x};function n(u,c,h,d,m){return t("dms",u,c,h,d,m)}function i(u,c,h,d){return r("dms",u,c,h,d)}function s(u,c,h,d,m){return t("ddm",u,c,h,d,m)}function o(u,c,h,d){return r("ddm",u,c,h,d)}function a(u,c,h,d,m){return t("dd",u,c,h,d,m)}function l(u,c,h,d){return r("dd",u,c,h,d)}e.geogToDms=n,e.dmsToGeog=i,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(T5||(T5={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=fe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=fe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=fe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(i,s,o,a,l,u,c){fe.ensureCache.prepare();let h=0;i&&(h=fe.getPointer(i));const d=Ry(o),m=fe.ensureFloat64(d),y=pI(s,hn.PE_MGRS_MAX),g=fe.ensureInt32(y),b=fe._pe_geog_to_mgrs_extended(h,s,m,a,l,u,g);if(b)for(let S=0;S<s;S++)c[S]=fe.UTF8ToString(y[S]);return b}function n(i,s,o,a,l){fe.ensureCache.prepare();let u=0;i&&(u=fe.getPointer(i));const c=o.map(y=>fe.ensureString(y)),h=fe.ensureInt32(c),d=fe.ensureFloat64(new Array(2*s)),m=fe._pe_mgrs_to_geog_extended(u,s,h,a,d);return m&&em(l,s,d),m}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=n}(I5||(I5={})),function(e){function t(n,i,s,o,a,l,u){fe.ensureCache.prepare();let c=0;n&&(c=fe.getPointer(n));const h=Ry(s),d=fe.ensureFloat64(h),m=pI(i,hn.PE_MGRS_MAX),y=fe.ensureInt32(m),g=fe._pe_geog_to_usng(c,i,d,o,a,l,y);if(g)for(let b=0;b<i;b++)u[b]=fe.UTF8ToString(m[b]);return g}function r(n,i,s,o){fe.ensureCache.prepare();let a=0;n&&(a=fe.getPointer(n));const l=s.map(d=>fe.ensureString(d)),u=fe.ensureInt32(l),c=fe.ensureFloat64(new Array(2*i)),h=fe._pe_usng_to_geog(a,i,u,c);return h&&em(o,i,c),h}e.geogToUsng=t,e.usngToGeog=r}(e6||(e6={})),function(e){function t(){e.PE_UTM_OPTS_NONE=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=fe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=fe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(i,s,o,a,l){fe.ensureCache.prepare();let u=0;i&&(u=fe.getPointer(i));const c=Ry(o),h=fe.ensureFloat64(c),d=pI(s,hn.PE_UTM_MAX),m=fe.ensureInt32(d),y=fe._pe_geog_to_utm(u,s,h,a,m);if(y)for(let g=0;g<s;g++)l[g]=fe.UTF8ToString(d[g]);return y}function n(i,s,o,a,l){fe.ensureCache.prepare();let u=0;i&&(u=fe.getPointer(i));const c=o.map(y=>fe.ensureString(y)),h=fe.ensureInt32(c),d=fe.ensureFloat64(new Array(2*s)),m=fe._pe_utm_to_geog(u,s,h,a,d);return m&&em(l,s,d),m}e.init=t,e.geogToUtm=r,e.utmToGeog=n}(A5||(A5={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=fe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=fe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=fe.PePCSInfo.prototype.PE_POLE_POINT}function n(i,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(i)&&(a=t.get(i),a[s]&&(o=a[s])),o||(o=fe.PePCSInfo.prototype.generate(i,s),a||(a=[],t.set(i,a)),a[s]=o),o}e.init=r,e.generate=n}(yE||(yE={})),function(e){function t(){return fe.PeVersion.prototype.version_string()}e.versionString=t}(t6||(t6={}));const wct=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return _5},get PeDefs(){return hn},get PeDouble(){return rae},get PeFactory(){return x5},get PeGCSExtent(){return nae},get PeGTTransformations(){return E5},get PeGTlistExtended(){return S5},get PeGTlistExtendedEntry(){return XD},get PeLineType(){return QD},get PeMath(){return KD},get PeNotationDms(){return T5},get PeNotationMgrs(){return I5},get PeNotationUsng(){return e6},get PeNotationUtm(){return A5},get PePCSInfo(){return yE},get PeVersion(){return t6},_init:iae,get _pe(){return fe},isLoaded:rR,isSupported:bct,load:eV},Symbol.toStringTag,{value:"Module"}));var kg;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(kg||(kg={}));let _;const Z={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(_=2e3;_<=2045;_++)Z[_]=0;for(_=2056;_<=2065;_++)Z[_]=0;for(_=2067;_<=2135;_++)Z[_]=0;for(_=2137;_<=2154;_++)Z[_]=0;for(_=2161;_<=2170;_++)Z[_]=0;for(_=2172;_<=2193;_++)Z[_]=0;for(_=2195;_<=2198;_++)Z[_]=0;for(_=2200;_<=2203;_++)Z[_]=0;for(_=2205;_<=2217;_++)Z[_]=0;for(_=2222;_<=2224;_++)Z[_]=1;for(_=2225;_<=2250;_++)Z[_]=2;for(_=2251;_<=2253;_++)Z[_]=1;for(_=2257;_<=2264;_++)Z[_]=2;for(_=2274;_<=2279;_++)Z[_]=2;for(_=2280;_<=2282;_++)Z[_]=1;for(_=2283;_<=2289;_++)Z[_]=2;for(_=2290;_<=2292;_++)Z[_]=0;for(_=2308;_<=2313;_++)Z[_]=0;for(_=2315;_<=2491;_++)Z[_]=0;for(_=2494;_<=2866;_++)Z[_]=0;for(_=2867;_<=2869;_++)Z[_]=1;for(_=2870;_<=2888;_++)Z[_]=2;for(_=2891;_<=2895;_++)Z[_]=2;for(_=2896;_<=2898;_++)Z[_]=1;for(_=2902;_<=2908;_++)Z[_]=2;for(_=2915;_<=2920;_++)Z[_]=2;for(_=2921;_<=2923;_++)Z[_]=1;for(_=2924;_<=2930;_++)Z[_]=2;for(_=2931;_<=2962;_++)Z[_]=0;for(_=2964;_<=2968;_++)Z[_]=2;for(_=2969;_<=2973;_++)Z[_]=0;for(_=2975;_<=2991;_++)Z[_]=0;for(_=2995;_<=3051;_++)Z[_]=0;for(_=3054;_<=3079;_++)Z[_]=0;for(_=3081;_<=3088;_++)Z[_]=0;for(_=3092;_<=3101;_++)Z[_]=0;for(_=3106;_<=3138;_++)Z[_]=0;for(_=3146;_<=3151;_++)Z[_]=0;for(_=3153;_<=3166;_++)Z[_]=0;for(_=3168;_<=3172;_++)Z[_]=0;for(_=3174;_<=3203;_++)Z[_]=0;for(_=3294;_<=3358;_++)Z[_]=0;for(_=3367;_<=3403;_++)Z[_]=0;for(_=3408;_<=3416;_++)Z[_]=0;for(_=3417;_<=3438;_++)Z[_]=2;for(_=3441;_<=3446;_++)Z[_]=2;for(_=3447;_<=3450;_++)Z[_]=0;for(_=3451;_<=3459;_++)Z[_]=2;for(_=3460;_<=3478;_++)Z[_]=0;for(_=3554;_<=3559;_++)Z[_]=0;for(_=3560;_<=3570;_++)Z[_]=2;for(_=3571;_<=3581;_++)Z[_]=0;for(_=3594;_<=3597;_++)Z[_]=0;for(_=3601;_<=3604;_++)Z[_]=0;for(_=3637;_<=3639;_++)Z[_]=0;for(_=3665;_<=3667;_++)Z[_]=0;for(_=3693;_<=3695;_++)Z[_]=0;for(_=3701;_<=3727;_++)Z[_]=0;for(_=3728;_<=3739;_++)Z[_]=2;for(_=3740;_<=3751;_++)Z[_]=0;for(_=3753;_<=3760;_++)Z[_]=2;for(_=3761;_<=3773;_++)Z[_]=0;for(_=3775;_<=3777;_++)Z[_]=0;for(_=3779;_<=3781;_++)Z[_]=0;for(_=3783;_<=3785;_++)Z[_]=0;for(_=3788;_<=3791;_++)Z[_]=0;for(_=3797;_<=3802;_++)Z[_]=0;for(_=3814;_<=3816;_++)Z[_]=0;for(_=3825;_<=3829;_++)Z[_]=0;for(_=3832;_<=3841;_++)Z[_]=0;for(_=3844;_<=3852;_++)Z[_]=0;for(_=3873;_<=3885;_++)Z[_]=0;for(_=3890;_<=3893;_++)Z[_]=0;for(_=3907;_<=3912;_++)Z[_]=0;for(_=3942;_<=3950;_++)Z[_]=0;for(_=3968;_<=3970;_++)Z[_]=0;for(_=3973;_<=3976;_++)Z[_]=0;for(_=3986;_<=3989;_++)Z[_]=0;for(_=3994;_<=3997;_++)Z[_]=0;for(_=4048;_<=4051;_++)Z[_]=0;for(_=4056;_<=4063;_++)Z[_]=0;for(_=4093;_<=4096;_++)Z[_]=0;for(_=4390;_<=4398;_++)Z[_]=0;for(_=4399;_<=4413;_++)Z[_]=2;for(_=4418;_<=4433;_++)Z[_]=2;for(_=4455;_<=4457;_++)Z[_]=2;for(_=4484;_<=4489;_++)Z[_]=0;for(_=4491;_<=4554;_++)Z[_]=0;for(_=4568;_<=4589;_++)Z[_]=0;for(_=4652;_<=4656;_++)Z[_]=0;for(_=4766;_<=4800;_++)Z[_]=0;for(_=5014;_<=5016;_++)Z[_]=0;for(_=5069;_<=5072;_++)Z[_]=0;for(_=5105;_<=5130;_++)Z[_]=0;for(_=5167;_<=5188;_++)Z[_]=0;for(_=5253;_<=5259;_++)Z[_]=0;for(_=5269;_<=5275;_++)Z[_]=0;for(_=5292;_<=5311;_++)Z[_]=0;for(_=5329;_<=5331;_++)Z[_]=0;for(_=5343;_<=5349;_++)Z[_]=0;for(_=5355;_<=5357;_++)Z[_]=0;for(_=5387;_<=5389;_++)Z[_]=0;for(_=5459;_<=5463;_++)Z[_]=0;for(_=5479;_<=5482;_++)Z[_]=0;for(_=5518;_<=5520;_++)Z[_]=0;for(_=5530;_<=5539;_++)Z[_]=0;for(_=5550;_<=5552;_++)Z[_]=0;for(_=5562;_<=5583;_++)Z[_]=0;for(_=5623;_<=5625;_++)Z[_]=2;for(_=5631;_<=5639;_++)Z[_]=0;for(_=5649;_<=5653;_++)Z[_]=0;for(_=5663;_<=5680;_++)Z[_]=0;for(_=5682;_<=5685;_++)Z[_]=0;for(_=5875;_<=5877;_++)Z[_]=0;for(_=5896;_<=5899;_++)Z[_]=0;for(_=5921;_<=5940;_++)Z[_]=0;for(_=6050;_<=6125;_++)Z[_]=0;for(_=6244;_<=6275;_++)Z[_]=0;for(_=6328;_<=6348;_++)Z[_]=0;for(_=6350;_<=6356;_++)Z[_]=0;for(_=6366;_<=6372;_++)Z[_]=0;for(_=6381;_<=6387;_++)Z[_]=0;for(_=6393;_<=6404;_++)Z[_]=0;for(_=6480;_<=6483;_++)Z[_]=0;for(_=6511;_<=6514;_++)Z[_]=0;for(_=6579;_<=6581;_++)Z[_]=0;for(_=6619;_<=6624;_++)Z[_]=0;for(_=6625;_<=6627;_++)Z[_]=2;for(_=6628;_<=6632;_++)Z[_]=0;for(_=6634;_<=6637;_++)Z[_]=0;for(_=6669;_<=6692;_++)Z[_]=0;for(_=6707;_<=6709;_++)Z[_]=0;for(_=6720;_<=6723;_++)Z[_]=0;for(_=6732;_<=6738;_++)Z[_]=0;for(_=6931;_<=6933;_++)Z[_]=0;for(_=6956;_<=6959;_++)Z[_]=0;for(_=7005;_<=7007;_++)Z[_]=0;for(_=7057;_<=7070;_++)Z[_]=2;for(_=7074;_<=7082;_++)Z[_]=0;for(_=7109;_<=7118;_++)Z[_]=0;for(_=7119;_<=7127;_++)Z[_]=1;for(_=7374;_<=7376;_++)Z[_]=0;for(_=7528;_<=7586;_++)Z[_]=0;for(_=7587;_<=7645;_++)Z[_]=2;for(_=7692;_<=7696;_++)Z[_]=0;for(_=7755;_<=7787;_++)Z[_]=0;for(_=7791;_<=7795;_++)Z[_]=0;for(_=7799;_<=7801;_++)Z[_]=0;for(_=7803;_<=7805;_++)Z[_]=0;for(_=7825;_<=7831;_++)Z[_]=0;for(_=7845;_<=7859;_++)Z[_]=0;for(_=8013;_<=8032;_++)Z[_]=0;for(_=8065;_<=8068;_++)Z[_]=1;for(_=8518;_<=8529;_++)Z[_]=2;for(_=8533;_<=8536;_++)Z[_]=2;for(_=8538;_<=8540;_++)Z[_]=2;for(_=8677;_<=8679;_++)Z[_]=0;for(_=8836;_<=8840;_++)Z[_]=0;for(_=8857;_<=8859;_++)Z[_]=0;for(_=8908;_<=8910;_++)Z[_]=0;for(_=9154;_<=9159;_++)Z[_]=0;for(_=9205;_<=9218;_++)Z[_]=0;for(_=9271;_<=9273;_++)Z[_]=0;for(_=9295;_<=9297;_++)Z[_]=0;for(_=9356;_<=9360;_++)Z[_]=0;for(_=9404;_<=9407;_++)Z[_]=0;for(_=9476;_<=9482;_++)Z[_]=0;for(_=9487;_<=9494;_++)Z[_]=0;for(_=9697;_<=9699;_++)Z[_]=0;for(_=9821;_<=9865;_++)Z[_]=0;for(_=10285;_<=10291;_++)Z[_]=0;for(_=10314;_<=10317;_++)Z[_]=0;for(_=10448;_<=10465;_++)Z[_]=0;for(_=10731;_<=10733;_++)Z[_]=0;for(_=11114;_<=11118;_++)Z[_]=0;for(_=20004;_<=20032;_++)Z[_]=0;for(_=20047;_<=20049;_++)Z[_]=0;for(_=20062;_<=20092;_++)Z[_]=0;for(_=20135;_<=20138;_++)Z[_]=0;for(_=20248;_<=20258;_++)Z[_]=0;for(_=20348;_<=20358;_++)Z[_]=0;for(_=20436;_<=20440;_++)Z[_]=0;for(_=20822;_<=20824;_++)Z[_]=0;for(_=20904;_<=20932;_++)Z[_]=0;for(_=20934;_<=20936;_++)Z[_]=0;for(_=21004;_<=21032;_++)Z[_]=0;for(_=21035;_<=21037;_++)Z[_]=0;for(_=21095;_<=21097;_++)Z[_]=0;for(_=21148;_<=21150;_++)Z[_]=0;for(_=21207;_<=21264;_++)Z[_]=0;for(_=21307;_<=21364;_++)Z[_]=0;for(_=21413;_<=21423;_++)Z[_]=0;for(_=21453;_<=21463;_++)Z[_]=0;for(_=21473;_<=21483;_++)Z[_]=0;for(_=21780;_<=21782;_++)Z[_]=0;for(_=21891;_<=21894;_++)Z[_]=0;for(_=21896;_<=21899;_++)Z[_]=0;for(_=22171;_<=22177;_++)Z[_]=0;for(_=22181;_<=22187;_++)Z[_]=0;for(_=22191;_<=22197;_++)Z[_]=0;for(_=22207;_<=22222;_++)Z[_]=0;for(_=22229;_<=22232;_++)Z[_]=0;for(_=22234;_<=22236;_++)Z[_]=0;for(_=22243;_<=22250;_++)Z[_]=0;for(_=22262;_<=22265;_++)Z[_]=0;for(_=22307;_<=22322;_++)Z[_]=0;for(_=22348;_<=22357;_++)Z[_]=0;for(_=22407;_<=22422;_++)Z[_]=0;for(_=22462;_<=22465;_++)Z[_]=0;for(_=22521;_<=22525;_++)Z[_]=0;for(_=22607;_<=22622;_++)Z[_]=0;for(_=22641;_<=22646;_++)Z[_]=0;for(_=22648;_<=22657;_++)Z[_]=0;for(_=22707;_<=22722;_++)Z[_]=0;for(_=22762;_<=22765;_++)Z[_]=0;for(_=22807;_<=22822;_++)Z[_]=0;for(_=22991;_<=22994;_++)Z[_]=0;for(_=23028;_<=23038;_++)Z[_]=0;for(_=23301;_<=23333;_++)Z[_]=2;for(_=23830;_<=23853;_++)Z[_]=0;for(_=23866;_<=23872;_++)Z[_]=0;for(_=23877;_<=23884;_++)Z[_]=0;for(_=23886;_<=23894;_++)Z[_]=0;for(_=23946;_<=23948;_++)Z[_]=0;for(_=24311;_<=24313;_++)Z[_]=0;for(_=24342;_<=24347;_++)Z[_]=0;for(_=24370;_<=24374;_++)Z[_]=10;for(_=24375;_<=24381;_++)Z[_]=0;for(_=24718;_<=24721;_++)Z[_]=0;for(_=24817;_<=24821;_++)Z[_]=0;for(_=24877;_<=24882;_++)Z[_]=0;for(_=24891;_<=24893;_++)Z[_]=0;for(_=25391;_<=25395;_++)Z[_]=0;for(_=25828;_<=25838;_++)Z[_]=0;for(_=26191;_<=26195;_++)Z[_]=0;for(_=26391;_<=26393;_++)Z[_]=0;for(_=26701;_<=26722;_++)Z[_]=0;for(_=26729;_<=26799;_++)Z[_]=2;for(_=26801;_<=26803;_++)Z[_]=2;for(_=26811;_<=26813;_++)Z[_]=2;for(_=26847;_<=26870;_++)Z[_]=2;for(_=26891;_<=26899;_++)Z[_]=0;for(_=26901;_<=26923;_++)Z[_]=0;for(_=26929;_<=26946;_++)Z[_]=0;for(_=26948;_<=26998;_++)Z[_]=0;for(_=27037;_<=27040;_++)Z[_]=0;for(_=27205;_<=27232;_++)Z[_]=0;for(_=27258;_<=27260;_++)Z[_]=0;for(_=27391;_<=27398;_++)Z[_]=0;for(_=27561;_<=27564;_++)Z[_]=0;for(_=27571;_<=27574;_++)Z[_]=0;for(_=27581;_<=27584;_++)Z[_]=0;for(_=27591;_<=27594;_++)Z[_]=0;for(_=27700;_<=27707;_++)Z[_]=0;for(_=28191;_<=28193;_++)Z[_]=0;for(_=28348;_<=28358;_++)Z[_]=0;for(_=28402;_<=28432;_++)Z[_]=0;for(_=28462;_<=28492;_++)Z[_]=0;for(_=29118;_<=29122;_++)Z[_]=0;for(_=29168;_<=29172;_++)Z[_]=0;for(_=29177;_<=29185;_++)Z[_]=0;for(_=29187;_<=29195;_++)Z[_]=0;for(_=29900;_<=29903;_++)Z[_]=0;for(_=30161;_<=30179;_++)Z[_]=0;for(_=30491;_<=30494;_++)Z[_]=0;for(_=30729;_<=30732;_++)Z[_]=0;for(_=31251;_<=31259;_++)Z[_]=0;for(_=31265;_<=31268;_++)Z[_]=0;for(_=31275;_<=31279;_++)Z[_]=0;for(_=31281;_<=31297;_++)Z[_]=0;for(_=31461;_<=31469;_++)Z[_]=0;for(_=31491;_<=31495;_++)Z[_]=0;for(_=31917;_<=31922;_++)Z[_]=0;for(_=31965;_<=32e3;_++)Z[_]=0;for(_=32001;_<=32003;_++)Z[_]=2;for(_=32005;_<=32031;_++)Z[_]=2;for(_=32033;_<=32060;_++)Z[_]=2;for(_=32064;_<=32067;_++)Z[_]=2;for(_=32074;_<=32077;_++)Z[_]=2;for(_=32081;_<=32086;_++)Z[_]=0;for(_=32107;_<=32130;_++)Z[_]=0;for(_=32133;_<=32159;_++)Z[_]=0;for(_=32164;_<=32167;_++)Z[_]=2;for(_=32180;_<=32199;_++)Z[_]=0;for(_=32201;_<=32260;_++)Z[_]=0;for(_=32301;_<=32360;_++)Z[_]=0;for(_=32401;_<=32460;_++)Z[_]=0;for(_=32501;_<=32560;_++)Z[_]=0;for(_=32601;_<=32662;_++)Z[_]=0;for(_=32664;_<=32667;_++)Z[_]=2;for(_=32701;_<=32761;_++)Z[_]=0;for(_=53001;_<=53004;_++)Z[_]=0;for(_=53008;_<=53019;_++)Z[_]=0;for(_=53021;_<=53032;_++)Z[_]=0;for(_=53034;_<=53037;_++)Z[_]=0;for(_=53042;_<=53046;_++)Z[_]=0;for(_=53074;_<=53080;_++)Z[_]=0;for(_=54001;_<=54004;_++)Z[_]=0;for(_=54008;_<=54019;_++)Z[_]=0;for(_=54021;_<=54032;_++)Z[_]=0;for(_=54034;_<=54037;_++)Z[_]=0;for(_=54042;_<=54046;_++)Z[_]=0;for(_=54048;_<=54053;_++)Z[_]=0;for(_=54074;_<=54080;_++)Z[_]=0;for(_=54098;_<=54101;_++)Z[_]=0;for(_=102001;_<=102040;_++)Z[_]=0;for(_=102042;_<=102063;_++)Z[_]=0;for(_=102065;_<=102067;_++)Z[_]=0;for(_=102070;_<=102117;_++)Z[_]=0;for(_=102122;_<=102216;_++)Z[_]=0;for(_=102221;_<=102377;_++)Z[_]=0;for(_=102382;_<=102388;_++)Z[_]=0;for(_=102389;_<=102398;_++)Z[_]=2;for(_=102399;_<=102444;_++)Z[_]=0;for(_=102445;_<=102447;_++)Z[_]=2;for(_=102448;_<=102458;_++)Z[_]=0;for(_=102459;_<=102468;_++)Z[_]=2;for(_=102469;_<=102499;_++)Z[_]=0;for(_=102500;_<=102519;_++)Z[_]=1;for(_=102520;_<=102524;_++)Z[_]=0;for(_=102525;_<=102529;_++)Z[_]=2;for(_=102530;_<=102588;_++)Z[_]=0;for(_=102590;_<=102598;_++)Z[_]=0;for(_=102601;_<=102603;_++)Z[_]=0;for(_=102605;_<=102628;_++)Z[_]=0;for(_=102629;_<=102646;_++)Z[_]=2;for(_=102648;_<=102700;_++)Z[_]=2;for(_=102701;_<=102703;_++)Z[_]=0;for(_=102707;_<=102730;_++)Z[_]=2;for(_=102733;_<=102758;_++)Z[_]=2;for(_=102767;_<=102900;_++)Z[_]=0;for(_=102901;_<=102933;_++)Z[_]=2;for(_=102934;_<=102950;_++)Z[_]=13;for(_=102951;_<=102963;_++)Z[_]=0;for(_=102965;_<=102969;_++)Z[_]=0;for(_=102971;_<=102973;_++)Z[_]=0;for(_=102975;_<=102989;_++)Z[_]=0;for(_=102990;_<=102992;_++)Z[_]=1;for(_=102997;_<=103002;_++)Z[_]=0;for(_=103003;_<=103008;_++)Z[_]=2;for(_=103009;_<=103011;_++)Z[_]=0;for(_=103012;_<=103014;_++)Z[_]=2;for(_=103019;_<=103021;_++)Z[_]=0;for(_=103022;_<=103024;_++)Z[_]=2;for(_=103029;_<=103031;_++)Z[_]=0;for(_=103032;_<=103034;_++)Z[_]=2;for(_=103065;_<=103068;_++)Z[_]=0;for(_=103074;_<=103076;_++)Z[_]=0;for(_=103077;_<=103079;_++)Z[_]=1;for(_=103080;_<=103082;_++)Z[_]=0;for(_=103083;_<=103085;_++)Z[_]=2;for(_=103090;_<=103093;_++)Z[_]=0;for(_=103097;_<=103099;_++)Z[_]=0;for(_=103100;_<=103102;_++)Z[_]=2;for(_=103107;_<=103109;_++)Z[_]=0;for(_=103110;_<=103112;_++)Z[_]=2;for(_=103113;_<=103116;_++)Z[_]=0;for(_=103117;_<=103120;_++)Z[_]=2;for(_=103153;_<=103157;_++)Z[_]=0;for(_=103158;_<=103162;_++)Z[_]=2;for(_=103163;_<=103165;_++)Z[_]=0;for(_=103166;_<=103168;_++)Z[_]=1;for(_=103169;_<=103171;_++)Z[_]=2;for(_=103186;_<=103188;_++)Z[_]=0;for(_=103189;_<=103191;_++)Z[_]=2;for(_=103192;_<=103195;_++)Z[_]=0;for(_=103196;_<=103199;_++)Z[_]=2;for(_=103200;_<=103224;_++)Z[_]=0;for(_=103225;_<=103227;_++)Z[_]=1;for(_=103232;_<=103237;_++)Z[_]=0;for(_=103238;_<=103243;_++)Z[_]=2;for(_=103244;_<=103246;_++)Z[_]=0;for(_=103247;_<=103249;_++)Z[_]=2;for(_=103254;_<=103256;_++)Z[_]=0;for(_=103257;_<=103259;_++)Z[_]=2;for(_=103264;_<=103266;_++)Z[_]=0;for(_=103267;_<=103269;_++)Z[_]=2;for(_=103300;_<=103375;_++)Z[_]=0;for(_=103381;_<=103383;_++)Z[_]=0;for(_=103384;_<=103386;_++)Z[_]=1;for(_=103387;_<=103389;_++)Z[_]=0;for(_=103390;_<=103392;_++)Z[_]=2;for(_=103397;_<=103399;_++)Z[_]=0;for(_=103400;_<=103471;_++)Z[_]=2;for(_=103476;_<=103478;_++)Z[_]=0;for(_=103479;_<=103481;_++)Z[_]=2;for(_=103486;_<=103488;_++)Z[_]=0;for(_=103489;_<=103491;_++)Z[_]=2;for(_=103492;_<=103495;_++)Z[_]=0;for(_=103496;_<=103499;_++)Z[_]=2;for(_=103528;_<=103543;_++)Z[_]=0;for(_=103544;_<=103548;_++)Z[_]=2;for(_=103549;_<=103551;_++)Z[_]=0;for(_=103552;_<=103554;_++)Z[_]=1;for(_=103555;_<=103557;_++)Z[_]=2;for(_=103558;_<=103560;_++)Z[_]=0;for(_=103571;_<=103573;_++)Z[_]=0;for(_=103574;_<=103576;_++)Z[_]=2;for(_=103577;_<=103580;_++)Z[_]=0;for(_=103581;_<=103583;_++)Z[_]=2;for(_=103595;_<=103694;_++)Z[_]=0;for(_=103696;_<=103699;_++)Z[_]=0;for(_=103700;_<=103793;_++)Z[_]=2;for(_=103794;_<=103890;_++)Z[_]=0;for(_=103891;_<=103896;_++)Z[_]=2;for(_=103900;_<=103971;_++)Z[_]=2;for(_=103972;_<=103977;_++)Z[_]=0;for(_=112e3;_<=112101;_++)Z[_]=0;const sae=[102100,102113,3857,3785,900913],_ct=[104905,104971],xct=[4326,...sae,..._ct],gE=[-20037508342788905e-9,20037508342788905e-9],r6=[-20037508342787e-6,20037508342787e-6],KN={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:gE,origin:r6,dx:1e-5},oae={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:gE,origin:r6,dx:1e-5},102100:KN,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:gE,origin:r6,dx:1e-5},3857:KN,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:KN};function gn(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,n=t.wkid;if(r!=null||n!=null){if(r===n||Va(e)&&Va(t))return!0;const o=e.latestWkid;if(o!=null&&n===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let i,s;return e.wkt2&&t.wkt2?(i=e.wkt2,s=t.wkt2):e.wkt&&t.wkt&&(i=e.wkt,s=t.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function Bs(e){const t=e?.wkid;return t!=null&&t>=2e3&&oae[t]||null}function md(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const n=e.wkt||e.wkt2;return JSON.stringify(n?r?{wkt:n,vcsWkid:r}:{wkt:n}:{})}function u_(e){if(!xo(e))return!1;const{wkid:t}=e;if(t)return Z[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function aae(e){return!(tV(e)||rV(e))}function Im(e){return e?.wkid===4326}function Sct(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function n6(e){return e?.wkid===kg.CGCS2000}function Va(e){const t=e?.wkid;return t!=null&&t>=2e3&&sae.includes(t)}function lae(e){return e?.wkid===32662}function BT(e){return e===kg.GCSMARS2000||e===kg.GCSMARS2000_SPHERE}function tV(e){return BT(e?.wkid)}function VT(e){return e===kg.GCSMOON2000}function rV(e){return VT(e?.wkid)}function uae(e){const t=e?.wkid;return t!=null&&t>=2e3&&xct.includes(t)}function xo(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const vE={wkid:4326,wkt:CT(oae[4326].wkTemplate,{Central_Meridian:"0.0"})},nV={wkid:102100,latestWkid:3857},Ect={wkid:32662};function iV(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const cae=iV(Fn),nR=iV(yh),iR=iV(Tm),hae={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${Fn.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Tct=nR.wkt.toUpperCase(),Ict=iR.wkt.toUpperCase();function pae(e){if(e!=null&&xo(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(BT(t))return yh;const n=r?.toUpperCase();if(r&&n===Tct)return yh;if(VT(t)||n&&n===Ict)return Tm}return Fn}function Act(e){return BT(e)?yh:VT(e)?Tm:Fn}function bE(e){return gn(e,cae)}function Am(e){return bE(e)||gn(e,nR)||gn(e,iR)}const sV=39.37,Mct=Fn.radius*Math.PI/200,dae=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,ig=Z,fae=/UNIT\[([^\]]+)]/i,Cct=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),kct=Mn()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Tc=e=>e*e,Hd=e=>e*e*e,wE={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Tc(.001)},"square-centimeters":{inBaseUnits:Tc(.01)},"square-decimeters":{inBaseUnits:Tc(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Tc(1e3)},"square-inches":{inBaseUnits:Tc(.0254)},"square-feet":{inBaseUnits:Tc(.3048)},"square-yards":{inBaseUnits:Tc(.9144)},"square-miles":{inBaseUnits:Tc(1609.344)},"square-us-feet":{inBaseUnits:Tc(1200/3937)},acres:{inBaseUnits:.0015625*Tc(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Hd(.001)},"cubic-centimeters":{inBaseUnits:1e3*Hd(.01)},"cubic-decimeters":{inBaseUnits:1e3*Hd(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Hd(1e3)},"cubic-inches":{inBaseUnits:1e3*Hd(.0254)},"cubic-feet":{inBaseUnits:1e3*Hd(.3048)},"cubic-yards":{inBaseUnits:1e3*Hd(.9144)},"cubic-miles":{inBaseUnits:1e3*Hd(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Rct=(()=>{const e={};for(const t in wE)for(const r in wE[t].units)e[r]=t;return e})();function Oct(e,t,r){return e*wE[r].units[t].inBaseUnits}function Nct(e,t,r){return e/wE[r].units[t].inBaseUnits}const mae=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],Lct=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function M5(e){const t=Rct[e];if(!t)throw new Error("unknown type");return t}function bZ(e,t=null){return t=t||M5(e),wE[t].baseUnit===e}function $i(e,t,r){if(t===r)return e;const n=M5(t);if(n!==M5(r))throw new Error("incompatible units");const i=bZ(t,n)?e:Oct(e,t,n);return bZ(r,n)?i:Nct(i,r,n)}function yae(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function Pct(e){return yae(e)}function Dct(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function Fct(e,t){const r=$i(e,t,"meters");return Math.abs(r)<3e3?"meters":"kilometers"}function jct(e,t){const r=$i(e,t,"meters");return Math.abs(r)<1e5?"meters":"kilometers"}function Uct(e,t){const r=$i(e,t,"feet");return Math.abs(r)<1e3?"feet":"miles"}function Bct(e,t){const r=$i(e,t,"feet");return Math.abs(r)<1e5?"feet":"miles"}function Vct(e,t){const r=$i(e,t,"square-meters");return Math.abs(r)<3e6?"square-meters":"square-kilometers"}function Gct(e,t){const r=$i(e,t,"square-feet");return Math.abs(r)<1e6?"square-feet":"square-miles"}function gae(e,t,r){return $i(e,t,"meters")/(r*Math.PI/180)}function vae(e){return kct.fromJSON(e.toLowerCase())||null}function Rg(e){if(e!=null&&!aae(e))return 1;const t=wc(e);return t>1e5?1:t}function bae(e){return wc(e)>=pae(e).metersPerDegree?"meters":c_(e)}function wc(e,t=Fn.metersPerDegree){return wae(e,!0)??t}function wae(e,t=!1){const r=e?.wkid??null,n=e?.wkt2??e?.wkt??null;let i=null;if(r){if(BT(r))return yh.metersPerDegree;if(VT(r))return Tm.metersPerDegree;i=ig.values[ig[r]],!i&&t&&Cct.has(r)&&(i=Mct)}else n&&(oV(n)?i=wZ(dae.exec(n),i):xae(n)&&(i=wZ(fae.exec(n),i)));return i}function zct(e){return u_(e)?1:wc(e)}function wZ(e,t){return e?.[1]?_ae(e[1]):t}function _ae(e){return parseFloat(e.split(",")[1])}function c_(e){const t=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let n=null;if(t)n=ig.units[ig[t]];else if(r){const i=oV(r)?dae:xae(r)?fae:null;if(i){const s=i.exec(r);s?.[1]&&(n=Zct(s[1]))}}return n!=null?vae(n):null}function $ct(e){const t=c_(e);return t!=null&&mae.includes(t)?t:null}function qct(e){const t=bae(e);return t!=null&&mae.includes(t)?t:null}function Hct(e){const t=c_(e);return t==null?null:Lct.get(t)}function xae(e){return/^GEOCCS/i.test(e)}function oV(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Wct=1e-7;function Zct(e){let t=/[\\"']{1}([^\\"']+)/.exec(e)?.[1];if(!t||!ig.units.includes(t)){const r=_ae(e);t=null;const n=ig.values;for(let i=0;i<n.length;++i)if(Math.abs(r-n[i])<Wct){t=ig.units[i];break}}return t}function Jct(e){const t=c_(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Yct={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Xct={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Qct={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},_E=Mn()(Yct),yd=Mn()(Xct),C5=Mn()(Qct);var Cc;let Fr=Cc=class extends we{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Cc.WebMercator;if(e?.wkid===4326)return Cc.WGS84;const t=new Cc;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Im(this)}get isWebMercator(){return Va(this)}get isGeographic(){return u_(this)}get isWrappable(){return uae(this)}get metersPerUnit(){return wc(this)}get unit(){return c_(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Cc.WGS84)return new Cc(vE);if(this===Cc.WebMercator)return new Cc(nV);const e=new Cc;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=se(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:n}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||n?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):r?i.id===t&&i.referenceServiceName===r:i.id===t}return gn(this,e)}toJSON(e){return this.write(void 0,e)}};Fr.GCS_NAD_1927=null,Fr.WGS84=null,Fr.WebMercator=null,Fr.PlateCarree=null,p([f({readOnly:!0})],Fr.prototype,"isWGS84",null),p([f({readOnly:!0})],Fr.prototype,"isWebMercator",null),p([f({readOnly:!0})],Fr.prototype,"isGeographic",null),p([f({readOnly:!0})],Fr.prototype,"isWrappable",null),p([f({type:Ft,json:{write:!0}})],Fr.prototype,"latestWkid",void 0),p([f({readOnly:!0})],Fr.prototype,"metersPerUnit",null),p([f({readOnly:!0})],Fr.prototype,"unit",null),p([f({type:Ft,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Fr.prototype,"wkid",void 0),p([f({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Fr.prototype,"wkt",void 0),p([Re("wkt"),Re("web-scene","wkt")],Fr.prototype,"writeWkt",null),p([f({type:String,json:{write:!1}})],Fr.prototype,"wkt2",void 0),p([f({type:Ft,json:{write:!0}})],Fr.prototype,"vcsWkid",void 0),p([f({type:Ft,json:{write:!0}})],Fr.prototype,"latestVcsWkid",void 0),p([f()],Fr.prototype,"imageCoordinateSystem",void 0),Fr=Cc=p([W("esri.geometry.SpatialReference")],Fr),Fr.prototype.toJSON.isDefaultToJSON=!0,Fr.GCS_NAD_1927=mt.freeze(new Fr({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Fr.WGS84=mt.freeze(new Fr(vE)),Fr.WebMercator=mt.freeze(new Fr(nV)),Fr.PlateCarree=mt.freeze(new Fr(Ect));const Ke=Fr;function Ee(e,t,r){let n,i;return t===void 0||Array.isArray(t)?(i=e,r=t,n=[void 0]):(i=t,n=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;n.forEach(l=>{const u=DB(s,l,i);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],r&&(u.read.source=(u.read.source||[]).concat(r))})}}let kc=class extends we{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ke.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Ke)return e;if(e!=null){const r=new Ke;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};p([f()],kc.prototype,"type",void 0),p([f({readOnly:!0})],kc.prototype,"cache",null),p([f({readOnly:!0})],kc.prototype,"extent",null),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],kc.prototype,"hasM",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],kc.prototype,"hasZ",void 0),p([f({type:Ke,json:{write:!0},value:Ke.WGS84})],kc.prototype,"spatialReference",void 0),p([Ee("spatialReference")],kc.prototype,"readSpatialReference",null),kc=p([W("esri.geometry.Geometry")],kc);const _c=kc,Kct=Object.prototype.toString;function eht(e){const t="__accessorMetadata__"in e?Nr(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return tht.apply(this,r)}}function tht(e,t,r,n){OT(e,t).cast=n}function rht(e){return(t,r)=>{OT(t,e).cast=t[r]}}function ur(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&Kct.call(e[0])==="[object Function]"?eht(e[0]):e.length===1&&typeof e[0]=="string"?rht(e[0]):void 0}const nht=57.29577951308232,iht=.017453292519943;function _Z(e){return e*nht}function xZ(e){return e*iht}function sht(e){return Math.PI/2-2*Math.atan(Math.exp(-e/Fn.radius))}function i6(e){return e.wkid!=null||e.wkt!=null}const eL=[0,0];function k5(e,t,r,n,i){const s=e,o=i;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,eL,n);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,eL,n),[o.xmax,o.ymax]=t(s.xmax,s.ymax,eL,n);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let c=0;c<a.length;c++){const h=a[c];u=[],l.push(u);for(let d=0;d<h.length;d++)u.push(t(h[d][0],h[d][1],[0,0],n)),h[d].length>2&&u[d].push(h[d][2]),h[d].length>3&&u[d].push(h[d][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],n),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return i}function xb(e,t){const r=e&&(i6(e)?e:e.spatialReference),n=t&&(i6(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!n)&&(!!gn(n,r)||Va(n)&&Im(r)||Va(r)&&Im(n))}function GT(e,t){if(e==null)return null;const r=e.spatialReference,n=t&&(i6(t)?t:t.spatialReference);return xb(r,n)?gn(r,n)?se(e):Va(n)?k5(e,om,Ke.WebMercator,!1,se(e)):Im(n)?k5(e,zT,Ke.WGS84,!1,se(e)):null:null}function om(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const n=xZ(t);return r[0]=xZ(e)*Fn.radius,r[1]=Fn.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),r}function zT(e,t,r=[0,0],n=!1){if(e===gE[0])r[0]=-180;else if(e===gE[1])r[0]=180;else{const i=_Z(e/Fn.radius);r[0]=n?i:i-360*Math.floor((i+180)/360)}return r[1]=_Z(Math.PI/2-2*Math.atan(Math.exp(-t/Fn.radius))),r}function ym(e,t=!1,r=se(e)){return k5(e,om,Ke.WebMercator,t,r)}function zy(e,t=!1,r=se(e)){return k5(e,zT,Ke.WGS84,t,r)}function Sae(e,t){const r=e.x-t.x,n=e.y-t.y,i=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+n*n+i*i)}function oht(e){return aV(e,Eae)?.[0]??null}function aht(e){return aV(e,Eae)?.[1]??null}function aV({x:e,y:t,spatialReference:r},n=[0,0]){if(r){if(Va(r))return zT(e,t,n);if(u_(r))return n[0]=e,n[1]=t,n}return null}const Eae=[0,0];var rM;const tL=[0,0];function SZ(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Lo=rM=class extends _c{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",mt.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,n,i){let s;if(Array.isArray(e))s=e,i=t,e=s[0],t=s[1],r=s[2],n=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,n=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Ke(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Pe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Pe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i?.isWebMercator){const a=om(s.longitude,s.latitude,tL);e=a[0],t=a[1]}}}else SZ(r)?(i=r,r=null):SZ(n)&&(i=n,n=null);const o={x:e,y:t};return o.x==null&&o.y!=null?Pe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Pe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),r!=null&&(o.z=r),n!=null&&(o.m=n),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return aht(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",om(r,e,tL)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return oht(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",om(e,t,tL)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new rM;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return rM.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:n,m:i,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:c}=e;if(!s.equals(c))if(s.isWebMercator&&c.isWGS84)[l,u]=om(l,u),c=s;else{if(!s.isWGS84||!c.isWebMercator)return!1;[l,u]=zT(l,u),c=s}return t===l&&r===u&&n===o&&i===a&&s.wkid===c.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Bs(this.spatialReference);if(!e)return this;let t=this.x;const[r,n]=e.valid,i=2*n;let s;return t>n?(s=Math.ceil(Math.abs(t-n)/i),t-=s*i):t<r&&(s=Math.ceil(Math.abs(t-r)/i),t+=s*i),this._set("x",t),this}distance(e){return Sae(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};p([f({readOnly:!0})],Lo.prototype,"cache",null),p([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Lo.prototype,"hasM",null),p([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Lo.prototype,"hasZ",null),p([f({type:Number})],Lo.prototype,"latitude",null),p([f({type:Number})],Lo.prototype,"longitude",null),p([f({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ur(e=>isNaN(e)?e:Ds(e))],Lo.prototype,"x",void 0),p([Re("x")],Lo.prototype,"writeX",null),p([Ee("x")],Lo.prototype,"readX",null),p([f({type:Number,json:{write:!0}})],Lo.prototype,"y",void 0),p([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Lo.prototype,"z",void 0),p([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Lo.prototype,"m",void 0),Lo=rM=p([W("esri.geometry.Point")],Lo),Lo.prototype.toJSON.isDefaultToJSON=!0;const it=Lo,rL=[0,0];function h_(e,t){return t!=null&&Bo(e,t.x,t.y,t.z)}function lht(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!iw(e,r))return!1;return!0}function uht(e,t){const{xmin:r,ymin:n,zmin:i,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Bo(e,r,n,i)&&Bo(e,r,o,i)&&Bo(e,s,o,i)&&Bo(e,s,n,i)&&Bo(e,r,n,a)&&Bo(e,r,o,a)&&Bo(e,s,o,a)&&Bo(e,s,n,a):Bo(e,r,n)&&Bo(e,r,o)&&Bo(e,s,o)&&Bo(e,s,n)}function iw(e,t){return Bo(e,t[0],t[1])}function cht(e,t){return Bo(e,t[0],t[1],t[2])}function Bo(e,t,r,n){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(n==null||!e.hasZ||n>=e.zmin&&n<=e.zmax)}function lV(e,t){return rL[1]=t.y,rL[0]=t.x,hht(e,rL)}function hht(e,t){return sR(e.rings,t)}function sR(e,t){if(!e)return!1;if(pht(e))return EZ(!1,e,t);let r=!1;for(let n=0,i=e.length;n<i;n++)r=EZ(r,e[n],t);return r}function pht(e){return!Array.isArray(e[0][0])}function EZ(e,t,r){const[n,i]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,c]=t[a],[h,d]=t[o];(c<i&&d>=i||d<i&&c>=i)&&u+(i-c)/(d-c)*(h-u)<n&&(s=!s)}return s}function dht(e,t){return h_(e,t)}function Tae(e,t){const r=e.hasZ&&t.hasZ;let n,i,s;if(e.xmin<=t.xmin){if(n=t.xmin,e.xmax<n)return!1}else if(n=e.xmin,t.xmax<n)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function fht(e,t){const{points:r,hasZ:n}=t,i=n?cht:iw;for(const s of r)if(i(e,s))return!0;return!1}const Og=[0,0],Ng=[0,0],Lg=[0,0],Pg=[0,0],mht=[Og,Ng,Lg,Pg],Iae=[[Lg,Og],[Og,Ng],[Ng,Pg],[Pg,Lg]];function Aae(e,t){return yht(e,t.rings)}function yht(e,t){Og[0]=e.xmin,Og[1]=e.ymax,Ng[0]=e.xmax,Ng[1]=e.ymax,Lg[0]=e.xmin,Lg[1]=e.ymin,Pg[0]=e.xmax,Pg[1]=e.ymin;for(const r of mht)if(sR(t,r))return!0;for(const r of t){if(!r.length)continue;let n=r[0];if(iw(e,n))return!0;for(let i=1;i<r.length;i++){const s=r[i];if(iw(e,s)||Mae(n,s,Iae))return!0;n=s}}return!1}function ght(e,t){Og[0]=e.xmin,Og[1]=e.ymax,Ng[0]=e.xmax,Ng[1]=e.ymax,Lg[0]=e.xmin,Lg[1]=e.ymin,Pg[0]=e.xmax,Pg[1]=e.ymin;const r=t.paths;for(const n of r){if(!r.length)continue;let i=n[0];if(iw(e,i))return!0;for(let s=1;s<n.length;s++){const o=n[s];if(iw(e,o)||Mae(i,o,Iae))return!0;i=o}}return!1}const as=[0,0];function vht(e){for(let t=0;t<e.length;t++){const r=e[t];for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],c=e[a][l+1];if(R5(s,o,u,c,as)&&!(as[0]===s[0]&&as[1]===s[1]||as[0]===u[0]&&as[1]===u[1]||as[0]===o[0]&&as[1]===o[1]||as[0]===c[0]&&as[1]===c[1]))return!0}}const n=r.length;if(!(n<=4))for(let i=0;i<n-3;i++){let s=n-1;i===0&&(s=n-2);const o=r[i],a=r[i+1];for(let l=i+2;l<s;l++){const u=r[l],c=r[l+1];if(R5(o,a,u,c,as)&&!(as[0]===o[0]&&as[1]===o[1]||as[0]===u[0]&&as[1]===u[1]||as[0]===a[0]&&as[1]===a[1]||as[0]===c[0]&&as[1]===c[1]))return!0}}}return!1}function Mae(e,t,r){for(let n=0;n<r.length;n++)if(R5(e,t,r[n][0],r[n][1]))return!0;return!1}function R5(e,t,r,n,i){const[s,o]=e,[a,l]=t,[u,c]=r,[h,d]=n,m=h-u,y=s-u,g=a-s,b=d-c,S=o-c,E=l-o,x=b*g-m*E;if(x===0)return!1;const w=(m*S-b*y)/x,T=(g*S-E*y)/x;return w>=0&&w<=1&&T>=0&&T<=1&&(i&&(i[0]=s+w*(a-s),i[1]=o+w*(l-o)),!0)}function Cae(e){switch(e){case"esriGeometryEnvelope":case"extent":return Tae;case"esriGeometryMultipoint":case"multipoint":return fht;case"esriGeometryPoint":case"point":return dht;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return Aae;case"esriGeometryPolyline":case"polyline":return ght}}var xl;function bht(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Wd(e,t,r){return t==null?r:r==null?t:e(t,r)}let Bi=xl=class extends _c{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,n,i){return bht(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Ke.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:n,spatialReference:i??Ke.WGS84}}static fromBounds(e,t){return new xl({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new xl({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new it({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new xl;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&xb(t,r)&&(e=t.isWebMercator?ym(e):zy(e,!0)),e.type==="point"?h_(this,e):e.type==="extent"&&uht(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&xb(t,r)&&(e=t.isWebMercator?ym(e):zy(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,n=this.height*t;if(this.xmin+=r,this.ymin+=n,this.xmax-=r,this.ymax-=n,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!gn(t,r)&&xb(t,r)&&(e=t.isWebMercator?ym(e):zy(e,!0)),Cae(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Wd(Math.min,this.zmin,e.zmin),this.zmax=Wd(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Wd(Math.min,this.mmin,e.mmin),this.mmax=Wd(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Wd(Math.max,this.zmin,e.zmin),this.zmax=Wd(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Wd(Math.max,this.mmin,e.mmin),this.mmax=Wd(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Bs(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const n=t.isWebMercator?zy(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(n.x=nL(n.x,e).x),this.spatialReference=new Ke(CT((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(e){let t=null;const[r,n]=e.valid,i=this.xmin,s=this.xmax;return i>=r&&i<=n&&s>=r&&s<=n||(t=this.center),t}_normalize(e,t,r){const n=this.spatialReference;if(!n)return this;const i=r??Bs(n);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const c=(l.zmax-l.zmin)/2;for(let h=0;h<u.length;h++)u[h].push(c)}if(a){const c=(l.mmax-l.mmin)/2;for(let h=0;h<u.length;h++)u[h].push(c)}return u}),hasZ:o,hasM:a,spatialReference:n}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let c;e=e||Bs(o);const[h,d]=e.valid;c=nL(this.xmin,e);const m=c.x,y=c.frameId;c=nL(this.xmax,e);const g=c.x,b=c.frameId,S=m===g&&a>0;if(a>2*d){const E=new xl(l<u?m:g,i,d,s,o),x=new xl(h,i,l<u?g:m,s,o),w=new xl(0,i,d,s,o),T=new xl(h,i,0,s,o),I=[],M=[];E.contains(w)&&I.push(y),E.contains(T)&&M.push(y),x.contains(w)&&I.push(b),x.contains(T)&&M.push(b);for(let C=y+1;C<b;C++)I.push(C),M.push(C);t.push({extent:E,frameIds:[y]},{extent:x,frameIds:[b]},{extent:w,frameIds:I},{extent:T,frameIds:M})}else m>g||S?t.push({extent:new xl(m,i,d,s,o),frameIds:[y]},{extent:new xl(h,i,g,s,o),frameIds:[b]}):t.push({extent:new xl(m,i,g,s,o),frameIds:[y]});this.cache._parts=t}const r=this.hasZ,n=this.hasM;if(r||n){const i={};r&&(i.zmin=this.zmin,i.zmax=this.zmax),n&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(i)}return t}};function nL(e,t){const[r,n]=t.valid,i=2*n;let s,o=0;return e>n?(s=Math.ceil(Math.abs(e-n)/i),e-=s*i,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/i),e+=s*i,o=-s),{x:e,frameId:o}}p([f({readOnly:!0})],Bi.prototype,"cache",null),p([f({readOnly:!0})],Bi.prototype,"center",null),p([f({readOnly:!0})],Bi.prototype,"extent",null),p([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Bi.prototype,"hasM",null),p([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Bi.prototype,"hasZ",null),p([f({readOnly:!0})],Bi.prototype,"height",null),p([f({readOnly:!0})],Bi.prototype,"width",null),p([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Bi.prototype,"xmin",void 0),p([f({type:Number,json:{write:!0}})],Bi.prototype,"ymin",void 0),p([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Bi.prototype,"mmin",void 0),p([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Bi.prototype,"zmin",void 0),p([f({type:Number,json:{write:!0}})],Bi.prototype,"xmax",void 0),p([f({type:Number,json:{write:!0}})],Bi.prototype,"ymax",void 0),p([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Bi.prototype,"mmax",void 0),p([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Bi.prototype,"zmax",void 0),Bi=xl=p([W("esri.geometry.Extent")],Bi),Bi.prototype.toJSON.isDefaultToJSON=!0;const jt=Bi;let vS;const wht=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,s6=globalThis.document?.documentElement;function kae(){const e=s6?.getAttribute("lang"),t=globalThis.navigator?.language;return wht??e??t??"en"}function Xo(){return vS===void 0&&(vS=kae()),vS}function Rae(e=Xo()){return/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e)?.[1].toLowerCase()}const nM=[];function Oae(e){return nM.push(e),gr(()=>nM.splice(nM.indexOf(e),1))}const iM=[];function uV(e){return iM.push(e),gr(()=>iM.splice(iM.indexOf(e),1))}function TZ(){const e=kae();vS!==e&&([...iM].forEach(t=>t(e)),vS=e,[...nM].forEach(t=>t(e)))}globalThis.addEventListener?.("languagechange",TZ),s6&&new MutationObserver(()=>{TZ()}).observe(s6,{attributeFilter:["lang"]});let dI;function _ht(e){return dI&&!dI.destroyed||(dI=e()),dI}var o6;const xht=new Pt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Sl=o6=class extends mt{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new o6({categories:this.categories?se(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let n="";if(this.extent){const o=GT(this.extent,Ke.WGS84);o!=null&&(n=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const s={categories:r,bbox:n,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>xht.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};p([f()],Sl.prototype,"categories",void 0),p([f()],Sl.prototype,"disableExtraQuery",void 0),p([f({type:jt})],Sl.prototype,"extent",void 0),p([f()],Sl.prototype,"filter",void 0),p([f()],Sl.prototype,"num",void 0),p([f()],Sl.prototype,"query",void 0),p([f()],Sl.prototype,"sortField",void 0),p([f()],Sl.prototype,"sortOrder",null),p([f()],Sl.prototype,"start",void 0),Sl=o6=p([W("esri.portal.PortalQueryParams")],Sl);const Hu=Sl;var a6;let Ii=a6=class extends we{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(n=>n.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new ie("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new a6({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=Nr(Hu,e);const n=this.portal;return parseFloat(n.currentVersion)>5?(r=r||new Hu,n.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Hu,r.query="group:"+this.id+(r.query?" "+r.query:""),n.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(n=>{const i=n.contentCategorySetsGroupQuery;if(i){const s=new Hu({disableExtraQuery:!0,num:1,query:i});return r.queryGroups(s,t)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(n=>{if(n.total){const i=n.results[0],s=new Hu({num:1,query:`typekeywords:"${e}"`});return i.queryItems(s,t)}throw new ie("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(n=>n.total?n.results[0].fetchData("json",t).then(i=>{const s=i?.categorySchema;return s?.length?s:[]}):[])}};p([f()],Ii.prototype,"access",void 0),p([f({type:Date})],Ii.prototype,"created",void 0),p([f()],Ii.prototype,"description",void 0),p([f()],Ii.prototype,"id",void 0),p([f()],Ii.prototype,"isInvitationOnly",void 0),p([f({type:Date})],Ii.prototype,"modified",void 0),p([f()],Ii.prototype,"owner",void 0),p([f()],Ii.prototype,"portal",void 0),p([f()],Ii.prototype,"snippet",void 0),p([f()],Ii.prototype,"sortField",void 0),p([f()],Ii.prototype,"sortOrder",void 0),p([f()],Ii.prototype,"sourceJSON",void 0),p([f()],Ii.prototype,"tags",void 0),p([f()],Ii.prototype,"thumbnail",void 0),p([f({readOnly:!0})],Ii.prototype,"thumbnailUrl",null),p([f()],Ii.prototype,"title",void 0),p([f({readOnly:!0})],Ii.prototype,"url",null),Ii=a6=p([W("esri.portal.PortalGroup")],Ii);const l6=Ii;let P0=class extends mt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};p([f()],P0.prototype,"nextQueryParams",void 0),p([f()],P0.prototype,"queryParams",void 0),p([f()],P0.prototype,"results",void 0),p([f()],P0.prototype,"total",void 0),P0=p([W("esri.portal.PortalQueryResult")],P0);const Sht=P0;let Qh=class extends we{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new ie("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};p([f({type:Date})],Qh.prototype,"created",void 0),p([f()],Qh.prototype,"id",void 0),p([f()],Qh.prototype,"portal",void 0),p([f()],Qh.prototype,"title",void 0),p([f({readOnly:!0})],Qh.prototype,"url",null),p([f()],Qh.prototype,"username",void 0),Qh=p([W("esri.portal.PortalFolder")],Qh);const Eht=Qh;var u6;let en=u6=class extends we{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e?.data,n=e?.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),r!=null&&(typeof r=="string"?i.query.text=r:typeof r=="object"&&(i.query.text=JSON.stringify(r))));let s=this.userContentUrl;return n&&(s+="/"+(typeof n=="string"?n:n.id)),this.portal.request(s+"/addItem",i).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const n=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:n}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const r=this.userContentUrl+"/deleteItems",n=[],i=e.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:t}},o=await this.portal.request(r,s);for(const a of o.results){const l=e.find(h=>a.itemId===h.id),u=a.success;let c=null;u?(l.id=null,l.portal=null):a.error&&(c=new ie("portal:delete-item-failed",a.error.message,a.error)),n.push({item:l,success:u,error:c})}}return n}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(n=>{const i=Eht.fromJSON(n);return i.portal=this.portal,i}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const n=l6.fromJSON(r);return n.portal=this.portal,n}):[],t})}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await Promise.resolve().then(()=>Dae),n={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},i=await this.portal.request(t,{query:n});let s;return i?.items?(s=i.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new l6({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new ie("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,n=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:n})}toJSON(){throw new ie("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new u6({sourceJSON:e});return t.read(e),t}};p([f()],en.prototype,"access",void 0),p([f({type:Date})],en.prototype,"created",void 0),p([f()],en.prototype,"culture",void 0),p([f()],en.prototype,"description",void 0),p([f()],en.prototype,"email",void 0),p([f()],en.prototype,"favGroupId",void 0),p([f()],en.prototype,"fullName",void 0),p([f({type:Date})],en.prototype,"modified",void 0),p([f()],en.prototype,"orgId",void 0),p([f()],en.prototype,"portal",void 0),p([f()],en.prototype,"preferredView",void 0),p([f()],en.prototype,"privileges",void 0),p([f()],en.prototype,"region",void 0),p([f()],en.prototype,"role",void 0),p([f()],en.prototype,"roleId",void 0),p([f()],en.prototype,"sourceJSON",void 0),p([f()],en.prototype,"thumbnail",void 0),p([f({readOnly:!0})],en.prototype,"thumbnailUrl",null),p([f()],en.prototype,"units",void 0),p([f({readOnly:!0})],en.prototype,"userContentUrl",null),p([f({readOnly:!0})],en.prototype,"url",null),p([f()],en.prototype,"username",void 0),p([f()],en.prototype,"userLicenseTypeId",void 0),p([f()],en.prototype,"userType",void 0),en=u6=p([W("esri.portal.PortalUser")],en);const cV=en;var Ha;let H_;const IZ={PortalGroup:()=>Promise.resolve({default:l6}),PortalItem:()=>Promise.resolve().then(()=>Dae),PortalUser:()=>Promise.resolve({default:cV})};let We=Ha=class extends o_(pc){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=pr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){AZ.unregister(this),this.defaultBasemap=pn(this.defaultBasemap),this.defaultDevBasemap=pn(this.defaultDevBasemap),this.defaultVectorBasemap=pn(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=mn(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)pr.request.trustedServers.includes(t)||pr.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return Hoe(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=cV.fromJSON(e),t.portal=this),t}load(e){const t=Promise.resolve().then(()=>Kht).then(({default:r})=>{Gr(e),H_=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&Er){const n=Er;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Ha.AUTH_MODE_AUTO&&this.authMode!==Ha.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=n.on("credential-create",Tht(new WeakRef(this))),AZ.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Me(async()=>{const{default:r}=await import("./ElevationLayer-B05qqUHG-DmRF1XZT.js");return{default:r}},__vite__mapDeps([6,1,2]),import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if(t?.include3d===!0&&this.use3dBasemaps!==!1){const n=await this._fetchBasemaps3D(e,t);r.unshift(...n)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Hu;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const r=(await this.queryItems(t,e)).results.find(n=>n.type==="Web Scene");return r?new H_({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Ba(e)?Promise.reject(Xr()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Hu({num:100,sortField:"title"});if(t?.length){const n=[];for(const i of t)n.push(`(title:"${i.title}" AND owner:${i.owner})`);return r.query=n.join(" OR "),this.queryGroups(r,e).then(i=>i.results)}return Ba(e)?Promise.reject(Xr()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||Xo();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||Xo();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return _ht(()=>new Ha)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const n=this.restUrl+"/portals/self",i={authMode:e,query:{culture:Xo().toLowerCase()},withCredentials:!0,...r};return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this.request(n,i)}queryPortal(e,t,r,n){const i=Nr(Hu,t),s=o=>this.request(this.restUrl+e,{...i.toRequestOptions(this),...n}).then(a=>{const l=i.clone();return l.start=a.nextStart,new Sht({nextQueryParams:l,queryParams:i,total:a.total,results:Ha._resultsToTypedArray(o,{portal:this},a,n)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(qo(l),a)));return r&&IZ[r]?IZ[r]().then(({default:o})=>(Gr(n),s(o))):s()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new ie("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Ha.AUTH_MODE_ANONYMOUS||this.authMode===Ha.AUTH_MODE_NO_PROMPT&&!Er)return Promise.reject(new ie("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Er?Er.getCredential(this.restUrl,{prompt:this.authMode!==Ha.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(n=>{const i=Ha._resultsToTypedArray(r,{portal:this},n);return Promise.all(i.map(s=>typeof s.when=="function"?s.when():n)).then(()=>i,()=>i)})}request(e,t={}){const r={f:"json",...t.query},{authMode:n=this.authMode===Ha.AUTH_MODE_ANONYMOUS||this.authMode===Ha.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:i=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:n,body:i,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(u.withCredentials=!0),Xe(this._normalizeSSL(e),u).then(c=>c.data)}toJSON(){throw new ie("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ha({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new ie("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Hu;r.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const n=await this.queryGroups(r,t);if(!n.total)return[];const i=n.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=i.sortField||"name",r.sortOrder=i.sortOrder||"desc";const s=await i.queryItems(r,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new H_({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const n=new Hu({query:r,disableExtraQuery:!0}),i=await this.queryGroups(n,t);if(!i.total)return[];const s=i.results[0];n.num=100,n.query='type:"Web Scene"',n.sortField=s.sortField||"name",n.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(n,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new H_({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=H_.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,n){let i;if(r){const s=n!=null?n.signal:null;i=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(i=i.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else i=[];return i}};We.AUTH_MODE_ANONYMOUS="anonymous",We.AUTH_MODE_AUTO="auto",We.AUTH_MODE_IMMEDIATE="immediate",We.AUTH_MODE_NO_PROMPT="no-prompt",p([f()],We.prototype,"access",void 0),p([f()],We.prototype,"allSSL",void 0),p([f()],We.prototype,"authMode",void 0),p([f()],We.prototype,"authorizedCrossOriginDomains",void 0),p([Ee("authorizedCrossOriginDomains")],We.prototype,"readAuthorizedCrossOriginDomains",null),p([f()],We.prototype,"basemapGalleryGroupQuery",void 0),p([f({json:{name:"3DBasemapGalleryGroupQuery"}})],We.prototype,"basemapGalleryGroupQuery3D",void 0),p([f()],We.prototype,"bingKey",void 0),p([f()],We.prototype,"canListApps",void 0),p([f()],We.prototype,"canListData",void 0),p([f()],We.prototype,"canListPreProvisionedItems",void 0),p([f()],We.prototype,"canProvisionDirectPurchase",void 0),p([f()],We.prototype,"canSearchPublic",void 0),p([f()],We.prototype,"canShareBingPublic",void 0),p([f()],We.prototype,"canSharePublic",void 0),p([f()],We.prototype,"canSignInArcGIS",void 0),p([f()],We.prototype,"canSignInIDP",void 0),p([f()],We.prototype,"colorSetsGroupQuery",void 0),p([f()],We.prototype,"commentsEnabled",void 0),p([f({type:Date})],We.prototype,"created",void 0),p([f()],We.prototype,"credential",void 0),p([f()],We.prototype,"culture",void 0),p([f()],We.prototype,"currentVersion",void 0),p([f()],We.prototype,"customBaseUrl",void 0),p([f()],We.prototype,"default3DBasemapQuery",void 0),p([f()],We.prototype,"defaultBasemap",void 0),p([Ee("defaultBasemap")],We.prototype,"readDefaultBasemap",null),p([f()],We.prototype,"defaultDevBasemap",void 0),p([Ee("defaultDevBasemap")],We.prototype,"readDefaultDevBasemap",null),p([f({type:jt})],We.prototype,"defaultExtent",void 0),p([f()],We.prototype,"defaultVectorBasemap",void 0),p([Ee("defaultVectorBasemap")],We.prototype,"readDefaultVectorBasemap",null),p([f()],We.prototype,"description",void 0),p([f()],We.prototype,"devBasemapGalleryGroupQuery",void 0),p([f()],We.prototype,"eueiEnabled",void 0),p([f({readOnly:!0})],We.prototype,"extraQuery",null),p([f()],We.prototype,"featuredGroups",void 0),p([f()],We.prototype,"featuredItemsGroupQuery",void 0),p([f()],We.prototype,"galleryTemplatesGroupQuery",void 0),p([f()],We.prototype,"layoutGroupQuery",void 0),p([f()],We.prototype,"livingAtlasGroupQuery",void 0),p([f({readOnly:!0})],We.prototype,"hasAPIKey",null),p([f()],We.prototype,"hasCategorySchema",void 0),p([f()],We.prototype,"hasClassificationSchema",void 0),p([f()],We.prototype,"helpBase",void 0),p([f()],We.prototype,"helperServices",void 0),p([f()],We.prototype,"helpMap",void 0),p([f()],We.prototype,"homePageFeaturedContent",void 0),p([f()],We.prototype,"homePageFeaturedContentCount",void 0),p([f()],We.prototype,"httpPort",void 0),p([f()],We.prototype,"httpsPort",void 0),p([f()],We.prototype,"id",void 0),p([f()],We.prototype,"ipCntryCode",void 0),p([f({readOnly:!0})],We.prototype,"isOrganization",null),p([f()],We.prototype,"isPortal",void 0),p([f()],We.prototype,"isReadOnly",void 0),p([f({readOnly:!0})],We.prototype,"itemPageUrl",null),p([f()],We.prototype,"layerTemplatesGroupQuery",void 0),p([f()],We.prototype,"maxTokenExpirationMinutes",void 0),p([f({type:Date})],We.prototype,"modified",void 0),p([f()],We.prototype,"name",void 0),p([f()],We.prototype,"portalHostname",void 0),p([f()],We.prototype,"portalMode",void 0),p([f()],We.prototype,"portalProperties",void 0),p([f()],We.prototype,"region",void 0),p([f()],We.prototype,"recycleBinEnabled",void 0),p([f({readOnly:!0})],We.prototype,"restUrl",null),p([f()],We.prototype,"rotatorPanels",void 0),p([f()],We.prototype,"showHomePageDescription",void 0),p([f()],We.prototype,"sourceJSON",void 0),p([f()],We.prototype,"staticImagesUrl",void 0),p([f({json:{name:"2DStylesGroupQuery"}})],We.prototype,"stylesGroupQuery2d",void 0),p([f({json:{name:"stylesGroupQuery"}})],We.prototype,"stylesGroupQuery3d",void 0),p([f()],We.prototype,"supportsHostedServices",void 0),p([f()],We.prototype,"symbolSetsGroupQuery",void 0),p([f()],We.prototype,"templatesGroupQuery",void 0),p([f()],We.prototype,"thumbnail",void 0),p([f({readOnly:!0})],We.prototype,"thumbnailUrl",null),p([f()],We.prototype,"units",void 0),p([f()],We.prototype,"url",void 0),p([f()],We.prototype,"urlKey",void 0),p([Ee("urlKey")],We.prototype,"readUrlKey",null),p([f()],We.prototype,"user",void 0),p([Ee("user")],We.prototype,"readUser",null),p([f()],We.prototype,"use3dBasemaps",void 0),p([f()],We.prototype,"useDefault3dBasemap",void 0),p([f()],We.prototype,"useStandardizedQuery",void 0),p([f()],We.prototype,"useVectorBasemaps",void 0),p([f()],We.prototype,"vectorBasemapGalleryGroupQuery",void 0),We=Ha=p([W("esri.portal.Portal")],We);const ta=We,AZ=new FinalizationRegistry(e=>{e.remove()});function Tht(e){const t=Er;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Kh=class extends mt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:MZ(e.path,e.portalItem)}:e}set path(e){e!=null&&Na(e)?Pe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return MZ(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.cdnUrl;if(r==null)throw new ie("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:t?.cacheBust?Date.now():null},signal:t?.signal})}async update(e,t){const{addOrUpdateResources:r}=await Me(()=>import("./resourceUtils-PAYBmvyK-Dcqq-dzT.js"),__vite__mapDeps([7,1,2]),import.meta.url);return await r(this.portalItem,[{resource:this,content:e,compress:t?.compress,access:t?.access}],"update",t),this}hasPath(){return this.path!=null}};function MZ(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Na(e)&&(e=Kk(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}p([f()],Kh.prototype,"portalItem",void 0),p([f({type:String,value:null})],Kh.prototype,"path",null),p([ur("path")],Kh.prototype,"_castPath",null),p([f({type:String,readOnly:!0})],Kh.prototype,"url",null),p([f({type:String,readOnly:!0})],Kh.prototype,"cdnUrl",null),p([f({type:String,readOnly:!0})],Kh.prototype,"itemRelativeUrl",null),Kh=p([W("esri.portal.PortalItemResource")],Kh);const Iht=Kh;let J2=class extends mt{constructor(e){super(e),this.created=null,this.rating=null}};p([f()],J2.prototype,"created",void 0),p([f()],J2.prototype,"rating",void 0),J2=p([W("esri.portal.PortalRating")],J2);const iL=J2;function r1(e,t){const r=t?.url?.path;if(e&&r&&(e=Aa(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const n=Kk(e,t.portalItem.itemUrl);n!=null&&Aht.test(n)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(n).path)}return(e=c6(e,t?.portal))&&aR.test(e)?pV(e):e}function p_(e,t,r=sw.YES){if((e=e&&aR.test(e)?Pae(e):e)==null)return e;!Na(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let n=Aa(e);if(t){const i=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(i){const s=c6(i,t.portal),o=c6(n,t.portal);n=Kk(o,s,s),n!=null&&n!==o&&n!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=hV(n,t?.portal),Na(n)&&(n=ll(n)),t?.resources&&t?.portalItem&&!Na(n)&&!Hm(n)&&r===sw.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(n),compress:!1}),n}function oR(e,t,r){return r1(e,r)}function Mm(e,t,r,n){const i=p_(e,n);i!==void 0&&(t[r]=i)}const aR=/\/items\/([^/]+)\/resources\/(.*)/,Aht=/^\.\/resources\//;function Nae(e){return(e?.match(aR)??null)?.[1]??null}function Lae(e){const t=e?.match(aR)??null;if(t==null)return null;const r=t[2],n=r.lastIndexOf("/");if(n===-1){const{path:o,extension:a}=cZ(r);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=cZ(r.slice(n+1));return{prefix:r.slice(0,n),filename:i,extension:s}}function hV(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?ZD(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function c6(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=GB();return Mg(n,`${n.scheme}://${r}`)?ZD(e,t.portalHostname,r):ZD(e,r,t.portalHostname)}function pV(e){if(!e)return e||null;let t=e;return t&&Er&&!Er.findCredential(t)&&(t=BB(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Pae(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Er&&!Er.findCredential(t)&&(t=BB(t)),t}var sw;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(sw||(sw={}));const Mht=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return sw},ensureMainOnlineDomain:hV,fromCDNUrl:Pae,fromJSON:r1,itemIdFromResourceUrl:Nae,prefixAndFilenameFromResourceUrl:Lae,read:oR,toCDNUrl:pV,toJSON:p_,write:Mm},Symbol.toStringTag,{value:"Module"}));var D0;const Cht=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),kht=new Set(["KML","GeoJson","CSV"]);let Qt=D0=class extends o_(pc){static from(e){return yn(D0,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new jt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",n="16";let i,s=!1,o=!1,a=!1,l=!1,u=!1,c=!1,h=!1,d=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),u=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),i=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":c?"utilitynetwork":s?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(u=t.includes("Spatiotemporal"),h=t.includes("Relational"),i=u||h?"mapimages":s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):i=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?i="maps":e==="web scene"?i=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?i="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?i="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?i="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?i="datafiles":e==="360 vr experience"?i="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?i="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?i="addindesktop":e==="pdf"?i="pdf":e==="microsoft word"?i="word":e==="microsoft excel"?i="excel":e==="microsoft powerpoint"?i="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?i="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?i="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?i="layersgray":e==="analysis model"?i="analysismodel":e==="scene package"?i="scenepackage":e==="3dtiles package"?i="3dtileslayerpackage":e==="3dtiles service"?i="3dtileslayer":e==="mobile scene package"?i="mobilescenepackage":e==="tile package"||e==="compact tile package"?i="tilepackage":e==="task file"?i="taskfile":e==="report template"?i="report-template":e==="statistical data collection"?i="statisticaldatacollection":e==="insights workbook"?i="workbook":e==="insights model"?i="insightsmodel":e==="insights page"?i="insightspage":e==="insights theme"?i="insightstheme":e==="hub initiative"?i="hubinitiative":e==="hub page"?i="hubpage":e==="hub site application"?i="hubsite":e==="hub event"?i="hubevent":e==="hub project"?i="hubproject":e==="relational database connection"?i="relationaldatabaseconnection":e==="big data file share"?i="datastorecollection":e==="image collection"?i="imagecollection":e==="desktop style"?i="desktopstyle":e==="style"?i=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?i="dashboard":e==="raster function template"?i="rasterprocessingtemplate":e==="vector tile package"?i="vectortilepackage":e==="ortho mapping project"?i="orthomappingproject":e==="ortho mapping template"?i="orthomappingtemplate":e==="solution"?i="solutions":e==="geopackage"?i="geopackage":e==="deep learning package"?i="deeplearningpackage":e==="real time analytic"?i="realtimeanalytics":e==="reality mapping project"?i="realitymappingproject":e==="big data analytic"?i="bigdataanalytics":e==="feed"?i="feed":e==="excalibur imagery project"?i="excaliburimageryproject":e==="notebook"?i="notebook":e==="storymap"?i="storymap":e==="survey123 add in"?i="survey123addin":e==="mission"?i="mission":e==="mission report"?i="missionreport":e==="mission template"?i="missiontemplate":e==="quickcapture project"?i="quickcaptureproject":e==="pro report"?i="proreport":e==="pro report template"?i="proreporttemplate":e==="urban model"?i="urbanmodel":e==="urban project"?i="urbanproject":e==="web experience"?i="experiencebuilder":e==="web experience template"?i="webexperiencetemplate":e==="experience builder widget"?i="experiencebuilderwidget":e==="experience builder widget package"?i="experiencebuilderwidgetpackage":e==="workflow"?i="workflow":e==="kernel gateway connection"?i="kernelgatewayconnection":e==="insights script"?i="insightsscript":e==="hub initiative template"?i="hubinitiativetemplate":e==="storymap theme"?i="storymaptheme":e==="knowledge graph"?i="knowledgegraph":e==="knowledge graph layer"?i="knowledgegraphlayer":e==="knowledge studio project"?i="knowledgestudio":e==="native application"?i="nativeapp":e==="native application installer"?i="nativeappinstaller":e==="web link chart"?i="linkchart":e==="knowledge graph web investigation"?i="investigation":e==="ogcfeatureserver"?i="features":e==="pro presentation"?i="propresentation":e==="pro project"?i="proproject":e==="insights workbook package"?i="insightsworkbookpackage":e==="apache parquet"?i="apacheparquet":e==="notebook code snippet library"?i="notebookcodesnippets":e==="suitability model"?i="suitabilitymodel":e==="esri classifier definition"?i="classifierdefinition":e==="esri classification schema"?i="classificationschema":e==="insights data engineering workbook"?i="dataengineeringworkbook":e==="insights data engineering model"?i="dataengineeringmodel":e==="deep learning studio project"?i="deeplearningproject":e==="discussion"?i="discussion":e==="allsource project"?i="allsourceproject":e==="api key"?i="apikey":e==="data pipeline"?i="datapipelines":e==="group layer"?(d=t.includes("Map"),i=d?"layergroup2d":"layergroup"):i=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",i?br(r+i+n+".png"):null}get isLayer(){return this.type!=null&&Cht.has(this.type)}get itemCdnUrl(){return pV(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.username;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=ta.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof iL&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new iL({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:se(this.applicationProxies),avgRating:this.avgRating,categories:se(this.categories),classification:se(this.classification),created:se(this.created),culture:this.culture,description:this.description,extent:se(this.extent),groupCategories:se(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:se(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:se(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new D0({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");for(const t of["extent","classification"]){const r=e[t];r&&(e[t]=JSON.stringify(r))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new iL(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},D0)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e?.data,r={method:"post"};r.query=this.createPostQuery();for(const n in r.query)r.query[n]===null&&(r.query[n]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new ie("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:n,folder:i,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:n==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!n,tags:s?.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new D0({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,n={method:"post"};if(typeof t=="string")Hm(t)?n.query={data:t}:n.query={url:Aa(t)},r!=null&&(n.query.filename=r);else{const i=new FormData;r!=null?i.append("file",t,r):i.append("file",t),n.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new ie("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await Me(()=>import("./resourceUtils-PAYBmvyK-Dcqq-dzT.js"),__vite__mapDeps([7,1,2]),import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:n}=await Me(()=>import("./resourceUtils-PAYBmvyK-Dcqq-dzT.js"),__vite__mapDeps([7,1,2]),import.meta.url);return e.portalItem=this,await n(this,[{resource:e,content:t,compress:r?.compress,access:r?.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await Me(()=>import("./resourceUtils-PAYBmvyK-Dcqq-dzT.js"),__vite__mapDeps([7,1,2]),import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new ie("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await Me(()=>import("./resourceUtils-PAYBmvyK-Dcqq-dzT.js"),__vite__mapDeps([7,1,2]),import.meta.url);return t(this,e)}resourceFromPath(e){return new Iht({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:se(this.categories),classification:se(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:se(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:se(this.typeKeywords),url:this.url};return wse(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new D0({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};p([f({type:["private","shared","org","public"]})],Qt.prototype,"access",void 0),p([f()],Qt.prototype,"accessInformation",void 0),p([f({type:String})],Qt.prototype,"apiKey",void 0),p([f({json:{read:{source:"appProxies"}}})],Qt.prototype,"applicationProxies",void 0),p([f()],Qt.prototype,"avgRating",void 0),p([f()],Qt.prototype,"categories",void 0),p([f()],Qt.prototype,"classification",void 0),p([f({type:Date})],Qt.prototype,"created",void 0),p([f()],Qt.prototype,"culture",void 0),p([f()],Qt.prototype,"description",void 0),p([f({readOnly:!0})],Qt.prototype,"displayName",null),p([f({type:jt})],Qt.prototype,"extent",void 0),p([Ee("extent")],Qt.prototype,"readExtent",null),p([f()],Qt.prototype,"groupCategories",void 0),p([f({readOnly:!0})],Qt.prototype,"iconUrl",null),p([f()],Qt.prototype,"id",void 0),p([f({readOnly:!0})],Qt.prototype,"isLayer",null),p([f({type:Boolean,readOnly:!0})],Qt.prototype,"isOrgItem",void 0),p([f()],Qt.prototype,"itemControl",void 0),p([f({readOnly:!0})],Qt.prototype,"itemPageUrl",null),p([f({readOnly:!0})],Qt.prototype,"itemUrl",null),p([f()],Qt.prototype,"licenseInfo",void 0),p([f({type:Date})],Qt.prototype,"modified",void 0),p([f()],Qt.prototype,"name",void 0),p([f()],Qt.prototype,"numComments",void 0),p([f()],Qt.prototype,"numRatings",void 0),p([f()],Qt.prototype,"numViews",void 0),p([f()],Qt.prototype,"owner",void 0),p([f()],Qt.prototype,"ownerFolder",void 0),p([f({type:ta})],Qt.prototype,"portal",void 0),p([f()],Qt.prototype,"screenshots",void 0),p([f()],Qt.prototype,"size",void 0),p([f()],Qt.prototype,"snippet",void 0),p([f()],Qt.prototype,"sourceJSON",void 0),p([f({type:String})],Qt.prototype,"sourceUrl",void 0),p([f({type:String})],Qt.prototype,"spatialReference",void 0),p([f()],Qt.prototype,"tags",void 0),p([f()],Qt.prototype,"thumbnail",void 0),p([f({readOnly:!0})],Qt.prototype,"thumbnailUrl",null),p([f()],Qt.prototype,"title",void 0),p([f()],Qt.prototype,"type",void 0),p([f()],Qt.prototype,"typeKeywords",void 0),p([f({type:String,json:{read(e,t){if(kht.has(t.type)){const r=this.portal?.restUrl;e||=r&&this.id?`${r}/content/items/${this.id}/data`:null}return e}}})],Qt.prototype,"url",void 0),p([f({readOnly:!0})],Qt.prototype,"userItemUrl",null),Qt=D0=p([W("esri.portal.PortalItem")],Qt);const sg=Qt,Dae=Object.freeze(Object.defineProperty({__proto__:null,default:sg},Symbol.toStringTag,{value:"Module"})),CZ=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Rht={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function kZ(e){return e in Rht}const Y2=[],Sb=new Map;function RZ(e){for(const t of Sb.keys())jae(e.pattern,t)&&Sb.delete(t)}function Oht(e){return Y2.includes(e)||(RZ(e),Y2.unshift(e)),gr(()=>{const t=Y2.indexOf(e);t>-1&&(Y2.splice(t,1),RZ(e))})}async function Fae(e){const t=Xo();Sb.has(e)||Sb.set(e,Lht(e,t));const r=Sb.get(e);return r&&await Pht.add(r),r}function Nht(e){if(!CZ.test(e))return null;const t=CZ.exec(e);if(t===null)return null;const[,r,n]=t,i=r+(n?"-"+n.toUpperCase():"");return kZ(i)?i:kZ(r)?r:null}async function Lht(e,t){const r=[];for(const n of Y2)if(jae(n.pattern,e))try{return await n.fetchMessageBundle(e,t)}catch(i){r.push(i)}throw r.length?new ie("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new ie("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function jae(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}uV(()=>{Sb.clear()});const Pht=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ko())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Dht(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await Fae("esri/t9n/basemaps");return r[e]||r[t]}const h6={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return br("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return br("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return br("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return br("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return br("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return br("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return br("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return br("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return br("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return br("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return br("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return br("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return br("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return br("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return br("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return br("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},Fht=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let ep=class extends mt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const e=Xo().toLowerCase();switch(e){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const t=Rae(e);return t==="pt"?"pt-BR":t&&Fht.has(t)?t:"global"}};p([f()],ep.prototype,"apiKey",void 0),p([f()],ep.prototype,"id",void 0),p([f()],ep.prototype,"language",void 0),p([f()],ep.prototype,"places",void 0),p([f()],ep.prototype,"serviceUrl",void 0),p([f()],ep.prototype,"worldview",void 0),ep=p([W("esri.support.BasemapStyle")],ep);const jht=ep;function Uht(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function F0(e){return e?.type==="subtype-sublayer"}const Bht={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function p6(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function lR(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Vht(e){const t=e?.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&e.source?.type==="feature-layer"}async function Uae(e,t){const r=Er?.findServerInfo(e);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const n=e.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const i=`${e.slice(0,n)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await Xe(i,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function Ght(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Bae(e){return Ght(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function zht(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Vae(e){return!!zht(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const $ht=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),qht=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Hht(e){return e.layerContainerType==="basemap"?$ht:e.layerContainerType==="operational-layers"?qht:null}function Wht(e,t){if(t.restrictedWebMapWriting){const r=Hht(t);return r==null||r.has(e.type)&&!lR(e)}return!0}function Zht(e,t){if(t)if(lR(e)){const r=MT("featureCollection.layers",t),n=r?.[0]?.layerDefinition;n&&OZ(e,n)}else e.type!=="group"&&OZ(e,t)}function OZ(e,t){"maxScale"in e&&(t.maxScale=m5(e.maxScale)??void 0),"minScale"in e&&(t.minScale=m5(e.minScale)??void 0)}function Jht(e,t){if(Zht(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=m5(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(lR(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function d6(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r?.messages&&r.messages.push(new ie("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(lR(e)&&!e.isTable)t=e.resourceInfo;else if(Wht(e,r)){const n={};return e.write(n,r)?n:null}return t!=null&&Jht(e,t=se(t)),t}var X2;let Yht=0,Wa=X2=class extends o_(pc){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Yht++,this.baseLayers=new st,this.referenceLayers=new st;const t=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&Pe.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=n=>{n.parent=null};this.addHandles([this.baseLayers.on("after-add",n=>t(n.item)),this.referenceLayers.on("after-add",n=>t(n.item)),this.baseLayers.on("after-remove",n=>r(n.item)),this.referenceLayers.on("after-remove",n=>r(n.item))])}initialize(){this.when().catch(e=>{Pe.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=pn(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",fd(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const n=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(i=>{const s=d6(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);s!=null&&n.push(s)}),this.referenceLayers.forEach(i=>{const s=d6(i,r.webmap?r.webmap.getLayerJSONFromResourceInfo(i):null,r);s!=null&&(i.type!=="scene"&&(s.isReference=!0),n.push(s))})),t.baseMapLayers=n}set referenceLayers(e){this._set("referenceLayers",fd(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return UT(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>t5(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>t5(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new X2({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const n=se(r);return n.url&&tu(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&tu(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:n}=this;Gr(e);const i=[];if(t){const s=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,s,e)),t.data.id&&!t.data.title){const o=t.data.id;i.push(Dht(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?i.push(this._loadFromItem(r,e)):n&&i.push(this._loadFromStylesService(n,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,r){const n=this.resourceInfo?.context,i=this.portalItem?.portal||n?.portal||null,s=Qht[n?.origin||""]??"web-map",{populateOperationalLayers:o}=await Me(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-OT3cNiQJ-CxTWe27Y.js");return{populateOperationalLayers:l}},__vite__mapDeps([8,9,10,11,1,2]),import.meta.url),a=[];if(Gr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{...n,origin:s,url:t,portal:i,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=d=>s==="web-scene"&&d.layerType==="ArcGISSceneServiceLayer"||d.isReference,c=o(this.baseLayers,e.baseMapLayers.filter(d=>!u(d)),l);a.push(c);const h=o(this.referenceLayers,e.baseMapLayers.filter(u),l);a.push(h)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),n=await r.fetchData("json",t),i=Zn(e.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:Xht[e.type||""]??"web-map",portal:e.portal||ta.getDefault(),url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ta.getDefault(),url:i}),this._loadLayersFromJSON(this.resourceInfo.data,i,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,n=(await Xe(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t?.signal})).data,i=Zn(r);if(this._set("resourceInfo",{data:n.baseMap??{},context:{origin:"web-map",url:i}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,i,t),e.apiKey)for(const s of[...this.baseLayers,...this.referenceLayers])"apiKey"in s&&(s.apiKey=e.apiKey)}static fromId(e){const t=h6[e];return t?t.itemId?new X2({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):X2.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};p([f({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,n){this._writeBaseLayers(e,t,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:st}},writer(e,t,r,n){this._writeBaseLayers(e,t,n)}}}}}})],Wa.prototype,"baseLayers",null),p([f({type:String,json:{origins:{"web-scene":{write:!0}}}})],Wa.prototype,"id",void 0),p([f({type:sg})],Wa.prototype,"portalItem",void 0),p([f()],Wa.prototype,"referenceLayers",null),p([f({readOnly:!0})],Wa.prototype,"resourceInfo",void 0),p([f({type:Ke})],Wa.prototype,"spatialReference",void 0),p([f({type:jht})],Wa.prototype,"style",void 0),p([f()],Wa.prototype,"thumbnailUrl",void 0),p([f({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Wa.prototype,"title",void 0),p([Re("title")],Wa.prototype,"writeTitle",null),Wa=X2=p([W("esri.Basemap")],Wa);const Xht={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Qht={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Eb=Wa,Kht=Object.freeze(Object.defineProperty({__proto__:null,default:Eb},Symbol.toStringTag,{value:"Module"})),O5={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Gae(e){return!!O5[e]||!!O5[e.toLowerCase()]}function dV(e){return O5[e]??O5[e.toLowerCase()]}function ept(e){return[...dV(e)]}function sL(e,t,r){r<0&&++r,r>1&&--r;const n=6*r;return n<1?e+(t-e)*n:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function zae(e,t,r,n=1){const i=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*sL(o,s,i+1/3)),Math.round(255*sL(o,s,i)),Math.round(255*sL(o,s,i-1/3)),n]}function tpt(e){const t=e.length>5,r=t?8:4,n=(1<<r)-1,i=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&n,o>>=r,a[3]=i*l/255),l=o&n,o>>=r,a[2]=i*l,l=o&n,o>>=r,a[1]=i*l,l=o&n,o>>=r,a[0]=i*l,a}const NZ=new Float32Array(1);function rpt(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function hl(e,t,r){return Math.min(Math.max(e,t),r)}function npt(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function eb(e,t,r){return e+(t-e)*r}function ipt(e,t,r,n,i){return eb(n,i,(e-t)/(r-t))}function d_(e){return e*Math.PI/180}function fV(e){return 180*e/Math.PI}function spt(e){return Math.acos(hl(e,-1,1))}function $ae(e){return Math.asin(hl(e,-1,1))}function Tb(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const N5=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function f6(e){return N5.setFloat64(0,e),N5.getBigInt64(0)}function opt(e){return N5.setBigInt64(0,e),N5.getFloat64(0)}const sM=BigInt("1000000"),apt=qae(1);function qae(e){const t=f6(e=Math.abs(e)),r=opt(t<=sM?sM:t-sM);return Math.abs(e-r)}function lpt(e,t,r=apt){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&qae(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const n=f6(e),i=f6(t);return n<0!=i<0?!1:!((n<i?i-n:n-i)>sM)}function upt(e){return Hae(Math.max(-m6,Math.min(e,m6)))}function Hae(e){return NZ[0]=e,NZ[0]}function cpt(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],n=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Tb(t,1)&&Tb(r,1)&&Tb(n,1))}const m6=Hae(34028234663852886e22);function hpt(e,t,r){if(r===void 0||+r==0)return Math[e](t);if(t=+t,r=+r,isNaN(t)||typeof r!="number"||r%1!=0)return NaN;let n=t.toString().split("e");return n=(t=Math[e](+(n[0]+"e"+(n[1]?+n[1]-r:-r)))).toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]+r:r))}function fI(e){return hl(Jk(e),0,255)}function mI(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function yI(e,t){const r=e.toString(16).padStart(2,"0");return t?r.slice(0,1):r}let oM=class Vi{static blendColors(t,r,n,i=new Vi){return i.r=Math.round(t.r+(r.r-t.r)*n),i.g=Math.round(t.g+(r.g-t.g)*n),i.b=Math.round(t.b+(r.b-t.b)*n),i.a=t.a+(r.a-t.a)*n,i._sanitize()}static fromRgb(t,r){const n=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(n){const i=n[2].split(/\s*,\s*/),s=n[1];if(s==="rgb"&&i.length===3||s==="rgba"&&i.length===4){const o=i[0];if(o.charAt(o.length-1)==="%"){const a=i.map(l=>2.56*parseFloat(l));return i.length===4&&(a[3]=parseFloat(i[3])),Vi.fromArray(a,r)}return Vi.fromArray(i.map(a=>parseFloat(a)),r)}if(s==="hsl"&&i.length===3||s==="hsla"&&i.length===4)return Vi.fromArray(zae(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),r)}return null}static fromHex(t,r=new Vi){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const n=parseInt(t.slice(1,2),16),i=parseInt(t.slice(2,3),16),s=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Vi.fromArray([n+16*n,i+16*i,s+16*s,(o+16*o)/255],r)}case 7:case 9:{const n=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Vi.fromArray([n,i,s,o/255],r)}default:return null}}static fromArray(t,r=new Vi){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const n=Gae(t)?dV(t):null;return n&&Vi.fromArray(n,r)||Vi.fromRgb(t,r)||Vi.fromHex(t,r)}static fromJSON(t){return t!=null?new Vi([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Vi.fromString(t,this):Array.isArray(t)?Vi.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Vi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=t?.capitalize??!1,n=t?.digits??6,i=n===3||n===4,s=n===4||n===8,o=`#${yI(this.r,i)}${yI(this.g,i)}${yI(this.b,i)}${s?yI(Math.round(255*this.a),i):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Vi.AlphaMode.ALWAYS){const r=fI(this.r),n=fI(this.g),i=fI(this.b);return t===Vi.AlphaMode.ALWAYS||this.a!==1?[r,n,i,fI(255*this.a)]:[r,n,i]}clone(){return new Vi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(mI(this.r,0,255)),this.g=Math.round(mI(this.g,0,255)),this.b=Math.round(mI(this.b,0,255)),this.a=mI(this.a,0,1),this}_set(t,r,n,i){this.r=t,this.g=r,this.b=n,this.a=i}};oM.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(oM||(oM={}));const Ze=oM;function ow(e,t,r=!1){let{hasM:n,hasZ:i}=e;Array.isArray(t)?t.length!==4||n||i?t.length===3&&r&&!n?(i=!0,n=!1):t.length===3&&n&&i&&(n=!1,i=!1):(n=!0,i=!0):(i=!i&&t.hasZ&&(!n||t.hasM),n=!n&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=n}var y6;function LZ(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function ppt(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let lf=y6=class extends _c{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):ppt(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const n=r.points?.[0];return n&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=n.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=n.length>3:r.hasM===void 0&&(r.hasM=n.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new jt,r=this.hasZ,n=this.hasM,i=r?3:2,s=e[0],o=LZ(Math.min),a=LZ(Math.max);let l,u,c,h,[d,m]=s,[y,g]=s;for(let b=0,S=e.length;b<S;b++){const E=e[b],[x,w]=E;if(d=o(d,x),m=o(m,w),y=a(y,x),g=a(g,w),r&&E.length>2){const T=E[2];l=o(l,T),c=a(c,T)}if(n&&E.length>i){const T=E[i];u=o(u,T),h=a(h,T)}}return t.xmin=d,t.ymin=m,t.xmax=y,t.ymax=g,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=c):(t.zmin=void 0,t.zmax=void 0),n?(t.mmin=u,t.mmax=h):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=se(this.points)}addPoint(e){return ow(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:se(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new y6(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(r.z=t[2],n=3),this.hasM&&(r.m=t[n]),new it(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new it(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(ow(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};p([f({readOnly:!0})],lf.prototype,"cache",null),p([f()],lf.prototype,"extent",null),p([f({type:[[Number]],json:{write:{isRequired:!0}}})],lf.prototype,"points",void 0),p([Re("points")],lf.prototype,"writePoints",null),lf=y6=p([W("esri.geometry.Multipoint")],lf),lf.prototype.toJSON.isDefaultToJSON=!0;const n1=lf;function dpt(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function Wae(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var xE;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(xE||(xE={}));function mV(e,t){const r=t[0]-e[0],n=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}return Math.sqrt(r*r+n*n)}function fpt(e,t,r){const n=e[0]+r*(t[0]-e[0]),i=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[n,i,e[2]+r*(t[2]-e[2])]:[n,i]}function mpt(e,t,r,n){return Zae(e,t,r[n],r[n+1])}function Zae(e,t,r,n){const[i,s]=t,[o,a]=r,[l,u]=n,c=l-o,h=u-a,d=c*c+h*h,m=(i-o)*c+(s-a)*h,y=Math.min(1,Math.max(0,m/d));return e[0]=o+c*y,e[1]=a+h*y,e}function ypt(e,t,r,n,i,s){let o=r,a=n,l=i-o,u=s-a;if(l!==0||u!==0){const c=((e-o)*l+(t-a)*u)/(l*l+u*u);c>1?(o=i,a=s):c>0&&(o+=l*c,a+=u*c)}return l=e-o,u=t-a,l*l+u*u}function Jae(e,t){return fpt(e,t,.5)}function gpt(e){const t=e.length;let r=0;for(let n=0;n<t-1;++n)r+=mV(e[n],e[n+1]);return r}function yV(e,t=xE.X,r=xE.Y){let n=0;const i=e.length;let s=e[0];for(let o=1;o<i;o++){const a=e[o];n+=(a[t]-s[t])*(a[r]+s[r]),s=a}if(!Yae(e)){const o=e[0];n+=(o[t]-s[t])*(o[r]+s[r])}return n>=0}function Yae(e){const t=e.length;return t<3||AT(e[0],e[t-1])}function vpt(e){"rings"in e&&(Xae(e),bpt(e))}function Xae(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)Yae(r)||(r.push(r[0].slice()),t=!0);return t}function bpt(e){if(!("rings"in e)||e.rings.length===0||yV(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function wpt(e){return e.type!=="polygon"&&e.type!=="polyline"||Qae(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function Qae(e,t){const r=Bs(t);if(!r)return;const n=r.valid[0],i=r.valid[1],s=i-n;for(const o of e){let a=1/0,l=-1/0;for(const c of o){const h=_pt(c[0],n,i);a=Math.min(a,h),l=Math.max(l,h),c[0]=h}const u=l-a;s-u<u&&o.forEach(c=>{c[0]<0&&(c[0]+=s)})}}function _pt(e,t,r){const n=r-t;return e<t?r-(t-e)%n:e>r?t+(e-t)%n:e}function xpt(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[r,n]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return r.length===n.length&&r.every((i,s)=>i.length===n[s].length)}function Spt(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Kae(e){return e?ele(e.rings,e.hasZ??!1):null}function ele(e,t){if(!e?.length)return null;const r=[],n=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=tle(e[s],t,i);a&&n.push(a)}if(n.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),n.length&&(r[0]=n[0][0],r[1]=n[0][1],t&&(r[2]=n[0][3]),(r[0]<i[0]||r[0]>i[1]||r[1]<i[2]||r[1]>i[3]||t&&(r[2]<i[4]||r[2]>i[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?Tpt(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function tle(e,t,r){let n=0,i=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,c=e.length&&t?e[0][2]:0;for(let d=0;d<e.length;d++){const m=e[d],y=e[(d+1)%e.length],[g,b,S]=m,E=g-l,x=b-u,[w,T,I]=y,M=w-l,C=T-u,k=E*C-M*x;if(o+=k,n+=(E+M)*k,i+=(x+C)*k,t&&m.length>2&&y.length>2){const N=S-c,F=I-c,P=E*F-M*N;s+=(N+F)*P,a+=P}g<r[0]&&(r[0]=g),g>r[1]&&(r[1]=g),b<r[2]&&(r[2]=b),b>r[3]&&(r[3]=b),t&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[n/(6*o)+l,i/(6*o)+u,o];return t&&(r[4]===r[5]||a===0?(h[3]=(r[4]+r[5])/2,h[4]=0):(h[3]=s/(6*a)+c,h[4]=a)),h}function Ept(e,t){let r=0,n=0,i=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const u=[e.x,e.y],[c,h]=l,d=c-s,m=h-o,[y,g]=u,b=y-s,S=g-o,E=d*S-b*m;i+=E,r+=(d+b)*E,n+=(m+S)*E,c<t[0]&&(t[0]=c),c>t[1]&&(t[1]=c),h<t[2]&&(t[2]=h),h>t[3]&&(t[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[r/(6*i)+s,n/(6*i)+o,i]):null}function Tpt(e,t){const r=t?[0,0,0]:[0,0],n=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const c=e[l],h=e[l+1];if(c&&h){r[0]=c[0],r[1]=c[1],n[0]=h[0],n[1]=h[1],t&&c.length>2&&h.length>2&&(r[2]=c[2],n[2]=h[2]);const d=mV(r,n);if(d){i+=d;const m=Jae(c,h);s+=d*m[0],o+=d*m[1],t&&m.length>2&&(a+=d*m[2])}}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.length?e[0]:null}function Ipt(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const n=[],i=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=tle(Wae(e),e.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),i.length&&(n[0]=i[0][0],n[1]=i[0][1],t&&(n[2]=i[0][3]),(n[0]<s[0]||n[0]>s[1]||n[1]<s[2]||n[1]>s[3]||t&&(n[2]<s[4]||n[2]>s[5]))&&(n.length=0)),!n.length){e.reset(),e.nextPath();const o=e.pathSize?Apt(e):null;if(!o)return null;n[0]=o[0],n[1]=o[1],t&&o.length>2&&(n[2]=o[2])}return n}function Apt(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],n=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(e.nextPoint()){let l=e.x,u=e.y,c=e.z;for(;e.nextPoint();){const h=e.x,d=e.y,m=e.z;r[0]=l,r[1]=u,n[0]=h,n[1]=d,t&&(r[2]=c,n[2]=m);const y=mV(r,n);if(y){i+=y;const g=Jae(r,n);s+=y*g[0],o+=y*g[1],t&&g.length>2&&(a+=y*g[2])}l=h,u=d,c=m}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Mpt=1e-6;function Cpt(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Mpt){const i=Ipt(e);return i?[i[0],i[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const n=[e.x,e.y];for(e.reset();e.nextPath();)Rpt(r,n,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=n[0],r[1]+=n[1],r}const kpt=1/3;function Rpt(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const n=r.x,i=r.y;r.nextPoint();let s,o=r.x-n,a=r.y-i,l=0,u=0;for(;r.nextPoint();)l=r.x-n,u=r.y-i,s=.5*kpt*(l*a-u*o),e[0]+=s*(o+l),e[1]+=s*(a+u),o=l,a=u;const c=r.getCurrentRingArea(),h=[n,i];return h[0]-=t[0],h[1]-=t[1],h[0]*=c,h[1]*=c,e[0]+=h[0],e[1]+=h[1],e}function Zo(e=Gpt){return[e[0],e[1],e[2],e[3]]}function rle(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function nle(e,t,r,n,i=Zo()){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function Opt(e,t=Zo()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Npt(e,t){return new jt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Lpt(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Ppt(e,t,r){if(t!=null)if("length"in t)g6(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else rle(r,e)}function ile(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function sle(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Dpt(e){return ile(e)*sle(e)}function Fpt(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function jpt(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Upt(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function ole(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Bpt(e){return e?rle(e,v6):Zo(v6)}function g6(e){return e!=null&&e.length===4}function Vpt(e,t){return g6(e)&&g6(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const v6=[1/0,1/0,-1/0,-1/0],Gpt=[0,0,0,0];function ale(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function lle(e){return e.points!==void 0}function ule(e){return e.x!==void 0&&e.y!==void 0}function cle(e){return e.paths!==void 0}function hle(e){return e.rings!==void 0}function ple(e){function t(r,n){return r==null?n:n==null?r:e(r,n)}return t}const am=ple(Math.min),lm=ple(Math.max);function zpt(e,t){return cle(t)?aw(e,t.paths,!1,!1):hle(t)?aw(e,t.rings,!1,!1):lle(t)?gV(e,t.points,!1,!1,!1,!1):ale(t)?fle(e,t):(ule(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function $pt(e){let t,r,n,i;for(e.reset(),t=n=1/0,r=i=-1/0;e.nextPath();){const s=dle(e);t=Math.min(s[0],t),n=Math.min(s[1],n),r=Math.max(s[2],r),i=Math.max(s[3],i)}return Zo([t,n,r,i])}function dle(e){let t,r,n,i;for(t=n=1/0,r=i=-1/0;e.nextPoint();)t=Math.min(e.x,t),n=Math.min(e.y,n),r=Math.max(e.x,r),i=Math.max(e.y,i);return Zo([t,n,r,i])}function qpt(e,t){return cle(t)?aw(e,t.paths,!0,!1):hle(t)?aw(e,t.rings,!0,!1):lle(t)?gV(e,t.points,!0,!1,!0,!1):ale(t)?fle(e,t,!0,!1,!0,!1):(ule(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function aw(e,t,r,n){const i=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[u,c]=t[0][0],[h,d]=t[0][0];for(let m=0;m<t.length;m++){const y=t[m];for(let g=0;g<y.length;g++){const b=y[g],[S,E]=b;if(u=am(u,S),c=am(c,E),h=lm(h,S),d=lm(d,E),r&&b.length>2){const x=b[2];s=am(s,x),o=lm(o,x)}if(n&&b.length>i){const x=b[i];a=am(s,x),l=lm(o,x)}}}return r?n?(e[0]=u,e[1]=c,e[2]=s,e[3]=a,e[4]=h,e[5]=d,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=c,e[2]=s,e[3]=h,e[4]=d,e[5]=o,e.length=6,e):n?(e[0]=u,e[1]=c,e[2]=a,e[3]=h,e[4]=d,e[5]=l,e.length=6,e):(e[0]=u,e[1]=c,e[2]=h,e[3]=d,e.length=4,e)}function fle(e,t,r,n,i,s){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let c=t.zmin,h=t.zmax,d=t.mmin,m=t.mmax;return i?(c=c||0,h=h||0,s?(d=d||0,m=m||0,e[0]=o,e[1]=l,e[2]=c,e[3]=d,e[4]=a,e[5]=u,e[6]=h,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=h,e)):s?(d=d||0,m=m||0,e[0]=o,e[1]=l,e[2]=d,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function gV(e,t,r,n,i,s){const o=r?3:2,a=n&&s,l=r&&i;if(!t.length||!t[0].length)return null;let u,c,h,d,[m,y]=t[0],[g,b]=t[0];for(let S=0;S<t.length;S++){const E=t[S],[x,w]=E;if(m=am(m,x),y=am(y,w),g=lm(g,x),b=lm(b,w),l&&E.length>2){const T=E[2];u=am(u,T),c=lm(c,T)}if(a&&E.length>o){const T=E[o];h=am(u,T),d=lm(c,T)}}return i?(u=u||0,c=c||0,s?(h=h||0,d=d||0,e[0]=m,e[1]=y,e[2]=u,e[3]=h,e[4]=g,e[5]=b,e[6]=c,e[7]=d,e):(e[0]=m,e[1]=y,e[2]=u,e[3]=g,e[4]=b,e[5]=c,e)):s?(h=h||0,d=d||0,e[0]=m,e[1]=y,e[2]=h,e[3]=g,e[4]=b,e[5]=d,e):(e[0]=m,e[1]=y,e[2]=g,e[3]=b,e)}function Hpt(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function Wpt(e){return e.points!==void 0}function Zpt(e){return e.x!==void 0&&e.y!==void 0}function Jpt(e){return e.paths!==void 0}function Ypt(e){return e.rings!==void 0}const vV=[];function mle(e,t,r,n){return{xmin:e,ymin:t,xmax:r,ymax:n}}function yle(e,t,r,n,i,s){return{xmin:e,ymin:t,zmin:r,xmax:n,ymax:i,zmax:s}}function gle(e,t,r,n,i,s){return{xmin:e,ymin:t,mmin:r,xmax:n,ymax:i,mmax:s}}function vle(e,t,r,n,i,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:n,xmax:i,ymax:s,zmax:o,mmax:a}}function bV(e,t=!1,r=!1){return t?r?vle(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):yle(e[0],e[1],e[2],e[3],e[4],e[5]):r?gle(e[0],e[1],e[2],e[3],e[4],e[5]):mle(e[0],e[1],e[2],e[3])}function ble(e){return e?Hpt(e)?e:Zpt(e)?Qpt(e):Ypt(e)?wV(e):Jpt(e)?wle(e):Wpt(e)?Xpt(e):null:null}function Xpt(e){const{hasZ:t,hasM:r,points:n}=e;return bV(gV(vV,n,t??!1,r??!1),t,r)}function Qpt(e){const{x:t,y:r,z:n,m:i}=e,s=i!=null;return n!=null?s?vle(t,r,n,i,t,r,n,i):yle(t,r,n,t,r,n):s?gle(t,r,i,t,r,i):mle(t,r,t,r)}function wV(e){const{hasZ:t,hasM:r,rings:n}=e,i=aw(vV,n,t??!1,r??!1);return i?bV(i,t,r):null}function wle(e){const{hasZ:t,hasM:r,paths:n}=e,i=aw(vV,n,t??!1,r??!1);return i?bV(i,t,r):null}var aM;function PZ(e){return!Array.isArray(e[0])}function Kpt(e){return typeof e[0]?.[0]=="number"}function edt(e){if(!e)return;let{rings:t,hasM:r,hasZ:n,spatialReference:i}=e;switch(t??=[],Kpt(t)&&(t=[t]),t[0]?.[0]?.length){case 4:n??=!0,r??=!0;break;case 3:n??=r!==!0,r??=!n;break;default:n??=!1,r??=!1}return i??=Ke.WGS84,{...e,hasM:r,hasZ:n,rings:t,spatialReference:i}}let Wc=aM=class extends _c{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:r}=e;let n=!1,i=!1;for(const o of t)o.hasZ&&(n=!0),o.hasM&&(i=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:r};return n&&(s.hasZ=!0),i&&(s.hasM=!0),new aM(s)}constructor(e){super(edt(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Kae(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new it;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=wV(this);if(!t)return null;const r=new jt(t);return r.spatialReference=e,r}get isSelfIntersecting(){return vht(this.rings)}writeRings(e,t){t.rings=se(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(PZ(e)){const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i].toArray();t[r]=n}else t[r]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new aM;return e.spatialReference=this.spatialReference,e.rings=se(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const n=([i,s,o,a],[l,u,c,h])=>i===l&&s===u&&(o==null&&c==null||o===c)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=e.rings[i];if(!AT(s,o,n))return!1}return!0}contains(e){if(!e)return!1;const t=GT(e,this.spatialReference);return lV(this,t??e)}isClockwise(e){const t=PZ(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return yV(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],n=this.hasZ,i=this.hasM;return n&&!i?new it(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new it(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new it(r[0],r[1],r[2],r[3],this.spatialReference):new it(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(ow(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new it(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,n=t.map(i=>new it(i,r));return this.notifyChange("rings"),n}setPoint(e,t,r){return this._validateInputs(e,t)?(ow(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const n=this.rings[e];if(r&&(t<0||t>n.length)||!r&&(t<0||t>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};p([f({readOnly:!0})],Wc.prototype,"cache",null),p([f({readOnly:!0})],Wc.prototype,"centroid",null),p([f({readOnly:!0})],Wc.prototype,"extent",null),p([f({readOnly:!0})],Wc.prototype,"isSelfIntersecting",null),p([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Wc.prototype,"rings",void 0),p([Re("rings")],Wc.prototype,"writeRings",null),Wc=aM=p([W("esri.geometry.Polygon")],Wc);const ts=Wc;Wc.prototype.toJSON.isDefaultToJSON=!0;var b6;function tdt(e){return!Array.isArray(e[0])}function rdt(e){return typeof e[0]?.[0]=="number"}function ndt(e){if(!e)return;let{paths:t,hasM:r,hasZ:n,spatialReference:i}=e;switch(t??=[],rdt(t)&&(t=[t]),t[0]?.[0]?.length){case 4:n??=!0,r??=!0;break;case 3:n??=r!==!0,r??=!n;break;default:n??=!1,r??=!1}return i??=Ke.WGS84,{...e,hasM:r,hasZ:n,paths:t,spatialReference:i}}let Bf=b6=class extends _c{constructor(e){super(ndt(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=wle(this);if(!t)return null;const r=new jt(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=se(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(tdt(e)){const n=[];for(let i=0,s=e.length;i<s;i++)n[i]=e[i].toArray();t[r]=n}else t[r]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new b6;return e.spatialReference=this.spatialReference,e.paths=se(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],n=this.hasZ,i=this.hasM;return n&&!i?new it(r[0],r[1],r[2],void 0,this.spatialReference):i&&!n?new it(r[0],r[1],void 0,r[2],this.spatialReference):n&&i?new it(r[0],r[1],r[2],r[3],this.spatialReference):new it(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(ow(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,n=t.map(i=>new it(i,r));return this.notifyChange("paths"),n}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new it(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(ow(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const n=this.paths[e];if(r&&(t<0||t>n.length)||!r&&(t<0||t>=n.length))return!1}return!0}toJSON(e){return this.write({},e)}};p([f({readOnly:!0})],Bf.prototype,"cache",null),p([f({readOnly:!0})],Bf.prototype,"extent",null),p([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],Bf.prototype,"paths",void 0),p([Re("paths")],Bf.prototype,"writePaths",null),Bf=b6=p([W("esri.geometry.Polyline")],Bf);const Ca=Bf;Bf.prototype.toJSON.isDefaultToJSON=!0;function $T(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function uR(e){return e.points!==void 0}function cR(e){return e.x!==void 0&&e.y!==void 0}function f_(e){return e.paths!==void 0}function gh(e){return e.rings!==void 0}function An(e){return e==null?null:e instanceof _c?e:cR(e)?it.fromJSON(e):f_(e)?Ca.fromJSON(e):gh(e)?ts.fromJSON(e):uR(e)?n1.fromJSON(e):$T(e)?jt.fromJSON(e):null}function zs(e){return e?cR(e)?"esriGeometryPoint":f_(e)?"esriGeometryPolyline":gh(e)?"esriGeometryPolygon":$T(e)?"esriGeometryEnvelope":uR(e)?"esriGeometryMultipoint":null:null}const idt={esriGeometryPoint:it,esriGeometryPolyline:Ca,esriGeometryPolygon:ts,esriGeometryEnvelope:jt,esriGeometryMultipoint:n1,esriGeometryMultiPatch:ts};function sdt(e){return e&&idt[e]||null}const SE=Mn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),w6=Mn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),ji={base:_c,key:"type",typeMap:{extent:jt,multipoint:n1,point:it,polyline:Ca,polygon:ts}};eu(ji);const rr=e=>{let t=class extends e{clone(){const r=Qi(this);td(r,"unable to clone instance of non-accessor class");const n=r.metadata,i=r.store,s={},o=new Map;for(const l in n){const u=n[l],c=i?.originOf(l),h=u.clonable;if(u.readOnly||h===!1||c!==et.USER&&c!==et.DEFAULTS&&c!==et.WEB_MAP&&c!==et.WEB_SCENE)continue;const d=this[l];let m=null;m=typeof h=="function"?h(d):h==="reference"?d:ID(d),d!=null&&m==null||(c===et.DEFAULTS?o.set(l,m):s[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const l=Qi(a)?.store;if(l)for(const[u,c]of o)l.set(u,c,et.DEFAULTS)}return a}};return t=p([W("esri.core.Clonable")],t),t};let L5=class extends rr(mt){};L5=p([W("esri.core.Clonable")],L5);async function _V(e,t){const{WhereClause:r}=await Me(()=>import("./WhereClause-D233Ox-8-rXdW2d9D.js"),__vite__mapDeps([12,13,1,2]),import.meta.url).then(n=>n.W);return r.create(e,{fieldsIndex:t})}function hR(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}const DZ=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class i1 extends Error{}class odt extends i1{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class adt extends i1{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class ldt extends i1{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class tb extends i1{}class _le extends i1{constructor(t){super(`Invalid unit ${t}`)}}class ho extends i1{}class Zd extends i1{constructor(){super("Zone is an abstract class")}}const ot="numeric",dc="short",ul="long",P5={year:ot,month:ot,day:ot},xle={year:ot,month:dc,day:ot},udt={year:ot,month:dc,day:ot,weekday:dc},Sle={year:ot,month:ul,day:ot},Ele={year:ot,month:ul,day:ot,weekday:ul},Tle={hour:ot,minute:ot},Ile={hour:ot,minute:ot,second:ot},Ale={hour:ot,minute:ot,second:ot,timeZoneName:dc},Mle={hour:ot,minute:ot,second:ot,timeZoneName:ul},Cle={hour:ot,minute:ot,hourCycle:"h23"},kle={hour:ot,minute:ot,second:ot,hourCycle:"h23"},Rle={hour:ot,minute:ot,second:ot,hourCycle:"h23",timeZoneName:dc},Ole={hour:ot,minute:ot,second:ot,hourCycle:"h23",timeZoneName:ul},Nle={year:ot,month:ot,day:ot,hour:ot,minute:ot},Lle={year:ot,month:ot,day:ot,hour:ot,minute:ot,second:ot},Ple={year:ot,month:dc,day:ot,hour:ot,minute:ot},Dle={year:ot,month:dc,day:ot,hour:ot,minute:ot,second:ot},cdt={year:ot,month:dc,day:ot,weekday:dc,hour:ot,minute:ot},Fle={year:ot,month:ul,day:ot,hour:ot,minute:ot,timeZoneName:dc},jle={year:ot,month:ul,day:ot,hour:ot,minute:ot,second:ot,timeZoneName:dc},Ule={year:ot,month:ul,day:ot,weekday:ul,hour:ot,minute:ot,timeZoneName:ul},Ble={year:ot,month:ul,day:ot,weekday:ul,hour:ot,minute:ot,second:ot,timeZoneName:ul};class s1{get type(){throw new Zd}get name(){throw new Zd}get ianaName(){return this.name}get isUniversal(){throw new Zd}offsetName(t,r){throw new Zd}formatOffset(t,r){throw new Zd}offset(t){throw new Zd}equals(t){throw new Zd}get isValid(){throw new Zd}}let oL=null;class pR extends s1{static get instance(){return oL===null&&(oL=new pR),oL}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:n}){return Jle(t,r,n)}formatOffset(t,r){return bS(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let lM={};function hdt(e){return lM[e]||(lM[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),lM[e]}const pdt={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function ddt(e,t){const r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,s,o,a,l,u,c]=n;return[o,i,s,a,l,u,c]}function fdt(e,t){const r=e.formatToParts(t),n=[];for(let i=0;i<r.length;i++){const{type:s,value:o}=r[i],a=pdt[s];s==="era"?n[a]=o:er(a)||(n[a]=parseInt(o,10))}return n}let gI={};class Ga extends s1{static create(t){return gI[t]||(gI[t]=new Ga(t)),gI[t]}static resetCache(){gI={},lM={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ga.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:n}){return Jle(t,r,n,this.name)}formatOffset(t,r){return bS(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const n=hdt(this.name);let[i,s,o,a,l,u,c]=n.formatToParts?fdt(n,r):ddt(n,r);a==="BC"&&(i=-Math.abs(i)+1);const h=fR({year:i,month:s,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let d=+r;const m=d%1e3;return d-=m>=0?m:1e3+m,(h-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let FZ={};function mdt(e,t={}){const r=JSON.stringify([e,t]);let n=FZ[r];return n||(n=new Intl.ListFormat(e,t),FZ[r]=n),n}let _6={};function x6(e,t={}){const r=JSON.stringify([e,t]);let n=_6[r];return n||(n=new Intl.DateTimeFormat(e,t),_6[r]=n),n}let S6={};function ydt(e,t={}){const r=JSON.stringify([e,t]);let n=S6[r];return n||(n=new Intl.NumberFormat(e,t),S6[r]=n),n}let E6={};function gdt(e,t={}){const{base:r,...n}=t,i=JSON.stringify([e,n]);let s=E6[i];return s||(s=new Intl.RelativeTimeFormat(e,t),E6[i]=s),s}let uM=null;function vdt(){return uM||(uM=new Intl.DateTimeFormat().resolvedOptions().locale,uM)}let jZ={};function bdt(e){let t=jZ[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,jZ[e]=t}return t}function wdt(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let n,i;try{n=x6(e).resolvedOptions(),i=e}catch{const a=e.substring(0,r);n=x6(a).resolvedOptions(),i=a}const{numberingSystem:s,calendar:o}=n;return[i,s,o]}}function _dt(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function xdt(e){const t=[];for(let r=1;r<=12;r++){const n=Ut.utc(2009,r,1);t.push(e(n))}return t}function Sdt(e){const t=[];for(let r=1;r<=7;r++){const n=Ut.utc(2016,11,13+r);t.push(e(n))}return t}function vI(e,t,r,n){const i=e.listingMode();return i==="error"?null:i==="en"?r(t):n(t)}function Edt(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class Tdt{constructor(t,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:s,...o}=n;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=ydt(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):IV(t,3);return Oi(r,this.padTo)}}}class Idt{constructor(t,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Ga.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=x6(r,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Adt{constructor(t,r,n){this.opts={style:"long",...n},!r&&Wle()&&(this.rtf=gdt(t,n))}format(t,r){return this.rtf?this.rtf.format(t,r):Ydt(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const Mdt={firstDay:1,minimalDays:4,weekend:[6,7]};class Br{static fromOpts(t){return Br.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,n,i,s=!1){const o=t||li.defaultLocale,a=o||(s?"en-US":vdt()),l=r||li.defaultNumberingSystem,u=n||li.defaultOutputCalendar,c=T6(i)||li.defaultWeekSettings;return new Br(a,l,u,c,o)}static resetCache(){uM=null,_6={},S6={},E6={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return Br.create(t,r,n,i)}constructor(t,r,n,i,s){const[o,a,l]=wdt(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=n||l||null,this.weekSettings=i,this.intl=_dt(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Edt(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Br.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,T6(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return vI(this,t,Qle,()=>{const n=r?{month:t,day:"numeric"}:{month:t},i=r?"format":"standalone";return this.monthsCache[i][t]||(this.monthsCache[i][t]=xdt(s=>this.extract(s,n,"month"))),this.monthsCache[i][t]})}weekdays(t,r=!1){return vI(this,t,tue,()=>{const n=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=r?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=Sdt(s=>this.extract(s,n,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return vI(this,void 0,()=>rue,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ut.utc(2016,11,13,9),Ut.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return vI(this,t,nue,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ut.utc(-40,1,1),Ut.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[t]})}extract(t,r,n){const i=this.dtFormatter(t,r),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(t={}){return new Tdt(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Idt(t,this.intl,r)}relFormatter(t={}){return new Adt(this.intl,this.isEnglish(),t)}listFormatter(t={}){return mdt(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Zle()?bdt(this.locale):Mdt}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let aL=null;class Ji extends s1{static get utcInstance(){return aL===null&&(aL=new Ji(0)),aL}static instance(t){return t===0?Ji.utcInstance:new Ji(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ji(mR(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${bS(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${bS(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return bS(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Cdt extends s1{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function tm(e,t){if(er(e)||e===null)return t;if(e instanceof s1)return e;if(Pdt(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?pR.instance:r==="utc"||r==="gmt"?Ji.utcInstance:Ji.parseSpecifier(r)||Ga.create(e)}else return gm(e)?Ji.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Cdt(e)}const xV={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},UZ={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},kdt=xV.hanidec.replace(/[\[|\]]/g,"").split("");function Rdt(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);if(e[r].search(xV.hanidec)!==-1)t+=kdt.indexOf(e[r]);else for(const i in UZ){const[s,o]=UZ[i];n>=s&&n<=o&&(t+=n-s)}}return parseInt(t,10)}else return t}let X1={};function Odt(){X1={}}function du({numberingSystem:e},t=""){const r=e||"latn";return X1[r]||(X1[r]={}),X1[r][t]||(X1[r][t]=new RegExp(`${xV[r]}${t}`)),X1[r][t]}let BZ=()=>Date.now(),VZ="system",GZ=null,zZ=null,$Z=null,qZ=60,HZ,WZ=null;class li{static get now(){return BZ}static set now(t){BZ=t}static set defaultZone(t){VZ=t}static get defaultZone(){return tm(VZ,pR.instance)}static get defaultLocale(){return GZ}static set defaultLocale(t){GZ=t}static get defaultNumberingSystem(){return zZ}static set defaultNumberingSystem(t){zZ=t}static get defaultOutputCalendar(){return $Z}static set defaultOutputCalendar(t){$Z=t}static get defaultWeekSettings(){return WZ}static set defaultWeekSettings(t){WZ=T6(t)}static get twoDigitCutoffYear(){return qZ}static set twoDigitCutoffYear(t){qZ=t%100}static get throwOnInvalid(){return HZ}static set throwOnInvalid(t){HZ=t}static resetCaches(){Br.resetCache(),Ga.resetCache(),Ut.resetCache(),Odt()}}class Yu{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Vle=[0,31,59,90,120,151,181,212,243,273,304,334],Gle=[0,31,60,91,121,152,182,213,244,274,305,335];function Ul(e,t){return new Yu("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function SV(e,t,r){const n=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function zle(e,t,r){return r+(qT(e)?Gle:Vle)[t-1]}function $le(e,t){const r=qT(e)?Gle:Vle,n=r.findIndex(s=>s<t),i=t-r[n];return{month:n+1,day:i}}function EV(e,t){return(e-t+7)%7+1}function D5(e,t=4,r=1){const{year:n,month:i,day:s}=e,o=zle(n,i,s),a=EV(SV(n,i,s),r);let l=Math.floor((o-a+14-t)/7),u;return l<1?(u=n-1,l=EE(u,t,r)):l>EE(n,t,r)?(u=n+1,l=1):u=n,{weekYear:u,weekNumber:l,weekday:a,...yR(e)}}function ZZ(e,t=4,r=1){const{weekYear:n,weekNumber:i,weekday:s}=e,o=EV(SV(n,1,t),r),a=Ib(n);let l=i*7+s-o-7+t,u;l<1?(u=n-1,l+=Ib(u)):l>a?(u=n+1,l-=Ib(n)):u=n;const{month:c,day:h}=$le(u,l);return{year:u,month:c,day:h,...yR(e)}}function lL(e){const{year:t,month:r,day:n}=e,i=zle(t,r,n);return{year:t,ordinal:i,...yR(e)}}function JZ(e){const{year:t,ordinal:r}=e,{month:n,day:i}=$le(t,r);return{year:t,month:n,day:i,...yR(e)}}function YZ(e,t){if(!er(e.localWeekday)||!er(e.localWeekNumber)||!er(e.localWeekYear)){if(!er(e.weekday)||!er(e.weekNumber)||!er(e.weekYear))throw new tb("Cannot mix locale-based week fields with ISO-based week fields");return er(e.localWeekday)||(e.weekday=e.localWeekday),er(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),er(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Ndt(e,t=4,r=1){const n=dR(e.weekYear),i=Bl(e.weekNumber,1,EE(e.weekYear,t,r)),s=Bl(e.weekday,1,7);return n?i?s?!1:Ul("weekday",e.weekday):Ul("week",e.weekNumber):Ul("weekYear",e.weekYear)}function Ldt(e){const t=dR(e.year),r=Bl(e.ordinal,1,Ib(e.year));return t?r?!1:Ul("ordinal",e.ordinal):Ul("year",e.year)}function qle(e){const t=dR(e.year),r=Bl(e.month,1,12),n=Bl(e.day,1,F5(e.year,e.month));return t?r?n?!1:Ul("day",e.day):Ul("month",e.month):Ul("year",e.year)}function Hle(e){const{hour:t,minute:r,second:n,millisecond:i}=e,s=Bl(t,0,23)||t===24&&r===0&&n===0&&i===0,o=Bl(r,0,59),a=Bl(n,0,59),l=Bl(i,0,999);return s?o?a?l?!1:Ul("millisecond",i):Ul("second",n):Ul("minute",r):Ul("hour",t)}function er(e){return typeof e>"u"}function gm(e){return typeof e=="number"}function dR(e){return typeof e=="number"&&e%1===0}function Pdt(e){return typeof e=="string"}function Ddt(e){return Object.prototype.toString.call(e)==="[object Date]"}function Wle(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Zle(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Fdt(e){return Array.isArray(e)?e:[e]}function XZ(e,t,r){if(e.length!==0)return e.reduce((n,i)=>{const s=[t(i),i];return n&&r(n[0],s[0])===n[0]?n:s},null)[1]}function jdt(e,t){return t.reduce((r,n)=>(r[n]=e[n],r),{})}function lw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T6(e){if(e==null)return null;if(typeof e!="object")throw new ho("Week settings must be an object");if(!Bl(e.firstDay,1,7)||!Bl(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Bl(t,1,7)))throw new ho("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Bl(e,t,r){return dR(e)&&e>=t&&e<=r}function Udt(e,t){return e-t*Math.floor(e/t)}function Oi(e,t=2){const r=e<0;let n;return r?n="-"+(""+-e).padStart(t,"0"):n=(""+e).padStart(t,"0"),n}function Vf(e){if(!(er(e)||e===null||e===""))return parseInt(e,10)}function y0(e){if(!(er(e)||e===null||e===""))return parseFloat(e)}function TV(e){if(!(er(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function IV(e,t,r=!1){const n=10**t;return(r?Math.trunc:Math.round)(e*n)/n}function qT(e){return e%4===0&&(e%100!==0||e%400===0)}function Ib(e){return qT(e)?366:365}function F5(e,t){const r=Udt(t-1,12)+1,n=e+(t-r)/12;return r===2?qT(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function fR(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function QZ(e,t,r){return-EV(SV(e,1,t),r)+t-1}function EE(e,t=4,r=1){const n=QZ(e,t,r),i=QZ(e+1,t,r);return(Ib(e)-n+i)/7}function I6(e){return e>99?e:e>li.twoDigitCutoffYear?1900+e:2e3+e}function Jle(e,t,r,n=null){const i=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function mR(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const n=parseInt(t,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function Yle(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new ho(`Invalid unit value ${e}`);return t}function j5(e,t){const r={};for(const n in e)if(lw(e,n)){const i=e[n];if(i==null)continue;r[t(n)]=Yle(i)}return r}function bS(e,t){const r=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Oi(r,2)}:${Oi(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Oi(r,2)}${Oi(n,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function yR(e){return jdt(e,["hour","minute","second","millisecond"])}const Bdt=["January","February","March","April","May","June","July","August","September","October","November","December"],Xle=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vdt=["J","F","M","A","M","J","J","A","S","O","N","D"];function Qle(e){switch(e){case"narrow":return[...Vdt];case"short":return[...Xle];case"long":return[...Bdt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Kle=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],eue=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Gdt=["M","T","W","T","F","S","S"];function tue(e){switch(e){case"narrow":return[...Gdt];case"short":return[...eue];case"long":return[...Kle];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const rue=["AM","PM"],zdt=["Before Christ","Anno Domini"],$dt=["BC","AD"],qdt=["B","A"];function nue(e){switch(e){case"narrow":return[...qdt];case"short":return[...$dt];case"long":return[...zdt];default:return null}}function Hdt(e){return rue[e.hour<12?0:1]}function Wdt(e,t){return tue(t)[e.weekday-1]}function Zdt(e,t){return Qle(t)[e.month-1]}function Jdt(e,t){return nue(t)[e.year<0?0:1]}function Ydt(e,t,r="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const h=e==="days";switch(t){case 1:return h?"tomorrow":`next ${i[e][0]}`;case-1:return h?"yesterday":`last ${i[e][0]}`;case 0:return h?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=i[e],c=n?l?u[1]:u[2]||u[1]:l?i[e][0]:e;return o?`${a} ${c} ago`:`in ${a} ${c}`}function KZ(e,t){let r="";for(const n of e)n.literal?r+=n.val:r+=t(n.val);return r}const Xdt={D:P5,DD:xle,DDD:Sle,DDDD:Ele,t:Tle,tt:Ile,ttt:Ale,tttt:Mle,T:Cle,TT:kle,TTT:Rle,TTTT:Ole,f:Nle,ff:Ple,fff:Fle,ffff:Ule,F:Lle,FF:Dle,FFF:jle,FFFF:Ble};class bo{static create(t,r={}){return new bo(t,r)}static parseFormat(t){let r=null,n="",i=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),r=null,n="",i=!i):i||a===r?n+=a:(n.length>0&&s.push({literal:/^\s+$/.test(n),val:n}),n=a,r=a)}return n.length>0&&s.push({literal:i||/^\s+$/.test(n),val:n}),s}static macroTokenToFormatOpts(t){return Xdt[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return Oi(t,r);const n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(t)}formatDateTimeFromString(t,r){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,y)=>this.loc.extract(t,m,y),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>n?Hdt(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,y)=>n?Zdt(t,m):s(y?{month:m}:{month:m,day:"numeric"},"month"),u=(m,y)=>n?Wdt(t,m):s(y?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),c=m=>{const y=bo.macroTokenToFormatOpts(m);return y?this.formatWithSystemDefault(t,y):m},h=m=>n?Jdt(t,m):s({era:m},"era"),d=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(t.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(t.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(t.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return c(m)}};return KZ(bo.parseFormat(r),d)}formatDurationFromString(t,r){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>u=>{const c=n(u);return c?this.num(l.get(c),u.length):u},s=bo.parseFormat(r),o=s.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=t.shiftTo(...o.map(n).filter(l=>l));return KZ(s,i(a))}}const iue=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function m_(...e){const t=e.reduce((r,n)=>r+n.source,"");return RegExp(`^${t}$`)}function y_(...e){return t=>e.reduce(([r,n,i],s)=>{const[o,a,l]=s(t,i);return[{...r,...o},a||n,l]},[{},null,1]).slice(0,2)}function g_(e,...t){if(e==null)return[null,null];for(const[r,n]of t){const i=r.exec(e);if(i)return n(i)}return[null,null]}function sue(...e){return(t,r)=>{const n={};let i;for(i=0;i<e.length;i++)n[e[i]]=Vf(t[r+i]);return[n,null,r+i]}}const oue=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qdt=`(?:${oue.source}?(?:\\[(${iue.source})\\])?)?`,AV=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,aue=RegExp(`${AV.source}${Qdt}`),MV=RegExp(`(?:T${aue.source})?`),Kdt=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,eft=/(\d{4})-?W(\d\d)(?:-?(\d))?/,tft=/(\d{4})-?(\d{3})/,rft=sue("weekYear","weekNumber","weekDay"),nft=sue("year","ordinal"),ift=/(\d{4})-(\d\d)-(\d\d)/,lue=RegExp(`${AV.source} ?(?:${oue.source}|(${iue.source}))?`),sft=RegExp(`(?: ${lue.source})?`);function Ab(e,t,r){const n=e[t];return er(n)?r:Vf(n)}function oft(e,t){return[{year:Ab(e,t),month:Ab(e,t+1,1),day:Ab(e,t+2,1)},null,t+3]}function v_(e,t){return[{hours:Ab(e,t,0),minutes:Ab(e,t+1,0),seconds:Ab(e,t+2,0),milliseconds:TV(e[t+3])},null,t+4]}function HT(e,t){const r=!e[t]&&!e[t+1],n=mR(e[t+1],e[t+2]),i=r?null:Ji.instance(n);return[{},i,t+3]}function WT(e,t){const r=e[t]?Ga.create(e[t]):null;return[{},r,t+1]}const aft=RegExp(`^T?${AV.source}$`),lft=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function uft(e){const[t,r,n,i,s,o,a,l,u]=e,c=t[0]==="-",h=l&&l[0]==="-",d=(m,y=!1)=>m!==void 0&&(y||m&&c)?-m:m;return[{years:d(y0(r)),months:d(y0(n)),weeks:d(y0(i)),days:d(y0(s)),hours:d(y0(o)),minutes:d(y0(a)),seconds:d(y0(l),l==="-0"),milliseconds:d(TV(u),h)}]}const cft={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function CV(e,t,r,n,i,s,o){const a={year:t.length===2?I6(Vf(t)):Vf(t),month:Xle.indexOf(r)+1,day:Vf(n),hour:Vf(i),minute:Vf(s)};return o&&(a.second=Vf(o)),e&&(a.weekday=e.length>3?Kle.indexOf(e)+1:eue.indexOf(e)+1),a}const hft=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function pft(e){const[,t,r,n,i,s,o,a,l,u,c,h]=e,d=CV(t,i,n,r,s,o,a);let m;return l?m=cft[l]:u?m=0:m=mR(c,h),[d,new Ji(m)]}function dft(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const fft=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,mft=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yft=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function eJ(e){const[,t,r,n,i,s,o,a]=e;return[CV(t,i,n,r,s,o,a),Ji.utcInstance]}function gft(e){const[,t,r,n,i,s,o,a]=e;return[CV(t,a,r,n,i,s,o),Ji.utcInstance]}const vft=m_(Kdt,MV),bft=m_(eft,MV),wft=m_(tft,MV),_ft=m_(aue),uue=y_(oft,v_,HT,WT),xft=y_(rft,v_,HT,WT),Sft=y_(nft,v_,HT,WT),Eft=y_(v_,HT,WT);function Tft(e){return g_(e,[vft,uue],[bft,xft],[wft,Sft],[_ft,Eft])}function Ift(e){return g_(dft(e),[hft,pft])}function Aft(e){return g_(e,[fft,eJ],[mft,eJ],[yft,gft])}function Mft(e){return g_(e,[lft,uft])}const Cft=y_(v_);function kft(e){return g_(e,[aft,Cft])}const Rft=m_(ift,sft),Oft=m_(lue),Nft=y_(v_,HT,WT);function Lft(e){return g_(e,[Rft,uue],[Oft,Nft])}const tJ="Invalid Duration",cue={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Pft={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...cue},vl=146097/400,O1=146097/4800,Dft={years:{quarters:4,months:12,weeks:vl/7,days:vl,hours:vl*24,minutes:vl*24*60,seconds:vl*24*60*60,milliseconds:vl*24*60*60*1e3},quarters:{months:3,weeks:vl/28,days:vl/4,hours:vl*24/4,minutes:vl*24*60/4,seconds:vl*24*60*60/4,milliseconds:vl*24*60*60*1e3/4},months:{weeks:O1/7,days:O1,hours:O1*24,minutes:O1*24*60,seconds:O1*24*60*60,milliseconds:O1*24*60*60*1e3},...cue},$y=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Fft=$y.slice(0).reverse();function Jd(e,t,r=!1){const n={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Sr(n)}function hue(e,t){let r=t.milliseconds??0;for(const n of Fft.slice(1))t[n]&&(r+=t[n]*e[n].milliseconds);return r}function rJ(e,t){const r=hue(e,t)<0?-1:1;$y.reduceRight((n,i)=>{if(er(t[i]))return n;if(n){const s=t[n]*r,o=e[i][n],a=Math.floor(s/o);t[i]+=a*r,t[n]-=a*o*r}return i},null),$y.reduce((n,i)=>{if(er(t[i]))return n;if(n){const s=t[n]%1;t[n]-=s,t[i]+=s*e[n][i]}return i},null)}function jft(e){const t={};for(const[r,n]of Object.entries(e))n!==0&&(t[r]=n);return t}class Sr{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let n=r?Dft:Pft;t.matrix&&(n=t.matrix),this.values=t.values,this.loc=t.loc||Br.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(t,r){return Sr.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new ho(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Sr({values:j5(t,Sr.normalizeUnit),loc:Br.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(gm(t))return Sr.fromMillis(t);if(Sr.isDuration(t))return t;if(typeof t=="object")return Sr.fromObject(t);throw new ho(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[n]=Mft(t);return n?Sr.fromObject(n,r):Sr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[n]=kft(t);return n?Sr.fromObject(n,r):Sr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new ho("need to specify a reason the Duration is invalid");const n=t instanceof Yu?t:new Yu(t,r);if(li.throwOnInvalid)throw new ldt(n);return new Sr({invalid:n})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new _le(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?bo.create(this.loc,n).formatDurationFromString(this,t):tJ}toHuman(t={}){if(!this.isValid)return tJ;const r=$y.map(n=>{const i=this.values[n];return er(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=IV(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ut.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?hue(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Sr.fromDurationLike(t),n={};for(const i of $y)(lw(r.values,i)||lw(this.values,i))&&(n[i]=r.get(i)+this.get(i));return Jd(this,{values:n},!0)}minus(t){if(!this.isValid)return this;const r=Sr.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const n of Object.keys(this.values))r[n]=Yle(t(this.values[n],n));return Jd(this,{values:r},!0)}get(t){return this[Sr.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...j5(t,Sr.normalizeUnit)};return Jd(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){const s={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:i,conversionAccuracy:n};return Jd(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return rJ(this.matrix,t),Jd(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=jft(this.normalize().shiftToAll().toObject());return Jd(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Sr.normalizeUnit(o));const r={},n={},i=this.toObject();let s;for(const o of $y)if(t.indexOf(o)>=0){s=o;let a=0;for(const u in n)a+=this.matrix[u][o]*n[u],n[u]=0;gm(i[o])&&(a+=i[o]);const l=Math.trunc(a);r[o]=l,n[o]=(a*1e3-l*1e3)/1e3}else gm(i[o])&&(n[o]=i[o]);for(const o in n)n[o]!==0&&(r[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return rJ(this.matrix,r),Jd(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Jd(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of $y)if(!r(this.values[n],t.values[n]))return!1;return!0}}const N1="Invalid Interval";function Uft(e,t){return!e||!e.isValid?si.invalid("missing or invalid start"):!t||!t.isValid?si.invalid("missing or invalid end"):t<e?si.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class si{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new ho("need to specify a reason the Interval is invalid");const n=t instanceof Yu?t:new Yu(t,r);if(li.throwOnInvalid)throw new adt(n);return new si({invalid:n})}static fromDateTimes(t,r){const n=W_(t),i=W_(r);return Uft(n,i)??new si({start:n,end:i})}static after(t,r){const n=Sr.fromDurationLike(r),i=W_(t);return si.fromDateTimes(i,i.plus(n))}static before(t,r){const n=Sr.fromDurationLike(r),i=W_(t);return si.fromDateTimes(i.minus(n),i)}static fromISO(t,r){const[n,i]=(t||"").split("/",2);if(n&&i){let s,o;try{s=Ut.fromISO(n,r),o=s.isValid}catch{o=!1}let a,l;try{a=Ut.fromISO(i,r),l=a.isValid}catch{l=!1}if(o&&l)return si.fromDateTimes(s,a);if(o){const u=Sr.fromISO(i,r);if(u.isValid)return si.after(s,u)}else if(l){const u=Sr.fromISO(n,r);if(u.isValid)return si.before(a,u)}}return si.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const n=this.start.startOf(t,r);let i;return r?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(t,r),Math.floor(i.diff(n,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?si.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(W_).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),n=[];let{s:i}=this,s=0;for(;i<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;n.push(si.fromDateTimes(i,a)),i=a,s+=1}return n}splitBy(t){const r=Sr.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(r.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(si.fromDateTimes(n,s)),n=s,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return r>=n?null:si.fromDateTimes(r,n)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return si.fromDateTimes(r,n)}static merge(t){const[r,n]=t.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return n&&r.push(n),r}static xor(t){let r=null,n=0;const i=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?r=l.time:(r&&+r!=+l.time&&i.push(si.fromDateTimes(r,l.time)),r=null);return si.merge(i)}difference(...t){return si.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:N1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=P5,r={}){return this.isValid?bo.create(this.s.loc.clone(r),t).formatInterval(this):N1}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:N1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:N1}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:N1}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:N1}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Sr.invalid(this.invalidReason)}mapEndpoints(t){return si.fromDateTimes(t(this.s),t(this.e))}}class bI{static hasDST(t=li.defaultZone){const r=Ut.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Ga.isValidZone(t)}static normalizeZone(t){return tm(t,li.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Br.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Br.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Br.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Br.create(r,n,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Br.create(r,n,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Br.create(r,n,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||Br.create(r,n,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Br.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Br.create(r,null,"gregory").eras(t)}static features(){return{relative:Wle(),localeWeek:Zle()}}}function nJ(e,t){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(t)-r(e);return Math.floor(Sr.fromMillis(n).as("days"))}function Bft(e,t,r){const n=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=nJ(l,u);return(c-c%7)/7}],["days",nJ]],i={},s=e;let o,a;for(const[l,u]of n)r.indexOf(l)>=0&&(o=l,i[l]=u(e,t),a=s.plus(i),a>t?(i[l]--,e=s.plus(i),e>t&&(a=e,i[l]--,e=s.plus(i))):e=a);return[e,i,a,o]}function Vft(e,t,r,n){let[i,s,o,a]=Bft(e,t,r);const l=t-i,u=r.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);u.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const c=Sr.fromObject(s,n);return u.length>0?Sr.fromMillis(l,n).shiftTo(...u).plus(c):c}const Gft="missing Intl.DateTimeFormat.formatToParts support";function Rr(e,t=r=>r){return{regex:e,deser:([r])=>t(Rdt(r))}}const zft="",pue=`[ ${zft}]`,due=new RegExp(pue,"g");function $ft(e){return e.replace(/\./g,"\\.?").replace(due,pue)}function iJ(e){return e.replace(/\./g,"").replace(due," ").toLowerCase()}function fu(e,t){return e===null?null:{regex:RegExp(e.map($ft).join("|")),deser:([r])=>e.findIndex(n=>iJ(r)===iJ(n))+t}}function sJ(e,t){return{regex:e,deser:([,r,n])=>mR(r,n),groups:t}}function wI(e){return{regex:e,deser:([t])=>t}}function qft(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Hft(e,t){const r=du(t),n=du(t,"{2}"),i=du(t,"{3}"),s=du(t,"{4}"),o=du(t,"{6}"),a=du(t,"{1,2}"),l=du(t,"{1,3}"),u=du(t,"{1,6}"),c=du(t,"{1,9}"),h=du(t,"{2,4}"),d=du(t,"{4,6}"),m=g=>({regex:RegExp(qft(g.val)),deser:([b])=>b,literal:!0}),y=(g=>{if(e.literal)return m(g);switch(g.val){case"G":return fu(t.eras("short"),0);case"GG":return fu(t.eras("long"),0);case"y":return Rr(u);case"yy":return Rr(h,I6);case"yyyy":return Rr(s);case"yyyyy":return Rr(d);case"yyyyyy":return Rr(o);case"M":return Rr(a);case"MM":return Rr(n);case"MMM":return fu(t.months("short",!0),1);case"MMMM":return fu(t.months("long",!0),1);case"L":return Rr(a);case"LL":return Rr(n);case"LLL":return fu(t.months("short",!1),1);case"LLLL":return fu(t.months("long",!1),1);case"d":return Rr(a);case"dd":return Rr(n);case"o":return Rr(l);case"ooo":return Rr(i);case"HH":return Rr(n);case"H":return Rr(a);case"hh":return Rr(n);case"h":return Rr(a);case"mm":return Rr(n);case"m":return Rr(a);case"q":return Rr(a);case"qq":return Rr(n);case"s":return Rr(a);case"ss":return Rr(n);case"S":return Rr(l);case"SSS":return Rr(i);case"u":return wI(c);case"uu":return wI(a);case"uuu":return Rr(r);case"a":return fu(t.meridiems(),0);case"kkkk":return Rr(s);case"kk":return Rr(h,I6);case"W":return Rr(a);case"WW":return Rr(n);case"E":case"c":return Rr(r);case"EEE":return fu(t.weekdays("short",!1),1);case"EEEE":return fu(t.weekdays("long",!1),1);case"ccc":return fu(t.weekdays("short",!0),1);case"cccc":return fu(t.weekdays("long",!0),1);case"Z":case"ZZ":return sJ(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return sJ(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return wI(/[a-z_+-/]{1,256}?/i);case" ":return wI(/[^\S\n\r]/);default:return m(g)}})(e)||{invalidReason:Gft};return y.token=e,y}const Wft={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zft(e,t,r){const{type:n,value:i}=e;if(n==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=t[n];let o=n;n==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=Wft[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Jft(e){return[`^${e.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,e]}function Yft(e,t,r){const n=e.match(t);if(n){const i={};let s=1;for(const o in r)if(lw(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,i]}else return[n,{}]}function Xft(e){const t=i=>{switch(i){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,n;return er(e.z)||(r=Ga.create(e.z)),er(e.Z)||(r||(r=new Ji(e.Z)),n=e.Z),er(e.q)||(e.M=(e.q-1)*3+1),er(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),er(e.u)||(e.S=TV(e.u)),[Object.keys(e).reduce((i,s)=>{const o=t(s);return o&&(i[o]=e[s]),i},{}),r,n]}let uL=null;function Qft(){return uL||(uL=Ut.fromMillis(1555555555555)),uL}function Kft(e,t){if(e.literal)return e;const r=bo.macroTokenToFormatOpts(e.val),n=gue(r,t);return n==null||n.includes(void 0)?e:n}function fue(e,t){return Array.prototype.concat(...e.map(r=>Kft(r,t)))}class mue{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=fue(bo.parseFormat(r),t),this.units=this.tokens.map(n=>Hft(n,t)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=Jft(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(t){if(this.isValid){const[r,n]=Yft(t,this.regex,this.handlers),[i,s,o]=n?Xft(n):[null,null,void 0];if(lw(n,"a")&&lw(n,"H"))throw new tb("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:s,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function yue(e,t,r){return new mue(e,r).explainFromTokens(t)}function emt(e,t,r){const{result:n,zone:i,specificOffset:s,invalidReason:o}=yue(e,t,r);return[n,i,s,o]}function gue(e,t){if(!e)return null;const r=bo.create(t,e).dtFormatter(Qft()),n=r.formatToParts(),i=r.resolvedOptions();return n.map(s=>Zft(s,e,i))}const cL="Invalid DateTime",oJ=864e13;function Q2(e){return new Yu("unsupported zone",`the zone "${e.name}" is not supported`)}function hL(e){return e.weekData===null&&(e.weekData=D5(e.c)),e.weekData}function pL(e){return e.localWeekData===null&&(e.localWeekData=D5(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function g0(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Ut({...r,...t,old:r})}function vue(e,t,r){let n=e-t*60*1e3;const i=r.offset(n);if(t===i)return[n,t];n-=(i-t)*60*1e3;const s=r.offset(n);return i===s?[n,i]:[e-Math.min(i,s)*60*1e3,Math.max(i,s)]}function _I(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function cM(e,t,r){return vue(fR(e),t,r)}function aJ(e,t){const r=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:n,month:i,day:Math.min(e.c.day,F5(n,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Sr.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=fR(s);let[l,u]=vue(a,r,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function L1(e,t,r,n,i,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,u=Ut.fromObject(e,{...r,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Ut.invalid(new Yu("unparsable",`the input "${i}" can't be parsed as ${n}`))}function xI(e,t,r=!0){return e.isValid?bo.create(Br.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function dL(e,t){const r=e.c.year>9999||e.c.year<0;let n="";return r&&e.c.year>=0&&(n+="+"),n+=Oi(e.c.year,r?6:4),t?(n+="-",n+=Oi(e.c.month),n+="-",n+=Oi(e.c.day)):(n+=Oi(e.c.month),n+=Oi(e.c.day)),n}function lJ(e,t,r,n,i,s){let o=Oi(e.c.hour);return t?(o+=":",o+=Oi(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=Oi(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=Oi(e.c.second),(e.c.millisecond!==0||!n)&&(o+=".",o+=Oi(e.c.millisecond,3))),i&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Oi(Math.trunc(-e.o/60)),o+=":",o+=Oi(Math.trunc(-e.o%60))):(o+="+",o+=Oi(Math.trunc(e.o/60)),o+=":",o+=Oi(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const bue={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},tmt={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},rmt={ordinal:1,hour:0,minute:0,second:0,millisecond:0},wue=["year","month","day","hour","minute","second","millisecond"],nmt=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],imt=["year","ordinal","hour","minute","second","millisecond"];function smt(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new _le(e);return t}function uJ(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return smt(e)}}function omt(e){return pM[e]||(hM===void 0&&(hM=li.now()),pM[e]=e.offset(hM)),pM[e]}function cJ(e,t){const r=tm(t.zone,li.defaultZone);if(!r.isValid)return Ut.invalid(Q2(r));const n=Br.fromObject(t);let i,s;if(er(e.year))i=li.now();else{for(const l of wue)er(e[l])&&(e[l]=bue[l]);const o=qle(e)||Hle(e);if(o)return Ut.invalid(o);const a=omt(r);[i,s]=cM(e,a,r)}return new Ut({ts:i,zone:r,loc:n,o:s})}function hJ(e,t,r){const n=er(r.round)?!0:r.round,i=(o,a)=>(o=IV(o,n||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return i(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(e>t?-0:0,r.units[r.units.length-1])}function pJ(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}let hM,pM={};class Ut{constructor(t){const r=t.zone||li.defaultZone;let n=t.invalid||(Number.isNaN(t.ts)?new Yu("invalid input"):null)||(r.isValid?null:Q2(r));this.ts=er(t.ts)?li.now():t.ts;let i=null,s=null;if(!n)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[i,s]=[t.old.c,t.old.o];else{const o=gm(t.o)&&!t.old?t.o:r.offset(this.ts);i=_I(this.ts,o),n=Number.isNaN(i.year)?new Yu("invalid input"):null,i=n?null:i,s=n?null:o}this._zone=r,this.loc=t.loc||Br.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new Ut({})}static local(){const[t,r]=pJ(arguments),[n,i,s,o,a,l,u]=r;return cJ({year:n,month:i,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,r]=pJ(arguments),[n,i,s,o,a,l,u]=r;return t.zone=Ji.utcInstance,cJ({year:n,month:i,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,r={}){const n=Ddt(t)?t.valueOf():NaN;if(Number.isNaN(n))return Ut.invalid("invalid input");const i=tm(r.zone,li.defaultZone);return i.isValid?new Ut({ts:n,zone:i,loc:Br.fromObject(r)}):Ut.invalid(Q2(i))}static fromMillis(t,r={}){if(gm(t))return t<-oJ||t>oJ?Ut.invalid("Timestamp out of range"):new Ut({ts:t,zone:tm(r.zone,li.defaultZone),loc:Br.fromObject(r)});throw new ho(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(gm(t))return new Ut({ts:t*1e3,zone:tm(r.zone,li.defaultZone),loc:Br.fromObject(r)});throw new ho("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const n=tm(r.zone,li.defaultZone);if(!n.isValid)return Ut.invalid(Q2(n));const i=Br.fromObject(r),s=j5(t,uJ),{minDaysInFirstWeek:o,startOfWeek:a}=YZ(s,i),l=li.now(),u=er(r.specificOffset)?n.offset(l):r.specificOffset,c=!er(s.ordinal),h=!er(s.year),d=!er(s.month)||!er(s.day),m=h||d,y=s.weekYear||s.weekNumber;if((m||c)&&y)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(d&&c)throw new tb("Can't mix ordinal dates with month/day");const g=y||s.weekday&&!m;let b,S,E=_I(l,u);g?(b=nmt,S=tmt,E=D5(E,o,a)):c?(b=imt,S=rmt,E=lL(E)):(b=wue,S=bue);let x=!1;for(const N of b){const F=s[N];er(F)?x?s[N]=S[N]:s[N]=E[N]:x=!0}const w=g?Ndt(s,o,a):c?Ldt(s):qle(s),T=w||Hle(s);if(T)return Ut.invalid(T);const I=g?ZZ(s,o,a):c?JZ(s):s,[M,C]=cM(I,u,n),k=new Ut({ts:M,zone:n,o:C,loc:i});return s.weekday&&m&&t.weekday!==k.weekday?Ut.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${k.toISO()}`):k.isValid?k:Ut.invalid(k.invalid)}static fromISO(t,r={}){const[n,i]=Tft(t);return L1(n,i,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[n,i]=Ift(t);return L1(n,i,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[n,i]=Aft(t);return L1(n,i,r,"HTTP",r)}static fromFormat(t,r,n={}){if(er(t)||er(r))throw new ho("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=n,o=Br.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,u,c]=emt(o,t,r);return c?Ut.invalid(c):L1(a,l,n,`format ${r}`,t,u)}static fromString(t,r,n={}){return Ut.fromFormat(t,r,n)}static fromSQL(t,r={}){const[n,i]=Lft(t);return L1(n,i,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new ho("need to specify a reason the DateTime is invalid");const n=t instanceof Yu?t:new Yu(t,r);if(li.throwOnInvalid)throw new odt(n);return new Ut({invalid:n})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const n=gue(t,Br.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(t,r={}){return fue(bo.parseFormat(t),Br.fromObject(r)).map(n=>n.val).join("")}static resetCache(){hM=void 0,pM={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?hL(this).weekYear:NaN}get weekNumber(){return this.isValid?hL(this).weekNumber:NaN}get weekday(){return this.isValid?hL(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?pL(this).weekday:NaN}get localWeekNumber(){return this.isValid?pL(this).weekNumber:NaN}get localWeekYear(){return this.isValid?pL(this).weekYear:NaN}get ordinal(){return this.isValid?lL(this.c).ordinal:NaN}get monthShort(){return this.isValid?bI.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?bI.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?bI.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?bI.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,n=fR(this.c),i=this.zone.offset(n-t),s=this.zone.offset(n+t),o=this.zone.offset(n-i*r),a=this.zone.offset(n-s*r);if(o===a)return[this];const l=n-o*r,u=n-a*r,c=_I(l,o),h=_I(u,a);return c.hour===h.hour&&c.minute===h.minute&&c.second===h.second&&c.millisecond===h.millisecond?[g0(this,{ts:l}),g0(this,{ts:u})]:[this]}get isInLeapYear(){return qT(this.year)}get daysInMonth(){return F5(this.year,this.month)}get daysInYear(){return this.isValid?Ib(this.year):NaN}get weeksInWeekYear(){return this.isValid?EE(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?EE(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:n,calendar:i}=bo.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(t=0,r={}){return this.setZone(Ji.instance(t),r)}toLocal(){return this.setZone(li.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(t=tm(t,li.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(r||n){const s=t.offset(this.ts),o=this.toObject();[i]=cM(o,s,t)}return g0(this,{ts:i,zone:t})}else return Ut.invalid(Q2(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:n}={}){const i=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:n});return g0(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=j5(t,uJ),{minDaysInFirstWeek:n,startOfWeek:i}=YZ(r,this.loc),s=!er(r.weekYear)||!er(r.weekNumber)||!er(r.weekday),o=!er(r.ordinal),a=!er(r.year),l=!er(r.month)||!er(r.day),u=a||l,c=r.weekYear||r.weekNumber;if((u||o)&&c)throw new tb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new tb("Can't mix ordinal dates with month/day");let h;s?h=ZZ({...D5(this.c,n,i),...r},n,i):er(r.ordinal)?(h={...this.toObject(),...r},er(r.day)&&(h.day=Math.min(F5(h.year,h.month),h.day))):h=JZ({...lL(this.c),...r});const[d,m]=cM(h,this.o,this.zone);return g0(this,{ts:d,o:m})}plus(t){if(!this.isValid)return this;const r=Sr.fromDurationLike(t);return g0(this,aJ(this,r))}minus(t){if(!this.isValid)return this;const r=Sr.fromDurationLike(t).negate();return g0(this,aJ(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const n={},i=Sr.normalizeUnit(t);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(r){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(n.weekNumber=this.weekNumber-1),n.weekday=s}else n.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?bo.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):cL}toLocaleString(t=P5,r={}){return this.isValid?bo.create(this.loc.clone(r),t).formatDateTime(this):cL}toLocaleParts(t={}){return this.isValid?bo.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=dL(this,o);return a+="T",a+=lJ(this,o,r,n,i,s),a}toISODate({format:t="extended"}={}){return this.isValid?dL(this,t==="extended"):null}toISOWeekDate(){return xI(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+lJ(this,o==="extended",r,t,n,s):null}toRFC2822(){return xI(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return xI(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?dL(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||t)&&(n&&(i+=" "),r?i+="z":t&&(i+="ZZ")),xI(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():cL}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",n={}){if(!this.isValid||!t.isValid)return Sr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=Fdt(r).map(Sr.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=Vft(a,l,s,i);return o?u.negate():u}diffNow(t="milliseconds",r={}){return this.diff(Ut.now(),t,r)}until(t){return this.isValid?si.fromDateTimes(this,t):this}hasSame(t,r,n){if(!this.isValid)return!1;const i=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(r,n)<=i&&i<=s.endOf(r,n)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Ut.fromObject({},{zone:this.zone}),n=t.padding?this<r?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(i=t.unit,s=void 0),hJ(r,this.plus(n),{...t,numeric:"always",units:i,unit:s})}toRelativeCalendar(t={}){return this.isValid?hJ(t.base||Ut.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ut.isDateTime))throw new ho("min requires all arguments be DateTimes");return XZ(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Ut.isDateTime))throw new ho("max requires all arguments be DateTimes");return XZ(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,n={}){const{locale:i=null,numberingSystem:s=null}=n,o=Br.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return yue(o,t,r)}static fromStringExplain(t,r,n={}){return Ut.fromFormatExplain(t,r,n)}static buildFormatParser(t,r={}){const{locale:n=null,numberingSystem:i=null}=r,s=Br.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new mue(s,t)}static fromFormatParser(t,r,n={}){if(er(t)||er(r))throw new ho("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=n,o=Br.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(r.locale))throw new ho(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${r.locale}`);const{result:a,zone:l,specificOffset:u,invalidReason:c}=r.explainFromTokens(t);return c?Ut.invalid(c):L1(a,l,n,`format ${r.format}`,t,u)}static get DATE_SHORT(){return P5}static get DATE_MED(){return xle}static get DATE_MED_WITH_WEEKDAY(){return udt}static get DATE_FULL(){return Sle}static get DATE_HUGE(){return Ele}static get TIME_SIMPLE(){return Tle}static get TIME_WITH_SECONDS(){return Ile}static get TIME_WITH_SHORT_OFFSET(){return Ale}static get TIME_WITH_LONG_OFFSET(){return Mle}static get TIME_24_SIMPLE(){return Cle}static get TIME_24_WITH_SECONDS(){return kle}static get TIME_24_WITH_SHORT_OFFSET(){return Rle}static get TIME_24_WITH_LONG_OFFSET(){return Ole}static get DATETIME_SHORT(){return Nle}static get DATETIME_SHORT_WITH_SECONDS(){return Lle}static get DATETIME_MED(){return Ple}static get DATETIME_MED_WITH_SECONDS(){return Dle}static get DATETIME_MED_WITH_WEEKDAY(){return cdt}static get DATETIME_FULL(){return Fle}static get DATETIME_FULL_WITH_SECONDS(){return jle}static get DATETIME_HUGE(){return Ule}static get DATETIME_HUGE_WITH_SECONDS(){return Ble}}function W_(e){if(Ut.isDateTime(e))return e;if(e&&e.valueOf&&gm(e.valueOf()))return Ut.fromJSDate(e);if(e&&typeof e=="object")return Ut.fromObject(e);throw new ho(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const fc="system",Cm="unknown",gd="UTC",amt=Intl.DateTimeFormat().resolvedOptions().timeZone,lmt="shortOffset";function umt(e){return"timeZoneIANA"in e}function cmt(e){return e.startsWith("UTC")}function Dg(e,t=!1){return{json:{read:{source:e,reader:(r,n)=>n[e]?dM(n[e]):null},write:!!t&&{allowNull:!0,writer(r,n){n[e]=r?hmt(r):null}}}}}function dM(e,t=fc){return e?umt(e)?e.timeZoneIANA:pmt(e,t):t}function hmt(e){return{timeZoneIANA:e}}function pmt(e,t=fc){if(!e||!DZ.has(e.timeZone))return t;const r=DZ.get(e.timeZone);return cmt(e.timeZone)||e.respectsDaylightSaving?r:dmt(r)}function dmt(e){const t=Ut.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${Ji.instance(-r).formatOffset(0,"narrow")}`}function fmt(e,t,r,n,i){if(t&&i==="date")return{timeZone:gd,timeZoneName:void 0};const s=n.timeStyle||n.hour,o=r===Cm;return{timeZone:o?i==="timestamp-offset"?void 0:e??gd:r,timeZoneName:o&&s?lmt:void 0}}function _ue(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(n=>n.toLowerCase()));return e===fc||e===Cm||t.has(e.toLowerCase())||r.has(e.toLowerCase())}const mmt={year:void 0,month:void 0,day:void 0,weekday:void 0},ymt={hour:void 0,minute:void 0,second:void 0},xue={timeZone:gd},Ic={year:"numeric",month:"numeric",day:"numeric"},Z_={year:"numeric",month:"long",day:"numeric"},J_={year:"numeric",month:"short",day:"numeric"},Y_={year:"numeric",month:"long",weekday:"long",day:"numeric"},Gf={hour:"numeric",minute:"numeric"},j0={...Gf,second:"numeric"},Sue={hourCycle:"h23"},X_={...Gf,...Sue},Q_={...j0,...Sue},Eue={"short-date":Ic,"short-date-short-time":{...Ic,...Gf},"short-date-short-time-24":{...Ic,...X_},"short-date-long-time":{...Ic,...j0},"short-date-long-time-24":{...Ic,...Q_},"short-date-le":Ic,"short-date-le-short-time":{...Ic,...Gf},"short-date-le-short-time-24":{...Ic,...X_},"short-date-le-long-time":{...Ic,...j0},"short-date-le-long-time-24":{...Ic,...Q_},"long-month-day-year":Z_,"long-month-day-year-short-time":{...Z_,...Gf},"long-month-day-year-short-time-24":{...Z_,...X_},"long-month-day-year-long-time":{...Z_,...j0},"long-month-day-year-long-time-24":{...Z_,...Q_},"day-short-month-year":J_,"day-short-month-year-short-time":{...J_,...Gf},"day-short-month-year-short-time-24":{...J_,...X_},"day-short-month-year-long-time":{...J_,...j0},"day-short-month-year-long-time-24":{...J_,...Q_},"long-date":Y_,"long-date-short-time":{...Y_,...Gf},"long-date-short-time-24":{...Y_,...X_},"long-date-long-time":{...Y_,...j0},"long-date-long-time-24":{...Y_,...Q_},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Gf,"long-time":j0},gmt=Mn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Tue={ar:"ar-u-nu-latn-ca-gregory"};let A6=new WeakMap;const gR=Eue["short-date-short-time"];function vmt(e){let t=A6.get(e);if(!t){const r=Xo(),n=Tue[r]||r,i=kV(e.timeZone??fc),s={...e,timeZone:i};t=new Intl.DateTimeFormat(n,s),A6.set(e,t)}return t}function bmt(e){return Eue[e]}function vR(e,t=gR){return vmt(t).format(e)}function wmt(e,t=gR){return vR(new Date(e),{...t,...xue,...ymt})}function _mt(e,t=gR){return vR(new Date(`1970-01-01T${e}Z`),{...t,...xue,...mmt})}function xmt(e,t=gR){if(t.timeZone)return vR(new Date(e),t);const r=Ut.fromISO(e,{setZone:!0}),n=Xo(),i=Tue[n]??n,s=r.offset===0?gd:t.timeZone,o={...t,timeZone:s};return r.toLocaleString(o,{locale:i})}function kV(e){switch(e){case fc:return amt;case Cm:return gd;default:return e}}uV(()=>{A6=new WeakMap});const Smt={ar:"ar-u-nu-latn"};let fM=new WeakMap,Iue={};function M6(e){const t=e||Iue;if(!fM.has(t)){const r=Xo(),n=Smt[Xo()]||r;fM.set(t,new Intl.NumberFormat(n,e))}return fM.get(t)}function Emt(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Tmt(e,t){return Object.is(e,-0)&&(e=0),M6(t).format(e)}function Imt(e,t=Xo()){if(!e)return null;let r=dJ.get(t);if(!r){const n=M6().formatToParts(12345.6),i=[...M6({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(i.map((h,d)=>[h,d])),o=new RegExp(`[${n.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${n.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${i.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,c=/[-\u2212\u2013\u2014\u2015]/g;r=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,m=>String(s.get(m))).replaceAll(u,"").replaceAll(c,"-"))==="")return null;const d=Number(h);return isNaN(d)?null:d},dJ.set(t,r)}return r(e)}uV(()=>{fM=new WeakMap,Iue={}});const dJ=new Map;async function Amt(e,t,r,n){const i=t.exec(r);if(!i)throw new ie("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=Nht(n),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let c;try{c=await fJ(e(u))}catch(h){if(u===l)throw new ie("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:h});try{c=await fJ(e(l))}catch(d){throw new ie("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d})}}return c}async function fJ(e){if(mJ.fetchBundleAsset!=null)return mJ.fetchBundleAsset(e);const t=await Xe(e,{responseType:"text"});return JSON.parse(t.data)}let Mmt=class{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let n;n=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof t=="string"?new RegExp(`^${t}`):t,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return Amt(this.getAssetUrl,this.matcher,e,t)}};function Cmt(e){return new Mmt(e)}const mJ={};Oht(Cmt({pattern:"esri/",location:br}));function RV(e){return typeof e=="string"||e instanceof String}var Mb;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Mb||(Mb={}));const kmt=[Mb.HMS_MS,Mb.HMS,Mb.HM,"TT"],Rmt="yyyy-MM-dd";Mb.HMS;function yJ(e){if(!e||!RV(e))return null;const t=Ut.fromFormat(e,Rmt);return t.isValid?t:null}function gJ(e){return e&&RV(e)?hat(kmt,t=>{const r=Ut.fromFormat(e,t);return r.isValid?r:null})??null:null}function vJ(e){if(!e||!RV(e))return null;const t=Ut.fromISO(e);return t.isValid?t:null}var uw;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(uw||(uw={}));const Omt=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Nmt(e){return e!=null&&Omt.has(e.type)}function Aue(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Mue(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Cue(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Lmt(e,t,r){const n=e?.domain;if(!n)return null;switch(n.type){case"range":{const{min:i,max:s}=kue(e);if(i!=null&&+t<i||s!=null&&+t>s)return uw.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(n.codedValues==null||n.codedValues.every(i=>i==null||i.code!==t))return uw.INVALID_CODED_VALUE}return null}function kue(e,t){const r=e?.domain;if(!r||r.type!=="range")return;const n="range"in r?r.range[0]:r.minValue,i="range"in r?r.range[1]:r.maxValue,s=Nmt(e);return Aue(e)||Cue(e)||Mue(e)?{...Pmt(e,i,n),isInteger:s}:{min:n!=null&&typeof n=="number"?n:null,max:i!=null&&typeof i=="number"?i:null,rawMin:n,rawMax:i,isInteger:s}}function Pmt(e,t,r){return Aue(e)?{min:yJ(r)?.toMillis(),max:yJ(t)?.toMillis(),rawMin:r,rawMax:t}:Cue(e)?{min:gJ(r)?.toMillis(),max:gJ(t)?.toMillis(),rawMin:r,rawMax:t}:Mue(e)?{min:vJ(r)?.toMillis(),max:vJ(t)?.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const Dmt=()=>Pe.getLogger("esri.support.arcadeOnDemand");let fL;function km(){return fL||(fL=(async()=>{const e=await Me(()=>import("./arcadeUtils-BUv04XWE-DQPMFaGM.js"),__vite__mapDeps([14,1,2,15,13,16,17,18]),import.meta.url).then(t=>t.i);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),fL}const Rue=(e,t,r)=>Oue.create(e,t,r,null,["$feature","$view"],[]),Fmt=(e,t,r,n)=>Oue.create(e,t,r,n,["$feature","$view"],[]);let Oue=class Nue{constructor(t,r,n,i,s,o,a){this.services=null,this.script=t,this.evaluate=i;const l=Array.isArray(o)?o:o?.fields;this.fields=l??[],this._syntaxTree=n,this._arcade=r,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,n,i,s,o){const{arcade:a,Feature:l,Dictionary:u}=await km(),c=r instanceof Ke?r:Ke.fromJSON(r);let h;try{h=a.parseScript(t,o)}catch(C){return Dmt().error(new ie("arcade-bad-expression","Failed to parse arcade script",{script:t,error:C})),null}const d=s.reduce((C,k)=>({...C,[k]:null}),{});let m=null;i!=null&&(m=new u(i),m.immutable=!0,d.$config=null);const y=a.scriptUsesGeometryEngine(h),g=y&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(h)&&a.enableFeatureSetSupport(),S=a.scriptIsAsync(h),E=S&&a.enableAsyncSupport(),x={vars:d,spatialReference:c,useAsync:!!E};await Promise.all([g,b,E]);const w=new Set;await a.loadDependentModules(w,h,null,S,y);const T=new u;T.immutable=!1,T.setField("scale",0);const I=a.compileScript(h,x),M=(C,k)=>{const N=C.$view?.timeZone;return"$view"in C&&C.$view&&(T.setField("scale",typeof C.$view=="object"&&"scale"in C.$view?C.$view.scale:void 0),C.$view=T),m&&(C.$config=m),I({vars:C,spatialReference:c,services:k,timeZone:N})};return new Nue(t,a,h,M,new l,n,c)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const jmt=/^([0-9_])/,Umt=/[^a-z0-9_\u0080-\uffff]+/gi;function Lue(e){return e==null?null:e.trim().replaceAll(Umt,"_").replace(jmt,"F$1")||null}const Bmt=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Vmt=["field","normalizationField"];function U5(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(bJ(Bmt,r,t),"visualVariables"in r&&r.visualVariables)for(const n of r.visualVariables)bJ(Vmt,n,t)}}function bJ(e,t,r){if(e)for(const n of e){const i=MT(n,t),s=i&&typeof i!="function"&&r.get(i);s&&_i(n,s.name,t)}}function OV(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const r=t.get(e.startField),n=t.get(e.endField);e.startField=r?.name??null,e.endField=n?.name??null}else{const r=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=r?.name??null,e.endTimeField=n?.name??null}}const mL=new Set;function ZT(e,t){return e&&t?(mL.clear(),Rm(mL,e,t),Array.from(mL).sort()):[]}function Rm(e,t,r){if(r)if(t?.fields?.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)Mo(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)n!=null&&e.add(n)}}function Mo(e,t,r){if(typeof r=="string")if(t){const n=t.get(r);n&&e.add(n.name)}else e.add(r)}function Gmt(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function zmt(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const n=ZT(e,t);return n.length/e.fields.length>=r?["*"]:n}async function ko(e,t,r){if(!r)return;const{arcadeUtils:n}=await km(),i=n.extractFieldNames(r,t?.fields?.map(s=>s.name));for(const s of i)Mo(e,t,s)}async function Pue(e,t,r){if(r&&r!=="1=1"){const n=await _V(r,t);if(!n.isStandardized)throw new ie("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Rm(e,t,n.fieldNames)}}function $mt({displayField:e,fields:t}){return e||(t?.length?yL(t,"name-or-title")||yL(t,"unique-identifier")||yL(t,"type-or-category")||qmt(t):null)}function qmt(e){for(const t of e){if(!t?.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function yL(e,t){for(const r of e)if(r?.valueType&&r.valueType===t)return r.name;return null}async function Hmt(e,t){if(!t)return;const r=t.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Wmt(e,t,r){r.onStatisticExpression?ko(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Zmt(e,t,r){if(!t||!r||!("fields"in r))return;const n=[],i=r.popupTemplate;n.push(Jmt(e,t,i)),r.fields&&n.push(...r.fields.map(async s=>Wmt(e,t.fieldsIndex,s))),await Promise.all(n)}async function Jmt(e,t,r){const n=[];r?.expressionInfos&&n.push(...r.expressionInfos.map(s=>ko(e,t.fieldsIndex,s.expression)));const i=r?.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&n.push(ko(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(n)}async function Ymt(e,t,r){t&&(t.timeInfo&&r?.timeExtent&&Rm(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Rm(e,t.fieldsIndex,[t.floorInfo.floorField]),r?.where!=null&&await Pue(e,t.fieldsIndex,r.where))}async function Xmt(e,t,r){t&&r&&await Promise.all(r.map(n=>Qmt(e,t,n)))}async function Qmt(e,t,r){t&&r&&(r.valueExpression?await ko(e,t.fieldsIndex,r.valueExpression):r.field&&Mo(e,t.fieldsIndex,r.field))}function Kmt(e){return e?ZT(e.fieldsIndex,Due(e)):[]}function e0t(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?ZT(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const t0t=new Set(["oid","global-id","guid"]),r0t=new Set(["oid","global-id"]),n0t=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function i0t(e){const t=new Set;Fue(e).forEach(n=>t.add(n)),e0t(e).forEach(n=>t.add(n.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(n=>t.add(n.toLowerCase())),Object.values(r.transformFieldRoles).forEach(n=>t.add(n.toLowerCase()))),Array.from(t)}function Due(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:n,editDateField:i,editorField:s}=t;return[r,n,i,s].filter(Boolean)}function Fue(e){return Due(e).map(t=>t.toLowerCase())}function s0t(e,t){return e.editable&&!t0t.has(e.type)&&!Fue(t).includes(e.name?.toLowerCase()??"")}function o0t(e,t){const r=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&r===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&r===t.globalIdField.toLowerCase()||i0t(t).includes(r)||r0t.has(e.type)||n0t.some(n=>n.test(r)))}async function a0t(e,t){const{labelingInfo:r,fieldsIndex:n}=t;r?.length&&await Promise.all(r.map(i=>l0t(e,n,i)))}async function l0t(e,t,r){if(!r)return;const n=r.getLabelExpression(),i=r.where;if(n.type==="arcade")await ko(e,t,n.expression);else{const s=n.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Mo(e,t,o.slice(1,-1))})}await Pue(e,t,i)}function jue(e){const t=e.defaultValue;return t!==void 0&&Vue(e,t)?t:e.nullable?null:void 0}function u0t(e){const t=typeof e=="string"?{type:e}:e;return LV(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function Uue(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function c0t(e){return e===null||Uue(e)}function h0t(e){return e===null||Number.isInteger(e)}function Bue(e){return e!=null&&typeof e=="string"}function p0t(e){return e===null||Bue(e)}function d0t(){return!0}function Vue(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?h0t:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?c0t:Uue;break;case"string":case"esriFieldTypeString":r=e.nullable?p0t:Bue;break;default:r=d0t}return arguments.length===1?r:r(t)}const f0t=["integer","small-integer","big-integer"],m0t=["single","double"],y0t=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],g0t=["esriFieldTypeSingle","esriFieldTypeDouble"],Gue=new Set([...f0t,...y0t]),v0t=new Set([...m0t,...g0t]),b0t=LB(Gue,v0t);function w0t(e){return e!=null&&Gue.has(e.type)}function NV(e){return e!=null&&b0t.has(e.type)}function LV(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function zue(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function _0t(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function x0t(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function $ue(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function wJ(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function _J(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function S0t(e,t){return que(e,t)===null}var B5,V5;function E0t(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function que(e,t){return e==null||e.nullable&&t===null?null:NV(e)&&!T0t(e.type,Number(t))?B5.OUT_OF_RANGE:Vue(e,t)?e.domain?Lmt(e,t):null:V5.INVALID_TYPE}function T0t(e,t){const r=typeof e=="string"?Hue(e):e;if(!r)return!1;const n=r.min,i=r.max;return r.isInteger?Number.isInteger(t)&&t>=n&&t<=i:t>=n&&t<=i}function Hue(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return I0t;case"esriFieldTypeInteger":case"integer":return A0t;case"esriFieldTypeBigInteger":case"big-integer":return M0t;case"esriFieldTypeSingle":case"single":return C0t;case"esriFieldTypeDouble":case"double":return k0t}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(B5||(B5={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(V5||(V5={}));const I0t={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},A0t={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},M0t={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},C0t={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},k0t={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function R0t(e,t,r){switch(e){case uw.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case uw.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case V5.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case B5.OUT_OF_RANGE:{const{min:n,max:i}=Hue(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${n} to ${i}`}}}function O0t(e,t){return!N0t(e,t,null)}function N0t(e,t,r){if(!t?.attributes||!e)return!0;const n=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!n.has(s)&&(i=!0,r==null))break;return i}function Wue(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function Zue(e){const t=e?.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let mM=class extends we{constructor(e){super(e),this.type=null}};p([f({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],mM.prototype,"type",void 0),mM=p([W("esri.popup.content.Content")],mM);const Id=mM;var C6;let U0=C6=class extends Id{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new C6({description:this.description,displayType:this.displayType,title:this.title})}};p([f({type:String,json:{write:!0}})],U0.prototype,"description",void 0),p([f({type:["auto","preview","list"],json:{write:!0}})],U0.prototype,"displayType",void 0),p([f({type:String,json:{write:!0}})],U0.prototype,"title",void 0),p([f({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],U0.prototype,"type",void 0),U0=C6=p([W("esri.popup.content.AttachmentsContent")],U0);const cw=U0;var k6;let B0=k6=class extends Id{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new k6({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?se(this.outFields):null})}};p([f()],B0.prototype,"creator",void 0),p([f()],B0.prototype,"destroyer",void 0),p([f()],B0.prototype,"outFields",void 0),p([f({type:["custom"],readOnly:!0})],B0.prototype,"type",void 0),B0=k6=p([W("esri.popup.content.CustomContent")],B0);const L0t=B0;var R6;let Q1=R6=class extends we{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new R6({title:this.title,expression:this.expression})}};p([f({type:String,json:{write:!0}})],Q1.prototype,"title",void 0),p([f({type:String,json:{write:!0}})],Q1.prototype,"expression",void 0),p([f({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Q1.prototype,"returnType",void 0),Q1=R6=p([W("esri.popup.ElementExpressionInfo")],Q1);const Jue=Q1;var O6;let K2=O6=class extends Id{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new O6({expressionInfo:this.expressionInfo?.clone()})}};p([f({type:Jue,json:{write:!0}})],K2.prototype,"expressionInfo",void 0),p([f({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],K2.prototype,"type",void 0),K2=O6=p([W("esri.popup.content.ExpressionContent")],K2);const bR=K2;function tt(e,t={}){const r=e instanceof Pt?e:new Pt(e,t),{alwaysWriteDefaults:n,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return f({type:s?r.apiValues:String,json:{type:r.jsonValues,default:i,name:o,read:!l&&{reader:r.read},write:{writer:r.write,alwaysWriteDefaults:n}},nonNullable:a,readOnly:l})}let K1=class extends rr(we){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};p([tt(gmt)],K1.prototype,"dateFormat",void 0),p([f({type:Boolean,json:{write:!0}})],K1.prototype,"digitSeparator",void 0),p([f({type:Ft,json:{write:!0}})],K1.prototype,"places",void 0),K1=p([W("esri.popup.support.FieldInfoFormat")],K1);const yM=K1;var N6;let bu=N6=class extends we{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new N6({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};p([f({type:String,json:{write:!0}})],bu.prototype,"fieldName",void 0),p([f({type:yM,json:{write:!0}})],bu.prototype,"format",void 0),p([f({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],bu.prototype,"isEditable",void 0),p([f({type:String,json:{write:!0}})],bu.prototype,"label",void 0),p([tt(new Pt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],bu.prototype,"stringFieldOption",void 0),p([f({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],bu.prototype,"statisticType",void 0),p([f({type:String,json:{write:!0}})],bu.prototype,"tooltip",void 0),p([f({type:Boolean,json:{write:!0}})],bu.prototype,"visible",void 0),bu=N6=p([W("esri.popup.FieldInfo")],bu);const wR=bu;var L6;let tp=L6=class extends Id{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new L6(se({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};p([f({type:Object,json:{write:!0}})],tp.prototype,"attributes",void 0),p([f({type:String,json:{write:!0}})],tp.prototype,"description",void 0),p([f({type:[wR]})],tp.prototype,"fieldInfos",void 0),p([Re("fieldInfos")],tp.prototype,"writeFieldInfos",null),p([f({type:String,json:{write:!0}})],tp.prototype,"title",void 0),p([f({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],tp.prototype,"type",void 0),tp=L6=p([W("esri.popup.content.FieldsContent")],tp);const Fg=tp;let V0=class extends we{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};p([f({type:String,json:{write:!0}})],V0.prototype,"altText",void 0),p([f({type:String,json:{write:!0}})],V0.prototype,"caption",void 0),p([f({type:String,json:{write:!0}})],V0.prototype,"title",void 0),p([f({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],V0.prototype,"type",void 0),V0=p([W("esri.popup.content.mixins.MediaInfo")],V0);const PV=V0;var P6;let G0=P6=class extends mt{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new P6({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};p([f()],G0.prototype,"color",void 0),p([f()],G0.prototype,"fieldName",void 0),p([f()],G0.prototype,"tooltip",void 0),p([f()],G0.prototype,"value",void 0),G0=P6=p([W("esri.popup.content.support.ChartMediaInfoValueSeries")],G0);const Yue=G0;var D6;let uf=D6=class extends we{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new D6({colors:se(this.colors),fields:se(this.fields),normalizeField:this.normalizeField,series:se(this.series),tooltipField:this.tooltipField})}};p([f({type:[Ze],json:{type:[[Ft]],write:!0}})],uf.prototype,"colors",void 0),p([f({type:[String],json:{write:!0}})],uf.prototype,"fields",void 0),p([f({type:String,json:{write:!0}})],uf.prototype,"normalizeField",void 0),p([f({type:[Yue],json:{read:!1}})],uf.prototype,"series",void 0),p([f({type:String,json:{write:!0}})],uf.prototype,"tooltipField",void 0),uf=D6=p([W("esri.popup.content.support.ChartMediaInfoValue")],uf);const P0t=uf;let ex=class extends PV{constructor(e){super(e),this.type=null,this.value=void 0}};p([f({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ex.prototype,"type",void 0),p([f({type:P0t,json:{write:!0}})],ex.prototype,"value",void 0),ex=p([W("esri.popup.content.mixins.ChartMediaInfo")],ex);const _R=ex,xR=Mn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var F6;let gM=F6=class extends _R{constructor(e){super(e),this.type="bar-chart"}clone(){return new F6({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};p([f({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:xR.write}})],gM.prototype,"type",void 0),gM=F6=p([W("esri.popup.content.BarChartMediaInfo")],gM);const Xue=gM;var j6;let vM=j6=class extends _R{constructor(e){super(e),this.type="column-chart"}clone(){return new j6({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};p([f({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:xR.write}})],vM.prototype,"type",void 0),vM=j6=p([W("esri.popup.content.ColumnChartMediaInfo")],vM);const Que=vM;var U6;let tx=U6=class extends we{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new U6({linkURL:this.linkURL,sourceURL:this.sourceURL})}};p([f({type:String,json:{write:!0}})],tx.prototype,"linkURL",void 0),p([f({type:String,json:{write:!0}})],tx.prototype,"sourceURL",void 0),tx=U6=p([W("esri.popup.content.support.ImageMediaInfoValue")],tx);const D0t=tx;var B6;let ev=B6=class extends PV{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new B6({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};p([f({type:Number,json:{write:!0}})],ev.prototype,"refreshInterval",void 0),p([f({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ev.prototype,"type",void 0),p([f({type:D0t,json:{write:!0}})],ev.prototype,"value",void 0),ev=B6=p([W("esri.popup.content.ImageMediaInfo")],ev);const Kue=ev;var V6;let bM=V6=class extends _R{constructor(e){super(e),this.type="line-chart"}clone(){return new V6({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};p([f({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:xR.write}})],bM.prototype,"type",void 0),bM=V6=p([W("esri.popup.content.LineChartMediaInfo")],bM);const ece=bM;var G6;let wM=G6=class extends _R{constructor(e){super(e),this.type="pie-chart"}clone(){return new G6({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};p([f({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:xR.write}})],wM.prototype,"type",void 0),wM=G6=p([W("esri.popup.content.PieChartMediaInfo")],wM);const tce=wM,z6={base:PV,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Xue,"column-chart":Que,"line-chart":ece,"pie-chart":tce,image:Kue}};var $6;let wu=$6=class extends Id{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?Kue.fromJSON(t):t.type==="barchart"?Xue.fromJSON(t):t.type==="columnchart"?Que.fromJSON(t):t.type==="linechart"?ece.fromJSON(t):t.type==="piechart"?tce.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new $6(se({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};p([f()],wu.prototype,"activeMediaInfoIndex",void 0),p([f({type:Object,json:{write:!0}})],wu.prototype,"attributes",void 0),p([f({type:String,json:{write:!0}})],wu.prototype,"description",void 0),p([f({types:[z6]})],wu.prototype,"mediaInfos",void 0),p([Ee("mediaInfos")],wu.prototype,"readMediaInfos",null),p([Re("mediaInfos")],wu.prototype,"writeMediaInfos",null),p([f({type:String,json:{write:!0}})],wu.prototype,"title",void 0),p([f({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],wu.prototype,"type",void 0),wu=$6=p([W("esri.popup.content.MediaContent")],wu);const hw=wu;var q6;let rx=q6=class extends we{constructor(e){super(e),this.field=null,this.order=null}clone(){return new q6({field:this.field,order:this.order})}};p([f({type:String,json:{write:!0}})],rx.prototype,"field",void 0),p([f({type:["asc","desc"],json:{write:!0}})],rx.prototype,"order",void 0),rx=q6=p([W("esri.popup.support.RelatedRecordsInfoFieldOrder")],rx);const DV=rx;let Rc=class extends rr(Id){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};p([f({type:String,json:{write:!0}})],Rc.prototype,"description",void 0),p([f({type:Number,json:{type:Ft,write:!0}})],Rc.prototype,"displayCount",void 0),p([f({type:["list"],json:{write:!0}})],Rc.prototype,"displayType",void 0),p([f({type:[DV],json:{write:!0}})],Rc.prototype,"orderByFields",void 0),p([f({type:Number,json:{type:Ft,write:!0}})],Rc.prototype,"relationshipId",void 0),p([f({type:String,json:{write:!0}})],Rc.prototype,"title",void 0),p([f({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Rc.prototype,"type",void 0),Rc=p([W("esri.popup.content.RelationshipContent")],Rc);const TE=Rc;var H6;let nx=H6=class extends Id{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new H6({text:this.text})}};p([f({type:String,json:{write:!0}})],nx.prototype,"text",void 0),p([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],nx.prototype,"type",void 0),nx=H6=p([W("esri.popup.content.TextContent")],nx);const pw=nx;let Oc=class extends rr(we){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};p([f({type:String,json:{write:!0}})],Oc.prototype,"title",void 0),p([f({type:String,json:{write:!0}})],Oc.prototype,"description",void 0),p([f({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Oc.prototype,"type",void 0),p([f({type:Boolean,json:{read:!1}})],Oc.prototype,"open",void 0),p([f({type:Number,json:{type:Ft,write:!0}})],Oc.prototype,"associatedNetworkSourceId",void 0),p([f({type:Number,json:{type:Ft,write:!0}})],Oc.prototype,"associatedAssetGroup",void 0),p([f({type:Number,json:{type:Ft,write:!0}})],Oc.prototype,"associatedAssetType",void 0),Oc=p([W("esri.popup.support.UtilityNetworkAssociationType")],Oc);const F0t=Oc;let z0=class extends rr(Id){constructor(e){super(e),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};p([f({type:String,json:{write:!0}})],z0.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],z0.prototype,"title",void 0),p([f({type:[F0t],json:{write:!0}})],z0.prototype,"associationTypes",void 0),p([tt({utilityNetworkAssociations:"utility-network-associations"})],z0.prototype,"type",void 0),z0=p([W("esri.popup.content.UtilityNetworkAssociationsContent")],z0);const FV=z0,j0t={base:null,key:"type",typeMap:{attachment:cw,media:hw,text:pw,expression:bR,field:Fg,relationship:TE,utilityNetworkAssociations:FV}},U0t={base:null,key:"type",typeMap:{attachment:cw,media:hw,text:pw,expression:bR,field:Fg,relationship:TE}};var W6;let $0=W6=class extends we{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new W6({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};p([f({type:String,json:{write:!0}})],$0.prototype,"name",void 0),p([f({type:String,json:{write:!0}})],$0.prototype,"title",void 0),p([f({type:String,json:{write:!0}})],$0.prototype,"expression",void 0),p([f({type:["string","number"],json:{write:!0}})],$0.prototype,"returnType",void 0),$0=W6=p([W("esri.popup.ExpressionInfo")],$0);const rce=$0;var Z6;let ix=Z6=class extends we{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Z6({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};p([f({type:Boolean,json:{write:!0}})],ix.prototype,"returnTopmostRaster",void 0),p([f({type:Boolean,json:{write:!0}})],ix.prototype,"showNoDataRecords",void 0),ix=Z6=p([W("esri.popup.LayerOptions")],ix);const B0t=ix;var J6;let sx=J6=class extends we{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new J6({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?se(this.orderByFields):null})}};p([f({type:Boolean,json:{write:!0}})],sx.prototype,"showRelatedRecords",void 0),p([f({type:[DV],json:{write:!0}})],sx.prototype,"orderByFields",void 0),sx=J6=p([W("esri.popup.RelatedRecordsInfo")],sx);const xJ=sx;let nce=0;const b_=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+nce++})}};return t=p([W("esri.core.Identifiable")],t),t},SR=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:nce++})}};return t=p([W("esri.core.Identifiable.NumericIdentifiable")],t),t};let SJ=class extends b_(class{}){};SJ=p([W("esri.core.Identifiable")],SJ);var Y6;let El=Y6=class extends b_(mt){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Y6({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};p([f()],El.prototype,"active",void 0),p([f()],El.prototype,"className",void 0),p([f()],El.prototype,"disabled",void 0),p([f()],El.prototype,"icon",void 0),p([f()],El.prototype,"id",void 0),p([f()],El.prototype,"indicator",void 0),p([f()],El.prototype,"title",void 0),p([f()],El.prototype,"type",void 0),p([f()],El.prototype,"visible",void 0),El=Y6=p([W("esri.support.actions.ActionBase")],El);const ER=El;var X6;let _M=X6=class extends ER{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new X6({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};p([f()],_M.prototype,"image",void 0),_M=X6=p([W("esri.support.actions.ActionButton")],_M);const ice=_M;var Q6;let ox=Q6=class extends ER{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new Q6({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};p([f()],ox.prototype,"image",void 0),p([f()],ox.prototype,"value",void 0),ox=Q6=p([W("esri.support.actions.ActionToggle")],ox);const sce=ox,K_="relationships/",EJ="expression/",V0t=st.ofType({key:"type",defaultKeyValue:"button",base:ER,typeMap:{button:ice,toggle:sce}}),G0t={base:Id,key:"type",typeMap:{media:hw,custom:L0t,text:pw,attachments:cw,fields:Fg,expression:bR,relationship:TE,utilityNetworkAssociations:FV}},oce=new Set(["attachments","fields","media","text","expression","relationship"]),z0t=new Set([...oce,"utility-network-associations"]);let Ai=class extends rr(we){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(t=>eu(G0t,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||bc(e)?e:(Pe.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t.description,t.mediaInfos,r):this._readPopupInfo(t)}writeWebSceneContent(e,t,r,n){this._writePopupTemplateContent(e,t,n)}writeWebMapContent(e,t,r,n){this._writePopupTemplateContent(e,t,n)}writeFieldInfos(e,t,r,n){const{content:i}=this,s=Array.isArray(i)?i:null;if(e){const o=s?s.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>l.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(l=>{const u=l.toJSON(n);return a&&(u.visible=!1),u})}if(s)for(const o of s)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,r,n){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(n)}writeTitle(e,t){t.title=e||""}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),Rm(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writePopupTemplateContent(e,t,r){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>r?.origin==="web-scene"?oce.has(n.type):z0t.has(n.type)).map(n=>n?.toJSON(r)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"?this._writeTextContent(n,t):n.type==="relationship"&&this._writeRelationshipContent(n,t)})):t.description=e}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=se(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(n=>{const i=t.fieldInfos.find(s=>s.fieldName?.toLowerCase()===n.fieldName?.toLowerCase());i?i.visible=!0:t.fieldInfos.push(n)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,t){const r=e.orderByFields?.map(i=>this._toFieldOrderJSON(i,e.relationshipId))||[],n=[...t.relatedRecordsInfo?.orderByFields||[],...r];t.relatedRecordsInfo={showRelatedRecords:!0,...n?.length&&{orderByFields:n}}}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=se(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements(e,t,r){const n={description:!1,mediaInfos:!1};return r.map(i=>i.type==="media"?(i.mediaInfos||!t||n.mediaInfos||(i.mediaInfos=t,n.mediaInfos=!0),hw.fromJSON(i)):i.type==="text"?(i.text||!e||n.description||(i.text=e,n.description=!0),pw.fromJSON(i)):i.type==="attachments"?cw.fromJSON(i):i.type==="fields"?Fg.fromJSON(i):i.type==="expression"?bR.fromJSON(i):i.type==="relationship"?TE.fromJSON(i):i.type==="utilityNetworkAssociations"?FV.fromJSON(i):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:t,order:r}=e;if(!t?.startsWith(K_))return null;const n=t.replace(K_,"").split("/");if(n.length!==2)return null;const i=parseInt(n[0],10),s=n[1];return typeof i=="number"&&s?TE.fromJSON({relationshipId:i,orderByFields:[{field:s,order:r}]}):null}_toFieldOrderJSON(e,t){const{order:r,field:n}=e;return{field:`${K_}${t}/${n}`,order:r}}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r,relatedRecordsInfo:n={showRelatedRecords:!1}}){const i=[];e?i.push(new pw({text:e})):i.push(new Fg),Array.isArray(t)&&t.length&&i.push(hw.fromJSON({mediaInfos:t})),r&&i.push(cw.fromJSON({displayType:"auto"}));const{showRelatedRecords:s,orderByFields:o}=n;return s&&o?.length&&o.forEach(a=>{const l=this._toRelationshipContent(a);l&&i.push(l)}),i.length?i:e}_getContentElementFields(e){const t=e?.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((n,i)=>[...n,...this._getMediaInfoFields(i)],[])]}return t==="text"?this._extractFieldNames(e.text):t==="relationship"||t==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:t,title:r,value:n}=e,i=n||{},{fields:s,normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=i,c=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(u),...s??[]];return o&&c.push(o),a&&c.push(a),c}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,n)=>[...r,...n.type==="expression"&&n.expressionInfo?[n.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(n=>ko(e,t,n.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:t,visible:r})=>!(r!==void 0&&!r||!t||t.startsWith(K_)||t.startsWith(EJ))).map(t=>t.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:n}=e,i=n==="button"||n==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(i)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Zue(e).filter(t=>!(t.indexOf(K_)===0||t.indexOf(EJ)===0))}};p([f({type:V0t})],Ai.prototype,"actions",void 0),p([f()],Ai.prototype,"content",void 0),p([ur("content")],Ai.prototype,"castContent",null),p([Ee("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ai.prototype,"readContent",null),p([Re("web-scene","content",{popupElements:{type:st.ofType(U0t)},showAttachments:{type:Boolean},mediaInfos:{type:st.ofType(z6)},description:{type:String},relatedRecordsInfo:{type:xJ}})],Ai.prototype,"writeWebSceneContent",null),p([Re("content",{popupElements:{type:st.ofType(j0t)},showAttachments:{type:Boolean},mediaInfos:{type:st.ofType(z6)},description:{type:String},relatedRecordsInfo:{type:xJ}})],Ai.prototype,"writeWebMapContent",null),p([f({type:[rce],json:{write:!0}})],Ai.prototype,"expressionInfos",void 0),p([f({type:[wR]})],Ai.prototype,"fieldInfos",void 0),p([Re("fieldInfos")],Ai.prototype,"writeFieldInfos",null),p([f({type:B0t})],Ai.prototype,"layerOptions",void 0),p([Re("layerOptions")],Ai.prototype,"writeLayerOptions",null),p([f({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ai.prototype,"lastEditInfoEnabled",void 0),p([f()],Ai.prototype,"outFields",void 0),p([f()],Ai.prototype,"overwriteActions",void 0),p([f()],Ai.prototype,"returnGeometry",void 0),p([f({json:{type:String}})],Ai.prototype,"title",void 0),p([Re("title")],Ai.prototype,"writeTitle",null),Ai=p([W("esri.PopupTemplate")],Ai);const Ad=Ai,TJ=new Pt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let $0t=0,tv=class extends we{constructor(e){super(e),this.id="sym"+$0t++,this.type=null,this.color=new Ze([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};p([f({type:TJ.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:TJ.write}}})],tv.prototype,"type",void 0),p([f({type:Ze,json:{write:{allowNull:!0}}})],tv.prototype,"color",void 0),p([Ee("color")],tv.prototype,"readColor",null),tv=p([W("esri.symbols.Symbol")],tv);const Is=tv;var K6;let cf=K6=class extends Is{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const n=r.map(i=>{const s=i.valueExpressionInfo;return s?ko(e,t,s.expression):null});await Promise.all(n)}}}clone(){return new K6({data:se(this.data)})}hash(){return MB(JSON.stringify(this.data)).toString()}};p([f({json:{write:!1}})],cf.prototype,"color",void 0),p([f({json:{write:!0}})],cf.prototype,"data",void 0),p([Ee("data",["symbol"])],cf.prototype,"readData",null),p([Re("data",{})],cf.prototype,"writeData",null),p([tt({CIMSymbolReference:"cim"},{readOnly:!0})],cf.prototype,"type",void 0),cf=K6=p([W("esri.symbols.CIMSymbol")],cf);const Md=cf;let rv=class extends we{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,t,r){e||(t[r]=e)}};p([f({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],rv.prototype,"enabled",void 0),p([Re("enabled")],rv.prototype,"writeEnabled",null),p([f({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],rv.prototype,"type",void 0),rv=p([W("esri.symbols.Symbol3DLayer")],rv);const Uh=rv,q0t=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,H0t="screenUtils.toPt: input not recognized!",ace=96;function lce(e){return e?e/72*ace:0}function pl(e){return e?72*e/ace:0}function lr(e){if(typeof e=="string"){const t=e.match(q0t);if(t){const r=Number(t[1]),n=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",s=n==="px"?pl(r):r;return i?-s:s}return console.warn(H0t),null}return e}function Yi(e=0,t=0){return{x:e,y:t}}function W0t(e){return e?Yi(e.x,e.y):null}function Z0t(e=0,t=0){return[e,t]}function J0t(e=0,t=0,r=0){return[e,t,r]}function Y0t(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function TR(e){const t=Jk(100*(1-e));return Math.max(0,Math.min(t,100))}function dw(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function X0t(e,t){const r=t.transparency!=null?dw(t.transparency):1,n=t.color;return n&&Array.isArray(n)?new Ze([n[0]||0,n[1]||0,n[2]||0,r]):null}function Q0t(e,t){t.color=e.toJSON().slice(0,3);const r=TR(e.a);r!==0&&(t.transparency=r)}const Wm={type:Ze,json:{type:[Ft],default:null,read:{source:["color","transparency"],reader:X0t},write:{target:{color:{type:[Ft]},transparency:{type:Ft}},writer:Q0t}}},Ih={type:Number,cast:lr,json:{write:!0}};let q0=class extends we{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.extensionLength=0,this.size=pl(1)}clone(){}cloneProperties(){return{color:se(this.color),size:this.size,extensionLength:this.extensionLength}}};p([f({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],q0.prototype,"type",void 0),p([f(Wm)],q0.prototype,"color",void 0),p([f({...Ih,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],q0.prototype,"extensionLength",void 0),p([f(Ih)],q0.prototype,"size",void 0),q0=p([W("esri.symbols.edges.Edges3D")],q0);const jV=q0;var e8;let xM=e8=class extends jV{constructor(e){super(e),this.type="sketch"}clone(){return new e8(this.cloneProperties())}};p([tt({sketch:"sketch"},{readOnly:!0})],xM.prototype,"type",void 0),xM=e8=p([W("esri.symbols.edges.SketchEdges3D")],xM);const K0t=xM;var t8;let SM=t8=class extends jV{constructor(e){super(e),this.type="solid"}clone(){return new t8(this.cloneProperties())}};p([tt({solid:"solid"},{readOnly:!0})],SM.prototype,"type",void 0),SM=t8=p([W("esri.symbols.edges.SolidEdges3D")],SM);const uce=SM,UV={types:{key:"type",base:jV,typeMap:{solid:uce,sketch:K0t}},json:{write:!0}};function Cd(){return[0,0,0]}function IR(e){return[e[0],e[1],e[2]]}function o1(e,t,r){return[e,t,r]}function cce(e,t,r){return[e,t,r]}function hce(e,t=Cd()){const r=Math.min(3,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function eyt(e,t){return new Float64Array(e,t,3)}function pce(){return Cd()}function dce(){return o1(1,1,1)}function fce(){return o1(1,0,0)}function mce(){return o1(0,1,0)}function yce(){return o1(0,0,1)}const gce=pce(),BV=dce(),vce=fce(),bce=mce(),wce=yce();Object.freeze(Object.defineProperty({__proto__:null,ONES:BV,UNIT_X:vce,UNIT_Y:bce,UNIT_Z:wce,ZEROS:gce,clone:IR,create:Cd,createView:eyt,freeze:cce,fromArray:hce,fromValues:o1,ones:dce,unitX:fce,unitY:mce,unitZ:yce,zeros:pce},Symbol.toStringTag,{value:"Module"}));var r8;let ka=r8=class extends we{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){const e={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?IR(this.emissiveFactor):null};return new r8(e)}};p([f(Wm)],ka.prototype,"color",void 0),p([f({type:[Number],json:{write:!1}})],ka.prototype,"emissiveFactor",void 0),ka=r8=p([W("esri.symbols.support.Symbol3DMaterial")],ka);var n8;let hf=n8=class extends Uh{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new n8({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};p([tt({Extrude:"extrude"},{readOnly:!0})],hf.prototype,"type",void 0),p([f({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],hf.prototype,"size",void 0),p([f({type:ka,json:{write:!0}})],hf.prototype,"material",void 0),p([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],hf.prototype,"castShadows",void 0),p([f(UV)],hf.prototype,"edges",void 0),hf=n8=p([W("esri.symbols.ExtrudeSymbol3DLayer")],hf);const _ce=hf;let ax=class extends Is{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};p([tt({esriSLS:"simple-line"},{readOnly:!0})],ax.prototype,"type",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],ax.prototype,"width",void 0),ax=p([W("esri.symbols.LineSymbol")],ax);const tyt=ax,ryt=["begin","end","begin-end"],xce=["arrow","circle","square","diamond","cross","x"];var i8;let Nc=i8=class extends we{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,n){t[r]=n?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,n){n?.origin==="web-map"||(t[r]=e)}clone(){return new i8({color:se(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};p([f({type:["begin","end","begin-end"],json:{write:!0}})],Nc.prototype,"placement",void 0),p([tt({"line-marker":"line-marker"},{readOnly:!0}),f({json:{origins:{"web-map":{write:!1}}}})],Nc.prototype,"type",void 0),p([f({type:xce})],Nc.prototype,"style",void 0),p([Re("style")],Nc.prototype,"writeStyle",null),p([f({type:Ze,value:null,json:{write:{allowNull:!0}}})],Nc.prototype,"color",null),p([Ee("color")],Nc.prototype,"readColor",null),p([Re("color")],Nc.prototype,"writeColor",null),Nc=i8=p([W("esri.symbols.LineSymbolMarker")],Nc);const nyt=Nc;var s8;const gL=new Pt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let rp=s8=class extends tyt{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,n,i,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=lr(r)),n!=null&&(o.cap=n),i!=null&&(o.join=i),s!=null&&(o.miterLimit=lr(s)),o}clone(){return new s8({color:se(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};p([tt({esriSLS:"simple-line"},{readOnly:!0})],rp.prototype,"type",void 0),p([f({type:gL.apiValues,json:{read:gL.read,write:gL.write}})],rp.prototype,"style",void 0),p([f({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],rp.prototype,"cap",void 0),p([f({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],rp.prototype,"join",void 0),p([f({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":nyt}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],rp.prototype,"marker",void 0),p([f({type:Number,json:{read:!1,write:!1}})],rp.prototype,"miterLimit",void 0),rp=s8=p([W("esri.symbols.SimpleLineSymbol")],rp);const No=rp;let lx=class extends Is{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};p([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":No}},json:{default:null,write:!0}})],lx.prototype,"outline",void 0),p([f({type:["simple-fill","picture-fill"],readOnly:!0})],lx.prototype,"type",void 0),lx=p([W("esri.symbols.FillSymbol")],lx);const Sce=lx;let EM=class extends we{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};p([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],EM.prototype,"type",void 0),EM=p([W("esri.symbols.patterns.LinePattern3D")],EM);const Ece=EM,iyt=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var o8;const syt=Mn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let ux=o8=class extends Ece{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new o8(e)}};p([f({type:["style"]})],ux.prototype,"type",void 0),p([tt(syt),f({type:iyt})],ux.prototype,"style",void 0),ux=o8=p([W("esri.symbols.patterns.LineStylePattern3D")],ux);const VV=ux;let TM=class extends we{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};p([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],TM.prototype,"type",void 0),TM=p([W("esri.symbols.patterns.Pattern3D")],TM);const Tce=TM,oyt=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var a8;let cx=a8=class extends Tce{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new a8({style:this.style})}};p([f({type:["style"]})],cx.prototype,"type",void 0),p([f({type:oyt,json:{read:!0,write:!0}})],cx.prototype,"style",void 0),cx=a8=p([W("esri.symbols.patterns.StylePattern3D")],cx);const Ice=cx,ayt={types:{key:"type",base:Tce,typeMap:{style:Ice}},json:{write:!0}},Ace={types:{key:"type",base:Ece,typeMap:{style:VV}},json:{write:!0}},wS=new Ze("white");new Ze("black");const lyt=new Ze([255,255,255,0]);function uyt(e){return e.r===0&&e.g===0&&e.b===0}var l8;let _S=l8=class extends ka{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?IR(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new l8(e)}};p([tt({multiply:"multiply",replace:"replace",tint:"tint"})],_S.prototype,"colorMixMode",void 0),_S=l8=p([W("esri.symbols.support.Symbol3DFillMaterial")],_S);function Mce(e,t=!1){return e<=zk?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function cyt(e){return(TB(e)?e.length:e.byteLength/8)<=zk?Array.from(e):new Float64Array(e)}function hyt(e,t,r){return Array.isArray(e)?e.slice(t,t+r):e.subarray(t,t+r)}function w_(e=kce){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function AR(e,t,r,n,i,s,o=w_()){return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o}function pyt(e,t=w_()){return dyt(e,0,e.length/3,t)}function dyt(e,t,r,n=w_()){return qV(n,G5),vyt(n,e,t,r),n}function fyt(e,t=Mce(24)){const[r,n,i,s,o,a]=e;return t[0]=r,t[1]=n,t[2]=i,t[3]=r,t[4]=n,t[5]=a,t[6]=r,t[7]=o,t[8]=i,t[9]=r,t[10]=o,t[11]=a,t[12]=s,t[13]=n,t[14]=i,t[15]=s,t[16]=n,t[17]=a,t[18]=s,t[19]=o,t[20]=i,t[21]=s,t[22]=o,t[23]=a,t}function myt(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new jt(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function yyt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function gyt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function vyt(e,t,r=0,n=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let c=0;c<n;c++)i=Math.min(i,t[r+3*c]),s=Math.min(s,t[r+3*c+1]),o=Math.min(o,t[r+3*c+2]),a=Math.max(a,t[r+3*c]),l=Math.max(l,t[r+3*c+1]),u=Math.max(u,t[r+3*c+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=u}function GV(e){return e[0]>=e[3]?0:e[3]-e[0]}function zV(e){return e[1]>=e[4]?0:e[4]-e[1]}function $V(e){return e[2]>=e[5]?0:e[5]-e[2]}function byt(e){const t=GV(e),r=$V(e),n=zV(e);return Math.sqrt(t*t+r*r+n*n)}function wyt(e,t=[0,0,0]){return t[0]=e[0]+GV(e)/2,t[1]=e[1]+zV(e)/2,t[2]=e[2]+$V(e)/2,t}function _yt(e,t=[0,0,0]){return t[0]=GV(e),t[1]=zV(e),t[2]=$V(e),t}function xyt(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Syt(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function qV(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Eyt(e){return e?qV(e,G5):w_(G5)}function Tyt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function Cce(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=n,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function u8(e){return e.length===6}function Iyt(e,t,r){if(e==null||t==null)return e===t;if(!u8(e)||!u8(t))return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const G5=[1/0,1/0,1/0,-1/0,-1/0,-1/0],kce=[0,0,0,0,0,0];w_();function Ayt(e,{isPrimitive:t,width:r,depth:n,height:i}){const s=t?10:1;if(r==null&&i==null&&n==null)return[s*e[0],s*e[1],s*e[2]];const o=o1(r,n,i);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Myt=AR(-.5,-.5,-.5,.5,.5,.5),Cyt=AR(-.5,-.5,0,.5,.5,1),kyt=AR(-.5,-.5,0,.5,.5,.5);function Ryt(e){switch(e){case"sphere":case"cube":case"diamond":return Myt;case"cylinder":case"cone":case"inverted-cone":return Cyt;case"tetrahedron":return kyt;default:return}}const HV=["butt","square","round"],Oyt=[...HV,"none"],Rce=["miter","bevel","round"];var c8;let H0=c8=class extends we{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=pl(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new c8(e)}};p([f(Wm)],H0.prototype,"color",void 0),p([f(Ih)],H0.prototype,"size",void 0),p([f(Ace)],H0.prototype,"pattern",void 0),p([f({type:HV,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],H0.prototype,"patternCap",void 0),H0=c8=p([W("esri.symbols.support.Symbol3DOutline")],H0);var IM;let np=IM=class extends Uh{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new IM(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new VV({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??wS).clone(),pattern:t};return t&&e.outline?.cap&&(r.patternCap=e.outline.cap),new IM({material:new _S({color:(e.color??lyt).clone()}),pattern:e.style&&e.style!=="solid"?new Ice({style:e.style}):null,outline:r})}};p([tt({Fill:"fill"},{readOnly:!0})],np.prototype,"type",void 0),p([f({type:_S,json:{write:!0}})],np.prototype,"material",void 0),p([f(ayt)],np.prototype,"pattern",void 0),p([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],np.prototype,"castShadows",void 0),p([f({type:H0,json:{write:!0}})],np.prototype,"outline",void 0),p([f(UV)],np.prototype,"edges",void 0),np=IM=p([W("esri.symbols.FillSymbol3DLayer")],np);const a1=np,Nyt=["none","underline","line-through"],Lyt=["normal","italic","oblique"],Pyt=["normal","lighter","bold","bolder"],Oce={type:Number,cast:e=>{const t=Ds(e);return t===0?1:hl(t,.1,4)},nonNullable:!0},Dyt=["left","right","center"],Fyt=["baseline","top","middle","bottom"],Nce={type:Dyt,nonNullable:!0},Lce={type:Fyt,nonNullable:!0},jyt=8;var h8;let ip=h8=class extends we{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return lr(e)}clone(){return new h8({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};p([f({type:Nyt,json:{default:"none",write:!0}})],ip.prototype,"decoration",void 0),p([f({type:String,json:{write:!0}})],ip.prototype,"family",void 0),p([f({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],ip.prototype,"size",void 0),p([ur("size")],ip.prototype,"castSize",null),p([f({type:Lyt,json:{default:"normal",write:!0}})],ip.prototype,"style",void 0),p([f({type:Pyt,json:{default:"normal",write:!0}})],ip.prototype,"weight",void 0),ip=h8=p([W("esri.symbols.Font")],ip);const JT=ip;var p8;const Uyt=Mn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let W0=p8=class extends we{constructor(e){super(e)}readHref(e,t,r){return e?r1(e,r):t.dataURI}writeHref(e,t,r,n){e&&(Hm(e)?t.dataURI=e:(t.href=p_(e,n),Na(t.href)&&(t.href=ll(t.href))))}clone(){return new p8({href:this.href,primitive:this.primitive})}};p([f({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],W0.prototype,"href",void 0),p([Ee("href")],W0.prototype,"readHref",null),p([Re("href",{href:{type:String},dataURI:{type:String}})],W0.prototype,"writeHref",null),p([tt(Uyt)],W0.prototype,"primitive",void 0),W0=p8=p([W("esri.symbols.support.IconSymbol3DLayerResource")],W0);var d8;let rb=d8=class extends mt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new d8({x:this.x,y:this.y})}};p([f({type:Number})],rb.prototype,"x",void 0),p([f({type:Number})],rb.prototype,"y",void 0),rb=d8=p([W("esri.symbols.support.Symbol3DAnchorPosition2D")],rb);var f8;let hx=f8=class extends we{constructor(e){super(e),this.color=new Ze([0,0,0,1]),this.size=pl(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new f8(e)}};p([f(Wm)],hx.prototype,"color",void 0),p([f(Ih)],hx.prototype,"size",void 0),hx=f8=p([W("esri.symbols.support.Symbol3DIconOutline")],hx);var nv;const Pce="esri.symbols.IconSymbol3DLayer";let _u=nv=class extends Uh{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new nv({anchor:this.anchor,anchorPosition:se(this.anchorPosition),enabled:this.enabled,material:se(this.material),outline:se(this.outline),resource:se(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||wS,r=IJ(e),n=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||wS).clone()}:null;return new nv({size:e.size,angle:e.angle,resource:{primitive:Vyt(e.style)},material:{color:t},outline:n,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||uyt(e.color)?wS:e.color,r=IJ(e);return new nv({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new nv({resource:{href:Foe({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};p([f({type:ka,json:{write:!0}})],_u.prototype,"material",void 0),p([f({type:W0,json:{write:!0}})],_u.prototype,"resource",void 0),p([tt({Icon:"icon"},{readOnly:!0})],_u.prototype,"type",void 0),p([f(Ih)],_u.prototype,"size",void 0),p([tt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],_u.prototype,"anchor",void 0),p([f({type:rb,json:{type:[Number],read:{reader:e=>new rb({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],_u.prototype,"anchorPosition",void 0),p([f({type:hx,json:{write:!0}})],_u.prototype,"outline",void 0),p([f({type:Number,json:{write:!0,default:0}})],_u.prototype,"angle",void 0),_u=nv=p([W(Pce)],_u);const qy=_u;function IJ(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,n=AJ(e.xoffset),i=AJ(e.yoffset);return(n||i)&&t&&r?{x:-n/t,y:i/r}:null}function AJ(e){return isFinite(e)?e:0}const Byt={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function Vyt(e){return Byt[e]||(Pe.getLogger(Pce).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Z0=class extends rr(we){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};p([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Z0.prototype,"type",void 0),p([f({type:ryt,json:{default:"begin-end",write:!0}})],Z0.prototype,"placement",void 0),p([f({type:xce,json:{default:"arrow",write:!0}})],Z0.prototype,"style",void 0),p([f({type:Ze,json:{type:[Ft],default:null,write:!0}})],Z0.prototype,"color",void 0),Z0=p([W("esri.symbols.LineStyleMarker3D")],Z0);const m8=Z0;var AM;let Lc=AM=class extends Uh{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=pl(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new AM(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??pl(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new VV({style:e.style}):null,material:new ka({color:(e.color||wS).clone()}),marker:e.marker?new m8({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new AM(t)}};p([f({type:ka,json:{write:!0}})],Lc.prototype,"material",void 0),p([tt({Line:"line"},{readOnly:!0})],Lc.prototype,"type",void 0),p([f({type:Rce,json:{write:!0,default:"miter"}})],Lc.prototype,"join",void 0),p([f({type:HV,json:{write:!0,default:"butt"}})],Lc.prototype,"cap",void 0),p([f(Ih)],Lc.prototype,"size",void 0),p([f(Ace)],Lc.prototype,"pattern",void 0),p([f({types:{key:"type",base:m8,typeMap:{style:m8}},json:{write:!0}})],Lc.prototype,"marker",void 0),Lc=AM=p([W("esri.symbols.LineSymbol3DLayer")],Lc);const __=Lc;var y8;const Gyt=Mn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let px=y8=class extends we{clone(){return new y8({href:this.href,primitive:this.primitive})}};p([f({type:String,json:{read:oR,write:Mm}})],px.prototype,"href",void 0),p([tt(Gyt)],px.prototype,"primitive",void 0),px=y8=p([W("esri.symbols.support.ObjectSymbol3DLayerResource")],px);var g8;let Oy=g8=class extends mt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new g8({x:this.x,y:this.y,z:this.z})}};p([f({type:Number})],Oy.prototype,"x",void 0),p([f({type:Number})],Oy.prototype,"y",void 0),p([f({type:Number})],Oy.prototype,"z",void 0),Oy=g8=p([W("esri.symbols.support.Symbol3DAnchorPosition3D")],Oy);var v8;let Ks=v8=class extends Uh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new v8({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};p([f({type:ka,json:{write:!0}})],Ks.prototype,"material",void 0),p([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ks.prototype,"castShadows",void 0),p([f({type:px,json:{write:!0}})],Ks.prototype,"resource",void 0),p([tt({Object:"object"},{readOnly:!0})],Ks.prototype,"type",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"width",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"height",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"depth",void 0),p([tt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Ks.prototype,"anchor",void 0),p([f({type:Oy,json:{type:[Number],read:{reader:e=>new Oy({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ks.prototype,"anchorPosition",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"heading",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"tilt",void 0),p([f({type:Number,json:{write:!0}})],Ks.prototype,"roll",void 0),p([f({readOnly:!0})],Ks.prototype,"isPrimitive",null),Ks=v8=p([W("esri.symbols.ObjectSymbol3DLayer")],Ks);const WV=Ks;var b8;let Po=b8=class extends Uh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new b8({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};p([f({type:ka,json:{write:!0}})],Po.prototype,"material",void 0),p([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Po.prototype,"castShadows",void 0),p([tt({Path:"path"},{readOnly:!0})],Po.prototype,"type",void 0),p([f({type:["circle","quad"],json:{write:!0,default:"circle"}})],Po.prototype,"profile",void 0),p([f({type:Rce,json:{write:!0,default:"miter"}})],Po.prototype,"join",void 0),p([f({type:Oyt,json:{write:!0,default:"butt"}})],Po.prototype,"cap",void 0),p([f({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Po.prototype,"width",void 0),p([Ee("width",["width","size","height"])],Po.prototype,"readWidth",null),p([f({type:Number,json:{write:!0}})],Po.prototype,"height",void 0),p([Ee("height",["height","size","width"])],Po.prototype,"readHeight",null),p([f({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Po.prototype,"anchor",void 0),p([f({type:["heading","all"],json:{write:!0,default:"all"}})],Po.prototype,"profileRotation",void 0),Po=b8=p([W("esri.symbols.PathSymbol3DLayer")],Po);const ZV=Po;var w8;let nb=w8=class extends we{constructor(){super(...arguments),this.color=new Ze([0,0,0,1]),this.size=0}clone(){const e={color:se(this.color),size:this.size};return new w8(e)}};p([f(Wm)],nb.prototype,"color",void 0),p([f(Ih)],nb.prototype,"size",void 0),nb=w8=p([W("esri.symbols.support.Symbol3DHalo")],nb);let xS=class extends rr(we){constructor(e){super(e),this.color=null}};p([f(Wm)],xS.prototype,"color",void 0),xS=p([W("esri.symbols.support.Symbol3DTextBackground")],xS);var MM;let ua=MM=class extends Uh{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,n){const i={...n,textSymbol3D:!0};t.font=e.write({},i),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new MM({enabled:this.enabled,font:this.font&&se(this.font),halo:this.halo&&se(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:se(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new MM({font:e.font!=null?e.font.clone():new JT,halo:zyt(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new ka({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new xS({color:e.backgroundColor.clone()}):null})}};function zyt(e,t){return e&&t!=null&&t>0?new nb({color:se(e),size:t}):null}p([f({type:JT,json:{write:!0}})],ua.prototype,"font",null),p([Re("font")],ua.prototype,"writeFont",null),p([f({type:nb,json:{write:!0}})],ua.prototype,"halo",void 0),p([f({...Nce,json:{default:"center",write:!0}})],ua.prototype,"horizontalAlignment",void 0),p([f({...Oce,json:{default:1,write:!0}})],ua.prototype,"lineHeight",void 0),p([f({type:ka,json:{write:!0}})],ua.prototype,"material",void 0),p([f({type:xS,json:{write:!0}})],ua.prototype,"background",void 0),p([f(Ih)],ua.prototype,"size",null),p([f({type:String,json:{write:!0}})],ua.prototype,"text",void 0),p([tt({Text:"text"},{readOnly:!0})],ua.prototype,"type",void 0),p([f({...Lce,json:{default:"baseline",write:!0}})],ua.prototype,"verticalAlignment",void 0),ua=MM=p([W("esri.symbols.TextSymbol3DLayer")],ua);const x_=ua;var _8;let pf=_8=class extends Uh{constructor(e){super(e),this.color=x8.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new _8({color:se(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};p([f({type:Ze,nonNullable:!0,json:{type:[Ft],write:(e,t,r)=>t[r]=e.toArray(Ze.AlphaMode.UNLESS_OPAQUE),default:()=>x8.clone(),defaultEquals:e=>e.toCss(!0)===x8.toCss(!0)}})],pf.prototype,"color",void 0),p([tt({Water:"water"},{readOnly:!0})],pf.prototype,"type",void 0),p([f({type:["small","medium","large"],json:{write:!0,default:"medium"}})],pf.prototype,"waterbodySize",void 0),p([f({type:Number,json:{write:!0,default:null}})],pf.prototype,"waveDirection",void 0),p([f({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],pf.prototype,"waveStrength",void 0),pf=_8=p([W("esri.symbols.WaterSymbol3DLayer")],pf);const Dce=pf,x8=new Ze([0,119,190]);var S8;let J0=S8=class extends mt{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new S8({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};p([f({type:String})],J0.prototype,"name",void 0),p([f({type:String})],J0.prototype,"styleUrl",void 0),p([f({type:String})],J0.prototype,"styleName",void 0),p([f({type:ta})],J0.prototype,"portal",void 0),J0=S8=p([W("esri.symbols.support.StyleOrigin")],J0);const z5=J0;var E8;let Cb=E8=class extends mt{constructor(){super(...arguments),this.url=""}clone(){return new E8({url:this.url})}};p([f({type:String})],Cb.prototype,"url",void 0),Cb=E8=p([W("esri.symbols.support.Thumbnail")],Cb);const Fce={icon:qy,object:WV,line:__,path:ZV,fill:a1,extrude:_ce,text:x_,water:Dce},$yt=st.ofType({base:Uh,key:"type",typeMap:Fce,errorContext:"symbol-layer"});let Pc=class extends Is{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=t?.type,n=r||st;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&Pe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){fd(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const n=r1(e.styleUrl,r);return new z5({styleUrl:n,name:e.name})}if(e.styleName&&e.name)return new z5({portal:r?.portal||ta.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new ea("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,n){if(e.styleUrl&&e.name){let i=p_(e.styleUrl,n);Na(i)&&(i=ll(i)),t.styleOrigin={styleUrl:i,name:e.name}}else e.styleName&&e.name&&(e.portal&&n?.portal&&!$B(e.portal.restUrl,n.portal.restUrl)?n?.messages&&n.messages.push(new ea("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Uh||e&&Fce[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};p([f({json:{read:!1,write:!1}})],Pc.prototype,"color",null),p([f({type:$yt,nonNullable:!0,json:{write:!0}}),ur(YB)],Pc.prototype,"symbolLayers",null),p([f({type:z5})],Pc.prototype,"styleOrigin",void 0),p([Ee("styleOrigin")],Pc.prototype,"readStyleOrigin",null),p([Re("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Pc.prototype,"writeStyleOrigin",null),p([f({type:Cb,json:{read:!1}})],Pc.prototype,"thumbnail",void 0),p([f({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Pc.prototype,"type",void 0),Pc=p([W("esri.symbols.Symbol3D")],Pc);const l1=Pc;let dx=class extends we{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};p([f({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],dx.prototype,"type",void 0),p([f({readOnly:!0})],dx.prototype,"visible",void 0),dx=p([W("esri.symbols.callouts.Callout3D")],dx);const jce=dx;var T8;let CM=T8=class extends we{constructor(e){super(e),this.color=new Ze("white")}clone(){return new T8({color:se(this.color)})}};p([f(Wm)],CM.prototype,"color",void 0),CM=T8=p([W("esri.symbols.callouts.LineCallout3DBorder")],CM);const qyt=CM;var I8;let df=I8=class extends jce{constructor(e){super(e),this.type="line",this.color=new Ze([0,0,0,1]),this.size=pl(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new I8({color:se(this.color),size:this.size,border:se(this.border)})}};p([tt({line:"line"})],df.prototype,"type",void 0),p([f(Wm)],df.prototype,"color",void 0),p([f(Ih)],df.prototype,"size",void 0),p([f({type:qyt,json:{write:!0}})],df.prototype,"border",void 0),p([f({readOnly:!0})],df.prototype,"visible",null),df=I8=p([W("esri.symbols.callouts.LineCallout3D")],df);const Uce=df;function JV(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Bce(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!JV(e)}const Vce={types:{key:"type",base:jce,typeMap:{line:Uce}},json:{write:!0}};var A8;let iv=A8=class extends we{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new A8({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};p([f(Ih)],iv.prototype,"screenLength",void 0),p([f({type:Number,nonNullable:!0,json:{write:!0,default:0}})],iv.prototype,"minWorldLength",void 0),p([f({type:Number,json:{write:!0}})],iv.prototype,"maxWorldLength",void 0),iv=A8=p([W("esri.symbols.support.Symbol3DVerticalOffset")],iv);const YV=iv;var kM;const Gce=st.ofType({base:null,key:"type",typeMap:{text:x_}});let ff=kM=class extends l1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Gce,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Bce(this)}hasVisibleVerticalOffset(){return JV(this)}clone(){return new kM({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail),callout:se(this.callout),verticalOffset:se(this.verticalOffset)})}static fromTextSymbol(e){return new kM({symbolLayers:new st([x_.fromTextSymbol(e)])})}};p([f({type:YV,json:{write:!0}})],ff.prototype,"verticalOffset",void 0),p([f(Vce)],ff.prototype,"callout",void 0),p([f({json:{read:!1,write:!1}})],ff.prototype,"styleOrigin",void 0),p([f({type:Gce})],ff.prototype,"symbolLayers",void 0),p([tt({LabelSymbol3D:"label-3d"},{readOnly:!0})],ff.prototype,"type",void 0),ff=kM=p([W("esri.symbols.LabelSymbol3D")],ff);const MR=ff;var RM;const zce=st.ofType({base:null,key:"type",typeMap:{line:__,path:ZV}}),Hyt=st.ofType({base:null,key:"type",typeMap:{line:__,path:ZV}});let fx=RM=class extends l1{constructor(e){super(e),this.symbolLayers=new zce,this.type="line-3d"}clone(){return new RM({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleLineSymbol(e){return new RM({symbolLayers:new st([__.fromSimpleLineSymbol(e)])})}};p([f({type:zce,json:{type:Hyt}})],fx.prototype,"symbolLayers",void 0),p([tt({LineSymbol3D:"line-3d"},{readOnly:!0})],fx.prototype,"type",void 0),fx=RM=p([W("esri.symbols.LineSymbol3D")],fx);const u1=fx;let mf=class extends Is{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};p([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],mf.prototype,"angle",void 0),p([f({type:["simple-marker","picture-marker"],readOnly:!0})],mf.prototype,"type",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],mf.prototype,"xoffset",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],mf.prototype,"yoffset",void 0),p([f({cast:e=>e==="auto"?e:Ds(lr(e)),json:{write:!0}})],mf.prototype,"size",void 0),mf=p([W("esri.symbols.MarkerSymbol")],mf);const $ce=mf;var OM;const qce=st.ofType({base:null,key:"type",typeMap:{fill:a1}});let mx=OM=class extends l1{constructor(e){super(e),this.symbolLayers=new qce,this.type="mesh-3d"}clone(){return new OM({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleFillSymbol(e){return new OM({symbolLayers:new st([a1.fromSimpleFillSymbol(e)])})}};p([f({type:qce})],mx.prototype,"symbolLayers",void 0),p([tt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],mx.prototype,"type",void 0),mx=OM=p([W("esri.symbols.MeshSymbol3D")],mx);const YT=mx;function Wyt(e,t,r){return t.imageData?Foe({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):Hce(t.url,r)}function Hce(e,t){if(!Na(e)){const r=Jyt(t);if(r)return Th(r,"images",e)}return r1(e,t)}function Zyt(e,t,r,n){if(Hm(e)){const i=Cg(e);if(!i)return;t.contentType=i.mediaType,t.imageData=i.data,r&&r.imageData===t.imageData&&r.url&&Mm(r.url,t,"url",n)}else Mm(e,t,"url",n)}const Wce={json:{read:{source:["imageData","url"],reader:Wyt},write:{writer(e,t,r,n){Zyt(e,t,this.source,n)}}}},Zce={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const n={};return t.imageData&&(n.imageData=t.imageData),t.contentType&&(n.contentType=t.contentType),t.url&&(n.url=Hce(t.url,r)),n}}}};function Jyt(e){if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const n=r?.type;return n==="feature"||n==="stream"?r.parsedUrl?.path:n==="map-image"||n==="tile"?e.url?.path:null}var M8;let Tl=M8=class extends Sce{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,n){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),r!=null&&(i.width=lr(r)),n!=null&&(i.height=lr(n)),i}clone(){const e=new M8({color:se(this.color),height:this.height,outline:se(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",se(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};p([tt({esriPFS:"picture-fill"},{readOnly:!0})],Tl.prototype,"type",void 0),p([f(Wce)],Tl.prototype,"url",void 0),p([f({type:Number,json:{write:!0}})],Tl.prototype,"xscale",void 0),p([f({type:Number,json:{write:!0}})],Tl.prototype,"yscale",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Tl.prototype,"width",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Tl.prototype,"height",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Tl.prototype,"xoffset",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Tl.prototype,"yoffset",void 0),p([f(Zce)],Tl.prototype,"source",void 0),Tl=M8=p([W("esri.symbols.PictureFillSymbol")],Tl);const XV=Tl;var C8;let xu=C8=class extends $ce{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t!=null&&(n.width=lr(t)),r!=null&&(n.height=lr(r)),n}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new C8({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",se(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};p([f({json:{write:!1}})],xu.prototype,"color",void 0),p([tt({esriPMS:"picture-marker"},{readOnly:!0})],xu.prototype,"type",void 0),p([f(Wce)],xu.prototype,"url",void 0),p([f(Zce)],xu.prototype,"source",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],xu.prototype,"height",void 0),p([Ee("height",["height","size"])],xu.prototype,"readHeight",null),p([f({type:Number,cast:lr,json:{write:!0}})],xu.prototype,"width",void 0),p([f({json:{write:!1}})],xu.prototype,"size",void 0),xu=C8=p([W("esri.symbols.PictureMarkerSymbol")],xu);const vh=xu;var Y0;const Jce=st.ofType({base:null,key:"type",typeMap:{icon:qy,object:WV,text:x_}});let X0=Y0=class extends l1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Jce,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Bce(this)}hasVisibleVerticalOffset(){return JV(this)}clone(){return new Y0({verticalOffset:se(this.verticalOffset),callout:se(this.callout),styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Y0({symbolLayers:new st([qy.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Y0({symbolLayers:new st([qy.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const t=e.data.symbol;return new Y0(t?.callout?{symbolLayers:new st([qy.fromCIMSymbol(e)]),callout:new Uce({size:.5,color:new Ze([0,0,0])}),verticalOffset:new YV({screenLength:40})}:{symbolLayers:new st([qy.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Y0({symbolLayers:new st([x_.fromTextSymbol(e)])})}};p([f({type:YV,json:{write:!0}})],X0.prototype,"verticalOffset",void 0),p([f(Vce)],X0.prototype,"callout",void 0),p([f({type:Jce,json:{origins:{"web-scene":{write:!0}}}})],X0.prototype,"symbolLayers",void 0),p([tt({PointSymbol3D:"point-3d"},{readOnly:!0})],X0.prototype,"type",void 0),X0=Y0=p([W("esri.symbols.PointSymbol3D")],X0);const Qp=X0;function Et(e,t,r={}){return QV(e,t,r,Yce)}function mc(e,t,r={}){return QV(e,t,r,Xce)}function QV(e,t,r={},n){let i=null;const s=r.once?(o,a)=>{n(o)&&(mn(i),t(o,a))}:(o,a)=>{n(o)&&t(o,a)};if(i=ylt(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return i}function ru(e,t,r,n={}){let i=null,s=null,o=null;function a(){i&&s&&(s.remove(),n.onListenerRemove?.(i),i=null,s=null)}function l(c){n.once&&n.once&&mn(o),r(c)}const u=Et(e,(c,h)=>{a(),qk(c)&&(i=c,s=r_(c,t,l),n.onListenerAdd?.(c))},{sync:n.sync,initial:!0});return o=gr(()=>{u.remove(),a()}),o}function CR(e,t){return Yyt(e,Xce,t)}function Yyt(e,t,r){if(Ba(r))return Promise.reject(Xr());const n=e();if(t?.(n))return Promise.resolve(n);let i=null;function s(){i=mn(i)}return new Promise((o,a)=>{i=e_([Oa(r,()=>{s(),a(Xr())}),QV(e,l=>{s(),o(l)},{sync:!1,once:!0},t??Yce)])})}function Yce(e){return!0}function Xce(e){return!!e}const Di={sync:!0},vs={initial:!0},_a={sync:!0,initial:!0};var yx;const Qce=st.ofType({base:null,key:"type",typeMap:{extrude:_ce,fill:a1,icon:qy,line:__,object:WV,text:x_,water:Dce}});let gx=yx=class extends l1{constructor(e){super(e),this.symbolLayers=new Qce,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&Kb(Pe.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&Kb(Pe.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(ru(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Di))}clone(){return new yx({styleOrigin:se(this.styleOrigin),symbolLayers:se(this.symbolLayers),thumbnail:se(this.thumbnail)})}static fromJSON(e){const t=new yx;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),n=t.symbolLayers.at(1);!n.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:n.size,color:n.material!=null?n.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new yx({symbolLayers:new st([a1.fromSimpleFillSymbol(e)])})}};p([f({type:Qce,json:{write:!0}})],gx.prototype,"symbolLayers",void 0),p([tt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],gx.prototype,"type",void 0),gx=yx=p([W("esri.symbols.PolygonSymbol3D")],gx);const Zm=gx;var k8;const vL=new Pt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Q0=k8=class extends Sce{constructor(...e){super(...e),this.color=new Ze([0,0,0,.25]),this.outline=new No,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t&&(n.outline=t),r&&(n.color=r),n}clone(){return new k8({color:se(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};p([f()],Q0.prototype,"color",void 0),p([f()],Q0.prototype,"outline",void 0),p([tt({esriSFS:"simple-fill"},{readOnly:!0})],Q0.prototype,"type",void 0),p([f({type:vL.apiValues,json:{read:vL.read,write:vL.write}})],Q0.prototype,"style",void 0),Q0=k8=p([W("esri.symbols.SimpleFillSymbol")],Q0);const yc=Q0;var R8;const bL=new Pt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Dc=R8=class extends $ce{constructor(...e){super(...e),this.color=new Ze([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new No}normalizeCtorArgs(e,t,r,n){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=lr(t)),r&&(i.outline=r),n&&(i.color=n),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new R8({angle:this.angle,color:se(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};p([f()],Dc.prototype,"color",void 0),p([Re("color")],Dc.prototype,"writeColor",null),p([tt({esriSMS:"simple-marker"},{readOnly:!0})],Dc.prototype,"type",void 0),p([f()],Dc.prototype,"size",void 0),p([f({type:bL.apiValues,json:{read:bL.read,write:bL.write}})],Dc.prototype,"style",void 0),p([f({type:String,json:{write:!0}})],Dc.prototype,"path",null),p([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":No}},json:{default:null,write:!0}})],Dc.prototype,"outline",void 0),Dc=R8=p([W("esri.symbols.SimpleMarkerSymbol")],Dc);const ra=Dc;var O8;let wn=O8=class extends Is{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new JT,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const n={};return e&&(n.text=e),t&&(n.font=t),r&&(n.color=r),n}writeLineWidth(e,t,r,n){n&&typeof n!="string"?n.origin:t[r]=e}castLineWidth(e){return lr(e)}writeLineHeight(e,t,r,n){n&&typeof n!="string"?n.origin:t[r]=e}clone(){return new O8({angle:this.angle,backgroundColor:se(this.backgroundColor),borderLineColor:se(this.borderLineColor),borderLineSize:this.borderLineSize,color:se(this.color),font:this.font&&this.font.clone(),haloColor:se(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};p([f({type:Ze,json:{write:!0}})],wn.prototype,"backgroundColor",void 0),p([f({type:Ze,json:{write:!0}})],wn.prototype,"borderLineColor",void 0),p([f({type:Number,json:{write:!0},cast:lr})],wn.prototype,"borderLineSize",void 0),p([f({type:JT,json:{write:!0}})],wn.prototype,"font",void 0),p([f({...Nce,json:{write:!0}})],wn.prototype,"horizontalAlignment",void 0),p([f({type:Boolean,json:{write:!0}})],wn.prototype,"kerning",void 0),p([f({type:Ze,json:{write:!0}})],wn.prototype,"haloColor",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],wn.prototype,"haloSize",void 0),p([f({type:Boolean,json:{write:!0}})],wn.prototype,"rightToLeft",void 0),p([f({type:Boolean,json:{write:!0}})],wn.prototype,"rotated",void 0),p([f({type:String,json:{write:!0}})],wn.prototype,"text",void 0),p([tt({esriTS:"text"},{readOnly:!0})],wn.prototype,"type",void 0),p([f({...Lce,json:{write:!0}})],wn.prototype,"verticalAlignment",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],wn.prototype,"xoffset",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],wn.prototype,"yoffset",void 0),p([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],wn.prototype,"angle",void 0),p([f({type:Number,json:{write:!0}})],wn.prototype,"width",void 0),p([f({type:Number})],wn.prototype,"lineWidth",void 0),p([Re("lineWidth")],wn.prototype,"writeLineWidth",null),p([ur("lineWidth")],wn.prototype,"castLineWidth",null),p([f(Oce)],wn.prototype,"lineHeight",void 0),p([Re("lineHeight")],wn.prototype,"writeLineHeight",null),wn=O8=p([W("esri.symbols.TextSymbol")],wn);const c1=wn;var N8;let Su=N8=class extends Is{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:ta.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new N8({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,n=r?this._fetchCacheKey:null;if(r!=null){const a=n&&r.get(n);if(a)return a.clone()}const{resolveWebStyleSymbol:i}=await Me(()=>import("./webStyleSymbolUtils-C8zbY7A8-Clgur_5v.js"),__vite__mapDeps([19,20,1,2]),import.meta.url);Gr(t);const s=i(this,{portal:this.portal},e,t);s.catch(a=>{Pe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r?.set(n,o.clone()),o):null}};p([f({json:{write:!1}})],Su.prototype,"color",void 0),p([f({type:String,json:{write:!0}})],Su.prototype,"styleName",void 0),p([f({type:ta,json:{write:!1}})],Su.prototype,"portal",void 0),p([f({type:String,json:{read:oR,write:Mm}})],Su.prototype,"styleUrl",void 0),p([f({type:Cb,json:{read:!1}})],Su.prototype,"thumbnail",void 0),p([f({type:String,json:{write:!0}})],Su.prototype,"name",void 0),p([tt({styleSymbolReference:"web-style"},{readOnly:!0})],Su.prototype,"type",void 0),p([f()],Su.prototype,"_fetchCacheKey",null),Su=N8=p([W("esri.symbols.WebStyleSymbol")],Su);const h1=Su;function kR(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Om(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Kp={base:Is,key:"type",typeMap:{"simple-fill":yc,"picture-fill":XV,"picture-marker":vh,"simple-line":No,"simple-marker":ra,text:c1,"label-3d":MR,"line-3d":u1,"mesh-3d":YT,"point-3d":Qp,"polygon-3d":Zm,"web-style":h1,cim:Md},errorContext:"symbol"},Xyt={base:Is,key:"type",typeMap:{"picture-marker":vh,"simple-marker":ra,"point-3d":Qp,cim:Md},errorContext:"symbol"},Qyt={base:Is,key:"type",typeMap:{"simple-line":No,"line-3d":u1,cim:Md},errorContext:"symbol"},Kyt={base:Is,key:"type",typeMap:{"simple-fill":yc,"picture-fill":XV,"polygon-3d":Zm,cim:Md},errorContext:"symbol"},egt={base:Is,key:"type",typeMap:{"picture-marker":vh,"simple-marker":ra,text:c1,"web-style":h1,cim:Md},errorContext:"symbol"},tgt=t1({types:Kp}),Kce={base:Is,key:"type",typeMap:{"simple-fill":yc,"picture-fill":XV,"picture-marker":vh,"simple-line":No,"simple-marker":ra,text:c1,"line-3d":u1,"mesh-3d":YT,"point-3d":Qp,"polygon-3d":Zm,"web-style":h1,cim:Md},errorContext:"symbol"},rgt={base:Is,key:"type",typeMap:{text:c1,"label-3d":MR},errorContext:"symbol"},MJ={base:Is,key:"type",typeMap:{"line-3d":u1,"mesh-3d":YT,"point-3d":Qp,"polygon-3d":Zm,"web-style":h1,cim:Md},errorContext:"symbol"},ngt={base:Is,key:"type",typeMap:{"label-3d":MR},errorContext:"symbol"},ehe=eu(Kp);var L8;function igt(e){if(!e)return null;const t={};for(const r in e){const n=An(e[r]);n&&(t[r]=n)}return Object.keys(t).length!==0?t:null}function sgt(e){if(e==null)return null;const t={};for(const r in e){const n=e[r];n&&(t[r]=n.toJSON())}return Object.keys(t).length!==0?t:null}let ca=L8=class extends rr(we){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:yS(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&aat(Pe.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new L8({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:sgt(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:rw(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if(t?.type==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,n){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(i.action=n),e==="attributes"&&(i.attributeName=n),this.layer.graphicChanged(i)}_watchMeshGeometryChanges(){this.addHandles([mc(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),mc(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};p([f({value:null,json:{read:igt}})],ca.prototype,"aggregateGeometries",null),p([f({value:null})],ca.prototype,"attributes",null),p([f({value:null,types:ji,json:{read:An}})],ca.prototype,"geometry",null),p([f({type:Boolean})],ca.prototype,"isAggregate",void 0),p([f({clonable:"reference"})],ca.prototype,"layer",void 0),p([f({clonable:"reference"})],ca.prototype,"origin",void 0),p([f({type:Ad})],ca.prototype,"popupTemplate",void 0),p([f({clonable:"reference"})],ca.prototype,"sourceLayer",void 0),p([f({value:null,types:Kp})],ca.prototype,"symbol",null),p([f({clonable:!1,json:{read:!1,write:!1}})],ca.prototype,"_version",void 0),p([f({type:Boolean,value:!0})],ca.prototype,"visible",null),ca=L8=p([W("esri.Graphic")],ca);const dl=ca;var P8;let vx=P8=class extends we{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new P8({minValue:this.minValue,maxValue:this.maxValue})}};p([f({type:Number,json:{write:!0}})],vx.prototype,"minValue",void 0),p([f({type:Number,json:{write:!0}})],vx.prototype,"maxValue",void 0),vx=P8=p([W("esri.renderers.support.AuthoringInfoClassBreakInfo")],vx);var D8;let zf=D8=class extends we{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new D8({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:se(this.classBreakInfos)})}};p([f({type:String,json:{write:!0}})],zf.prototype,"field",void 0),p([f({type:String,json:{write:!0}})],zf.prototype,"normalizationField",void 0),p([f({type:String,json:{write:!0}})],zf.prototype,"label",void 0),p([f({type:[vx],json:{write:!0}})],zf.prototype,"classBreakInfos",void 0),zf=D8=p([W("esri.renderers.support.AuthoringInfoFieldInfo")],zf);var F8;let sv=F8=class extends we{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new F8({label:this.label,value:this.value,size:this.size})}};p([f({type:String,json:{write:!0}})],sv.prototype,"label",void 0),p([f({type:Number,json:{write:!0}})],sv.prototype,"size",void 0),p([f({type:Number,json:{write:!0}})],sv.prototype,"value",void 0),sv=F8=p([W("esri.renderers.support.AuthoringInfoSizeStop")],sv);const ogt=sv;var j8;const SI=new Pt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),EI=new Pt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),CJ={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},kJ=["high-to-low","above-and-below","centered-on","extremes"],RJ=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],OJ=["seconds","minutes","hours","days","months","years"],agt=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let us=j8=class extends we{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new j8({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:se(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};p([f({types:CJ,json:{write:!0}})],us.prototype,"endTime",void 0),p([ur("endTime")],us.prototype,"castEndTime",null),p([f({type:String,json:{write:!0}})],us.prototype,"field",void 0),p([f({type:Number,json:{write:!0}})],us.prototype,"maxSliderValue",void 0),p([f({type:Number,json:{write:!0}})],us.prototype,"minSliderValue",void 0),p([f({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],us.prototype,"normalizationField",null),p([f({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],us.prototype,"referenceSizeScale",null),p([f({type:agt,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],us.prototype,"referenceSizeSymbolStyle",null),p([f({types:CJ,json:{write:!0}})],us.prototype,"startTime",void 0),p([ur("startTime")],us.prototype,"castStartTime",null),p([f({type:[ogt],json:{origins:{"web-scene":{write:!1}},write:!0}})],us.prototype,"sizeStops",null),p([f({type:SI.apiValues,value:null,json:{type:SI.jsonValues,read:SI.read,write:SI.write}})],us.prototype,"style",null),p([f({type:RJ,value:null,json:{type:RJ,origins:{"web-scene":{type:kJ,write:{writer:(e,t)=>{kJ.includes(e)&&(t.theme=e)}}}},write:!0}})],us.prototype,"theme",null),p([f({type:EI.apiValues,json:{type:EI.jsonValues,read:EI.read,write:EI.write}})],us.prototype,"type",void 0),p([f({type:OJ,json:{type:OJ,write:!0}})],us.prototype,"units",void 0),us=j8=p([W("esri.renderers.support.AuthoringInfoVisualVariable")],us);const lgt=us;let NM=class extends we{constructor(e){super(e),this.type=null}};p([f({readOnly:!0,json:{read:!1,write:!0}})],NM.prototype,"type",void 0),NM=p([W("esri.rest.support.ColorRamp")],NM);const KV=NM;var U8;let K0=U8=class extends KV{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new U8({fromColor:se(this.fromColor),toColor:se(this.toColor),algorithm:this.algorithm})}};p([tt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],K0.prototype,"algorithm",void 0),p([f({type:Ze,json:{type:[Ft],write:!0}})],K0.prototype,"fromColor",void 0),p([f({type:Ze,json:{type:[Ft],write:!0}})],K0.prototype,"toColor",void 0),p([f({type:["algorithmic"]})],K0.prototype,"type",void 0),K0=U8=p([W("esri.rest.support.AlgorithmicColorRamp")],K0);const eG=K0;var B8;let bx=B8=class extends KV{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new B8({colorRamps:se(this.colorRamps)})}};p([f({type:[eG],json:{write:!0}})],bx.prototype,"colorRamps",void 0),p([f({type:["multipart"]})],bx.prototype,"type",void 0),bx=B8=p([W("esri.rest.support.MultipartColorRamp")],bx);const RR=bx,OR={key:"type",base:KV,typeMap:{algorithmic:eG,multipart:RR}};function NR(e){return e?.type?e.type==="algorithmic"?eG.fromJSON(e):e.type==="multipart"?RR.fromJSON(e):null:null}var V8;const v0=new Pt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),TI=new Pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),NJ=new Pt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),LJ=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],ugt=["high-to-low","above-and-below","above","below"],cgt=["flow-line","wave-front"],hgt=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Un=V8=class extends we{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?NR(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new V8({classificationMethod:this.classificationMethod,colorRamp:se(this.colorRamp),fadeRatio:se(this.fadeRatio),fields:this.fields?.slice(),field1:se(this.field1),field2:se(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};p([f({type:v0.apiValues,value:null,json:{type:v0.jsonValues,read:v0.read,write:v0.write,origins:{"web-document":{default:"manual",type:v0.jsonValues,read:v0.read,write:v0.write}}}})],Un.prototype,"classificationMethod",null),p([f({types:OR,json:{write:!0}})],Un.prototype,"colorRamp",void 0),p([Ee("colorRamp")],Un.prototype,"readColorRamp",null),p([f({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Un.prototype,"fadeRatio",void 0),p([f({type:[String],value:null,json:{write:!0}})],Un.prototype,"fields",null),p([f({type:zf,value:null,json:{write:!0}})],Un.prototype,"field1",null),p([f({type:zf,value:null,json:{write:!0}})],Un.prototype,"field2",null),p([f({type:cgt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Un.prototype,"flowTheme",null),p([f({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Un.prototype,"focus",null),p([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Un.prototype,"isAutoGenerated",void 0),p([f({type:Number,value:null,json:{type:Ft,write:!0}})],Un.prototype,"numClasses",null),p([f({type:LJ,json:{type:LJ,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Un.prototype,"lengthUnit",void 0),p([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Un.prototype,"maxSliderValue",void 0),p([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Un.prototype,"minSliderValue",void 0),p([f({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Un.prototype,"statistics",null),p([f({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Un.prototype,"standardDeviationInterval",null),p([f({type:TI.apiValues,value:null,json:{type:TI.jsonValues,read:TI.read,write:TI.write,origins:{"web-scene":{type:NJ.jsonValues,write:{writer:NJ.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Un.prototype,"type",null),p([f({type:[lgt],json:{write:!0}})],Un.prototype,"visualVariables",void 0),p([f({type:hgt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Un.prototype,"univariateSymbolStyle",null),p([f({type:ugt,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Un.prototype,"univariateTheme",null),Un=V8=p([W("esri.renderers.support.AuthoringInfo")],Un);const XT=Un,wL=new Pt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let wx=class extends we{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};p([f({type:XT,json:{write:!0}})],wx.prototype,"authoringInfo",void 0),p([f({type:wL.apiValues,readOnly:!0,json:{type:wL.jsonValues,read:!1,write:{writer:wL.write,ignoreOrigin:!0}}})],wx.prototype,"type",void 0),wx=p([W("esri.renderers.Renderer")],wx);const Bh=wx;function pgt(e){return e.match(dgt)?.[1]?.replace(/\\'/g,"'")??null}const dgt=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let _x=class extends rr(we){constructor(){super(...arguments),this.showLegend=null,this.title=null}};p([f({type:Boolean,json:{write:!0}})],_x.prototype,"showLegend",void 0),p([f({type:String,json:{write:!0}})],_x.prototype,"title",void 0),_x=p([W("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],_x);const the=_x,_L=new Pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Eu=class extends we{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this).error(".field: field must be a string value"),null):LT(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};p([f()],Eu.prototype,"index",void 0),p([f({type:_L.apiValues,readOnly:!0,json:{read:_L.read,write:_L.write}})],Eu.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],Eu.prototype,"field",void 0),p([ur("field")],Eu.prototype,"castField",null),p([f({type:String,json:{write:!0}})],Eu.prototype,"valueExpression",void 0),p([f({type:String,json:{write:!0}})],Eu.prototype,"valueExpressionTitle",void 0),p([f({readOnly:!0})],Eu.prototype,"arcadeRequired",null),p([f({type:the,json:{write:!0}})],Eu.prototype,"legendOptions",void 0),Eu=p([W("esri.renderers.visualVariables.VisualVariable")],Eu);const S_=Eu;var G8;let ey=G8=class extends we{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new G8({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};p([f({type:Ze,json:{type:[Ft],write:!0}})],ey.prototype,"color",void 0),p([f({type:String,json:{write:!0}})],ey.prototype,"label",void 0),p([f({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],ey.prototype,"value",void 0),p([Re("value")],ey.prototype,"writeValue",null),ey=G8=p([W("esri.renderers.visualVariables.support.ColorStop")],ey);const rhe=ey;var z8;let ty=z8=class extends S_{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new z8({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};p([f({readOnly:!0})],ty.prototype,"cache",null),p([f({type:["color"],json:{type:["colorInfo"]}})],ty.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],ty.prototype,"normalizationField",void 0),p([f({type:[rhe],json:{write:!0}})],ty.prototype,"stops",null),ty=z8=p([W("esri.renderers.visualVariables.ColorVariable")],ty);const nhe=ty;var $8;let yf=$8=class extends we{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return dw(t.transparency)}writeOpacity(e,t,r){t[r]=TR(e)}clone(){return new $8({label:this.label,opacity:this.opacity,value:this.value})}};p([f({type:String,json:{write:!0}})],yf.prototype,"label",void 0),p([f({type:Number,json:{type:Ft,write:{target:"transparency"}}})],yf.prototype,"opacity",void 0),p([Ee("opacity",["transparency"])],yf.prototype,"readOpacity",null),p([Re("opacity")],yf.prototype,"writeOpacity",null),p([f({type:Number,json:{write:!0}})],yf.prototype,"value",void 0),yf=$8=p([W("esri.renderers.visualVariables.support.OpacityStop")],yf);const fgt=yf;var q8;let ry=q8=class extends S_{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new q8({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};p([f({readOnly:!0})],ry.prototype,"cache",null),p([f({type:["opacity"],json:{type:["transparencyInfo"]}})],ry.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],ry.prototype,"normalizationField",void 0),p([f({type:[fgt],json:{write:!0}})],ry.prototype,"stops",null),ry=q8=p([W("esri.renderers.visualVariables.OpacityVariable")],ry);const tG=ry;var H8;let ny=H8=class extends S_{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new H8({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};p([f({readOnly:!0})],ny.prototype,"cache",null),p([f({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],ny.prototype,"axis",void 0),p([f({type:["rotation"],json:{type:["rotationInfo"]}})],ny.prototype,"type",void 0),p([f({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],ny.prototype,"rotationType",void 0),ny=H8=p([W("esri.renderers.visualVariables.RotationVariable")],ny);const LR=ny;function mgt(e){return lr(e)}var W8;let gf=W8=class extends we{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new W8({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};p([f({type:String,json:{write:!0}})],gf.prototype,"label",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],gf.prototype,"size",void 0),p([f({type:Number,json:{write:!0}})],gf.prototype,"value",void 0),p([f({type:Boolean,json:{write:!1}})],gf.prototype,"useMinValue",void 0),p([f({type:Boolean,json:{write:!1}})],gf.prototype,"useMaxValue",void 0),gf=W8=p([W("esri.renderers.visualVariables.support.SizeStop")],gf);const LM=gf;let PM=class extends the{constructor(){super(...arguments),this.customValues=null}};p([f({type:[Number],json:{write:!0}})],PM.prototype,"customValues",void 0),PM=p([W("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],PM);const ygt=PM;var id,Ni;function ib(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function IE(e){return e!=null&&!isNaN(e)&&isFinite(e)}function ihe(e){return e.valueExpression?id.Expression:e.field&&typeof e.field=="string"?id.Field:id.Unknown}function ggt(e,t){const r=t||ihe(e),n=e.valueUnit||"unknown";return r===id.Unknown?Ni.Constant:e.stops?Ni.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Ni.ClampedLinear:n==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Ni.Proportional:Ni.Additive:Ni.Identity:Ni.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(id||(id={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Ni||(Ni={}));function vgt(e){}function bgt(e){return()=>e}const PR={unknown:1,inches:$i(1,"meters","inches"),feet:$i(1,"meters","feet"),"us-feet":$i(1,"meters","us-feet"),yards:$i(1,"meters","yards"),miles:$i(1,"meters","miles"),"nautical-miles":$i(1,"meters","nautical-miles"),millimeters:$i(1,"meters","millimeters"),centimeters:$i(1,"meters","centimeters"),decimeters:$i(1,"meters","decimeters"),meters:$i(1,"meters","meters"),kilometers:$i(1,"meters","kilometers"),"decimal-degrees":1/gae(1,"meters",Fn.radius)},she=()=>Pe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),DR=e=>she().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),FR=()=>she().error("Use of arcade expressions requires an arcade context");new dl;const DM=Math.PI,ohe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function wgt(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="color"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void DR("ColorVariable");const i=typeof t=="number",s=i?null:t,o=s?.attributes;let a=i?t:null;const l=n.field,{ipData:u,hasExpression:c}=n.cache;let h=n.cache.compiledFunc;if(!l&&!c){const y=n.stops;return y&&y[0]&&y[0].color}if(typeof a!="number")if(c){if(r?.arcade==null)return void FR();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(y),S=g.createExecContext(s,b,r.timeZone);if(!h){const E=g.createSyntaxTree(n.valueExpression);h=g.createFunction(E),n.cache.compiledFunc=h}a=g.executeFunction(h,S)}else o&&(a=o[l]);const d=n.normalizationField,m=o!=null&&d!=null?parseFloat(o[d]):void 0;if(a!=null&&(!d||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(a/=m);const y=nG(a,u);if(y){const g=y[0],b=y[1],S=g===b?n.stops[g].color:Ze.blendColors(n.stops[g].color,n.stops[b].color,y[2],r?.color);return new Ze(S)}}}function _gt(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(y=>y.type==="opacity"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void DR("OpacityVariable");const i=typeof t=="number",s=i?null:t,o=s?.attributes;let a=i?t:null;const l=n.field,{ipData:u,hasExpression:c}=n.cache;let h=n.cache.compiledFunc;if(!l&&!c){const y=n.stops;return y&&y[0]&&y[0].opacity}if(typeof a!="number")if(c){if(r?.arcade==null)return void FR();const y={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(y),S=g.createExecContext(s,b,r.timeZone);if(!h){const E=g.createSyntaxTree(n.valueExpression);h=g.createFunction(E),n.cache.compiledFunc=h}a=g.executeFunction(h,S)}else o&&(a=o[l]);const d=n.normalizationField,m=o!=null&&d!=null?parseFloat(o[d]):void 0;if(a!=null&&(!d||i||!isNaN(m)&&m!==0)){isNaN(m)||i||(a/=m);const y=nG(a,u);if(y){const g=y[0],b=y[1];if(g===b)return n.stops[g].opacity;{const S=n.stops[g].opacity;return S+(n.stops[b].opacity-S)*y[2]}}}}function ahe(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void DR("RotationVariable");const i=n.axis||"heading",s=i==="heading"&&n.rotationType==="arithmetic"?90:0,o=i==="heading"&&n.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a?.attributes,u=n.field,{hasExpression:c}=n.cache;let h=n.cache.compiledFunc,d=0;if(!u&&!c)return d;if(c){if(r?.arcade==null)return void FR();const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},y=r.arcade.arcadeUtils,g=y.getViewInfo(m),b=y.createExecContext(a,g,r.timeZone);if(!h){const S=y.createSyntaxTree(n.valueExpression);h=y.createFunction(S),n.cache.compiledFunc=h}d=y.executeFunction(h,b)}else l&&(d=l[u]||0);return d=typeof d!="number"||isNaN(d)?null:s+o*d,d}function xgt(e,t,r){const n=typeof t=="number",i=n?null:t,s=i?.attributes;let o=n?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const c=r?.scale,h=r?.view;o=c==null||h==="3d"?Sgt(e):c}else if(!n)switch(e.inputValueType){case id.Expression:{if(r?.arcade==null)return void FR();const c={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},h=r.arcade.arcadeUtils,d=h.getViewInfo(c),m=h.createExecContext(i,d,r.timeZone);if(!l){const y=h.createSyntaxTree(e.valueExpression);l=h.createFunction(y),e.cache.compiledFunc=l}o=h.executeFunction(l,m);break}case id.Field:s&&(o=s[e.field]);break;case id.Unknown:o=null}if(!IE(o))return null;if(n||!e.normalizationField)return o;const u=s?parseFloat(s[e.normalizationField]):null;return IE(u)&&u!==0?o/u:null}function Sgt(e){let t=null,r=null;const n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function rG(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void DR("SizeVariable");const i=uhe(xgt(n,t,r),n,t,r,n.cache.ipData);return i==null||isNaN(i)?0:i}function $l(e,t,r){return e==null?null:ib(e)?rG(e,t,r):IE(e)?e:null}function lhe(e,t,r){return IE(r)&&e>r?r:IE(t)&&e<t?t:e}function Egt(e,t,r,n){return e+(($l(t.minSize,r,n)||t.minDataValue)??0)}function Tgt(e,t,r){const n=e.stops;let i=n?.length&&n[0].size;return i==null&&(i=e.minSize),$l(i,t,r)}function Igt(e,t,r,n){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=$l(t.minSize,r,n),o=$l(t.maxSize,r,n),a=n?.shape;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?DM*(s/2)**2:s*s,c=u+i*((l?DM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(c/DM):Math.sqrt(c)}return s+i*(o-s)}function Agt(e,t,r,n){const i=n?.shape,s=e/t.minDataValue,o=$l(t.minSize,r,n),a=$l(t.maxSize,r,n);let l=null;return l=i==="circle"?2*Math.sqrt(s*(o/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(s*o**2):s*o,lhe(l,o,a)}function Mgt(e,t,r,n,i){const[s,o,a]=nG(e,i);if(s===o)return $l(t.stops?.[s].size,r,n);{const l=$l(t.stops?.[s].size,r,n);return l+($l(t.stops?.[o].size,r,n)-l)*a}}function Cgt(e,t,r,n){const i=(n?.resolution??1)*PR[t.valueUnit],s=$l(t.minSize,r,n),o=$l(t.maxSize,r,n),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/DM)/i:a==="radius"||a==="distance"?2*e/i:e/i,lhe(l,s,o)}function uhe(e,t,r,n,i){switch(t.transformationType){case Ni.Additive:return Egt(e,t,r,n);case Ni.Constant:return Tgt(t,r,n);case Ni.ClampedLinear:return Igt(e,t,r,n);case Ni.Proportional:return Agt(e,t,r,n);case Ni.Stops:return Mgt(e,t,r,n,i);case Ni.RealWorldSize:return Cgt(e,t,r,n);case Ni.Identity:return e;case Ni.Unknown:return null}}function nG(e,t){if(!t)return;let r=0,n=t.length-1;return t.some((i,s)=>e<i?(n=s,!0):(r=s,!1)),[r,n,(e-t[r])/(t[n]-t[r])]}function che(e,t,r){const n=["proportional","proportional","proportional"];for(const i of e){const s=i.useSymbolValue?"symbol-value":rG(i,t,r);switch(i.axis){case"width":n[0]=s;break;case"depth":n[1]=s;break;case"height":n[2]=s;break;case"width-and-depth":n[0]=s,n[1]=s;break;case"all":case void 0:case null:n[0]=s,n[1]=s,n[2]=s;break;default:i.axis}}return n}const kgt=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:che,getColor:wgt,getOpacity:_gt,getRotationAngle:ahe,getSize:rG,getSizeForValue:uhe,getSizeFromNumberOrVariable:$l,viewScaleRE:ohe},Symbol.toStringTag,{value:"Module"}));var Z8;const II=new Pt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),J8=new Pt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function PJ(e){if(e!=null)return typeof e=="string"||typeof e=="number"?mgt(e):e.type==="size"?ib(e)?e:(delete(e={...e}).type,new Ir(e)):void 0}function DJ(e,t,r){if(typeof e!="object")return e;const n=new Ir;return n.read(e,r),n}let Ir=Z8=class extends S_{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&ohe.test(this.valueExpression)}}set index(e){ib(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),ib(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return ihe(this)}set maxDataValue(e){e&&this.stops&&(Pe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Pe.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return PJ(e)}readMaxSize(e,t,r){return DJ(e,t,r)}set minDataValue(e){e&&this.stops&&(Pe.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Pe.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return PJ(e)}readMinSize(e,t,r){return DJ(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(Pe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return ggt(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,n){if(e==="$view.scale"){if(n?.messages){const i=this.index,s=typeof i=="string"?i:`visualVariables[${i}]`;n.messages.push(new ie("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:n}))}}else t[r]=e}readValueUnit(e){return e?J8.read(e):null}clone(){return new Z8({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:ib(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:ib(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===Ni.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Ni.Stops){const e=this.stops;if(!e)return this;const t=e.map(n=>n.size).reverse(),r=e.length;for(let n=0;n<r;n++)e[n].size=t[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}};p([f({readOnly:!0})],Ir.prototype,"cache",null),p([f({type:II.apiValues,json:{type:II.jsonValues,origins:{"web-map":{read:!1}},read:II.read,write:II.write}})],Ir.prototype,"axis",void 0),p([f()],Ir.prototype,"index",null),p([f({type:String,readOnly:!0})],Ir.prototype,"inputValueType",null),p([f({type:ygt,json:{write:!0}})],Ir.prototype,"legendOptions",void 0),p([f({type:Number,value:null,json:{write:!0}})],Ir.prototype,"maxDataValue",null),p([f({type:Number,value:null,json:{write:!0}})],Ir.prototype,"maxSize",null),p([ur("maxSize")],Ir.prototype,"castMaxSize",null),p([Ee("maxSize")],Ir.prototype,"readMaxSize",null),p([f({type:Number,value:null,json:{write:!0}})],Ir.prototype,"minDataValue",null),p([f({type:Number,value:null,json:{write:!0}})],Ir.prototype,"minSize",null),p([ur("minSize")],Ir.prototype,"castMinSize",null),p([Ee("minSize")],Ir.prototype,"readMinSize",null),p([f({type:String,json:{write:!0}})],Ir.prototype,"normalizationField",void 0),p([f({readOnly:!0})],Ir.prototype,"arcadeRequired",null),p([f({type:String})],Ir.prototype,"scaleBy",void 0),p([f({type:[LM],value:null,json:{write:!0}})],Ir.prototype,"stops",null),p([f({type:["outline"],json:{write:!0}})],Ir.prototype,"target",void 0),p([f({type:String,readOnly:!0})],Ir.prototype,"transformationType",null),p([f({type:["size"],json:{type:["sizeInfo"]}})],Ir.prototype,"type",void 0),p([f({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ir.prototype,"useSymbolValue",void 0),p([f({type:String,json:{write:!0}})],Ir.prototype,"valueExpression",void 0),p([Ee("valueExpression",["valueExpression","expression"])],Ir.prototype,"readValueExpression",null),p([Re("web-scene","valueExpression")],Ir.prototype,"writeValueExpressionWebScene",null),p([f({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ir.prototype,"valueRepresentation",void 0),p([f({type:J8.apiValues,json:{write:J8.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ir.prototype,"valueUnit",void 0),p([Ee("valueUnit")],Ir.prototype,"readValueUnit",null),Ir=Z8=p([W("esri.renderers.visualVariables.SizeVariable")],Ir);const Jm=Ir,Rgt={color:nhe,size:Jm,opacity:tG,rotation:LR},Ogt=new Pt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),Ngt=/^\[([^\]]+)\]$/i;let FM=class extends mt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter(t=>!!t),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let n=null;return n=t.target===r.target?0:t.target?1:-1,n});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:n,rotationType:i}=t,s=n?.match(Ngt),o=s?.[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:o})),e)return e.map(a=>{const l=Ogt.read(a.type),u=Rgt[l];u||(Pe.getLogger(this).warn(`Unknown variable type: ${l}`),r?.messages&&r.messages.push(new ea("visual-variable:unsupported",`visualVariable of type '${l}' is not supported`,{definition:a,context:r})));const c=new u;return c.read(a,r),c})}writeVariables(e,t){const r=[];for(const n of e){const i=n.toJSON(t);i&&r.push(i)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};p([f()],FM.prototype,"visualVariables",null),FM=p([W("esri.renderers.visualVariables.VisualVariableFactory")],FM);const Lgt=FM,Pgt={base:S_,key:"type",typeMap:{opacity:tG,color:nhe,rotation:LR,size:Jm}},Ym=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Lgt}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,n,i){return this._vvFactory.readVariables(r,n,i)}writeVisualVariables(r,n,i,s){n[i]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,n){return r?this.getVisualVariablesForType(r,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(r,n){const i=this.visualVariables;return i?i.filter(s=>s.type===r&&(typeof n=="string"?s.target===n:n!==!1||!s.target)):[]}async collectVVRequiredFields(r,n){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const s of i)s&&(s.field&&Mo(r,n,s.field),s.normalizationField&&Mo(r,n,s.normalizationField),s.valueExpression&&(Dgt(s.valueExpression,r,n)||await ko(r,n,s.valueExpression)))}};return p([f({types:[Pgt],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),p([Ee("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),p([Re("visualVariables")],t.prototype,"writeVisualVariables",null),t=p([W("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Dgt(e,t,r){const n=pgt(e);return n!=null&&(Mo(t,r,n),!0)}const iG=[252,146,31,255],Fgt=[153,153,153,255],hhe={type:"esriSMS",style:"esriSMSCircle",size:6,color:iG,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},phe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:iG},dhe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},jgt={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Ugt={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Bgt={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Vgt={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},sG=ra.fromJSON(hhe),oG=No.fromJSON(phe),aG=yc.fromJSON(dhe),Ggt=c1.fromJSON(jgt);function zgt(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return sG;case"polyline":return oG;case"polygon":case"extent":return aG}return null}const $gt=ra.fromJSON(Ugt),qgt=No.fromJSON(Bgt),Hgt=yc.fromJSON(Vgt);Qp.fromSimpleMarkerSymbol(sG),u1.fromSimpleLineSymbol(oG),Zm.fromSimpleFillSymbol(aG),new YT({symbolLayers:new st([new a1({material:{color:iG},edges:new uce({size:pl(1),color:new Ze(Fgt)})})])});const Wgt=new u1({symbolLayers:new st([new __({material:{color:new Ze([0,0,0])},size:pl(1)})])}),Zgt=new Zm({symbolLayers:new st([new a1({outline:{color:new Ze([0,0,0]),size:pl(1)}})])}),FJ="#useCIMFallbackSymbology()",P1={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function Jgt(e,t=P1){if(!e)return{symbol:null};const{retainId:r=P1.retainId,ignoreDrivers:n=P1.ignoreDrivers,hasLabelingContext:i=P1.hasLabelingContext,retainCIM:s=P1.retainCIM,cimFallbackEnabled:o=P1.cimFallbackEnabled}=t;let a=null;if(Om(e)||e instanceof h1)a=e.clone();else if(e.type==="cim"){const l=e.data?.symbol?.type;switch(l){case"CIMPointSymbol":a=s?e.clone():Qp.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=Wgt.clone(),t?.logWarning?.(FJ,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Zgt.clone(),t?.logWarning?.(FJ,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new ie("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof No)a=u1.fromSimpleLineSymbol(e);else if(e instanceof ra)a=Qp.fromSimpleMarkerSymbol(e);else if(e instanceof vh)a=Qp.fromPictureMarkerSymbol(e);else if(e instanceof yc)a=t.geometryType&&t.geometryType==="mesh"?YT.fromSimpleFillSymbol(e):Zm.fromSimpleFillSymbol(e);else{if(!(e instanceof c1))return{error:new ie("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=i?MR.fromTextSymbol(e):Qp.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),n&&Om(a)&&a.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:a}}function $5(e,t,r,n){const i=fhe(e,{},{context:n,isLabelSymbol:!1});i!=null&&(t[r]=i)}function jJ(e,t,r,n){const i=fhe(e,{},{context:n,isLabelSymbol:!0});i!=null&&(t[r]=i)}function UJ(e){return e instanceof l1||e instanceof h1}function Ygt(e){return e instanceof l1&&(e.type==="polygon-3d"||e.type==="line-3d")}function fhe(e,t,r){if(e==null)return null;const{context:n,isLabelSymbol:i}=r,s=n?.origin,o=n?.messages;if(s==="web-scene"&&!UJ(e)){const a=Jgt(e,{retainCIM:!0,hasLabelingContext:i});return a.symbol!=null?a.symbol.write(t,n):(o?.push(new ie("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:a.error})),null)}return p6(n?.layer)&&Ygt(e)?(o?.push(new ie("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):(s==="web-map"||s==="portal-item"&&!p6(n?.layer))&&UJ(e)?(o?.push(new ie("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(t,n)}function jR(e,t){return tgt(e,null,t)}const UR={types:Kce,json:{write:{writer:$5},origins:{"web-scene":{types:MJ,write:{writer:$5},read:{reader:t1({types:MJ})}}}}},lG=AB({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},UR),uG={types:{base:Is,key:"type",typeMap:{"simple-fill":Kp.typeMap["simple-fill"],"picture-fill":Kp.typeMap["picture-fill"],"polygon-3d":Kp.typeMap["polygon-3d"],cim:Kp.typeMap.cim}},json:{write:{writer:$5},origins:{"web-scene":{type:Zm,write:{writer:$5}}}}},jM={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};var Y8;let vf=Y8=class extends we{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Y8({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};p([f({type:String,json:{write:!0}})],vf.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],vf.prototype,"label",void 0),p([f({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],vf.prototype,"minValue",void 0),p([f({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],vf.prototype,"maxValue",void 0),p([f(lG)],vf.prototype,"symbol",void 0),vf=Y8=p([W("esri.renderers.support.ClassBreakInfo")],vf);const fw=vf,Xgt=Mn()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let xx=class extends rr(we){constructor(e){super(e),this.title=null,this.order=null}};p([f({type:String,json:{write:!0}})],xx.prototype,"title",void 0),p([tt(Xgt)],xx.prototype,"order",void 0),xx=p([W("esri.renderers.support.RendererLegendOptions")],xx);const QT=xx;var X8;const mhe="log",UM="percent-of-total",BM="field",AI=new Pt({esriNormalizeByLog:mhe,esriNormalizeByPercentOfTotal:UM,esriNormalizeByField:BM}),Qgt=Nr(fw);let Mi=X8=class extends Ym(Bh){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let n=t.minValue;return e.map(i=>{const s=new fw;return s.read(i,r),s.minValue==null&&(s.minValue=n),s.maxValue==null&&(s.maxValue=s.minValue),n=s.maxValue,s})}writeClassBreakInfos(e,t,r,n){const i=e.map(s=>s.write({},n));this._areClassBreaksConsecutive()&&i.forEach(s=>delete s.classMinValue),t[r]=i}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this).error(".field: field must be a string value"),null):LT(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&BM||r&&UM||null,t&&r&&Pe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==BM&&e!==UM||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let n=null;n=typeof e=="number"?new fw({minValue:e,maxValue:t,symbol:ehe(r)}):Qgt(se(e)),this.classBreakInfos.push(n),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let n=0;n<r;n++){const i=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(n,1);break}}}getBreakIndex(e,t){return this.valueExpression&&t?.arcade==null&&Pe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await km()});const n=this.getBreakIndex(e,r);return n!==-1?this.classBreakInfos[n]:null}getSymbol(e,t){if(this.valueExpression&&t?.arcade==null)return void Pe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&t?.arcade==null){const i=await km(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:i}}const n=this.getBreakIndex(e,r);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((n,i)=>n+i.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new X8({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:se(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:se(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(n=>n.collectRequiredFields(e,t)),ko(e,t,this.valueExpression)];Mo(e,t,this.field),Mo(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=s.arcadeUtils;if(!l){const h=u.createSyntaxTree(a);l=u.createFunction(h),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const c=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:n,spatialReference:i}),o));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,n=this.normalizationType;let i=parseFloat(r[t]);if(n){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(n===mhe)i=Math.log(i)*Math.LOG10E;else if(n!==UM||s==null||isNaN(s)){if(n===BM&&!isNaN(o)){if(isNaN(i)||isNaN(o))return-1;i/=o}}else i=i/s*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};p([f(uG)],Mi.prototype,"backgroundFillSymbol",void 0),p([f({type:[fw]})],Mi.prototype,"classBreakInfos",void 0),p([Ee("classBreakInfos")],Mi.prototype,"readClassBreakInfos",null),p([Re("classBreakInfos")],Mi.prototype,"writeClassBreakInfos",null),p([f({type:String,json:{write:!0}})],Mi.prototype,"defaultLabel",void 0),p([f(UR)],Mi.prototype,"defaultSymbol",void 0),p([f({type:String,json:{write:!0}})],Mi.prototype,"field",void 0),p([ur("field")],Mi.prototype,"castField",null),p([f({type:Boolean})],Mi.prototype,"isMaxInclusive",void 0),p([f({type:QT,json:{write:!0}})],Mi.prototype,"legendOptions",void 0),p([f({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Mi.prototype,"minValue",null),p([f({type:String,json:{write:!0}})],Mi.prototype,"normalizationField",void 0),p([f({type:Number,json:{write:!0}})],Mi.prototype,"normalizationTotal",void 0),p([f({type:AI.apiValues,value:null,json:{type:AI.jsonValues,read:AI.read,write:AI.write}})],Mi.prototype,"normalizationType",null),p([tt({classBreaks:"class-breaks"})],Mi.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],Mi.prototype,"valueExpression",void 0),p([f({type:String,json:{write:!0}})],Mi.prototype,"valueExpressionTitle",void 0),Mi=X8=p([W("esri.renderers.ClassBreaksRenderer")],Mi);const p1=Mi,Q8=-3,Kgt=Q8-1;var Op;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Op||(Op={}));let e1t=class{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new rd,this._users=new rd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(t=>t[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){return this._db.get(e.id+t)?.size??0}put(e,t,r,n,i){t=e.id+t;const s=this._db.get(t);if(s&&(this._size-=s.size,e.size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,s.size,Op.ALL)),n>this._maxSize)return void this._notifyRemove(t,r,n,Op.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${t}`),void this._notifyRemove(t,r,0,Op.ALL);const o=1+Math.max(i,Kgt)-Q8;this._db.set(t,new t1t(r,n,o)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,t,r,n){t=e.id+t;const i=this._db.get(t);if(i&&i.entry===r){for(this._size-=i.size,e.size-=i.size;n>this._maxSize;){const s=this._notifyRemove(t,r,n,Op.SOME);if(!(s!=null&&s>0))return void this._db.delete(t);n=s}i.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach((s,o)=>{const a=s.lifetime;r[a]=(r[a]||0)+s.size,this._users.forAll(l=>{const{id:u,name:c}=l;if(o.startsWith(u)){const h=t[c]||0;t[c]=h+s.size}})});const n={};this._users.forAll(s=>{const o=s.name;if("hitRate"in s&&typeof s.hitRate=="number"&&!isNaN(s.hitRate)&&s.hitRate>0){const a=t[o]||0;t[o]=a,n[o]=Math.round(100*s.hitRate)+"%"}else n[o]="0%"});const i=Object.keys(t);i.sort((s,o)=>t[o]-t[s]),i.forEach(s=>e[s]=Math.round(t[s]/2**20)+"MB / "+n[s]);for(let s=r.length-1;s>=0;--s){const o=r[s];o&&(e["Priority "+(s+Q8-1)]=Math.round(o/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){const t=e.id;this._db.forEach((r,n)=>{n.startsWith(t)&&(this._size-=r.size,this._db.delete(n),this._notifyRemove(n,r.entry,r.size,Op.ALL))}),e.size=0}clearAll(){this._db.forEach((e,t)=>this._notifyRemove(t,e.entry,e.size,Op.ALL)),this._users.forAll(e=>e.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,n){let i;return this._removeFuncs.some(s=>{if(e.startsWith(s[0])){const o=s[1](t,n,r);return typeof o=="number"&&(i=o),!0}return!1}),i}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e)),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const r=e?.id;let n=!0;for(;n;){n=!1;for(const[i,s]of this._db)if(s.lifetime===0&&(!r||i.startsWith(r))){if(this._purgeItem(i,s,e),t.size<=.9*t.maxSize)return;n||=this._db.has(i)}}for(const[i,s]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,s,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find(n=>e.startsWith(n.id))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const n=this._notifyRemove(e,t.entry,t.size,Op.SOME);n!=null&&n>0&&(this._size+=n,r&&(r.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}},t1t=class{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}},BR=class{constructor(e,t){this._storage=new e1t,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}},VR=class K8{constructor(t,r,n=""){this.major=t,this.minor=r,this._context=n}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}greaterEqual(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",n=this._context&&this._context+" ";throw new ie(r+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new K8(this.major,this.minor,this._context)}static parse(t,r=""){const[n,i]=t.split("."),s=/^\s*\d+\s*$/;if(!n?.match||!s.test(n))throw new ie((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!s.test(i))throw new ie((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(n,10),a=parseInt(i,10);return new K8(o,a,r)}},KT=class{};function yhe(e){return e instanceof s1?e===KT.instance:e?.toString().toLowerCase()==="unknown"}function r1t(e){return yhe(e)?KT.instance:e}KT.instance=new Ga("Etc/UTC");function n1t(e){return"timeZone"in e}function i1t(e){return"timeZone"in e}function s1t(e){return"dateFieldsTimeZone"in e}const o1t=new Map;let e3=class VM{static fromJSON(t){return new VM(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new VM(t.fields??[],VJ(t))}static fromLayerJSON(t){return new VM(t.fields??[],VJ(t))}constructor(t=[],r){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const n=[];for(const i of this.fields){const s=i?.name,o=BJ(s);if(s&&o){const a=Ny(s);this._fieldsMap.set(s,i),this._fieldsMap.set(a,i),this._normalizedFieldsMap.set(o,i),n.push(`${a}:${i.type}:${this._timeZoneByFieldName?.get(s)}`),zue(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):NV(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),wJ(i)||_J(i)||(i.editable=i.editable==null||!!i.editable,i.nullable=i.nullable==null||!!i.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)wJ(t)||_J(t)||t.nullable||jue(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Ny(t))??this._normalizedFieldsMap.get(BJ(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(Pe.getLogger("esri.layers.support.FieldsIndex").error(new ie("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),gd):ghe.has(r.type)?Cm:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===Cm?KT.instance:r===gd?Ji.utcInstance:s_(o1t,r,()=>Ga.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return $ue(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??void 0}toJSON(){return{fields:this.fields.map(t=>rw(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Ny(e){return e.trim().toLowerCase()}function BJ(e){return Lue(e)?.toLowerCase()??""}const ghe=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function VJ(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:n,editFieldsInfo:i}=e,s=(n?"startField"in n?n.startField:n.startTimeField:"")??"",o=(n?"endField"in n?n.endField:n.endTimeField:"")??"",a=s1t(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?dM(e.dateFieldsTimeReference):null,l=i?n1t(i)?i.timeZone??a:i.dateFieldsTimeReference?dM(i.dateFieldsTimeReference):a??gd:null,u=n?i1t(n)?n.timeZone??a:n.timeReference?dM(n.timeReference):a:null,c=new Map([[Ny(i?.creationDateField??""),l],[Ny(i?.editDateField??""),l],[Ny(s),u],[Ny(o),u]]);for(const{name:h,type:d}of e.fields)if(ghe.has(d))t.set(h,Cm);else if(d!=="date"&&d!=="esriFieldTypeDate")t.set(h,null);else if(r)t.set(h,Cm);else{const m=c.get(Ny(h??""))??a;t.set(h,m)}return t}let cG=1e-6;function Co(){return cG}function a1t(e){cG=e}const t3=Math.random,l1t=Math.PI/180,u1t=180/Math.PI;function GR(e){return e*l1t}function vhe(e){return e*u1t}function c1t(e,t){return Math.abs(e-t)<=cG*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:t3,equals:c1t,getEpsilon:Co,setEpsilon:a1t,toDegree:vhe,toRadian:GR},Symbol.toStringTag,{value:"Module"}));function bhe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function h1t(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function whe(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function _he(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function xhe(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function She(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Ehe(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function p1t(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function d1t(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function f1t(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function m1t(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function y1t(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function The(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function g1t(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function Ihe(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function hG(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function pG(e){const t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function dG(e){const t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function v1t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function b1t(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Ahe(e,t){const r=t[0],n=t[1],i=t[2],s=t[3];let o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=s*o),e}function Mhe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function fG(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e[3]=a+n*(r[3]-a),e}function w1t(e,t=1){const r=t3;let n,i,s,o,a,l;do n=2*r()-1,i=2*r()-1,a=n*n+i*i;while(a>=1);do s=2*r()-1,o=2*r()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*n,e[1]=t*i,e[2]=t*s*u,e[3]=t*o*u,e}function Che(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,e}function _1t(e,t,r){const n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2],u=r[3],c=u*n+a*s-l*i,h=u*i+l*n-o*s,d=u*s+o*i-a*n,m=-o*n-a*i-l*s;return e[0]=c*u+m*-o+h*-l-d*-a,e[1]=h*u+m*-a+d*-o-c*-l,e[2]=d*u+m*-l+c*-a-h*-o,e[3]=t[3],e}function x1t(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function khe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Rhe(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=t[0],a=t[1],l=t[2],u=t[3],c=Co();return Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=c*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-u)<=c*Math.max(1,Math.abs(s),Math.abs(u))}const S1t=xhe,E1t=She,T1t=Ehe,I1t=Ihe,A1t=hG,M1t=pG,C1t=dG;Object.freeze(Object.defineProperty({__proto__:null,add:_he,ceil:p1t,copy:bhe,copyVec3:h1t,dist:I1t,distance:Ihe,div:T1t,divide:Ehe,dot:Mhe,equals:Rhe,exactEquals:khe,floor:d1t,inverse:b1t,len:M1t,length:pG,lerp:fG,max:m1t,min:f1t,mul:E1t,multiply:She,negate:v1t,normalize:Ahe,random:w1t,round:y1t,scale:The,scaleAndAdd:g1t,set:whe,sqrDist:A1t,sqrLen:C1t,squaredDistance:hG,squaredLength:dG,str:x1t,sub:S1t,subtract:xhe,transformMat4:Che,transformQuat:_1t},Symbol.toStringTag,{value:"Module"}));function r3(){return[0,0,0,0]}function k1t(e){return[e[0],e[1],e[2],e[3]]}function d1(e,t,r,n){return[e,t,r,n]}function Ohe(e,t,r,n){return[e,t,r,n]}function Nhe(e,t=r3()){const r=Math.min(4,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function R1t(e,t){return new Float64Array(e,t,4)}function Lhe(){return r3()}function Phe(){return d1(1,1,1,1)}function Dhe(){return d1(1,0,0,0)}function Fhe(){return d1(0,1,0,0)}function jhe(){return d1(0,0,1,0)}function Uhe(){return d1(0,0,0,1)}const Bhe=Lhe(),Vhe=Phe(),O1t=Dhe(),N1t=Fhe(),L1t=jhe(),P1t=Uhe();Object.freeze(Object.defineProperty({__proto__:null,ONES:Vhe,UNIT_W:P1t,UNIT_X:O1t,UNIT_Y:N1t,UNIT_Z:L1t,ZEROS:Bhe,clone:k1t,create:r3,createView:R1t,freeze:Ohe,fromArray:Nhe,fromValues:d1,ones:Phe,unitW:Uhe,unitX:Dhe,unitY:Fhe,unitZ:jhe,zeros:Lhe},Symbol.toStringTag,{value:"Module"}));function mG(e){return"r"in e&&"g"in e&&"b"in e}function Ghe(e){return"h"in e&&"s"in e&&"v"in e}function zhe(e){return"l"in e&&"a"in e&&"b"in e}function $he(e){return"l"in e&&"c"in e&&"h"in e}function D1t(e){return"x"in e&&"y"in e&&"z"in e}const F1t=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],j1t=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function qhe(e,t){const r=[];let n,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(n=0;n<s;n++){for(a=0,i=0;i<o;i++)a+=e[n][i]*t[i];r.push(a)}return r}function Hhe(e){const t=[e.r/255,e.g/255,e.b/255].map(n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4),r=qhe(F1t,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function yG(e){const t=qhe(j1t,[e.x/100,e.y/100,e.z/100]).map(r=>{const n=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(n,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function Whe(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function Zhe(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(n=>n>6/29?n**3:3*(6/29)**2*(n-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function U1t(e){const t=e.l,r=e.a,n=e.b,i=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r);return s=s>0?s:s+2*Math.PI,{l:t,c:i,h:s}}function B1t(e){const t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}function V1t(e){return Whe(Hhe(e))}function G1t(e){return yG(Zhe(e))}function z1t(e){return U1t(Whe(Hhe(e)))}function $1t(e){return yG(Zhe(B1t(e)))}function q1t(e){const t=e.r,r=e.g,n=e.b,i=Math.max(t,r,n),s=i-Math.min(t,r,n);let o=i,a=s===0?0:i===t?(r-n)/s%6:i===r?(n-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function H1t(e){const t=(e.h+360)%360/60,r=e.s/100,n=e.v/100*255,i=n*r,s=i*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:i,g:s,b:0};break;case 1:o={r:s,g:i,b:0};break;case 2:o={r:0,g:i,b:s};break;case 3:o={r:0,g:s,b:i};break;case 4:o={r:s,g:0,b:i};break;case 5:case 6:o={r:i,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+n-i),o.g=Math.round(o.g+n-i),o.b=Math.round(o.b+n-i),o}function n3(e){return mG(e)?e:$he(e)?$1t(e):zhe(e)?G1t(e):D1t(e)?yG(e):Ghe(e)?H1t(e):e}function q5(e){return Ghe(e)?e:q1t(n3(e))}function e9(e){return zhe(e)?e:V1t(n3(e))}function t9(e){return $he(e)?e:z1t(n3(e))}function W1t(e,t){const{r,g:n,b:i}=e;return .2126*r+.7152*n+.0722*i}var r9;function Z1t(e,t=r9.High){return W1t(e)>t?new Ze([0,0,0,e.a]):new Ze([255,255,255,e.a])}function J1t(e,t,r={}){if(e.length===0||t<=0)return[];if((e=e.map(n=>typeof n=="string"?new Ze(n):n)).length===1||t===1){const n=[],i=e[0];for(let s=0;s<t;s++)n.push(i.clone());return n}if(r.shuffle&&(e=hse(se(e),r.seed)),e.length>=t){const n=[],i=(e.length-1)/(t-1);for(let s=0;s<t;s++){const o=Math.round(s*i);n.push(e[o].clone())}return n}return Y1t(e,t,r)}function Y1t(e,t,r={}){const n=[],i=e.length-1,s=Math.ceil((t-e.length)/i);e:for(let o=0;o<i;o++){const a=e[o],l=e[o+1];for(let u=1;u<=s;u++){const c=u/(s+1);if(n.push(X1t(a,l,c,r)),n.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...hse(n,r.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(r9||(r9={}));const xL=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function X1t(e,t,r,n={}){const i=e.r,s=e.g,o=e.b,a=t.r,l=t.g,u=t.b,c=Math.round(i+(a-i)*r),h=Math.round(s+(l-s)*r),d=Math.round(o+(u-o)*r);if(!n.offset)return new Ze([c,h,d]);const m=cse(n.seed);return new Ze([xL(c,m),xL(h,m),xL(d,m)])}var n9,i9,s9,GJ,o9,zJ,a9,l9,u9,$J,H5,W5,qJ,HJ,WJ,ZJ,c9,h9,JJ,YJ,p9,d9,f9,XJ,QJ,m9,KJ,eY,y9,g9,tY,rY,nY,iY,sY,oY,v9,b9,aY,lY,w9,uY,cY,hY,pY,_9,x9,S9,E9,dY,fY,mY,yY,gY,vY,bY,T9,I9,wY,A9,_Y,xY;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(n9||(n9={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i9||(i9={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(s9||(s9={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(GJ||(GJ={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(o9||(o9={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(zJ||(zJ={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(a9||(a9={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(l9||(l9={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(u9||(u9={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}($J||($J={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(H5||(H5={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(W5||(W5={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(qJ||(qJ={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(HJ||(HJ={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(WJ||(WJ={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(ZJ||(ZJ={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(c9||(c9={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(h9||(h9={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(JJ||(JJ={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(YJ||(YJ={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(p9||(p9={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(d9||(d9={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(f9||(f9={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(XJ||(XJ={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(QJ||(QJ={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(m9||(m9={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(KJ||(KJ={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(eY||(eY={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(y9||(y9={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(g9||(g9={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(tY||(tY={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(rY||(rY={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(nY||(nY={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(iY||(iY={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(sY||(sY={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(oY||(oY={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(v9||(v9={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(b9||(b9={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(aY||(aY={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(lY||(lY={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(w9||(w9={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(uY||(uY={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(cY||(cY={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(hY||(hY={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(pY||(pY={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(_9||(_9={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(x9||(x9={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(S9||(S9={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(E9||(E9={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(dY||(dY={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(fY||(fY={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(mY||(mY={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(yY||(yY={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(gY||(gY={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(vY||(vY={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(bY||(bY={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(T9||(T9={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(I9||(I9={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(wY||(wY={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(A9||(A9={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(_Y||(_Y={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(xY||(xY={}));const Q1t={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},Z5={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:H5.Loop,repeatdelay:0,easing:W5.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function K1t(e){return[e.r,e.g,e.b,e.a]}const evt=` /-,
`;function SY(e){let t=e.length;for(;t--;)if(!evt.includes(e.charAt(t)))return!1;return!0}function tvt(e,t){const r=[];let n=0,i=-1;do if(i=e.indexOf("[",n),i>=n){if(i>n){const s=e.slice(n,i);r.push([s,null,SY(s)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const s=t[e.slice(n,i)];s&&r.push([null,s,!1])}n=i+1}}while(i!==-1);if(n<e.length){const s=e.slice(n);r.push([s,null,SY(s)])}return r}function rvt(e,t,r,n){let i="",s=null;for(const o of t){const[a,l,u]=o;if(a)u?s=a:(s&&(i+=s,s=null),i+=a);else{let c=l;r!=null&&(c=rpe(l,r));const h=e.attributes[c];h&&(s&&(i+=s,s=null),i+=h)}}return nvt(i,n)}function nvt(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function ivt(e,t,r,n,i,s,o=!0){const a=t/i,l=r/s,u=Math.ceil(a/2),c=Math.ceil(l/2);for(let h=0;h<s;h++)for(let d=0;d<i;d++){const m=4*(d+(o?s-h-1:h)*i);let y=0,g=0,b=0,S=0,E=0,x=0,w=0;const T=(h+.5)*l;for(let I=Math.floor(h*l);I<(h+1)*l;I++){const M=Math.abs(T-(I+.5))/c,C=(d+.5)*a,k=M*M;for(let N=Math.floor(d*a);N<(d+1)*a;N++){let F=Math.abs(C-(N+.5))/u;const P=Math.sqrt(k+F*F);P>=-1&&P<=1&&(y=2*P*P*P-3*P*P+1,y>0&&(F=4*(N+I*t),w+=y*e[F+3],b+=y,e[F+3]<255&&(y=y*e[F+3]/250),S+=y*e[F],E+=y*e[F+1],x+=y*e[F+2],g+=y))}}n[m]=S/g,n[m+1]=E/g,n[m+2]=x/g,n[m+3]=w/b}}function gG(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function Jhe(e){return e.data?.symbol??null}function Yhe(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Xhe(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function svt(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function zR(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const ovt=(e,t=0)=>e==null||isNaN(e)?t:e,avt=(e,t)=>e??t,lvt=(e,t)=>e??t,uvt=e=>e.tintColor?gG(e.tintColor):[255,255,255,1],cvt=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function hvt(){return Me(()=>import("./geometryEngineJSON-cnFh4oQ2-BA0BxkoC.js"),__vite__mapDeps([21,22,1,2]),import.meta.url).then(e=>e.g)}function pvt(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function dvt(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function fvt(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function mvt(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function M9(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=M9(t);if(r!=null)return r}break;case"CIMTextSymbol":return M9(e.symbol);case"CIMSolidFill":return e.color}return null}function C9(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const n=C9(r);if(n!=null)return n}break}case"CIMTextSymbol":return C9(e.symbol);case"CIMSolidStroke":return e.color}}function k9(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=k9(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return k9(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function yvt(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function gvt(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function vvt(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const bvt=e=>e.includes("data:image/svg+xml");function i3(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function wvt(e,t,r,n,i,s,o=!0){const{infos:a}=s;let l=1,u=0,c=0,h=0,d=1;for(const{absoluteAnchorPoint:g,offsetX:b,offsetY:S,rotation:E,size:x,frameHeight:w,rotateClockWise:T,scaleSymbolsProportionally:I}of a)d=g?1:l,c=IY(b,S,u,d,c),h=TY(b,S,u,d,h),w&&(I||o)&&(l*=x/w),u=AY(E,T,u);const m=IY(n,i,u,d,c),y=TY(n,i,u,d,h);return{size:e*l,rotation:AY(t,r,u),offsetX:m,offsetY:y}}function Qhe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>Qhe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function Khe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...Q1t[t]];const r=Z5[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function _vt(e){return e.split(" ").map(t=>Number(t))}function epe(e){return typeof e=="string"?_vt(e):e}function tpe(e){return e?.dashTemplate&&(e.dashTemplate=epe(e.dashTemplate)),e}function R9(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return R9(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return R9(r.symbol)}}return"Normal"}function xvt(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const n=r.size??Z5.CIMVectorMarker.size;n>t&&(t=n);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const n=r.width;n!=null&&n>t&&(t=n);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&zR(r.markerPlacement)){const n=r.size??Z5.CIMVectorMarker.size;n>t&&(t=n)}break;case"CIMPictureFill":{const n=r.height;n!=null&&n>t&&(t=n)}}}return t}}}function rpe(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function npe(e){return e.map(t=>({...t,propertyName:i3(t.propertyName)}))}function EY(e){const t={};for(const r in e){const n=e[r];t[i3(r)]=n}return t}function TY(e,t,r,n,i){const s=r*Math.PI/180;if(s){const o=Math.cos(s);return(Math.sin(s)*e+o*t)*n+i}return t*n+i}function IY(e,t,r,n,i){const s=r*Math.PI/180;return s?(Math.cos(s)*e-Math.sin(s)*t)*n+i:e*n+i}function AY(e,t,r){return t?r-e:r+e}function Svt(e,t,r){const n=r==="Color"||r==="TintColor"||r==="ToColor",i=r==="Rotation"||r==="Angle"||r==="ToRotation";let s=t[i3(r)];if(s!=null&&(n?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180)),s==null&&(s=Khe(t.type,r.toLowerCase()),s!=null&&(n?s=[s[0]/255,s[1]/255,s[2]/255,s[3]]:i&&(s*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[r];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(s=a,s!=null&&(n?s=[s[0]/255,s[1]/255,s[2]/255,s[3]/255]:i&&(s*=Math.PI/180))):(s={valueExpressionInfo:a,defaultValue:s},s!=null&&(n?s={type:"Process",op:"ArcadeColor",value:s}:i&&(s={type:"Process",op:"Divide",left:s,right:180/Math.PI}))))}}if(s==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return s}function Evt(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function Tvt(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function E_(e){if(Tvt(e))return e;const{originPosition:t,scale:r,translate:n}=e,i=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[i,t==="lowerLeft"?s:-s,r[2]??1,r[3]??1],translate:[n[0]??0,n[1]??0,n[2]??0,n[3]??0]}}function Ivt({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function Avt({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function Mvt({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function Cvt({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function s3({scale:e,translate:t},r){return r*e[0]+t[0]}function o3({scale:e,translate:t},r){return r*e[1]+t[1]}function AE({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function ME({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function vG(e,t){return e&&t?Nvt:e&&!t?Rvt:!e&&t?Ovt:kvt}const kvt=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=s3(e,n[0]),s=o3(e,n[1]);r[0]=[i,s];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[h,d]=t[c];i+=l*h,s+=u*d,r[c]=[i,s]}return r},Rvt=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=s3(e,n[0]),s=o3(e,n[1]);r[0]=[i,s,AE(e,n[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[h,d,m]=t[c];i+=l*h,s+=u*d,r[c]=[i,s,AE(e,m)]}return r},Ovt=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=s3(e,n[0]),s=o3(e,n[1]);r[0]=[i,s,ME(e,n[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[h,d,m]=t[c];i+=l*h,s+=u*d,r[c]=[i,s,ME(e,m)]}return r},Nvt=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const n=t[0];let i=s3(e,n[0]),s=o3(e,n[1]);r[0]=[i,s,AE(e,n[2]),ME(e,n[3])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[h,d,m,y]=t[c];i+=l*h,s+=u*d,r[c]=[i,s,AE(e,m),ME(e,y)]}return r};function ipe(e,t,r){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=t(e,r[i]);return n}function Lvt(e,t,r){const n=E_(e);return t.x=Ivt(n,r.x),t.y=Avt(n,r.y),r.z!=null&&(t.z=Mvt(n,r.z)),r.m!=null&&(t.m=Cvt(n,r.m)),t}function Pvt(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){if(r!=null){const s=E_(e);t.points=vG(n,i)(s,r.points),t.hasZ=n,t.hasM=i}return t}function Dvt(e,t,r,n=r?.z!=null,i=r?.m!=null){if(r==null)return t;const s=E_(e);return t.x=s3(s,r.x),t.y=o3(s,r.y),n&&(t.z=AE(s,r.z)),i&&(t.m=ME(s,r.m)),t}function Fvt(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){if(r!=null){const s=E_(e);t.rings=ipe(s,vG(n,i),r.rings),t.hasZ=n,t.hasM=i}return t}function jvt(e,t,r,n=r?.hasZ??!1,i=r?.hasM??!1){if(r!=null){const s=E_(e);t.paths=ipe(s,vG(n,i),r.paths),t.hasZ=n,t.hasM=i}return t}function Uvt(e,t,r,n,i){if(e==null)return null;const s=e.referencesGeometry()&&i?Bvt(t,n,i):t,o=e.repurposeFeature(s);try{return e.evaluate({...r,$feature:o},e.services)}catch(a){return Pe.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const SL=new Map;function Bvt(e,t,r){const{transform:n,hasZ:i,hasM:s}=r;SL.has(t)||SL.set(t,Vvt(t));const o=SL.get(t)(e.geometry,n,i,s);return{...e,geometry:o}}function Vvt(e){const t={};switch(e){case"esriGeometryPoint":return(r,n,i,s)=>Dvt(n,t,r,i,s);case"esriGeometryPolygon":return(r,n,i,s)=>Fvt(n,t,r,i,s);case"esriGeometryPolyline":return(r,n,i,s)=>jvt(n,t,r,i,s);case"esriGeometryMultipoint":return(r,n,i,s)=>Pvt(n,t,r,i,s);default:return Pe.getLogger("esri.views.2d.support.arcadeOnDemand").error(new ie("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const Gvt=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:n,a:i}=e;return[t,r,n,255*i]};let bG=class On{static findApplicableOverrides(t,r,n){if(t&&r){if(t.primitiveName){let i=!1;for(const s of n)if(s.primitiveName===t.primitiveName){i=!0;break}if(!i)for(const s of r)s.primitiveName===t.primitiveName&&n.push(s)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const i of t.effects)On.findApplicableOverrides(i,r,n);if(t.symbolLayers)for(const i of t.symbolLayers)On.findApplicableOverrides(i,r,n);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const i of t.effects)On.findApplicableOverrides(i,r,n);if(t.markerPlacement&&On.findApplicableOverrides(t.markerPlacement,r,n),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const i of t.markerGraphics)On.findApplicableOverrides(i,r,n),On.findApplicableOverrides(i.symbol,r,n)}else t.type==="CIMCharacterMarker"?On.findApplicableOverrides(t.symbol,r,n):t.type==="CIMHatchFill"?On.findApplicableOverrides(t.lineSymbol,r,n):t.type==="CIMPictureMarker"&&On.findApplicableOverrides(t.animatedSymbolProperties,r,n)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&tpe(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const n=EY(t),i=t.primitiveName,s=[];for(const o of r)o.primitiveName===i&&s.push(EY(o));return{type:"cim-effect-param",effect:n,overrides:npe(s)}}static async resolveSymbolOverrides(t,r,n,i,s,o,a){if(!t?.symbol)return null;let{symbol:l,primitiveOverrides:u}=t;const c=!!u;if(!c&&!i)return l;l=se(l),u=se(u);let h=!0;if(r||(r={attributes:{}},h=!1),c){if(h||(u=u.filter(d=>!d.valueExpressionInfo?.expression.includes("$feature"))),a||(u=u.filter(d=>!d.valueExpressionInfo?.expression.includes("$view"))),u.length>0){const d={spatialReference:n,fields:vvt(r.attributes),geometryType:s};await On.createRenderExpressions(u,d),On.evaluateOverrides(u,r,s??"esriGeometryPoint",o,a)}On.applyOverrides(l,u)}return i&&On.applyDictionaryTextOverrides(l,r,i,null),l}static async createRenderExpressions(t,r){const n=[];for(const i of t){const s=i.valueExpressionInfo;if(!s||On._expressionToRenderExpression.has(s.expression))continue;const o=Rue(s.expression,r.spatialReference,r.fields);n.push(o),o.then(a=>On._expressionToRenderExpression.set(s.expression,a))}n.length>0&&await Promise.all(n)}static evaluateOverrides(t,r,n,i,s){const o={$view:{scale:s?.scale}};for(const a of t){a.value&&typeof a.value=="object"&&mG(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=Gvt(a.value));const l=a.valueExpressionInfo;if(!l)continue;const u=On._expressionToRenderExpression.get(l.expression);u&&(a.value=Uvt(u,r,o,n,i))}}static applyDictionaryTextOverrides(t,r,n,i,s="Normal"){if(t?.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&On.applyDictionaryTextOverrides(a,r,n,i,t.type==="CIMTextSymbol"?t.textCase:s)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&On.applyDictionaryTextOverrides(a,r,n,i)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=tvt(o,n);t.textString=rvt(r,a,i,s)}}}}static applyOverrides(t,r,n,i){if(t.primitiveName){for(const s of r)if(s.primitiveName===t.primitiveName){const o=i3(s.propertyName);if(i&&i.push({cim:t,nocapPropertyName:o,value:t[o]}),n){let a=!1;for(const l of n)l.primitiveName===t.primitiveName&&(a=!0);a||n.push(s)}s.value!=null&&(t[o]=s.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)On.applyOverrides(s,r,n,i);if(t.symbolLayers)for(const s of t.symbolLayers)On.applyOverrides(s,r,n,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const s of t.effects)On.applyOverrides(s,r,n,i);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const s of t.markerGraphics)On.applyOverrides(s,r,n,i),On.applyOverrides(s.symbol,r,n,i)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const n of t)n.value!==void 0&&(r+=`${n.primitiveName}${n.propertyName}${JSON.stringify(n.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(n=>Number(n));if(t==="Color"){const n=new Ze(r).toRgba();return n[3]*=255,n}return r}};bG._expressionToRenderExpression=new Map;const MY="esri.renderers.support.DictionaryLoader",zvt={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let spe=class{constructor(e,t,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new BR(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise}catch(c){if(Fi(c))return this._dictionaryPromise=null,null}const n=this._dictionaryVersion?.greaterEqual(4,0),i={};if(this.fieldMap)for(const c of this._symbolFields){const h=rpe(this.fieldMap[c],this._fieldIndex);if(h){const d=e.attributes[h];i[c]=n?d:d!=null?""+e.attributes[h]:""}else i[c]=""}let s=null;try{s=r?.(i,t)}catch{return null}if(!s||typeof s!="string"||s==="invalid")return null;const o=s.split(";"),a=[],l=[];for(let c=0;c<o.length;c++){const h=o[c];if(h){if(h.includes("po:")){const d=h.slice(3).split("|");if(d.length===3){const m=d[0],y=d[1];let g=d[2];const b="countrylabel";if(m===b&&y==="TextString"){if(this.fieldMap!=null){let S=this.fieldMap[b];S==null&&(S=b,this.fieldMap[S]=S),e.attributes[S]=g}continue}if(y==="DashTemplate")g=g.split(" ").map(S=>Number(S));else if(y==="Color"){const S=new Ze(g).toRgba();g=[S[0],S[1],S[2],255*S[3]]}else g=Number(g);l.push({primitiveName:m,propertyName:y,value:g,defaultValue:null})}}else if(h.includes("|")){for(const d of h.split("|"))if(this._itemNames.has(d)){a.push(d);break}}else if(this._itemNames.has(h))a.push(h);else if(c===0){a.length=0;let d="Invalid_P";e.geometry!=null&&(gh(e.geometry)?d="Invalid_A":f_(e.geometry)&&(d="Invalid_L")),a.push(d);break}}}const u=e.geometry==null||!e.geometry.hasZ&&e.geometry.type==="point";return this._cimPartsToCIMSymbol(e,a,l,u,t)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void Pe.getLogger(MY).error("no valid URL!");const t=Xe(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:e!=null?e.signal:null}),[{data:r}]=await Promise.all([t,km()]);if(!r)throw this._dictionaryPromise=null,new ie("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:n,dictionary_version:i,expression:s,itemsNames:o}=r,a=s;let l=!1;i&&(this._dictionaryVersion=VR.parse(i),l=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(o),this._symbolFields=n.symbol;const u={};if(this.config){const d=this.config;for(const m in d)u[m]=d[m]}if(n.configuration)for(const d of n.configuration)u.hasOwnProperty(d.name)||(u[d.name]=d.value);const c=[];if(e?.fields&&this.fieldMap)for(const d in this.fieldMap){const m=this.fieldMap[d],y=e.fields.filter(g=>g.name.toLowerCase()===m?.toLowerCase());y.length>0&&c.push({...y[0],type:l?y[0].type:"esriFieldTypeString"})}c.length>0&&(this._fieldIndex=new e3(c));const h=Fmt(a,e!=null?e.spatialReference:null,c,u).then(d=>{const m={scale:0};return(y,g)=>{if(d==null)return null;const b=d.repurposeFeature({geometry:null,attributes:y});return m.scale=g!=null?g.scale??void 0:void 0,d.evaluate({$feature:b,$view:m},d.services)}}).catch(d=>(Pe.getLogger(MY).error("Creating dictionary expression failed:",d),null));return this._dictionaryPromise=h,h}async _cimPartsToCIMSymbol(e,t,r,n,i){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=this._getSymbolPart(t[l],i);let o=await Promise.all(s);const a=this.fieldMap;if(a){o=se(o);for(const l of o)bG.applyDictionaryTextOverrides(l,e,a,this._fieldIndex,R9(l))}return new Md({data:$vt(o,r,n)})}async _getSymbolPart(e,t){const r=this._symbolCache.get(e);if(r)return r;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(s=>s.data);const n=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),i=Xe(n,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,i),i.finally(()=>this._ongoingRequests.delete(e));try{const s=await i;return this._symbolCache.put(e,s.data),s.data}catch(s){throw s}}};function $vt(e,t,r){if(!e||e.length===0)return null;const n={...e[0]};if(e.length>1){n.effects=null,n.symbolLayers=[];for(const i of e){const s=i;if(s.effects!=null)for(const o of s.symbolLayers)o.effects==null?o.effects=s.effects:o.effects.unshift(...s.effects);n.symbolLayers.unshift(...s.symbolLayers)}}return r&&(n.callout=zvt),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}}var O9;let Tu=O9=class extends Ym(Bh){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new spe(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,n){n?.origin||super.writeVisualVariables(e,t,r,n)}clone(){return new O9({config:se(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:se(this.fieldMap),url:se(this.url),visualVariables:se(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await ko(e,t,this.scaleExpression);for(const r in this.fieldMap){const n=this.fieldMap[r];t.has(n)&&e.add(n)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};p([f({type:spe})],Tu.prototype,"_loader",null),p([f({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Tu.prototype,"config",void 0),p([f({type:Object,json:{write:!0}})],Tu.prototype,"fieldMap",void 0),p([f({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Tu.prototype,"scaleExpression",void 0),p([Re("scaleExpression")],Tu.prototype,"writeData",null),p([f({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Tu.prototype,"scaleExpressionTitle",void 0),p([f({type:String,json:{write:!0}})],Tu.prototype,"url",void 0),p([Re("visualVariables")],Tu.prototype,"writeVisualVariables",null),Tu=O9=p([W("esri.renderers.DictionaryRenderer")],Tu);const qvt=Tu;var N9;let sp=N9=class extends we{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Pe.getLogger(this).error(".field: field must be a string value"),null):LT(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new N9({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};p([f({type:Ze,json:{type:[Number],write:!0}})],sp.prototype,"color",void 0),p([f({type:String,json:{write:!0}})],sp.prototype,"field",void 0),p([ur("field")],sp.prototype,"castField",null),p([f({type:String,json:{write:!0}})],sp.prototype,"label",void 0),p([f({type:String,json:{write:!0}})],sp.prototype,"valueExpression",void 0),p([f({type:String,json:{write:!0}})],sp.prototype,"valueExpressionTitle",void 0),sp=N9=p([W("esri.renderers.support.AttributeColorInfo")],sp);const ope=sp;var L9;let GM=L9=class extends we{constructor(){super(...arguments),this.unit=null}clone(){return new L9({unit:this.unit})}};p([f({type:String,json:{write:!0}})],GM.prototype,"unit",void 0),GM=L9=p([W("esri.renderers.support.DotDensityLegendOptions")],GM);const Hvt=GM;var P9;let ha=P9=class extends Ym(Bh){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Ze([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new No,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new yc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new P9({attributes:se(this.attributes),backgroundColor:se(this.backgroundColor),dotBlendingEnabled:se(this.dotBlendingEnabled),dotShape:se(this.dotShape),dotSize:se(this.dotSize),dotValue:se(this.dotValue),legendOptions:se(this.legendOptions),outline:se(this.outline),referenceScale:se(this.referenceScale),seed:se(this.seed),visualVariables:se(this.visualVariables),authoringInfo:se(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await ko(e,t,r.valueExpression),r.field&&e.add(r.field)}};p([f({type:[ope],json:{write:!0}})],ha.prototype,"attributes",void 0),p([f({type:Ze,json:{write:!0}})],ha.prototype,"backgroundColor",void 0),p([f({type:Boolean,json:{write:!0}})],ha.prototype,"dotBlendingEnabled",void 0),p([f({type:String,json:{write:!1}})],ha.prototype,"dotShape",void 0),p([f({type:Number,json:{write:!0}})],ha.prototype,"dotSize",void 0),p([f({type:Hvt,json:{write:!0}})],ha.prototype,"legendOptions",void 0),p([f({type:No,json:{default:null,write:!0}})],ha.prototype,"outline",void 0),p([f({type:Number,json:{write:!0}})],ha.prototype,"dotValue",void 0),p([f({type:Number,json:{write:!0}})],ha.prototype,"referenceScale",void 0),p([f({type:Number,json:{write:!0}})],ha.prototype,"seed",void 0),p([tt({dotDensity:"dot-density"})],ha.prototype,"type",void 0),ha=P9=p([W("esri.renderers.DotDensityRenderer")],ha);const Wvt=ha;var D9;let Sx=D9=class extends we{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new D9({color:this.color&&this.color.clone(),ratio:this.ratio})}};p([f({type:Ze,json:{type:[Ft],default:null,write:!0}})],Sx.prototype,"color",void 0),p([f({type:Number,json:{write:!0}})],Sx.prototype,"ratio",void 0),Sx=D9=p([W("esri.renderers.support.HeatmapColorStop")],Sx);const SS=Sx;let ov=class extends rr(we){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};p([f({type:String,json:{write:!0}})],ov.prototype,"minLabel",void 0),p([f({type:String,json:{write:!0}})],ov.prototype,"maxLabel",void 0),p([f({type:String,json:{write:!0}})],ov.prototype,"title",void 0),ov=p([W("esri.renderers.support.HeatmapLegendOptions")],ov);const wG=2.4;function Zvt(e){return pl(e*wG)}function Jvt(e){return lce(e)/wG}function Yvt(e,t,r,n){let{color:i,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=hl((n-s)/(a-s),0,1);fG(e,i.toArray(),o.toArray(),l)}function Xvt(e){const t=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:o})=>o>=0&&o<=1).sort((o,a)=>o.ratio-a.ratio).map(({color:o,ratio:a})=>({color:o,ratio:Math.max(a,.001)})),e.length<1)return t;let r=e[0],n=e[0],i=1;const s=r3();for(let o=0;o<512;o++){const a=(o+.5)/512;for(;a>n.ratio&&i<e.length;)r=n,n=e[i++];Yvt(s,r,n,a),t.set(s,4*o)}return t}function Qvt(e,t,r){const n=Math.sqrt(e**2+t**2)/r;return n>1?0:3/(Math.PI*r**2)*(1-n**2)**2}function Kvt(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var F9;function CY(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:n}=e;if(t!=null||r!=null||n!=null){const{blurRadius:i,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let cs=F9=class extends Bh{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new SS({ratio:0,color:new Ze("rgba(255, 140, 0, 0)")}),new SS({ratio:.75,color:new Ze("rgba(255, 140, 0, 1)")}),new SS({ratio:.9,color:new Ze("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return CY(e)}get blurRadius(){return Jvt(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",Zvt(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(wG**2*this.blurRadius**4)}read(e,t){e=CY(e),super.read(e,t)}getSymbol(){return new ra}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,n=this.valueExpression;r&&typeof r=="string"&&Mo(e,t,r),n&&typeof n=="string"&&await ko(e,t,n)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new F9({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:se(this.colorStops),field:this.field,legendOptions:se(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};p([f({type:XT,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],cs.prototype,"authoringInfo",void 0),p([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cs.prototype,"blurRadius",null),p([f({type:[SS],json:{write:!0}})],cs.prototype,"colorStops",void 0),p([f({type:String,json:{write:!0}})],cs.prototype,"field",void 0),p([f({type:ov,json:{write:!0}})],cs.prototype,"legendOptions",void 0),p([f({type:Number,json:{write:!0}})],cs.prototype,"maxDensity",void 0),p([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cs.prototype,"maxPixelIntensity",null),p([f({type:Number,json:{write:!0}})],cs.prototype,"minDensity",void 0),p([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],cs.prototype,"minPixelIntensity",null),p([f({type:Number,cast:lr,json:{write:!0}})],cs.prototype,"radius",void 0),p([f({type:Number,range:{min:0},json:{default:0,write:!0}})],cs.prototype,"referenceScale",void 0),p([tt({heatmap:"heatmap"})],cs.prototype,"type",void 0),p([f({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],cs.prototype,"valueExpression",void 0),p([f({type:String})],cs.prototype,"valueExpressionTitle",void 0),p([f({readOnly:!0})],cs.prototype,"_pixelIntensityToDensity",null),cs=F9=p([W("esri.renderers.HeatmapRenderer")],cs);const ape=cs;let Ly=class extends rr(we){constructor(){super(...arguments),this.color=new Ze([0,0,0,0]),this.label=null,this.threshold=0}};p([f({type:Ze,json:{write:!0}})],Ly.prototype,"color",void 0),p([f({type:String,json:{write:!0}})],Ly.prototype,"label",void 0),p([f({type:Number,range:{min:0,max:1},json:{write:!0}})],Ly.prototype,"threshold",void 0),Ly=p([W("esri.renderers.support.OthersCategory")],Ly);const ebt={base:S_,key:"type",typeMap:{size:Jm,opacity:tG}};let pa=class extends Ym(rr(Bh)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Ze([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Ly,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new ra({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(Qo)}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await ko(e,t,r.valueExpression),r.field&&e.add(r.field)}};p([f({type:[ope],json:{write:!0}})],pa.prototype,"attributes",void 0),p([f(uG)],pa.prototype,"backgroundFillSymbol",void 0),p([f({type:Ze,json:{write:!0}})],pa.prototype,"defaultColor",void 0),p([f({type:String,json:{write:!0}})],pa.prototype,"defaultLabel",void 0),p([f({type:Number,range:{min:0,max:1},json:{write:!0}})],pa.prototype,"holePercentage",void 0),p([f({type:Ly,json:{write:!0}})],pa.prototype,"othersCategory",void 0),p([f({type:QT,json:{write:!0}})],pa.prototype,"legendOptions",void 0),p([f({type:No,json:{default:null,write:!0}})],pa.prototype,"outline",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],pa.prototype,"size",void 0),p([tt({pieChart:"pie-chart"})],pa.prototype,"type",void 0),p([f({types:[ebt]})],pa.prototype,"visualVariables",void 0),pa=p([W("esri.renderers.PieChartRenderer")],pa);const tbt=pa;var j9;let iy=j9=class extends Ym(Bh){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new j9({description:this.description,label:this.label,symbol:se(this.symbol),visualVariables:se(this.visualVariables),authoringInfo:se(this.authoringInfo)})}};p([f({type:String,json:{write:!0}})],iy.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],iy.prototype,"label",void 0),p([f(lG)],iy.prototype,"symbol",void 0),p([tt({simple:"simple"})],iy.prototype,"type",void 0),iy=j9=p([W("esri.renderers.SimpleRenderer")],iy);const Xm=iy,rbt=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function U9(e){return e instanceof mt}function kY(e){return e instanceof st?Object.keys(e.items):U9(e)?Qi(e).keys():e?Object.keys(e):[]}function MI(e,t){return e instanceof st?e.items[t]:e[t]}function nbt(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function ES(e){return e?e.declaredClass:null}function lpe(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const n=kY(e),i=kY(t);if(n.length===0&&i.length===0)return;if(!n.length||!i.length||nbt(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter(h=>!n.includes(h)),o=n.filter(h=>!i.includes(h)),a=n.filter(h=>i.includes(h)&&MI(e,h)!==MI(t,h)).concat(s,o).sort(),l=ES(e);if(l&&rbt.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const c=U9(e)&&U9(t);for(const h of a){const d=MI(e,h),m=MI(t,h);let y;if((c||typeof d!="function"&&typeof m!="function")&&d!==m&&(d!=null||m!=null)){if(r&&r[h]&&typeof r[h]=="function")y=r[h]?.(d,m);else if(d instanceof Date&&m instanceof Date){if(d.getTime()===m.getTime())continue;y={type:"complete",oldValue:d,newValue:m}}else y=typeof d=="object"&&typeof m=="object"&&ES(d)===ES(m)?lpe(d,m):{type:"complete",oldValue:d,newValue:m};y!=null&&(u!=null?u.diff[h]=y:u={type:"partial",diff:{[h]:y}})}}return u}function ibt(e,t){return upe(e,t)}function upe(e,t){if(e==null)return!1;const r=t.split(".");let n=e;for(const i of r){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const s=n.diff[i];if(!s)return!1;n=s}}return!0}function sbt(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function cpe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&ES(e)!==ES(t)?{type:"complete",oldValue:e,newValue:t}:lpe(e,t)}let av=class extends rr(we){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};p([f(jM)],av.prototype,"value",void 0),p([f(jM)],av.prototype,"value2",void 0),p([f(jM)],av.prototype,"value3",void 0),av=p([W("esri.renderers.support.UniqueValue")],av);const kb=av;let bf=class extends rr(we){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return t==="string"||t==="number"?e.map(r=>new kb({value:r})):t==="object"?e[0]instanceof kb?e:e.map(r=>new kb(r)):null}};p([f({type:String,json:{write:!0}})],bf.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],bf.prototype,"label",void 0),p([f(UR)],bf.prototype,"symbol",void 0),p([f({type:[kb],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new kb({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const n of e){const i=[n.value,n.value2,n.value3].filter(Qo).map(s=>s.toString());r.push(i)}t.values=r}}}})],bf.prototype,"values",void 0),p([ur("values")],bf.prototype,"castValues",null),bf=p([W("esri.renderers.support.UniqueValueClass")],bf);const hpe=bf;let Ex=class extends rr(we){constructor(e){super(e),this.heading=null,this.classes=null}};p([f({type:String,json:{write:!0}})],Ex.prototype,"heading",void 0),p([f({type:[hpe],json:{write:!0}})],Ex.prototype,"classes",void 0),Ex=p([W("esri.renderers.support.UniqueValueGroup")],Ex);const B9=Ex;var V9;let sy=V9=class extends we{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new V9({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};p([f({type:String,json:{write:!0}})],sy.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],sy.prototype,"label",void 0),p([f(lG)],sy.prototype,"symbol",void 0),p([f(jM)],sy.prototype,"value",void 0),sy=V9=p([W("esri.renderers.support.UniqueValueInfo")],sy);const og=sy,RY=new Map;async function obt(e,t){try{return{data:(await dpe(e,t)).data,baseUrl:Uoe(e),styleUrl:e}}catch(r){return qo(r),null}}function abt(e,t,r){const n=t.portal!=null?t.portal:ta.getDefault();let i;const s=`${n.url} - ${n.user?.username} - ${e}`,o=RY.get(s);if(o)return o;const a=lbt(e,n,r).then(l=>(i=l,l.fetchData())).then(l=>({data:l,baseUrl:i.itemUrl??"",styleName:e}));return RY.set(s,a),a}function lbt(e,t,r){return t.load(r).then(()=>{const n=new Hu({disableExtraQuery:!0,query:`owner:${OY} AND type:${NY} AND typekeywords:"${e}"`});return t.queryItems(n,r)}).then(({results:n})=>{let i=null;const s=e.toLowerCase();if(n&&Array.isArray(n)){for(const o of n)if(o.typeKeywords?.some(a=>a.toLowerCase()===s)&&o.type===NY&&o.owner===OY){i=o;break}}if(!i)throw new ie("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)})}function ppe(e,t,r){return e?.styleUrl!=null?obt(e.styleUrl,r):e?.styleName!=null?abt(e.styleName,t,r):Promise.reject(new ie("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function ubt(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function cbt(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!xe("enable-feature:force-wosr"))for(const n of r){const i=e.formatInfos.find(s=>s.type===n);if(i)return i.href}return encodeURI(e.webRef)}function dpe(e,t){const r={responseType:"json",query:{f:"json"},...t};return Xe(ll(e),r)}const OY="esri_en",NY="Style",hbt="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Tx;const fpe="esri.renderers.UniqueValueRenderer",Yd=()=>Pe.getLogger(fpe),LY="uvInfos-watcher",PY="uvGroups-watcher",pbt=",",dbt=Nr(og);function fbt(e){const{field1:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!r);return[{classes:(s??[]).map(l=>{const{symbol:u,label:c,value:h,description:d}=l,[m,y,g]=a?h?.toString()?.split(i||"")||[]:[h],b=[];return(t||o)&&b.push(m),r&&b.push(y),n&&b.push(g),{symbol:u,label:c,values:[b],description:d}})}]}function D1(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let _n=Tx=class extends Ym(Bh){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let n=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?cpe(o,r[s])?(i.changed.push({type:"complete",oldValue:o,newValue:r[s]}),n=!0):i.unchanged.push({oldValue:o,newValue:r[s]}):(i.added.push(r[s]),n=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(i.removed.push(t[s]),n=!0);return n?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:LT(e)}writeField(e,t,r,n){typeof e=="string"?t[r]=e:n?.messages?n.messages.push(new ie("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Yd().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||ta.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const n=r1(t.styleUrl,r);return Object.freeze({styleUrl:n})}}writeStyleOrigin(e,t,r,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=p_(e.styleUrl,n))}set uniqueValueGroups(e){this.styleOrigin?Yd().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Yd().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Yd().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?dbt(e):new og({value:e,symbol:ehe(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[D1(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Yd().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const n=t[r];if(String(n.value)===String(e)){delete this._valueInfoMap[D1(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await km()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){return this.valueExpression&&t?.arcade==null?void Yd().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(e,t)?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&r?.arcade==null){const n=await km(),{arcadeUtils:i}=n;i.hasGeometryOperations(this.valueExpression)&&await i.enableGeometryOperations(),r={...r,arcade:n}}return this._getUniqueValueInfo(e,r)?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce((n,i)=>n+i.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Tx({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:se(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:se(this.visualVariables),legendOptions:se(this.legendOptions),authoringInfo:se(this.authoringInfo),backgroundFillSymbol:se(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=se(this.uniqueValueInfos),r=se(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(se(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(n=>n.collectRequiredFields(e,t)),ko(e,t,this.valueExpression)];Mo(e,t,this.field),Mo(e,t,this.field2),Mo(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return ppe(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const n=new h1({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const i=new og({value:r.name,symbol:n});t.push(i),this._valueInfoMap[D1(r.name)]=i}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",pbt)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[D1(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(LY);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(Et(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(n,i)=>{n!==i&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,LY)}}_watchUniqueValueGroups(){this.removeHandles(PY);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(Et(()=>({classes:r.classes}),(n,i)=>{n!==i&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const n of r.classes??[])t.push(Et(()=>({symbol:n.symbol,values:n.values,label:n.label,description:n.description}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,PY)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const l of s)for(const u of l.classes??[]){const{symbol:c,label:h,values:d,description:m}=u;for(const y of d??[]){const{value:g,value2:b,value3:S}=y,E=[g];r&&E.push(b),n&&E.push(S);const x=a?E.join(i||""):E[0]??void 0;e.push(new og({symbol:c,label:h,value:x,description:m}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:n,fieldDelimiter:i,uniqueValueInfos:s}=this;if(!t&&!n||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=s.map(u=>{const{symbol:c,label:h,value:d,description:m}=u,[y,g,b]=o?d?.toString()?.split(i||"")||[]:[d];return new hpe({symbol:c,label:h,description:m,values:[new kb({value:y,value2:g,value3:b})]})}),l=[new B9({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const c=l.createSyntaxTree(this.valueExpression);a=l.createFunction(c),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:n,spatialReference:i}),o));return this._valueInfoMap[D1(u)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let n;if(this.field2){const i=this.field2,s=this.field3,o=[];t&&o.push(r[t]),i&&o.push(r[i]),s&&o.push(r[s]),n=o.join(this.fieldDelimiter||"")}else t&&(n=r[t]);return this._valueInfoMap[D1(n)]}static fromPortalStyle(e,t){const r=new Tx(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||ta.getDefault());const n=r.populateFromStyle();return n.catch(i=>{Yd().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),n}static fromStyleUrl(e,t){const r=new Tx(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const n=r.populateFromStyle();return n.catch(i=>{Yd().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),n}};p([f({readOnly:!0})],_n.prototype,"_cache",null),p([tt({uniqueValue:"unique-value"})],_n.prototype,"type",void 0),p([f(uG)],_n.prototype,"backgroundFillSymbol",void 0),p([f({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],_n.prototype,"field",null),p([ur("field")],_n.prototype,"castField",null),p([Re("field")],_n.prototype,"writeField",null),p([f({type:String,value:null,json:{write:!0}})],_n.prototype,"field2",null),p([f({type:String,value:null,json:{write:!0}})],_n.prototype,"field3",null),p([f({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],_n.prototype,"orderByClassesEnabled",void 0),p([f({type:String,value:null,json:{write:!0}})],_n.prototype,"valueExpression",null),p([f({type:String,json:{write:!0}})],_n.prototype,"valueExpressionTitle",void 0),p([f({type:QT,json:{write:!0}})],_n.prototype,"legendOptions",void 0),p([f({type:String,json:{write:!0}})],_n.prototype,"defaultLabel",void 0),p([f(AB({...UR},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],_n.prototype,"defaultSymbol",null),p([f({type:String,value:null,json:{write:!0}})],_n.prototype,"fieldDelimiter",null),p([f({type:ta,readOnly:!0})],_n.prototype,"portal",void 0),p([Ee("portal",["styleName"])],_n.prototype,"readPortal",null),p([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],_n.prototype,"styleOrigin",void 0),p([Ee("styleOrigin",["styleName","styleUrl"])],_n.prototype,"readStyleOrigin",null),p([Re("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],_n.prototype,"writeStyleOrigin",null),p([f({type:[B9],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||fbt(t)).map(n=>B9.fromJSON(n,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],_n.prototype,"uniqueValueGroups",null),p([f({type:[og],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],_n.prototype,"uniqueValueInfos",null),_n=Tx=p([W(fpe)],_n);const f1=_n,T_={key:"type",base:Bh,typeMap:{heatmap:ape,simple:Xm,"unique-value":f1,"class-breaks":p1,"dot-density":Wvt,dictionary:qvt,"pie-chart":tbt},errorContext:"renderer"},_G={key:"type",base:Bh,typeMap:{simple:Xm,"unique-value":f1,"class-breaks":p1,heatmap:ape},errorContext:"renderer",validate:mbt};function mbt(e){switch(e.type){case"simple":return ybt(e);case"unique-value":return gbt(e);case"class-breaks":return vbt(e);case"heatmap":return e}}function ybt(e){if(e.symbol)return e;Pe.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function gbt(e){const t=e.uniqueValueInfos,r=t?.filter(({symbol:n,label:i},s)=>(n||Pe.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${s}] ${i}) without a symbol from web scene.`),!!n));return r?.length!==t?.length&&(e.uniqueValueInfos=r),e}function vbt(e){const t=e.classBreakInfos,r=t?.filter(({symbol:n,label:i},s)=>(n||Pe.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${s}] ${i}) without a symbol from web scene.`),!!n));return r?.length!==t?.length&&(e.classBreakInfos=r),e}function jg(e,t){return mw(e,null,t)}const bbt=t1({types:T_});function mw(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r?.messages&&r.messages.push(new ea("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):bbt(e,t,r):null}let wbt=class mpe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(CD),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new mpe,n=this._originStores[et.DEFAULTS];n&&n.forEach((i,s)=>{r.set(s,se(i),et.DEFAULTS)});for(let i=et.SERVICE;i<CD;i++){const s=this._originStores[i];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,se(o),i)})}return r}get(t,r){const n=r===void 0?this._values:this._originStores[r];return n?n.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,n=et.USER){let i=this._originStores[n];if(i||(i=new Map,this._originStores[n]=i),i.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=n){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,n),s!==r}return!1}delete(t,r=et.USER){const n=this._originStores[r];if(!n)return;const i=n.get(t);if(n.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return i}has(t,r){const n=r===void 0?this._values:this._originStores[r];return!!n&&n.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const n=this._originStores[r],i=n?.get(t),s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),s!==i}originOf(t){return this._propertyOriginMap.get(t)||et.DEFAULTS}forEach(t){this._values.forEach(t)}};const ype=e=>{let t=class extends e{constructor(...r){super(...r);const n=Qi(this),i=n.store,s=new wbt;n.store=s,Soe(n,i,s)}read(r,n){Toe(this,r,n)}getAtOrigin(r,n){const i=EL(this),s=_o(n);if(typeof r=="string")return i.get(r,s);const o={};return r.forEach(a=>{o[a]=i.get(a,s)}),o}originOf(r){return tw(this.originIdOf(r))}originIdOf(r){return EL(this).originOf(r)}revert(r,n){const i=EL(this),s=_o(n),o=Qi(this);let a;a=typeof r=="string"?r==="*"?i.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),i.revert(l,s),o.commit(l)})}};return t=p([W("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function EL(e){return Qi(e).store}let DY=class extends ype(mt){};DY=p([W("esri.core.ReadOnlyMultiOriginJSONSupport")],DY);const _bt=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,n="user"){return TL(this).delete(r,_o(n))}write(r,n){return Moe(this,r=r||{},n),r}setAtOrigin(r,n,i){Qi(this).setAtOrigin(r,n,_o(i))}removeOrigin(r){const n=TL(this),i=_o(r),s=n.keys(i);for(const o of s)n.originOf(o)===i&&n.set(o,n.get(o,i),et.USER)}updateOrigin(r,n){const i=TL(this),s=_o(n),o=Gl(this,r);for(let a=s+1;a<CD;++a)i.delete(r,a);i.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=p([W("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function TL(e){return Qi(e).store}const kd=e=>{let t=class extends _bt(ype(e)){constructor(...r){super(...r)}};return t=p([W("esri.core.MultiOriginJSONSupport")],t),t};let J5=class extends kd(mt){};J5=p([W("esri.core.MultiOriginJSONSupport")],J5);const bs=(e=>e)(["operational-layers","basemap","ground"]);var G9;let oy=G9=class extends we{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new G9({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};p([f({type:String,json:{write:!0}})],oy.prototype,"expression",void 0),p([f({type:String,json:{write:!0}})],oy.prototype,"name",void 0),p([f({type:["boolean","date","number","string"],json:{write:!0}})],oy.prototype,"returnType",void 0),p([f({type:String,json:{write:!0}})],oy.prototype,"title",void 0),oy=G9=p([W("esri.form.ExpressionInfo")],oy);const xbt=oy;let ay=class extends we{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};p([f({type:String,json:{write:!0}})],ay.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],ay.prototype,"label",void 0),p([f()],ay.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],ay.prototype,"visibilityExpression",void 0),ay=p([W("esri.form.elements.Element")],ay);const Ug=ay;let zM=class extends rr(we){constructor(e){super(e),this.type=null}};p([f()],zM.prototype,"type",void 0),zM=p([W("esri.form.elements.inputs.attachments.Input")],zM);const Nm=zM,$R=["any","capture","upload"];let lv=class extends Nm{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};p([f({type:["audio"],readOnly:!0,json:{write:!0}})],lv.prototype,"type",void 0),p([f({type:$R,json:{write:!0}})],lv.prototype,"inputMethod",void 0),p([f({type:Number,json:{write:!0}})],lv.prototype,"maxDuration",void 0),lv=p([W("esri.form.elements.inputs.attachments.AudioInput")],lv);const FY=lv;let Ix=class extends Nm{constructor(e){super(e),this.type="document",this.maxFileSize=null}};p([f({type:["document"],readOnly:!0,json:{write:!0}})],Ix.prototype,"type",void 0),p([f({type:Number,json:{write:!0}})],Ix.prototype,"maxFileSize",void 0),Ix=p([W("esri.form.elements.inputs.attachments.DocumentInput")],Ix);const jY=Ix;let uv=class extends Nm{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};p([f({type:["image"],readOnly:!0,json:{write:!0}})],uv.prototype,"type",void 0),p([f({type:$R,json:{write:!0}})],uv.prototype,"inputMethod",void 0),p([f({type:Number,json:{write:!0}})],uv.prototype,"maxImageSize",void 0),uv=p([W("esri.form.elements.inputs.attachments.ImageInput")],uv);const UY=uv;let Ax=class extends Nm{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};p([f({type:["signature"],readOnly:!0,json:{write:!0}})],Ax.prototype,"type",void 0),p([f({type:$R,json:{write:!0}})],Ax.prototype,"inputMethod",void 0),Ax=p([W("esri.form.elements.inputs.attachments.SignatureInput")],Ax);const BY=Ax;let cv=class extends Nm{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};p([f({type:["video"],readOnly:!0,json:{write:!0}})],cv.prototype,"type",void 0),p([f({type:$R,json:{write:!0}})],cv.prototype,"inputMethod",void 0),p([f({type:Number,json:{write:!0}})],cv.prototype,"maxDuration",void 0),cv=p([W("esri.form.elements.inputs.attachments.VideoInput")],cv);const VY=cv;function gpe(e){return{nestableTypes:{base:Nm,key:"type",typeMap:{audio:FY,document:jY,image:UY,signature:BY,video:VY}},allTypes:{base:Nm,key:"type",typeMap:{attachment:e,audio:FY,document:jY,image:UY,signature:BY,video:VY}}}}function Sbt(e,t,r){return e?e.map(n=>eu(t.nestableTypes,n)):null}function Ebt(e,t,r){if(!e)return null;const n=t.nestableTypes.typeMap;return e.filter(i=>n[i.type]).map(i=>n[i.type].fromJSON(i))}function Tbt(e,t,r){if(!e)return null;const n=t.nestableTypes.typeMap;return e.filter(i=>n[i.type]).map(i=>i.toJSON())}let Zc=class extends Nm{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return Sbt(e,IL)}readInputs(e,t){return Ebt(t.inputTypes,IL)}writeInputs(e,t){t.inputTypes=Tbt(e,IL)}};p([f({type:["attachment"],readOnly:!0,json:{write:!0}})],Zc.prototype,"type",void 0),p([f({type:["any","exact","exactOrNone"],json:{write:!0}})],Zc.prototype,"attachmentAssociationType",void 0),p([f({json:{write:{isRequired:!0}}})],Zc.prototype,"inputTypes",void 0),p([ur("inputTypes")],Zc.prototype,"castInputs",null),p([Ee("inputTypes")],Zc.prototype,"readInputs",null),p([Re("inputTypes")],Zc.prototype,"writeInputs",null),Zc=p([W("esri.form.elements.inputs.attachments.AttachmentInput")],Zc);const IL=gpe(Zc),Ibt=Zc;var z9;const Abt=gpe(Ibt);let Za=z9=class extends Ug{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new z9({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};p([f({type:Boolean,json:{write:!0}})],Za.prototype,"allowUserRename",void 0),p([f({type:String,json:{write:{isRequired:!0}}})],Za.prototype,"attachmentKeyword",void 0),p([f({type:Boolean,json:{write:!0}})],Za.prototype,"displayFilename",void 0),p([f({type:String,json:{write:!0}})],Za.prototype,"editableExpression",void 0),p([f({type:String,json:{write:!0}})],Za.prototype,"filenameExpression",void 0),p([f({types:Abt.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Za.prototype,"input",void 0),p([f({type:Number,json:{write:!0}})],Za.prototype,"maxAttachmentCount",void 0),p([f({type:Number,json:{write:!0}})],Za.prototype,"minAttachmentCount",void 0),p([f({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Za.prototype,"type",void 0),p([f({type:Boolean,json:{write:!0}})],Za.prototype,"useOriginalFilename",void 0),Za=z9=p([W("esri.form.elements.AttachmentElement")],Za);const GY=Za;let $M=class extends we{constructor(e){super(e),this.type=null}};p([f()],$M.prototype,"type",void 0),$M=p([W("esri.form.elements.inputs.Input")],$M);const Rd=$M;let Mx=class extends Rd{constructor(e){super(e),this.maxLength=null,this.minLength=0}};p([f({type:Number,json:{write:!0}})],Mx.prototype,"maxLength",void 0),p([f({type:Number,json:{write:!0}})],Mx.prototype,"minLength",void 0),Mx=p([W("esri.form.elements.inputs.TextInput")],Mx);const xG=Mx;var $9;let qM=$9=class extends xG{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new $9({maxLength:this.maxLength,minLength:this.minLength})}};p([f({type:["barcode-scanner"],json:{read:!1,write:!0}})],qM.prototype,"type",void 0),qM=$9=p([W("esri.form.elements.inputs.BarcodeScannerInput")],qM);const Mbt=qM;var q9;let hv=q9=class extends Rd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new q9({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};p([f({type:String,json:{write:!0}})],hv.prototype,"noValueOptionLabel",void 0),p([f({type:Boolean,json:{write:!0}})],hv.prototype,"showNoValueOption",void 0),p([f({type:["combo-box"],json:{read:!1,write:!0}})],hv.prototype,"type",void 0),hv=q9=p([W("esri.form.elements.inputs.ComboBoxInput")],hv);const Cbt=hv;var H9;function zY(e){return e??null}function $Y(e){return e??null}let Fc=H9=class extends Rd{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return zY(t.max)}writeMax(e,t){t.max=$Y(e)}readMin(e,t){return zY(t.min)}writeMin(e,t){t.min=$Y(e)}clone(){return new H9({max:this.max,min:this.min})}};p([f({type:String,json:{type:String,write:!0}})],Fc.prototype,"max",void 0),p([Ee("max")],Fc.prototype,"readMax",null),p([Re("max")],Fc.prototype,"writeMax",null),p([f({type:String,json:{type:String,write:!0}})],Fc.prototype,"min",void 0),p([Ee("min")],Fc.prototype,"readMin",null),p([Re("min")],Fc.prototype,"writeMin",null),p([f({type:["date-picker"],json:{read:!1,write:!0}})],Fc.prototype,"type",void 0),Fc=H9=p([W("esri.form.elements.inputs.DatePickerInput")],Fc);const kbt=Fc;var W9;function AL(e){return e??null}function ML(e){return e??null}let da=W9=class extends Rd{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return AL(t.max)}writeMax(e,t){t.max=ML(e)}readMin(e,t){return AL(t.min)}writeMin(e,t){t.min=ML(e)}readTimeResolution(e,t){return AL(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=ML(e)}clone(){return new W9({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};p([f({type:Boolean,json:{write:!0}})],da.prototype,"includeTimeOffset",void 0),p([f({type:String,json:{type:String,write:!0}})],da.prototype,"max",void 0),p([Ee("max")],da.prototype,"readMax",null),p([Re("max")],da.prototype,"writeMax",null),p([f({type:String,json:{type:String,write:!0}})],da.prototype,"min",void 0),p([Ee("min")],da.prototype,"readMin",null),p([Re("min")],da.prototype,"writeMin",null),p([f({type:String,json:{type:String,write:!0}})],da.prototype,"timeResolution",void 0),p([Ee("timeResolution")],da.prototype,"readTimeResolution",null),p([Re("timeResolution")],da.prototype,"writeTimeResolution",null),p([f({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],da.prototype,"type",void 0),da=W9=p([W("esri.form.elements.inputs.DateTimeOffsetPickerInput")],da);const Rbt=da;var Z9;function qY(e){return e!=null?new Date(e):null}function HY(e){return e?e.getTime():null}let Iu=Z9=class extends Rd{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return qY(t.max)}writeMax(e,t){t.max=HY(e)}readMin(e,t){return qY(t.min)}writeMin(e,t){t.min=HY(e)}clone(){return new Z9({includeTime:this.includeTime,max:this.max,min:this.min})}};p([f({type:Boolean,json:{write:!0}})],Iu.prototype,"includeTime",void 0),p([f({type:Date,json:{type:Number,write:!0}})],Iu.prototype,"max",void 0),p([Ee("max")],Iu.prototype,"readMax",null),p([Re("max")],Iu.prototype,"writeMax",null),p([f({type:Date,json:{type:Number,write:!0}})],Iu.prototype,"min",void 0),p([Ee("min")],Iu.prototype,"readMin",null),p([Re("min")],Iu.prototype,"writeMin",null),p([f({type:["datetime-picker"],json:{read:!1,write:!0}})],Iu.prototype,"type",void 0),Iu=Z9=p([W("esri.form.elements.inputs.DateTimePickerInput")],Iu);const Obt=Iu;var J9;let pv=J9=class extends Rd{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new J9({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};p([f({type:String,json:{write:!0}})],pv.prototype,"noValueOptionLabel",void 0),p([f({type:Boolean,json:{write:!0}})],pv.prototype,"showNoValueOption",void 0),p([f({type:["radio-buttons"],json:{read:!1,write:!0}})],pv.prototype,"type",void 0),pv=J9=p([W("esri.form.elements.inputs.RadioButtonsInput")],pv);const Nbt=pv;var Y9;let dv=Y9=class extends Rd{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new Y9({offValue:this.offValue,onValue:this.onValue})}};p([f({type:[String,Number],json:{write:!0}})],dv.prototype,"offValue",void 0),p([f({type:[String,Number],json:{write:!0}})],dv.prototype,"onValue",void 0),p([f({type:["switch"],json:{read:!1,write:!0}})],dv.prototype,"type",void 0),dv=Y9=p([W("esri.form.elements.inputs.SwitchInput")],dv);const Lbt=dv;var X9;let HM=X9=class extends xG{constructor(e){super(e),this.type="text-area"}clone(){return new X9({maxLength:this.maxLength,minLength:this.minLength})}};p([f({type:["text-area"],json:{read:!1,write:!0}})],HM.prototype,"type",void 0),HM=X9=p([W("esri.form.elements.inputs.TextAreaInput")],HM);const Pbt=HM;var Q9;let WM=Q9=class extends xG{constructor(e){super(e),this.type="text-box"}clone(){return new Q9({maxLength:this.maxLength,minLength:this.minLength})}};p([f({type:["text-box"],json:{read:!1,write:!0}})],WM.prototype,"type",void 0),WM=Q9=p([W("esri.form.elements.inputs.TextBoxInput")],WM);const Dbt=WM;var K9;function CL(e){return e??null}function kL(e){return e??null}let Ja=K9=class extends Rd{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return CL(t.max)}writeMax(e,t){t.max=kL(e)}readMin(e,t){return CL(t.min)}writeMin(e,t){t.min=kL(e)}readTimeResolution(e,t){return CL(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=kL(e)}clone(){return new K9({max:this.max,min:this.min,timeResolution:this.timeResolution})}};p([f({type:String,json:{type:String,write:!0}})],Ja.prototype,"max",void 0),p([Ee("max")],Ja.prototype,"readMax",null),p([Re("max")],Ja.prototype,"writeMax",null),p([f({type:String,json:{type:String,write:!0}})],Ja.prototype,"min",void 0),p([Ee("min")],Ja.prototype,"readMin",null),p([Re("min")],Ja.prototype,"writeMin",null),p([f({type:String,json:{type:String,write:!0}})],Ja.prototype,"timeResolution",void 0),p([Ee("timeResolution")],Ja.prototype,"readTimeResolution",null),p([Re("timeResolution")],Ja.prototype,"writeTimeResolution",null),p([f({type:["time-picker"],json:{read:!1,write:!0}})],Ja.prototype,"type",void 0),Ja=K9=p([W("esri.form.elements.inputs.TimePickerInput")],Ja);const Fbt=Ja,jbt={base:Rd,key:"type",typeMap:{"barcode-scanner":Mbt,"combo-box":Cbt,"date-picker":kbt,"datetime-picker":Obt,"datetimeoffset-picker":Rbt,"radio-buttons":Nbt,switch:Lbt,"text-area":Pbt,"text-box":Dbt,"time-picker":Fbt}};var eF;let Hy=eF=class extends we{constructor(e){super(e),this.name=null,this.code=null}clone(){return new eF({name:this.name,code:this.code})}};p([f({type:String,json:{write:!0}})],Hy.prototype,"name",void 0),p([f({type:[String,Number],json:{write:!0}})],Hy.prototype,"code",void 0),Hy=eF=p([W("esri.layers.support.CodedValue")],Hy);const Ubt=new Pt({inherited:"inherited",codedValue:"coded-value",range:"range"});let Cx=class extends we{constructor(e){super(e),this.name=null,this.type=null}};p([f({type:String,json:{write:!0}})],Cx.prototype,"name",void 0),p([tt(Ubt)],Cx.prototype,"type",void 0),Cx=p([W("esri.layers.support.Domain")],Cx);const qR=Cx;var tF;let kx=tF=class extends qR{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(n=>(String(n.code)===r&&(t=n.name),!!t))}return t}clone(){return new tF({codedValues:se(this.codedValues),name:this.name})}};p([f({type:[Hy],json:{write:!0}})],kx.prototype,"codedValues",void 0),p([tt({codedValue:"coded-value"})],kx.prototype,"type",void 0),kx=tF=p([W("esri.layers.support.CodedValueDomain")],kx);const HR=kx;var rF;let ZM=rF=class extends qR{constructor(e){super(e),this.type="inherited"}clone(){return new rF}};p([tt({inherited:"inherited"})],ZM.prototype,"type",void 0),ZM=rF=p([W("esri.layers.support.InheritedDomain")],ZM);const vpe=ZM;var nF;let fv=nF=class extends qR{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new nF({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};p([f({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],fv.prototype,"maxValue",void 0),p([f({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],fv.prototype,"minValue",void 0),p([tt({range:"range"})],fv.prototype,"type",void 0),fv=nF=p([W("esri.layers.support.RangeDomain")],fv);const bpe=fv,wpe={key:"type",base:qR,typeMap:{range:bpe,"coded-value":HR,inherited:vpe}};function WR(e){if(!e?.type)return null;switch(e.type){case"range":return bpe.fromJSON(e);case"codedValue":return HR.fromJSON(e);case"inherited":return vpe.fromJSON(e)}return null}var iF;let Il=iF=class extends Ug{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new iF({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};p([f({types:wpe,json:{read:{reader:WR},write:!0}})],Il.prototype,"domain",void 0),p([f({type:Boolean,json:{write:!0}})],Il.prototype,"editable",void 0),p([f({type:String,json:{write:!0}})],Il.prototype,"editableExpression",void 0),p([f({type:String,json:{write:!0}})],Il.prototype,"fieldName",void 0),p([f({type:String,json:{write:!0}})],Il.prototype,"hint",void 0),p([f({types:jbt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Il.prototype,"input",void 0),p([f({type:String,json:{write:!0}})],Il.prototype,"requiredExpression",void 0),p([f({type:String,json:{read:!1,write:!0}})],Il.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],Il.prototype,"valueExpression",void 0),Il=iF=p([W("esri.form.elements.FieldElement")],Il);const WY=Il;var sF;let op=sF=class extends Ug{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new sF({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:se(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};p([f({type:Number,json:{write:!0}})],op.prototype,"displayCount",void 0),p([f({type:["list"],json:{write:!0}})],op.prototype,"displayType",void 0),p([f({type:String,json:{write:!0}})],op.prototype,"editableExpression",void 0),p([f({type:[DV],json:{write:!0}})],op.prototype,"orderByFields",void 0),p([f({type:Number,json:{write:!0}})],op.prototype,"relationshipId",void 0),p([f({type:["relationship"],json:{read:!1,write:!0}})],op.prototype,"type",void 0),op=sF=p([W("esri.form.elements.RelationshipElement")],op);const ZY=op;var oF;let mv=oF=class extends Ug{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new oF({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};p([f({type:String,json:{write:!0}})],mv.prototype,"text",void 0),p([f({type:String,json:{write:!0}})],mv.prototype,"textFormat",void 0),p([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],mv.prototype,"type",void 0),mv=oF=p([W("esri.form.elements.TextElement")],mv);const JY=mv;function _pe(e){return{typesWithGroup:{base:Ug,key:"type",typeMap:{attachment:GY,field:WY,group:e,relationship:ZY,text:JY}},typesWithoutGroup:{base:Ug,key:"type",typeMap:{attachment:GY,field:WY,relationship:ZY,text:JY}}}}function xpe(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>n[i.type]).map(i=>n[i.type].fromJSON(i))}function Spe(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>n[i.type]).map(i=>i.toJSON())}function Epe(e,t,r=!0){return e?e.map(n=>eu(r?t.typesWithGroup:t.typesWithoutGroup,n)):null}var aF;let Jc=aF=class extends Ug{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return Epe(e,RL,!1)}readElements(e,t){return xpe(t.formElements,RL,!1)}writeElements(e,t){t.formElements=Spe(e,RL,!1)}clone(){return new aF({description:this.description,elements:se(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};p([f({json:{write:!0}})],Jc.prototype,"elements",void 0),p([ur("elements")],Jc.prototype,"castElements",null),p([Ee("elements",["formElements"])],Jc.prototype,"readElements",null),p([Re("elements")],Jc.prototype,"writeElements",null),p([f({type:["collapsed","expanded"],json:{write:!0}})],Jc.prototype,"initialState",void 0),p([f({type:String,json:{read:!1,write:!0}})],Jc.prototype,"type",void 0),Jc=aF=p([W("esri.form.elements.GroupElement")],Jc);const RL=_pe(Jc),Bbt=Jc,Vbt=e=>e.type==="field",Gbt=e=>e.type==="group",zbt=e=>e.type==="text";var lF;const OL=_pe(Bbt);let Au=lF=class extends we{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return Epe(e,OL)}readElements(e,t){return xpe(t.formElements,OL)}writeElements(e,t){t.formElements=Spe(e,OL)}clone(){return new lF({description:this.description,expressionInfos:se(this.expressionInfos),elements:se(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:n,elements:i,expressionInfos:s,title:o}=this;if(TS(r,e,n),TS(r,e,o),!i)return[];const a=$bt(i,s).map(l=>ko(r,e,l));await Promise.all(a);for(const l of i)Tpe(r,{fieldsIndex:e,relationships:t},l);return Array.from(r).sort()}};function Tpe(e,t,r){const{fieldsIndex:n}=t;if(!n||n.fields.length!==e.size)switch(TS(e,n,r.label),TS(e,n,r.description),r.type){case"field":Mo(e,n,r.fieldName);break;case"group":r.elements.forEach(i=>Tpe(e,t,i));break;case"relationship":if(t.relationships){const i=t.relationships.find(s=>s.id===r.relationshipId);i&&Mo(e,n,i.keyField)}Rm(e,n,r.orderByFields?.map(i=>i.field));break;case"text":TS(e,n,r.text)}}function $bt(e,t){if(!t||t.length===0)return[];const r=Ipe(e),n=[];for(const i of t)r.has(i.name)&&n.push(i.expression);return n}function Ipe(e){const t=new Set;for(const r of e)if(QW(t,r.visibilityExpression),!zbt(r)){if(Gbt(r))pE(t,Ipe(r.elements));else if(QW(t,r.editableExpression),Vbt(r)){const{requiredExpression:n,valueExpression:i}=r;pE(t,[n,i])}}return t}function TS(e,t,r){Rm(e,t,Zue(r))}p([f({type:String,json:{write:!0}})],Au.prototype,"description",void 0),p([f({json:{write:!0}})],Au.prototype,"elements",void 0),p([ur("elements")],Au.prototype,"castElements",null),p([Ee("elements",["formElements"])],Au.prototype,"readElements",null),p([Re("elements")],Au.prototype,"writeElements",null),p([f({type:[xbt],json:{write:!0}})],Au.prototype,"expressionInfos",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],Au.prototype,"preserveFieldValuesWhenHidden",void 0),p([f({type:String,json:{write:!0}})],Au.prototype,"title",void 0),Au=lF=p([W("esri.form.FormTemplate")],Au);const Ape=Au;async function qbt(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await Me(async()=>{const{fromItem:n}=await import("./portalLayers-CM-2NZvt-BvDviaTl.js");return{fromItem:n}},__vite__mapDeps([9,10,11,1,2]),import.meta.url).then(n=>n.p);try{return await r(t)}catch(n){const i=t?.portalItem,s=i?.id||"unset",o=i?.portal?.url||pr.portalUrl;throw Pe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",n),n}}const uF={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function JM(e,t,r,n=fc){const i=new Ga(kV(n)),s=Ut.fromJSDate(e,{zone:i}),o=r==="decades"||r==="centuries"?"year":Cpe(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function Hbt(e,t,r="milliseconds"){const n=e.getTime(),i=Mpe(t,r,"milliseconds");return new Date(n+i)}function YY(e,t,r=fc){const n=new Ga(kV(r)),i=Ut.fromJSDate(e,{zone:n});if(t==="decades"||t==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=Cpe(t);return i.startOf(s).toJSDate()}function Mpe(e,t,r){return e===0?0:e*uF[t]/uF[r]}function Cpe(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Al;let rl=Al=class extends we{static get allTime(){return XY}static get empty(){return Wbt}static fromArray(e){return new Al({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(Al.allTime)}get isEmpty(){return this.equals(Al.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new Al({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,n=e.start?.getTime()??e.start,i=e.end?.getTime()??e.end;return t===n&&r===i}expandTo(e,t=fc){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=YY(r,e,t));let n=this.end;if(n){const i=YY(n,e,t);n=n.getTime()===i.getTime()?i:JM(i,1,e,t)}return new Al({start:r,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Al.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,n=e.start?.getTime()??-1/0,i=e.end?.getTime()??1/0;let s,o;return n>=t&&n<=r?s=n:t>=n&&t<=i&&(s=t),r>=n&&r<=i?o=r:i>=t&&i<=r&&(o=i),s==null||o==null||isNaN(s)||isNaN(o)?Al.empty:new Al({start:s===-1/0?null:new Date(s),end:o===1/0?null:new Date(o)})}offset(e,t,r=fc){if(this.isEmpty||this.isAllTime)return this.clone();const n=new Al,{start:i,end:s}=this;return i!=null&&(n.start=JM(i,e,t,r)),s!=null&&(n.end=JM(s,e,t,r)),n}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return XY.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Al({start:t,end:r})}};p([f({type:Date,json:{write:{allowNull:!0}}})],rl.prototype,"end",void 0),p([Ee("end")],rl.prototype,"readEnd",null),p([Re("end")],rl.prototype,"writeEnd",null),p([f({readOnly:!0,json:{read:!1}})],rl.prototype,"isAllTime",null),p([f({readOnly:!0,json:{read:!1}})],rl.prototype,"isEmpty",null),p([f({type:Date,json:{write:{allowNull:!0}}})],rl.prototype,"start",void 0),p([Ee("start")],rl.prototype,"readStart",null),p([Re("start")],rl.prototype,"writeStart",null),rl=Al=p([W("esri.time.TimeExtent")],rl);const Ro=rl,XY=new rl,Wbt=new rl({start:void 0,end:void 0});let Zbt=0,Kn=class extends jh.EventedMixin(b_(pc)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new jt(-180,-90,180,90,Ke.WGS84),this.id=Date.now().toString(16)+"-layer-"+Zbt++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ke.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await Me(async()=>{const{fromUrl:r}=await import("./arcgisLayers-QbqpTmsN-D2TW13iu.js");return{fromUrl:r}},__vite__mapDeps([23,1,2,10,11]),import.meta.url)).fromUrl(t)}static fromPortalItem(e){return qbt(e)}initialize(){this.when().catch(e=>{Fi(e)||Pe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return Zn(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Xe(e,{query:{f:"json"},responseType:"json"})).data;throw new ie("layer:no-attribution-data","Layer does not have attribution data")}};p([f({type:String})],Kn.prototype,"attributionDataUrl",void 0),p([f({readOnly:!0})],Kn.prototype,"effectiveVisible",null),p([f({type:jt})],Kn.prototype,"fullExtent",void 0),p([f({readOnly:!0})],Kn.prototype,"hasAttributionData",null),p([f({type:String,clonable:!1})],Kn.prototype,"id",void 0),p([f({type:Boolean,nonNullable:!0})],Kn.prototype,"legendEnabled",void 0),p([f({type:["show","hide","hide-children"]})],Kn.prototype,"listMode",void 0),p([f({type:Number,range:{min:0,max:1},nonNullable:!0})],Kn.prototype,"opacity",void 0),p([f({clonable:!1})],Kn.prototype,"parent",void 0),p([f({readOnly:!0})],Kn.prototype,"parsedUrl",null),p([f({type:Boolean,readOnly:!0})],Kn.prototype,"persistenceEnabled",void 0),p([f({type:Boolean})],Kn.prototype,"popupEnabled",void 0),p([f({type:Boolean})],Kn.prototype,"attributionVisible",void 0),p([f({type:Ke})],Kn.prototype,"spatialReference",void 0),p([f({type:String})],Kn.prototype,"title",void 0),p([f({readOnly:!0,json:{read:!1}})],Kn.prototype,"type",void 0),p([f()],Kn.prototype,"url",void 0),p([f({type:Ro})],Kn.prototype,"visibilityTimeExtent",void 0),p([f({type:Boolean,nonNullable:!0})],Kn.prototype,"visible",void 0),Kn=p([W("esri.layers.Layer")],Kn);const Od=Kn;let Y5=class{constructor(e=t=>t.values().next().value){this._peeker=e,this._observable=new l_,this._items=new Set}get length(){return It(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return It(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){It(this._observable),yield*this._items}};const kpe=new FinalizationRegistry(e=>{e.close()});function Jbt(e,t){kpe.register(e,t,t)}function Ybt(e){kpe.unregister(e)}function Rpe(e,t){return new Proxy({},{get:(r,n,i)=>(...s)=>{let o,a;const l=s[s.length-1];return Xbt(l)&&(o=l.signal,a=l.transferList,s.pop()),e.apply(t?`${t}.${n.toString()}`:n.toString(),s,{transferList:a,signal:o})}})}function Xbt(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const Qbt={statsWorker:()=>Me(()=>import("./statsWorker-CVqNZGtA-BZRvG25M.js"),__vite__mapDeps([24,25,26,27,1,2]),import.meta.url),geometryEngineWorker:()=>Me(()=>import("./geometryEngineWorker-ChH1og6m-BDBohSYU.js"),__vite__mapDeps([28,21,22,1,2]),import.meta.url),CSVSourceWorker:()=>Me(()=>import("./CSVSourceWorker-B3hIddO8-Bac32haq.js"),__vite__mapDeps([29,30,31,32,33,34,1,2,35,36,12,13,37,25,26,27,18,38,39]),import.meta.url),EdgeProcessingWorker:()=>Me(()=>import("./EdgeProcessingWorker-CCyU7nQH-BNX99n5O.js"),__vite__mapDeps([40,41,42,43,44,45,46,47,48,49,50,1,2]),import.meta.url),ElevationSamplerWorker:()=>Me(()=>import("./ElevationSamplerWorker-CV3bb9WV-DKgI--tG.js"),__vite__mapDeps([51,33,52,53,54,55,56,57,58,59,60,42,61,1,2]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>Me(()=>import("./FeatureServiceSnappingSourceWorker-BYYDVeWH-DJ1-Dr1a.js"),__vite__mapDeps([62,31,32,33,34,1,2,35,36,12,13,37,25,26,27]),import.meta.url),GeoJSONSourceWorker:()=>Me(()=>import("./GeoJSONSourceWorker-CHI6EPL7-CBcFzdkx.js"),__vite__mapDeps([63,31,32,33,34,1,2,35,36,12,13,37,25,26,27,64,30,38,39,65]),import.meta.url),LercWorker:()=>Me(()=>import("./LercWorker-BkmvW0JQ-K4PZ8VZ_.js"),__vite__mapDeps([66,1,2]),import.meta.url),MemorySourceWorker:()=>Me(()=>import("./MemorySourceWorker-CT6it2x9-BMpBoYX2.js"),__vite__mapDeps([67,68,31,32,33,34,1,2,35,36,12,13,37,25,26,27,38,39,65,30]),import.meta.url),PBFDecoderWorker:()=>Me(()=>import("./PBFDecoderWorker-DsvW97vv-DCIy1m6t.js"),__vite__mapDeps([69,1,2]),import.meta.url),FeaturePipelineWorker:()=>Me(()=>import("./FeaturePipelineWorker-B6npgGNK-Cw7RCSIT.js"),__vite__mapDeps([70,71,72,73,74,50,13,75,76,77,78,79,44,34,1,2,80,81,82,83,84,85,35,36,12,37,25,26,27,86,64,30,38,39,65,87,88]),import.meta.url),PointCloudWorker:()=>Me(()=>import("./PointCloudWorker-Dk-j6i2u-BL1wGldP.js"),__vite__mapDeps([89,90,54,91,92,93,94,48,95,55,56,57,96,1,2]),import.meta.url),RasterWorker:()=>Me(()=>import("./RasterWorker-ZkCMSWCk-BKOqbzT0.js"),__vite__mapDeps([97,98,1,2,99]),import.meta.url),SceneLayerSnappingSourceWorker:()=>Me(()=>import("./SceneLayerSnappingSourceWorker-D6NZRe0M-BD7U9ub4.js"),__vite__mapDeps([100,101,102,54,96,55,91,103,44,45,46,47,41,42,43,48,49,50,1,2]),import.meta.url),SceneLayerWorker:()=>Me(()=>import("./SceneLayerWorker-BUmujHQy-CKKwoRKs.js"),__vite__mapDeps([104,1,2,52,60,102,54,96,55,91,105,106,58,94,48,107,108,109,79,95,90,56,57]),import.meta.url),WFSSourceWorker:()=>Me(()=>import("./WFSSourceWorker-B-kunUXT-OGEAc3Mm.js"),__vite__mapDeps([110,31,32,33,34,1,2,35,36,12,13,37,25,26,27,64,30,65,111,112]),import.meta.url),WorkerTileHandler:()=>Me(()=>import("./WorkerTileHandler-DT-WHOow-IU1BEtOB.js"),__vite__mapDeps([113,114,77,78,115,116,82,1,2,117,118,50,83,76]),import.meta.url),Lyr3DWorker:()=>Me(()=>import("./Lyr3DWorker-CneISuaM-BHiupoo6.js"),__vite__mapDeps([119,1,2]),import.meta.url),Feature3DPipelineWorker:()=>Me(()=>import("./HUDMaterial.glsl-DIvhvazX-BAKe4Gwh.js"),__vite__mapDeps([120,36,1,2,12,13,34,37,25,26,27,33,47,121,122,123,44,41,42,43,108,109,48,79,124,102,54,96,55,91,101,125,95,90,56,57,126,49,50,127,103,128,74,129,107,106,58,52,92,130]),import.meta.url).then(e=>e.F)},Ope="worker:port-closed";var gs;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(gs||(gs={}));let Kbt=0;function Npe(){return Kbt++}function ewt(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function CE(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function SG(e,t,r,n){if(t.type===gs.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==gs.INVOKE&&t.type!==gs.RESPONSE)return void e.postMessage(t);let i;if(ewt(r)?(i=QY(r.transferList),t.data=r.result):(i=QY(n),t.data=r),i){if(xe("ff")){for(const s of i)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case gs.INVOKE:throw o;case gs.RESPONSE:return void SG(e,{type:gs.RESPONSE,jobId:t.jobId,error:CE(o)})}}}e.postMessage(t,i)}else e.postMessage(t)}function kE(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function QY(e){if(!e?.length)return null;if(xe("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!twt(r));return t.length?t:null}function twt(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"}async function rwt(e){try{return await e}catch(t){const r=t?.name===Ope;if(!(Fi(t)||r))throw t;return}}const{CLOSE:KY,ABORT:eX,INVOKE:tX,RESPONSE:e2,OPEN_PORT:rX,ON:nwt}=gs,iwt=2;let swt=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===gs.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},vd=class yv{static connect(t,r){const n=new MessageChannel;let i;i=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const s=new yv(n.port1,{channel:n,client:i,schedule:r});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),yv.clients.set(s,i),n.port2}static loadWorker(t){const r=Qbt[t];return r?r():Promise.resolve(null)}constructor(t,r,n){this._port=t,this._jobQueue=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new swt(i=>this._onInvokeMessage(i)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:KY}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,n){return this.apply(t,[r],n)}apply(t,r,n){const i=n?.signal,s=n?.transferList;if(!this._port)return Promise.reject(new ie(Ope,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=Npe();return new Promise((a,l)=>{if(Ba(i))return this._processWork(),void l(Xr());const u=Oa(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),mn(h.abortHandle),this._post({type:eX,jobId:o}),l(Xr()))}),c={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,c),this._post({type:tX,jobId:o,methodName:t,abortable:i!=null},r,s)})}createInvokeProxy(t){return Rpe(this,t)}on(t,r){const n=new MessageChannel;function i(s){r(s.data)}return this._port.postMessage({type:gs.ON,eventType:t,port:n.port2},[n.port2]),n.port1.addEventListener("message",i),n.port1.start(),gr(()=>{n.port1.postMessage({type:gs.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:rX,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=iwt)return;const t=this._jobQueue?.pop();if(!t)return;const{methodName:r,data:n,invokeOptions:i,resolver:s}=t;this.apply(r,n,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{mn(t.abortHandle),t.reject(Xr(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const n=kE(t);if(n)switch(n.type){case e2:this._onResponseMessage(n);break;case tX:r?this._onInvokeMessage(n):this._invokeQueue.push(n);break;case eX:this._onAbortMessage(n);break;case KY:this._onCloseMessage();break;case rX:this._onOpenPortMessage(n);break;case nwt:this._onOnMessage(n)}}_onAbortMessage(t){const r=this._inJobs,n=t.jobId,i=r.get(n);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),r.delete(n))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&yv.clients.get(this)===t&&t.destroy(),yv.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:n,data:i=[],abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,c=u[r];try{if(!c&&r&&r.includes(".")){const h=r.split(".");for(let d=0;d<h.length-1;d++)u=u[h[d]],c=u[h[d+1]]}if(typeof c!="function")throw new TypeError(`${r} is not a function`);i.push({client:this,signal:o?o.signal:null}),l=c.apply(u,i)}catch(h){return void this._post({type:e2,jobId:n,error:CE(h)})}bc(l)?(a.set(n,{controller:o,promise:l}),l.then(h=>{a.has(n)&&(a.delete(n),this._post({type:e2,jobId:n},h))},h=>{a.has(n)&&(a.delete(n),Fi(h)||this._post({type:e2,jobId:n,error:CE(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:e2,jobId:n},l)}_onOpenPortMessage(t){new yv(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,n=this._client.on(t.eventType,s=>{r.postMessage(s)}),i=r_(t.port,"message",s=>{kE(s)?.type===gs.CLOSE&&(i.remove(),n.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:n,data:i}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);s.delete(r),this._processWork(),mn(o.abortHandle),n?o.reject(ie.fromJSON(JSON.parse(n))):o.resolve(i)}_post(t,r,n){return SG(this._port,t,r,n)}};vd.kernelInfo={buildDate:zoe,fullVersion:ZB,revision:$oe},vd.clients=new Map;let Lpe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Y5}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise((r,n)=>{let i=!0;const s=o=>{Gr(t.signal),i&&(i=!1,o())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const a=e[o];bc(a)?this._clientPromises[o]=a.then(l=>(this._clients[o]=new vd(l,t,this._ongoingJobsQueue),s(r),this._clients[o]),()=>(s(n),null)):(this._clients[o]=new vd(a,t,this._ongoingJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),s(r))}})}broadcast(e,t,r){const n=new Array(this._clientPromises.length);for(let i=0;i<this._clientPromises.length;++i){const s=this._clientPromises[i];n[i]=s.then(o=>o?.invoke(e,t,r))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Xr(`Worker closing, aborting job calling '${e.methodName}'`));for(const t of this._clientPromises)t.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Ybt(this)}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,t,r){const n=Ko();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:r,resolver:n});for(let i=0;i<this._clientPromises.length;i++){const s=this._clients[i];s?s.jobAdded():this._clientPromises[i].then(o=>o?.jobAdded())}return n.promise}createInvokeProxy(e){return Rpe(this,e)}on(e,t){return Promise.all(this._clientPromises).then(()=>e_(this._clients.map(r=>r.on(e,t))))}openPorts(){return new Promise(e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(i=>{i&&(t[n]=i.openPort()),--r==0&&e(t)})})}get test(){}};const owt={async request(e,t){const r=e.options,n=r.responseType;r.signal=t?.signal,r.responseType=n==="native"||n==="native-request-init"?"native-request-init":n&&["blob","json","text"].includes(n)&&HD(e.url)?.after?n:"array-buffer";const i=await Xe(e.url,r),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},nX={};function awt(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...nX.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=nX.baseUrl),t}let lwt=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(t=>{this[t]=(...r)=>e[t](...r)})}},YM=class{constructor(){this._dispatcher=new lwt,this._workerPostMessage({type:gs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){hE(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){hE(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const t=kE(e);if(t&&t.type===gs.OPEN){const{modulePath:r,jobId:n}=t;let i=await vd.loadWorker(r);i||(i=await import(r));const s=vd.connect(i);this._workerPostMessage({type:gs.OPENED,jobId:n,data:s})}}};const cF=()=>Pe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:uwt}=gs,cwt='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let CI,kI;const iX="Failed to create Worker. Fallback to execute module in main thread";async function hwt(){if(!xe("esri-workers"))return sX(new YM);if(!CI&&!kI)try{const t=cwt.split("{CONFIGURATION}").join(pwt());CI=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){kI=t||{}}let e;if(CI)try{e=new Worker(CI,{name:"esri-worker-"+dwt++})}catch{cF().warn(iX,kI),e=new YM}else cF().warn(iX,kI),e=new YM;return sX(e)}async function sX(e){return new Promise(t=>{function r(i){const s=kE(i);s&&s.type===uwt&&(e.removeEventListener("message",r),e.removeEventListener("error",n),t(e))}function n(i){i.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",n),cF().warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new YM).addEventListener("message",r),e.addEventListener("error",n)}e.addEventListener("message",r),e.addEventListener("error",n)})}function pwt(){let e;if(pr.default!=null){const n={...pr};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(pr));e.assetsPath=Aa(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Aa(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Xo(),e.has={"esri-csp-restrictions":xe("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":xe("esri-2d-update-debug"),"esri-2d-log-updating":xe("esri-2d-log-updating"),"featurelayer-pbf":xe("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":xe("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":xe("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":xe("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":xe("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":xe("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":xe("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":xe("featurelayer-snapshot-enabled"),"esri-atomics":xe("esri-atomics"),"esri-shared-array-buffer":xe("esri-shared-array-buffer"),"esri-tiles-debug":xe("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":xe("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":xe("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Aa(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Aa(e.workers.workerPath):e.workers.workerPath=Aa(br("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=pr.workers.loaderConfig,r=awt({baseUrl:t?.baseUrl,locale:Xo(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:zoe,fullVersion:ZB,revision:$oe}})}let dwt=0;const{ABORT:oX,INVOKE:fwt,OPEN:mwt,OPENED:ywt,RESPONSE:t2}=gs;let gwt=class Ppe{static async create(t){const r=await hwt();return new Ppe(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",n=>{n.preventDefault(),Pe.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:n}=r,i=Npe();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:Hk(n,()=>{this._outJobs.delete(i),this._post({type:oX,jobId:i})})};this._outJobs.set(i,a),this._post({type:mwt,jobId:i,modulePath:t})})}_onMessage(t){const r=kE(t);if(r)switch(r.type){case ywt:this._onOpenedMessage(r);break;case t2:this._onResponseMessage(r);break;case oX:this._onAbortMessage(r);break;case fwt:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,n=t.jobId,i=r.get(n);i&&(i.controller&&i.controller.abort(),r.delete(n))}_onInvokeMessage(t){const{methodName:r,jobId:n,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=owt[r];let u;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);u=l.call(null,i,{signal:o?o.signal:null})}catch(c){return void this._post({type:t2,jobId:n,error:CE(c)})}bc(u)?(a.set(n,{controller:o,promise:u}),u.then(c=>{a.has(n)&&(a.delete(n),this._post({type:t2,jobId:n},c))},c=>{a.has(n)&&(a.delete(n),c||(c={message:"Error encountered at method"+r}),Fi(c)||this._post({type:t2,jobId:n,error:CE(c||{message:`Error encountered at method ${r}`})}))})):this._post({type:t2,jobId:n},u)}_onOpenedMessage(t){const{jobId:r,data:n}=t,i=this._outJobs.get(r);i&&(this._outJobs.delete(r),mn(i.abortHandle),i.resolve(n))}_onResponseMessage(t){const{jobId:r,error:n,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),mn(s.abortHandle),n?s.reject(ie.fromJSON(JSON.parse(n))):s.resolve(i))}_post(t,r,n){return SG(this.worker,t,r,n)}};const aX=xe("host-browser")?Math.min(navigator.hardwareConcurrency-1,xe("workers-pool-size")??8):0;let Wy=xe("esri-mobile")?Math.min(aX,3):aX;Wy||(Wy=xe("safari")&&xe("mac")?7:2);let lX=0;const XM=[];function vwt(){Dpe()}async function RI(e,t){const r=new Lpe,{registryTarget:n,...i}=t;return await r.open(e,i),n&&Jbt(n,r),r}async function EG(e,t={}){if(typeof e!="string")throw new ie("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(xe("host-webworker")&&!xe("esri-workers")&&(r="local"),r==="local"){let n=await vd.loadWorker(e);n||(n=await import(e)),Gr(t.signal);const i=t.client||n;return RI([vd.connect(n,t.schedule)],{...t,client:i})}if(await Dpe(),Gr(t.signal),r==="dedicated"){const n=lX++%Wy;return RI([await XM[n].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const n=Math.min(t.maxNumWorkers,Wy);if(n<Wy){const i=new Array(n);for(let s=0;s<n;++s){const o=lX++%Wy;i[s]=XM[o].open(e,t)}return RI(i,t)}}return RI(XM.map(n=>n.open(e,t)),t)}let OI=null;async function Dpe(){if(OI)return OI;new AbortController;const e=[];for(let t=0;t<Wy;t++){const r=gwt.create(t).then(n=>(XM[t]=n,n));e.push(r)}return OI=Promise.all(e),OI}function uX(e,t,r){if(e.hasM==null||e.hasZ)for(const n of t)for(const i of n)i.length>2&&(i[2]*=r)}function Fpe(e,t,r){if(!e&&!t||!r)return;const n=Rg(r);cX(e,r,n),cX(t,r,n)}function cX(e,t,r){if(e)for(const n of e)bwt(n.geometry,t,r)}function bwt(e,t,r){if(!e?.spatialReference||gn(e.spatialReference,t))return;const n=Rg(e.spatialReference)/r;if(n!==1){if("x"in e)e.z!=null&&(e.z*=n);else if("rings"in e)uX(e,e.rings,n);else if("paths"in e)uX(e,e.paths,n);else if("points"in e&&(e.hasM==null||e.hasZ))for(const i of e.points)i.length>2&&(i[2]*=n)}}function ZR(e,t,r){if(t==null||r==null||r.vcsWkid||gn(t,r)||Am(t)||Am(r))return null;const n=Rg(t)/Rg(r);if(n===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>wwt(i,n);case"polyline":case"esriGeometryPolyline":return i=>xwt(i,n);case"polygon":case"esriGeometryPolygon":return i=>_wt(i,n);case"multipoint":case"esriGeometryMultipoint":return i=>Swt(i,n);case"extent":case"esriGeometryEnvelope":return i=>Ewt(i,n);default:return null}}function wwt(e,t){e?.z!=null&&(e.z*=t)}function _wt(e,t){if(e)for(const r of e.rings)for(const n of r)n.length>2&&(n[2]*=t)}function xwt(e,t){if(e)for(const r of e.paths)for(const n of r)n.length>2&&(n[2]*=t)}function Swt(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function Ewt(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function X5(e,t,r){if(!r?.features||!r.hasZ)return;const n=ZR(r.geometryType,t,e.outSpatialReference);if(n!=null)for(const i of r.features)n(i.geometry)}const jpe=new Pt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var hF;const Twt=new Pt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let eo=hF=class extends we{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?Twt.fromJSON(r.fieldValueType):null}clone(){return new hF({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};p([f({type:String,json:{write:!0}})],eo.prototype,"alias",void 0),p([f({type:[String,Number],json:{write:{allowNull:!0}}})],eo.prototype,"defaultValue",void 0),p([f()],eo.prototype,"description",void 0),p([Ee("description")],eo.prototype,"readDescription",null),p([f({types:wpe,json:{read:{reader:WR},write:!0}})],eo.prototype,"domain",void 0),p([f({type:Boolean,json:{write:!0}})],eo.prototype,"editable",void 0),p([f({type:Ft,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],eo.prototype,"length",void 0),p([f({type:String,json:{write:!0}})],eo.prototype,"name",void 0),p([f({type:Boolean,json:{write:!0}})],eo.prototype,"nullable",void 0),p([tt(jpe)],eo.prototype,"type",void 0),p([f()],eo.prototype,"valueType",void 0),p([Ee("valueType",["description"])],eo.prototype,"readValueType",null),p([f({type:Boolean,json:{read:!1}})],eo.prototype,"visible",void 0),eo=hF=p([W("esri.layers.support.Field")],eo);const xa=eo;var pF;const dF=new Pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let hs=pF=class extends we{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=Ke.fromJSON(t.spatialReference),n=[];for(let i=0;i<e.length;i++){const s=e[i],o=dl.fromJSON(s),a=s.geometry?.spatialReference;o.geometry==null||a||(o.geometry.spatialReference=r);const l=s.aggregateGeometries,u=o.aggregateGeometries;if(l&&u!=null)for(const c in u){const h=u[c],d=l[c],m=d?.spatialReference;h==null||m||(h.spatialReference=r)}n.push(o)}return n}writeGeometryType(e,t,r,n){if(e)return void dF.write(e,t,r,n);const{features:i}=this;if(i){for(const s of i)if(s?.geometry!=null)return void dF.write(s.geometry.type,t,r,n)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=An(e);return n&&!r&&t.spatialReference&&(n.spatialReference=Ke.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const n of r)if(n&&n.geometry!=null&&n.geometry.spatialReference)return void(t.spatialReference=n.geometry.spatialReference.toJSON())}}clone(){return new pF(this.cloneProperties())}cloneProperties(){return se({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const i=e?.[r];n.geometry=i?.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,i]}=e,s=u=>Math.round((u-n)/t),o=u=>Math.round((i-u)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,c=a.length;u<c;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,c--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,i],scale:[s,o]}=r,a=d=>d*s+n,l=d=>i-d*o;let u=null,c=null;if(this.hasZ&&r?.scale?.[2]!=null){const{translate:[,,d],scale:[,,m]}=r;u=y=>y*m+d}if(this.hasM&&r?.scale?.[3]!=null){const{translate:[,,,d],scale:[,,,m]}=r;c=y=>y==null?y:y*m+d}const h=this._getHydrationFunction(e,a,l,u,c);for(const{geometry:d}of t)d!=null&&h&&h(d);return this.transform=null,this}_quantizePoints(e,t,r){let n,i;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),c=r(l[1]);u===n&&c===i||(s.push([u-n,c-i]),n=u,i=c)}else n=t(l[0]),i=r(l[1]),s.push([n,i])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?n=>(n.x=t(n.x),n.y=r(n.y),n):e==="polyline"||e==="polygon"?n=>{const i=gh(n)?n.rings:n.paths,s=[];for(let o=0,a=i.length;o<a;o++){const l=i[o],u=this._quantizePoints(l,t,r);u&&s.push(u)}return s.length>0?(gh(n)?n.rings=s:n.paths=s,n):null}:e==="multipoint"?n=>{const i=this._quantizePoints(n.points,t,r);return i&&i.length>0?(n.points=i,n):null}:e==="extent"?n=>n:null}_getHydrationFunction(e,t,r,n,i){return e==="point"?s=>{s.x=t(s.x),s.y=r(s.y),n&&(s.z=n(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=gh(s)?s.rings:s.paths;let a,l;for(let u=0,c=o.length;u<c;u++){const h=o[u];for(let d=0,m=h.length;d<m;d++){const y=h[d];d>0?(a+=y[0],l+=y[1]):(a=y[0],l=y[1]),y[0]=t(a),y[1]=r(l)}}if(n&&i)for(let u=0,c=o.length;u<c;u++){const h=o[u];for(let d=0,m=h.length;d<m;d++){const y=h[d];y[2]=n(y[2]),y[3]=i(y[3])}}else if(n)for(let u=0,c=o.length;u<c;u++){const h=o[u];for(let d=0,m=h.length;d<m;d++){const y=h[d];y[2]=n(y[2])}}else if(i)for(let u=0,c=o.length;u<c;u++){const h=o[u];for(let d=0,m=h.length;d<m;d++){const y=h[d];y[2]=i(y[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=r(s.ymin),s.xmax=t(s.xmax),s.ymax=r(s.ymax),n&&s.zmax!=null&&s.zmin!=null&&(s.zmax=n(s.zmax),s.zmin=n(s.zmin)),i&&s.mmax!=null&&s.mmin!=null&&(s.mmax=i(s.mmax),s.mmin=i(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,l;for(let u=0,c=o.length;u<c;u++){const h=o[u];u>0?(a+=h[0],l+=h[1]):(a=h[0],l=h[1]),h[0]=t(a),h[1]=r(l)}if(n&&i)for(let u=0,c=o.length;u<c;u++){const h=o[u];h[2]=n(h[2]),h[3]=i(h[3])}else if(n)for(let u=0,c=o.length;u<c;u++){const h=o[u];h[2]=n(h[2])}else if(i)for(let u=0,c=o.length;u<c;u++){const h=o[u];h[2]=i(h[2])}}:null}};p([f({type:String,json:{write:!0}})],hs.prototype,"displayFieldName",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hs.prototype,"exceededTransferLimit",void 0),p([f({type:[dl],json:{write:!0}})],hs.prototype,"features",void 0),p([Ee("features")],hs.prototype,"readFeatures",null),p([f({type:[xa],json:{write:!0}})],hs.prototype,"fields",void 0),p([f({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:dF.read}}})],hs.prototype,"geometryType",void 0),p([Re("geometryType")],hs.prototype,"writeGeometryType",null),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hs.prototype,"hasM",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hs.prototype,"hasZ",void 0),p([f({types:ji,json:{write:!0}})],hs.prototype,"queryGeometry",void 0),p([Ee("queryGeometry")],hs.prototype,"readQueryGeometry",null),p([f({type:Ke,json:{write:!0}})],hs.prototype,"spatialReference",void 0),p([Re("spatialReference")],hs.prototype,"writeSpatialReference",null),p([f({json:{write:!0}})],hs.prototype,"transform",void 0),hs=pF=p([W("esri.rest.support.FeatureSet")],hs),hs.prototype.toJSON.isDefaultToJSON=!0;const Qm=hs;let Iwt=0,Np=class extends pc.LoadableMixin(FT(st)){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);X5(e,this.layer.spatialReference,r);const n=Qm.fromJSON(r);if(!this._requiresClientGraphicMapping())return n;const i=this.layer.objectIdField;for(const s of n.features){const o=s.attributes[i],a=this._idToClientGraphic.get(o);a&&(s.geometry=a.geometry)}return n.geometryType=this.layer.geometryType,n}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new ie("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return X5(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:jt.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new ie("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const n=[],i=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=u=>"objectId"in u&&u.objectId!=null?u.objectId:"attributes"in u&&u.attributes[t]!=null?u.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const u of e.deleteFeatures){const c=s(u);c!=null&&n.push(c)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const u of e.updateFeatures)if(i.push(this._serializeFeature(u)),o){const c=s(u);c!=null&&o.set(c,u)}}Fpe(r?r.features:null,i,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:i,deletes:n});return this.fullExtent=a,r&&r.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if(this._layerOrSourceGeometryType!=="mesh"||e==null)return;const r=[];for(const{geometry:n}of e)n==null||n.type!=="mesh"||n.hasExtent||n.loaded||r.push(n.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const n=e.get(r.objectId);n!=null&&this._addIdToClientGraphic(n)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new ie("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let n=null;for(let s=0;s<e.length;s++){const o=e[s],a=this._serializeFeature(o);n||o.geometry==null||(n=o.geometry.type),r[s]=a,t.set(`${a.uid}`,o)}const i=this;return{features:r,inferredGeometryType:n,finish(s){const o=i.sourceJSON.objectIdField;for(const a in s){const l=s[a],u=t.get(a);u&&(u.attributes||(u.attributes={}),l===-1?delete u.attributes[o]:u.attributes[o]=l,i._addIdToClientGraphic(u))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes?.[t];r!=null&&this._idToClientGraphic.set(r,e)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),n=(Iwt++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:t}:{uid:n,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return t==null?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?ts.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await EG("MemorySourceWorker",{strategy:xe("feature-layers-workers")?"dedicated":"local",signal:e,registryTarget:this});const{fields:t,spatialReference:r,objectIdField:n,hasM:i,hasZ:s,timeInfo:o,dateFieldsTimeZone:a}=this.layer,l=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",m=>{Pe.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),m.preventDefault()}));const c={features:u.features,fields:t?.map(m=>m.toJSON()),geometryType:w6.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&i,hasZ:this._layerOrSourceGeometryType==="mesh"||s,objectIdField:n,spatialReference:l?null:r&&r.toJSON(),timeInfo:o?.toJSON()??null,dateFieldsTimeZone:a},h=await this._connection.invoke("load",c,{signal:e});for(const m of h.warnings)Pe.getLogger(this.layer).warn("#load()",`${m.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:m});h.featureErrors.length&&Pe.getLogger(this.layer).warn("#load()",`Encountered ${h.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:h.featureErrors});const d=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(d.geometryType=w6.toJSON(u.inferredGeometryType)),this.sourceJSON=d,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(h.assignedObjectIds)}};p([JB({Type:dl,ensureType:Nr(dl)})],Np.prototype,"itemType",void 0),p([f()],Np.prototype,"type",void 0),p([f({constructOnly:!0})],Np.prototype,"layer",void 0),p([f({readOnly:!0})],Np.prototype,"_workerGeometryType",null),p([f()],Np.prototype,"sourceJSON",void 0),Np=p([W("esri.layers.graphics.sources.MemorySource")],Np);function Awt(e){return"portalItem"in e}const JR=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):Awt(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return p([f({type:String})],t.prototype,"apiKey",null),t=p([W("esri.layers.mixins.APIKeyMixin")],t),t},Upe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Bpe=Object.values(Upe),Vpe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Bpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Mwt=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Bpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Cwt=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Gpe(e){return Vpe.test(e)}function Ah(e){if(e==null)return null;const t=Zn(e),r=t?.path.match(Vpe)||t?.path.match(Mwt);if(!r)return null;const[,n,i,s,o]=r,a=i.indexOf("/");return{title:YR(a!==-1?i.slice(a+1):i),serverType:Upe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:n}}}function zpe(e){const t=Zn(e).path.match(Cwt);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function YR(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function $pe(e,t){const r=[];if(e){const n=Ah(e);n!=null&&n.title&&r.push(n.title)}if(t){const n=YR(t);r.push(n)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function XR(e){let t=zl(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function qpe(e,t){return e&&WB(Voe(e,t))}function Hpe(e){let{url:t}=e;if(!t)return{url:t};t=Voe(t,e.logger);const r=Zn(t),n=Ah(r.path);let i;if(n!=null)n.sublayer!=null&&e.layer.layerId==null&&(i=n.sublayer),t=n.url.path;else if(e.nonStandardUrlAllowed){const s=zpe(r.path);s!=null&&(t=s.serviceUrl,i=s.sublayerId)}return{url:WB(t),layerId:i}}function Wpe(e,t,r,n,i){Mm(t,n,"url",i),n.url&&e.layerId!=null&&(n.url=Th(n.url,r,e.layerId.toString()))}function kwt(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),n=t.includes("/mapserver/wmsserver"),i=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(n||i||s)}const a3=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Ah(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",qpe(r,Pe.getLogger(this)))}};return p([f()],t.prototype,"title",null),p([f({type:String})],t.prototype,"url",null),t=p([W("esri.layers.mixins.ArcGISService")],t),t};function QR(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Rwt(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Owt(e,t,r,n,i,s,o,a,l,u,c,h,d,m,y,g){const b=new Float32Array(16);return b[0]=e,b[1]=t,b[2]=r,b[3]=n,b[4]=i,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=u,b[10]=c,b[11]=h,b[12]=d,b[13]=m,b[14]=y,b[15]=g,b}function Nwt(e,t){return new Float32Array(e,t,16)}const Lwt=QR();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Lwt,clone:Rwt,create:QR,createView:Nwt,fromValues:Owt},Symbol.toStringTag,{value:"Module"}));function TG(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Nd(e,t,r,n,i,s,o,a,l,u,c,h,d,m,y,g,b){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=h,e[11]=d,e[12]=m,e[13]=y,e[14]=g,e[15]=b,e}function l3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ld(e,t){if(e===t){const r=t[1],n=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Pwt(e,t){return IG(e,t)||l3(e),e}function IG(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],m=t[11],y=t[12],g=t[13],b=t[14],S=t[15],E=r*a-n*o,x=r*l-i*o,w=r*u-s*o,T=n*l-i*a,I=n*u-s*a,M=i*u-s*l,C=c*g-h*y,k=c*b-d*y,N=c*S-m*y,F=h*b-d*g,P=h*S-m*g,B=d*S-m*b;let O=E*B-x*P+w*F+T*N-I*k+M*C;return O?(O=1/O,e[0]=(a*B-l*P+u*F)*O,e[1]=(i*P-n*B-s*F)*O,e[2]=(g*M-b*I+S*T)*O,e[3]=(d*I-h*M-m*T)*O,e[4]=(l*N-o*B-u*k)*O,e[5]=(r*B-i*N+s*k)*O,e[6]=(b*w-y*M-S*x)*O,e[7]=(c*M-d*w+m*x)*O,e[8]=(o*P-a*N+u*C)*O,e[9]=(n*N-r*P-s*C)*O,e[10]=(y*I-g*w+S*E)*O,e[11]=(h*w-c*I-m*E)*O,e[12]=(a*k-o*F-l*C)*O,e[13]=(r*F-n*k+i*C)*O,e[14]=(g*x-y*T-b*E)*O,e[15]=(c*T-h*x+d*E)*O,e):null}function Dwt(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],m=t[11],y=t[12],g=t[13],b=t[14],S=t[15];return e[0]=a*(d*S-m*b)-h*(l*S-u*b)+g*(l*m-u*d),e[1]=-(n*(d*S-m*b)-h*(i*S-s*b)+g*(i*m-s*d)),e[2]=n*(l*S-u*b)-a*(i*S-s*b)+g*(i*u-s*l),e[3]=-(n*(l*m-u*d)-a*(i*m-s*d)+h*(i*u-s*l)),e[4]=-(o*(d*S-m*b)-c*(l*S-u*b)+y*(l*m-u*d)),e[5]=r*(d*S-m*b)-c*(i*S-s*b)+y*(i*m-s*d),e[6]=-(r*(l*S-u*b)-o*(i*S-s*b)+y*(i*u-s*l)),e[7]=r*(l*m-u*d)-o*(i*m-s*d)+c*(i*u-s*l),e[8]=o*(h*S-m*g)-c*(a*S-u*g)+y*(a*m-u*h),e[9]=-(r*(h*S-m*g)-c*(n*S-s*g)+y*(n*m-s*h)),e[10]=r*(a*S-u*g)-o*(n*S-s*g)+y*(n*u-s*a),e[11]=-(r*(a*m-u*h)-o*(n*m-s*h)+c*(n*u-s*a)),e[12]=-(o*(h*b-d*g)-c*(a*b-l*g)+y*(a*d-l*h)),e[13]=r*(h*b-d*g)-c*(n*b-i*g)+y*(n*d-i*h),e[14]=-(r*(a*b-l*g)-o*(n*b-i*g)+y*(n*l-i*a)),e[15]=r*(a*d-l*h)-o*(n*d-i*h)+c*(n*l-i*a),e}function Fwt(e){const t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],m=e[12],y=e[13],g=e[14],b=e[15];return(t*o-r*s)*(h*b-d*g)-(t*a-n*s)*(c*b-d*y)+(t*l-i*s)*(c*g-h*y)+(r*a-n*o)*(u*b-d*m)-(r*l-i*o)*(u*g-h*m)+(n*l-i*a)*(u*y-c*m)}function AG(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],m=t[10],y=t[11],g=t[12],b=t[13],S=t[14],E=t[15];let x=r[0],w=r[1],T=r[2],I=r[3];return e[0]=x*n+w*a+T*h+I*g,e[1]=x*i+w*l+T*d+I*b,e[2]=x*s+w*u+T*m+I*S,e[3]=x*o+w*c+T*y+I*E,x=r[4],w=r[5],T=r[6],I=r[7],e[4]=x*n+w*a+T*h+I*g,e[5]=x*i+w*l+T*d+I*b,e[6]=x*s+w*u+T*m+I*S,e[7]=x*o+w*c+T*y+I*E,x=r[8],w=r[9],T=r[10],I=r[11],e[8]=x*n+w*a+T*h+I*g,e[9]=x*i+w*l+T*d+I*b,e[10]=x*s+w*u+T*m+I*S,e[11]=x*o+w*c+T*y+I*E,x=r[12],w=r[13],T=r[14],I=r[15],e[12]=x*n+w*a+T*h+I*g,e[13]=x*i+w*l+T*d+I*b,e[14]=x*s+w*u+T*m+I*S,e[15]=x*o+w*c+T*y+I*E,e}function Zpe(e,t,r){const n=r[0],i=r[1],s=r[2];if(t===e)e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],h=t[5],d=t[6],m=t[7],y=t[8],g=t[9],b=t[10],S=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=h,e[6]=d,e[7]=m,e[8]=y,e[9]=g,e[10]=b,e[11]=S,e[12]=o*n+c*i+y*s+t[12],e[13]=a*n+h*i+g*s+t[13],e[14]=l*n+d*i+b*s+t[14],e[15]=u*n+m*i+S*s+t[15]}return e}function Jpe(e,t,r){const n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ype(e,t,r,n){let i=n[0],s=n[1],o=n[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=Co())return void TG(e,t);a=1/a,i*=a,s*=a,o*=a;const l=Math.sin(r),u=Math.cos(r),c=1-u,h=t[0],d=t[1],m=t[2],y=t[3],g=t[4],b=t[5],S=t[6],E=t[7],x=t[8],w=t[9],T=t[10],I=t[11],M=i*i*c+u,C=s*i*c+o*l,k=o*i*c-s*l,N=i*s*c-o*l,F=s*s*c+u,P=o*s*c+i*l,B=i*o*c+s*l,O=s*o*c-i*l,v=o*o*c+u;e[0]=h*M+g*C+x*k,e[1]=d*M+b*C+w*k,e[2]=m*M+S*C+T*k,e[3]=y*M+E*C+I*k,e[4]=h*N+g*F+x*P,e[5]=d*N+b*F+w*P,e[6]=m*N+S*F+T*P,e[7]=y*N+E*F+I*P,e[8]=h*B+g*O+x*v,e[9]=d*B+b*O+w*v,e[10]=m*B+S*O+T*v,e[11]=y*B+E*O+I*v,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function jwt(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+u*n,e[5]=o*i+c*n,e[6]=a*i+h*n,e[7]=l*i+d*n,e[8]=u*i-s*n,e[9]=c*i-o*n,e[10]=h*i-a*n,e[11]=d*i-l*n,e}function Uwt(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-u*n,e[1]=o*i-c*n,e[2]=a*i-h*n,e[3]=l*i-d*n,e[8]=s*n+u*i,e[9]=o*n+c*i,e[10]=a*n+h*i,e[11]=l*n+d*i,e}function Bwt(e,t,r){const n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+u*n,e[1]=o*i+c*n,e[2]=a*i+h*n,e[3]=l*i+d*n,e[4]=u*i-s*n,e[5]=c*i-o*n,e[6]=h*i-a*n,e[7]=d*i-l*n,e}function Xpe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Vwt(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qpe(e,t,r){if(t===0)return l3(e);let n=r[0],i=r[1],s=r[2],o=Math.sqrt(n*n+i*i+s*s);if(o<=Co())return null;o=1/o,n*=o,i*=o,s*=o;const a=Math.sin(t),l=Math.cos(t),u=1-l;return e[0]=n*n*u+l,e[1]=i*n*u+s*a,e[2]=s*n*u-i*a,e[3]=0,e[4]=n*i*u-s*a,e[5]=i*i*u+l,e[6]=s*i*u+n*a,e[7]=0,e[8]=n*s*u+i*a,e[9]=i*s*u-n*a,e[10]=s*s*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Kpe(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gwt(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zwt(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ede(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=n+n,l=i+i,u=s+s,c=n*a,h=n*l,d=n*u,m=i*l,y=i*u,g=s*u,b=o*a,S=o*l,E=o*u;return e[0]=1-(m+g),e[1]=h+E,e[2]=d-S,e[3]=0,e[4]=h-E,e[5]=1-(c+g),e[6]=y+b,e[7]=0,e[8]=d+S,e[9]=y-b,e[10]=1-(c+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function $wt(e,t){const r=qwt,n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=n*n+i*i+s*s+o*o;return h>0?(r[0]=2*(a*o+c*n+l*s-u*i)/h,r[1]=2*(l*o+c*i+u*n-a*s)/h,r[2]=2*(u*o+c*s+a*i-l*n)/h):(r[0]=2*(a*o+c*n+l*s-u*i),r[1]=2*(l*o+c*i+u*n-a*s),r[2]=2*(u*o+c*s+a*i-l*n)),ede(e,t,r),e}const qwt=Cd();function tde(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function rde(e,t){const r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e}function nde(e,t){const r=t[0]+t[5]+t[10];let n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function ide(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=t[3],l=i+i,u=s+s,c=o+o,h=i*l,d=i*u,m=i*c,y=s*u,g=s*c,b=o*c,S=a*l,E=a*u,x=a*c,w=n[0],T=n[1],I=n[2];return e[0]=(1-(y+b))*w,e[1]=(d+x)*w,e[2]=(m-E)*w,e[3]=0,e[4]=(d-x)*T,e[5]=(1-(h+b))*T,e[6]=(g+S)*T,e[7]=0,e[8]=(m+E)*I,e[9]=(g-S)*I,e[10]=(1-(h+y))*I,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function sde(e,t,r,n,i){const s=t[0],o=t[1],a=t[2],l=t[3],u=s+s,c=o+o,h=a+a,d=s*u,m=s*c,y=s*h,g=o*c,b=o*h,S=a*h,E=l*u,x=l*c,w=l*h,T=n[0],I=n[1],M=n[2],C=i[0],k=i[1],N=i[2],F=(1-(g+S))*T,P=(m+w)*T,B=(y-x)*T,O=(m-w)*I,v=(1-(d+S))*I,A=(b+E)*I,R=(y+x)*M,U=(b-E)*M,q=(1-(d+g))*M;return e[0]=F,e[1]=P,e[2]=B,e[3]=0,e[4]=O,e[5]=v,e[6]=A,e[7]=0,e[8]=R,e[9]=U,e[10]=q,e[11]=0,e[12]=r[0]+C-(F*C+O*k+R*N),e[13]=r[1]+k-(P*C+v*k+U*N),e[14]=r[2]+N-(B*C+A*k+q*N),e[15]=1,e}function Hwt(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,u=r*o,c=n*o,h=n*a,d=i*o,m=i*a,y=i*l,g=s*o,b=s*a,S=s*l;return e[0]=1-h-y,e[1]=c+S,e[2]=d-b,e[3]=0,e[4]=c-S,e[5]=1-u-y,e[6]=m+g,e[7]=0,e[8]=d+b,e[9]=m-g,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ode(e,t,r,n,i,s,o){const a=1/(r-t),l=1/(i-n),u=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(o+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*u,e[15]=0,e}function Wwt(e,t,r,n,i){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}function Zwt(e,t,r,n){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(i-s)*u*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function Jwt(e,t,r,n,i,s,o){const a=1/(t-r),l=1/(n-i),u=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(o+s)*u,e[15]=1,e}function ade(e,t,r,n){const i=t[0],s=t[1],o=t[2];let a=i-r[0],l=s-r[1],u=o-r[2];const c=Co();if(Math.abs(a)<c&&Math.abs(l)<c&&Math.abs(u)<c)return void l3(e);let h=1/Math.sqrt(a*a+l*l+u*u);a*=h,l*=h,u*=h;const d=n[0],m=n[1],y=n[2];let g=m*u-y*l,b=y*a-d*u,S=d*l-m*a;h=Math.sqrt(g*g+b*b+S*S),h?(h=1/h,g*=h,b*=h,S*=h):(g=0,b=0,S=0);let E=l*S-u*b,x=u*g-a*S,w=a*b-l*g;h=Math.sqrt(E*E+x*x+w*w),h?(h=1/h,E*=h,x*=h,w*=h):(E=0,x=0,w=0),e[0]=g,e[1]=E,e[2]=a,e[3]=0,e[4]=b,e[5]=x,e[6]=l,e[7]=0,e[8]=S,e[9]=w,e[10]=u,e[11]=0,e[12]=-(g*i+b*s+S*o),e[13]=-(E*i+x*s+w*o),e[14]=-(a*i+l*s+u*o),e[15]=1}function Ywt(e,t,r,n){const i=t[0],s=t[1],o=t[2],a=n[0],l=n[1],u=n[2];let c=i-r[0],h=s-r[1],d=o-r[2],m=c*c+h*h+d*d;m>0&&(m=1/Math.sqrt(m),c*=m,h*=m,d*=m);let y=l*d-u*h,g=u*c-a*d,b=a*h-l*c;return m=y*y+g*g+b*b,m>0&&(m=1/Math.sqrt(m),y*=m,g*=m,b*=m),e[0]=y,e[1]=g,e[2]=b,e[3]=0,e[4]=h*b-d*g,e[5]=d*y-c*b,e[6]=c*g-h*y,e[7]=0,e[8]=c,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e}function Xwt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Qwt(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Kwt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function lde(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function e_t(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function t_t(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function ude(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function cde(e,t){if(e===t)return!0;const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],y=e[12],g=e[13],b=e[14],S=e[15],E=t[0],x=t[1],w=t[2],T=t[3],I=t[4],M=t[5],C=t[6],k=t[7],N=t[8],F=t[9],P=t[10],B=t[11],O=t[12],v=t[13],A=t[14],R=t[15],U=Co();return Math.abs(r-E)<=U*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(n-x)<=U*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-w)<=U*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-T)<=U*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-I)<=U*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-M)<=U*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-C)<=U*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-k)<=U*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-N)<=U*Math.max(1,Math.abs(c),Math.abs(N))&&Math.abs(h-F)<=U*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-P)<=U*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-B)<=U*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(y-O)<=U*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(g-v)<=U*Math.max(1,Math.abs(g),Math.abs(v))&&Math.abs(b-A)<=U*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(S-R)<=U*Math.max(1,Math.abs(S),Math.abs(R))}function hde(e){const t=Co(),r=e[0],n=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(n*n+o*o+u*u))<=t&&Math.abs(1-(i*i+a*a+c*c))<=t}function pde(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const r_t=AG,n_t=lde;Object.freeze(Object.defineProperty({__proto__:null,add:Kwt,adjoint:Dwt,copy:TG,determinant:Fwt,equals:cde,exactEquals:ude,frob:Qwt,fromQuat:Hwt,fromQuat2:$wt,fromRotation:Qpe,fromRotationTranslation:ede,fromRotationTranslationScale:ide,fromRotationTranslationScaleOrigin:sde,fromScaling:Vwt,fromTranslation:Xpe,fromXRotation:Kpe,fromYRotation:Gwt,fromZRotation:zwt,frustum:ode,getRotation:nde,getScaling:rde,getTranslation:tde,hasIdentityRotation:pde,identity:l3,invert:IG,invertOrIdentity:Pwt,isOrthoNormal:hde,lookAt:ade,mul:r_t,multiply:AG,multiplyScalar:e_t,multiplyScalarAndAdd:t_t,ortho:Jwt,perspective:Wwt,perspectiveFromFieldOfView:Zwt,rotate:Ype,rotateX:jwt,rotateY:Uwt,rotateZ:Bwt,scale:Jpe,set:Nd,str:Xwt,sub:n_t,subtract:lde,targetTo:Ywt,translate:Zpe,transpose:Ld},Symbol.toStringTag,{value:"Module"}));const i_t=(e,t)=>{const r=Nd(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Ld(r,r)},s_t=(e,t)=>{const r=Nd(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Ld(r,r)},o_t=(e,t)=>{const r=1-t,n=Nd(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Ld(n,n)},a_t=(e,t)=>{const r=Math.sin(t*Math.PI/180),n=Math.cos(t*Math.PI/180),i=Nd(e,.213+.787*n-.213*r,.715-.715*n-.715*r,.072-.072*n+.928*r,0,.213-.213*n+.143*r,.715+.285*n+.14*r,.072-.072*n-.283*r,0,.213-.213*n-.787*r,.715-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,1);return Ld(i,i)},l_t=(e,t)=>{const r=1-2*t,n=Nd(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Ld(n,n)},u_t=(e,t)=>{const r=Nd(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Ld(r,r)},c_t=(e,t)=>{const r=1-t,n=Nd(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Ld(n,n)};let dde=class fde{constructor(t,r,n){this.strength=t,this.radius=r,this.threshold=n,this.type="bloom"}interpolate(t,r,n){this.strength=Sa(t.strength,r.strength,n),this.radius=Sa(t.radius,r.radius,n),this.threshold=Sa(t.threshold,r.threshold,n)}clone(){return new fde(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:IS(this.radius),strength:this.strength,threshold:this.threshold}}},mde=class yde{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,n){this.radius=Math.round(Sa(t.radius,r.radius,n))}clone(){return new yde(this.radius)}toJSON(){return{type:"blur",radius:IS(this.radius)}}},fF=class gde{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,n){this.amount=Sa(t.amount,r.amount,n),this._updateMatrix()}clone(){return new gde(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||QR();switch(this.type){case"brightness":this._colorMatrix=i_t(t,this.amount);break;case"contrast":this._colorMatrix=s_t(t,this.amount);break;case"grayscale":this._colorMatrix=o_t(t,this.amount);break;case"invert":this._colorMatrix=l_t(t,this.amount);break;case"saturate":this._colorMatrix=u_t(t,this.amount);break;case"sepia":this._colorMatrix=c_t(t,this.amount)}}},vde=class bde{constructor(t,r,n,i){this.offsetX=t,this.offsetY=r,this.blurRadius=n,this.color=i,this.type="drop-shadow"}interpolate(t,r,n){this.offsetX=Sa(t.offsetX,r.offsetX,n),this.offsetY=Sa(t.offsetY,r.offsetY,n),this.blurRadius=Sa(t.blurRadius,r.blurRadius,n),this.color[0]=Math.round(Sa(t.color[0],r.color[0],n)),this.color[1]=Math.round(Sa(t.color[1],r.color[1],n)),this.color[2]=Math.round(Sa(t.color[2],r.color[2],n)),this.color[3]=Sa(t.color[3],r.color[3],n)}clone(){return new bde(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:IS(this.offsetX),yoffset:IS(this.offsetY),blurRadius:IS(this.blurRadius),color:t}}},wde=class _de{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,n){this.angle=Sa(t.angle,r.angle,n),this._updateMatrix()}clone(){return new _de(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||QR();this._colorMatrix=a_t(t,this.angle)}},xde=class Sde{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,n){this.amount=Sa(t.amount,r.amount,n)}clone(){return new Sde(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function Sa(e,t,r){return e+(t-e)*r}function IS(e){return Math.round(1e3*pl(e))/1e3}function h_t(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new fF(e.type,0);case"saturate":case"brightness":case"contrast":return new fF(e.type,1);case"opacity":return new xde(1);case"hue-rotate":return new wde(0);case"blur":return new mde(0);case"drop-shadow":return new vde(0,0,0,[...dV("transparent")]);case"bloom":return new dde(0,0,1)}}function Ede(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((n,i)=>n.type===r[i].type)}function Tde(e,t){const r=e.length>t.length?e:t,n=e.length>t.length?t:e;for(let i=n.length;i<r.length;i++)n.push(h_t(r[i]))}function p_t(e){const t=e[0];return!!t&&"type"in t}function d_t(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function Rb(e,t,r,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,Rb.prototype),i.expected=t,i.found=r,i.location=n,i.name="SyntaxError",i}function NL(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function f_t(e,t){var r,n={},i=(t=t!==void 0?t:{}).grammarSource,s={start:Vd},o=Vd,a="none",l=")",u=",",c="(",h="%",d="px",m="cm",y="mm",g="in",b="pt",S="pc",E="deg",x="rad",w="grad",T="turn",I="#",M=".",C="e",k=/^[ \t\n\r]/,N=/^[a-z\-]/,F=/^[0-9a-fA-F]/,P=/^[+\-]/,B=/^[0-9]/,O=Hr("none"),v=Gt("none",!1),A=Gt(")",!1),R=Gt(",",!1),U=Hr("whitespace"),q=dr([" ","	",`
`,"\r"],!1,!1),Q=Hr("function"),ee=Gt("(",!1),Y=Hr("identifier"),ue=dr([["a","z"],"-"],!1,!1),de=Hr("percentage"),ce=Gt("%",!1),me=Hr("length"),Se=Gt("px",!1),Oe=Gt("cm",!1),ye=Gt("mm",!1),Fe=Gt("in",!1),ze=Gt("pt",!1),dt=Gt("pc",!1),re=Hr("angle"),D=Gt("deg",!1),K=Gt("rad",!1),H=Gt("grad",!1),z=Gt("turn",!1),L=Hr("number"),G=Hr("color"),j=Gt("#",!1),V=dr([["0","9"],["a","f"],["A","F"]],!1,!1),$=dr(["+","-"],!1,!1),J=dr([["0","9"]],!1,!1),X=Gt(".",!1),te=Gt("e",!1),le=function(){return[]},ve=function(ae,De){return{type:"function",name:ae,parameters:De||[]}},ke=function(ae,De){return De.length>0?IN(ae,De,3):[ae]},je=function(ae){return{type:"quantity",value:ae.value,unit:ae.unit}},yt=function(ae){return{type:"color",colorType:ae.type,value:ae.value}},ft=function(ae){return ae},Ot=function(){return Dr()},ct=function(ae){return{value:ae,unit:"%"}},Te=function(ae){return{value:ae,unit:"px"}},ht=function(ae){return{value:ae,unit:"cm"}},nt=function(ae){return{value:ae,unit:"mm"}},$t=function(ae){return{value:ae,unit:"in"}},Wt=function(ae){return{value:ae,unit:"pt"}},vn=function(ae){return{value:ae,unit:"pc"}},Xn=function(ae){return{value:ae,unit:"deg"}},ss=function(ae){return{value:ae,unit:"rad"}},Ei=function(ae){return{value:ae,unit:"grad"}},os=function(ae){return{value:ae,unit:"turn"}},za=function(ae){return{value:ae,unit:null}},oe=function(){return{type:"hex",value:Dr()}},ge=function(ae){return{type:"function",value:ae}},_e=function(){return{type:"named",value:Dr()}},Ve=function(){return parseFloat(Dr())},he=0|t.peg$currPos,Ue=he,xt=[{line:1,column:1}],rt=he,vr=t.peg$maxFailExpected||[],Je=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=s[t.startRule]}function Dr(){return e.substring(Ue,he)}function Gt(ae,De){return{type:"literal",text:ae,ignoreCase:De}}function dr(ae,De,He){return{type:"class",parts:ae,inverted:De,ignoreCase:He}}function kn(){return{type:"end"}}function Hr(ae){return{type:"other",description:ae}}function jn(ae){var De,He=xt[ae];if(He)return He;if(ae>=xt.length)De=xt.length-1;else for(De=ae;!xt[--De];);for(He={line:(He=xt[De]).line,column:He.column};De<ae;)e.charCodeAt(De)===10?(He.line++,He.column=1):He.column++,De++;return xt[ae]=He,He}function Qn(ae,De,He){var qt=jn(ae),kr=jn(De);return{source:i,start:{offset:ae,line:qt.line,column:qt.column},end:{offset:De,line:kr.line,column:kr.column}}}function Nt(ae){he<rt||(he>rt&&(rt=he,vr=[]),vr.push(ae))}function h0(ae,De,He){return new Rb(Rb.buildMessage(ae,De),ae,De,He)}function Vd(){var ae;return(ae=A1())===n&&(ae=p0()),ae}function A1(){var ae,De;return Je++,ae=he,Ti(),e.substr(he,4)===a?(De=a,he+=4):(De=n,Je===0&&Nt(v)),De!==n?(Ti(),Ue=ae,ae=le()):(he=ae,ae=n),Je--,ae===n&&Je===0&&Nt(O),ae}function p0(){var ae,De;if(ae=[],(De=Gd())!==n)for(;De!==n;)ae.push(De),De=Gd();else ae=n;return ae}function Gd(){var ae,De,He,qt;return ae=he,Ti(),(De=_N())!==n?(Ti(),(He=hu())===n&&(He=null),Ti(),e.charCodeAt(he)===41?(qt=l,he++):(qt=n,Je===0&&Nt(A)),qt!==n?(Ti(),Ue=ae,ae=ve(De,He)):(he=ae,ae=n)):(he=ae,ae=n),ae}function hu(){var ae,De,He,qt,kr,Rn,ci,Ws;if(ae=he,(De=V_())!==n){for(He=[],qt=he,kr=Ti(),e.charCodeAt(he)===44?(Rn=u,he++):(Rn=n,Je===0&&Nt(R)),Rn===n&&(Rn=null),ci=Ti(),(Ws=V_())!==n?qt=kr=[kr,Rn,ci,Ws]:(he=qt,qt=n);qt!==n;)He.push(qt),qt=he,kr=Ti(),e.charCodeAt(he)===44?(Rn=u,he++):(Rn=n,Je===0&&Nt(R)),Rn===n&&(Rn=null),ci=Ti(),(Ws=V_())!==n?qt=kr=[kr,Rn,ci,Ws]:(he=qt,qt=n);Ue=ae,ae=ke(De,He)}else he=ae,ae=n;return ae}function V_(){var ae,De;return ae=he,(De=xN())===n&&(De=SN())===n&&(De=X3())===n&&(De=M1()),De!==n&&(Ue=ae,De=je(De)),(ae=De)===n&&(ae=he,(De=EN())!==n&&(Ue=ae,De=yt(De)),ae=De),ae}function Ti(){var ae,De;for(Je++,ae=[],De=e.charAt(he),k.test(De)?he++:(De=n,Je===0&&Nt(q));De!==n;)ae.push(De),De=e.charAt(he),k.test(De)?he++:(De=n,Je===0&&Nt(q));return Je--,De=n,Je===0&&Nt(U),ae}function _N(){var ae,De,He;return Je++,ae=he,(De=Y3())!==n?(e.charCodeAt(he)===40?(He=c,he++):(He=n,Je===0&&Nt(ee)),He!==n?(Ue=ae,ae=ft(De)):(he=ae,ae=n)):(he=ae,ae=n),Je--,ae===n&&(De=n,Je===0&&Nt(Q)),ae}function Y3(){var ae,De,He;if(Je++,ae=he,De=[],He=e.charAt(he),N.test(He)?he++:(He=n,Je===0&&Nt(ue)),He!==n)for(;He!==n;)De.push(He),He=e.charAt(he),N.test(He)?he++:(He=n,Je===0&&Nt(ue));else De=n;return De!==n&&(Ue=ae,De=Ot()),Je--,(ae=De)===n&&(De=n,Je===0&&Nt(Y)),ae}function xN(){var ae,De,He;return Je++,ae=he,Ti(),(De=Hs())!==n?(e.charCodeAt(he)===37?(He=h,he++):(He=n,Je===0&&Nt(ce)),He!==n?(Ue=ae,ae=ct(De)):(he=ae,ae=n)):(he=ae,ae=n),Je--,ae===n&&Je===0&&Nt(de),ae}function SN(){var ae,De,He;return Je++,ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===d?(He=d,he+=2):(He=n,Je===0&&Nt(Se)),He!==n?(Ue=ae,ae=Te(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===m?(He=m,he+=2):(He=n,Je===0&&Nt(Oe)),He!==n?(Ue=ae,ae=ht(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===y?(He=y,he+=2):(He=n,Je===0&&Nt(ye)),He!==n?(Ue=ae,ae=nt(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===g?(He=g,he+=2):(He=n,Je===0&&Nt(Fe)),He!==n?(Ue=ae,ae=$t(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===b?(He=b,he+=2):(He=n,Je===0&&Nt(ze)),He!==n?(Ue=ae,ae=Wt(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,Ti(),(De=Hs())!==n?(e.substr(he,2)===S?(He=S,he+=2):(He=n,Je===0&&Nt(dt)),He!==n?(Ue=ae,ae=vn(De)):(he=ae,ae=n)):(he=ae,ae=n)))))),Je--,ae===n&&Je===0&&Nt(me),ae}function X3(){var ae,De,He;return Je++,ae=he,(De=Hs())!==n?(e.substr(he,3)===E?(He=E,he+=3):(He=n,Je===0&&Nt(D)),He!==n?(Ue=ae,ae=Xn(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,(De=Hs())!==n?(e.substr(he,3)===x?(He=x,he+=3):(He=n,Je===0&&Nt(K)),He!==n?(Ue=ae,ae=ss(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,(De=Hs())!==n?(e.substr(he,4)===w?(He=w,he+=4):(He=n,Je===0&&Nt(H)),He!==n?(Ue=ae,ae=Ei(De)):(he=ae,ae=n)):(he=ae,ae=n),ae===n&&(ae=he,(De=Hs())!==n?(e.substr(he,4)===T?(He=T,he+=4):(He=n,Je===0&&Nt(z)),He!==n?(Ue=ae,ae=os(De)):(he=ae,ae=n)):(he=ae,ae=n)))),Je--,ae===n&&(De=n,Je===0&&Nt(re)),ae}function M1(){var ae,De;return Je++,ae=he,Ti(),(De=Hs())!==n?(Ue=ae,ae=za(De)):(he=ae,ae=n),Je--,ae===n&&Je===0&&Nt(L),ae}function EN(){var ae,De,He,qt;if(Je++,ae=he,e.charCodeAt(he)===35?(De=I,he++):(De=n,Je===0&&Nt(j)),De!==n){if(He=[],qt=e.charAt(he),F.test(qt)?he++:(qt=n,Je===0&&Nt(V)),qt!==n)for(;qt!==n;)He.push(qt),qt=e.charAt(he),F.test(qt)?he++:(qt=n,Je===0&&Nt(V));else He=n;He!==n?(Ue=ae,ae=oe()):(he=ae,ae=n)}else he=ae,ae=n;return ae===n&&(ae=he,(De=Gd())!==n&&(Ue=ae,De=ge(De)),(ae=De)===n&&(ae=he,(De=Y3())!==n&&(Ue=ae,De=_e()),ae=De)),Je--,ae===n&&(De=n,Je===0&&Nt(G)),ae}function Hs(){var ae,De,He,qt,kr,Rn,ci,Ws;for(ae=he,De=e.charAt(he),P.test(De)?he++:(De=n,Je===0&&Nt($)),De===n&&(De=null),He=he,qt=[],kr=e.charAt(he),B.test(kr)?he++:(kr=n,Je===0&&Nt(J));kr!==n;)qt.push(kr),kr=e.charAt(he),B.test(kr)?he++:(kr=n,Je===0&&Nt(J));if(e.charCodeAt(he)===46?(kr=M,he++):(kr=n,Je===0&&Nt(X)),kr!==n){if(Rn=[],ci=e.charAt(he),B.test(ci)?he++:(ci=n,Je===0&&Nt(J)),ci!==n)for(;ci!==n;)Rn.push(ci),ci=e.charAt(he),B.test(ci)?he++:(ci=n,Je===0&&Nt(J));else Rn=n;Rn!==n?He=qt=[qt,kr,Rn]:(he=He,He=n)}else he=He,He=n;if(He===n)if(He=[],qt=e.charAt(he),B.test(qt)?he++:(qt=n,Je===0&&Nt(J)),qt!==n)for(;qt!==n;)He.push(qt),qt=e.charAt(he),B.test(qt)?he++:(qt=n,Je===0&&Nt(J));else He=n;if(He!==n){if(qt=he,e.charCodeAt(he)===101?(kr=C,he++):(kr=n,Je===0&&Nt(te)),kr!==n){if(Rn=e.charAt(he),P.test(Rn)?he++:(Rn=n,Je===0&&Nt($)),Rn===n&&(Rn=null),ci=[],Ws=e.charAt(he),B.test(Ws)?he++:(Ws=n,Je===0&&Nt(J)),Ws!==n)for(;Ws!==n;)ci.push(Ws),Ws=e.charAt(he),B.test(Ws)?he++:(Ws=n,Je===0&&Nt(J));else ci=n;ci!==n?qt=kr=[kr,Rn,ci]:(he=qt,qt=n)}else he=qt,qt=n;qt===n&&(qt=null),Ue=ae,ae=Ve()}else he=ae,ae=n;return ae}function TN(ae,De){return ae.map(function(He){return He[De]})}function IN(ae,De,He){return[ae].concat(TN(De,He))}if(r=o(),t.peg$library)return{peg$result:r,peg$currPos:he,peg$FAILED:n,peg$maxFailExpected:vr,peg$maxFailPos:rt};if(r!==n&&he===e.length)return r;throw r!==n&&he<e.length&&Nt(kn()),h0(vr,rt<e.length?e.charAt(rt):null,rt<e.length?Qn(rt,rt+1):Qn(rt,rt))}function MG(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=hX(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new ie("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:hX(r.value)}});t.sort((r,n)=>n.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!Ede(t[r].effects,t[r+1].effects))throw new ie("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Tde(t[r].effects,t[r+1].effects)}return t.sort((r,n)=>n.scale-r.scale),t}function hX(e){let t;if(!e)return[];try{t=f_t(e)}catch(r){throw new ie("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>m_t(r))}function m_t(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return y_t(e);case"opacity":return g_t(e);case"hue-rotate":return v_t(e);case"blur":return b_t(e);case"drop-shadow":return w_t(e);case"bloom":return __t(e)}}catch(t){throw t.details.filter=e,t}throw new ie("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function y_t(e){let t=1;return I_(e.parameters,1),e.parameters.length===1&&(t=Vu(e.parameters[0])),new fF(e.name,t)}function g_t(e){let t=1;return I_(e.parameters,1),e.parameters.length===1&&(t=Vu(e.parameters[0])),new xde(t)}function v_t(e){let t=0;return I_(e.parameters,1),e.parameters.length===1&&(t=A_t(e.parameters[0])),new wde(t)}function b_t(e){let t=0;return I_(e.parameters,1),e.parameters.length===1&&(t=RG(e.parameters[0]),u3(t,e.parameters[0])),new mde(t)}function w_t(e){const t=[];let r=null;for(const n of e.parameters)if(n.type==="color"){if(t.length&&Object.freeze(t),r)throw new ie("effect:type-error","Accepts only one color",{});r=M_t(n)}else{const i=RG(n);if(Object.isFrozen(t))throw new ie("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&u3(i,n)}if(t.length<2||t.length>3)throw new ie("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new vde(t[0],t[1],t[2]||0,r||Ide("black"))}function __t(e){let t=1,r=0,n=0;return I_(e.parameters,3),e.parameters[0]&&(t=Vu(e.parameters[0])),e.parameters[1]&&(r=RG(e.parameters[1]),u3(r,e.parameters[1])),e.parameters[2]&&(n=Vu(e.parameters[2])),new dde(t,r,n)}function I_(e,t){if(e.length>t)throw new ie("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function KR(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in kG)return"<length>";if(e.unit in CG)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function u3(e,t){if(e<0)throw new ie("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function x_t(e){if(e.type!=="quantity"||e.unit!==null)throw new ie("effect:type-error",`Expected <double>, Actual: ${KR(e)}`,{term:e})}function S_t(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new ie("effect:type-error",`Expected <double> or <percentage>, Actual: ${KR(e)}`,{term:e})}d_t(Rb,Error),Rb.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(n){var a=this.location.end,l=NL("",s.line.toString().length," "),u=n[i.line-1],c=(i.line===a.line?a.column:u.length+1)-i.column||1;t+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+u+`
`+l+" | "+NL("",i.column-1," ")+NL("",c,"^")}else t+=`
 at `+o}return t},Rb.buildMessage=function(e,t){var r={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var c=u.parts.map(function(h){return Array.isArray(h)?s(h[0])+"-"+s(h[1]):s(h)});return"["+(u.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function n(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+n(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+n(c)})}function o(u){return r[u.type](u)}function a(u){var c,h,d=u.map(o);if(d.sort(),d.length>0){for(c=1,h=1;c<d.length;c++)d[c-1]!==d[c]&&(d[h]=d[c],h++);d.length=h}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function l(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+a(e)+" but "+l(t)+" found."};const CG={deg:1,grad:.9,rad:180/Math.PI,turn:360};function E_t(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&CG[e.unit]!=null))throw new ie("effect:type-error",`Expected <angle>, Actual: ${KR(e)}`,{term:e})}const kG={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function T_t(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&kG[e.unit]!=null))throw new ie("effect:type-error",`Expected <length>, Actual: ${KR(e)}`,{term:e})}function Vu(e){S_t(e);const t=e.value;return u3(t,e),e.unit==="%"?.01*t:t}function I_t(e){return x_t(e),u3(e.value,e),e.value}function A_t(e){return E_t(e),e.value*CG[e.unit]||0}function RG(e){return T_t(e),e.value*kG[e.unit]||0}function M_t(e){switch(e.colorType){case"hex":return tpt(e.value);case"named":return Ide(e.value);case"function":return R_t(e.value)}}function Ide(e){if(!Gae(e))throw new ie("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return ept(e)}const C_t=/^rgba?/i,k_t=/^hsla?/i;function R_t(e){if(I_(e.parameters,4),C_t.test(e.name))return[Vu(e.parameters[0]),Vu(e.parameters[1]),Vu(e.parameters[2]),e.parameters[3]?Vu(e.parameters[3]):1];if(k_t.test(e.name))return zae(I_t(e.parameters[0]),Vu(e.parameters[1]),Vu(e.parameters[2]),e.parameters[3]?Vu(e.parameters[3]):1);throw new ie("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function RE(e,t,r){try{return N_t(e)}catch(n){r?.messages?.push(n)}return null}function OE(e,t,r,n){try{const i=O_t(e);_i(r,i,t)}catch(i){n.messages&&n.messages.push(i)}}function O_t(e){const t=MG(e);return t?p_t(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:n})=>({scale:r,value:n.map(i=>i.toJSON())})):null}function N_t(e){if(!e||e.length===0)return null;if(L_t(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:pX(r.value)});return t}return pX(e)}function L_t(e){const t=e[0];return!!t&&"scale"in t}function pX(e){if(!e?.length)return"";const t=[];for(const r of e){let n=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[$h(r,"amount")];break;case"blur":n=[$h(r,"radius","pt")];break;case"hue-rotate":n=[$h(r,"angle","deg")];break;case"drop-shadow":n=[$h(r,"xoffset","pt"),$h(r,"yoffset","pt"),$h(r,"blurRadius","pt"),P_t(r,"color")];break;case"bloom":n=[$h(r,"strength"),$h(r,"radius","pt"),$h(r,"threshold")]}const i=`${r.type}(${n.filter(Boolean).join(" ")})`;MG(i),t.push(i)}return t.join(" ")}function $h(e,t,r){if(e[t]==null)throw new ie("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function P_t(e,t){if(e[t]==null)throw new ie("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const Ade={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},dX={read:{reader:RE},write:{allowNull:!0,writer:OE}},Mde={json:{read:!1,write:!1,origins:{"web-map":dX,"portal-item":dX}}},Km=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return p([f(Ade)],t.prototype,"blendMode",void 0),p([f(Mde)],t.prototype,"effect",void 0),t=p([W("esri.layers.mixins.BlendLayer")],t),t},c3=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return p([f({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=p([W("esri.layers.mixins.CustomParametersMixin")],t),t},D_t="randomUUID"in crypto;function eO(){if(D_t)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function F_t(){return`{${eO().toUpperCase()}}`}function j_t(){return`{${eO()}}`}function Cde(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const kde=j_t(),Rde=new Map,Ode=new Map;async function U_t(e,t,r){if(!e||!r)return!1;if(!t)return!0;const n=new URL(e).host;let i=Rde.get(n);if(!i){const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await Xe(s,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return i===t}async function B_t(e,t,r=!1){if(!e||!t)return!0;const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=Ode.get(n)?.entries();if(i){for(const[s,o]of i)if(o.name===t){const a=!o.stack?.hasForwardEdits();if(!a&&r){const[{deleteForwardEdits:l},{default:u}]=await Promise.all([Me(()=>import("./deleteForwardEdits-B0g8BhFg-72-DwheA.js"),__vite__mapDeps([131,1,2]),import.meta.url),Me(()=>import("./DeleteForwardEditsParameters-BIwbWFAr-CKa7Tx5s.js"),__vite__mapDeps([132,1,2]),import.meta.url)]),c=await l(n,s,new u({sessionId:kde,moment:o.moment}));return c.success&&o.stack?.clearForwardEdits(),c.success}return a}}return!0}function Nde(e,t){if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=Ode.get(r)?.entries();if(n){for(const[i,s]of n)if(s.name===t)return s.lockType==="edit"}return!1}const OG=new jh.EventEmitter;function V_t(e){return OG.on("apply-edits",new WeakRef(e))}function G_t(e){return OG.on("update-moment",new WeakRef(e))}function z_t(e,t,r=null,n=!1){const i=Ko();return n=t==null||n,OG.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:n,result:i.promise}),i}const Lde=Symbol();function $_t(e){return e!=null&&typeof e=="object"&&Lde in e}function r2(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function LL(e,t,r){const n=new URL(e).host,i=Rde.get(n),s=o=>!o||o===i;return s(t)&&s(r)||t===r}const Pde=e=>{var t;let r=class extends e{constructor(...n){super(...n),this[t]=!0,this._applyEditsHandler=i=>{const{serviceUrl:s,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:u}=i,c=s===this.url,h=o!=null&&this.layerId!=null&&o===this.layerId,d=r2(this),m=r2(this)&&LL(s,a,this.gdbVersion);if(!c||d&&!m||!h&&!l)return;const y=u.then(g=>{if(this.lastEditsEventDate=new Date,h&&(g.addedFeatures.length||g.updatedFeatures.length||g.deletedFeatures.length||g.addedAttachments.length||g.updatedAttachments.length||g.deletedAttachments.length))return this.emit("edits",se(g)),g;const b=g.editedFeatures?.find(({layerId:E})=>E===this.layerId);if(b){const{adds:E,updates:x,deletes:w}=b.editedFeatures,T={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:E?E.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],deletedFeatures:w?w.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],updatedFeatures:x?x.map(({current:{attributes:I}})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],editedFeatures:se(g.editedFeatures),exceededTransferLimit:!1,historicMoment:se(g.historicMoment)};return this.emit("edits",T),T}const S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:se(g.editedFeatures),exceededTransferLimit:!1,historicMoment:se(g.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,S.historicMoment)&&this.emit("edits",S),S}).then(g=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(s,a,g.historicMoment)&&(this.historicMoment=g.historicMoment),g));this.emit("apply-edits",{result:y})},this._updateMomentHandler=i=>{const{serviceUrl:s,gdbVersion:o,moment:a}=i,l=s===this.url,u=r2(this),c=r2(this)&&LL(s,o,this.gdbVersion),h=r2(this)&&!LL(s,this.gdbVersion,null);l&&u&&c&&h&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(V_t(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(G_t(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(n,i,s){return"historicMoment"in this&&this.historicMoment!==s&&Nde(n,i)}};return t=Lde,p([f()],r.prototype,"lastEditsEventDate",void 0),r=p([W("esri.layers.mixins.EditBusLayer")],r),r};var mF;let Zp=mF=class extends we{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new mF({mapLayerId:e,gdbVersion:t})}};p([tt({mapLayer:"map-layer"})],Zp.prototype,"type",void 0),p([f({type:Ft,json:{write:!0}})],Zp.prototype,"mapLayerId",void 0),p([f({type:String,json:{write:!0}})],Zp.prototype,"gdbVersion",void 0),Zp=mF=p([W("esri.layers.support.source.MapLayerSource")],Zp);var yF;let ap=yF=class extends we{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:n,geometryType:i}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:n?.clone()??void 0,geometryType:i};return new yF(s)}};p([tt({queryTable:"query-table"})],ap.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],ap.prototype,"workspaceId",void 0),p([f({type:String,json:{write:!0}})],ap.prototype,"query",void 0),p([f({type:String,json:{write:!0}})],ap.prototype,"oidFields",void 0),p([f({type:Ke,json:{write:!0}})],ap.prototype,"spatialReference",void 0),p([tt(SE)],ap.prototype,"geometryType",void 0),ap=yF=p([W("esri.layers.support.source.QueryTableDataSource")],ap);var gF;let gv=gF=class extends we{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new gF({workspaceId:e,dataSourceName:t})}};p([tt({raster:"raster"})],gv.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],gv.prototype,"dataSourceName",void 0),p([f({type:String,json:{write:!0}})],gv.prototype,"workspaceId",void 0),gv=gF=p([W("esri.layers.support.source.RasterDataSource")],gv);var vF;let ly=vF=class extends we{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new vF({workspaceId:e,gdbVersion:t,dataSourceName:r})}};p([tt({table:"table"})],ly.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],ly.prototype,"workspaceId",void 0),p([f({type:String,json:{write:!0}})],ly.prototype,"gdbVersion",void 0),p([f({type:String,json:{write:!0}})],ly.prototype,"dataSourceName",void 0),ly=vF=p([W("esri.layers.support.source.TableDataSource")],ly);var bF,wF;const q_t=Mn()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Ya=bF=class extends we{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return fX()(e,t,r)}castLeftTableSource(e){return eu(_F(),e)}readRightTableSource(e,t,r){return fX()(e,t,r)}castRightTableSource(e){return eu(_F(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:n,joinType:i}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:n?.clone()??void 0,joinType:i};return new bF(s)}};p([tt({joinTable:"join-table"})],Ya.prototype,"type",void 0),p([f({type:String,json:{write:!0}})],Ya.prototype,"leftTableKey",void 0),p([f({type:String,json:{write:!0}})],Ya.prototype,"rightTableKey",void 0),p([f({json:{write:!0}})],Ya.prototype,"leftTableSource",void 0),p([Ee("leftTableSource")],Ya.prototype,"readLeftTableSource",null),p([ur("leftTableSource")],Ya.prototype,"castLeftTableSource",null),p([f({json:{write:!0}})],Ya.prototype,"rightTableSource",void 0),p([Ee("rightTableSource")],Ya.prototype,"readRightTableSource",null),p([ur("rightTableSource")],Ya.prototype,"castRightTableSource",null),p([tt(q_t)],Ya.prototype,"joinType",void 0),Ya=bF=p([W("esri.layers.support.source.JoinTableDataSource")],Ya);let PL=null;function fX(){return PL||(PL=t1({types:_F()})),PL}let DL=null;function _F(){return DL||(DL={key:"type",base:null,typeMap:{"data-layer":$o,"map-layer":Zp}}),DL}const H_t={key:"type",base:null,typeMap:{"join-table":Ya,"query-table":ap,raster:gv,table:ly}};let $o=wF=class extends we{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new wF({fields:e,dataSource:t})}};p([tt({dataLayer:"data-layer"})],$o.prototype,"type",void 0),p([f({type:[xa],json:{write:!0}})],$o.prototype,"fields",void 0),p([f({types:H_t,json:{write:!0}})],$o.prototype,"dataSource",void 0),$o=wF=p([W("esri.layers.support.source.DataLayerSource")],$o),$o.from=Nr($o);let uy=class extends rr(we){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};p([f({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],uy.prototype,"onFields",void 0),p([f({type:String,json:{write:!0}})],uy.prototype,"operator",void 0),p([f({type:String,json:{write:!0}})],uy.prototype,"searchTerm",void 0),p([f({type:String,json:{write:!0}})],uy.prototype,"searchType",void 0),uy=p([W("esri.rest.support.FullTextSearch")],uy);const W_t=uy;var xF;const mX=new Pt({upperLeft:"upper-left",lowerLeft:"lower-left"});let cy=xF=class extends we{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new xF(se({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};p([f({type:jt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],cy.prototype,"extent",void 0),p([f({type:["view","edit"],json:{write:!0}})],cy.prototype,"mode",void 0),p([f({type:String,json:{read:mX.read,write:mX.write}})],cy.prototype,"originPosition",void 0),p([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],cy.prototype,"tolerance",void 0),cy=xF=p([W("esri.rest.support.QuantizationParameters")],cy);const NG=cy,LG=new Pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var SF;const yX=new Pt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Mu=SF=class extends we{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=se(e))}clone(){return new SF({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:se(this.statisticParameters)})}};p([f({type:Number,json:{write:!0}})],Mu.prototype,"maxPointCount",void 0),p([f({type:Number,json:{write:!0}})],Mu.prototype,"maxRecordCount",void 0),p([f({type:Number,json:{write:!0}})],Mu.prototype,"maxVertexCount",void 0),p([f({type:String,json:{write:!0}})],Mu.prototype,"onStatisticField",void 0),p([f({type:String,json:{write:!0}})],Mu.prototype,"outStatisticFieldName",void 0),p([f({type:String,json:{read:{source:"statisticType",reader:yX.read},write:{target:"statisticType",writer:yX.write}}})],Mu.prototype,"statisticType",void 0),p([f({type:Object})],Mu.prototype,"statisticParameters",void 0),p([Re("statisticParameters")],Mu.prototype,"writeStatisticParameters",null),Mu=SF=p([W("esri.rest.support.StatisticDefinition")],Mu);const PG=Mu;var QM;const Z_t=new Pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let kt=QM=class extends we{static from(e){return yn(QM,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const n in e){const i=e[n];Array.isArray(i)?r[n]=i.map(s=>s instanceof Date?s.getTime():s):i instanceof Date?r[n]=i.getTime():r[n]=i}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new QM(se({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};kt.MAX_MAX_RECORD_COUNT_FACTOR=5,p([f({json:{write:!0}})],kt.prototype,"aggregateIds",void 0),p([f({type:Boolean,json:{write:!0}})],kt.prototype,"cacheHint",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"compactGeometryEnabled",void 0),p([f({json:{write:!0}})],kt.prototype,"datumTransformation",void 0),p([ur("datumTransformation")],kt.prototype,"castDatumTransformation",null),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"defaultSpatialReferenceEnabled",void 0),p([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],kt.prototype,"distance",void 0),p([f({type:$o,json:{write:!0}})],kt.prototype,"dynamicDataSource",void 0),p([f({type:String,json:{write:!0}})],kt.prototype,"formatOf3DObjects",void 0),p([f({type:[W_t],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],kt.prototype,"fullText",void 0),p([f({type:String,json:{write:!0}})],kt.prototype,"gdbVersion",void 0),p([f({types:ji,json:{read:An,write:!0}})],kt.prototype,"geometry",void 0),p([f({type:Number,json:{write:!0}})],kt.prototype,"geometryPrecision",void 0),p([f({type:[String],json:{write:!0}})],kt.prototype,"groupByFieldsForStatistics",void 0),p([f({type:String,json:{write:!0}})],kt.prototype,"having",void 0),p([f({type:Date})],kt.prototype,"historicMoment",void 0),p([Re("historicMoment")],kt.prototype,"writeHistoricMoment",null),p([f({type:Number,json:{write:!0}})],kt.prototype,"maxAllowableOffset",void 0),p([f({type:Number,cast:e=>e<1?1:e>kt.MAX_MAX_RECORD_COUNT_FACTOR?kt.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],kt.prototype,"maxRecordCountFactor",void 0),p([f({type:["xyFootprint"],json:{write:!0}})],kt.prototype,"multipatchOption",void 0),p([f({type:Number,json:{read:{source:"resultRecordCount"}}})],kt.prototype,"num",void 0),p([f({json:{write:!0}})],kt.prototype,"objectIds",void 0),p([f({type:[String],json:{write:!0}})],kt.prototype,"orderByFields",void 0),p([f({type:[String],json:{write:!0}})],kt.prototype,"outFields",void 0),p([f({type:Ke,json:{name:"outSR",write:!0}})],kt.prototype,"outSpatialReference",void 0),p([f({type:[PG],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],kt.prototype,"outStatistics",void 0),p([f({json:{write:!0}})],kt.prototype,"parameterValues",void 0),p([Re("parameterValues")],kt.prototype,"writeParameterValues",null),p([f({type:it,json:{write:!0}})],kt.prototype,"pixelSize",void 0),p([f({type:NG,json:{write:!0}})],kt.prototype,"quantizationParameters",void 0),p([f({type:[Object],json:{write:!0}})],kt.prototype,"rangeValues",void 0),p([f({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],kt.prototype,"relationParameter",void 0),p([f({type:String,json:{write:!0}})],kt.prototype,"resultType",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"returnCentroid",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"returnDistinctValues",void 0),p([f({type:Boolean,json:{default:!0,write:!0}})],kt.prototype,"returnExceededLimitFeatures",void 0),p([f({type:Boolean,json:{write:!0}})],kt.prototype,"returnGeometry",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"returnQueryGeometry",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"returnM",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],kt.prototype,"returnZ",void 0),p([f({type:Ke,json:{write:!0}})],kt.prototype,"sourceSpatialReference",void 0),p([tt(LG,{ignoreUnknown:!1,name:"spatialRel"})],kt.prototype,"spatialRelationship",void 0),p([f({type:Number,json:{read:{source:"resultOffset"}}})],kt.prototype,"start",void 0),p([Re("start"),Re("num")],kt.prototype,"writeStart",null),p([f({type:String,json:{write:!0}})],kt.prototype,"sqlFormat",void 0),p([f({type:String,json:{write:!0}})],kt.prototype,"text",void 0),p([f({type:Ro,json:{write:!0}})],kt.prototype,"timeExtent",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],kt.prototype,"timeReferenceUnknownClient",void 0),p([tt(Z_t,{ignoreUnknown:!1}),f({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],kt.prototype,"units",void 0),p([f({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],kt.prototype,"where",void 0),p([Re("where")],kt.prototype,"writeWhere",null),kt=QM=p([W("esri.rest.support.Query")],kt);const ui=kt;var EF;const FL=new Pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),jL=new Pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let jc=EF=class extends we{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:n,timeExtent:i,objectIds:s,units:o,distance:a}=this;return new ui({geometry:se(r),objectIds:se(s),spatialRelationship:n,timeExtent:se(i),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:n,objectIds:i,units:s,distance:o}=this;return new EF({geometry:se(t),objectIds:se(i),spatialRelationship:r,timeExtent:se(n),where:e,units:s,distance:o})}};p([f({type:String,json:{write:!0}})],jc.prototype,"where",void 0),p([f({types:ji,json:{write:!0}})],jc.prototype,"geometry",void 0),p([f({type:FL.apiValues,json:{name:"spatialRel",read:{reader:FL.read},write:{allowNull:!1,writer:FL.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],jc.prototype,"spatialRelationship",void 0),p([f({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],jc.prototype,"distance",void 0),p([f({type:[Number],json:{write:!0}})],jc.prototype,"objectIds",void 0),p([f({type:jL.apiValues,json:{read:jL.read,write:{writer:jL.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],jc.prototype,"units",void 0),p([f({type:Ro,json:{write:!0}})],jc.prototype,"timeExtent",void 0),jc=EF=p([W("esri.layers.support.FeatureFilter")],jc);const DG=jc;var TF;const gX={read:{reader:RE},write:{writer:OE,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},vX={read:{reader:RE},write:{writer:OE,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},bX={name:"showExcludedLabels",default:!0};let hy=TF=class extends we{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t?.origin){if(r.filter){const n=Object.keys(r.filter);if(n.length>1||n[0]!=="where")return t.messages?.push(new ie("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return t.messages?.push(new ie("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new TF({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};p([f({type:DG,json:{write:{allowNull:!0,writer(e,t,r,n){const i=e?.write({},n);i&&Object.keys(i).length!==0?_i(r,i,t):_i(r,null,t)}}}})],hy.prototype,"filter",void 0),p([f({json:{read:RE,write:{writer:OE,allowNull:!0},origins:{"web-map":gX,"portal-item":gX}}})],hy.prototype,"includedEffect",void 0),p([f({json:{read:RE,write:{writer:OE,allowNull:!0},origins:{"web-map":vX,"portal-item":vX}}})],hy.prototype,"excludedEffect",void 0),p([f({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":bX,"portal-item":bX}}})],hy.prototype,"excludedLabelsVisible",void 0),hy=TF=p([W("esri.layers.support.FeatureEffect")],hy);const Dde=hy,wX={write:{allowNull:!0}},Fde={type:Dde,json:{origins:{"web-map":wX,"portal-item":wX}}},jde=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return p([f(Fde)],t.prototype,"featureEffect",void 0),t=p([W("esri.layers.mixins.FeatureEffectLayer")],t),t};var Rx;const Q5=Mn()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Ude=Q5.jsonValues.slice();use(Ude,"orthometric");const AS=Mn()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Cu=Rx=class extends we{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return Q5.write(e,t,r)}readHeightModel(e,t,r){return Q5.read(e)||(r?.messages&&r.messages.push(J_t(e,{context:r})),null)}readHeightUnit(e,t,r){return AS.read(e)||(r?.messages&&r.messages.push(_X(e,{context:r})),null)}readHeightUnitService(e,t,r){return vae(e)||AS.read(e)||(r?.messages&&r.messages.push(_X(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Rx({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=bae(t);return new Rx({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Rx;return t.read(e,{origin:"web-scene"}),t}};function _X(e,t){return new ea("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function J_t(e,t){return new ea("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}p([f({type:Q5.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Ude,default:"ellipsoidal"}}}})],Cu.prototype,"heightModel",void 0),p([Re("web-scene","heightModel")],Cu.prototype,"writeHeightModel",null),p([Ee(["web-scene","service"],"heightModel")],Cu.prototype,"readHeightModel",null),p([f({type:AS.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:AS.jsonValues,write:AS.write}}}})],Cu.prototype,"heightUnit",void 0),p([Ee("web-scene","heightUnit")],Cu.prototype,"readHeightUnit",null),p([Ee("service","heightUnit")],Cu.prototype,"readHeightUnitService",null),p([f({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Cu.prototype,"vertCRS",void 0),p([Ee("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Cu.prototype,"readVertCRS",null),Cu=Rx=p([W("esri.geometry.HeightModelInfo")],Cu);const h3=Cu;var IF;let Ox=IF=class extends we{constructor(e){super(e)}async collectRequiredFields(e,t){return ko(e,t,this.expression)}clone(){return new IF({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};p([f({type:String,json:{write:!0}})],Ox.prototype,"expression",void 0),p([f({type:String,json:{write:!0}})],Ox.prototype,"title",void 0),Ox=IF=p([W("esri.symbols.support.FeatureExpressionInfo")],Ox);const xX=Ox;function Y_t(e){return 1/(PR[e]||1)}function X_t(){const e=Object.keys(PR);return vB(e,"decimal-degrees"),e.sort(),e}const Q_t=X_t();var AF;const NI=Mn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),SX=new Pt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let lp=AF=class extends we{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,n){t[r]=e.write({},n),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new AF({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Rse(this.featureExpressionInfo,e.featureExpressionInfo)}};p([f({type:xX,json:{write:!0}})],lp.prototype,"featureExpressionInfo",void 0),p([Ee("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],lp.prototype,"readFeatureExpressionInfo",null),p([Re("featureExpressionInfo",{featureExpressionInfo:{type:xX},"featureExpression.value":{type:[0]}})],lp.prototype,"writeFeatureExpressionInfo",null),p([f({type:NI.apiValues,nonNullable:!0,json:{type:NI.jsonValues,read:NI.read,write:{writer:NI.write,isRequired:!0}}})],lp.prototype,"mode",null),p([f({type:Number,json:{write:!0}})],lp.prototype,"offset",void 0),p([f({type:Q_t,json:{type:String,read:SX.read,write:SX.write}})],lp.prototype,"unit",null),lp=AF=p([W("esri.symbols.support.ElevationInfo")],lp);const FG=lp;let vv=class extends we{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};p([f({type:String,json:{write:!0}})],vv.prototype,"description",void 0),p([f({type:String,json:{write:!0}})],vv.prototype,"label",void 0),p([f()],vv.prototype,"type",void 0),vv=p([W("esri.tables.elements.AttributeTableElement")],vv);const yw=vv;var MF;let Nx=MF=class extends yw{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new MF({description:this.description,displayType:this.displayType,label:this.label})}};p([f({type:["auto"],json:{write:!0}})],Nx.prototype,"displayType",void 0),p([f({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Nx.prototype,"type",void 0),Nx=MF=p([W("esri.tables.elements.AttributeTableAttachmentElement")],Nx);const EX=Nx;var CF;let Lx=CF=class extends yw{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new CF({description:this.description,fieldName:this.fieldName,label:this.label})}};p([f({type:String,json:{write:!0}})],Lx.prototype,"fieldName",void 0),p([f({type:String,json:{read:!1,write:!0}})],Lx.prototype,"type",void 0),Lx=CF=p([W("esri.tables.elements.AttributeTableFieldElement")],Lx);const TX=Lx;var kF;let Px=kF=class extends yw{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new kF({description:this.description,label:this.label,relationshipId:this.relationshipId})}};p([f({type:Number,json:{write:!0}})],Px.prototype,"relationshipId",void 0),p([f({type:["relationship"],json:{read:!1,write:!0}})],Px.prototype,"type",void 0),Px=kF=p([W("esri.tables.elements.AttributeTableRelationshipElement")],Px);const IX=Px;function Bde(e){return{typesWithGroup:{base:yw,key:"type",typeMap:{attachment:EX,field:TX,group:e,relationship:IX}},typesWithoutGroup:{base:yw,key:"type",typeMap:{attachment:EX,field:TX,relationship:IX}}}}function Vde(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>n[i.type]).map(i=>n[i.type].fromJSON(i))}function Gde(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(i=>n[i.type]).map(i=>i.toJSON())}function zde(e,t,r=!0){return e?e.map(n=>eu(r?t.typesWithGroup:t.typesWithoutGroup,n)):null}var RF;let Lp=RF=class extends yw{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return zde(e,UL,!1)}readElements(e,t){return Vde(t.attributeTableElements,UL,!1)}writeElements(e,t){t.attributeTableElements=Gde(e,UL,!1)}clone(){return new RF({description:this.description,elements:se(this.elements),label:this.label})}};p([f({json:{write:!0}})],Lp.prototype,"elements",void 0),p([ur("elements")],Lp.prototype,"castElements",null),p([Ee("elements",["attributeTableElements"])],Lp.prototype,"readElements",null),p([Re("elements")],Lp.prototype,"writeElements",null),p([f({type:String,json:{read:!1,write:!0}})],Lp.prototype,"type",void 0),Lp=RF=p([W("esri.tables.elements.AttributeTableGroupElement")],Lp);const UL=Bde(Lp),K_t=Lp;var OF;const BL=Bde(K_t);let wf=OF=class extends we{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return zde(e,BL)}readElements(e,t){return Vde(t.attributeTableElements,BL)}writeElements(e,t){t.attributeTableElements=Gde(e,BL)}clone(){return new OF({elements:se(this.elements),orderByFields:this.orderByFields})}};p([f({json:{write:!0}})],wf.prototype,"elements",void 0),p([ur("elements")],wf.prototype,"castElements",null),p([Ee("elements",["attributeTableElements"])],wf.prototype,"readElements",null),p([Re("elements")],wf.prototype,"writeElements",null),p([f({type:[Object],json:{write:!0}})],wf.prototype,"orderByFields",void 0),wf=OF=p([W("esri.tables.AttributeTableTemplate")],wf);const $de=wf,qde={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:bs}}},A_={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},tO={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:bs}}},M_={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Mm}}},rO={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:bs}}},Hde={value:null,type:FG,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:bs}}};function e2t(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Wde={write:{enabled:!0,layerContainerTypes:bs},read:!0},NE={type:Number,json:{origins:{"web-document":Wde,"portal-item":{write:!0}}}},Zde={...NE,json:{...NE.json,origins:{"web-document":{...Wde,write:{enabled:!0,layerContainerTypes:bs,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition?.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?dw(t.layerDefinition.drawingInfo.transparency):void 0:dw(t.drawingInfo.transparency)}}},t2t={type:jt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=jt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Ke.fromJSON(t.spatialReference)),r}}}},read:!1}},jG={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},Jde={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:bs}}},name:"layerDefinition.minScale",write:!0}},Yde={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:bs}}},name:"layerDefinition.maxScale",write:!0}},Xde={json:{write:{ignoreOrigin:!0,layerContainerTypes:bs},origins:{"web-map":{read:!1,write:!1}}}},Qde={type:$de,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let up=class extends rr(we){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};p([f()],up.prototype,"creatorField",void 0),p([f()],up.prototype,"creationDateField",void 0),p([f()],up.prototype,"editorField",void 0),p([f()],up.prototype,"editDateField",void 0),p([f()],up.prototype,"realm",void 0),p([f(Dg("dateFieldsTimeReference",!0))],up.prototype,"timeZone",void 0),up=p([W("esri.layers.support.EditFieldsInfo")],up);const r2t=up;let Yc=class extends rr(we){constructor(e){super(e)}};p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"name",void 0),p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"fields",void 0),p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"isAscending",void 0),p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"indexType",void 0),p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"isUnique",void 0),p([f({constructOnly:!0,json:{write:!0}})],Yc.prototype,"description",void 0),Yc=p([W("esri.layers.support.FeatureIndex")],Yc);async function n2t(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=Kde(e));const n=i2t(e),i=e.capabilities.query.supportsPagination;t.start=0,t.num=n;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(s==null?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!i||!o.exceededTransferLimit)break;t.start+=n}return s}function i2t(e){return Kde(e)*s2t(e)}function s2t(e){return e.capabilities.query.maxRecordCount||2e3}function Kde(e){return e.capabilities.query.supportsMaxRecordCountFactor?ui.MAX_MAX_RECORD_COUNT_FACTOR:1}var NF;let ps=NF=class extends we{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new NF(se({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};p([f({type:[String],json:{write:!0}})],ps.prototype,"attachmentTypes",void 0),p([f({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],ps.prototype,"attachmentsWhere",void 0),p([f({type:Boolean,json:{write:!0}})],ps.prototype,"cacheHint",void 0),p([f({type:[String],json:{write:!0}})],ps.prototype,"keywords",void 0),p([f({type:[String],json:{write:!0}})],ps.prototype,"globalIds",void 0),p([f({json:{write:!0}})],ps.prototype,"name",void 0),p([f({type:Number,json:{read:{source:"resultRecordCount"}}})],ps.prototype,"num",void 0),p([f({type:[Number],json:{write:!0}})],ps.prototype,"objectIds",void 0),p([f({type:Boolean,json:{default:!1,write:!0}})],ps.prototype,"returnMetadata",void 0),p([f({type:[Number],json:{write:!0}})],ps.prototype,"size",void 0),p([f({type:Number,json:{read:{source:"resultOffset"}}})],ps.prototype,"start",void 0),p([Re("start"),Re("num")],ps.prototype,"writeStart",null),p([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],ps.prototype,"where",void 0),ps=NF=p([W("esri.rest.support.AttachmentQuery")],ps),ps.from=Nr(ps);const UG=ps;var LF;let Nn=LF=class extends we{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new LF(se({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};p([f({type:Boolean,json:{write:!0}})],Nn.prototype,"cacheHint",void 0),p([f({type:$o,json:{write:!0}})],Nn.prototype,"dynamicDataSource",void 0),p([f({type:String,json:{write:!0}})],Nn.prototype,"gdbVersion",void 0),p([f({type:Number,json:{write:!0}})],Nn.prototype,"geometryPrecision",void 0),p([f({type:Date})],Nn.prototype,"historicMoment",void 0),p([Re("historicMoment")],Nn.prototype,"_writeHistoricMoment",null),p([f({type:Number,json:{write:!0}})],Nn.prototype,"maxAllowableOffset",void 0),p([f({json:{write:!0}})],Nn.prototype,"objectIds",void 0),p([f({type:[String],json:{write:!0}})],Nn.prototype,"orderByFields",void 0),p([f({type:[String],json:{write:!0}})],Nn.prototype,"outFields",void 0),p([f({type:Ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Nn.prototype,"outSpatialReference",void 0),p([f({json:{write:!0}})],Nn.prototype,"relationshipId",void 0),p([f({type:Number,json:{read:{source:"resultOffset"}}})],Nn.prototype,"start",void 0),p([Re("start"),Re("num")],Nn.prototype,"writeStart",null),p([f({type:Number,json:{read:{source:"resultRecordCount"}}})],Nn.prototype,"num",void 0),p([f({json:{write:!0}})],Nn.prototype,"returnGeometry",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Nn.prototype,"returnM",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Nn.prototype,"returnZ",void 0),p([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Nn.prototype,"where",void 0),Nn=LF=p([W("esri.rest.support.RelationshipQuery")],Nn),Nn.from=Nr(Nn);const nO=Nn,AX=Object.freeze(Object.defineProperty({__proto__:null,default:nO},Symbol.toStringTag,{value:"Module"})),PF=new Pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function efe(e,t,r,n){const i=await e0(e);if(await BG(e,t,n),!i.addAttachment)throw new ie(n,"Layer source does not support addAttachment capability");return i.addAttachment(t,r)}function BG(e,t,r){const{attributes:n}=t,{objectIdField:i}=e;return e.capabilities?.data?.supportsAttachment?t?n?i&&n[i]?Promise.resolve():Promise.reject(new ie(r,`feature is missing the identifying attribute ${i}`)):Promise.reject(new ie(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new ie(r,"A feature is required to add/delete/update attachments")):Promise.reject(new ie(r,"this layer doesn't support attachments"))}async function tfe(e,t,r,n,i){const s=await e0(e);if(await BG(e,t,i),!s.updateAttachment)throw new ie(i,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,n)}async function rfe(e,t,r){const{applyEdits:n}=await Me(()=>import("./editingSupport-tOQy13o6-eA48Jl56.js"),__vite__mapDeps([133,1,2]),import.meta.url),i=await e.load();let s=r;return i.type==="feature"&&i.infoFor3D&&t.deleteFeatures!=null&&i.globalIdField!=null&&(s={...s,globalIdToObjectId:await wfe(i,t.deleteFeatures,i.globalIdField)}),n(i,i.source,t,r)}async function o2t(e,t,r){const{uploadAssets:n}=await Me(()=>import("./editingSupport-tOQy13o6-eA48Jl56.js"),__vite__mapDeps([133,1,2]),import.meta.url),i=await e.load();return n(i,i.source,t,r)}async function nfe(e,t,r,n){const i=await e0(e);if(await BG(e,t,n),!i.deleteAttachments)throw new ie(n,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(t,r)}async function ife(e,t,r){const n=(await e.load({signal:t?.signal})).source;if(!n.fetchRecomputedExtents)throw new ie(r,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(t)}async function sfe(e,t,r,n){t=UG.from(t),await e.load();const i=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new ie(n,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:c,start:h,where:d}=t;if(!s?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||c?.length>0||u||h||d))throw new ie(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a?.length||l?.length||d))throw new ie(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!i.queryAttachments)throw new ie(n,"Layer source does not support queryAttachments capability",t);return i.queryAttachments(t)}async function ofe(e,t,r,n){const i=await e0(e);if(!i.queryObjectIds)throw new ie(n,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(ui.from(t)??e.createQuery(),r)}async function afe(e,t,r,n){const i=await e0(e);if(!i.queryFeatureCount)throw new ie(n,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(ui.from(t)??e.createQuery(),r)}async function lfe(e,t,r,n){const i=await e0(e);if(!i.queryExtent)throw new ie(n,"Layer source does not support queryExtent capability");return i.queryExtent(ui.from(t)??e.createQuery(),r)}async function ufe(e,t,r,n){const i=await e0(e);if(!i.queryRelatedFeatures)throw new ie(n,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(nO.from(t),r)}async function cfe(e,t,r,n){const i=await e0(e);if(!i.queryRelatedFeaturesCount)throw new ie(n,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(nO.from(t),r)}async function hfe(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:n}=await t.refresh();if(n!=null&&(e.sourceJSON={...e.sourceJSON,...n},e.read(n,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await _V(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function pfe(e){const t=new ui,r=e.capabilities?.data,n=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,n&&(t.compactGeometryEnabled=n.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:i,timeExtent:s}=e;return t.timeExtent=i!=null&&s!=null?s.offset(-i.value,i.unit):s||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function dfe(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const n of r)if(n.type==="esriFieldTypeGlobalID")return n.name}}function ffe(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const n of r)if(n.type==="esriFieldTypeOID")return n.name}}function a2t(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function mfe(e,t){const{subtypes:r,subtypeField:n}=e;if(!t?.attributes||!r?.length||!n)return null;const i=t.attributes[n];return i==null?null:r.find(s=>s.code===i)}function yfe(e,t){const{fieldsIndex:r,subtypeField:n}=e,{name:i,type:s}=r.get(t)??{};if(!i)return null;if((n&&r.get(n)?.name)===i&&e.subtypes?.length){const o=e.subtypes.map(a=>new Hy({code:gfe(a.code,s),name:a.name}));if(o?.length)return new HR({codedValues:o})}return null}function l2t(e,t){const{fieldsIndex:r}=e,{name:n,type:i}=r.get(t)??{};if(!n)return null;if(("typeIdField"in e?r.get(e.typeIdField)?.name:null)===n&&"types"in e&&e.types?.length){const s=e.types.map(o=>new Hy({code:gfe(o.id,i),name:o.name}));return new HR({codedValues:s})}return null}function gfe(e,t){return t?LV({type:t})&&typeof e=="number"?`${e}`:w0t({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function e0(e){return(await e.load()).source}async function u2t(e,t){if(!Er||Er.findCredential(e))return;let r;try{const n=await Uae(e,t);n&&(r=await Er.checkSignInStatus(`${n}/sharing`))}catch{}if(r)try{const n=t!=null?t.signal:null;await Er.getCredential(e,{signal:n})}catch{}}async function vfe(e,t,r){const n=e.parsedUrl?.path;n&&e.authenticationTriggerEvent===t&&await u2t(n,r)}function bfe(e){return!KM(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const VL=t1({types:Kce});function iO(e,t){if(e.defaultSymbol)return e.types?.length?new f1({defaultSymbol:VL(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:VL(r.symbol,r,t)}))}):new Xm({symbol:VL(e.defaultSymbol,e,t)})}function c2t(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const r=e.editingInfo?.lastEditDate?.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function wfe(e,t,r){if(t==null)return null;const n=[],{objectIdField:i}=e;if(t.forEach(u=>{let c=null;if("attributes"in u){const{attributes:h}=u;c={globalId:h[r],objectId:h[i]!=null&&h[i]!==-1?h[i]:null}}else c={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};c.globalId!=null&&(c.objectId!=null&&c.objectId!==-1||n.push(c.globalId))}),n.length===0)return null;const s=e.createQuery();s.where=n.map(u=>`${r}='${u}'`).join(" OR "),s.returnGeometry=!1,s.outFields=[i,r],s.cacheHint=!1;const o=await eae(n2t(e,s));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const c=u.attributes[r],h=u.attributes[i];c!=null&&h!=null&&h!==-1&&a.set(Cde(c),h)}return a}function VG(e,t,r){if(!t||!r||!e)return null;const n=r.getAttribute(t);return n==null?null:e.find(i=>{const{id:s}=i;return s!=null&&s.toString()===n.toString()})??null}function KM(e){return e.sourceJSON?.isMultiServicesView||h2t(e)}function h2t(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(",").map(t=>t.trim()).includes("map")}function p2t(e,t,r){const n=t?.queryBins;if(!n)throw new ie(r,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!n.supportsAutoInterval)throw new ie(r,"Layer source does not support auto-interval binning");break;case"date":if(!n.supportsDate)throw new ie(r,"Layer source does not support date binning");break;case"fixed-boundaries":if(!n.supportsFixedBoundaries)throw new ie(r,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!n.supportsFixedInterval)throw new ie(r,"Layer source does not support fixed-interval binning")}const i=n?.supportedStatistics;if(e.outStatistics&&i){const s=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=s.get(o);if(a&&!i[a])throw new ie(r,`Layer source does not support ${o} statistic type`)}}}let bv=class extends rr(we){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};p([f({type:String,json:{read:{source:"shapeAreaFieldName"}}})],bv.prototype,"shapeAreaField",void 0),p([f({type:String,json:{read:{source:"shapeLengthFieldName"}}})],bv.prototype,"shapeLengthField",void 0),p([f({type:String,json:{read:e=>_E.read(e)||yd.read(e)}})],bv.prototype,"units",void 0),bv=p([W("esri.layers.support.GeometryFieldsInfo")],bv);const d2t=bv;var DF;let wv=DF=class extends we{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new st}clone(){return new DF({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};p([f({type:String,json:{write:!0}})],wv.prototype,"floorField",void 0),p([f({json:{read:!1,write:!1}})],wv.prototype,"viewAllMode",void 0),p([f({json:{read:!1,write:!1}})],wv.prototype,"viewAllLevelIds",void 0),wv=DF=p([W("esri.layers.support.LayerFloorInfo")],wv);const GG=wv,MX=new Pt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),CX=new Pt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ml=class extends rr(we){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};p([f({json:{read:MX.read,write:MX.write}})],Ml.prototype,"cardinality",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"composite",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"id",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"keyField",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"keyFieldInRelationshipTable",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"name",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"relatedTableId",void 0),p([f({json:{read:!0,write:!0}})],Ml.prototype,"relationshipTableId",void 0),p([f({json:{read:CX.read,write:CX.write}})],Ml.prototype,"role",void 0),Ml=p([W("esri.layers.support.Relationship")],Ml);const _fe=Ml;function bt(e,t,r){return!!xfe(e,t,r)}function Dx(e,t,r){return xfe(e,t,r)}function xfe(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const f2t={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function m2t(e){const t=e?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function p3(e,t){return!!e?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(t.toLowerCase())}function y2t(e){const t=e?.supportedStatisticTypes?.map(r=>r.toLowerCase());return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function zG(e,t){return{analytics:g2t(e),attachment:v2t(e),data:b2t(e),metadata:w2t(e),operations:_2t(e.capabilities,e,t),query:x2t(e,t),queryBins:T2t(e),queryRelated:S2t(e),queryTopFeatures:E2t(e),editing:I2t(e)}}function g2t(e){return{supportsCacheHint:p3(e.advancedQueryCapabilities,"queryAnalytics")}}function v2t(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p3(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:bt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(n=>{const i=f2t[n.name];i&&(r[i]=!!n.isEnabled)}),r}function b2t(e){return{isVersioned:bt(e,"isDataVersioned",!1),isBranchVersioned:bt(e,"isDataBranchVersioned",!1),supportsAttachment:bt(e,"hasAttachments",!1),supportsM:bt(e,"hasM",!1),supportsZ:bt(e,"hasZ",!1)}}function w2t(e){return{supportsAdvancedFieldProperties:bt(e,"supportsFieldDescriptionProperty",!1)}}function _2t(e,t,r){const n=e?e.toLowerCase().split(",").map(d=>d.trim()):[],i=r?Ah(r):null,s=n.includes(i!=null&&i.serverType==="MapServer"?"data":"query"),o=n.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&n.includes("create"),l=o&&n.includes("delete"),u=o&&n.includes("update");const c=n.includes("changetracking"),h=t.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:bt(t,"supportsCalculate",!1),supportsTruncate:bt(t,"supportsTruncate",!1),supportsValidateSql:bt(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:c,supportsQuery:s,supportsQueryAnalytics:bt(h,"supportsQueryAnalytic",!1),supportsQueryAttachments:bt(h,"supportsQueryAttachments",!1),supportsQueryBins:bt(h,"supportsQueryBins",!1),supportsQueryTopFeatures:bt(h,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:bt(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:bt(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:bt(t,"supportsAsyncConvert3D",!1)}}function x2t(e,t){const r=e.advancedQueryCapabilities,n=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,s=e.currentVersion,o=t?.includes("MapServer"),a=!o||s>=xe("mapserver-pbf-version-support"),l=XR(t),u=new Set((e.supportedQueryFormats??"").split(",").map(c=>c.toLowerCase().trim()));return{maxRecordCount:Dx(e,"maxRecordCount",void 0),maxRecordCountFactor:Dx(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:Dx(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:m2t(r),supportsCacheHint:bt(r,"supportsQueryWithCacheHint",!1)||p3(r,"query"),supportsCentroid:bt(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsDefaultSpatialReference:bt(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:bt(r,"supportsDisjointSpatialRel",!1),supportsDistance:bt(r,"supportsQueryWithDistance",!1),supportsDistinct:bt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:bt(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&u.has("pbf"),supportsFullTextSearch:bt(r,"supportsFullTextSearch",!1),supportsGeometryProperties:bt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:bt(r,"supportsHavingClause",!1),supportsHistoricMoment:bt(i,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:bt(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:bt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:bt(r,"supportsPagination",!1),supportsPercentileStatistics:bt(r,"supportsPercentileStatistics",!1),supportsQuantization:bt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:bt(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:bt(n,"allowAnonymousToQuery",!0),supportsQueryByOthers:bt(n,"allowOthersToQuery",!0),supportsQueryGeometry:bt(e,"supportsReturningQueryGeometry",!1),supportsResultType:bt(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:bt(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:bt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:bt(e,"useStandardizedQueries",!1),supportsStatistics:bt(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:bt(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:Dx(e,"tileMaxRecordCount",void 0)}}function S2t(e){const t=e.advancedQueryCapabilities,r=bt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:bt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p3(t,"queryRelated")}}function E2t(e){return{supportsCacheHint:p3(e.advancedQueryCapabilities,"queryTopFilter")}}function T2t(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:bt(t,"supportsDateBin",!1),supportsFixedInterval:bt(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:bt(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:bt(t,"supportsFixedBoundariesBin",!1),supportedStatistics:y2t(t)}}function I2t(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:bt(e,"allowGeometryUpdates",!0),supportsGlobalId:bt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:bt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:bt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:bt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:bt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:bt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:bt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:bt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:bt(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:bt(r,"supportsAsyncApplyEdits",!1),zDefault:Dx(e,"zDefault",void 0)}}function A2t(e){return{operations:{supportsAppend:bt(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:bt(e,"supportsExportClip",!1),supportsExportFrameset:bt(e,"supportsExportFrameset",!1),supportsMensuration:bt(e,"supportsMensuration",!1),supportsUpdate:bt(e,"supportsUpdate",!1)}}}let cp=class extends rr(we){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const r of Object.keys(e))t[r]=WR(e[r]);return t}writeDomains(e,t){if(!e)return;const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());t.domains=r}};p([f({type:Number,json:{write:!0}})],cp.prototype,"code",void 0),p([f({type:Object,json:{write:!0}})],cp.prototype,"defaultValues",void 0),p([f({json:{write:!0}})],cp.prototype,"domains",void 0),p([Ee("domains")],cp.prototype,"readDomains",null),p([Re("domains")],cp.prototype,"writeDomains",null),p([f({type:String,json:{write:!0}})],cp.prototype,"name",void 0),cp=p([W("esri.layers.support.Subtype")],cp);const M2t=cp,Sfe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(st.ofType(Yc)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ke.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:i,operations:s,editing:o}=r;if(!i.supportsQueryByOthers||!i.supportsQueryByAnonymous||s.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(this.serviceDefinitionExpression?.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(c2t(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const n=this.editFieldsInfo;return(n?.creatorField||n?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,n){return zG(n,this.url)}readEditingInfo(r,n){const{editingInfo:i}=n;return i?{lastEditDate:i.lastEditDate!=null?new Date(i.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const n=se(r),{operations:i,editing:s}=n;return KM(this)?(this.userHasUpdateItemPrivileges&&(i.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(i.supportsAdd=i.supportsDelete=i.supportsEditing=i.supportsQuery=i.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&i.supportsEditing&&(i.supportsAdd=i.supportsDelete=i.supportsUpdate=s.supportsGeometryUpdate=!0),n)}readGlobalIdFieldFromService(r,n){return dfe(n)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||KM(this))return!1;const{operations:n,editing:i}=r;return n.supportsEditing&&!(n.supportsAdd&&n.supportsDelete&&n.supportsUpdate&&i.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:n,editing:i}=r;return KM(this)?!n.supportsQuery:!(n.supportsAdd&&n.supportsDelete&&n.supportsEditing&&n.supportsQuery&&n.supportsUpdate&&i.supportsDeleteByOthers&&i.supportsGeometryUpdate&&i.supportsUpdateByOthers)}readIsTableFromService(r,n){return n.type==="Table"}readMaxScale(r,n){return n.effectiveMaxScale||r||0}readMinScale(r,n){return n.effectiveMinScale||r||0}readObjectIdFieldFromService(r,n){return ffe(n)}readServiceDefinitionExpression(r,n){return n.definitionQuery||n.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const n=Hpe({layer:this,url:r,nonStandardUrlAllowed:!0,logger:Pe.getLogger(this)});this._set("url",n.url),n.layerId!=null&&this._set("layerId",n.layerId)}writeUrl(r,n,i,s){Wpe(this,r,null,n,s)}readVersion(r,n){return a2t(n)}};return p([f({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),p([f({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),p([f({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),p([Ee("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),p([f(Dg("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),p([f({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),p([f({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),p([f({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),p([f({readOnly:!0,type:r2t})],t.prototype,"editFieldsInfo",void 0),p([f({readOnly:!0})],t.prototype,"editingInfo",void 0),p([Ee("editingInfo")],t.prototype,"readEditingInfo",null),p([f({readOnly:!0})],t.prototype,"effectiveCapabilities",null),p([f((()=>{const r=se(Hde),n=r.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),p([f({type:GG,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:bs}}}}})],t.prototype,"floorInfo",void 0),p([f({type:jt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),p([f()],t.prototype,"gdbVersion",void 0),p([f({readOnly:!0,type:d2t,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),p([f({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:PF.read}}}})],t.prototype,"geometryType",void 0),p([f({type:String})],t.prototype,"globalIdField",void 0),p([Ee("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),p([f({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),p([f({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),p([f({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),p([f({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),p([f({readOnly:!0,type:h3})],t.prototype,"heightModelInfo",void 0),p([f({type:Date})],t.prototype,"historicMoment",void 0),p([f({type:st.ofType(Yc),readOnly:!0})],t.prototype,"indexes",void 0),p([f({readOnly:!0})],t.prototype,"isTable",void 0),p([Ee("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),p([f({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),p([f(Yde)],t.prototype,"maxScale",void 0),p([Ee("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),p([f(Jde)],t.prototype,"minScale",void 0),p([Ee("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),p([f({type:String})],t.prototype,"objectIdField",void 0),p([Ee("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),p([f(Dg("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),p([f({type:[_fe],readOnly:!0})],t.prototype,"relationships",void 0),p([f({type:Boolean})],t.prototype,"returnM",void 0),p([f({type:Boolean})],t.prototype,"returnZ",void 0),p([f({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),p([f({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),p([Ee("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),p([f({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),p([f()],t.prototype,"sourceJSON",void 0),p([f({type:Ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),p([f({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),p([f({type:[M2t],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),p([f({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),p([f(M_)],t.prototype,"url",null),p([Re("url")],t.prototype,"writeUrl",null),p([f({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),p([Ee("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=p([W("esri.layers.mixins.FeatureLayerBase")],t),t};let _v=class extends rr(we){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};p([f({type:String,json:{write:!0}})],_v.prototype,"expression",void 0),p([f({type:String,json:{write:!0}})],_v.prototype,"title",void 0),p([f({type:String,json:{write:!0}})],_v.prototype,"returnType",void 0),_v=p([W("esri.layers.support.ExpressionInfo")],_v);const $G=_v;var FF;let hp=FF=class extends we{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new FF({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:se(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};p([f({type:Boolean,json:{write:!0}})],hp.prototype,"isAutoGenerated",void 0),p([f({type:String,json:{write:!0}})],hp.prototype,"name",void 0),p([f({type:String,json:{write:!0}})],hp.prototype,"alias",void 0),p([f({type:String,json:{write:!0}})],hp.prototype,"onStatisticField",void 0),p([f({type:$G,json:{write:!0}})],hp.prototype,"onStatisticExpression",void 0),p([f({type:String,json:{write:!0}})],hp.prototype,"statisticType",void 0),hp=FF=p([W("esri.layers.support.AggregateField")],hp);const Bg=hp;let sd=class extends we{constructor(){super(...arguments),this.type=null}};p([f({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],sd.prototype,"type",void 0),sd=p([W("esri.layers.support.FeatureReduction")],sd);const qG="__begin__",HG="__end__",C2t=new RegExp(qG,"ig"),k2t=new RegExp(HG,"ig"),kX=new RegExp("^"+qG,"i"),RX=new RegExp(HG+"$","i"),K5='"',R2t=K5+" + ",O2t=" + "+K5;function Efe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function N2t(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function WG(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=Efe(e.labelExpression),t.type="conventional"),t}function L2t(e){const t=WG(e);if(!t)return null;switch(t.type){case"conventional":return jF(t.expression);case"arcade":return t.expression}return null}function P2t(e){const t=WG(e);if(!t)return null;switch(t.type){case"conventional":return F2t(t.expression);case"arcade":return Tfe(t.expression)}return null}function jF(e){let t;return e?(t=CT(e,r=>qG+'$feature["'+r+'"]'+HG),t=kX.test(t)?t.replace(kX,""):K5+t,t=RX.test(t)?t.replace(RX,""):t+K5,t=t.replaceAll(C2t,R2t).replaceAll(k2t,O2t)):t='""',t}const D2t=/^\s*\{([^}]+)\}\s*$/i;function F2t(e){return e?.match(D2t)?.[1].trim()||null}const j2t=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,U2t=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,B2t=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function Tfe(e){if(!e)return null;let t=j2t.exec(e)||U2t.exec(e);return t?t[1]||t[3]:(t=B2t.exec(e),t?t[2]:null)}var UF;let _f=UF=class extends we{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?jF(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=jF(this.value)),e!=null&&(t[r]=e)}clone(){return new UF({expression:this.expression,title:this.title,value:this.value})}};p([f({type:String,json:{write:{writerEnsuresNonNull:!0}}})],_f.prototype,"expression",void 0),p([Ee("expression",["expression","value"])],_f.prototype,"readExpression",null),p([Re("expression")],_f.prototype,"writeExpression",null),p([f({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],_f.prototype,"title",void 0),p([f({json:{read:!1,write:!1}})],_f.prototype,"value",void 0),_f=UF=p([W("esri.layers.support.LabelExpressionInfo")],_f);const Ife=_f;var BF;const LI=new Pt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function PI(e,t,r){return{enabled:!p6(r?.layer)}}function Afe(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function V2t(e){return e?.type==="map-image"}function Mfe(e){return!!V2t(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function G2t(e){return Afe(e)||Mfe(e?.layer)}let ei=BF=class extends we{static evaluateWhere(e,t){const r=(n,i,s)=>{switch(i){case"=":return n==s;case"<>":return n!=s;case">":return n>s;case">=":return n>=s;case"<":return n<s;case"<=":return n<=s}return!1};try{if(e==null)return!0;const n=e.split(" ");if(n.length===3)return r(t[n[0]],n[1],n[2]);if(n.length===7){const i=r(t[n[0]],n[1],n[2]),s=n[3],o=r(t[n[4]],n[5],n[6]);switch(s){case"AND":return i&&o;case"OR":return i||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Ggt,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=N2t(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=Tfe(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,n){if(e==null&&this.labelExpression!=null&&Afe(n))e=new Ife({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(n);i.expression&&(t[r]=i)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return WG(this)}getLabelExpressionArcade(){return L2t(this)}getLabelExpressionSingleField(){return P2t(this)}hash(){return JSON.stringify(this)}clone(){return new BF({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:se(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:se(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};p([f({type:String,json:{write:!0}})],ei.prototype,"name",void 0),p([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:PI}}}}})],ei.prototype,"allowOverrun",void 0),p([f({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:PI}}}}})],ei.prototype,"deconflictionStrategy",void 0),p([f({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&r?.origin==="service"&&Mfe(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],ei.prototype,"labelExpression",void 0),p([Ee("labelExpression")],ei.prototype,"readLabelExpression",null),p([Re("labelExpression")],ei.prototype,"writeLabelExpression",null),p([f({type:Ife,json:{write:{overridePolicy:(e,t,r)=>G2t(r)?{allowNull:!0}:{enabled:!1}}}})],ei.prototype,"labelExpressionInfo",void 0),p([Re("labelExpressionInfo")],ei.prototype,"writeLabelExpressionInfo",null),p([f({type:LI.apiValues,json:{type:LI.jsonValues,read:LI.read,write:LI.write}})],ei.prototype,"labelPlacement",void 0),p([f({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ei.prototype,"labelPosition",void 0),p([f({type:Number})],ei.prototype,"maxScale",void 0),p([Re("maxScale")],ei.prototype,"writeMaxScale",null),p([f({type:Number})],ei.prototype,"minScale",void 0),p([Re("minScale")],ei.prototype,"writeMinScale",null),p([f({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:PI}}}}})],ei.prototype,"repeatLabel",void 0),p([f({type:Number,cast:lr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:PI}}}}})],ei.prototype,"repeatLabelDistance",void 0),p([f({types:rgt,json:{origins:{"web-scene":{types:ngt,write:jJ,default:null}},write:jJ,default:null}})],ei.prototype,"symbol",void 0),p([f({type:Boolean,json:{write:!0}})],ei.prototype,"useCodedValues",void 0),p([f({type:String,json:{write:!0}})],ei.prototype,"where",void 0),ei=BF=p([W("esri.layers.support.LabelClass")],ei);const C_=ei;var VF;let to=VF=class extends sd{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=lr("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const n=e.filter(i=>i.statisticType!=="avg_angle").map(i=>i.toJSON());_i(r,n,t)}readRenderer(e,t,r){const n=t.drawingInfo?.renderer;return n?mw(n,t,r)??void 0:iO(t,r)}clone(){return new VF({fields:se(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate),renderer:se(this.renderer),binType:se(this.binType),size:this.size})}};p([tt({binning:"binning"})],to.prototype,"type",void 0),p([tt({geohash:"geohash",square:"square"}),f({type:["geohash","square"]})],to.prototype,"binType",void 0),p([f({type:Number,json:{write:!0}})],to.prototype,"fixedBinLevel",void 0),p([f({type:[C_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],to.prototype,"labelingInfo",void 0),p([f(tO)],to.prototype,"labelsVisible",void 0),p([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],to.prototype,"maxScale",void 0),p([f(A_)],to.prototype,"popupEnabled",void 0),p([f({type:Ad,json:{name:"popupInfo",write:!0}})],to.prototype,"popupTemplate",void 0),p([f({cast:e=>e==="auto"?e:Ds(lr(e))})],to.prototype,"size",void 0),p([f({type:[Bg],json:{write:!0}})],to.prototype,"fields",void 0),p([Re("fields")],to.prototype,"writeFields",null),p([f({types:T_,json:{write:{target:"drawingInfo.renderer"}}})],to.prototype,"renderer",void 0),p([Ee("renderer",["drawingInfo.renderer"])],to.prototype,"readRenderer",null),to=VF=p([W("esri.layers.support.FeatureReductionBinning")],to);const Cfe=to;var GF;function OX(e){return e.type==="simple"&&!e.visualVariables?.length}let Ci=GF=class extends we{constructor(e){super(e),this.type="cluster",this.clusterRadius=lr("80px"),this.clusterMinSize=lr("12px"),this.clusterMaxSize=lr("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){const n=t.drawingInfo?.renderer;return n?.authoringInfo?.isAutoGenerated?null:n?OX(n)?null:mw(n,t,r)??void 0:iO(t,r)}readSymbol(e,t,r){const n=t.drawingInfo?.renderer;return n?.authoringInfo?.isAutoGenerated?null:n&&OX(n)?mw(n,t,r)?.symbol:null}writeSymbol(e,t,r,n){const i=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||i){const s=new Xm({symbol:e});t.drawingInfo={renderer:s.write({},n)}}}writeFields(e,t,r){const n=e.filter(i=>i.statisticType!=="avg_angle").map(i=>i.toJSON());_i(r,n,t)}readFields(e,t,r){return e.filter(n=>!n.isAutoGenerated).map(n=>Bg.fromJSON(n))}clone(){return new GF({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:se(this.labelingInfo),labelsVisible:this.labelsVisible,fields:se(this.fields),maxScale:this.maxScale,renderer:se(this.renderer),symbol:se(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:se(this.popupTemplate)})}};p([f({type:["cluster"],readOnly:!0,json:{write:!0}})],Ci.prototype,"type",void 0),p([f({cast:e=>e==="auto"?e:Ds(lr(e)),json:{write:!0}})],Ci.prototype,"clusterRadius",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Ci.prototype,"clusterMinSize",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],Ci.prototype,"clusterMaxSize",void 0),p([f({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ci.prototype,"maxScale",void 0),p([f(A_)],Ci.prototype,"popupEnabled",void 0),p([f({type:Ad,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Ci.prototype,"popupTemplate",void 0),p([f({types:T_,json:{write:{target:"drawingInfo.renderer"}}})],Ci.prototype,"renderer",void 0),p([Ee("renderer",["drawingInfo.renderer"])],Ci.prototype,"readRenderer",null),p([f({types:egt})],Ci.prototype,"symbol",void 0),p([Ee("symbol",["drawingInfo.renderer"])],Ci.prototype,"readSymbol",null),p([Re("symbol")],Ci.prototype,"writeSymbol",null),p([f({type:[C_],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ci.prototype,"labelingInfo",void 0),p([f(tO)],Ci.prototype,"labelsVisible",void 0),p([f({type:[Bg],json:{write:!0}})],Ci.prototype,"fields",void 0),p([Re("fields")],Ci.prototype,"writeFields",null),p([Ee("fields")],Ci.prototype,"readFields",null),Ci=GF=p([W("esri.layers.support.FeatureReductionCluster")],Ci);const kfe=Ci;var zF;let e4=zF=class extends sd{constructor(e){super(e),this.type="selection"}clone(){return new zF}};p([f({type:["selection"]})],e4.prototype,"type",void 0),e4=zF=p([W("esri.layers.support.FeatureReductionSelection")],e4);const $F=e4,NX={key:"type",base:sd,typeMap:{cluster:kfe,binning:Cfe}},Rfe={types:{key:"type",base:sd,typeMap:{selection:$F,cluster:kfe,binning:Cfe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:NX},"portal-item":{types:NX},"web-scene":{types:{key:"type",base:sd,typeMap:{selection:$F}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:bs}}}}},py={Base64:0,Hex:1,String:2,Raw:3},Ob=8,Ofe=(1<<Ob)-1;function um(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function z2t(e){const t=[];for(let r=0,n=e.length*Ob;r<n;r+=Ob)t[r>>5]|=(e.charCodeAt(r/Ob)&Ofe)<<r%32;return t}function $2t(e){const t=[];for(let r=0,n=32*e.length;r<n;r+=Ob)t.push(String.fromCharCode(e[r>>5]>>>r%32&Ofe));return t.join("")}function q2t(e){const t="0123456789abcdef",r=[];for(let n=0,i=4*e.length;n<i;n++)r.push(t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15));return r.join("")}function H2t(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[];for(let i=0,s=4*e.length;i<s;i+=3){const o=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*e.length?n.push(t):n.push(r.charAt(o>>6*(3-a)&63))}return n.join("")}function W2t(e,t){return e<<t|e>>>32-t}function sO(e,t,r,n,i,s){return um(W2t(um(um(t,e),um(n,s)),i),r)}function Zs(e,t,r,n,i,s,o){return sO(t&r|~t&n,e,t,i,s,o)}function Js(e,t,r,n,i,s,o){return sO(t&n|r&~n,e,t,i,s,o)}function Ys(e,t,r,n,i,s,o){return sO(t^r^n,e,t,i,s,o)}function Xs(e,t,r,n,i,s,o){return sO(r^(t|~n),e,t,i,s,o)}function Z2t(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let o=0;o<e.length;o+=16){const a=r,l=n,u=i,c=s;r=Zs(r,n,i,s,e[o],7,-680876936),s=Zs(s,r,n,i,e[o+1],12,-389564586),i=Zs(i,s,r,n,e[o+2],17,606105819),n=Zs(n,i,s,r,e[o+3],22,-1044525330),r=Zs(r,n,i,s,e[o+4],7,-176418897),s=Zs(s,r,n,i,e[o+5],12,1200080426),i=Zs(i,s,r,n,e[o+6],17,-1473231341),n=Zs(n,i,s,r,e[o+7],22,-45705983),r=Zs(r,n,i,s,e[o+8],7,1770035416),s=Zs(s,r,n,i,e[o+9],12,-1958414417),i=Zs(i,s,r,n,e[o+10],17,-42063),n=Zs(n,i,s,r,e[o+11],22,-1990404162),r=Zs(r,n,i,s,e[o+12],7,1804603682),s=Zs(s,r,n,i,e[o+13],12,-40341101),i=Zs(i,s,r,n,e[o+14],17,-1502002290),n=Zs(n,i,s,r,e[o+15],22,1236535329),r=Js(r,n,i,s,e[o+1],5,-165796510),s=Js(s,r,n,i,e[o+6],9,-1069501632),i=Js(i,s,r,n,e[o+11],14,643717713),n=Js(n,i,s,r,e[o],20,-373897302),r=Js(r,n,i,s,e[o+5],5,-701558691),s=Js(s,r,n,i,e[o+10],9,38016083),i=Js(i,s,r,n,e[o+15],14,-660478335),n=Js(n,i,s,r,e[o+4],20,-405537848),r=Js(r,n,i,s,e[o+9],5,568446438),s=Js(s,r,n,i,e[o+14],9,-1019803690),i=Js(i,s,r,n,e[o+3],14,-187363961),n=Js(n,i,s,r,e[o+8],20,1163531501),r=Js(r,n,i,s,e[o+13],5,-1444681467),s=Js(s,r,n,i,e[o+2],9,-51403784),i=Js(i,s,r,n,e[o+7],14,1735328473),n=Js(n,i,s,r,e[o+12],20,-1926607734),r=Ys(r,n,i,s,e[o+5],4,-378558),s=Ys(s,r,n,i,e[o+8],11,-2022574463),i=Ys(i,s,r,n,e[o+11],16,1839030562),n=Ys(n,i,s,r,e[o+14],23,-35309556),r=Ys(r,n,i,s,e[o+1],4,-1530992060),s=Ys(s,r,n,i,e[o+4],11,1272893353),i=Ys(i,s,r,n,e[o+7],16,-155497632),n=Ys(n,i,s,r,e[o+10],23,-1094730640),r=Ys(r,n,i,s,e[o+13],4,681279174),s=Ys(s,r,n,i,e[o],11,-358537222),i=Ys(i,s,r,n,e[o+3],16,-722521979),n=Ys(n,i,s,r,e[o+6],23,76029189),r=Ys(r,n,i,s,e[o+9],4,-640364487),s=Ys(s,r,n,i,e[o+12],11,-421815835),i=Ys(i,s,r,n,e[o+15],16,530742520),n=Ys(n,i,s,r,e[o+2],23,-995338651),r=Xs(r,n,i,s,e[o],6,-198630844),s=Xs(s,r,n,i,e[o+7],10,1126891415),i=Xs(i,s,r,n,e[o+14],15,-1416354905),n=Xs(n,i,s,r,e[o+5],21,-57434055),r=Xs(r,n,i,s,e[o+12],6,1700485571),s=Xs(s,r,n,i,e[o+3],10,-1894986606),i=Xs(i,s,r,n,e[o+10],15,-1051523),n=Xs(n,i,s,r,e[o+1],21,-2054922799),r=Xs(r,n,i,s,e[o+8],6,1873313359),s=Xs(s,r,n,i,e[o+15],10,-30611744),i=Xs(i,s,r,n,e[o+6],15,-1560198380),n=Xs(n,i,s,r,e[o+13],21,1309151649),r=Xs(r,n,i,s,e[o+4],6,-145523070),s=Xs(s,r,n,i,e[o+11],10,-1120210379),i=Xs(i,s,r,n,e[o+2],15,718787259),n=Xs(n,i,s,r,e[o+9],21,-343485551),r=um(r,a),n=um(n,l),i=um(i,u),s=um(s,c)}return[r,n,i,s]}function ZG(e,t=py.Hex){const r=t||py.Base64,n=Z2t(z2t(e),e.length*Ob);switch(r){case py.Raw:return n;case py.Hex:return q2t(n);case py.String:return $2t(n);case py.Base64:return H2t(n)}}const J2t=()=>Pe.getLogger("esri.views.2d.layers.support.clusterUtils");xe.add("esri-cluster-arcade-enabled",!0);const Y2t=xe("esri-cluster-arcade-enabled"),X2t=new Set(["simple-line","simple-fill","picture-fill"]);function LX(e,t){let r=t.clone();if(!Q2t(r))return r;if(t.getSymbols().some(n=>X2t.has(n.type))&&(r=new Xm({symbol:new ra})),r.authoringInfo||(r.authoringInfo=new XT),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const n=(r.visualVariables||[]).filter(i=>i.valueExpression!=="$view.scale");n.forEach(i=>{i.type==="rotation"?i.field?i.field=b0(e,i.field,"avg_angle","number"):i.valueExpression&&(i.field=n2(e,i.valueExpression,"avg_angle","number"),i.valueExpression=null):i.normalizationField?(i.field=b0(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=b0(e,i.field,"avg","number"):i.valueExpression&&(i.field=n2(e,i.valueExpression,"avg","number"),i.valueExpression=null)}),r.visualVariables=n}switch(r.type){case"simple":break;case"pie-chart":for(const n of r.attributes)n.field?n.field=b0(e,n.field,"sum","number"):n.valueExpression&&(n.field=n2(e,n.valueExpression,"sum","number"),n.valueExpression=null);break;case"unique-value":r.field?r.field=b0(e,r.field,"mode","string"):r.valueExpression&&(r.field=n2(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=b0(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=b0(e,r.field,"avg","number"):r.valueExpression&&(r.field=n2(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const Q2t=e=>{const t=r=>J2t().error(new ie("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!Y2t){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function K2t(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const n=r,i="field",s=t.toLowerCase()+",norm:"+i+","+n.toLowerCase();return"cluster_avg_"+ZG(s)}}}function n2(e,t,r,n){const i=ZG(t),s=r==="mode"?`cluster_type_${i}`:r==="sum"?`cluster_sum_${i}`:`cluster_avg_${i}`;return e.some(o=>o.name===s)||e.push(new Bg({name:s,isAutoGenerated:!0,onStatisticExpression:new $G({expression:t,returnType:n}),statisticType:r})),s}function b0(e,t,r,n,i){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const s=K2t(r,t,i);return e.some(o=>o.name===s)||(r==="avg_norm"?e.push(new Bg({name:s,isAutoGenerated:!0,onStatisticExpression:new $G({expression:`$feature.${t} / $feature.${i}`,returnType:n}),statisticType:"avg"})):e.push(new Bg({name:s,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),s}const Nfe=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(Et(()=>this.renderer,()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},Di))}set featureReduction(r){const n=this._normalizeFeatureReduction(r);this._set("featureReduction",n)}set renderer(r){}_withClusterVariable(r,n,i){const s=r.clone();return"visualVariables"in s&&(s.visualVariables||(s.visualVariables=[]),s.visualVariables.some(o=>o.type==="size")||s.visualVariables.push(new Jm({field:"cluster_count",stops:[new LM({value:1}),new LM({useMinValue:!0,size:n}),new LM({useMaxValue:!0,size:i})]}))),s}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const n=r.clone(),i=[new Bg({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(n.fields??[]).filter(h=>!h.isAutoGenerated),o=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:a,clusterMaxSize:l}=n;if(o){n.fields=[...i,...s];const h=this._withClusterVariable(n.renderer,a,l);return n.effectiveFeatureRenderer=h,n.effectiveClusterRenderer=h,n}if(r.symbol){if(n.fields=[...i,...s],n.renderer=null,!this.renderer)return n.effectiveFeatureRenderer=null,n.effectiveClusterRenderer=null,n;const h=LX(i,this.renderer),d=this._withClusterVariable(h,a,l),m="visualVariables"in d&&d.visualVariables?d.visualVariables:[],y=new Xm({symbol:r.symbol,visualVariables:m});return n.fields=[...i,...s],n.effectiveFeatureRenderer=d,n.effectiveClusterRenderer=y,n}if(!this.renderer)return r;const u=LX(i,this.renderer);n.fields=[...i,...s],n.renderer=u;const c=this._withClusterVariable(u,a,l);return n.effectiveFeatureRenderer=c,n.effectiveClusterRenderer=c,n}};return p([f(Rfe)],t.prototype,"featureReduction",null),t=p([W("esri.layers.mixins.FeatureReductionLayer")],t),t},PX={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},DX={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},FX={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},ext={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":PX,"web-map/basemap":DX,"web-map/tables":FX,"link-chart/operational-layers":{...PX,LinkChartLayer:!0},"link-chart/basemap":DX,"link-chart/tables":FX,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},m1=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,n,i){return i?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,n,i,s){(s&&s.layerContainerType==="ground"||r&&Aoe(this,i,{},s))&&(n[i]=r)}writeOperationalLayerType(r,n,i,s){r&&s?.layerContainerType!=="tables"&&(n.layerType=r)}writeTitle(r,n){n.title=r??"Layer"}readTimeExtent(r){return r?Ro.fromArray(r):null}writeTimeExtent(r,n,i,s){r&&s.layerContainerType!=="tables"&&(r.isEmpty?s?.messages&&s.messages.push(new ie("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):n[i]=r.toArray())}read(r,n){n&&(n.layer=this),tut(this,r,i=>super.read(r,i),n)}write(r,n){if(!this.persistenceEnabled&&!n?.ignorePersistenceEnabled)return null;if(n?.origin){const o=`${n.origin}/${n.layerContainerType||"operational-layers"}`;let a=!!ext[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(a=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(a=!1),!a)return n.messages?.push(new ie("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const i=super.write(r,{...n,layer:this}),s=!!n&&!!n.messages&&!!n.messages.filter(o=>o instanceof ie&&o.name==="web-document-write:property-required").length;return DT(i?.url)?(n?.messages?.push(new ie("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:i}beforeSave(){}};return p([f({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),p([Ee("id",["id"])],t.prototype,"readId",null),p([f(Xde)],t.prototype,"listMode",void 0),p([Re("listMode")],t.prototype,"writeListMode",null),p([f({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:bs}}}}})],t.prototype,"operationalLayerType",void 0),p([Re("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),p([f(NE)],t.prototype,"opacity",void 0),p([f({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),p([f({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),p([Re("title"),Re(["web-scene"],"title")],t.prototype,"writeTitle",null),p([f({type:Ro,json:{origins:{"web-scene":{write:{layerContainerTypes:bs}}}}})],t.prototype,"visibilityTimeExtent",void 0),p([Ee("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),p([Re(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Ft,Xk]]}})],t.prototype,"writeTimeExtent",null),p([f({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:bs}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=p([W("esri.layers.mixins.OperationalLayer")],t),t};var qF;const DI=new Pt({asc:"ascending",desc:"descending"});let xv=qF=class extends we{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new qF({field:this.field,valueExpression:this.valueExpression,order:this.order})}};p([f({type:String,json:{write:!0}})],xv.prototype,"field",void 0),p([f({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],xv.prototype,"valueExpression",void 0),p([f({type:DI.apiValues,json:{type:DI.jsonValues,read:DI.read,write:DI.write}})],xv.prototype,"order",void 0),xv=qF=p([W("esri.layers.support.OrderByInfo")],xv);const JG=xv;function txt(e,t,r){if(!e)return null;const n=e.find(s=>!!s.field);if(!n)return null;const i=new JG;return i.read(n,r),[i]}function rxt(e,t,r,n){const i=e.find(s=>!!s.field);i&&_i(r,[i.toJSON()],t)}const Lfe={type:[JG],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:txt},write:{writer:rxt}}},Pfe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return p([f(Lfe)],t.prototype,"orderBy",void 0),t=p([W("esri.layers.mixins.OrderedLayer")],t),t},nxt=Math.PI/180,ixt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Xd=Fn.radius,mu=Fn.eccentricitySquared,sxt={a1:Xd*mu,a2:Xd*mu*Xd*mu,a3:Xd*mu*mu/2,a4:Xd*mu*Xd*mu*2.5,a5:Xd*mu+Xd*mu*mu/2,a6:1-mu},oxt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:Fn.radius,f:Fn.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Tm.radius,f:Tm.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:yh.radius,f:yh.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:yh.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var be;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(be||(be={}));const Dfe={[be.WGS84]:{[be.CGCS2000]:xn,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:xn,[be.SPHERICAL_ECEF]:CS,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:Nb,[be.PLATE_CARREE]:Lb,[be.WGS84]:xn,[be.WGS84_ECEF]:Fb},[be.CGCS2000]:{[be.CGCS2000]:xn,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:xn,[be.SPHERICAL_ECEF]:CS,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:Nb,[be.PLATE_CARREE]:Lb,[be.WGS84]:xn,[be.WGS84_ECEF]:Fb},[be.GCSMARS2000]:{[be.CGCS2000]:null,[be.GCSMARS2000]:xn,[be.GCSMOON2000]:null,[be.LON_LAT]:xn,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:UX,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.GCSMOON2000]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:xn,[be.LON_LAT]:xn,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:jX,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.WEB_MERCATOR]:{[be.CGCS2000]:MS,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:MS,[be.SPHERICAL_ECEF]:axt,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:xn,[be.PLATE_CARREE]:cxt,[be.WGS84]:MS,[be.WGS84_ECEF]:lxt},[be.WGS84_ECEF]:{[be.CGCS2000]:jb,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:jb,[be.SPHERICAL_ECEF]:bxt,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:wxt,[be.PLATE_CARREE]:hxt,[be.WGS84]:jb,[be.WGS84_ECEF]:xn},[be.SPHERICAL_ECEF]:{[be.CGCS2000]:Db,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:Db,[be.SPHERICAL_ECEF]:xn,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:yxt,[be.PLATE_CARREE]:pxt,[be.WGS84]:Db,[be.WGS84_ECEF]:gxt},[be.SPHERICAL_MARS_PCPF]:{[be.CGCS2000]:null,[be.GCSMARS2000]:VX,[be.GCSMOON2000]:null,[be.LON_LAT]:VX,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:xn,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.SPHERICAL_MOON_PCPF]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:BX,[be.LON_LAT]:BX,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:xn,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.UNKNOWN]:{[be.CGCS2000]:null,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:null,[be.SPHERICAL_ECEF]:null,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:xn,[be.WEB_MERCATOR]:null,[be.PLATE_CARREE]:null,[be.WGS84]:null,[be.WGS84_ECEF]:null},[be.LON_LAT]:{[be.CGCS2000]:xn,[be.GCSMARS2000]:xn,[be.GCSMOON2000]:xn,[be.LON_LAT]:xn,[be.SPHERICAL_ECEF]:CS,[be.SPHERICAL_MARS_PCPF]:UX,[be.SPHERICAL_MOON_PCPF]:jX,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:Nb,[be.PLATE_CARREE]:Lb,[be.WGS84]:xn,[be.WGS84_ECEF]:Fb},[be.PLATE_CARREE]:{[be.CGCS2000]:Pb,[be.GCSMARS2000]:null,[be.GCSMOON2000]:null,[be.LON_LAT]:Pb,[be.SPHERICAL_ECEF]:dxt,[be.SPHERICAL_MARS_PCPF]:null,[be.SPHERICAL_MOON_PCPF]:null,[be.UNKNOWN]:null,[be.WEB_MERCATOR]:fxt,[be.PLATE_CARREE]:xn,[be.WGS84]:Pb,[be.WGS84_ECEF]:mxt}};function YG(e,t,r=Ffe()){return e==null||t==null?null:_xt(e,t,r).projector}function HF(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=wc(e,1)),bE(e)?t.spatialReferenceId=be.SPHERICAL_ECEF:Im(e)?t.spatialReferenceId=be.WGS84:Va(e)?t.spatialReferenceId=be.WEB_MERCATOR:lae(e)?t.spatialReferenceId=be.PLATE_CARREE:e.wkt===hae.wkt?t.spatialReferenceId=be.WGS84_ECEF:e.wkid===kg.CGCS2000?t.spatialReferenceId=be.CGCS2000:e.wkt===nR.wkt?t.spatialReferenceId=be.SPHERICAL_MARS_PCPF:e.wkt===iR.wkt?t.spatialReferenceId=be.SPHERICAL_MOON_PCPF:tV(e)?t.spatialReferenceId=be.GCSMARS2000:rV(e)?t.spatialReferenceId=be.GCSMOON2000:t.spatialReferenceId=be.UNKNOWN):be.UNKNOWN}function xn(e,t,r,n){e!==r&&(r[n++]=e[t++],r[n++]=e[t++],r[n]=e[t])}function MS(e,t,r,n){r[n]=vw*(e[t]/ag),r[n+1]=vw*(Ufe-2*Math.atan(Math.exp(-e[t+1]/ag))),r[n+2]=e[t+2]}function axt(e,t,r,n){const i=e[t]/ag,s=Ufe-2*Math.atan(Math.exp(-e[t+1]/ag)),o=ag+e[t+2],a=Math.cos(s)*o;r[n]=Math.cos(i)*a,r[n+1]=Math.sin(i)*a,r[n+2]=Math.sin(s)*o}function lxt(e,t,r,n){MS(e,t,r,n),Fb(r,n,r,n)}function uxt(e,t,r,n,i){const s=.4999999*oO,o=hl(gw*e[t+1],-s,s),a=Math.sin(o);r[n++]=gw*e[t]*i.radius,r[n++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[n]=e[t+2]}function Nb(e,t,r,n){uxt(e,t,r,n,Fn)}function Lb(e,t,r,n){r[n]=e[t]*GX,r[n+1]=e[t+1]*GX,r[n+2]=e[t+2]}function Pb(e,t,r,n){r[n]=e[t]*zX,r[n+1]=e[t+1]*zX,r[n+2]=e[t+2]}function cxt(e,t,r,n){MS(e,t,r,n),Lb(r,n,r,n)}function hxt(e,t,r,n){jb(e,t,r,n),Lb(r,n,r,n)}function pxt(e,t,r,n){Db(e,t,r,n),Lb(r,n,r,n)}function dxt(e,t,r,n){Pb(e,t,r,n),CS(r,n,r,n)}function fxt(e,t,r,n){Pb(e,t,r,n),Nb(r,n,r,n)}function mxt(e,t,r,n){Pb(e,t,r,n),Fb(r,n,r,n)}function XG(e,t,r,n,i){const s=i+e[t+2],o=gw*e[t+1],a=gw*e[t],l=Math.cos(o)*s;r[n]=Math.cos(a)*l,r[n+1]=Math.sin(a)*l,r[n+2]=Math.sin(o)*s}function jX(e,t,r,n){XG(e,t,r,n,Tm.radius)}function UX(e,t,r,n){XG(e,t,r,n,yh.radius)}function CS(e,t,r,n){XG(e,t,r,n,Fn.radius)}function QG(e,t,r,n,i){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),u=$ae(a/(l===0?1:l)),c=Math.atan2(o,s);r[n++]=vw*c,r[n++]=vw*u,r[n]=l-i}function BX(e,t,r,n){QG(e,t,r,n,Tm.radius)}function VX(e,t,r,n){QG(e,t,r,n,yh.radius)}function Db(e,t,r,n){QG(e,t,r,n,Fn.radius)}function yxt(e,t,r,n){Db(e,t,r,n),Nb(r,n,r,n)}function gxt(e,t,r,n){Db(e,t,r,n),Fb(r,n,r,n)}function vxt(e,t,r,n,i){const s=gw*e[t],o=gw*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);r[n++]=(c+a)*u*Math.cos(s),r[n++]=(c+a)*u*Math.sin(s),r[n++]=(c*(1-i.eccentricitySquared)+a)*l}function Fb(e,t,r,n){vxt(e,t,r,n,Fn)}function jb(e,t,r,n){const i=sxt,s=e[t],o=e[t+1],a=e[t+2];let l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k,N,F,P;l=Math.abs(a),u=s*s+o*o,c=Math.sqrt(u),h=u+a*a,d=Math.sqrt(h),F=Math.atan2(o,s),m=a*a/h,y=u/h,T=i.a2/d,I=i.a3-i.a4/d,y>.3?(g=l/d*(1+y*(i.a1+T+m*I)/d),N=Math.asin(g),S=g*g,b=Math.sqrt(1-S)):(b=c/d*(1-m*(i.a5-T-y*I)/d),N=Math.acos(b),S=1-b*b,g=Math.sqrt(S)),E=1-Fn.eccentricitySquared*S,x=Fn.radius/Math.sqrt(E),w=i.a6*x,T=c-x*b,I=l-w*g,C=b*T+g*I,M=b*I-g*T,k=M/(w/E+C),N+=k,P=C+M*k/2,a<0&&(N=-N),r[n++]=vw*F,r[n++]=vw*N,r[n]=P}function bxt(e,t,r,n){jb(e,t,r,n),CS(r,n,r,n)}function wxt(e,t,r,n){jb(e,t,r,n),Nb(r,n,r,n)}function _xt(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const n=HF(e,r.source),i=HF(t,r.dest);return n===be.UNKNOWN&&i===be.UNKNOWN?gn(e,t)?r.projector=xn:r.projector=null:r.projector=Dfe[n][i],r}function Ffe(){return{source:{spatialReference:null,spatialReferenceId:be.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:be.UNKNOWN,metersPerUnit:1},projector:xn}}const xxt={spatialReference:null,spatialReferenceId:be.UNKNOWN},Sxt={spatialReference:null,spatialReferenceId:be.UNKNOWN},jfe=Ffe(),gw=d_(1),vw=fV(1),oO=Math.PI,Ufe=.5*oO,ag=Fn.radius,GX=ag*oO/180,zX=180/(ag*oO);function k_(e,t,r,n,i,s,o=Math.floor(e.length/3)){const a=YG(t,i,jfe);if(a==null)return!1;if(a===xn){if(e===n&&r===s)return!0;const u=r+3*o;for(let c=r,h=s;c<u;c++,h++)n[h]=e[c];return!0}const l=r+3*o;for(let u=r,c=s;u<l;u+=3,c+=3)a(e,u,n,c);return!0}const Ext=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:k_},Symbol.toStringTag,{value:"Module"}));function $X(e,t,r,n,i,s){return FI[0]=e,FI[1]=t,FI[2]=r,k_(FI,n,0,i,s,0)}const FI=Cd();let jI=0,GL=class WF{static fromGE(t){const r=new WF;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=jI++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=jI++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=jI++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=jI++}getInverse(){const t=new WF;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},LE=class Fx{static cacheKey(t,r){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",r.wkid?.toString()??"-1",r.wkt?.toString()??"",r.wkt2?.toString()??""].join()}static fromGE(t){const r=new Fx;let n="";for(const i of t.steps){const s=GL.fromGE(i);r.steps.push(s),n+=s.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=n,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const r of t.steps)r instanceof GL?this.steps.push(r):this.steps.push(new GL({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new Fx;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const n=this.steps[r];t.steps.push(n.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,n){this._cachedProjection[Fx.cacheKey(t,r)]=n}getCachedGeTransformation(t,r){let n="";for(const s of this.steps)n+=s.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const i=this._cachedProjection[Fx.cacheKey(t,r)];return i===void 0?null:i}},sc=null,Lm=null,kS=null,t4={};const KG=new l_;function Pd(){return!!sc&&rR()}function Bfe(){return!!Pd()||(It(KG),bd(),!1)}function ez(e,t){return!e||!t||nu(e,t)||Bfe()}function Txt(e,t){return!nu(e,t)&&!Pd()}function bd(e){return kS==null&&(kS=Promise.all([eV(),Me(()=>import("./geometryEngineBase-DDJcGEx2-B9Hw96eo.js"),__vite__mapDeps([22,1,2]),import.meta.url).then(t=>t.g),Me(()=>import("./hydrated-Bw6jVxCj-DrGZCQ7v.js"),__vite__mapDeps([134,1,2]),import.meta.url)])),kS.then(([,t,{hydratedAdapter:r}])=>{Gr(e),Lm=r,sc=t.default,sc._enableProjection(wct),KG.notify()})}function Dd(e,t,r=null,n=null){return Array.isArray(e)?e.length===0?[]:bw(Lm,e,e[0].spatialReference,t,r,n):bw(Lm,[e],e.spatialReference,t,r,n)[0]}function bw(e,t,r,n,i=null,s=null){if(r==null||n==null)return t;if(nu(r,n,i))return t.map(o=>RS(o,r,n));if(i==null&&bE(r))return t.map(o=>RS(o,r,Ke.WGS84)).map(o=>ww(o,n));if(i==null&&bE(n))return t.map(o=>ww(o,Ke.WGS84)).map(o=>RS(o,Ke.WGS84,n));if(i==null){const o=LE.cacheKey(r,n);t4[o]!==void 0?i=t4[o]:((i=rz(r,n,void 0))==null&&(i=new LE),t4[o]=i)}if(sc==null||e==null)throw new aO;return s!=null?sc._project(e,t,r,n,i,s):sc._project(e,t,r,n,i)}function Vfe(e,t){const r=tz([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function tz(e,t){if(!Pd()){for(const r of e)if(r!=null&&!gn(r.spatialReference,t)&&xo(r.spatialReference)&&xo(t)&&!nu(r.spatialReference,t))return It(KG),{pending:bd(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:gn(r.spatialReference,t)?r:xo(r.spatialReference)&&xo(t)?ww(r,t):null)}}function rz(e,t,r=null){if(e==null||t==null)return null;if(sc==null||Lm==null)throw new aO;const n=sc._getTransformation(Lm,e,t,r,r?.spatialReference);return n!==null?LE.fromGE(n):null}function Ixt(e,t,r=null){if(sc==null||Lm==null)throw new aO;const n=sc._getTransformationBySuitability(Lm,e,t,r,r?.spatialReference);if(n!==null){const i=[];for(const s of n)i.push(LE.fromGE(s));return i}return[]}let aO=class extends ie{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Axt(){sc=null,Lm=null,kS=null,t4={}}const Mxt={get loadPromise(){return kS}};function ww(e,t){try{const r=Dd(e,t);return r==null?null:("xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax),ZR(r.type,e.spatialReference,t)?.(r),r)}catch(r){if(!(r instanceof aO))throw r;return null}}async function Cxt(e,t,r){const n=e.spatialReference;return n!=null&&t!=null&&await d3(n,t,null,r),ww(e,t)}function nu(e,t,r){return!r&&(!!gn(e,t)||xo(e)&&xo(t)&&!!YG(e,t,jfe))}function Gfe(e,t){if(gn(e,t))return!0;if(!xo(e)||!xo(t))return!1;const r=Im(e)||Va(e)||n6(e),n=Im(t)||Va(t)||n6(t);return r&&n}async function d3(e,t,r,n){if(Pd())return a5(n);if(Array.isArray(e)){for(const{source:i,dest:s,geographicTransformation:o}of e)if(i&&s&&!nu(i,s,o))return bd(n)}else if(e&&t&&!nu(e,t,r))return bd(n);return a5(n)}function RS(e,t,r){return e?"x"in e?zfe(e,t,new it,r,0):"xmin"in e?Zfe(e,t,new jt,r,0):"rings"in e?Wfe(e,t,new ts,r,0):"paths"in e?qfe(e,t,new Ca,r,0):"points"in e?$fe(e,t,new n1,r,0):null:null}function kxt(e,t,r=t.spatialReference,n=0){return r!=null&&e.spatialReference!=null&&zfe(e,e.spatialReference,t,r,n)!=null}function zfe(e,t,r,n,i){po[0]=e.x,po[1]=e.y;const s=e.z;return po[2]=s!==void 0?s:i,k_(po,t,0,po,n,0)?(r.x=po[0],r.y=po[1],r.spatialReference=n,s!==void 0||Am(n)?(r.z=po[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function Rxt(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&$fe(e,e.spatialReference,t,r,n)!=null}function $fe(e,t,r,n,i){const{points:s,hasZ:o,hasM:a}=e,l=[],u=s.length,c=[];for(const d of s)c.push(d[0],d[1],o?d[2]:i);if(!k_(c,t,0,c,n,0,u))return null;const h=o||Am(n);for(let d=0;d<u;++d){const m=3*d,y=c[m],g=c[m+1];h&&a?l.push([y,g,c[m+2],s[d][3]]):h?l.push([y,g,c[m+2]]):a?l.push([y,g,s[d][2]]):l.push([y,g])}return r.points=l,r.spatialReference=n,r.hasZ=o,r.hasM=a,r}function Oxt(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&qfe(e,e.spatialReference,t,r,n)!=null}function qfe(e,t,r,n,i){const{paths:s,hasZ:o,hasM:a}=e,l=[];if(!Jfe(s,o??!1,a??!1,t,l,n,i))return null;const u=o||Am(n);return r.paths=l,r.spatialReference=n,r.hasZ=u,r.hasM=a,r}function Hfe(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&Wfe(e,e.spatialReference,t,r,n)!=null}function Wfe(e,t,r,n,i){const{rings:s,hasZ:o,hasM:a}=e,l=[];if(!Jfe(s,o??!1,a??!1,t,l,n,i))return null;const u=o||Am(n);return r.rings=l,r.spatialReference=n,r.hasZ=u,r.hasM=a,r}function Nxt(e,t,r=t.spatialReference,n=0){return e.spatialReference!=null&&r!=null&&Zfe(e,e.spatialReference,t,r,n)!=null}function Zfe(e,t,r,n,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=e,h=u?e.zmin:i;if(!$X(s,o,h,t,po,n))return null;const d=u||Am(n);r.xmin=po[0],r.ymin=po[1],d&&(r.zmin=po[2]);const m=u?e.zmax:i;return $X(a,l,m,t,po,n)?(r.xmax=po[0],r.ymax=po[1],d&&(r.zmax=po[2]),c&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=n,r):null}function Jfe(e,t,r,n,i,s,o=0){const a=new Array;for(const c of e)for(const h of c)a.push(h[0],h[1],t?h[2]:o);if(!k_(a,n,0,a,s,0))return!1;let l=0;i.length=0;const u=t||Am(s);for(const c of e){const h=new Array;for(const d of c)u&&r?h.push([a[l++],a[l++],a[l++],d[3]]):u?h.push([a[l++],a[l++],a[l++]]):r?(h.push([a[l++],a[l++],d[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}const po=Cd(),Lxt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:nu,getTransformation:rz,getTransformations:Ixt,initializeProjection:d3,isEqualBaseGCS:Gfe,isLoaded:Pd,isLoadedOrLoad:Bfe,isLoadedOrLoadFor:ez,load:bd,project:Dd,projectExtent:Nxt,projectMany:bw,projectMultipoint:Rxt,projectOrLoad:Vfe,projectOrLoadMany:tz,projectPoint:kxt,projectPolygon:Hfe,projectPolyline:Oxt,projectWithZConversion:Cxt,projectWithoutEngine:RS,requiresLoad:Txt,test:Mxt,tryProjectWithZConversion:ww,unload:Axt},Symbol.toStringTag,{value:"Module"}));async function Pxt(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return zy(e);const r=Ke.WGS84;return await d3(t,r),Dd(e,r)}function Yfe(e,t){if(!nz(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function nz(e,t){return!!e.typeKeywords?.includes(t)}function qX(e){return nz(e,Qfe.HOSTED_SERVICE)}function Xfe(e,t){const r=e.typeKeywords;if(r){const n=r.indexOf(t);n>-1&&r.splice(n,1)}}function Dxt(e,t,r){r?Yfe(e,t):Xfe(e,t)}async function Fxt(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return Pxt(r)}const Qfe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function HX(e){const{portal:t,isOrgItem:r,itemControl:n}=e,i=t.user?.privileges;let s=!i||i.includes("features:user:edit"),o=!!r&&!!i?.includes("features:user:fullEdit");const a=n==="update"||n==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const y1=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=pn(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,n,i){if(n.itemId)return new sg({id:n.itemId,portal:i?.portal})}writePortalItem(r,n){r?.id&&(n.itemId=r.id)}async loadFromPortal(r,n){if(this.portalItem?.id)try{const{load:i}=await Me(()=>import("./layersLoader-BOdP4LjI-rYTm93uP.js"),__vite__mapDeps([135,11,1,2,9,10,8,136]),import.meta.url);return Gr(n),await i({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},n)}catch(i){throw Fi(i)||Pe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(n=>(qo(n),!0)))}async setUserPrivileges(r,n){if(!pr.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:i,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(r,n);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(i){qo(i)}}async _fetchUserPrivileges(r,n){let i=this.portalItem;if(!r||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(n);const s=r===i.id;if(s&&i.portal.user)return HX(i);let o,a;if(s)o=i.portal.url;else try{o=await Uae(this.url,n)}catch(h){qo(h)}if(!o||!wut(o,i.portal.url))return this._fetchFallbackUserPrivileges(n);try{const h=n!=null?n.signal:null;a=await Er?.getCredential(`${o}/sharing`,{prompt:!1,signal:h})}catch(h){qo(h)}const l=!0,u=!1,c=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:c}};try{if(s?await i.reload():(i=new sg({id:r,portal:{url:o}}),await i.load(n)),i.portal.user)return HX(i)}catch(h){qo(h)}return{features:{edit:l,fullEdit:u},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(r){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(r)}catch(i){qo(i)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const n=this.url?Er?.findCredential(this.url):null;if(!n)return!0;const i=UI.credential===n?UI.user:await this._fetchEditingUser(r);return UI.credential=n,UI.user=i,i?.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const n=this.portalItem?.portal?.user;if(n)return n;const i=Er?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const s=`${i.owningSystemUrl}/sharing/rest`,o=ta.getDefault();if(o&&o.loaded&&ll(o.restUrl)===ll(s))return o.user;const a=`${s}/community/self`,l=r!=null?r.signal:null,u=await jT(Xe(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?cV.fromJSON(u.value.data):null}read(r,n){n&&(n.layer=this),super.read(r,n)}write(r,n){const i=n?.portal,s=this.portalItem?.id&&(this.portalItem.portal||ta.getDefault());return i&&s&&!$B(s.restUrl,i.restUrl)?(n.messages&&n.messages.push(new ie("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...n,layer:this})}};return p([f({type:sg})],t.prototype,"portalItem",null),p([Ee("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),p([Re("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),p([f({clonable:!1})],t.prototype,"resourceReferences",void 0),p([f({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),p([f({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),p([f({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=p([W("esri.layers.mixins.PortalLayer")],t),t},UI={credential:null,user:null};let jx=class extends mt{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};p([f()],jx.prototype,"updating",void 0),p([f()],jx.prototype,"status",void 0),jx=p([W("esri.layers.support.PublishingInfo")],jx);const jxt=jx,Uxt=Symbol(),Bxt=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const i=new jxt;return this._checkPublishingStatus(i),i}_checkPublishingStatus(n){let i=0;const s=async a=>{let l;n.updating=!0;try{l=await this.fetchPublishingStatus()}catch{l="unavailable"}l!=="published"&&l!=="unavailable"||(n.status==="publishing"&&this.refresh(),o.remove()),n.status=l,n.updating=!1,o.removed||(i=setTimeout(s,a,a+125))},o={removed:!1,remove(){this.removed=!0,clearTimeout(i)}};this.when().catch(()=>o.remove()),s(250),this.addHandles(o)}};return t=Uxt,p([f({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=p([W("esri.layers.mixins.PublishableLayer")],r),r},cm=new st,OS=new WeakMap;function Vxt(e){zxt(e)&&cm.push(new WeakRef(e))}function Gxt(e){const t=cm.find(r=>r.deref()===e);t&&cm.remove(t)}function zxt(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Kfe(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Kfe(t,e%t):0}let zL=0,BI=0;function $xt(){const e=Date.now();let t=!1;for(const r of cm){const n=r.deref();n?n.refreshInterval&&e-(OS.get(n)??0)+5>=6e4*n.refreshInterval&&(OS.set(n,e),n.refresh(e)):t=!0}if(t)for(let r=cm.length-1;r>=0;r--)cm.at(r).deref()||cm.removeAt(r)}PB(()=>{const e=Date.now();let t=0;for(const r of cm){const n=r.deref();n&&(t=Kfe(Math.round(6e4*n.refreshInterval),t),n.refreshInterval?OS.get(n)||OS.set(n,e):OS.delete(n))}if(t!==BI){if(BI=t,clearInterval(zL),BI===0)return void(zL=0);zL=setInterval($xt,BI)}},Di);const WX=.1,g1=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=NT(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||Vxt(this)},()=>{})}destroy(){Gxt(this)}castRefreshInterval(r){return r>=WX?r:r<=0?0:WX}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){o5(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:n})},n=>{Pe.getLogger(this).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}get test(){}};return p([f({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:bs}}}}})],t.prototype,"refreshInterval",void 0),p([ur("refreshInterval")],t.prototype,"castRefreshInterval",null),p([f({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),p([f({readOnly:!0})],t.prototype,"refreshParameters",null),t=p([W("esri.layers.mixins.RefreshableLayer")],t),t},t0=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&qxt(r,n.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===r.minScale&&i.maxScale===r.maxScale?i:r}};return p([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),p([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),p([f({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=p([W("esri.layers.mixins.ScaleRangeLayer")],t),t};function qxt(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const eme=Mn()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let Ux=class extends rr(we){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Mpe(this.value,this.unit,"milliseconds")}};p([tt(eme,{nonNullable:!0})],Ux.prototype,"unit",void 0),p([f({type:Number,json:{write:!0},nonNullable:!0})],Ux.prototype,"value",void 0),Ux=p([W("esri.time.TimeInterval")],Ux);const PE=Ux;function ZX(e,t){return PE.fromJSON({value:e,unit:t})}let ks=class extends rr(we){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&t.timeExtent.length===2?Ro.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){e?.start!=null&&e.end!=null?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?ZX(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?ZX(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};p([f({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ks.prototype,"cumulative",void 0),p([f({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ks.prototype,"endField",void 0),p([f({type:Ro,json:{write:{enabled:!0,allowNull:!0}}})],ks.prototype,"fullTimeExtent",void 0),p([Ee("fullTimeExtent",["timeExtent"])],ks.prototype,"readFullTimeExtent",null),p([Re("fullTimeExtent")],ks.prototype,"writeFullTimeExtent",null),p([f({type:Boolean,json:{write:!0}})],ks.prototype,"hasLiveData",void 0),p([f({type:PE,json:{write:{enabled:!0,allowNull:!0}}})],ks.prototype,"interval",void 0),p([Ee("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ks.prototype,"readInterval",null),p([Re("interval")],ks.prototype,"writeInterval",null),p([f({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ks.prototype,"startField",void 0),p([f(Dg("timeReference",!0))],ks.prototype,"timeZone",void 0),p([f({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ks.prototype,"trackIdField",void 0),p([f({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ks.prototype,"useTime",void 0),p([f({type:[Date],json:{read:!1}})],ks.prototype,"stops",void 0),ks=p([W("esri.layers.support.TimeInfo")],ks);const iz=ks,tme={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:bs}}},f3=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,n){const i=n.timeInfo.exportOptions;if(!i)return null;const s=i.timeOffset,o=eme.fromJSON(i.timeOffsetUnits);return s&&o?new PE({value:s,unit:o}):null}set timeInfo(r){OV(r,this.fieldsIndex),this._set("timeInfo",r)}};return p([f({type:Ro,json:{write:!1}})],t.prototype,"timeExtent",void 0),p([f({type:PE})],t.prototype,"timeOffset",void 0),p([Ee("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),p([f({value:null,type:iz,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),p([f(tme)],t.prototype,"useViewTime",void 0),t=p([W("esri.layers.mixins.TemporalLayer")],t),t},JX=new Pt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let xf=class extends rr(we){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};p([f({json:{write:!0}})],xf.prototype,"name",void 0),p([f({json:{write:!0}})],xf.prototype,"description",void 0),p([f({json:{read:JX.read,write:JX.write}})],xf.prototype,"drawingTool",void 0),p([f({json:{write:!0}})],xf.prototype,"prototype",void 0),p([f({json:{write:!0}})],xf.prototype,"thumbnail",void 0),xf=p([W("esri.layers.support.FeatureTemplate")],xf);const lO=xf;let pp=class extends rr(we){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=WR(e[r]);return t}writeDomains(e,t){const r={};for(const n of Object.keys(e))e[n]&&(r[n]=e[n]?.toJSON());t.domains=r}};p([f({json:{write:!0}})],pp.prototype,"id",void 0),p([f({json:{write:!0}})],pp.prototype,"name",void 0),p([f({json:{write:!0}})],pp.prototype,"domains",void 0),p([Ee("domains")],pp.prototype,"readDomains",null),p([Re("domains")],pp.prototype,"writeDomains",null),p([f({type:[lO],json:{write:!0}})],pp.prototype,"templates",void 0),pp=p([W("esri.layers.support.FeatureType")],pp);const uO=pp;function rme(){return{fields:{type:[xa],value:null,set:function(e){if(e&&xe("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(n=>`'${n.name}'`).join(", ");Pe.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return e3.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex?.has(t)||Pe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return ZT(this.fieldsIndex,e)}}}}const $L=()=>Pe.getLogger("esri.layers.support.labelingInfo"),Hxt=/\[([^[\]]+)\]/gi;function r4(e,t,r){return e?e.map(n=>{const i=new C_;if(i.read(n,r),i.labelExpression){const s=t.fields||t.layerDefinition?.fields||this.fields;i.labelExpression=i.labelExpression.replaceAll(Hxt,(o,a)=>`[${Wxt(a,s)}]`)}return i}):null}function Wxt(e,t){if(!t)return e;const r=e.toLowerCase();for(let n=0;n<t.length;n++){const i=t[n].name;if(i.toLowerCase()===r)return i}return e}const Zxt={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function nme(e,t){const r=[];for(const n of e){const i=n.labelPlacement,s=Zxt[t];if(!n.symbol)return $L().warn("No ILabelClass symbol specified."),[];if(!s)return $L().error(new ie("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(s.includes(i))r.push(n);else{const o=s[0];i&&$L().warn(`Found invalid label placement type ${i} for ${t}. Defaulting to ${o}`);const a=n.clone();a.labelPlacement=o,r.push(a)}}return r}const Sv=[];function cO(e,t){if(XR(e.url??""))return!0;const{wkid:r}=t;for(const n of Sv){if((e.version??0)>=n[0])return!0;if(typeof n[1]=="function"&&(n[1]=n[1]()),n[1].has(r))return!1}return!0}Sv.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Sv.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Sv.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Sv.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Sv.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function ime(e,t,r){const n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(n&&n.type==="unique-value"&&n.styleOrigin){const i=await jT(n.populateFromStyle());if(Gr(r),i.ok===!1){const s=i.error;t?.messages&&t.messages.push(new ea("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t?.origin)}}}function hO({displayField:e,editFieldsInfo:t,fields:r,objectIdField:n,title:i},s){if(!r)return null;const o=Kxt({editFieldsInfo:t,fields:r,objectIdField:n},s);if(!o.length)return null;const a=rSt({titleBase:i,fields:r,displayField:e}),l=tSt();return new Ad({title:a,content:l,fieldInfos:o})}function Jxt(e){const{title:t,graphic:r}=e??{},{attributes:n,sourceLayer:i}=r??{},s=i&&"displayField"in i?i.displayField:null,o=s?n?.[s]:null,a=r?.getObjectId()?.toString();return t||o||a||""}const Yxt=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):o0t(e,t);function Xxt({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const n=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===n&&(e=e.slice()),r!==!0&&e.sort(Qxt),e}function Qxt(e,t){return e.type==="oid"?-1:t.type==="oid"?1:YX(e)?-1:YX(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function Kxt(e,t){const r=t?.visibleFieldNames;return Xxt({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||nSt,sortDisabled:t?.sortDisabled}).map(n=>new wR({fieldName:n.name,isEditable:s0t(n,e),label:n.alias,format:eSt(n),visible:Yxt(n,{...e,visibleFieldNames:r})}))}function eSt(e){switch(e.type){case"small-integer":case"integer":case"single":return new yM({digitSeparator:!0,places:0});case"double":return new yM({digitSeparator:!0,places:2});case"string":return Wue(e.name)?new yM({digitSeparator:!0,places:0}):void 0;default:return}}function tSt(){return[new Fg,new cw]}function rSt(e){const t=$mt(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function YX(e){return(e.name&&e.name.toLowerCase())==="name"?!0:e.alias?.toLowerCase()==="name"}const nSt=["geometry","blob","raster","guid","xml"],sme=1/255.5;var Xu;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Xu||(Xu={}));const Cs="FeatureLayer";function VI(e,t){return new ie("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function XX(e){return e&&e instanceof st}const qL=rme();function HL(e,t,r){const n=!!r?.writeLayerSchema;return{enabled:n,ignoreOrigin:n}}let gt=class extends Sfe(Nfe(jde(Bxt(Pde(Km(Pfe(f3(t0(g1(a3(m1(y1(kd(c3(JR(rr(Od))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ke.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=NT(async(t,r,n)=>{const{save:i,saveAs:s}=await Me(()=>import("./featureLayerUtils-0tw9isWJ-BrJzFv3G.js"),__vite__mapDeps([137,138,139,140,136,141,11,1,2]),import.meta.url);switch(t){case Xu.SAVE:return i(this,r);case Xu.SAVE_AS:return s(this,n,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(n=>this.initLayerProperties(n))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(qo).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const n=await this._fetchFirstValidLayerId(t);n!=null&&(this.layerId=n)}if(!this.url&&!this._hasMemorySource())throw new ie("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>vfe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}warnInvisibleDrapedSymbols(){this.elevationInfo?.mode==="on-the-ground"&&this.renderer?.type==="simple"&&this.renderer.symbol?.type==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(e=>e.type==="fill"&&e.material!=null&&(!e.material.color||e.material.color.a*this.opacity<sme)&&(this.loadWarnings.push(new ea("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,t){return t=t.layerDefinition||t,zG(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,n){this._writeEditingEnabled(e,t,!0,n)}get effectiveEditingEnabled(){return bfe(this)}readIsTable(e,t){return(t=t?.layerDefinition??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,n){n?.writeLayerSchema&&_i(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return dfe(t.layerDefinition||t)}readObjectIdField(e,t){return ffe(t.layerDefinition||t)}get parsedUrl(){const e=Zn(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Th(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Th(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){U5(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const n=t.drawingInfo?.renderer;if(n){const i=mw(n,t,r)??void 0;return i||Pe.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),i}return iO(t,r)}set source(e){const t=this._get("source");t!==e&&(XX(t)&&this._resetMemorySource(t),XX(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof st?new Np({layer:this,items:e}):e:null}readSource(e,t){const r=Qm.fromJSON(t.featureSet);return new Np({layer:this,items:r?.features??[]})}readTemplates(e,t){const r=t.editFieldsInfo,n=r?.creatorField,i=r?.editorField;return e=e?.map(s=>lO.fromJSON(s)),this._fixTemplates(e,n),this._fixTemplates(e,i),e}readTitle(e,t){const r=t.layerDefinition?.name??t.name,n=t.title||t.layerDefinition?.title;if(r){const i=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?$pe(this.url,r):r;let s=r;if(!s&&this.url){const o=Ah(this.url);o!=null&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&i&&i!==s&&(s=i+" - "+s),YR(s)):void 0}if(this.sublayerTitleMode==="item-title"&&n)return n}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const n=t.fields.find(i=>i.name.toLowerCase()===r);n&&(r=n.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,n=r?.creatorField,i=r?.editorField;return e?.map(s=>(s=uO.fromJSON(s),this._fixTemplates(s.templates,n),this._fixTemplates(s.templates,i),s))}readVisible(e,t){return t.layerDefinition?.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const r=await efe(this,e,t,Cs);return this.lastEditsEventDate=new Date,r}async updateAttachment(e,t,r){const n=await tfe(this,e,t,r,Cs);return this.lastEditsEventDate=new Date,n}async applyEdits(e,t){return rfe(this,e,t)}async uploadAssets(e,t){return o2t(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return hO(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await Ll(Me(()=>import("./FeatureLayerSource-Boc5do0a-UuYUnVZf.js"),__vite__mapDeps([142,1,2,52,59,143,144,55,90,54,91,133,38,37,39]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=pfe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=hR(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){const r=await nfe(this,e,t,Cs);return this.lastEditsEventDate=new Date,r}async fetchRecomputedExtents(e){return ife(this,e,Cs)}getFeatureType(e){return VG(this.types,this.typeIdField,e)}getFieldDomain(e,t){const r=t?.feature,n=!!this.subtypes?.length;if(n&&!t?.excludeImpliedDomains){const a=yfe(this,e);if(a)return a}const i=n&&mfe(this,r);if(i){const a=i?.domains?.[e];return a?.type==="inherited"?this._getLayerDomain(e):a}const s=this.getFeatureType(r),o=this._getLayerDomain(e);if(s){const a=s.domains&&s.domains[e];if(a&&a?.type!=="inherited")return a}if(o)return o;if(!t?.excludeImpliedDomains){const a=l2t(this,e);if(a)return a}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return sfe(this,e,t,Cs)}async queryFeatures(e,t){const r=await this.load(),n=await r.source.queryFeatures(ui.from(e)??r.createQuery(),t);if(n?.features)for(const i of n.features)i.layer=i.sourceLayer=r;return n}async queryObjectIds(e,t){return ofe(this,e,t,Cs)}async queryFeatureCount(e,t){return afe(this,e,t,Cs)}async queryExtent(e,t){return lfe(this,e,t,Cs)}async queryRelatedFeatures(e,t){return ufe(this,e,t,Cs)}async queryRelatedFeaturesCount(e,t){return cfe(this,e,t,Cs)}async queryTopFeatures(e,t){const{source:r,capabilities:n}=await this.load();if(!r.queryTopFeatures||!n?.query?.supportsTopFeaturesQuery)throw new ie(Cs,"Layer source does not support queryTopFeatures capability");const i=await Promise.resolve().then(()=>KI),s=await r.queryTopFeatures(i.default.from(e),t);if(s?.features)for(const o of s.features)o.layer=o.sourceLayer=this;return s}async queryBins(e,t){const{source:r,capabilities:n}=await this.load();if(!r.queryBins||!n?.operations?.supportsQueryBins)throw new ie(Cs,"Layer source does not support queryBins capability");p2t(e,n,Cs);const i=await Promise.resolve().then(()=>p4t),s=await r.queryBins(i.default.from(e),t);if(s.features)for(const o of s.features)o.layer=o.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:r,capabilities:n}=await this.load();if(!r.queryTopObjectIds||!n?.query.supportsTopFeaturesQuery)throw new ie(Cs,"Layer source does not support queryTopObjectIds capability");const i=await Promise.resolve().then(()=>KI);return r.queryTopObjectIds(i.default.from(e),t)}async queryTopFeaturesExtent(e,t){const{source:r,capabilities:n}=await this.load();if(!r.queryTopExtents||!n?.query?.supportsTopFeaturesQuery)throw new ie(Cs,"Layer source does not support queryTopExtents capability");const i=await Promise.resolve().then(()=>KI);return r.queryTopExtents(i.default.from(e),t)}async queryTopFeatureCount(e,t){const{source:r,capabilities:n}=await this.load();if(!r.queryTopCount||!n?.query?.supportsTopFeaturesQuery)throw new ie(Cs,"Layer source does not support queryFeatureCount capability");const i=await Promise.resolve().then(()=>KI);return r.queryTopCount(i.default.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const n=r.layers;n&&n.length===1&&(super.read(n[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:n,messages:i}=t;if(this.dynamicDataSource)return i?.push(VI(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&n!=="tables")return i?.push(VI(this,`a table source can only be written to tables, not ${n}`)),null;if(this._hasMemorySource())return i?.push(VI(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&n==="tables")return i?.push(VI(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new ie(Cs,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||cO(this,e))}async save(e){return this._debouncedSaveOperations(Xu.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Xu.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){let n=e.layerDefinition?.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,t&&r?.origin==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,n){if(!e){const i=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";_i("layerDefinition.capabilities",i,t),r&&!n?.writeLayerSchema&&(t.capabilities=i)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Xe(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),U5(this.renderer,this.fieldsIndex),OV(this.timeInfo,this.fieldsIndex),ime(this,{origin:"service"})}async hasDataChanged(){return hfe(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(t=>t.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const n=r.prototype?.attributes;n&&t&&delete n[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new ie("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new ie("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};p([f(Qde)],gt.prototype,"attributeTableTemplate",void 0),p([Ee("service","capabilities")],gt.prototype,"readCapabilities",null),p([f({json:{origins:{"web-scene":{write:!1}},write:!0}})],gt.prototype,"charts",void 0),p([f({readOnly:!0})],gt.prototype,"createQueryVersion",null),p([f({json:{read:{source:"layerDefinition.copyrightText"}}})],gt.prototype,"copyright",void 0),p([f({json:{read:{source:"layerDefinition.displayField"}}})],gt.prototype,"displayField",void 0),p([f({types:Kp,readOnly:!0})],gt.prototype,"defaultSymbol",void 0),p([f({type:$o})],gt.prototype,"dynamicDataSource",void 0),p([f({type:Boolean})],gt.prototype,"editingEnabled",null),p([Ee(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],gt.prototype,"readEditingEnabled",null),p([Ee("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],gt.prototype,"readEditingEnabledFromWebMap",null),p([Re(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],gt.prototype,"writeEditingEnabled",null),p([Re("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],gt.prototype,"writeEditingEnabledToWebMap",null),p([f({readOnly:!0})],gt.prototype,"effectiveEditingEnabled",null),p([f({...qL.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:HL}}}}})],gt.prototype,"fields",void 0),p([f(qL.fieldsIndex)],gt.prototype,"fieldsIndex",void 0),p([f({type:Ape,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],gt.prototype,"formTemplate",void 0),p([f({json:{read:{source:"layerDefinition.extent"}}})],gt.prototype,"fullExtent",void 0),p([f({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:HL,writer(e,t,r){const n=e?PF.toJSON(e):null;n&&_i(r,n,t)}}}},read:{source:"layerDefinition.geometryType",reader:PF.read}}})],gt.prototype,"geometryType",void 0),p([f({json:{read:{source:"layerDefinition.hasM"}}})],gt.prototype,"hasM",void 0),p([f({json:{read:{source:"layerDefinition.hasZ"}}})],gt.prototype,"hasZ",void 0),p([f(jG)],gt.prototype,"id",void 0),p([f({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],gt.prototype,"infoFor3D",void 0),p([f({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],gt.prototype,"isTable",void 0),p([Ee("service","isTable",["type","geometryType"]),Ee("isTable",["layerDefinition.type","layerDefinition.geometryType"])],gt.prototype,"readIsTable",null),p([Re("web-map","isTable")],gt.prototype,"writeIsTable",null),p([f(tO)],gt.prototype,"labelsVisible",void 0),p([f({type:[C_],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:r4,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:r4,write:{enabled:!0,layerContainerTypes:bs}}},name:"layerDefinition.drawingInfo.labelingInfo",read:r4,write:!0}})],gt.prototype,"labelingInfo",void 0),p([f((()=>{const e=se(Zde);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,n){_i(n,TR(t),r)}}},e})())],gt.prototype,"opacity",void 0),p([f(rO)],gt.prototype,"legendEnabled",void 0),p([f({type:["show","hide"],json:(()=>{const e=se(Xde.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],gt.prototype,"listMode",void 0),p([Ee("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],gt.prototype,"readGlobalIdField",null),p([f({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:HL}}}}})],gt.prototype,"objectIdField",void 0),p([Ee("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],gt.prototype,"readObjectIdField",null),p([f({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],gt.prototype,"operationalLayerType",void 0),p([f(qL.outFields)],gt.prototype,"outFields",void 0),p([f({readOnly:!0})],gt.prototype,"parsedUrl",null),p([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],gt.prototype,"path",void 0),p([f(A_)],gt.prototype,"popupEnabled",void 0),p([f({type:Ad,json:{name:"popupInfo",write:!0}})],gt.prototype,"popupTemplate",void 0),p([f({readOnly:!0})],gt.prototype,"defaultPopupTemplate",null),p([f({types:T_,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:_G,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:bs,overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}})],gt.prototype,"renderer",null),p([Ee("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ee("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],gt.prototype,"readRenderer",null),p([f()],gt.prototype,"resourceInfo",void 0),p([f((()=>{const e=se(qde);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],gt.prototype,"screenSizePerspectiveEnabled",void 0),p([f({clonable:!1})],gt.prototype,"source",null),p([ur("source")],gt.prototype,"castSource",null),p([Ee("portal-item","source",["featureSet"]),Ee("web-map","source",["featureSet"])],gt.prototype,"readSource",null),p([f({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],gt.prototype,"spatialReference",void 0),p([f({type:Number})],gt.prototype,"subtypeCode",void 0),p([f({type:[lO]})],gt.prototype,"templates",void 0),p([Ee("templates",["editFieldsInfo","creatorField","editorField","templates"])],gt.prototype,"readTemplates",null),p([f({type:iz})],gt.prototype,"timeInfo",void 0),p([f()],gt.prototype,"title",void 0),p([Ee("service","title",["name"]),Ee("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],gt.prototype,"readTitle",null),p([Ee("web-map","title",["layerDefinition.name","title"])],gt.prototype,"readTitleFromWebMap",null),p([f({type:String})],gt.prototype,"sublayerTitleMode",void 0),p([f({json:{read:!1}})],gt.prototype,"type",void 0),p([f({type:String})],gt.prototype,"typeIdField",void 0),p([Ee("service","typeIdField"),Ee("typeIdField",["layerDefinition.typeIdField"])],gt.prototype,"readTypeIdField",null),p([f({type:[uO]})],gt.prototype,"types",void 0),p([Ee("service","types",["types"]),Ee("types",["layerDefinition.types"])],gt.prototype,"readTypes",null),p([f({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],gt.prototype,"visible",void 0),p([Ee("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],gt.prototype,"readVisible",null),gt=p([W("esri.layers.FeatureLayer")],gt);const pO=gt,ome=Object.freeze(Object.defineProperty({__proto__:null,default:pO},Symbol.toStringTag,{value:"Module"}));let NS=class extends st{constructor(e){super(e),this.addHandles([this.on("before-add",t=>{t.item==null&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(st.ofType(this.itemType.Type))(e):new st(e)}};function ZF(e,t){return{type:e,cast:YB,set(r){const n=fd(r,this._get(t),e);n.owner=this,this._set(t,n)}}}p([f()],NS.prototype,"owner",null),NS=p([W("esri.core.support.OwningCollection")],NS);let vm=class extends NS{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};p([JB({Type:dl,ensureType:Nr(dl)})],vm.prototype,"itemType",void 0),vm=p([W("esri.support.GraphicsCollection")],vm);let dp=class extends Km(t0(Od)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new vm,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};p([f({type:FG})],dp.prototype,"elevationInfo",void 0),p([f(ZF(vm,"graphics"))],dp.prototype,"graphics",void 0),p([f({type:["show","hide"]})],dp.prototype,"listMode",void 0),p([f()],dp.prototype,"screenSizePerspectiveEnabled",void 0),p([f({readOnly:!0})],dp.prototype,"type",void 0),p([f({constructOnly:!0})],dp.prototype,"internal",void 0),dp=p([W("esri.layers.GraphicsLayer")],dp);const ame=dp;var JF;const GI=new Pt({flow_from:"flow-from",flow_to:"flow-to"});let ro=JF=class extends Ym(we){constructor(e){super(e),this.density=.8,this.color=new Ze([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:r,flowSpeed:n,trailLength:i,smoothing:s,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),c=(this.visualVariables||[]).map(m=>m.clone()),h=this.authoringInfo?.clone(),d=this.legendOptions?.clone();return new JF({density:e,color:u,maxPathLength:t,trailWidth:r,flowSpeed:n,trailLength:i,trailCap:a,background:l,smoothing:s,flowRepresentation:o,visualVariables:c,authoringInfo:h,legendOptions:d})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};p([f({type:Number,json:{write:!0}})],ro.prototype,"density",void 0),p([f({type:Ze,json:{write:{allowNull:!0}}})],ro.prototype,"color",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],ro.prototype,"maxPathLength",void 0),p([f({type:Number,cast:lr,json:{write:!0}})],ro.prototype,"trailWidth",void 0),p([f({type:Number,json:{write:!0}})],ro.prototype,"flowSpeed",void 0),p([f({type:Number,json:{write:!0}})],ro.prototype,"trailLength",void 0),p([f({type:Number,cast:lr,json:{write:!1}})],ro.prototype,"smoothing",void 0),p([f({type:GI.apiValues,json:{type:GI.jsonValues,read:{reader:GI.read},write:{writer:GI.write}}})],ro.prototype,"flowRepresentation",void 0),p([tt({flowRenderer:"flow"})],ro.prototype,"type",void 0),p([f({type:XT,json:{write:!0}})],ro.prototype,"authoringInfo",void 0),p([f({type:QT,json:{write:!0}})],ro.prototype,"legendOptions",void 0),p([f({type:String,json:{write:!0}})],ro.prototype,"trailCap",void 0),p([f({type:String,json:{write:!0}})],ro.prototype,"background",void 0),ro=JF=p([W("esri.renderers.FlowRenderer")],ro);const lme=ro;let Ev=class extends we{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};p([f({type:Number,json:{write:!0}})],Ev.prototype,"value",void 0),p([f({type:String,json:{write:!0}})],Ev.prototype,"label",void 0),p([f({type:Ze,json:{type:[Ft],write:!0}})],Ev.prototype,"color",void 0),Ev=p([W("esri.renderers.support.ColormapInfo")],Ev);const ume=Ev,iSt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],sz=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],cme=new Pt({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function zI(e,t){if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function QX(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function sSt(e){if(e.type==="multipart"){const t=e.clone();return t.colorRamps?.length&&(t.colorRamps=t.colorRamps.reverse().map(r=>QX(r))),t}return QX(e)}function KX(e,t){if(!e)return;const r=sz;let n=null;return e.type==="algorithmic"?r.some(i=>{if(zI(e.fromColor.toRgb(),i.fromColor)&&zI(e.toColor.toRgb(),i.toColor))return n=i.id,!0}):e.type==="multipart"&&r.some(i=>{const s=e.colorRamps,o=i.colorRamps;if(s&&o&&s.length===o.length&&!o.some((a,l)=>{if(!zI(s[l].fromColor.toRgb(),new Ze(a.fromColor).toRgb())||!zI(s[l].toColor.toRgb(),new Ze(a.toColor).toRgb()))return!0})){if(n)return!0;n=i.id}}),n}function oSt(e,t,r=!1){if(!e)return;let n=!1,i=KX(e);return i!=null||r||(n=!0,i=KX(e=sSt(e))),i?{id:i,inverted:n}:void 0}function hme(e,t=!1){const r=typeof e=="string"?e:oSt(e,void 0,t)?.id;return r?cme.toJSON(r):null}function aSt(e,t="esriCIELabAlgorithm"){const r=sz.find(({id:n})=>n===e);return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map(n=>({type:"algorithmic",algorithm:t,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...r.fromColor],toColor:[...r.toColor]}:null}function pme(e){const t=(e=e||{}).numColors||256,r=e.distanceOffset||0,n=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),i=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:r,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:i,isCustomInterval:n,weights:e.weights}}function lSt(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=r,a=e.s===0,l=t.s===0;let u=e.h,c=t.h;a&&!l?u=c:l&&!a&&(t={...t,h:u},c=u);let h,d=Math.abs(c-u);const m=360;d<m/2?h=(c-u)*s:(d=m-d,h=u>c?d*s:-d*s);const y=(t.s-e.s)*s,g=(t.v-e.v)*s;let{s:b,v:S}=e,E=u;if(i){const w=i/s;E=(E+w*h+m)%m,b+=w*y,S+=w*g}const x=[];for(let w=0;w<n-1;w++)x.push({h:E,s:b,v:S}),E=(E+h+m)%m,b+=y,S+=g;return x.push(o?{h:E,s:b,v:S}:t),x}function uSt(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=r;let{l:a,a:l,b:u}=e;const c=(t.l-a)*s,h=(t.a-l)*s,d=(t.b-u)*s,m=[];if(i){const y=i/s;a+=y*c,l+=y*h,u+=y*d}for(let y=0;y<n-1;y++)m.push({l:a,a:l,b:u}),a+=c,l+=h,u+=d;return m.push(o?{l:a,a:l,b:u}:t),m}function cSt(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=r,a=e.h,l=t.h,u=2*Math.PI;let c;if(a<=l){const E=l-a,x=l-a-u;c=Math.abs(x)<Math.abs(E)?x:E}else{const E=l+u-a,x=l-a;c=Math.abs(x)<Math.abs(E)?x:E}const h=c*s,d=(t.l-e.l)*s,m=(t.c-e.c)*s;let{l:y,c:g,h:b}=e;if(i){const E=i/s;y+=E*d,g+=E*m,b=(b+E*h+u)%u}const S=[];for(let E=0;E<n-1;E++)S.push({l:y,c:g,h:b}),y+=d,g+=m,b=(b+h+u)%u;return S.push(o?{l:y,c:g,h:b}:t),S}function dme(e,t){let{fromColor:r,toColor:n}=e;r=[...r],n=[...n],r.length===3&&(r=r.concat([255])),n.length===3&&(n=n.concat([255]));const i=e.algorithm||"esriCIELabAlgorithm",s=pme(t),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:u}=s;if(o===1&&a===0)return[r];if(o===2&&a===0&&!l)return[r,n];const c={r:r[0],g:r[1],b:r[2]},h={r:n[0],g:n[1],b:n[2]},d=i==="esriCIELabAlgorithm"?uSt(e9(c),e9(h),s):i==="esriHSVAlgorithm"?lSt(q5(c),q5(h),s):cSt(t9(c),t9(h),s),m=[],y=r[3]??255,g=((n[3]??255)-y)/(o-1);for(let b=0;b<o;b++){const{r:S,g:E,b:x}=n3(d[b]),w=u?Math.round(y+g*b):255;m.push([S,E,x,w])}return m}function hSt(e,t){const{numColors:r,interpolateAlpha:n}=pme(t);let i=t?.weights;const{colorRamps:s}=e;if(i){const h=i.reduce((d,m)=>d+m);i=i.map(d=>d/h)}else{i=[];for(let h=0;h<s.length;h++)i[h]=1/s.length}const o=[],a=1/(r-1);let l=0,u=!1;for(let h=0;h<s.length;h++){const d=o.length,m=u?0:d*a-l;l+=i[h];let y=h===s.length-1?r-1-d:(i[h]-m)/a;if(u=Math.ceil(y)===y,y=Math.ceil(y),y===0)continue;const g=dme(s[h],{numColors:y,interpolateAlpha:n,distanceOffset:m/i[h],distanceInterval:a/i[h]});o.push(...g)}const c=[...s[s.length-1].toColor];return c.length===3&&c.push(255),o.push(c),o}function fme(e,t){const r=rw(e)?e.toJSON():e;return r.type==="multipart"?hSt(r,t):dme(r,t)}function Vg(e,t){const r=fme(e,t),n=t?.interpolateAlpha;return r.forEach((i,s)=>{i.unshift(s),n||i.pop()}),r}function mme(e){const t=[];for(let r=0;r<e.length;r+=4){const n=q5({r:e[r],g:e[r+1],b:e[r+2]});t.push([n.h/60,n.s/100,255*n.v/100])}return t}function eQ(e){const t=q5(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function tQ(e){return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:eQ(e.fromColor),ToColor:eQ(e.toColor)}}function yme(e){const t=hme(e);if(!t)return null;if(e.type==="algorithmic")return{...tQ(e),Name:t};if(e.colorRamps){const r=e.colorRamps.map(tQ);return{type:"MultiPartColorRamp",NumColorRamps:r.length,ArrayOfColorRamp:r,Name:t}}return null}function pSt(e){const t=e.reverse().map(r=>{const n=r.toString(16);return n.length<2?"0"+n:n});return 4294967295&Number.parseInt(t.join(""),16)}var Bx;let Vx=Bx=class extends we{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const r=e[0].length===5,n=[...e].sort((i,s)=>i[0]-s[0]).map(i=>ume.fromJSON({value:i[0],color:r?i.slice(1,5):i.slice(1,4).concat([255]),label:t?t[i[0]]??"":i[0]}));return new Bx({colormapInfos:n})}static createFromColorramp(e){const t=Vg(e);return Bx.createFromColormap(t)}clone(){return new Bx({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};p([f({type:[ume],json:{write:!0}})],Vx.prototype,"colormapInfos",void 0),p([tt({rasterColormap:"raster-colormap"})],Vx.prototype,"type",void 0),Vx=Bx=p([W("esri.renderers.RasterColormapRenderer")],Vx);const oz=Vx;var YF;let Xa=YF=class extends we{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return NR(e)}clone(){return new YF({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:se(this.colorRamp)})}};p([f({type:Number,json:{write:!0}})],Xa.prototype,"altitude",void 0),p([f({type:Number,json:{write:!0}})],Xa.prototype,"azimuth",void 0),p([f({types:OR,json:{write:!0}})],Xa.prototype,"colorRamp",void 0),p([Ee("colorRamp")],Xa.prototype,"readColorRamp",null),p([f({type:["traditional","multi-directional"],json:{write:!0}})],Xa.prototype,"hillshadeType",void 0),p([f({type:Number,json:{write:!0}})],Xa.prototype,"pixelSizePower",void 0),p([f({type:Number,json:{write:!0}})],Xa.prototype,"pixelSizeFactor",void 0),p([f({type:["none","adjusted"],json:{write:!0}})],Xa.prototype,"scalingType",void 0),p([tt({rasterShadedRelief:"raster-shaded-relief"})],Xa.prototype,"type",void 0),p([f({type:Number,json:{write:!0}})],Xa.prototype,"zFactor",void 0),Xa=YF=p([W("esri.renderers.RasterShadedReliefRenderer")],Xa);const gme=Xa,LS=new Pt({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),vme={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var XF;let Bn=XF=class extends we{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return NR(e)}get statistics(){return this._get("statistics")}set statistics(e){Cse(Pe.getLogger(this),"statistics",{replacement:"customStatistics",version:"4.31",warnOnce:!0}),this._set("statistics",e)}get customStatistics(){const e=this.statistics;return e&&Array.isArray(e[0])?e.map(t=>({min:t[0],max:t[1],avg:t[2],stddev:t[3]})):e}set customStatistics(e){this._set("statistics",e?.map(t=>[t.min,t.max,t.avg??0,t.stddev??1]))}readCustomStatistics(e){return e?.map(t=>({min:t[0],max:t[1],avg:t[2],stddev:t[3]}))}writeCustomStatistics(e,t,r){e?.length&&(t[r]=e.map(n=>[n.min,n.max,n.avg??0,n.stddev??1]))}readStretchType(e,t){let r=t.stretchType;return typeof r=="number"&&(r=vme[r]),LS.read(r)}clone(){return new XF({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:se(this.statistics),customStatistics:se(this.customStatistics),gamma:se(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:se(this.colorRamp),histograms:se(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};p([f({types:OR,json:{write:!0}})],Bn.prototype,"colorRamp",void 0),p([Ee("colorRamp")],Bn.prototype,"readColorRamp",null),p([f({type:Boolean,json:{write:!0}})],Bn.prototype,"computeGamma",void 0),p([f({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],Bn.prototype,"dynamicRangeAdjustment",void 0),p([f({type:[Number],json:{write:!0}})],Bn.prototype,"gamma",void 0),p([f({type:Number,json:{write:!0}})],Bn.prototype,"maxPercent",void 0),p([f({type:Number,json:{write:!0}})],Bn.prototype,"minPercent",void 0),p([f({type:Number,json:{write:!0}})],Bn.prototype,"numberOfStandardDeviations",void 0),p([f({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],Bn.prototype,"outputMax",void 0),p([f({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],Bn.prototype,"outputMin",void 0),p([f({type:Number,json:{write:!0}})],Bn.prototype,"sigmoidStrengthLevel",void 0),p([f({})],Bn.prototype,"statistics",null),p([f()],Bn.prototype,"histograms",void 0),p([f({json:{type:[[Number]],name:"statistics",write:!0}})],Bn.prototype,"customStatistics",null),p([Ee("customStatistics")],Bn.prototype,"readCustomStatistics",null),p([Re("customStatistics")],Bn.prototype,"writeCustomStatistics",null),p([f({type:Boolean,json:{write:!0}})],Bn.prototype,"useGamma",void 0),p([f({type:LS.apiValues,json:{type:LS.jsonValues,write:LS.write}})],Bn.prototype,"stretchType",void 0),p([Ee("stretchType",["stretchType"])],Bn.prototype,"readStretchType",null),p([tt({rasterStretch:"raster-stretch"})],Bn.prototype,"type",void 0),Bn=XF=p([W("esri.renderers.RasterStretchRenderer")],Bn);const az=Bn,Gx={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ca({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ke.WebMercator}),minus180Line:new Ca({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ke.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ca({paths:[[[180,-180],[180,180]]],spatialReference:Ke.WGS84}),minus180Line:new Ca({paths:[[[-180,-180],[-180,180]]],spatialReference:Ke.WGS84})}};function hm(e,t){return Math.ceil((e-t)/(2*t))}function lz(e,t){const r=PS(e);for(const n of r)for(const i of n)i[0]+=t;return e}function PS(e){return gh(e)?e.rings:e.paths}function $s(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function an(e){return typeof e=="string"?Zn(e):se(e)}function As(e,t,r){const n={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))n[i]=s.map(o=>As(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r?.[i]);n[i]=JSON.stringify(o)}else n[i]=JSON.stringify(s);else n[i]=s}return n}async function dSt(e,t,r,n){const i=an(e),s=t[0].spatialReference,o={...n,responseType:"json",query:{...i.query,f:"json",sr:md(s),target:JSON.stringify({geometryType:zs(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Xe(i.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(c=>{const h=An(c);return h.spatialReference=s,h})}}function fSt(e){return{geometryType:zs(e[0]),geometries:e.map(t=>t.toJSON())}}function bme(e,t,r){const n=sdt(t);return e.map(i=>{const s=n.fromJSON(i);return s.spatialReference=r,s})}async function mSt(e,t,r){const n=typeof e=="string"?Zn(e):e,i=t[0].spatialReference,s=zs(t[0]),o={...r,query:{...n.query,f:"json",sr:md(i),geometries:JSON.stringify(fSt(t))}},{data:a}=await Xe(n.path+"/simplify",o);return bme(a.geometries,s,i)}const wme=()=>Pe.getLogger("esri.geometry.support.normalizeUtils");function ySt(e){return e.type==="polygon"}function gSt(e){return e[0].type==="polygon"}function vSt(e){return e[0].type==="polyline"}function rQ(e){const t=[];let r=0,n=0;for(let i=0;i<e.length;i++){const s=e[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(r=o[0],n=r):(r=Math.min(r,o[0]),n=Math.max(n,o[0]));o&&t.push([(r+n)/2,0])}return t}function _me(e,t){if(!(e instanceof Ca||e instanceof ts)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw wme().error(i),new ie(i)}const r=PS(e),n=[];for(const i of r){const s=[];n.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],u=i[o+1][0],c=i[o+1][1],h=Math.sqrt((u-a)*(u-a)+(c-l)*(c-l)),d=(c-l)/h,m=(u-a)/h,y=h/t;if(y>1){for(let E=1;E<=y-1;E++){const x=E*t,w=m*x+a,T=d*x+l;s.push([w,T])}const g=(h+Math.floor(y-1)*t)/2,b=m*g+a,S=d*g+l;s.push([b,S])}s.push([u,c])}}return ySt(e)?new ts({rings:n,spatialReference:e.spatialReference}):new Ca({paths:n,spatialReference:e.spatialReference})}function nQ(e,t,r){if(t){const n=_me(e,1e6);e=zy(n,!0)}return r&&(e=lz(e,r)),e}function iQ(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const i=hm(n,t);e[0]=n+i*(-2*t)}else if(n<r){const i=hm(n,r);e[0]=n+i*(-2*r)}}else{const n=e.x;if(n>t){const i=hm(n,t);e=e.clone().offset(i*(-2*t),0)}else if(n<r){const i=hm(n,r);e=e.clone().offset(i*(-2*r),0)}}return e}function bSt(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],s=t.geometries[n],o=PS(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let c=0;for(let d=0;d<l.length;d++){const m=l[d][0];c=m>c?m:c}c=Number(c.toFixed(9));const h=-360*hm(c,180);for(let d=0;d<l.length;d++){const m=s.getPoint(a,d);s.setPoint(a,d,m.clone().offset(h,0))}return!0}})}if(i===r){if(gSt(e))for(const a of PS(s))e[i]=e[i].addRing(a);else if(vSt(e))for(const a of PS(s))e[i]=e[i].addPath(a)}else r=i,e[i]=s}return e}async function cu(e,t,r){if(!Array.isArray(e))return cu([e],t);t&&typeof t!="string"&&wme().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof t=="string"?t:t?.url??pr.geometryServiceUrl;let i,s,o,a,l,u,c,h,d=0;const m=[],y=[];for(const w of e)if(w!=null)if(i||(i=w.spatialReference,s=Bs(i),o=i.isWebMercator,u=o?102100:4326,a=Gx[u].maxX,l=Gx[u].minX,c=Gx[u].plus180Line,h=Gx[u].minus180Line),s)if(w.type==="mesh")y.push(w);else if(w.type==="point")y.push(iQ(w.clone(),a,l));else if(w.type==="multipoint"){const T=w.clone();T.points=T.points.map(I=>iQ(I,a,l)),y.push(T)}else if(w.type==="extent"){const T=w.clone()._normalize(!1,!1,s);y.push(T.rings?new ts(T):T)}else if(w.extent){const T=w.extent,I=hm(T.xmin,l)*(2*a);let M=I===0?w.clone():lz(w.clone(),I);T.offset(I,0);let{xmin:C,xmax:k}=T;C=Number(C.toFixed(9)),k=Number(k.toFixed(9)),T.intersects(c)&&k!==a?(d=k>d?k:d,M=nQ(M,o),m.push(M),y.push("cut")):T.intersects(h)&&C!==l?(d=k*(2*a)>d?k*(2*a):d,M=nQ(M,o,360),m.push(M),y.push("cut")):y.push(M)}else y.push(w.clone());else y.push(w);else y.push(w);let g=hm(d,a),b=-90;const S=g,E=new Ca;for(;g>0;){const w=360*g-180;E.addPath([[w,b],[w,-1*b]]),b*=-1,g--}if(m.length>0&&S>0){const w=bSt(m,await dSt(n,m,E,r)),T=[],I=[];for(let k=0;k<y.length;k++){const N=y[k];if(N!=="cut")I.push(N);else{const F=w.shift(),P=e[k];P!=null&&P.type==="polygon"&&P.rings&&P.rings.length>1&&F.rings.length>=P.rings.length?(T.push(F),I.push("simplify")):I.push(o?ym(F):F)}}if(!T.length)return I;const M=await mSt(n,T,r),C=[];for(let k=0;k<I.length;k++){const N=I[k];N!=="simplify"?C.push(N):C.push(o?ym(M.shift()):M.shift())}return C}const x=[];for(let w=0;w<y.length;w++){const T=y[w];if(T!=="cut")x.push(T);else{const I=m.shift();x.push(o===!0?ym(I):I)}}return x}function wSt(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&Bs(e.spatialReference);if(!r)return t;const[n,i]=r.valid,s=2*i,{width:o}=t;let a,{xmin:l,xmax:u}=t;if([l,u]=[u,l],e.type==="extent"||o===0||o<=i||o>s||l<n||u>i)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=rQ(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=rQ(e.paths);break;case"multipoint":a=e.points}const c=t.clone();for(let h=0;h<a.length;h++){let d=a[h][0];d<0?(d+=i,u=Math.max(d,u)):(d-=i,l=Math.min(d,l))}return c.xmin=l,c.xmax=u,c.width<o?(c.xmin-=i,c.xmax-=i,c):t}function dO(e,t,r){const n=Bs(r);if(n==null)return e;const[i,s]=n.valid,o=2*s;let a=0,l=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<i&&(a=-Math.ceil(Math.abs(t-i)/o)),e>s?l=Math.ceil(Math.abs(e-s)/o):e<i&&(l=-Math.ceil(Math.abs(e-i)/o));let u=e+(a-l)*o;const c=u-t;return c>s?u-=o:c<i&&(u+=o),u}function _St(e,t){const r=Bs(t);if(r){const[n,i]=r.valid,s=i-n;if(e<n)for(;e<n;)e+=s;if(e>i)for(;e>i;)e-=s}return e}let R_=class{constructor(e=null,t=null,r=null){this.minValue=e,this.maxValue=t,this.noDataValue=r}};const xSt=9999999e31,SSt=2e-7,ESt={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function r0(e){return ESt[e]??[-34028234663852886e22,34028234663852886e22]}function TSt(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function xme(e){return(e?.startsWith("s")||e?.startsWith("u"))??!1}function ISt(e,t,r,n){let[i,s]=r0(r);const o=xme(r);return o&&(i-=1e-5,s+=1e-5),o?r.startsWith("u")?MSt(e,t,n,[i,s]):CSt(e,t,n,[i,s]):kSt(e,t,n,[i,s])}function ASt(e,t){for(let r=0;r<t.length;r++)t[r]&&isNaN(e[r])&&(t[r]=0,e[r]=0)}function MSt(e,t,r,n){const[i,s]=n;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<i||a>s?t[o]=0:r[o]=a+.5|0}}function CSt(e,t,r,n){const[i,s]=n;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<i||a>s?t[o]=0:r[o]=a+(a>0?.5:-.5)|0}}function kSt(e,t,r,n){const[i,s]=n;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<i||a>s?t[o]=0:r[o]=a}}function fO(e,t,r){if(e.depthCount&&e.depthCount>1)return;const{pixels:n,statistics:i,pixelType:s}=e,o=n[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),u=s==="f32"||s==="f64",c=r0(s);let h=!1;for(let d=0;d<n.length;d++){const m=typeof t=="number"?t:t[d];if(m==null)continue;const y=i?.[d]?.minValue??c[0],g=i?.[d]?.maxValue??c[1];if(y>m+Number.EPSILON||g<m-Number.EPSILON)continue;const b=a[d]||l.slice(),S=n[d],E=r?.customFloatTolerance;if(u&&E!==0){let x=E;x||(x=Math.abs(m)>=xSt?SSt*Math.abs(m):s==="f32"?2**-23:Number.EPSILON);for(let w=0;w<S.length;w++)b[w]&&Math.abs(S[w]-m)<x&&(S[w]=0,b[w]=0,l[w]=0,h=!0)}else for(let x=0;x<S.length;x++)b[x]&&S[x]===m&&(S[x]=0,b[x]=0,l[x]=0,h=!0);a[d]=b}h&&(e.bandMasks=e.bandMasks||e.pixels.length>1?a:null,e.mask=l),h&&"updateStatistics"in e&&e.updateStatistics()}var Sf;let no=Sf=class extends we{static createEmptyBand(e,t){return new(Sf.getPixelArrayConstructor(e))(t)}static combineBandMasks(e){if(e.length<2)return e[0];const t=e[0].length,r=new Uint8Array(t).fill(255);for(let n=0;n<e.length;n++){const i=e[n];for(let s=0;s<t;s++)i[s]||(r[s]=0)}return r}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels?.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new ie("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new R_)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(r=>RSt(r,this.mask));const e=this.mask;let t=0;if(e!=null)for(let r=0;r<e.length;r++)e[r]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32"||!this.pixels)return;const[t,r]=r0(e),n=this.pixels,i=this.width*this.height,s=n.length;let o,a,l;const u=[];for(let c=0;c<s;c++){l=Sf.createEmptyBand(e,i),o=n[c];for(let h=0;h<i;h++)a=o[h],l[h]=a>r?r:a<t?t:a;u.push(l)}this.pixels=u,this.pixelType=e}extractBands(e){const{pixels:t,statistics:r}=this;if(e==null||e.length===0||!t||t.length===0)return this;const n=t.length,i=e.some(h=>h>=t.length),s=n===e.length&&!e.some((h,d)=>h!==d);if(i||s)return this;const o=this.bandMasks?.length===n?e.map(h=>this.bandMasks[h]):void 0;let{mask:a,validPixelCount:l}=this;const{width:u,height:c}=this;return o?.length&&(a=Sf.combineBandMasks(o),l=a.filter(h=>!!h).length),new Sf({pixelType:this.pixelType,width:u,height:c,mask:a,bandMasks:o,validPixelCount:l,maskIsAlpha:this.maskIsAlpha,pixels:e.map(h=>t[h]),statistics:r&&e.map(h=>r[h])})}clone(){const e=new Sf({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask!=null&&(e.mask=new Uint8Array(this.mask)),this.bandMasks&&(e.bandMasks=this.bandMasks.map(n=>new Uint8Array(n)));const r=Sf.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const n=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=n?this.pixels[t].slice():new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=se(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:r,premultiplyAlpha:n,pixels:i}=this;if(!e||!i?.length)return void Pe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let s,o,a,l;s=o=a=i[0],i.length>=3?(o=i[1],a=i[2]):i.length===2&&(o=i[1]);const u=new Uint32Array(e),c=this.width*this.height;if(s.length===c)if(t!=null&&t.length===c)if(r)for(l=0;l<c;l++){const h=t[l];if(h){const d=h/255;u[l]=n?h<<24|a[l]*d<<16|o[l]*d<<8|s[l]*d:h<<24|a[l]<<16|o[l]<<8|s[l]}}else for(l=0;l<c;l++)t[l]&&(u[l]=255<<24|a[l]<<16|o[l]<<8|s[l]);else for(l=0;l<c;l++)u[l]=255<<24|a[l]<<16|o[l]<<8|s[l];else Pe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:r,statistics:n}=this;if(!e||!t?.length)return void Pe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const i=this.pixelType;let s=1,o=0,a=1;if(n&&n.length>0){for(const g of n)if(g.minValue!=null&&(o=Math.min(o,g.minValue)),g.maxValue!=null&&g.minValue!=null){const b=g.maxValue-g.minValue;a=Math.max(a,b)}s=255/a}else{let g=255;i==="s8"?(o=-128,g=127):i==="u16"?g=65535:i==="s16"?(o=-32768,g=32767):i==="u32"?g=4294967295:i==="s32"?(o=-2147483648,g=2147483647):i==="f32"?(o=-34e38,g=34e38):i==="f64"&&(o=-Number.MAX_VALUE,g=Number.MAX_VALUE),s=255/(g-o)}const l=new Uint32Array(e),u=this.width*this.height;let c,h,d,m,y;if(c=h=d=t[0],c.length!==u)return Pe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(h=t[1],t.length>=3&&(d=t[2]),r!=null&&r.length===u)for(m=0;m<u;m++)r[m]&&(l[m]=255<<24|(d[m]-o)*s<<16|(h[m]-o)*s<<8|(c[m]-o)*s);else for(m=0;m<u;m++)l[m]=255<<24|(d[m]-o)*s<<16|(h[m]-o)*s<<8|(c[m]-o)*s;else if(r!=null&&r.length===u)for(m=0;m<u;m++)y=(c[m]-o)*s,r[m]&&(l[m]=255<<24|y<<16|y<<8|y);else for(m=0;m<u;m++)y=(c[m]-o)*s,l[m]=255<<24|y<<16|y<<8|y}_fillFrom32Bit(e){const{pixels:t,mask:r}=this;if(!e||!t?.length)return Pe.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let n,i,s,o;n=i=s=t[0],t.length>=3?(i=t[1],s=t[2]):t.length===2&&(i=t[1]);const a=this.width*this.height;if(n.length!==a)return Pe.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(r!=null&&r.length===a)for(o=0;o<a;o++)e[l++]=n[o],e[l++]=i[o],e[l++]=s[o],e[l++]=1&r[o];else for(o=0;o<a;o++)e[l++]=n[o],e[l++]=i[o],e[l++]=s[o],e[l++]=1}};function RSt(e,t){let r=1/0,n=-1/0;const i=e.length;let s,o=0;if(t!=null)for(s=0;s<i;s++)t[s]&&(o=e[s],r=o<r?o:r,n=o>n?o:n);else for(s=0;s<i;s++)o=e[s],r=o<r?o:r,n=o>n?o:n;return new R_(r,n)}p([f({json:{write:!0}})],no.prototype,"width",void 0),p([f({json:{write:!0}})],no.prototype,"height",void 0),p([f({json:{write:!0}})],no.prototype,"pixelType",void 0),p([ur("pixelType")],no.prototype,"castPixelType",null),p([f({json:{write:!0}})],no.prototype,"validPixelCount",void 0),p([f({json:{write:!0}})],no.prototype,"mask",void 0),p([f({json:{write:!0}})],no.prototype,"maskIsAlpha",void 0),p([f({json:{write:!0}})],no.prototype,"pixels",void 0),p([f()],no.prototype,"premultiplyAlpha",void 0),p([f({json:{write:!0}})],no.prototype,"statistics",void 0),p([f({json:{write:!0}})],no.prototype,"depthCount",void 0),p([f({json:{write:!0}})],no.prototype,"noDataValues",void 0),p([f({json:{write:!0}})],no.prototype,"bandMasks",void 0),no=Sf=p([W("esri.layers.support.PixelBlock")],no);const Ht=no;var QF,KF;(function(e){e[e.matchAny=0]="matchAny",e[e.matchAll=1]="matchAll"})(QF||(QF={})),function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(KF||(KF={}));const OSt=6;function Qr(e){return e!=null&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function NSt(e){if(!e?.length||e.some(c=>!Qr(c)))return null;if(e.length===1)return e[0]?.clone()??null;const t=e,{width:r,height:n,pixelType:i}=t[0];if(t.some(c=>c.width!==r||c.height!==n))return null;const s=t.map(({mask:c})=>c).filter(c=>c!=null);let o=null;s.length&&(o=new Uint8Array(r*n),o.set(s[0]),s.length>1&&Sme(s.slice(1),o));const a=[];t.forEach(({pixels:c})=>a.push(...c));const l=t.map(({statistics:c})=>c).filter(c=>c?.length),u=[];return l.forEach(c=>u.push(...c)),new Ht({pixelType:i,width:r,height:n,mask:o,pixels:a,statistics:u.length?u:null})}function Tv(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const r=t.sort((h,d)=>h[0]-d[0]);let n=0;r[0][0]<0&&(n=r[0][0]);const i=Math.max(256,r[r.length-1][0]-n+1),s=new Uint8Array(4*i),o=[];let a,l=0,u=0;const c=r[0].length===5;if(i>65536)return r.forEach(h=>{o[h[0]-n]=c?h.slice(1):h.slice(1).concat([255])}),{indexed2DColormap:o,offset:n,alphaSpecified:c};if(e.fillUnspecified)for(a=r[u],l=a[0]-n;l<i;l++)s[4*l]=a[1],s[4*l+1]=a[2],s[4*l+2]=a[3],s[4*l+3]=c?a[4]:255,l===a[0]-n&&(a=u===r.length-1?a:r[++u]);else for(l=0;l<r.length;l++)a=r[l],u=4*(a[0]-n),s[u]=a[1],s[u+1]=a[2],s[u+2]=a[3],s[u+3]=c?a[4]:255;return{indexedColormap:s,offset:n,alphaSpecified:c}}function WL(e,t){if(!Qr(e)||!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const r=e.clone(),n=r.pixels;let i=r.mask;const s=r.width*r.height;if(n.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t;let c=0;const h=n[0],d=new Uint8Array(h.length),m=new Uint8Array(h.length),y=new Uint8Array(h.length);let g,b=0;if(o){const S=o.length-1;if(i!=null)for(c=0;c<s;c++)i[c]&&(b=4*(h[c]-l),b<l||b>S?i[c]=0:(d[c]=o[b],m[c]=o[b+1],y[c]=o[b+2],i[c]=o[b+3]));else{for(i=new Uint8Array(s),c=0;c<s;c++)b=4*(h[c]-l),b<l||b>S?i[c]=0:(d[c]=o[b],m[c]=o[b+1],y[c]=o[b+2],i[c]=o[b+3]);r.mask=i}}else if(a)if(i!=null)for(c=0;c<s;c++)i[c]&&(g=a[h[c]],d[c]=g[0],m[c]=g[1],y[c]=g[2],i[c]=g[3]);else{for(i=new Uint8Array(s),c=0;c<s;c++)g=a[h[c]],d[c]=g[0],m[c]=g[1],y[c]=g[2],i[c]=g[3];r.mask=i}return r.pixels=[d,m,y],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=u,r}function e7(e,t){if(!Qr(e))return null;const{pixels:r,mask:n}=e,i=r.length;let s=t.lut;const{offset:o}=t;s&&s[0].length===1&&(s=r.map(()=>s));const a=[],l=t.outputPixelType||"u8";for(let c=0;c<i;c++){const h=uz(r[c],n,s[c],o||0,l);a.push(h)}const u=new Ht({width:e.width,height:e.height,pixels:a,mask:n,pixelType:l});return u.updateStatistics(),u}function uz(e,t,r,n,i){const s=e.length,o=Ht.createEmptyBand(i,s);if(t)for(let a=0;a<s;a++)t[a]&&(o[a]=r[e[a]-n]);else for(let a=0;a<s;a++)o[a]=r[e[a]-n];return o}function LSt(e,t){if(!Qr(e))return null;const r=e.clone(),{pixels:n}=r,i=r.width*r.height,s=t.length,o=Math.floor(s/2),a=t[Math.floor(o)],l=n[0];let u,c,h,d,m,y,g=!1;const b=new Uint8Array(i),S=new Uint8Array(i),E=new Uint8Array(i);let x=r.mask;const w=t[0].mappedColor.length===4;for(x||(x=new Uint8Array(i),x.fill(w?255:1),r.mask=x),m=0;m<i;m++)if(x[m]){for(u=l[m],g=!1,y=o,c=a,h=0,d=s-1;d-h>1;){if(u===c.value){g=!0;break}u>c.value?h=y:d=y,y=Math.floor((h+d)/2),c=t[Math.floor(y)]}g||(u===t[h].value?(c=t[h],g=!0):u===t[d].value?(c=t[d],g=!0):u<t[h].value?(g=!1,c=null):u>t[h].value&&(u<t[d].value?(c=t[h],g=!0):d===s-1?(g=!1,c=null):(c=t[d],g=!0))),g?(b[m]=c.mappedColor[0],S[m]=c.mappedColor[1],E[m]=c.mappedColor[2],x[m]=c.mappedColor[3]):b[m]=S[m]=E[m]=x[m]=0}return r.pixels=[b,S,E],r.mask=x,r.pixelType="u8",r.maskIsAlpha=w,r}function PSt(e,t){if(!Qr(e))return null;const{width:r,height:n}=e,{inputRanges:i,outputValues:s,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:u}=t,c=e.pixels[0],h=Ht.createEmptyBand(o,c.length),d=e.mask,m=new Uint8Array(r*n);d?m.set(d):m.fill(255);const y=e.pixelType.startsWith("f")?1e-6:0,g=i.map(w=>w-y);g[0]=i[0],g[g.length-1]=i[i.length-1]+(u?1e-6:0);const b=i.length/2,[S,E]=r0(o);for(let w=0;w<n;w++)for(let T=0;T<r;T++){const I=w*r+T;if(m[I]){const M=c[I];let C=!1;for(let k=b-1;k>=0;k--)if(M===g[2*k]||M>g[2*k]&&M<g[2*k+1]){h[I]=s[k],C=!0;break}C||(l?h[I]=M>E?E:M<S?S:M:m[I]=0)}}const x=a?.length;if(x)for(let w=0;w<n;w++)for(let T=0;T<r;T++){const I=w*r+T;if(!d||d[I]){const M=c[I];for(let C=0;C<x;C+=2)if(M>=a[C]&&M<=a[C+1]){h[I]=0,m[I]=0;break}}}return new Ht({width:r,height:n,pixelType:o,pixels:[h],mask:m})}function sQ(e,t,r,n){const i=r!=null&&r.length>=2?new Set(r):null,s=r?.length===1?r[0]:null,o=!!t?.length;for(let a=0;a<e.length;a++)if(n[a]){const l=e[a];if(o){let u=!1;for(let c=0;c<t.length;c+=2)if(l>=t[c]&&l<=t[c+1]){u=!0;break}u||(n[a]=0)}n[a]&&(l===s||i?.has(l))&&(n[a]=0)}}function oQ(e,t){const r=e[0].length;for(let n=0;n<r;n++)if(t[n]){let i=!1;for(let s=0;s<e.length;s++)if(e[s][n]){i=!0;break}i||(t[n]=0)}}function Sme(e,t){const r=e[0].length;for(let n=0;n<r;n++)if(t[n]){let i=!1;for(let s=0;s<e.length;s++)if(e[s][n]===0){i=!0;break}i&&(t[n]=0)}}function DSt(e,t){if(!Qr(e))return null;const{width:r,height:n,pixels:i}=e,s=r*n,o=new Uint8Array(s);e.mask?o.set(e.mask):o.fill(255);const a=i.length,{includedRanges:l,noDataValues:u,outputPixelType:c,matchAll:h,lookups:d}=t;if(d){const m=[];for(let y=0;y<a;y++){const g=d[y],b=uz(i[y],o,g.lut,g.offset||0,"u8");m.push(b)}m.length===1?o.set(m[0]):h?oQ(m,o):Sme(m,o)}else if(h){const m=[];for(let y=0;y<a;y++){const g=new Uint8Array(s);g.set(o),sQ(i[y],l?.slice(2*y,2*y+2),u?.[y],g),m.push(g)}m.length===1?o.set(m[0]):oQ(m,o)}else for(let m=0;m<a;m++)sQ(i[m],l?.slice(2*m,2*m+2),u?.[m],o);return new Ht({width:r,height:n,pixelType:c,pixels:i,mask:o})}function FSt(e){const{srcPixelType:t,inputRanges:r,outputValues:n,allowUnmatched:i,noDataRanges:s,isLastInputRangeInclusive:o,outputPixelType:a}=e;if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const l=t.includes("16")?65536:256,u=t.includes("s")?-l/2:0,c=Ht.createEmptyBand(a,l),h=new Uint8Array(l);i&&h.fill(255);const[d,m]=r0(a);if(r?.length&&n?.length){const y=r.map(g=>g-1e-6);y[0]=r[0],o&&(y[y.length-1]=r[r.length-1]);for(let g=0;g<y.length;g++){const b=n[g]>m?m:n[g]<d?d:n[g],S=Math.ceil(y[2*g]-u),E=Math.floor(y[2*g+1]-u);for(let x=S;x<=E;x++)c[x]=b,h[x]=255}}if(s?.length)for(let y=0;y<s.length;y++){const g=Math.ceil(s[2*y]-u),b=Math.floor(s[2*y+1]-u);for(let S=g;S<=b;S++)h[S]=0}return{lut:c,offset:u,mask:h}}function jSt(e,t,r){if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const n=e.includes("16")?65536:256,i=e.includes("s")?-n/2:0,s=new Uint8Array(n);if(t)for(let o=0;o<t.length;o++){const a=Math.ceil(t[2*o]-i),l=Math.floor(t[2*o+1]-i);for(let u=a;u<=l;u++)s[u]=255}else s.fill(255);if(r)for(let o=0;o<r.length;o++)s[r[o]-i]=0;return{lut:s,offset:i}}function USt(e,t,r,n,i,s,o,a){return{xmin:i<=r*e?0:i<r*e+e?i-r*e:e,ymin:s<=n*t?0:s<n*t+t?s-n*t:t,xmax:i+o<=r*e?0:i+o<r*e+e?i+o-r*e:e,ymax:s+a<=n*t?0:s+a<n*t+t?s+a-n*t:t}}function BSt(e,t){if(!e||e.length===0)return null;const r=e.find(y=>y.pixelBlock);if(r?.pixelBlock==null)return null;const n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,i=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,s=.01*Math.min(n,i),o=e.sort((y,g)=>Math.abs(y.extent.ymax-g.extent.ymax)>s?g.extent.ymax-y.extent.ymax:Math.abs(y.extent.xmin-g.extent.xmin)>s?y.extent.xmin-g.extent.xmin:0),a=Math.min.apply(null,o.map(y=>y.extent.xmin)),l=Math.min.apply(null,o.map(y=>y.extent.ymin)),u=Math.max.apply(null,o.map(y=>y.extent.xmax)),c=Math.max.apply(null,o.map(y=>y.extent.ymax)),h={x:Math.round((t.xmin-a)/n),y:Math.round((c-t.ymax)/i)},d={width:Math.round((u-a)/n),height:Math.round((c-l)/i)},m={width:Math.round((t.xmax-t.xmin)/n),height:Math.round((t.ymax-t.ymin)/i)};return Math.round(d.width/r.pixelBlock.width)*Math.round(d.height/r.pixelBlock.height)!==o.length||h.x<0||h.y<0||d.width<m.width||d.height<m.height?null:{extent:t,pixelBlock:Eme(o.map(y=>y.pixelBlock),d,{clipOffset:h,clipSize:m})}}function ZL(e,t,r,n,i,s){const{width:o,height:a}=r.block,{x:l,y:u}=r.offset,{width:c,height:h}=r.mosaic,d=USt(o,a,n,i,l,u,c,h);let m=0,y=0;if(s){const g=s.hasGCSSShiftTransform?360:s.halfWorldWidth??0,b=o*s.resolutionX,S=s.startX+n*b;S<g&&S+b>g?y=s.rightPadding:S>=g&&(m=s.leftMargin-s.rightPadding,y=0)}if(d.xmax-=y,typeof t!="number")for(let g=d.ymin;g<d.ymax;g++){const b=(i*a+g-u)*c+(n*o-l)+m,S=g*o;for(let E=d.xmin;E<d.xmax;E++)e[b+E]=t[S+E]}else for(let g=d.ymin;g<d.ymax;g++){const b=(i*a+g-u)*c+(n*o-l)+m;for(let S=d.xmin;S<d.xmax;S++)e[b+S]=t}}function Eme(e,t,r={}){const{clipOffset:n,clipSize:i,alignmentInfo:s,blockWidths:o}=r;if(o)return VSt(e,t,{blockWidths:o});const a=e.find(N=>Qr(N));if(a==null)return null;const l=i?i.width:t.width,u=i?i.height:t.height,c=a.width,h=a.height,d=t.width/c,m=t.height/h,y={offset:n||{x:0,y:0},mosaic:i||t,block:{width:c,height:h}},g=a.pixelType,b=Ht.getPixelArrayConstructor(g),S=a.pixels.length,E=[];let x,w;for(let N=0;N<S;N++){w=new b(l*u);for(let F=0;F<m;F++)for(let P=0;P<d;P++){const B=e[F*d+P];Qr(B)&&(x=B.pixels[N],ZL(w,x,y,P,F,s))}E.push(w)}const T=e.some(N=>N==null||N.mask!=null&&N.mask.length>0),I=e.some(N=>N?.bandMasks&&N.bandMasks.length>1),M=T?new Uint8Array(l*u):void 0,C=I?[]:void 0;if(M){for(let N=0;N<m;N++)for(let F=0;F<d;F++){const P=e[N*d+F],B=P!=null?P.mask:null;ZL(M,B??(P?255:0),y,F,N,s)}if(C)for(let N=0;N<S;N++){const F=new Uint8Array(l*u);for(let P=0;P<m;P++)for(let B=0;B<d;B++){const O=e[P*d+B],v=O?.bandMasks?.[N]??O?.mask;ZL(F,v??(O?255:0),y,B,P,s)}C.push(F)}}const k=new Ht({width:l,height:u,pixels:E,pixelType:g,bandMasks:C,mask:M});return k.updateStatistics(),k}function VSt(e,t,r){const n=e.find(b=>b!=null);if(n==null)return null;const i=e.some(b=>b==null||!!b.mask),{width:s,height:o}=t,a=i?new Uint8Array(s*o):null,{blockWidths:l}=r,u=[],c=n.getPlaneCount(),h=Ht.getPixelArrayConstructor(n.pixelType);if(i)for(let b=0,S=0;b<e.length;S+=l[b],b++){const E=e[b];if(!Qr(E))continue;const x=E.mask;for(let w=0;w<o;w++)for(let T=0;T<l[b];T++)a[w*s+T+S]=x==null?255:x[w*E.width+T]}const d=e.some(b=>b?.bandMasks&&b.bandMasks.length>1),m=d?[]:void 0,y=s*o;for(let b=0;b<c;b++){const S=new h(y),E=d?new Uint8Array(y):void 0;for(let x=0,w=0;x<e.length;w+=l[x],x++){const T=e[x];if(!Qr(T))continue;const I=T.pixels[b];if(I!=null){for(let M=0;M<o;M++)for(let C=0;C<l[x];C++)S[M*s+C+w]=I[M*T.width+C];if(E){const M=T.bandMasks?.[b]??T.mask;for(let C=0;C<o;C++)for(let k=0;k<l[x];k++)E[C*s+k+w]=M?M[C*T.width+k]:255}}}u.push(S),m&&E&&m.push(E)}const g=new Ht({width:s,height:o,mask:a,bandMasks:m,pixels:u,pixelType:n.pixelType});return g.updateStatistics(),g}function GSt(e,t,r){if(!Qr(e))return null;const{width:n,height:i}=e,s=t.x,o=t.y,a=r.width+s,l=r.height+o;if(s<0||o<0||a>n||l>i||s===0&&o===0&&a===n&&l===i)return e;e.mask||(e.mask=new Uint8Array(n*i));const u=e.mask;for(let c=0;c<i;c++){const h=c*n;for(let d=0;d<n;d++)u[h+d]=c<o||c>=l||d<s||d>=a?0:1}return e.updateStatistics(),e}function zSt(e){if(!Qr(e))return null;const t=e.clone(),{width:r,height:n,pixels:i}=e,s=i[0],o=t.pixels[0],a=e.mask;for(let l=2;l<n-1;l++){const u=new Map;for(let h=l-2;h<l+2;h++)for(let d=0;d<4;d++){const m=h*r+d;i2(u,s[m],a?a[m]:1)}o[l*r]=aQ(u),o[l*r+1]=o[l*r+2]=o[l*r];let c=3;for(;c<r-1;c++){let h=(l-2)*r+c+1;i2(u,s[h],a?a[h]:1),h=(l-1)*r+c+1,i2(u,s[h],a?a[h]:1),h=l*r+c+1,i2(u,s[h],a?a[h]:1),h=(l+1)*r+c+1,i2(u,s[h],a?a[h]:1),h=(l-2)*r+c-3,$I(u,s[h],a?a[h]:1),h=(l-1)*r+c-3,$I(u,s[h],a?a[h]:1),h=l*r+c-3,$I(u,s[h],a?a[h]:1),h=(l+1)*r+c-3,$I(u,s[h],a?a[h]:1),o[l*r+c]=aQ(u)}o[l*r+c+1]=o[l*r+c]}for(let l=0;l<r;l++)o[l]=o[r+l]=o[2*r+l],o[(n-1)*r+l]=o[(n-2)*r+l];return t.updateStatistics(),t}function aQ(e){if(e.size===0)return 0;let t=0,r=-1,n=0;const i=e.keys();let s=i.next();for(;!s.done;)n=e.get(s.value),n>t&&(r=s.value,t=n),s=i.next();return r}function $I(e,t,r){if(r===0)return;const n=e.get(t);n===1?e.delete(t):e.set(t,n-1)}function i2(e,t,r){r!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function Tme(e,t,r){let{x:n,y:i}=t;const{width:s,height:o}=r;if(n===0&&i===0&&o===e.height&&s===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,i),c=Math.max(0,n),h=Math.min(n+s,a),d=Math.min(i+o,l);if(h<0||d<0||!Qr(e))return null;n=Math.max(0,-n),i=Math.max(0,-i);const{pixels:m}=e,y=s*o,g=m.length,b=[];for(let w=0;w<g;w++){const T=m[w],I=Ht.createEmptyBand(e.pixelType,y);for(let M=u;M<d;M++){const C=M*a;let k=(M+i-u)*s+n;for(let N=c;N<h;N++)I[k++]=T[C+N]}b.push(I)}const S=new Uint8Array(y),E=e.mask;for(let w=u;w<d;w++){const T=w*a;let I=(w+i-u)*s+n;for(let M=c;M<h;M++)S[I++]=E?E[T+M]:1}const x=new Ht({width:r.width,height:r.height,pixelType:e.pixelType,pixels:b,mask:S});return x.updateStatistics(),x}function Ime(e,t=!0){if(!Qr(e))return null;const{pixels:r,width:n,height:i,mask:s,pixelType:o}=e,a=[],l=Math.round(n/2),u=Math.round(i/2),c=i-1,h=n-1;for(let m=0;m<r.length;m++){const y=r[m],g=Ht.createEmptyBand(o,l*u);let b=0;for(let S=0;S<i;S+=2)for(let E=0;E<n;E+=2){const x=y[S*n+E];if(t){const w=E===h?x:y[S*n+E+1],T=S===c?x:y[S*n+E+n],I=E===h?T:S===c?w:y[S*n+E+n+1];g[b++]=(x+w+T+I)/4}else g[b++]=x}a.push(g)}let d=null;if(s!=null){d=new Uint8Array(l*u);let m=0;for(let y=0;y<i;y+=2)for(let g=0;g<n;g+=2){const b=s[y*n+g];if(t){const S=g===h?b:s[y*n+g+1],E=y===c?b:s[y*n+g+n],x=g===h?E:y===c?S:s[y*n+g+n+1];d[m++]=b*S*E*x?1:0}else d[m++]=b}}return new Ht({width:l,height:u,pixelType:o,pixels:a,mask:d})}function $St(e,t,r=0,n=!0){if(!Qr(e))return null;const{width:i,height:s}=t;let{width:o,height:a}=e;const l=new Map,u={x:0,y:0},c=1+r;let h=e;for(let d=0;d<c;d++){const m=Math.ceil(o/i),y=Math.ceil(a/s);for(let g=0;g<y;g++){u.y=g*s;for(let b=0;b<m;b++){u.x=b*i;const S=Tme(h,u,t);l.set(`${d}/${g}/${b}`,S)}}d<c-1&&(h=Ime(h,n)),o=Math.round(o/2),a=Math.round(a/2)}return l}function qSt(e){const{pixelBlock:t,tileSize:r,level:n,row:i,col:s,useBilinear:o}=e;if(!Qr(t))return null;const{width:a,height:l}=r,u=2**n,c=u*a,h=u*l;let d=Tme(t,{y:i*h,x:s*c},{width:c,height:h});if(!d)return null;for(let m=n;m>0;m--)d=Ime(d,o);return d}function Ame(e,t,r,n,i=0){const{width:s,height:o}=e,{width:a,height:l}=t,u=n.cols,c=n.rows,h=Math.ceil(a/u-.1/u),d=Math.ceil(l/c-.1/c);let m,y,g,b,S,E,x;const w=h*u,T=w*d*c,I=new Float32Array(T),M=new Float32Array(T),C=new Uint32Array(T),k=new Uint32Array(T);let N,F,P=0;for(let B=0;B<d;B++)for(let O=0;O<h;O++){m=12*(B*h+O),y=r[m],g=r[m+1],b=r[m+2],S=r[m+3],E=r[m+4],x=r[m+5];for(let v=0;v<c;v++){P=(B*c+v)*w+O*u,F=(v+.5)/c;for(let A=0;A<v;A++)N=(A+.5)/u,I[P+A]=(y*N+g*F+b)*s+i,M[P+A]=(S*N+E*F+x)*o+i,C[P+A]=Math.floor(I[P+A]),k[P+A]=Math.floor(M[P+A])}m+=6,y=r[m],g=r[m+1],b=r[m+2],S=r[m+3],E=r[m+4],x=r[m+5];for(let v=0;v<c;v++){P=(B*c+v)*w+O*u,F=(v+.5)/c;for(let A=v;A<u;A++)N=(A+.5)/u,I[P+A]=(y*N+g*F+b)*s+i,M[P+A]=(S*N+E*F+x)*o+i,C[P+A]=Math.floor(I[P+A]),k[P+A]=Math.floor(M[P+A])}}return{offsets_x:I,offsets_y:M,offsets_xi:C,offsets_yi:k,gridWidth:w}}function HSt(e,t){const{coefficients:r,spacing:n}=t,{offsets_x:i,offsets_y:s,gridWidth:o}=Ame(e,e,r,{rows:n[0],cols:n[1]}),{width:a,height:l}=e,u=new Float32Array(a*l),c=180/Math.PI;for(let h=0;h<l;h++)for(let d=0;d<a;d++){const m=h*o+d,y=h===0?m:m-o,g=h===l-1?m:m+o,b=i[y]-i[g],S=s[g]-s[y];if(isNaN(b)||isNaN(S))u[h*a+d]=90;else{let E=Math.atan2(S,b)*c;E=(360+E)%360,u[h*a+d]=E}}return u}function WSt(e,t,r,n,i="nearest"){if(!Qr(e))return null;i==="majority"&&(e=zSt(e));const{pixels:s,mask:o,bandMasks:a,pixelType:l}=e,u=e.width,c=e.height,h=Ht.getPixelArrayConstructor(l),d=s.length,{width:m,height:y}=t;let g=!1;for(let P=0;P<r.length;P+=3)r[P]===-1&&r[P+1]===-1&&r[P+2]===-1&&(g=!0);const{offsets_x:b,offsets_y:S,offsets_xi:E,offsets_yi:x,gridWidth:w}=Ame({width:u,height:c},t,r,n,i==="majority"?.5:0);let T;const I=(P,B,O,v)=>{const A=P instanceof Float32Array||P instanceof Float64Array?0:.5;for(let R=0;R<y;R++){T=R*w;for(let U=0;U<m;U++){if(b[T]<0||S[T]<0)P[R*m+U]=0;else if(v)P[R*m+U]=B[E[T]+x[T]*u];else{const q=Math.floor(b[T]),Q=Math.floor(S[T]),ee=Math.ceil(b[T]),Y=Math.ceil(S[T]),ue=b[T]-q,de=S[T]-Q;if(!O||O[q+Q*u]&&O[ee+Q*u]&&O[q+Y*u]&&O[ee+Y*u]){const ce=(1-ue)*B[q+Q*u]+ue*B[ee+Q*u],me=(1-ue)*B[q+Y*u]+ue*B[ee+Y*u];P[R*m+U]=(1-de)*ce+de*me+A}else P[R*m+U]=B[E[T]+x[T]*u]}T++}}},M=[];let C;const k=a?.length===d,N=[];for(let P=0;P<d;P++){if(k){const B=new Uint8Array(m*y);I(B,a[P],a[P],!0),N.push(B)}C=new h(m*y),I(C,s[P],k?a[P]:o,i==="nearest"||i==="majority"),M.push(C)}const F=new Ht({width:m,height:y,pixelType:l,pixels:M,bandMasks:k?N:void 0});if(o!=null)F.mask=new Uint8Array(m*y),I(F.mask,o,o,!0);else if(g){F.mask=new Uint8Array(m*y);for(let P=0;P<m*y;P++)F.mask[P]=b[P]<0||S[P]<0?0:1}return F.updateStatistics(),F}const Py=new Map;Py.set("meter-per-second",1),Py.set("kilometer-per-hour",.277778),Py.set("knots",.514444),Py.set("feet-per-second",.3048),Py.set("mile-per-hour",.44704);const t7=180/Math.PI,cz=5,il=new Pt({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function mO(e,t){return Py.get(e)/Py.get(t)||1}function Mme(e){return(450-e)%360}function yO(e,t="geographic"){const[r,n]=e,i=Math.sqrt(r*r+n*n);let s=Math.atan2(n,r)*t7;return s=(360+s)%360,t==="geographic"&&(s=Mme(s)),[i,s]}function ZSt(e,t="geographic"){let r=e[1];t==="geographic"&&(r=Mme(r)),r%=360;const n=e[0];return[n*Math.cos(r/t7),n*Math.sin(r/t7)]}function JSt(e,t,r,n="geographic"){if(!Qr(e)||r==null)return e;const i=t==="vector-magdir"?e.clone():eC(e,t),s=i.pixels[1];for(let o=0;o<s.length;o++)s[o]=n==="geographic"?(s[o]+r[o]+270)%360:(s[o]+360-r[o])%360;return t==="vector-magdir"?i:eC(i,"vector-magdir")}function eC(e,t,r="geographic",n=1){if(!Qr(e))return e;const{pixels:i,width:s,height:o}=e,a=s*o,l=i[0],u=i[1],c=e.pixelType.startsWith("f")?e.pixelType:"f32",h=Ht.createEmptyBand(c,a),d=Ht.createEmptyBand(c,a);let m=0;for(let g=0;g<o;g++)for(let b=0;b<s;b++)t==="vector-uv"?([h[m],d[m]]=yO([l[m],u[m]],r),h[m]*=n):([h[m],d[m]]=ZSt([l[m],u[m]],r),h[m]*=n,d[m]*=n),m++;const y=new Ht({pixelType:c,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[h,d]});return y.updateStatistics(),y}function YSt(e,t,r=1){if(r===1||!Qr(e))return e;const n=e.clone(),{pixels:i,width:s,height:o}=n,a=i[0];i[1];let l=0;for(let u=0;u<o;u++)for(let c=0;c<s;c++)a[l]*=r,l++;return n.updateStatistics(),n}function XSt(e,t,r,n,i){if(i==null||!i.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/n),height:Math.round(r/n),resolution:e.width/t};const s=i.xmin,o=i.ymax,a=(e.xmax-e.xmin)/t*n,l=(e.ymax-e.ymin)/r*n,u=(a+l)/2;return e.xmin=s+Math.floor((e.xmin-s)/a)*a,e.xmax=s+Math.ceil((e.xmax-s)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const QSt=Cme(0,0,0);function Cme(e=0,t=0,r=Math.PI,n=!0){n&&(r=(2*Math.PI-r)%(2*Math.PI));const i=n?-1:1,s=13*i,o=-7*i,a=-2*i,l=-16*i,u=21.75,[c,h]=Ps(0,t+s,r,u),[d,m]=Ps(e-5.5,t+o,r,u),[y,g]=Ps(e+5.5,t+o,r,u),[b,S]=Ps(e-1.5,t+a,r,u),[E,x]=Ps(e+1.5,t+a,r,u),[w,T]=Ps(e-1.5,t+l,r,u),[I,M]=Ps(e+1.5,t+l,r,u);return[c,h,d,m,b,S,E,x,y,g,w,T,I,M]}function KSt(e=0,t=Math.PI,r=!0){r&&(t=(2*Math.PI-t)%(2*Math.PI));const n=10,i=r?-1:1,s=5*i,o=20*i,a=25*i,l=45,u=0,c=0,h=2,d=0,m=h*i,y=r?1:-1,g=n/2*y;let[b,S]=[u+g,c-o],[E,x]=[b+h*y,S],[w,T]=[E-d*y,x+m],[I,M]=[u-g,c-a],[C,k]=[I+d*y,M-m],N=Math.ceil(e/cz),F=Math.floor(N/10);N-=8*F;const P=[],B=[];for(let ue=0;ue<N/2;ue++,F--){F<=0&&N%2==1&&ue===(N-1)/2&&(I=u,C=I+d*y,M=(M+S)/2,k=M-m);const[de,ce]=Ps(I,M,t,l);if(F>0){const[me,Se]=Ps(E,M,t,l),[Oe,ye]=Ps(b,S,t,l);P.push(me),P.push(Se),P.push(de),P.push(ce),P.push(Oe),P.push(ye)}else{const[me,Se]=Ps(E,x,t,l),[Oe,ye]=Ps(w,T,t,l),[Fe,ze]=Ps(C,k,t,l);B.push(de),B.push(ce),B.push(Fe),B.push(ze),B.push(Oe),B.push(ye),B.push(me),B.push(Se)}M+=s,S+=s,x+=s,T+=s,k+=s}const[O,v]=Ps(u+g,c+o,t,l),A=(n/2+h)*y,[R,U]=Ps(u+A,c+o,t,l),[q,Q]=Ps(u+g,c-a,t,l),[ee,Y]=Ps(u+A,c-a,t,l);return{pennants:P,barbs:B,shaft:[O,v,R,U,q,Q,ee,Y]}}function Ps(e,t,r,n=1){const i=Math.sqrt(e*e+t*t)/n,s=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[i,(2*Math.PI+s-r)%(2*Math.PI)]}const qI=[0,1,3,6,10,16,21,27,33,40,47,55,63],eEt=[0,.5,1,1.5,2],tEt=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function w0(e,t,r,n){const i=mO(n||"knots",r);let s;for(s=1;s<t.length;s++)if(s===t.length-1){if(e<t[s]*i)break}else if(e<=t[s]*i)break;return Math.min(s-1,t.length-2)}function rEt(e,t,r,n,i){let s=0;switch(t){case"beaufort_kn":s=w0(e,qI,"knots",r);break;case"beaufort_km":s=w0(e,qI,"kilometer-per-hour",r);break;case"beaufort_ft":s=w0(e,qI,"feet-per-second",r);break;case"beaufort_m":s=w0(e,qI,"meter-per-second",r);break;case"classified_arrow":s=w0(e,i??[],n,r);break;case"ocean_current_m":s=w0(e,eEt,"meter-per-second",r);break;case"ocean_current_kn":s=w0(e,tEt,"knots",r)}return s}function nEt(e,t){const{style:r,inputUnit:n,outputUnit:i,breakValues:s}=t,o=il.fromJSON(n),a=il.fromJSON(i),l=7*6,u=15;let c=0,h=0;const{width:d,height:m,mask:y}=e,g=e.pixels[0],b=e.pixels[1],S=y!=null?y.filter(T=>T>0).length:d*m,E=new Float32Array(S*l),x=new Uint32Array(u*S),w=t.invertDirection?Cme(0,0,0,!1):QSt;for(let T=0;T<m;T++)for(let I=0;I<d;I++){const M=T*d+I;if(!y||y[T*d+I]){const C=(b[M]+360)%360/180*Math.PI,k=rEt(g[M],r,o,a,s);for(let F=0;F<w.length;F+=2)E[c++]=(I+.5)/d,E[c++]=(T+.5)/m,E[c++]=w[F],E[c++]=w[F+1]+C,E[c++]=k,E[c++]=g[M];const N=7*(c/l-1);x[h++]=N,x[h++]=N+1,x[h++]=N+2,x[h++]=N+0,x[h++]=N+4,x[h++]=N+3,x[h++]=N+0,x[h++]=N+2,x[h++]=N+3,x[h++]=N+2,x[h++]=N+5,x[h++]=N+3,x[h++]=N+5,x[h++]=N+6,x[h++]=N+3}}return{vertexData:E,indexData:x}}const JL=[];function iEt(e,t){if(JL.length===0)for(let m=0;m<30;m++)JL.push(KSt(5*m,0,!t.invertDirection));const r=mO(il.fromJSON(t.inputUnit),"knots"),{width:n,height:i,mask:s}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],c=[];let h=0,d=0;for(let m=0;m<i;m++)for(let y=0;y<n;y++){const g=m*n+y,b=o[g]*r;if((!s||s[m*n+y])&&b>=cz){const S=(a[g]+360)%360/180*Math.PI,{pennants:E,barbs:x,shaft:w}=JL[Math.min(Math.floor(b/5),29)];if(E.length+x.length===0)continue;let T=u.length/l;const I=(y+.5)/n,M=(m+.5)/i;for(let C=0;C<E.length;C+=2)u[h++]=I,u[h++]=M,u[h++]=E[C],u[h++]=E[C+1]+S,u[h++]=0,u[h++]=b;for(let C=0;C<x.length;C+=2)u[h++]=I,u[h++]=M,u[h++]=x[C],u[h++]=x[C+1]+S,u[h++]=0,u[h++]=b;for(let C=0;C<w.length;C+=2)u[h++]=I,u[h++]=M,u[h++]=w[C],u[h++]=w[C+1]+S,u[h++]=0,u[h++]=b;for(let C=0;C<E.length/6;C++)c[d++]=T,c[d++]=T+1,c[d++]=T+2,T+=3;for(let C=0;C<x.length/8;C++)c[d++]=T,c[d++]=T+1,c[d++]=T+2,c[d++]=T+1,c[d++]=T+2,c[d++]=T+3,T+=4;c[d++]=T+0,c[d++]=T+1,c[d++]=T+2,c[d++]=T+1,c[d++]=T+3,c[d++]=T+2,T+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function kme(e,t){let r=0,n=0;const{width:i,height:s,mask:o}=e,a=e.pixels[0],l=[],u=[],c=mO(il.fromJSON(t.inputUnit),"knots"),h=t.style==="wind_speed"?cz:Number.MAX_VALUE;for(let d=0;d<s;d++)for(let m=0;m<i;m++){const y=a[d*i+m]*c;if((!o||o[d*i+m])&&y<h){for(let b=0;b<4;b++)l[r++]=(m+.5)/i,l[r++]=(d+.5)/s,l[r++]=b<2?-.5:.5,l[r++]=b%2==0?-.5:.5,l[r++]=0,l[r++]=y;const g=4*(r/24-1);u[n++]=g,u[n++]=g+1,u[n++]=g+2,u[n++]=g+1,u[n++]=g+2,u[n++]=g+3}}return{vertexData:new Float32Array(l),indexData:new Uint32Array(u)}}function sEt(e,t){return t.style==="simple_scalar"?kme(e,t):t.style==="wind_speed"?iEt(e,t):nEt(e,t)}function oEt(e,t,r,n=[0,0],i=.5){const{width:s,height:o,mask:a}=e,[l,u]=e.pixels,[c,h]=n,d=Math.round((s-c)/r),m=Math.round((o-h)/r),y=d*m,g=new Float32Array(y),b=new Float32Array(y),S=new Uint8Array(y);for(let x=0;x<m;x++)for(let w=0;w<d;w++){let T=0;const I=x*d+w,M=Math.max(0,x*r+h),C=Math.max(0,w*r+c),k=Math.min(o,M+r),N=Math.min(s,C+r);for(let F=M;F<k;F++)for(let P=C;P<N;P++){const B=F*s+P;if(!a||a[B]){T++;const O=[l[B],u[B]],[v,A]=O;g[I]+=v,b[I]+=A}}if(T>=(k-M)*(N-C)*(1-i)){S[I]=1;const[F,P]=yO([g[I]/T,b[I]/T]);g[I]=F,b[I]=P}else S[I]=0,g[I]=0,b[I]=0}const E=new Ht({width:d,height:m,pixels:[g,b],mask:S});return E.updateStatistics(),E}function aEt(e){const t=[];return r7(Jhe(e),t),t.length?new Ze(gG(t[0])):null}function r7(e,t){if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const n=e.type==="CIMPolygonSymbol";if(r?.symbolLayers){for(const i of r.symbolLayers)if(!(i.colorLocked||n&&(Xhe(i)||Yhe(i)&&i.markerPlacement&&zR(i.markerPlacement))))switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor&&lQ(t,i.tintColor);break;case"CIMVectorMarker":i.markerGraphics?.forEach(s=>{r7(s.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":lQ(t,i.color);break;case"CIMHatchFill":r7(i.lineSymbol,t)}}}function lQ(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function lEt(e,t,r){t instanceof Ze||(t=new Ze(t));const n=Jhe(e);n&&n7(n,t)}function n7(e,t,r){if(!e)return;let n;n=e.type==="CIMTextSymbol"?e.symbol:e;const i=n?.type==="CIMPolygonSymbol";if(n?.symbolLayers)for(const s of n.symbolLayers){if(s.colorLocked||i&&(Xhe(s)||Yhe(s)&&s.markerPlacement&&zR(s.markerPlacement)))continue;const o=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=o;break;case"CIMVectorMarker":s.markerGraphics?.forEach(a=>{n7(a.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":s.color=o;break;case"CIMHatchFill":n7(s.lineSymbol,t)}}}new BR(1e3),new Ze([128,128,128]);const uEt=new Ze("white");function cEt(e,t){if(!e)return null;let r=null;return Om(e)?r=hEt(e):kR(e)&&(r=e.type==="cim"?aEt(e):e.color?new Ze(e.color):null),r?DE(r,t):null}function hEt(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(n=>{n.type==="object"&&n.resource?.href||(r=n.type==="water"?n.color:n.material?n.material.color:null)}),r?new Ze(r):null}function DE(e,t){if(t==null||e==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new Ze(r)}function pEt(e,t,r){const n=e.symbolLayers;if(!n)return;const i=s=>DE(t=t??s??(r!=null?uEt:null),r);n.forEach(s=>{if(s.type!=="object"||!s.resource?.href||t)if(s.type==="water")s.color=i(s.color);else{const o=s.material!=null?s.material.color:null,a=i(o);s.material==null?s.material=new ka({color:a}):s.material.color=a,r!=null&&"outline"in s&&s.outline?.color!=null&&(s.outline.color=DE(s.outline.color,r))}})}function dEt(e,t,r){(t=t??e.color)&&(e.color=DE(t,r)),r!=null&&"outline"in e&&e.outline?.color&&(e.outline.color=DE(e.outline.color,r))}function fEt(e,t,r){e&&(t||r!=null)&&(t&&(t=new Ze(t)),Om(e)?pEt(e,t,r):kR(e)&&dEt(e,t,r))}async function mEt(e,t){const r=e.symbolLayers;r&&await dct(r,async n=>yEt(n,t))}async function yEt(e,t){switch(e.type){case"extrude":vEt(e,t);break;case"icon":case"line":case"text":gEt(e,t);break;case"path":wEt(e,t);break;case"object":await bEt(e,t)}}function gEt(e,t){const r=Rme(t);r!=null&&(e.size=r)}function Rme(e){for(const t of e)if(typeof t=="number")return t;return null}function vEt(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function bEt(e,t){const{resourceSize:r,symbolSize:n}=await _Et(e),i=Ome(t,r,n);e.width=DS(t[0],n[0],r[0],i),e.depth=DS(t[1],n[1],r[1],i),e.height=DS(t[2],n[2],r[2],i)}function wEt(e,t){const r=Ome(t,BV,[e.width,void 0,e.height]);e.width=DS(t[0],e.width,1,r),e.height=DS(t[2],e.height,1,r)}function Ome(e,t,r){for(let n=0;n<3;n++){const i=e[n];switch(i){case"symbol-value":{const s=r[n];return s!=null?s/t[n]:1}case"proportional":break;default:if(i&&t[n])return i/t[n]}}return 1}async function _Et(e){const{computeObjectLayerResourceSize:t}=await Me(()=>import("./symbolLayerUtils-C6oko-gw-CdCkTL8p.js"),__vite__mapDeps([145,1,2]),import.meta.url),r=await t(e,10),{width:n,height:i,depth:s}=e,o=[n,s,i];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/r[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function DS(e,t,r,n){switch(e){case"proportional":return r*n;case"symbol-value":return t??r;default:return e}}function xEt(e,t){const r=Rme(t);if(r!=null)switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const n=e.width/e.height;n>1?(e.width=r,e.height=r*n):(e.width=r*n,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function Nme(e,t){if(e&&t)return Om(e)?mEt(e,t):void(kR(e)&&xEt(e,t))}function Lme(e,t,r){if(e&&t!=null)if(Om(e)){const n=e.symbolLayers;n&&n.forEach(i=>{if(i.type==="object")switch(r){case"tilt":i.tilt=(i.tilt??0)+t;break;case"roll":i.roll=(i.roll??0)+t;break;default:i.heading=(i.heading??0)+t}i.type==="icon"&&(i.angle+=t)})}else kR(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}async function SEt(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}var i7;const uQ=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),HI=new Pt({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),WI=new Pt({flow_from:"flow-from",flow_to:"flow-to"});let io=i7=class extends Ym(we){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return uQ.has(e)?il.fromJSON(e):null}readOutputUnit(e,t){return uQ.has(e)?il.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new Jm({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new LR({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new i7({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:se(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,r=[]){const n=new Array,i=mO(this.inputUnit,this.outputUnit),s=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?eC(e.pixelBlock,"vector-uv",s,i):YSt(e.pixelBlock,"vector-magdir",i);if(o==null)return n;const a=e.extent,l=o.mask!=null&&o.mask.length>0;let u=0;const c=(a.xmax-a.xmin)/o.width,h=(a.ymax-a.ymin)/o.height;for(let d=0;d<o.height;d++)for(let m=0;m<o.width;m++,u++){let y=new it({x:a.xmin+m*c+c/2,y:a.ymax-d*h-h/2,spatialReference:a.spatialReference});y=(await cu(y))[0];const g=r.some(b=>b.intersects(y));if((!l||o.mask[u])&&!g){const b={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},S=new dl({geometry:new it({x:y.x,y:y.y,spatialReference:a.spatialReference}),attributes:b});S.symbol=this._getVisualVariablesAppliedSymbol(S),n.push(S)}}return n}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new ra({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new No({width:0}),size:20,color:e||new Ze([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;const t=this.styleRenderer?.getSymbol(e)?.clone(),r=this.sizeVariables,n=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach(i=>Nme(t,che([i],e))),n&&n.length){const i=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+i,this.rotationVariables.forEach(s=>Lme(t,ahe(s,e),s.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new p1(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new Ze([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new Ze([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new Ze([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],n=3.28084;return t=t.map(i=>i*n),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new Ze([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],n=2.23694;return t=t.map(i=>i*n),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new Ze([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],n=3.6;return t=t.map(i=>i*n),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Ze([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Ze([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new Ze([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const n=this.sizeVariables[0].minDataValue,i=this.sizeVariables[0].maxDataValue;if(n&&i){const s=(i-n)/5;t=Array.from(Array(6).keys()).map(o=>n+s*o)}}const r=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createSimpleScalarRenderer(){return{defaultSymbol:vh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(i=>5*i),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=vh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),n=e.map((i,s)=>{let o;if(s!==e.length-1)if(s===0)o={minValue:i,maxValue:e[s+1],symbol:r};else{const a=vh.fromJSON({type:"esriPMS",imageData:t[s].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:i,maxValue:e[s+1],symbol:a}}return new fw(o)});return{defaultSymbol:r,classBreakInfos:n}}_getClassBreaks(e,t){return t.map((r,n)=>new fw({minValue:e[n],maxValue:e[n+1],symbol:this._getDefaultSymbol(new Ze(r))}))}};p([f({type:["Magnitude"],json:{write:!0}})],io.prototype,"attributeField",void 0),p([f({type:WI.apiValues,json:{type:WI.jsonValues,read:{reader:WI.read},write:{writer:WI.write}}})],io.prototype,"flowRepresentation",void 0),p([f({type:["geographic","arithmetic"],json:{write:!0}})],io.prototype,"rotationType",void 0),p([f({type:HI.apiValues,json:{type:HI.jsonValues,read:{reader:HI.read},write:{writer:HI.write}}})],io.prototype,"style",void 0),p([f({json:{write:!0}})],io.prototype,"symbolTileSize",void 0),p([f({type:il.apiValues,json:{type:il.jsonValues,write:{writer:il.write}}})],io.prototype,"inputUnit",void 0),p([Ee("inputUnit")],io.prototype,"readInputUnit",null),p([f({type:il.apiValues,json:{type:il.jsonValues,read:{reader:il.read},write:{writer:il.write}}})],io.prototype,"outputUnit",void 0),p([Ee("outputUnit")],io.prototype,"readOutputUnit",null),p([tt({vectorField:"vector-field"})],io.prototype,"type",void 0),p([f({type:p1})],io.prototype,"styleRenderer",null),p([f({type:Jm})],io.prototype,"sizeVariables",null),p([f({type:LR})],io.prototype,"rotationVariables",null),io=i7=p([W("esri.renderers.VectorFieldRenderer")],io);const hz=io,FE={key:"type",base:null,typeMap:{"unique-value":f1,"class-breaks":p1,"raster-colormap":oz,"raster-stretch":az,"vector-field":hz,"raster-shaded-relief":gme,flow:lme}},jE={...FE,typeMap:{...FE.typeMap}};delete jE.typeMap["vector-field"],delete jE.typeMap.flow;const EEt={uniqueValue:f1,classBreaks:p1,rasterStretch:az,rasterColormap:oz,vectorField:hz,rasterShadedRelief:gme,flowRenderer:lme};function TEt(e){return e&&EEt[e.type]||null}function Pme(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const n=e.authoringInfo||{classificationMethod:""};n.classificationMethod=e.classificationMethod,e.authoringInfo=n}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const r=TEt(e);if(r){const n=new r;return n.read(e,t),n}return t?.messages&&e&&t.messages.push(new ea("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var s7;let dy=s7=class extends we{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new s7({variableName:this.variableName,dimensionName:this.dimensionName,values:se(this.values),isSlice:this.isSlice})}};p([f({type:String,json:{write:!0}})],dy.prototype,"variableName",void 0),p([f({type:String,json:{write:!0}})],dy.prototype,"dimensionName",void 0),p([f({type:$_.array($_.oneOf([$_.native(Number),$_.array($_.native(Number))])),json:{write:!0}})],dy.prototype,"values",void 0),p([f({type:Boolean,json:{write:!0}})],dy.prototype,"isSlice",void 0),dy=s7=p([W("esri.layers.support.DimensionalDefinition")],dy);const Gg=dy,od=Mn()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),FS=Mn()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),Ub=Mn()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let Ef=class extends we{constructor(){super(...arguments),this.pixelType="unknown"}};p([f({type:String,json:{write:!0}})],Ef.prototype,"name",void 0),p([f({type:String,json:{write:!0}})],Ef.prototype,"description",void 0),p([f({type:Ft,json:{type:Ft,write:!0,name:"_object_id"}})],Ef.prototype,"id",void 0),p([f({type:String,json:{type:Ub.jsonValues,read:Ub.read,write:Ub.write}})],Ef.prototype,"pixelType",void 0),p([f({type:String,json:{write:!0}})],Ef.prototype,"type",void 0),Ef=p([W("esri.layers.support.RasterFunctionInfo")],Ef);const IEt=Ef;let fp=class extends we{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};p([f({type:String,json:{write:!0}})],fp.prototype,"name",void 0),p([f({type:Number,json:{type:Ft,write:!0,name:"_object_id"}})],fp.prototype,"id",void 0),p([f({type:Boolean,json:{write:!0}})],fp.prototype,"isDataset",void 0),p([f({type:Boolean,json:{write:!0}})],fp.prototype,"isPublic",void 0),p([f({json:{write:!0}})],fp.prototype,"value",void 0),p([f({type:String,json:{write:!0}})],fp.prototype,"type",void 0),fp=p([W("esri.layers.support.RasterFunctionVariable")],fp);const AEt=fp,ZI={key:"type",base:null,typeMap:{RasterFunctionVariable:AEt}};let fy=class extends we{};p([f({types:ZI,json:{types:ZI,name:"MatchVariable"}})],fy.prototype,"matchVariable",void 0),p([f({types:ZI,json:{types:ZI,name:"UnionDimension"}})],fy.prototype,"unionDimension",void 0),p([f({type:Number,json:{type:Ft,write:!0,name:"_object_id"}})],fy.prototype,"id",void 0),p([f({type:String,json:{write:!0}})],fy.prototype,"type",void 0),fy=p([W("esri.layers.support.RasterFunctionProperties")],fy);const MEt=fy,YL=new Pt({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let ds=class extends we{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};p([f({type:[String],json:{write:!0}})],ds.prototype,"aliases",void 0),p([f({type:Object,json:{write:!0}})],ds.prototype,"arguments",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"description",void 0),p([f({type:IEt,json:{write:!0,name:"function"}})],ds.prototype,"functionInfo",void 0),p([f({type:YL.apiValues,json:{type:[0,1,2],read:YL.read,write:YL.write}})],ds.prototype,"functionType",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"group",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"help",void 0),p([f({type:Number,json:{type:Ft,write:!0,name:"_object_id"}})],ds.prototype,"id",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"name",void 0),p([f({type:String,json:{write:!0,name:"definition"}})],ds.prototype,"queryDefinition",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"tag",void 0),p([f({type:MEt,json:{write:!0}})],ds.prototype,"properties",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"thumbnail",void 0),p([f({type:String,json:{write:!0}})],ds.prototype,"thumbnailEx",void 0),p([f({json:{type:["RasterFunctionTemplate"],write:!0}})],ds.prototype,"type",void 0),ds=p([W("esri.layers.support.RasterFunctionTemplate")],ds);const Dme=ds;var o7;const n4=new Set(["raster","raster2","dem","fillraster"]),i4=new Set(["rasters"]),cQ=e=>e?.rasterFunction?lo.fromJSON(e):e,XL=e=>e&&e instanceof lo?e.toJSON():e,a7=e=>e?.functionName&&!e.declaredClass,hQ=e=>a7(e)?new lo(e):e,CEt=e=>{if(e==null)return null;e=se(e);const t={};for(const r of Object.keys(e))n4.has(r.toLowerCase())?t[r]=cQ(e[r]):i4.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(cQ):t[r]=e[r];return t},kEt={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:Dme}},json:{write:!0,name:"rasterFunctionDefinition"}};let lo=o7=class extends we{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(r=>n4.has(r.toLowerCase())&&a7(e[r]))||t.some(r=>i4.has(r.toLowerCase())&&Array.isArray(e[r])&&e[r].some(n=>a7(n)))){e=se(e);for(const r of t)n4.has(r.toLowerCase())?e[r]=hQ(e[r]):i4.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map(n=>hQ(n)))}}this._set("functionArguments",e)}readFunctionArguments(e){return CEt(e)}writeFunctionArguments(e,t,r){const n={};for(const i of Object.keys(e))n4.has(i.toLowerCase())?n[i]=XL(e[i]):i4.has(i.toLowerCase())&&Array.isArray(e[i])?n[i]=e[i].map(XL):n[i]=XL(e[i]);t[r]=n}readFunctionName(e,t){const r=t.rasterFunctionInfos;return t.name||(r?.length&&r[0].name!=="None"?r[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=e?Dme.fromJSON(e):null}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes('"type":"ClipFunction"'):JSON.stringify(this).includes('"rasterFunction":"Clip"')}clone(){return new o7({functionName:this.functionName,functionArguments:se(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:se(this.rasterFunctionDefinition)})}};p([f({json:{type:Object,name:"rasterFunctionArguments"}})],lo.prototype,"functionArguments",null),p([Ee("functionArguments")],lo.prototype,"readFunctionArguments",null),p([Re("functionArguments")],lo.prototype,"writeFunctionArguments",null),p([f({json:{type:String,write:{target:"rasterFunction"}}})],lo.prototype,"functionName",void 0),p([Ee("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],lo.prototype,"readFunctionName",null),p([tt({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1,default:"unknown"})],lo.prototype,"outputPixelType",void 0),p([f({type:String,json:{read:!0,write:!0}})],lo.prototype,"variableName",void 0),p([f()],lo.prototype,"rasterFunctionDefinition",null),p([f(kEt)],lo.prototype,"functionDefinition",void 0),p([f()],lo.prototype,"hasClipFunction",null),lo=o7=p([W("esri.layers.support.RasterFunction")],lo);const _r=lo,REt={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},OEt=new Set(["u1","u2","u4","u8","s8","u16","s16"]),NEt={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},LEt=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function Fme(e){return LEt.has(e.type)}function l7(e,t){if(!e||!t)return se(e||t);const r=se(e);if(r.functionDefinition&&t.rasterFunctionDefinition){const n=t.rasterFunctionDefinition;(n.thumbnail||n.thumbnailEx)&&(n.thumbnail=n.thumbnailEx=void 0),jme(r.functionDefinition.arguments,t),r.rasterFunctionDefinition=r.functionDefinition.toJSON()}else t.functionName?.toLowerCase()!=="none"&&(Ume(r.functionArguments).Raster=t);return r}function jme(e,t){for(const r in e)r.toLowerCase()==="raster"&&(e[r].type==="RasterFunctionVariable"?(e[r]=t.rasterFunctionDefinition,e[r].type="RasterFunctionTemplate"):e[r].type==="RasterFunctionTemplate"&&jme(e[r].arguments,t))}function Mh(e){const t=se(REt[e.functionName+"Function"]),r=e.functionArguments;for(const n in r)n.toLowerCase()==="raster"?(t.arguments[n]=Mh(r[n]),t.arguments[n].type="RasterFunctionTemplate"):n.toLowerCase()==="colormap"?(t.arguments[n].value=GEt(r[n]),t.arguments.ColorSchemeType.value=0):t.arguments[n].value=r[n];return t}function PEt(e,t){switch(t=t||{},e.type){case"raster-stretch":return jEt(e,t);case"class-breaks":return UEt(e,t);case"unique-value":return BEt(e,t);case"raster-colormap":return VEt(e,t);case"vector-field":return DEt(e,t);case"raster-shaded-relief":return FEt(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function Ume(e){const t=e?.Raster??e?.raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?Ume(t.functionArguments):e}const s2={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function DEt(e,t){const r=new _r;r.functionName="VectorFieldRenderer";const{dataType:n,bandNames:i}=t,s=n==="vector-uv";let o,a;if(i&&i.length===2){const m=i.map(y=>y.toLowerCase());o=m.indexOf("magnitude"),a=m.indexOf("direction")}o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,c=e.visualVariables?e.visualVariables.find(m=>m.field==="Magnitude"):new Jm,h={magnitudeBandID:o,directionBandID:a,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:NEt[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};r.functionArguments=h;const d=Mh(r);return t.convertToRFT?_r.fromJSON({rasterFunctionDefinition:d}):r}function FEt(e,t){const r=t.convertToRFT;if(t.dataType!=="elevation"&&(t.dataType!=="generic"||t.bandCount!==1||t.pixelType!=="s16"&&t.pixelType!=="s32"&&t.pixelType!=="f32"&&t.pixelType!=="f64"))return new _r;const n=new _r;n.functionName="Hillshade";const i=e.hillshadeType==="traditional"?0:1,s=e.scalingType==="none"?1:3,o={HillshadeType:i,SlopeType:s,ZFactor:e.zFactor};return i===0&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),s===3&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),n.functionArguments=o,n.variableName="Raster",e.colorRamp&&(n.functionName="ShadedRelief",r?o.ColorRamp=yme(e.colorRamp):o.Colormap=Vg(e.colorRamp)),r?new _r({rasterFunctionDefinition:Mh(n)}):n}function jEt(e,t){const r=t.convertToRFT,n=new _r;n.functionName="Stretch";const i=s2[LS.toJSON(e.stretchType)],s="u8",o=e.customStatistics?.map(l=>[l.min,l.max,l.avg??0,l.stddev??1]),a={StretchType:i,Statistics:o,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(a.Min=e.outputMin),e.outputMax!=null&&(a.Max=e.outputMax),i===s2.standardDeviation?(a.NumberOfStandardDeviations=e.numberOfStandardDeviations,n.outputPixelType=s):i===s2.percentClip?(a.MinPercent=e.minPercent,a.MaxPercent=e.maxPercent,n.outputPixelType=s):i===s2.minMax?n.outputPixelType=s:i===s2.sigmoid&&(a.SigmoidStrengthLevel=e.sigmoidStrengthLevel),n.functionArguments=a,n.variableName="Raster",e.colorRamp){const l=e.colorRamp,u=new _r;if(r)u.functionArguments={ColorRamp:yme(l)};else{const c=hme(l,!0);if(c)u.functionArguments={colorRampName:c};else if(!t.convertColorRampToColormap||l.type!=="algorithmic"&&l.type!=="multipart"){const h=e.colorRamp.toJSON();h.type==="algorithmic"?h.algorithm=h.algorithm||"esriCIELabAlgorithm":h.type==="multipart"&&h.colorRamps?.length&&h.colorRamps.forEach(d=>d.algorithm=d.algorithm||"esriCIELabAlgorithm"),u.functionArguments={colorRamp:h}}else u.functionArguments={Colormap:Vg(l)}}return u.variableName="Raster",u.functionName="Colormap",u.functionArguments.Raster=n,r?new _r({rasterFunctionDefinition:Mh(u)}):u}return r?new _r({rasterFunctionDefinition:Mh(n)}):n}function UEt(e,t){const r=[],n=[],i=[],s=[],{pixelType:o,rasterAttributeTable:a}=t,l=a==null?null:a.features,u=Bme(a);if(u&&l&&Array.isArray(l)&&e.classBreakInfos){e.classBreakInfos.forEach((g,b)=>{const S=g.symbol?.color;let E;S?.a&&g.minValue!=null&&g.maxValue!=null&&l.forEach(x=>{g.minValue!=null&&g.maxValue!=null&&(E=x.attributes[e.field],(E>=g.minValue&&E<g.maxValue||b===e.classBreakInfos.length-1&&E>=g.minValue)&&s.push([x.attributes[u],S.r,S.g,S.b]))})});const m=o?tC(s,o):s,y=new _r;return y.functionName="Colormap",y.functionArguments={},y.functionArguments.Colormap=m,y.variableName="Raster",t.convertToRFT?new _r({rasterFunctionDefinition:Mh(y)}):y}e.classBreakInfos.forEach((m,y)=>{if(m.minValue==null||m.maxValue==null)return;const g=m.symbol&&m.symbol.color;g?.a?(y===0?r.push(m.minValue,m.maxValue+1e-4):r.push(m.minValue+1e-4,m.maxValue+1e-4),n.push(y),s.push([y,g.r,g.g,g.b])):i.push(m.minValue,m.maxValue)});const c=o?tC(s,o):s,h=new _r;h.functionName="Remap",h.functionArguments={InputRanges:r,OutputValues:n,NoDataRanges:i},h.variableName="Raster";const d=new _r;return d.functionName="Colormap",d.functionArguments={Colormap:c,Raster:h},t.convertToRFT?new _r({rasterFunctionDefinition:Mh(d)}):d}function tC(e,t){const r=OEt.has(t)?r0(t):null;return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function Bme(e){if(e==null)return;const{fields:t}=e;return t?.find(r=>r?.name&&r.name.toLowerCase()==="value")?.name}function BEt(e,t){const r=[],{pixelType:n,rasterAttributeTable:i}=t,s=i==null?null:i.features,o=Bme(i),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(s){if(o){const h=new Map;l.forEach(m=>{const y=m.value,g=pQ(m);y!=null&&g?.a&&h.set(String(y),g.toRgb())});const d=e.field;d&&s.forEach(({attributes:m})=>{const y=String(m[d]),g=m[o],b=h.get(y);b?r.push([g,...b]):a&&r.push([g,...a])})}}else for(let h=0;h<l.length;h++){const d=l[h],m=pQ(d),y=+d.value;if(m?.a){if(isNaN(y))return null;r.push([y,m.r,m.g,m.b])}}const u=n?tC(r,n):r,c=new _r;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",t.convertToRFT?new _r({rasterFunctionDefinition:Mh(c)}):c}function pQ(e){return e.symbol?.type==="polygon-3d"?e.symbol.symbolLayers?.find(t=>t.type==="fill")?.material?.color:e.symbol?.color}function VEt(e,t){const r=e.extractColormap();if(!r||r.length===0)return null;const{pixelType:n}=t,i=n?tC(r,n):r,s=new _r;return s.functionName="Colormap",s.functionArguments={},s.functionArguments.Colormap=i,t.convertToRFT?new _r({rasterFunctionDefinition:Mh(s)}):s}function GEt(e){const t=[],r=[];return e.forEach(n=>{t.push(n[0]),r.push(pSt([...n.slice(1),255]))}),{type:"RasterColormap",values:t,colors:r}}var u7;const jS=Mn()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),c7=Mn()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function zEt(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return c7.fromJSON(t)}let Gi=u7=class extends we{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}readMethod(e,t){return zEt(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,r){e!=null&&(e=e.filter(({variableName:n,dimensionName:i})=>n&&n!=="*"||i)).length&&(t[r]=e.map(n=>n.toJSON()))}readOperation(e,t){const r=t.mosaicOperation,n=t.mosaicOperator?.toLowerCase(),i=r||(n?jS.toJSON(n):null);return jS.fromJSON(i)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new u7({ascending:this.ascending,itemRasterFunction:se(this.itemRasterFunction),lockRasterIds:se(this.lockRasterIds),method:this.method,multidimensionalDefinition:se(this.multidimensionalDefinition),objectIds:se(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:se(this.viewpoint),where:this.where})}};p([f({type:Boolean,json:{write:!0}})],Gi.prototype,"ascending",void 0),p([Ee("ascending",["ascending","sortAscending"])],Gi.prototype,"readAscending",null),p([f({type:_r,json:{name:"itemRenderingRule",write:!0}})],Gi.prototype,"itemRasterFunction",void 0),p([f({type:[Ft],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],Gi.prototype,"lockRasterIds",void 0),p([f({type:String,json:{type:c7.jsonValues,write:{target:"mosaicMethod",writer:c7.write}}})],Gi.prototype,"method",void 0),p([Ee("method",["mosaicMethod","defaultMosaicMethod"])],Gi.prototype,"readMethod",null),p([f({type:[Gg],json:{write:!0}})],Gi.prototype,"multidimensionalDefinition",void 0),p([Re("multidimensionalDefinition")],Gi.prototype,"writeMultidimensionalDefinition",null),p([f({type:[Ft],json:{name:"fids",write:!0}})],Gi.prototype,"objectIds",void 0),p([f({json:{type:jS.jsonValues,read:{reader:jS.read},write:{target:"mosaicOperation",writer:jS.write}}})],Gi.prototype,"operation",void 0),p([Ee("operation",["mosaicOperation","mosaicOperator"])],Gi.prototype,"readOperation",null),p([f({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],Gi.prototype,"sortField",void 0),p([f({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],Gi.prototype,"sortValue",void 0),p([ur("sortValue")],Gi.prototype,"castSortValue",null),p([f({type:it,json:{write:!0}})],Gi.prototype,"viewpoint",void 0),p([f({type:String,json:{write:!0}})],Gi.prototype,"where",void 0),Gi=u7=p([W("esri.layers.support.MosaicRule")],Gi);const sl=Gi;let ti=class extends we{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(e,t,r){this.layer.version<10.3||(t[r]=e)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(e,t,r){this.format&&this.format.toLowerCase().includes("jpg")&&e!=null&&(t[r]=e)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(e,t,r){this.format==="lerc"&&e!=null&&(t[r]=e)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(e,t,r){this.format==="lerc"&&this.layer.version>=10.5&&(t[r]=e)}get version(){const e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("rasterFunction"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("definitionExpression"),e.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(e){this._set("version",e)}get mosaicRule(){const e=this.layer;let t=e.mosaicRule;const r=e.definitionExpression;return t?r&&r!==t.where&&(t=t.clone(),t.where=r):r&&(t=new sl({where:r})),t}get rasterFunction(){const e=this.layer;let{rasterFunction:t}=e;const r=e.pixelFilter,n=!e.format||e.format.includes("jpg")||e.format.includes("png");t=this._addResampleRasterFunction(t);const i=e.multidimensionalSubset?.areaOfInterest;return i&&(t=$Et(t,i)),n&&!r&&e.renderer?.type!=="vector-field"&&(t=this.combineRendererWithRenderingRule(t)),t}combineRendererWithRenderingRule(e){const t=this.layer,{rasterInfo:r,renderer:n}=t;return e=e||t.rasterFunction,!n||!Fme(n)?e:l7(PEt(n,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandNames:r.bandInfos.map(({name:i})=>i),convertColorRampToColormap:t.version<10.6,convertToRFT:!!e?.rasterFunctionDefinition,bandCount:r.bandCount}),e)}_addResampleRasterFunction(e){if(this.layer.renderer?.type!=="vector-field"||e?.functionName==="Resample")return e;const t=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,r=this.layer.serviceRasterInfo.pixelSize;let n=new _r({functionName:"Resample",functionArguments:{ResamplingType:t,InputCellSize:r}});return n=e?.rasterFunctionDefinition?new _r({rasterFunctionDefinition:Mh(n)}):n,l7(n,e)}};function $Et(e,t){const r=new _r({functionName:"Clip",functionArguments:{ClippingGeometry:t.toJSON(),ClippingType:1}});return l7(r,e)}p([f()],ti.prototype,"layer",void 0),p([f({json:{write:!0}})],ti.prototype,"adjustAspectRatio",null),p([Re("adjustAspectRatio")],ti.prototype,"writeAdjustAspectRatio",null),p([f({json:{write:!0}})],ti.prototype,"bandIds",null),p([f({json:{write:!0}})],ti.prototype,"compression",void 0),p([f({json:{write:!0}})],ti.prototype,"compressionQuality",null),p([Re("compressionQuality")],ti.prototype,"writeCompressionQuality",null),p([f({json:{write:!0}})],ti.prototype,"compressionTolerance",null),p([Re("compressionTolerance")],ti.prototype,"writeCompressionTolerance",null),p([f({json:{write:!0}})],ti.prototype,"format",null),p([f({type:String,json:{read:{reader:od.read},write:{writer:od.write}}})],ti.prototype,"interpolation",null),p([f({json:{write:!0}})],ti.prototype,"noData",null),p([f({type:String,json:{read:{reader:FS.read},write:{writer:FS.write}}})],ti.prototype,"noDataInterpretation",null),p([f({json:{write:!0}})],ti.prototype,"pixelType",void 0),p([f({json:{write:!0}})],ti.prototype,"lercVersion",void 0),p([Re("lercVersion")],ti.prototype,"writeLercVersion",null),p([f({type:Number})],ti.prototype,"version",null),p([f({json:{write:!0}})],ti.prototype,"mosaicRule",null),p([f({json:{write:!0,name:"renderingRule"}})],ti.prototype,"rasterFunction",null),ti=p([W("esri.layers.support.ExportImageServiceParameters")],ti);async function rC(e,t,r){let n;try{n=await createImageBitmap(e)}catch(i){throw new ie("request:server",`Unable to load ${t}`,{url:t,error:i})}return Gr(r),n}async function UE(e,t,r,n,i){let s;try{s=await createImageBitmap(e)}catch(o){throw new ie("request:server",`Unable to load tile ${t}/${r}/${n}`,{error:o,level:t,row:r,col:n})}return Gr(i),s}var h7;const qEt={base:_c,key:"type",typeMap:{extent:jt,polygon:ts}};let my=h7=class extends we{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Map;e.forEach(n=>{if(!n.dimensionName)return;let i,s;if(Array.isArray(n.values[0])){const o=n.values;i=o[0][0],s=o[n.values.length-1][1]}else{const o=n.values;i=o[0],s=o[n.values.length-1]}if(t.has(n.dimensionName)){const o=t.get(n.dimensionName);o[0]=Math.min(i,o[0]),o[1]=Math.max(s,o[1])}else t.set(n.dimensionName,[i,s])});const r=[];for(const n of t)r.push({name:n[0],extent:n[1]});return r}get variables(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Set;return e.forEach(r=>{r.variableName&&t.add(r.variableName)}),[...t]}clone(){const e=this.subsetDefinitions?.map(r=>r.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new h7({areaOfInterest:t,subsetDefinitions:e})}};p([f({types:qEt,json:{read:An,write:!0}})],my.prototype,"areaOfInterest",void 0),p([f({readOnly:!0})],my.prototype,"dimensions",null),p([f({readOnly:!0})],my.prototype,"variables",null),p([f({type:[Gg],json:{write:!0}})],my.prototype,"subsetDefinitions",void 0),my=h7=p([W("esri.layers.support.MultidimensionalSubset")],my);const Vme=my;var p7;function _0(e){return e=Number(e),isNaN(e)?void 0:e}let ku=p7=class extends we{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new p7({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};p([f({json:{name:"BandName",write:!0}})],ku.prototype,"name",void 0),p([f({json:{name:"WavelengthMin",read:{reader:_0},write:!0}})],ku.prototype,"minWavelength",void 0),p([f({json:{name:"WavelengthMax",read:{reader:_0},write:!0}})],ku.prototype,"maxWavelength",void 0),p([f({json:{name:"RadianceBias",read:{reader:_0},write:!0}})],ku.prototype,"radianceBias",void 0),p([f({json:{name:"RadianceGain",read:{reader:_0},write:!0}})],ku.prototype,"radianceGain",void 0),p([f({json:{name:"ReflectanceBias",read:{reader:_0},write:!0}})],ku.prototype,"reflectanceBias",void 0),p([f({json:{name:"ReflectanceGain",read:{reader:_0},write:!0}})],ku.prototype,"reflectanceGain",void 0),p([f({json:{name:"SolarIrradiance",read:{reader:_0},write:!0}})],ku.prototype,"solarIrradiance",void 0),ku=p7=p([W("esri.layers.support.RasterBandInfo")],ku);const dQ=ku;var d7;function o2(e){return e=Number(e),isNaN(e)?void 0:e}let Qa=d7=class extends we{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(e){return new Date(e)}writeAcquisitionDate(e,t){t.AcquisitionDate=e.getTime()}clone(){return new d7({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};p([f({json:{name:"AcquisitionDate",write:!0}})],Qa.prototype,"acquisitionDate",void 0),p([Ee("acquisitionDate")],Qa.prototype,"readAcquisitionDate",null),p([Re("acquisitionDate")],Qa.prototype,"writeAcquisitionDate",null),p([f({json:{name:"CloudCover",read:{reader:o2},write:!0}})],Qa.prototype,"cloudCover",void 0),p([f({json:{name:"ProductName",write:!0}})],Qa.prototype,"productName",void 0),p([f({json:{name:"SensorName",write:!0}})],Qa.prototype,"sensorName",void 0),p([f({json:{name:"SensorAzimuth",read:{reader:o2},write:!0}})],Qa.prototype,"sensorAzimuth",void 0),p([f({json:{name:"SensorElevation",read:{reader:o2},write:!0}})],Qa.prototype,"sensorElevation",void 0),p([f({json:{name:"SunAzimuth",read:{reader:o2},write:!0}})],Qa.prototype,"sunAzimuth",void 0),p([f({json:{name:"SunElevation",read:{reader:o2},write:!0}})],Qa.prototype,"sunElevation",void 0),Qa=d7=p([W("esri.layers.support.RasterSensorInfo")],Qa);const HEt=Qa;var f7;let Rs=f7=class extends we{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new f7({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:se(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:se(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:se(this.tileInfo),transposeInfo:se(this.transposeInfo),blockBoundary:se(this.blockBoundary)})}};p([f({type:Number,json:{write:!0}})],Rs.prototype,"blockWidth",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"blockHeight",void 0),p([f({type:String,json:{write:!0}})],Rs.prototype,"compression",void 0),p([f({type:it,json:{write:!0}})],Rs.prototype,"origin",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"firstPyramidLevel",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"maximumPyramidLevel",void 0),p([f({json:{write:!0}})],Rs.prototype,"pyramidResolutions",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"pyramidScalingFactor",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"pyramidBlockWidth",void 0),p([f({type:Number,json:{write:!0}})],Rs.prototype,"pyramidBlockHeight",void 0),p([f({type:Boolean,json:{write:!0}})],Rs.prototype,"isVirtualTileInfo",void 0),p([f({json:{write:!0}})],Rs.prototype,"tileInfo",void 0),p([f()],Rs.prototype,"transposeInfo",void 0),p([f()],Rs.prototype,"blockBoundary",void 0),Rs=f7=p([W("esri.layers.support.RasterStorageInfo")],Rs);const gO=Rs;var m7;let tn=m7=class extends we{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const e=this.keyProperties.BandProperties,{bandCount:t}=this;if(!e?.length||e.length<t){const n=[];for(let i=1;i<=t;i++)n.push(new dQ({name:"band_"+i}));return n}const r=e.map(n=>dQ.fromJSON(n));for(let n=0;n<r.length;n++)r[n].name=r[n].name||"band_"+(n+1);return r}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(this.transform==null||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return HEt.fromJSON(this.keyProperties)}clone(){return new m7({attributeTable:se(this.attributeTable),bandCount:this.bandCount,colormap:se(this.colormap),extent:se(this.extent),format:this.format,height:this.height,width:this.width,histograms:se(this.histograms),keyProperties:se(this.keyProperties),multidimensionalInfo:se(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:se(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:se(this.spatialReference),statistics:se(this.statistics),storageInfo:se(this.storageInfo),transform:se(this.transform)})}};p([f({json:{write:!0}})],tn.prototype,"attributeTable",void 0),p([f({json:{write:!0}})],tn.prototype,"bandCount",void 0),p([f({readOnly:!0})],tn.prototype,"bandInfos",null),p([f({json:{write:!0}})],tn.prototype,"colormap",void 0),p([f({type:String,readOnly:!0})],tn.prototype,"dataType",null),p([f({type:jt,json:{write:!0}})],tn.prototype,"extent",void 0),p([f({type:jt,json:{write:!0}})],tn.prototype,"nativeExtent",null),p([f({json:{write:!0}})],tn.prototype,"nativePixelSize",null),p([f({json:{write:!0}})],tn.prototype,"format",void 0),p([f({json:{write:!0}})],tn.prototype,"height",void 0),p([f({json:{write:!0}})],tn.prototype,"width",void 0),p([f({json:{write:!0}})],tn.prototype,"hasMultidimensionalTranspose",null),p([f({json:{write:!0}})],tn.prototype,"histograms",void 0),p([f({json:{write:!0}})],tn.prototype,"keyProperties",void 0),p([f({json:{write:!0}})],tn.prototype,"multidimensionalInfo",void 0),p([f({json:{write:!0}})],tn.prototype,"noDataValue",void 0),p([f({json:{write:!0}})],tn.prototype,"pixelSize",void 0),p([f({json:{write:!0}})],tn.prototype,"pixelType",void 0),p([f()],tn.prototype,"isPseudoSpatialReference",void 0),p([f({readOnly:!0})],tn.prototype,"sensorInfo",null),p([f({type:Ke,json:{write:!0}})],tn.prototype,"spatialReference",void 0),p([f({json:{write:!0}})],tn.prototype,"statistics",void 0),p([f({type:gO,json:{write:!0}})],tn.prototype,"storageInfo",void 0),p([f({json:{write:!0}})],tn.prototype,"transform",void 0),tn=m7=p([W("esri.layers.support.RasterInfo")],tn);const m3=tn;let Gme=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const e=await EG("RasterWorker");this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:e.pixelBlock.toJSON(),type:e.dataType},t);return r?new Ht(r):null}computeStatisticsHistograms(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:e.pixelBlock.toJSON()},t)}async decode(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",e,t);return r?new Ht(r):null}async symbolize(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r={extent:e.extent?.toJSON(),pixelBlock:e.pixelBlock?.toJSON(),simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},n=await this._workerThread.invoke("symbolize",r,t);return n?new Ht(n):null}async updateSymbolizer(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:r},t))}async updateRasterFunction(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:e.toJSON()},t))}async process(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:e.extent?.toJSON(),primaryPixelSizes:e.primaryPixelSizes?.map(n=>n!=null?n.toJSON():null),primaryPixelBlocks:e.primaryPixelBlocks.map(n=>n!=null?n.toJSON():null),primaryRasterIds:e.primaryRasterIds},t);return r?new Ht(r):null}async stretch(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},n=await this._workerThread.invoke("stretch",r,t);return n?new Ht(n):null}async split(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},n=await this._workerThread.invoke("split",r,t);return n&&n.forEach((i,s)=>{n.set(s,i?Ht.fromJSON(i):null)}),n}async clipTile(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={...e,pixelBlock:e.pixelBlock.toJSON()},n=await this._workerThread.invoke("clipTile",r,t);return n?Ht.fromJSON(n):null}async estimateStatisticsHistograms(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,t)}async mosaicAndTransform(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");if(!e?.srcPixelBlocks?.length)return{pixelBlock:null};const r={...e,srcPixelBlocks:e.srcPixelBlocks.map(i=>i!=null?i.toJSON():null)},n=await this._workerThread.invoke("mosaicAndTransform",r,t);return{pixelBlock:n.pixelBlock?new Ht(n.pixelBlock):null,localNorthDirections:n.localNorthDirections}}async createFlowMesh(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:n,simulationSettings:i}=e,s=await this._workerThread.invoke("createFlowMesh",{meshType:n,flowData:r,simulationSettings:i},{...t,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(s.vertexBuffer),indexData:new Uint32Array(s.indexBuffer)}}getProjectionOffsetGrid(e,t){if(!this._workerThread)throw new ie("raster-jobhandler:no-connection","no available worker connection");const r=e.datumTransformation!=null?e.datumTransformation.steps.map(s=>({wkid:s.wkid,wkt:s.wkt,isInverse:s.isInverse})):null,n=e.rasterTransform!=null?e.rasterTransform.toJSON():null,i={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:r,rasterTransform:n,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",i,t)}};function zme(e,t,r){const n=t.shift();if(r.length===0){const s=[];r.push({sliceId:-1,multidimensionalDefinition:s})}const i=r.length;for(let s=0;s<i;s++){const o=r.shift().multidimensionalDefinition;n.values?.forEach(a=>{r.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:e,dimensionName:n.name,values:[a]}]})})}t.length&&zme(e,t,r)}function WEt(e,t){const r=[];let n=0;return(t?e.variables.filter(i=>i.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((i,s)=>i.name>s.name?1:-1)).forEach(i=>{const s=[],o=[...i.dimensions].sort((a,l)=>a.name>l.name?-1:1);zme(i.name,o,s),s.forEach(a=>{r.push({...a,sliceId:n++})})}),r}function ZEt(e,t,r){let n=e;if(t&&(t=[...t].sort((i,s)=>i.dimensionName<s.dimensionName?-1:1)).forEach(({dimensionName:i,values:s,isSlice:o})=>{s.length&&(n=n.filter(a=>{const l=a.multidimensionalDefinition.find(c=>c.dimensionName===i);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof s[0]=="number"?s.includes(u):s.some(c=>c[0]<=u&&c[1]>=u):typeof s[0]=="number"?s.some(c=>u[0]<=c&&u[1]>=c):o?s.some(c=>c[0]===u[0]&&c[0]===u[1]):s.some(c=>c[0]>=u[0]&&c[0]<=u[1]||c[1]>=u[0]&&c[1]<=u[1]||c[0]<u[0]&&c[1]>u[1])}))}),n.length&&r?.start!=null&&r.end!=null){const i=r.start.getTime(),s=r.end.getTime(),o=n[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(n=n.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return i<=l&&s>=l}))}return n.map(i=>i.sliceId)}function $me(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function JEt(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function qme(e){return e.length===1?[e[0],e[0]]:[e[0],e[e.length-1]]}function Hme(e,t,r){if(!t?.subsetDefinitions?.length)return e;let n;if(r){const{variables:o}=t;if(o.length&&!o.includes(r))return null;const a=t.subsetDefinitions.find(l=>l.dimensionName===e.name&&l.variableName===r);if(!a?.values?.length)return e;n=qme(a.values)}else n=t.dimensions.find(({name:o})=>o===e.name)?.extent;const i=n;if(!i?.length)return e;const s=e.values.filter(o=>$me(o,i));return{...e,extent:[...i],values:s}}function pz(e,t,r){if(!t?.subsetDefinitions?.length)return!1;const{variables:n}=t;if(n.length&&e.some(({variableName:i})=>i&&!n.includes(i)))return!0;for(let i=0;i<e.length;i++){const s=e[i],o=t.subsetDefinitions.find(a=>(s.variableName===""||a.variableName===s.variableName)&&a.dimensionName===s.dimensionName);if(o?.values.length){const a=qme(o.values);if(!s.isSlice&&s.values.length===2&&!Array.isArray(s.values[0])&&s.values[0]!==s.values[1]&&r){if(!JEt(s.values,a))return!0}else if(s.values.some(l=>!$me(l,a)))return!0}}return!1}function QL(e,t){if(e==null)return{isOutside:!1};const{geometry:r,timeExtent:n,multidimensionalDefinition:i}=t;let s=null;if(n!=null&&(s=YEt(e,n),s==null))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&r){const a=r.type==="point"?r:r.type==="extent"?r.center:r.type==="polygon"?r.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return i!=null&&i.length&&pz(i,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:r,timeExtent:s,multidimensionalDefinition:i}}}function YEt(e,t){const r=e.dimensions.find(({name:o})=>o==="StdTime");if(r==null||t.start==null&&t.end==null)return t;t=t.clone();const{start:n,end:i}=t.toJSON(),s=n===i?[n]:n!=null&&i!=null?[n,i]:[n??i];return s.length===2&&r?.extent.length&&(s[0]=Math.max(s[0],r.extent[0]),s[1]=Math.min(s[1],r.extent[1]??r.extent[0]),s[1]<s[0])||pz([new Gg({variableName:"",dimensionName:"StdTime",isSlice:s.length===1,values:s})],e,!0)?null:(t.start=new Date(s[0]),t.end=new Date(s[1]??s[0]),t)}function Wme(e,t={}){const{multidimensionalInfo:r,keyProperties:n}=e;if(r==null)return null;const{variableName:i,multidimensionalSubset:s,multidimensionalDefinition:o}=t,a=o!=null?o[0]?.variableName:null,l=i||a||n?.DefaultVariable;let{variables:u}=r;return s?.variables?.length&&(u=u.filter(({name:c})=>s.variables.includes(c))),l?u.find(({name:c})=>c===l)??u[0]:u[0]}function Zme(e,t={}){const r=Wme(e,t);if(!r)return null;const n=[],{dimensions:i,name:s}=r;if(i.length===0)return[new Gg({variableName:s,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<i.length;o++){const a=Hme(i[o],t.multidimensionalSubset,s);if(!a)return null;const{values:l,extent:u}=a;let c=l?.[0]??u?.[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&u&&Math.abs(u[1])<=Math.abs(u[0])&&(c=l?.length?l[l.length-1]:u[1]),n.push(new Gg({variableName:s,dimensionName:a.name,values:[c],isSlice:!t.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return n}function XEt(e){return!!e?.length&&e.some(t=>{if(t.values==null)return!0;const r=t.values.length;return r===0||r>1||!t.isSlice&&Array.isArray(t.values[0])})}function Jme(e,t){if(t==null||e==null)return null;let r=t.variables.map(n=>({...n}));return e?.variables?.length&&(r=r.filter(({name:n})=>e.variables.includes(n)),r.forEach(n=>{n.dimensions=n.dimensions.map(i=>Hme(i,e,n.name)).filter(Qo)})),r}function QEt(e,t){const{values:r}=t;if(r?.length){const a=Array.isArray(r[0]),l=Array.isArray(e);return a!==l?-1:a&&l?r.findIndex(u=>u[0]===e[0]&&u[1]===e[1]):r.indexOf(e)}const{extent:n}=t;if(Array.isArray(e)||!n||e<n[0]||e>n[1])return-1;const i=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-n[0])/i);const s=n[0];let o=-1;switch(t.intervalUnit?.toLowerCase()||"days"){case"seconds":o=Math.round((e-s)/1e3/i);break;case"minutes":o=Math.round((e-s)/6e4/i);break;case"hours":o=Math.round((e-s)/36e5/i);break;case"days":o=Math.round((e-s)/864e5/i);break;case"months":{const a=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),l=new Date(s).getUTCMonth(),u=new Date(e).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/i);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/i)}return o}function fQ(e){let t=e.values?.length;if(t)return t;const{extent:r,unit:n}=e,i=e.interval||1,s=r?r[1]-r[0]:0;if(n!=="ISO8601")return Math.round(s/i);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(s/1e3/i);break;case"minutes":t=Math.round(s/6e4/i);break;case"hours":t=Math.round(s/36e5/i);break;case"days":t=Math.round(s/864e5/i);break;case"months":if(r){const o=new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear(),a=new Date(r[0]).getUTCMonth(),l=new Date(r[1]).getUTCMonth();t=o===0?l-a+1:l+11-a+12*(o-1)+1}else t=0;break;case"years":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/i):0;break;case"decades":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/10/i):0;break;default:t=0}return t}function KEt(e,t){let r=0;const n=e[0].variableName,i=[...t.variables].sort((s,o)=>s.name>o.name?1:-1);for(let s=0;s<i.length;s++){const o=i[s],a=[...o.dimensions].sort((c,h)=>c.name>h.name?-1:1);if(o.name!==n){r+=a.map(c=>fQ(c)).reduce((c,h)=>c*h);continue}const l=a.map(c=>fQ(c)),u=a.length;for(let c=0;c<u;c++){const h=e.find(m=>m.dimensionName===a[c].name);if(h==null)return null;const d=QEt(h.values[0],a[c]);if(d===-1)return null;l.shift(),r+=c===u-1?d:d*l.reduce((m,y)=>m*y)}break}return r}var eTt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mQ,yQ={exports:{}};function tTt(){return mQ||(mQ=1,t=yQ,e=function(){function n(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return n.prototype={ensureBuffer:function(i){var s=this.buffer,o=s?s.byteLength:0;if(i<o)return s;for(var a=512;a<i;)a<<=1;for(var l=new Uint8Array(a),u=0;u<o;++u)l[u]=s[u];return this.buffer=l},getByte:function(){for(var i=this.pos;this.bufferLength<=i;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(i){var s=this.pos;if(i){this.ensureBuffer(s+i);for(var o=s+i;!this.eof&&this.bufferLength<o;)this.readBlock();var a=this.bufferLength;o>a&&(o=a)}else{for(;!this.eof;)this.readBlock();o=this.bufferLength}return this.pos=o,this.buffer.subarray(s,o)},lookChar:function(){for(var i=this.pos;this.bufferLength<=i;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var i=this.pos;this.bufferLength<=i;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(i,s,o){for(var a=i+s;this.bufferLength<=a&&!this.eof;)this.readBlock();return new Stream(this.buffer,i,s,o)},skip:function(i){i||(i=1),this.pos+=i},reset:function(){this.pos=0}},n}(),(r=function(){if(!self||!self.Uint32Array)return null;var n=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),s=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function l(c){throw new Error(c)}function u(c){var h=0,d=c[h++],m=c[h++];d!=-1&&m!=-1||l("Invalid header in flate stream"),(15&d)!=8&&l("Unknown compression method in flate stream"),((d<<8)+m)%31!=0&&l("Bad FCHECK in flate stream"),32&m&&l("FDICT bit set in flate stream"),this.bytes=c,this.bytesPos=h,this.codeSize=0,this.codeBuf=0,e.call(this)}return u.prototype=Object.create(e.prototype),u.prototype.getBits=function(c){for(var h,d=this.codeSize,m=this.codeBuf,y=this.bytes,g=this.bytesPos;d<c;)(h=y[g++])===void 0&&l("Bad encoding in flate stream"),m|=h<<d,d+=8;return h=m&(1<<c)-1,this.codeBuf=m>>c,this.codeSize=d-=c,this.bytesPos=g,h},u.prototype.getCode=function(c){for(var h=c[0],d=c[1],m=this.codeSize,y=this.codeBuf,g=this.bytes,b=this.bytesPos;m<d;){var S;(S=g[b++])===void 0&&l("Bad encoding in flate stream"),y|=S<<m,m+=8}var E=h[y&(1<<d)-1],x=E>>16,w=65535&E;return(m==0||m<x||x==0)&&l("Bad encoding in flate stream"),this.codeBuf=y>>x,this.codeSize=m-x,this.bytesPos=b,w},u.prototype.generateHuffmanTable=function(c){for(var h=c.length,d=0,m=0;m<h;++m)c[m]>d&&(d=c[m]);for(var y=1<<d,g=new Uint32Array(y),b=1,S=0,E=2;b<=d;++b,S<<=1,E<<=1)for(var x=0;x<h;++x)if(c[x]==b){var w=0,T=S;for(m=0;m<b;++m)w=w<<1|1&T,T>>=1;for(m=w;m<y;m+=E)g[m]=b<<16|x;++S}return[g,d]},u.prototype.readBlock=function(){function c(ue,de,ce,me,Se){for(var Oe=ue.getBits(ce)+me;Oe-- >0;)de[E++]=Se}var h=this.getBits(3);if(1&h&&(this.eof=!0),(h>>=1)!=0){var d,m;if(h==1)d=o,m=a;else if(h==2){for(var y=this.getBits(5)+257,g=this.getBits(5)+1,b=this.getBits(4)+4,S=Array(n.length),E=0;E<b;)S[n[E++]]=this.getBits(3);for(var x=this.generateHuffmanTable(S),w=0,T=(E=0,y+g),I=new Array(T);E<T;){var M=this.getCode(x);M==16?c(this,I,2,3,w):M==17?c(this,I,3,3,w=0):M==18?c(this,I,7,11,w=0):I[E++]=w=M}d=this.generateHuffmanTable(I.slice(0,y)),m=this.generateHuffmanTable(I.slice(y,T))}else l("Unknown block type in flate stream");for(var C=(Q=this.buffer)?Q.length:0,k=this.bufferLength;;){var N=this.getCode(d);if(N<256)k+1>=C&&(C=(Q=this.ensureBuffer(k+1)).length),Q[k++]=N;else{if(N==256)return void(this.bufferLength=k);var F=(N=i[N-=257])>>16;F>0&&(F=this.getBits(F)),w=(65535&N)+F,N=this.getCode(m),(F=(N=s[N])>>16)>0&&(F=this.getBits(F));var P=(65535&N)+F;k+w>=C&&(C=(Q=this.ensureBuffer(k+w)).length);for(var B=0;B<w;++B,++k)Q[k]=Q[k-P]}}}else{var O,v=this.bytes,A=this.bytesPos;(O=v[A++])===void 0&&l("Bad block header in flate stream");var R=O;(O=v[A++])===void 0&&l("Bad block header in flate stream"),R|=O<<8,(O=v[A++])===void 0&&l("Bad block header in flate stream");var U=O;(O=v[A++])===void 0&&l("Bad block header in flate stream"),(U|=O<<8)!=(65535&~R)&&l("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var q=this.bufferLength,Q=this.ensureBuffer(q+R),ee=q+R;this.bufferLength=ee;for(var Y=q;Y<ee;++Y){if((O=v[A++])===void 0){this.eof=!0;break}Q[Y]=O}this.bytesPos=A}},u}())!==void 0&&(t.exports=r)),yQ.exports;var e,t,r}const y3=dz(tTt());let rTt=class Yme{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,r,n){if(!t||t.byteLength<10)throw new ie("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:i=0,height:s=0,format:o}=r;const{applyJpegMask:a}=r;if(a&&(!i||!s))throw new ie("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let c=null;o==="jpg"&&a&&(c=Yme._getMask(t,{width:i,height:s}));const h=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),d=URL.createObjectURL(h),m=new Image;let y;m.src=d,m.onload=()=>{if(URL.revokeObjectURL(d),Ba(n))return void u(Xr());i=m.width,s=m.height,this._canvas&&this._ctx?(this._canvas.width===i&&this._canvas.height===s||(this._canvas.width=i,this._canvas.height=s),this._ctx.clearRect(0,0,i,s)):(this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=s,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(m,0,0);const g=this._ctx.getImageData(0,0,i,s);let b;if(y=g.data,r.renderOnCanvas){if(c)for(b=0;b<c.length;b++)c[b]?y[4*b+3]=255:y[4*b+3]=0;return this._ctx.putImageData(g,0,0),void l(null)}const S=i*s,E=new Uint8Array(S),x=new Uint8Array(S),w=new Uint8Array(S);if(c)for(b=0;b<S;b++)E[b]=y[4*b],x[b]=y[4*b+1],w[b]=y[4*b+2];else for(c=new Uint8Array(S),b=0;b<S;b++)E[b]=y[4*b],x[b]=y[4*b+1],w[b]=y[4*b+2],c[b]=y[4*b+3];l({width:i,height:s,pixels:[E,x,w],mask:c,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(d),u("cannot load image")}})}static _getMask(t,r){let n=null;try{const i=new Uint8Array(t),s=Math.ceil(i.length/2);let o=0;const a=i.length-2;for(o=s;o<a&&(i[o]!==255||i[o+1]!==217);o++);if(o+=2,o<i.length-1){const l=new y3(i.subarray(o)).getBytes();n=new Uint8Array(r.width*r.height);let u=0;for(let c=0;c<l.length;c++)for(let h=7;h>=0;h--)n[u++]=l[c]>>h&1}}catch{}return n}};var gQ,vQ={exports:{}};function nTt(){return gQ||(gQ=1,e=vQ,t=function(){var n=function(){function i(s){this.message="JPEG error: "+s}return i.prototype=new Error,i.prototype.name="JpegError",i.constructor=i,i}();return function(){if(!self||!self.Uint8ClampedArray)return null;var i=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),s=4017,o=799,a=3406,l=2276,u=1567,c=3784,h=5793,d=2896;function m(){this.decodeTransform=null,this.colorTransform=-1}function y(w,T){for(var I,M,C=0,k=[],N=16;N>0&&!w[N-1];)N--;k.push({children:[],index:0});var F,P=k[0];for(I=0;I<N;I++){for(M=0;M<w[I];M++){for((P=k.pop()).children[P.index]=T[C];P.index>0;)P=k.pop();for(P.index++,k.push(P);k.length<=I;)k.push(F={children:[],index:0}),P.children[P.index]=F.children,P=F;C++}I+1<N&&(k.push(F={children:[],index:0}),P.children[P.index]=F.children,P=F)}return k[0].children}function g(w,T,I){return 64*((w.blocksPerLine+1)*T+I)}function b(w,T,I,M,C,k,N,F,P){var B=I.mcusPerLine,O=I.progressive,v=T,A=0,R=0;function U(){if(R>0)return R--,A>>R&1;if((A=w[T++])===255){var le=w[T++];if(le)throw new n("unexpected marker "+(A<<8|le).toString(16))}return R=7,A>>>7}function q(le){for(var ve=le;;){if(typeof(ve=ve[U()])=="number")return ve;if(typeof ve!="object")throw new n("invalid huffman sequence")}}function Q(le){for(var ve=0;le>0;)ve=ve<<1|U(),le--;return ve}function ee(le){if(le===1)return U()===1?1:-1;var ve=Q(le);return ve>=1<<le-1?ve:ve+(-1<<le)+1}function Y(le,ve){var ke=q(le.huffmanTableDC),je=ke===0?0:ee(ke);le.blockData[ve]=le.pred+=je;for(var yt=1;yt<64;){var ft=q(le.huffmanTableAC),Ot=15&ft,ct=ft>>4;if(Ot!==0){var Te=i[yt+=ct];le.blockData[ve+Te]=ee(Ot),yt++}else{if(ct<15)break;yt+=16}}}function ue(le,ve){var ke=q(le.huffmanTableDC),je=ke===0?0:ee(ke)<<P;le.blockData[ve]=le.pred+=je}function de(le,ve){le.blockData[ve]|=U()<<P}var ce=0;function me(le,ve){if(ce>0)ce--;else for(var ke=k,je=N;ke<=je;){var yt=q(le.huffmanTableAC),ft=15&yt,Ot=yt>>4;if(ft!==0){var ct=i[ke+=Ot];le.blockData[ve+ct]=ee(ft)*(1<<P),ke++}else{if(Ot<15){ce=Q(Ot)+(1<<Ot)-1;break}ke+=16}}}var Se,Oe=0;function ye(le,ve){for(var ke,je,yt=k,ft=N,Ot=0;yt<=ft;){var ct=i[yt];switch(Oe){case 0:if(Ot=(je=q(le.huffmanTableAC))>>4,(ke=15&je)==0)Ot<15?(ce=Q(Ot)+(1<<Ot),Oe=4):(Ot=16,Oe=1);else{if(ke!==1)throw new n("invalid ACn encoding");Se=ee(ke),Oe=Ot?2:3}continue;case 1:case 2:le.blockData[ve+ct]?le.blockData[ve+ct]+=U()<<P:--Ot==0&&(Oe=Oe===2?3:0);break;case 3:le.blockData[ve+ct]?le.blockData[ve+ct]+=U()<<P:(le.blockData[ve+ct]=Se<<P,Oe=0);break;case 4:le.blockData[ve+ct]&&(le.blockData[ve+ct]+=U()<<P)}yt++}Oe===4&&--ce==0&&(Oe=0)}function Fe(le,ve,ke,je,yt){var ft=ke%B;ve(le,g(le,(ke/B|0)*le.v+je,ft*le.h+yt))}function ze(le,ve,ke){ve(le,g(le,ke/le.blocksPerLine|0,ke%le.blocksPerLine))}var dt,re,D,K,H,z,L=M.length;z=O?k===0?F===0?ue:de:F===0?me:ye:Y;var G,j,V,$,J=0;for(j=L===1?M[0].blocksPerLine*M[0].blocksPerColumn:B*I.mcusPerColumn;J<j;){var X=C?Math.min(j-J,C):j;for(re=0;re<L;re++)M[re].pred=0;if(ce=0,L===1)for(dt=M[0],H=0;H<X;H++)ze(dt,z,J),J++;else for(H=0;H<X;H++){for(re=0;re<L;re++)for(V=(dt=M[re]).h,$=dt.v,D=0;D<$;D++)for(K=0;K<V;K++)Fe(dt,z,J,D,K);J++}R=0,(G=x(w,T))&&G.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+G.invalid),T=G.offset);var te=G&&G.marker;if(!te||te<=65280)throw new n("marker was not found");if(!(te>=65488&&te<=65495))break;T+=2}return(G=x(w,T))&&G.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+G.invalid),T=G.offset),T-v}function S(w,T,I){var M,C,k,N,F,P,B,O,v,A,R,U,q,Q,ee,Y,ue,de=w.quantizationTable,ce=w.blockData;if(!de)throw new n("missing required Quantization Table.");for(var me=0;me<64;me+=8)v=ce[T+me],A=ce[T+me+1],R=ce[T+me+2],U=ce[T+me+3],q=ce[T+me+4],Q=ce[T+me+5],ee=ce[T+me+6],Y=ce[T+me+7],v*=de[me],A|R|U|q|Q|ee|Y?(A*=de[me+1],R*=de[me+2],U*=de[me+3],q*=de[me+4],Q*=de[me+5],ee*=de[me+6],Y*=de[me+7],C=(M=(M=h*v+128>>8)+(C=h*q+128>>8)+1>>1)-C,ue=(k=R)*c+(N=ee)*u+128>>8,k=k*u-N*c+128>>8,B=(F=(F=d*(A-Y)+128>>8)+(B=Q<<4)+1>>1)-B,P=(O=(O=d*(A+Y)+128>>8)+(P=U<<4)+1>>1)-P,N=(M=M+(N=ue)+1>>1)-N,k=(C=C+k+1>>1)-k,ue=F*l+O*a+2048>>12,F=F*a-O*l+2048>>12,O=ue,ue=P*o+B*s+2048>>12,P=P*s-B*o+2048>>12,B=ue,I[me]=M+O,I[me+7]=M-O,I[me+1]=C+B,I[me+6]=C-B,I[me+2]=k+P,I[me+5]=k-P,I[me+3]=N+F,I[me+4]=N-F):(ue=h*v+512>>10,I[me]=ue,I[me+1]=ue,I[me+2]=ue,I[me+3]=ue,I[me+4]=ue,I[me+5]=ue,I[me+6]=ue,I[me+7]=ue);for(var Se=0;Se<8;++Se)v=I[Se],(A=I[Se+8])|(R=I[Se+16])|(U=I[Se+24])|(q=I[Se+32])|(Q=I[Se+40])|(ee=I[Se+48])|(Y=I[Se+56])?(C=(M=4112+((M=h*v+2048>>12)+(C=h*q+2048>>12)+1>>1))-C,ue=(k=R)*c+(N=ee)*u+2048>>12,k=k*u-N*c+2048>>12,N=ue,B=(F=(F=d*(A-Y)+2048>>12)+(B=Q)+1>>1)-B,P=(O=(O=d*(A+Y)+2048>>12)+(P=U)+1>>1)-P,ue=F*l+O*a+2048>>12,F=F*a-O*l+2048>>12,O=ue,ue=P*o+B*s+2048>>12,P=P*s-B*o+2048>>12,v=(v=(M=M+N+1>>1)+O)<16?0:v>=4080?255:v>>4,A=(A=(C=C+k+1>>1)+(B=ue))<16?0:A>=4080?255:A>>4,R=(R=(k=C-k)+P)<16?0:R>=4080?255:R>>4,U=(U=(N=M-N)+F)<16?0:U>=4080?255:U>>4,q=(q=N-F)<16?0:q>=4080?255:q>>4,Q=(Q=k-P)<16?0:Q>=4080?255:Q>>4,ee=(ee=C-B)<16?0:ee>=4080?255:ee>>4,Y=(Y=M-O)<16?0:Y>=4080?255:Y>>4,ce[T+Se]=v,ce[T+Se+8]=A,ce[T+Se+16]=R,ce[T+Se+24]=U,ce[T+Se+32]=q,ce[T+Se+40]=Q,ce[T+Se+48]=ee,ce[T+Se+56]=Y):(ue=(ue=h*v+8192>>14)<-2040?0:ue>=2024?255:ue+2056>>4,ce[T+Se]=ue,ce[T+Se+8]=ue,ce[T+Se+16]=ue,ce[T+Se+24]=ue,ce[T+Se+32]=ue,ce[T+Se+40]=ue,ce[T+Se+48]=ue,ce[T+Se+56]=ue)}function E(w,T){for(var I=T.blocksPerLine,M=T.blocksPerColumn,C=new Int16Array(64),k=0;k<M;k++)for(var N=0;N<I;N++)S(T,g(T,k,N),C);return T.blockData}function x(w,T,I){function M(P){return w[P]<<8|w[P+1]}var C=w.length-1,k=I<T?I:T;if(T>=C)return null;var N=M(T);if(N>=65472&&N<=65534)return{invalid:null,marker:N,offset:T};for(var F=M(k);!(F>=65472&&F<=65534);){if(++k>=C)return null;F=M(k)}return{invalid:N.toString(16),marker:F,offset:k}}return m.prototype={parse:function(w){function T(){var le=w[N]<<8|w[N+1];return N+=2,le}function I(){var le=T(),ve=N+le-2,ke=x(w,ve,N);ke&&ke.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+ke.invalid),ve=ke.offset);var je=w.subarray(N,ve);return N+=je.length,je}function M(le){for(var ve=Math.ceil(le.samplesPerLine/8/le.maxH),ke=Math.ceil(le.scanLines/8/le.maxV),je=0;je<le.components.length;je++){H=le.components[je];var yt=Math.ceil(Math.ceil(le.samplesPerLine/8)*H.h/le.maxH),ft=Math.ceil(Math.ceil(le.scanLines/8)*H.v/le.maxV),Ot=ve*H.h,ct=ke*H.v*64*(Ot+1);H.blockData=new Int16Array(ct),H.blocksPerLine=yt,H.blocksPerColumn=ft}le.mcusPerLine=ve,le.mcusPerColumn=ke}var C,k,N=0,F=null,P=null,B=[],O=[],v=[],A=T();if(A!==65496)throw new n("SOI not found");for(A=T();A!==65497;){var R,U,q;switch(A){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Q=I();A===65504&&Q[0]===74&&Q[1]===70&&Q[2]===73&&Q[3]===70&&Q[4]===0&&(F={version:{major:Q[5],minor:Q[6]},densityUnits:Q[7],xDensity:Q[8]<<8|Q[9],yDensity:Q[10]<<8|Q[11],thumbWidth:Q[12],thumbHeight:Q[13],thumbData:Q.subarray(14,14+3*Q[12]*Q[13])}),A===65518&&Q[0]===65&&Q[1]===100&&Q[2]===111&&Q[3]===98&&Q[4]===101&&(P={version:Q[5]<<8|Q[6],flags0:Q[7]<<8|Q[8],flags1:Q[9]<<8|Q[10],transformCode:Q[11]});break;case 65499:for(var ee=T()+N-2;N<ee;){var Y=w[N++],ue=new Uint16Array(64);if(Y>>4){if(Y>>4!=1)throw new n("DQT - invalid table spec");for(U=0;U<64;U++)ue[i[U]]=T()}else for(U=0;U<64;U++)ue[i[U]]=w[N++];B[15&Y]=ue}break;case 65472:case 65473:case 65474:if(C)throw new n("Only single frame JPEGs supported");T(),(C={}).extended=A===65473,C.progressive=A===65474,C.precision=w[N++],C.scanLines=T(),C.samplesPerLine=T(),C.components=[],C.componentIds={};var de,ce=w[N++],me=0,Se=0;for(R=0;R<ce;R++){de=w[N];var Oe=w[N+1]>>4,ye=15&w[N+1];me<Oe&&(me=Oe),Se<ye&&(Se=ye);var Fe=w[N+2];q=C.components.push({h:Oe,v:ye,quantizationId:Fe,quantizationTable:null}),C.componentIds[de]=q-1,N+=3}C.maxH=me,C.maxV=Se,M(C);break;case 65476:var ze=T();for(R=2;R<ze;){var dt=w[N++],re=new Uint8Array(16),D=0;for(U=0;U<16;U++,N++)D+=re[U]=w[N];var K=new Uint8Array(D);for(U=0;U<D;U++,N++)K[U]=w[N];R+=17+D,(dt>>4?O:v)[15&dt]=y(re,K)}break;case 65501:T(),k=T();break;case 65498:T();var H,z=w[N++],L=[];for(R=0;R<z;R++){var G=C.componentIds[w[N++]];H=C.components[G];var j=w[N++];H.huffmanTableDC=v[j>>4],H.huffmanTableAC=O[15&j],L.push(H)}var V=w[N++],$=w[N++],J=w[N++],X=b(w,N,C,L,k,V,$,J>>4,15&J);N+=X;break;case 65535:w[N]!==255&&N--;break;default:if(w[N-3]===255&&w[N-2]>=192&&w[N-2]<=254){N-=3;break}throw new n("unknown marker "+A.toString(16))}A=T()}for(this.width=C.samplesPerLine,this.height=C.scanLines,this.jfif=F,this.eof=N,this.adobe=P,this.components=[],R=0;R<C.components.length;R++){var te=B[(H=C.components[R]).quantizationId];te&&(H.quantizationTable=te),this.components.push({output:E(C,H),scaleX:H.h/C.maxH,scaleY:H.v/C.maxV,blocksPerLine:H.blocksPerLine,blocksPerColumn:H.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(w,T){var I,M,C,k,N,F,P,B,O,v,A,R=this.width/w,U=this.height/T,q=0,Q=this.components.length,ee=w*T*Q,Y=new Uint8ClampedArray(ee),ue=new Uint32Array(w),de=4294967288;for(P=0;P<Q;P++){for(M=(I=this.components[P]).scaleX*R,C=I.scaleY*U,q=P,A=I.output,k=I.blocksPerLine+1<<3,N=0;N<w;N++)B=0|N*M,ue[N]=(B&de)<<3|7&B;for(F=0;F<T;F++)for(v=k*((B=0|F*C)&de)|(7&B)<<3,N=0;N<w;N++)Y[q]=A[v+ue[N]],q+=Q}var ce=this.decodeTransform;if(ce)for(P=0;P<ee;)for(B=0,O=0;B<Q;B++,P++,O+=2)Y[P]=(Y[P]*ce[O]>>8)+ce[O+1];return Y},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(w){for(var T,I,M,C=0,k=w.length;C<k;C+=3)T=w[C],I=w[C+1],M=w[C+2],w[C]=T-179.456+1.402*M,w[C+1]=T+135.459-.344*I-.714*M,w[C+2]=T-226.816+1.772*I;return w},_convertYcckToRgb:function(w){for(var T,I,M,C,k=0,N=0,F=w.length;N<F;N+=4)T=w[N],I=w[N+1],M=w[N+2],C=w[N+3],w[k++]=I*(-660635669420364e-19*I+.000437130475926232*M-54080610064599e-18*T+.00048449797120281*C-.154362151871126)-122.67195406894+M*(-.000957964378445773*M+.000817076911346625*T-.00477271405408747*C+1.53380253221734)+T*(.000961250184130688*T-.00266257332283933*C+.48357088451265)+C*(-.000336197177618394*C+.484791561490776),w[k++]=107.268039397724+I*(219927104525741e-19*I-.000640992018297945*M+.000659397001245577*T+.000426105652938837*C-.176491792462875)+M*(-.000778269941513683*M+.00130872261408275*T+.000770482631801132*C-.151051492775562)+T*(.00126935368114843*T-.00265090189010898*C+.25802910206845)+C*(-.000318913117588328*C-.213742400323665),w[k++]=I*(-.000570115196973677*I-263409051004589e-19*M+.0020741088115012*T-.00288260236853442*C+.814272968359295)-20.810012546947+M*(-153496057440975e-19*M-.000132689043961446*T+.000560833691242812*C-.195152027534049)+T*(.00174418132927582*T-.00255243321439347*C+.116935020465145)+C*(-.000343531996510555*C+.24165260232407);return w},_convertYcckToCmyk:function(w){for(var T,I,M,C=0,k=w.length;C<k;C+=4)T=w[C],I=w[C+1],M=w[C+2],w[C]=434.456-T-1.402*M,w[C+1]=119.541-T+.344*I+.714*M,w[C+2]=481.816-T-1.772*I;return w},_convertCmykToRgb:function(w){for(var T,I,M,C,k=0,N=1/255,F=0,P=w.length;F<P;F+=4)T=w[F]*N,I=w[F+1]*N,M=w[F+2]*N,C=w[F+3]*N,w[k++]=255+T*(-4.387332384609988*T+54.48615194189176*I+18.82290502165302*M+212.25662451639585*C-285.2331026137004)+I*(1.7149763477362134*I-5.6096736904047315*M-17.873870861415444*C-5.497006427196366)+M*(-2.5217340131683033*M-21.248923337353073*C+17.5119270841813)-C*(21.86122147463605*C+189.48180835922747),w[k++]=255+T*(8.841041422036149*T+60.118027045597366*I+6.871425592049007*M+31.159100130055922*C-79.2970844816548)+I*(-15.310361306967817*I+17.575251261109482*M+131.35250912493976*C-190.9453302588951)+M*(4.444339102852739*M+9.8632861493405*C-24.86741582555878)-C*(20.737325471181034*C+187.80453709719578),w[k++]=255+T*(.8842522430003296*T+8.078677503112928*I+30.89978309703729*M-.23883238689178934*C-14.183576799673286)+I*(10.49593273432072*I+63.02378494754052*M+50.606957656360734*C-112.23884253719248)+M*(.03296041114873217*M+115.60384449646641*C-193.58209356861505)-C*(22.33816807309886*C+180.12613974708367);return w},getData:function(w,T,I){if(this.numComponents>4)throw new n("Unsupported color mode");var M=this._getLinearizedBlockData(w,T);if(this.numComponents===1&&I){for(var C=M.length,k=new Uint8ClampedArray(3*C),N=0,F=0;F<C;F++){var P=M[F];k[N++]=P,k[N++]=P,k[N++]=P}return k}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(M);if(this.numComponents===4){if(this._isColorConversionNeeded())return I?this._convertYcckToRgb(M):this._convertYcckToCmyk(M);if(I)return this._convertCmykToRgb(M)}return M}},m}()},(r=t())!==void 0&&(e.exports=r)),vQ.exports;var e,t,r}const Xme=dz(nTt());let iTt=class{static decode(e,t=!1){const r=new Uint8Array(e),n=new Xme;n.parse(r);const{width:i,height:s,numComponents:o,eof:a}=n,l=n.getData(i,s,!0),u=i*s;let c,h=null,d=0,m=0,y=0;if(!t&&a<r.length-1)try{const g=new y3(r.subarray(a)).getBytes();h=new Uint8Array(u);let b=0;for(d=0;d<g.length;d++)for(y=7;y>=0;y--)h[b++]=g[d]>>y&1}catch{}if(o===1&&l.length===i*s){const g=new Uint8Array(l.buffer);c=[g,g,g]}else{for(c=[],d=0;d<3;d++)c.push(new Uint8Array(u));for(y=0,m=0;m<u;m++)for(d=0;d<3;d++)c[d][m]=l[y++]}return{width:i,height:s,pixels:c,mask:h}}};const Qme=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let KL=null;function Kme(){return KL||(KL=Me(()=>import("./lerc-wasm-BoCw-igV-Ch_0wPmV.js"),__vite__mapDeps([146,1,2]),import.meta.url).then(e=>e.l).then(({default:e})=>e({locateFile:t=>br(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{oTt(e)}),KL)}const nC={getBlobInfo:null,decode:null};function sTt(e){return 16+(e>>3<<3)}function Qd(e,t,r){r.set(e.slice(t,t+r.length))}function oTt(e){const{_malloc:t,_free:r,_lerc_getBlobInfo:n,_lerc_getDataRanges:i,_lerc_decode_4D:s,asm:o}=e;let a;const l=Object.values(o).find(c=>c&&"buffer"in c&&c.buffer===e.HEAPU8.buffer),u=c=>{const h=c.map(g=>sTt(g)),d=h.reduce((g,b)=>g+b),m=t(d);a=new Uint8Array(l.buffer);let y=h[0];h[0]=m;for(let g=1;g<h.length;g++){const b=h[g];h[g]=h[g-1]+y,y=b}return h};nC.getBlobInfo=c=>{const h=new Uint8Array(48),d=new Uint8Array(8*3),[m,y,g]=u([c.length,h.length,d.length]);a.set(c,m),a.set(h,y),a.set(d,g);let b=n(m,c.length,y,g,12,3);if(b)throw r(m),new Error(`lerc-getBlobInfo: error code is ${b}`);a=new Uint8Array(l.buffer),Qd(a,y,h),Qd(a,g,d);const S=new Uint32Array(h.buffer),E=new Float64Array(d.buffer),[x,w,,T,I,M,C,k,N,F,P]=S,B={version:x,depthCount:F,width:T,height:I,validPixelCount:C,bandCount:M,blobSize:k,maskCount:N,dataType:w,minValue:E[0],maxValue:E[1],maxZerror:E[2],statistics:[],bandCountWithNoData:P};if(P&&F>1)return r(m),B;if(F===1&&M===1)return r(m),B.statistics.push({minValue:E[0],maxValue:E[1]}),B;const O=F*M*8,v=new Uint8Array(O),A=new Uint8Array(O);let R=m,U=0,q=0,Q=!1;if(a.byteLength<m+2*O?(r(m),Q=!0,[R,U,q]=u([c.length,O,O]),a.set(c,R)):[U,q]=u([O,O]),a.set(v,U),a.set(A,q),b=i(R,c.length,F,M,U,q),b)throw r(R),Q||r(U),new Error(`lerc-getDataRanges: error code is ${b}`);a=new Uint8Array(l.buffer),Qd(a,U,v),Qd(a,q,A);const ee=new Float64Array(v.buffer),Y=new Float64Array(A.buffer),ue=B.statistics;for(let de=0;de<M;de++)if(F>1){const ce=ee.slice(de*F,(de+1)*F),me=Y.slice(de*F,(de+1)*F),Se=Math.min.apply(null,ce),Oe=Math.max.apply(null,me);ue.push({minValue:Se,maxValue:Oe,depthStats:{minValues:ce,maxValues:me}})}else ue.push({minValue:ee[de],maxValue:Y[de]});return r(R),Q||r(U),B},nC.decode=(c,h)=>{const{maskCount:d,depthCount:m,bandCount:y,width:g,height:b,dataType:S,bandCountWithNoData:E}=h,x=Qme[S],w=g*b,T=new Uint8Array(w*y),I=w*m*y*x.size,M=new Uint8Array(I),C=new Uint8Array(y),k=new Uint8Array(8*y),[N,F,P,B,O]=u([c.length,T.length,M.length,C.length,k.length]);a.set(c,N),a.set(T,F),a.set(M,P),a.set(C,B),a.set(k,O);const v=s(N,c.length,d,F,m,g,b,y,S,P,B,O);if(v)throw r(N),new Error(`lerc-decode: error code is ${v}`);a=new Uint8Array(l.buffer),Qd(a,P,M),Qd(a,F,T);let A=null;if(E){Qd(a,B,C),Qd(a,O,k),A=[];const R=new Float64Array(k.buffer);for(let U=0;U<C.length;U++)A.push(C[U]?R[U]:null)}return r(N),{data:M,maskData:T,noDataValues:A}}}function aTt(e,t,r,n,i){if(r<2)return e;const s=new n(t*r);for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<r;l++,u+=t)s[u]=e[a++];return s}function e0e(e,t={}){const r=t.inputOffset??0,n=e instanceof Uint8Array?e.subarray(r):new Uint8Array(e,r),i=nC.getBlobInfo(n),{data:s,maskData:o,noDataValues:a}=nC.decode(n,i),{width:l,height:u,bandCount:c,depthCount:h,dataType:d,maskCount:m,statistics:y}=i,g=Qme[d],b=new g.ctor(s.buffer),S=[],E=[],x=l*u,w=x*h;for(let N=0;N<c;N++){const F=b.subarray(N*w,(N+1)*w);if(t.returnInterleaved)S.push(F);else{const P=aTt(F,x,h,g.ctor);S.push(P)}E.push(o.subarray(N*w,(N+1)*w))}const T=m===0?null:m===1?E[0]:new Uint8Array(x);if(m>1){T.set(E[0]);for(let N=1;N<E.length;N++){const F=E[N];for(let P=0;P<x;P++)T[P]=T[P]&F[P]}}const{noDataValue:I}=t,M=I!=null&&g.range[0]<=I&&g.range[1]>=I;if(m>0&&M)for(let N=0;N<c;N++){const F=S[N],P=E[N]||T;for(let B=0;B<x;B++)P[B]===0&&(F[B]=I)}const C=m===c&&c>1?E:null,{pixelType:k}=g;return{width:l,height:u,bandCount:c,pixelType:k,depthCount:h,statistics:y,pixels:S,mask:T,bandMasks:C,noDataValues:a}}function lTt(e,t,r,n=!0){if(t%4!=0||r%4!=0){const i=new ArrayBuffer(4*Math.ceil(r/4)),s=new Uint8Array(i),o=new Uint8Array(e,t,r);if(n)for(let a=0;a<s.length;a+=4)s[a]=o[a+3],s[a+1]=o[a+2],s[a+2]=o[a+1],s[a+3]=o[a];else s.set(o);return new Uint32Array(s.buffer)}if(n){const i=new Uint8Array(e,t,r),s=new Uint8Array(i.length);for(let o=0;o<s.length;o+=4)s[o]=i[o+3],s[o+1]=i[o+2],s[o+2]=i[o+1],s[o+3]=i[o];return new Uint32Array(s.buffer)}return new Uint32Array(e,t,r/4)}function bQ(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function wQ(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}const Iv=new Set;function fz(e,t,r,n=!0){const i=lTt(e,t,r,n);let s=9,o=bQ(),a=32,l=o.length,u=[],c=1,h=i[0],d=0;const m=i.length,y=8*(4*m-r),g=[];for(;h!=null;){if(a>=s)a-=s,d=h>>>32-s,h<<=s;else{d=h>>>32-a,h=i[c++];const S=s-a;a=32-S,d=(d<<S)+(h>>>a),h<<=S}if(d===257)break;if(d===256){s=9,o=bQ(),l=o.length,u=[];continue}const b=o[d];if(b==null){if(d>o.length)throw new Error("data integrity issue: code does not exist on code page");u.push(u[0]),o[l++]=u.slice(),wQ(g,u)}else wQ(g,b),u.push(b[0]),u.length>1&&(o[l++]=u.slice()),u=b.slice();if(Iv.has(l)&&s++,a===0&&(h=i[c++],a=32),c>m||c===m&&a<=y)break}return new Uint8Array(g)}Iv.add(511),Iv.add(1023),Iv.add(2047),Iv.add(4095),Iv.add(8191);const _Q=(e,t)=>{const r=t.width*t.height,n=t.pixelType;return Math.floor(e.byteLength/(r*t0e(n)))},t0e=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},uTt=(e,t)=>{if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),n=new Uint8Array(t);let i=0,s=0,o=0,a=0;for(o=0;o<r.length-1;o++)for(s=r[o],a=7;a>=0;a--)n[i++]=s>>a&1;for(a=7;i<t-1;)s=r[r.length-1],n[i++]=s>>a&1,a--;return n};let cTt=class{static decode(e,t){const r=t.pixelType,n=[],i=t.width*t.height,s=_Q(e,t),{bandIds:o,format:a}=t,l=o?.length||_Q(e,t),u=e.byteLength-e.byteLength%(i*t0e(r)),c=new r(e,0,i*s);let h,d,m,y,g=null;if(a==="bip")for(h=0;h<l;h++){for(m=new r(i),y=o?o[h]:h,d=0;d<i;d++)m[d]=c[d*s+y];n.push(m)}else if(a==="bsq")for(h=0;h<l;h++)y=o?o[h]:h,n.push(c.subarray(y*i,(y+1)*i));return u<e.byteLength-1&&(g=uTt(e.slice(u),i)),{pixels:n,mask:g}}};function r0e(e,t){let r=0,n="",i=0,s=0;const o=e.length;for(;r<o;)s=e[r++],i=s>>4,i<8?i=1:i===15?(i=4,s=(7&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):i===14?(i=3,s=(15&s)<<12|(63&e[r++])<<6|63&e[r++]):(i=2,s=(31&s)<<6|63&e[r++]),(s!==0||t)&&(n+=String.fromCharCode(s));return n}const mz=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),hTt=(()=>{const e=mz.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),pTt=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],dTt=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),fTt=(e,t)=>{let r=(t||mz)[e];return r===void 0&&(r="unknown"+String(e)),r},y7=new Map;y7.set("EXIFIFD",hTt),y7.set("GPSIFD",pTt);const lg={tiffTags:mz,ifdTags:y7,geoKeys:dTt,getTagName:fTt},vO=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),xQ=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],_w=4294967296,mTt=new Set([1,5,6,7,8,34712,34887]);function yz(e,t){let r="unknown";return e===3?r=t===64?"f64":"f32":e===1?t===1?r="u1":t===2?r="u2":t===4?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):e===2&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function bO(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function yTt(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function n0e(e,t){return e.get(t)?.values}function ug(e,t){return e.get(t)?.values}function SQ(e,t){return e.get(t)?.values?.[0]}function Kt(e,t){return e.get(t)?.values?.[0]}function eP(e,t,r,n=0,i=lg.tiffTags,s=4){const o=s===8,a=o?bz(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),l=4+2*s,u=o?8:2,c=u+a*l;if(r+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const h=r+c+4<=e.byteLength?s4(new DataView(e,r+c,s===8?8:4),0,t,s===8):null,d=r+u,m=new Map;let y,g,b,S,E,x=0,w=0;for(let T=0;T<a;T++){g=new DataView(e,d+l*T,l),b=g.getUint16(0,t),E=g.getUint16(2,t),S=lg.getTagName(b,i);const I=[];s===2?(x=g.getUint16(4,t),w=g.getUint16(6,t)):s===4?(x=g.getUint32(4,t),w=g.getUint32(8,t)):s===8&&(x=s4(g,4,t,!0),w=s4(g,12,t,!0),I.push(g.getUint32(12,t)),I.push(g.getUint32(16,t))),y={id:b,type:E,valueCount:x,valueOffset:w,valueOffsets:I,values:null},i0e(e,t,y,n,!1,s),m.set(S,y)}return{success:!0,ifd:m,nextIFD:h,requiredBufferSize:c}}const gTt=(e,t)=>e0e(e,{inputOffset:t}).pixels[0];function g7(e,t){if(t!==1&&t!==2&&t!==4)return e;const r=new Uint8Array(e),n=8/t,i=new Uint8Array(e.byteLength*n);let s=0;const o=2**t-1;for(let a=0;a<r.length;a++){const l=r[a];for(let u=0;u<n;u++)i[s++]=l<<t*u>>>8-t&o}return i.buffer}function v7(e,t,r){const n=new Xme;n.parse(e),n.colorTransform=r===6?-1:0;const i=n.getData(n.width,n.height,t!==1&&t!==4);return new Uint8Array(i.buffer)}function b7(e){const t=new y3(e).getBytes(),r=new ArrayBuffer(t.length),n=new Uint8Array(r);return n.set(t),n}async function w7(e,t,r,n,i){const s=vO===t,o=Kt(r,"BITSPERSAMPLE"),a=Kt(r,"SAMPLESPERPIXEL")??1,l=Kt(r,"PHOTOMETRICINTERPRETATION"),u=Kt(r,"SAMPLEFORMAT")??1,c=yz(u,o),h=Kt(r,"COMPRESSION")??1,d=bO(c);let m,y,g;if(h===34887)return await Kme(),gTt(e,n);if(h===1)m=e.slice(n,n+i),y=new Uint8Array(m);else if(h===8||h===32946)y=new Uint8Array(e,n,i),y=b7(y),m=y.buffer;else if(h===6)y=new Uint8Array(e,n,i),y=v7(y,a,l),m=y.buffer;else if(h===7){const x=r.get("JPEGTABLES").values,w=x.length-2;y=new Uint8Array(w+i-2);for(let I=0;I<w;I++)y[I]=x[I];const T=new Uint8Array(e,n+2,i-2);for(let I=0;I<T.length;I++)y[w+I]=T[I];y=v7(y,a,l),m=y.buffer}else{if(h!==5)throw new Error("tiff-decode: unsupport compression "+h);y=fz(e,n,i,t),m=y.buffer}if(m=g7(m,o),c==="u8"||c==="s8"||s)g=new d(m);else{m=new ArrayBuffer(y.length);const x=new Uint8Array(m);switch(c){case"u16":case"s16":for(let w=0;w<y.length;w+=2)x[w]=y[w+1],x[w+1]=y[w];break;case"u32":case"s32":case"f32":for(let w=0;w<y.length;w+=4)x[w]=y[w+3],x[w+1]=y[w+2],x[w+2]=y[w+1],x[w+3]=y[w]}g=new d(m)}const b=Kt(r,"PREDICTOR")??1,S=Kt(r,"TILEWIDTH"),E=Kt(r,"TILELENGTH");if(b>1&&(h===5||h===8||h===32946)&&S&&E){const x=g3(r),w=new d(g.length);w.set(g),g=ETt(w,E,S,u===3&&b===3,x?1:a)}return g}async function vTt(e,t,r){const n=ug(r,"TILEOFFSETS");if(n===void 0)return null;const i=ug(r,"TILEBYTECOUNTS"),{width:s,height:o,pixelType:a,tileWidth:l,tileHeight:u}=wO([r]),c=g3(r,t),h=Kt(r,"SAMPLESPERPIXEL")||t.planes,d=s*o,m=Kt(r,"BITSPERSAMPLE"),y=(Kt(r,"COMPRESSION")??1)===34887,g=bO(a),b=[];for(let R=0;R<h;R++)b.push(new g(d));let S,E,x,w,T,I,M,C,k,N,F,P,B;const O=Math.ceil(s/l),v=new Uint8Array(d).fill(255);let A=!1;if(m%8==0)if(y&&c&&h>1){const R=Math.round(n.length/h);for(S=0;S<R;S++){I=Math.floor(S/O)*u,M=S%O*l,C=I*s+M;for(let U=0;U<h;U++){const q=S*h+U;for(i[q]===0?(x=null,A=!0):x=await w7(e,t.littleEndian,r,n[q],i[q]),N=0,k=C,P=Math.min(l,s-M),F=Math.min(u,o-I),B=b[U],w=0;w<F;w++)for(k=C+w*s,N=w*l,T=0;T<P;T++,k++,N++)x?B[k]=x[N]:v[k]=0}}}else for(S=0;S<n.length;S++)for(I=Math.floor(S/O)*u,M=S%O*l,C=I*s+M,i[S]===0?(x=null,A=!0):x=await w7(e,t.littleEndian,r,n[S],i[S]),N=0,k=C,P=Math.min(l,s-M),F=Math.min(u,o-I),E=0;E<h;E++)if(B=b[E],c||y)for(w=0;w<F;w++)for(k=C+w*s,N=l*u*E+w*l,T=0;T<P;T++,k++,N++)x?B[k]=x[N]:v[k]=0;else for(w=0;w<F;w++)for(k=C+w*s,N=w*l*h+E,T=0;T<P;T++,k++,N+=h)x?B[k]=x[N]:v[k]=0;return{width:s,height:o,pixelType:a,pixels:b,mask:A?v:void 0}}const bTt=(e,t,r)=>{const n=vO===t.littleEndian,i=ug(r,"STRIPOFFSETS");if(i===void 0)return null;const{width:s,height:o,pixelType:a}=wO([r]),l=Kt(r,"SAMPLESPERPIXEL")||t.planes,u=Kt(r,"PHOTOMETRICINTERPRETATION"),c=s*o,h=Kt(r,"BITSPERSAMPLE"),d=bO(a),m=new d(c*l),y=ug(r,"STRIPBYTECOUNTS"),g=Kt(r,"ROWSPERSTRIP"),b=Kt(r,"COMPRESSION")??1;let S,E,x,w,T,I,M,C,k;if(h%8==0)for(S=0;S<i.length;S++){if(T=S*(g*s)*l,a==="u8"||a==="s8"||n)b===8||b===32946?(M=new Uint8Array(e,i[S],y[S]),M=b7(M),I=M.buffer):b===6?(M=new Uint8Array(e,i[S],y[S]),M=v7(M,l,u),I=M.buffer):b===5?(M=fz(e,i[S],y[S],t.littleEndian),I=M.buffer):I=e.slice(i[S],i[S]+y[S]),I=g7(I,h),w=new d(I);else{switch(b===6||b===8||b===32946?(M=new Uint8Array(e,i[S],y[S]),C=b7(M),I=C.buffer):(I=new ArrayBuffer(y[S]),M=new Uint8Array(e,i[S],y[S]),C=new Uint8Array(I)),a){case"u16":case"s16":for(x=0;x<M.length;x+=2)C[x]=M[x+1],C[x+1]=M[x];break;case"u32":case"s32":case"f32":for(x=0;x<M.length;x+=4)C[x]=M[x+3],C[x+1]=M[x+2],C[x+2]=M[x+1],C[x+3]=M[x]}I=g7(I,h),w=new d(I)}m.set(w,T)}const N=[];if(l===1)N.push(m);else for(S=0;S<l;S++){for(k=new d(c),E=0;E<c;E++)k[E]=m[E*l+S];N.push(k)}return{width:s,height:o,pixelType:a,pixels:N}},wTt=(e,t,r)=>{if(!(e&&e.length>0&&t&&r))return null;let n,i,s;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(n=e[u],i=t[u],s=r[u],u===0)for(let c=0;c<o;c++)l[c]=n[c]<i||n[c]>s?0:1;else for(let c=0;c<o;c++)l[c]&&(l[c]=n[c]<i||n[c]>s?0:1);return l},_Tt=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const r=new Map;let n,i,s,o,a;for(let S=0;S<t.length;S++)n=t[S],i=n.slice(6,n.indexOf(">")),o=n.indexOf("sample="),o>-1&&(a=n.slice(o+8,n.indexOf('"',o+8))),o=n.indexOf("name="),o>-1&&(i=n.slice(o+6,n.indexOf('"',o+6))),i&&(s=n.slice(n.indexOf(">")+1,n.indexOf("</Item>")).trim(),a!=null?r.has(i)?r.get(i)[a]=s:r.set(i,[s]):r.set(i,s)),a=null;const l=r.get("STATISTICS_MINIMUM"),u=r.get("STATISTICS_MAXIMUM"),c=r.get("STATISTICS_MEAN"),h=r.get("STATISTICS_STDDEV");let d=null;if(l&&u){d=[];for(let S=0;S<l.length;S++)d.push({min:parseFloat(l[S]),max:parseFloat(u[S]),avg:c&&parseFloat(c[S]),stddev:h&&parseFloat(h[S])})}const m=r.get("BandName"),y=r.get("WavelengthMin"),g=r.get("WavelengthMax");let b=null;if(m){b=[];for(let S=0;S<m.length;S++)b.push({BandName:m[S],WavelengthMin:y&&parseFloat(y[S]),WavelengthMax:g&&parseFloat(g[S])})}return{statistics:d,bandProperties:b,dataType:r.get("DataType"),rawMetadata:r}};function i0e(e,t,r,n=0,i=!1,s=4){if(r.values)return!0;const o=r.type,a=r.valueCount;let l=r.valueOffset,u=[];const c=xQ[o],h=8*c,d=a*c,m=a*xQ[o]*8;let y,g;const b=s===8?64:32,S=r.valueOffsets;if(m>b&&d>(i?e.byteLength:e?e.byteLength-l+n:0))return r.offlineOffsetSize=[l,d],r.values=null,!1;if(m<=b){if(!t)if(b<=32)l>>>=32-m;else{const E=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-E)/_w);m<=32?(l=E>>>32-m,S[0]=l):(l=E*2**(32-m)+(x>>>32-m),S[0]=E,S[1]=x>>>32-m)}if(a===1&&h===b)u=[l];else if(b===64){const E=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-E)/_w);let w=E,T=32;for(g=1;g<=a;g++){const I=32-h*g%32;if(T<h){const M=w<<I>>>32-T,C=x<<32-T>>>32-T;w=x,u.push(M+C*2**(h-T)),T-=32-(h-T)}else u.push(w<<I>>>32-h),T-=h;T===0&&(T=32,w=x)}}else for(g=1;g<=a;g++){const E=32-h*g;u.push(l<<E>>>32-h)}}else{l-=n,i&&(l=0);for(let E=l;E<l+d;E+=c){switch(o){case 1:case 2:case 7:y=new DataView(e,E,1).getUint8(0);break;case 3:y=new DataView(e,E,2).getUint16(0,t);break;case 4:case 13:y=new DataView(e,E,4).getUint32(0,t);break;case 5:y=new DataView(e,E,4).getUint32(0,t)/new DataView(e,E+4,4).getUint32(0,t);break;case 6:y=new DataView(e,E,1).getInt8(0);break;case 8:y=new DataView(e,E,2).getInt16(0,t);break;case 9:y=new DataView(e,E,4).getInt32(0,t);break;case 10:y=new DataView(e,E,4).getInt32(0,t)/new DataView(e,E+4,4).getInt32(0,t);break;case 11:y=new DataView(e,E,4).getFloat32(0,t);break;case 12:y=new DataView(e,E,8).getFloat64(0,t);break;case 16:case 18:y=bz(new DataView(e,E,8),0,t);break;case 17:y=STt(new DataView(e,E,8),0,t);break;default:y=null}u.push(y)}}if(o===2){let E="";const x=u;for(u=[],g=0;g<x.length;g++)x[g]===0&&E!==""?(u.push(E),E=""):E+=String.fromCharCode(x[g]);E===""&&u.length!==0||u.push(E)}return r.values=u,!0}function wO(e){const t=e[0],r=Kt(t,"TILEWIDTH"),n=Kt(t,"TILELENGTH"),i=Kt(t,"IMAGEWIDTH"),s=Kt(t,"IMAGELENGTH"),o=Kt(t,"BITSPERSAMPLE"),a=Kt(t,"SAMPLESPERPIXEL"),l=Kt(t,"SAMPLEFORMAT")??1,u=yz(l,o),c=g3(t),h=n0e(t,"GDAL_NODATA");let d=null;h?.length&&(d=h.map(ee=>parseFloat(ee)),d.some(ee=>isNaN(ee))&&(d=null));const m=Kt(t,"COMPRESSION")??1;let y;switch(m){case 1:y="NONE";break;case 2:case 3:case 4:case 32771:y="CCITT";break;case 5:y="LZW";break;case 6:case 7:y="JPEG";break;case 32773:y="PACKBITS";break;case 8:case 32946:y="DEFLATE";break;case 34712:y="JPEG2000";break;case 34887:y="LERC";break;default:y=String(m)}let g=!0,b="";mTt.has(m)||(g=!1,b+="unsupported tag compression "+m),l>3&&(g=!1,b+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(g=!1,b+="unsupported tag bitsPerSample "+o);const S=SQ(t,"GEOASCIIPARAMS");let E;if(S){const ee=S.split("|").find(ue=>ue.includes("ESRI PE String = ")),Y=ee?ee.replace("ESRI PE String = ",""):"";E=Y.startsWith("COMPD_CS")||Y.startsWith("PROJCS")||Y.startsWith("GEOGCS")?{wkid:null,wkt:Y}:null}const x=ug(t,"GEOTIEPOINTS"),w=ug(t,"GEOPIXELSCALE"),T=ug(t,"GEOTRANSMATRIX"),I=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let M,C,k=!1,N=!1;if(I){k=Kt(I,"GTRasterTypeGeoKey")===2;const ee=Kt(I,"GTModelTypeGeoKey");if(ee===2){const Y=Kt(I,"GeographicTypeGeoKey");Y>=1024&&Y<=32766&&(E={wkid:Y}),E||Y!==32767||(N=!0,E={wkid:4326})}else if(ee===1){const Y=Kt(I,"ProjectedCSTypeGeoKey");Y>=1024&&Y<=32766&&(E={wkid:Y})}}if(w&&x&&x.length>=6?(M=[w[0],0,x[3]-x[0]*w[0],0,-Math.abs(w[1]),x[4]-x[1]*w[1]],k&&(M[2]-=.5*M[0]+.5*M[1],M[5]-=.5*M[3]+.5*M[4])):T&&T.length===16&&(M=k?[T[0],T[1],T[3]-.5*T[0],T[4],T[5],T[7]-.5*T[5]]:[T[0],T[1],T[3],T[4],T[5],T[7]]),M){const ee=[{x:0,y:s},{x:0,y:0},{x:i,y:s},{x:i,y:0}];let Y,ue=Number.POSITIVE_INFINITY,de=Number.POSITIVE_INFINITY,ce=Number.NEGATIVE_INFINITY,me=Number.NEGATIVE_INFINITY;for(let Se=0;Se<ee.length;Se++)Y=yTt(ee[Se],M),ue=Y.x>ue?ue:Y.x,ce=Y.x<ce?ce:Y.x,de=Y.y>de?de:Y.y,me=Y.y<me?me:Y.y;C={xmin:ue,xmax:ce,ymin:de,ymax:me,spatialReference:E}}else C={xmin:-.5,ymin:.5-s,xmax:i-.5,ymax:.5,spatialReference:E};N&&(C.xmax-C.xmin>400||Math.max(Math.abs(C.xmin),Math.abs(C.xmax))>361)&&(E=null,C.spatialReference=null);const F=gz(e);let P,B,O,v,A;if(F.length>0){O=Math.round(Math.log(i/Kt(F[0],"IMAGEWIDTH"))/Math.LN2);const ee=F[F.length-1];v=F.length,P=Kt(ee,"TILEWIDTH"),B=Kt(ee,"TILELENGTH")}P=v!=null&&v>0?P||r:null,B=v!=null&&v>0?B||n:null,r&&(A=[{maxCol:Math.ceil(i/r)-1,maxRow:Math.ceil(s/n)-1,minRow:0,minCol:0}],F.forEach(ee=>{A.push({maxCol:Math.ceil(Kt(ee,"IMAGEWIDTH")/Kt(ee,"TILEWIDTH"))-1,maxRow:Math.ceil(Kt(ee,"IMAGELENGTH")/Kt(ee,"TILELENGTH"))-1,minRow:0,minCol:0})}));const R=SQ(e[0],"GDAL_METADATA"),U=_Tt(R);b+=" "+a0e({width:i,height:s,tileWidth:r,tileHeight:n,planes:a,ifds:e});const q=vz(e).length===F.length+1,Q=F?.length?F.map(ee=>({x:i/Kt(ee,"IMAGEWIDTH"),y:s/Kt(ee,"IMAGELENGTH")})):void 0;return{width:i,height:s,tileWidth:r,tileHeight:n,planes:a,isBSQ:c,pixelType:u,compression:y,noData:d,hasMaskBand:q,isSupported:g,pyramidResolutions:Q,message:b,extent:C,isPseudoGeographic:N,affine:w?null:M,firstPyramidLevel:O,maximumPyramidLevel:v,pyramidBlockWidth:P,pyramidBlockHeight:B,tileBoundary:A,metadata:U}}function g3(e,t){const r=n0e(e,"PLANARCONFIGURATION");return r?r[0]===2:!!t&&t.isBSQ}function gz(e){return e.filter(t=>Kt(t,"NEWSUBFILETYPE")===1)}function vz(e){return e.filter(t=>{const r=!(4&~(Kt(t,"NEWSUBFILETYPE")??0)),n=Kt(t,"PHOTOMETRICINTERPRETATION")===4;return r&&n})}function xTt(e){const{littleEndian:t,isBigTiff:r,firstIFDPos:n}=s0e(e);let i=n;const s=[];do{const o=o0e(e,t,i,0,lg.tiffTags,r?8:4);if(!o.success)break;s.push(o.ifd),i=o.nextIFD}while(i>0);return{...wO(s),littleEndian:t,isBigTiff:r,ifds:s,pyramidIFDs:gz(s),maskIFDs:vz(s)}}function bz(e,t,r){const n=e.getUint32(t,r),i=e.getUint32(t+4,r);return r?i*_w+n:n*_w+i}function STt(e,t,r){let n=r?e.getInt32(t,r):e.getUint32(t,r),i=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const s=(r?n:i)>=0?1:-1;return r?n*=s:i*=s,s*(r?i*_w+n:n*_w+i)}function s4(e,t,r,n){return n?bz(e,t,r):e.getUint32(t,r)}function s0e(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let n=null;if(r===18761)n=!0;else{if(r!==19789)throw new Error("unexpected endianess byte");n=!1}const i=t.getUint16(2,n);if(i!==42&&i!==43)throw new Error("unexpected tiff identifier");let s=4;const o=i===43;if(o){const a=t.getUint16(s,n);if(s+=2,a!==8)throw new Error("unsupported bigtiff version");if(t.getUint16(s,n)!==0)throw new Error("unsupported bigtiff version");s+=2}return{littleEndian:n,isBigTiff:o,firstIFDPos:s4(t,s,n,o)}}function o0e(e,t,r,n=0,i=lg.tiffTags,s=4){const o=eP(e,t,r,n,i,s);let a;const l=o.ifd;if(l){if(lg.ifdTags.forEach((u,c)=>{l.has(c)&&(a=l.get(c),a.data=eP(e,t,a.valueOffset-n,n,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const c=u[0]+"."+u[1]+"."+u[2];a.data=eP(e,t,a.valueOffset+6-n,n,lg.geoKeys,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[r0e(new Uint8Array(u))])}}return o}function a0e(e){const{width:t,height:r,tileHeight:n,tileWidth:i}=e,s=e.planes,o=i?i*n:t*r,a=Kt(e.ifds[0],"BITSPERSAMPLE");let l="";return o*s>2**30/(a>8?a/8:1)&&(l=i?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}function ETt(e,t,r,n,i){const s=n?4:1,o=r*s*i;n&&(e=new Uint8Array(e.buffer));for(let u=0;u<t;u++){const c=u*o;for(let h=i;h<o;h++)e[c+h]+=e[c+h-i]}if(!n)return e;const a=new Uint8Array(e.length),l=r*i;for(let u=0;u<t;u++){const c=u*o;for(let h=0;h<l;h++)for(let d=0;d<s;d++)a[c+h*s+d]=e[c+h+(s-d-1)*l]}return new Float32Array(a.buffer)}async function TTt(e,t){const{headerInfo:r,ifd:n,offsets:i,sizes:s}=t,o=[];for(let k=0;k<i.length;k++){s[k];const N=await w7(e,r.littleEndian,n,i[k],s[k]||e.byteLength);o.push(N)}const a=g3(n,r),l=Kt(n,"BITSPERSAMPLE"),u=yz(Kt(n,"SAMPLEFORMAT")??1,l),c=Kt(n,"SAMPLESPERPIXEL")||r.planes,h=bO(u),d=Kt(n,"TILEWIDTH"),m=Kt(n,"TILELENGTH"),y=Kt(n,"COMPRESSION")??1,g=d*m;let b;const S=[];let E=o[0];const x=y===34887;for(let k=0;k<c;k++){if(b=new h(g),o.length===c)E=o[k],E.length===g&&(b=E);else if(E.length)if(a||x)b=E.length===g?E:E.slice(g*k,g*(k+1));else for(let N=0;N<g;N++)b[N]=E[N*c+k];S.push(b)}const w=r.noData?r.noData[0]:t.noDataValue,T=r.metadata?r.metadata.statistics:null,I=T?T.map(k=>k.min):null,M=T?T.map(k=>k.max):null,C={pixelType:u,width:d,height:m,pixels:S,noDataValue:w};return w!=null?fO(C,w):I&&M&&t.applyMinMaxConstraint&&(C.mask=wTt(S,I,M)),C}async function ITt(e,t={}){const r=t.pyramidLevel||0,n=t.headerInfo||xTt(e),{ifds:i,noData:s}=n;if(i.length===0)throw new Error("no valid image file directory");const o=a0e(n);if(o)throw o;let a=null;const l=r===-1?i[i.length-1]:i[r],u=s??t.noDataValue;return a=n.tileWidth?await vTt(e,n,l):bTt(e,n,l),a&&(u!=null&&fO(a,u),a)}var ATt=function(e){var t,r,n,i,s,o;function a(l){var u,c,h,d,m,y,g,b,S,E,x,w,T;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),b=function(){var I,M;for(M=[],I=0;I<4;++I)M.push(String.fromCharCode(this.data[this.pos++]));return M}.call(this).join(""),b){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),h=this.readUInt16()||100,m.delay=1e3*d/h,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,x=0;0<=u?x<u:x>u;0<=u?++x:--x)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(S=255-this.transparency.indexed.length)>0)for(w=0;0<=S?w<S:w>S;0<=S?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":y=(E=this.read(u)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,y)),this.text[g]=String.fromCharCode.apply(String,E.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,c){var h;return typeof u=="function"&&(c=u),(h=new XMLHttpRequest).open("GET",l,!0),h.responseType="arraybuffer",h.onload=function(){var d;return d=new a(new Uint8Array(h.response||h.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&d.render(u),typeof c=="function"?c(d):void 0},h.send(null)},r=1,n=2,t=0,a.prototype.read=function(l){var u,c;for(c=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k,N,F,P,B,O,v;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new y3(l)).getBytes(),C=(w=this.pixelBitlength/8)*this.width,T=new Uint8Array(C*this.height),y=l.length,M=0,I=0,c=0;I<y;){switch(l[I++]){case 0:for(d=F=0;F<C;d=F+=1)T[c++]=l[I++];break;case 1:for(d=P=0;P<C;d=P+=1)u=l[I++],m=d<w?0:T[c-w],T[c++]=(u+m)%256;break;case 2:for(d=B=0;B<C;d=B+=1)u=l[I++],h=(d-d%w)/w,k=M&&T[(M-1)*C+h*w+d%w],T[c++]=(k+u)%256;break;case 3:for(d=O=0;O<C;d=O+=1)u=l[I++],h=(d-d%w)/w,m=d<w?0:T[c-w],k=M&&T[(M-1)*C+h*w+d%w],T[c++]=(u+Math.floor((m+k)/2))%256;break;case 4:for(d=v=0;v<C;d=v+=1)u=l[I++],h=(d-d%w)/w,m=d<w?0:T[c-w],M===0?k=N=0:(k=T[(M-1)*C+h*w+d%w],N=h&&T[(M-1)*C+(h-1)*w+d%w]),g=m+k-N,b=Math.abs(g-m),E=Math.abs(g-k),x=Math.abs(g-N),S=b<=E&&b<=x?m:E<=x?k:N,T[c++]=(u+S)%256;break;default:throw new Error("Invalid filter algorithm: "+l[I-1])}M++}return T},a.prototype.decodePalette=function(){var l,u,c,h,d,m,y,g,b;for(c=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+c.length),h=0,c.length,l=0,u=y=0,g=c.length;y<g;u=y+=3)d[h++]=c[u],d[h++]=c[u+1],d[h++]=c[u+2],d[h++]=(b=m[l++])!=null?b:255;return d},a.prototype.copyToImageData=function(l,u){var c,h,d,m,y,g,b,S,E,x,w;if(h=this.colors,E=null,c=this.hasAlphaChannel,this.palette.length&&(E=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),h=4,c=!0),S=(d=l.data||l).length,y=E||u,m=g=0,h===1)for(;m<S;)b=E?4*u[m/4]:g,x=y[b++],d[m++]=x,d[m++]=x,d[m++]=x,d[m++]=c?y[b++]:this.transparency.grayscale&&this.transparency.grayscale===x?0:255,g=b;else for(;m<S;)b=E?4*u[m/4]:g,d[m++]=y[b++],d[m++]=y[b++],d[m++]=y[b++],d[m++]=c?y[b++]:this.transparency.rgb&&this.transparency.rgb[1]===y[b-3]&&this.transparency.rgb[3]===y[b-2]&&this.transparency.rgb[5]===y[b-1]?0:255,g=b},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},s=e.document&&e.document.createElement("canvas"),o=s&&s.getContext("2d"),i=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=s.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,c,h,d,m,y,g,b;if(this.animation){for(b=[],c=m=0,y=(g=this.animation.frames).length;m<y;c=++m)u=g[c],h=l.createImageData(u.width,u.height),d=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(h,d),u.imageData=h,b.push(u.image=i(h));return b}},a.prototype.renderFrame=function(l,u){var c,h,d;return c=(h=this.animation.frames)[u],d=h[u-1],u===0&&l.clearRect(0,0,this.width,this.height),d?.disposeOp===r?l.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===n&&l.putImageData(d.imageData,d.xOffset,d.yOffset),c.blendOp===t&&l.clearRect(c.xOffset,c.yOffset,c.width,c.height),l.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(l){var u,c,h,d,m,y,g=this;return c=0,y=this.animation,d=y.numFrames,h=y.frames,m=y.numPlays,(u=function(){var b,S;if(b=c++%d,S=h[b],g.renderFrame(l,b),d>1&&c/d<m)return g.animation._timeout=setTimeout(u,S.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,c;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(c=u.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),u.putImageData(c,0,0))},a}(self);const MTt=new Set(["jpg","png","bmp","gif"]);async function CTt(e,t){if(!vO)throw new ie("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Kme();const{offset:r}=t,{width:n,height:i,pixelType:s,statistics:o,depthCount:a,noDataValues:l,bandMasks:u,pixels:c,mask:h}=e0e(e,{inputOffset:r,returnInterleaved:t.returnInterleaved}),d=new Ht({width:n,height:i,pixelType:s.toLowerCase(),pixels:c,mask:h,statistics:o.map(({minValue:m,maxValue:y})=>new R_(m,y)),bandMasks:u,depthCount:a,noDataValues:l});return o?.length||d.updateStatistics(),d}async function kTt(e,t){const r=await ITt(e,{...t,noDataValue:null});td(r);const n=new Ht({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,bandMasks:r.bandMasks,statistics:null});return n.updateStatistics(),n}async function RTt(e,t){const r=await TTt(e,t.customOptions),n=new Ht({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return n.updateStatistics(),n}function l0e(e,t){const r=t.pixelType||"u8",n=Ht.getPixelArrayConstructor(r),i=r==="u8"?e:new n(e.buffer),s=[],o=t.planes||1;if(o===1)s.push(i);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),c=new n(u);for(let h=0;h<u;h++)c[h]=i[h*o+l];s.push(c)}const a=new Ht({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:r,statistics:null});return a.updateStatistics(),a}function OTt(e,t){return l0e(new y3(new Uint8Array(e)).getBytes(),t)}function NTt(e,t){return l0e(fz(e,t.offset,t.eof,!t.isInputBigEndian),t)}function LTt(e,t,r){const{pixelTypeCtor:n}=UTt(t.pixelType),i=(0,cTt.decode)(e,{width:t.width,height:t.height,pixelType:n,format:r}),s=new Ht({width:t.width,height:t.height,pixels:i.pixels,pixelType:t.pixelType,mask:i.mask,statistics:null});return s.updateStatistics(),s}function PTt(e,t){const r=iTt.decode(e,t.hasNoZlibMask??void 0),n=new Ht({width:r.width,height:r.height,pixels:r.pixels,pixelType:"u8",mask:r.mask,statistics:null});return n.updateStatistics(),n}function DTt(e,t){const r=new Uint8Array(e),n=new ATt(r),{width:i,height:s}=t,o=i*s,a=n.decode();let l,u=0,c=0;const h=new Uint8Array(o);for(u=0;u<o;u++)h[u]=a[4*u+3];const d=new Ht({width:i,height:s,pixels:[],pixelType:"u8",mask:h,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),c=0;c<o;c++)l[c]=a[4*c+u];d.addData({pixels:l})}return d.updateStatistics(),d}async function FTt(e,t,r,n){const i=new rTt,s={applyJpegMask:!1,format:t,...r},o=await i.decode(e,s,n),a=new Ht(o);return a.updateStatistics(),a}function u0e(e){if(e==null)throw new ie("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return t[0]===255&&t[1]===216?r="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?r="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?r="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?r="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?r="tiff":t[0]===71&&t[1]===73&&t[2]===70?r="gif":t[0]===66&&t[1]===77?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(r="error"),r}function jTt(e){let t=null;switch(e){case"lerc":case"lerc2":t=CTt;break;case"jpg":t=PTt;break;case"png":t=DTt;break;case"bsq":case"bip":t=(r,n)=>LTt(r,n,e);break;case"tiff":t=kTt;break;case"deflate":t=OTt;break;case"lzw":t=NTt;break;case"error":t=()=>{throw new ie("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new ie("rasterCodec:decode","unsupported raster format")}}return t}function UTt(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function BTt(e,t=1){if(!e)return;const{pixels:r,width:n,height:i,mask:s}=e;if(!r||r.length===0)return;const o=r.length,a=n-1,l=i-1,u=[];let c,h,d,m,y,g,b=null;const S=Ht.getPixelArrayConstructor(e.pixelType);if(t===0){for(c=0;c<o;c++){for(y=r[c],g=new S(a*l),h=0;h<l;h++)for(m=h*n,d=0;d<a;d++)g[h*a+d]=y[m+d];u.push(g)}if(s!=null)for(b=new Uint8Array(a*l),h=0;h<l;h++)for(m=h*n,d=0;d<a;d++)b[h*a+d]=s[m+d]}else{for(c=0;c<o;c++){for(y=r[c],g=new S(a*l),h=0;h<l;h++)for(m=h*n,d=0;d<a;d++)g[h*a+d]=(y[m+d]+y[m+d+1]+y[m+n+d]+y[m+n+d+1])/4;u.push(g)}if(s)for(b=new Uint8Array(a*l),h=0;h<l;h++)for(m=h*n,d=0;d<a;d++)b[h*a+d]=Math.min.apply(null,[s[m+d],s[m+d+1],s[m+n+d],s[m+n+d+1]])}e.width=a,e.height=l,e.mask=b,e.pixels=u}function c0e(e){let t=u0e(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function _7(e,t={},r){if(e==null)throw new ie("rasterCodec:decode","missing encodeddata parameter.");let n=t.format?.toLowerCase();if(!(n!=="bsq"&&n!=="bip"||t.width!=null&&t.height!=null))throw new ie("rasterCodec:decode","requires width and height in options parameter.");if(n==="tiff"&&t.customOptions)return RTt(e,t);if((!n||n!=="bsq"&&n!=="bip"&&n!=="deflate"&&n!=="lzw")&&(n=u0e(e)),t.useCanvas&&MTt.has(n))return FTt(e,n,t,r);const i=jTt(n);let s;t.isPoint&&((t={...t}).width!=null&&t.width++,t.height!=null&&t.height++);const{offsets:o}=t;if(o&&o.length>1){const a=o.map((c,h)=>i(e.slice(c,o[h+1]),t)),l=await Promise.all(a);s=l[0],s.pixels=l.map(c=>c.pixels[0]);const u=l.map(c=>c.mask);l.some(c=>c!=null)&&(u.forEach((c,h)=>{c==null&&(u[h]=new Uint8Array(s.width*s.height).fill(255))}),s.bandMasks=u,s.mask=Ht.combineBandMasks(u)),s.updateStatistics()}else s=await i(e,{...t,offset:o?.[0]??t.offset});return n!=="jpg"&&t.noDataValue!=null&&s.depthCount===1&&fO(s,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&BTt(s),s}function VTt(e){return["u8","s8"].includes(e.pixelType)&&e.statistics?.[0]?.min!=null&&e.statistics[0]?.max!=null&&e.bandCount===1}function wz(e,t){const{attributeTable:r,bandCount:n}=e;return r==null&&VTt(e)?!0:!(r==null||n>1||t&&r.fields.find(i=>i.name.toLowerCase()===t.toLowerCase())==null)}function h0e(e){const{bandCount:t,dataType:r,pixelType:n}=e;return r==="elevation"||r==="generic"&&t===1&&(n==="s16"||n==="s32"||n==="f32"||n==="f64")}function _z(e,t=!1){const{bandCount:r,colormap:n,pixelType:i}=e;return r===1&&(!!n?.length||!t&&i==="u8")}function GTt(e,t=!1){const{attributeTable:r,bandCount:n}=e;return n===1&&(!t||r!=null||e.histograms!=null)}function xz(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function zTt(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function o4(e){return!!e?.length&&e.length<=16384}const EQ=new Pt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),TQ=new Pt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Ru=class extends we{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};p([tt({classBreaksDef:"class-breaks-definition"})],Ru.prototype,"type",void 0),p([f({json:{write:!0}})],Ru.prototype,"breakCount",void 0),p([f({json:{write:!0}})],Ru.prototype,"classificationField",void 0),p([f({type:String,json:{read:EQ.read,write:EQ.write}})],Ru.prototype,"classificationMethod",void 0),p([f({json:{write:!0}})],Ru.prototype,"normalizationField",void 0),p([f({json:{read:TQ.read,write:TQ.write}})],Ru.prototype,"normalizationType",void 0),p([f({value:null,json:{write:!0}})],Ru.prototype,"standardDeviationInterval",null),p([f({value:null,json:{write:!0}})],Ru.prototype,"definedInterval",null),Ru=p([W("esri.rest.support.ClassBreaksDefinition")],Ru);const $Tt=Ru,qTt=.25,HTt=RR.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),IQ=RR.fromJSON(sz[0]),p0e=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function d0e(e){return e.presetRenderers?.find(({method:t,value:r})=>t==="raster-function-template"?r===e.rasterFunctionName:t==="variable"&&r===e.variableName)}function f0e(e,t){const{attributeTable:r,colormap:n}=e;if(xz(e)){const i=r3t(e);if(i!=null)return i}if(t?.rasterFunctionColorRamp){const i=AQ(e,t);return i.colorRamp=t.rasterFunctionColorRamp,i}if(n!=null){const i=e3t(e);if(i!=null)return i}if(r!=null){const i=QTt(e);if(i!=null)return i}return AQ(e,t)}function WTt(e,t=!1){const r=["raster-stretch"];return _z(e,t)&&r.push("raster-colormap"),wz(e)&&r.push("unique-value"),GTt(e,t)&&r.push("class-breaks"),h0e(e)&&r.push("raster-shaded-relief"),xz(e)&&r.push("vector-field"),zTt(e)&&r.push("flow"),r}function ZTt(e){return e.datasetFormat==="Function"&&e.rasterFunction.functionName==="Colormap"?e.rasterFunction.colorRamp:void 0}function JTt(e,t,r){const n=["nearest","bilinear","cubic","majority"],i=r?.toLowerCase().replace("bicubic","cubic"),s=n.find(o=>o===i);return t==="Map"?s??"bilinear":e.dataType==="standard-time"?s??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?s==="nearest"||s==="majority"?s:"nearest":s??"bilinear"}function AQ(e,t){e=m0e(e,t?.variableName);const{bandCount:r}=e;let{bandIds:n,stretchType:i}=t||{};n?.some(h=>h>=r)&&(n=null);let s=e.statistics,o=e.histograms;r>1?(n=n?.length?n:Sz(e),s=s==null?null:n?.map(h=>s[h]),o=o==null?null:n?.map(h=>o[h])):n=[0],i==null&&(i=XTt(e)),t?.includeStatisticsInStretch&&(i==="percent-clip"||i==="histogram-equalization")&&e.statistics?.length&&(i="min-max");let a=!1;switch(i){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!s?.length}const{dataType:l}=e,u=n?.length===1&&p0e.has(l)?HTt:null,c=new az({stretchType:i,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:n?.length===1?[1]:[1,1,1],useGamma:!1});return i==="percent-clip"?c.maxPercent=c.minPercent=qTt:i==="standard-deviation"&&(c.numberOfStandardDeviations=2),a||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(i==="percent-clip"?c.histograms=o:i!=="min-max"&&i!=="standard-deviation"||(c.statistics=s)),c}function m0e(e,t){const{multidimensionalInfo:r}=e;if(!t||!r)return e;const n=r.variables.find(i=>i.name===t);if(!n)return e;if(e=e.clone(),n){const{statistics:i,histograms:s}=n;i?.length&&(e.statistics=i.map(o=>({min:o.min,max:o.max,avg:o.avg,stddev:o.stddev}))),s?.length&&(e.histograms=s)}return e}function Sz(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const{bandInfos:r}=e;let n;if(r.length===t){const{red:i,green:s,blue:o,nir:a}=YTt(r);i!=null&&s!=null&&o!=null?n=[i,s,o]:a!=null&&i!=null&&s!=null&&(n=[a,i,s])}return!n&&t>=3&&(n=[0,1,2]),n}function YTt(e){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=n.name.toLowerCase();if(i==="red")t.red=r;else if(i==="green")t.green=r;else if(i==="blue")t.blue=r;else if(i==="nearinfrared"||i==="nearinfrared_1"||i==="nir")t.nir=r;else if(n.maxWavelength&&n.minWavelength){const s=n.minWavelength,o=n.maxWavelength;t.blue==null&&s>=410&&s<=480&&o>=480&&o<=540?t.blue=r:t.green==null&&s>=490&&s<=560&&o>=560&&o<=610?t.green=r:t.red==null&&s>=595&&s<=670&&o>=660&&o<=730?t.red=r:t.nir==null&&s>=700&&s<=860&&o>=800&&o<=950&&(t.nir=r)}}return t}function XTt(e){let t="percent-clip";const{pixelType:r,dataType:n,histograms:i,statistics:s,multidimensionalInfo:o}=e,a=p0e.has(n)||n==="generic"&&o!=null;return r!=="u8"||n!=="processed"&&i!=null&&s!=null?r==="u8"||n==="elevation"||a?t="min-max":i!=null?t="percent-clip":s!=null&&(t="min-max"):t="none",t}function QTt(e,t,r,n){if(!wz(e,t))return null;const{attributeTable:i,statistics:s}=e,o=y0e(i,t),a=US(i,"red"),l=US(i,"green"),u=US(i,"blue"),c=new XT,h=[],d=new Set,m=!!(a&&l&&u);if(i!=null)i.features.forEach(y=>{const g=y.attributes[o.name];if(!d.has(y.attributes[o.name])&&g!=null){d.add(g);const b=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!i.features.some(E=>E.attributes[a.name]>1||E.attributes[l.name]>1||E.attributes[u.name]>1),S=b?255:1;h.push(new og({value:y.attributes[o.name],label:y.attributes[o.name]+"",symbol:new yc({style:"solid",outline:null,color:new Ze(m?[y.attributes[a.name]*S,y.attributes[l.name]*S,y.attributes[u.name]*S,1]:[0,0,0,0])})}))}});else if(s?.[0])for(let y=s[0].min;y<=s[0].max;y++)h.push(new og({value:y,label:y.toString(),symbol:new yc({style:"solid",outline:null,color:new Ze([0,0,0,0])})}));if(h.sort((y,g)=>y.value&&typeof y.value.valueOf()=="string"?0:y.value>g.value?1:-1),!m){const y=Vg(IQ,{numColors:h.length});h.forEach((g,b)=>g.symbol.color=new Ze(y[b].slice(1,4))),c.colorRamp=IQ}return new f1({field:o.name,uniqueValueInfos:h,authoringInfo:c})}function y0e(e,t,r){let n;return e!=null?(n=t?e.fields.find(i=>t.toLowerCase()===i.name.toLowerCase()):KTt(e.fields),n||(r||(n=e.fields.find(i=>i.type==="string")),n||(n=US(e,"value")))):n=new xa({name:"value"}),n}function KTt(e){let t;for(let r=0;r<e.length;r++){const n=e[r].name.toLowerCase();if(e[r].type==="string"){if(n.startsWith("class")){t=e[r];break}t==null&&(n.endsWith("name")||n.endsWith("type"))&&(t=e[r])}}return t}function US(e,t){return e==null?null:e.fields.find(r=>r.name.toLowerCase()===t)}function e3t(e){if(!_z(e))return null;let t;const{attributeTable:r,colormap:n}=e;if(r!=null){const i=US(r,"value"),s=y0e(r,null,!0);s.type==="string"&&(t={},r.features.forEach(o=>{const a=o.attributes;t[a[i.name]]=s?a[s.name]:a[i.name]}))}return oz.createFromColormap(n,t)}const t3t=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function r3t(e){if(!xz(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:i,maxMagnitude:s}=n3t(e.dataType,e.statistics);t=[new Jm({field:"Magnitude",minSize:10,maxSize:40,minDataValue:i,maxDataValue:s})]}const r=e.multidimensionalInfo!=null?t3t.get(e.multidimensionalInfo.variables[0].unit):void 0,n=new hz({visualVariables:t,inputUnit:r,rotationType:"geographic"});return n.visualVariables=[...n.sizeVariables,...n.rotationVariables],n}function MQ(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function g0e(e){if(e.type==="uniqueValue"){const t=e.uniqueValueInfos;return t?.[0].symbol?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(r=>({value:r.value,label:r.label,symbol:r.symbol?MQ(r.symbol):null}))),e}if(e.type==="classBreaks"){const t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(r=>({classMinValue:r.classMinValue,classMaxValue:r.classMaxValue,label:r.label,symbol:r.symbol?MQ(r.symbol):null}))),e}return e}function n3t(e,t){let r,n;if(e==="vector-magdir")r=t[0].min,n=t[0].max;else{const i=t[0].min,s=t[0].max,o=t[1].min,a=t[1].max;r=0,n=Math.max(Math.abs(i),Math.abs(o),Math.abs(s),Math.abs(a))}return{minMagnitude:r,maxMagnitude:n}}const tP=1;function v0e(e,t=256){t=Math.min(t,256);const{size:r,counts:n}=e,i=new Uint8Array(r),s=n.reduce((c,h)=>c+h/t,0);let o=0,a=0,l=0,u=s;for(let c=0;c<r;c++)if(l+=n[c],!(c<r-1&&l+n[c+1]<u)){for(;o<t-1&&u<l;)o++,u+=s;for(let h=a;h<=c;h++)i[h]=o;a=c+1}for(let c=a;c<r;c++)i[c]=t-1;return i}function x7(e){const{minCutOff:t,maxCutOff:r,gamma:n,pixelType:i,rounding:s}=e,o=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(i))return null;const l=t.length;let u,c,h=0;i==="s8"?h=-127:i==="s16"&&(h=-32767);let d=256;["u16","s16"].includes(i)&&(d=65536);const m=[],y=[],g=a-o;for(u=0;u<l;u++)y[u]=r[u]-t[u],m[u]=y[u]===0?0:g/y[u];let b;const S=[];let E,x,w;if(n&&n.length>=l){const T=Ez(l,n);for(u=0;u<l;u++){for(w=[],c=0;c<d;c++)if(y[u]!==0)if(E=c+h,b=(E-t[u])/y[u],x=1,n[u]>1&&(x-=(1/g)**(b*T[u])),E<r[u]&&E>t[u]){const I=x*g*b**(1/n[u])+o;w[c]=s==="floor"?Math.floor(I):s==="round"?Math.round(I):I}else E>=r[u]?w[c]=a:w[c]=o;else w[c]=o;S[u]=w}}else for(u=0;u<l;u++){for(w=[],c=0;c<d;c++)if(E=c+h,E<=t[u])w[c]=o;else if(E>=r[u])w[c]=a;else{const T=(E-t[u])*m[u]+o;w[c]=s==="floor"?Math.floor(T):s==="round"?Math.round(T):T}S[u]=w}if(e.contrastOffset!=null){const T=b0e(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(w=S[u],c=0;c<d;c++)w[c]=T[w[c]]}return{lut:S,offset:h}}function b0e(e,t){const r=Math.min(Math.max(e,-100),100),n=Math.min(Math.max(t??0,-100),100),i=255,s=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)r>0&&r<100?a=(200*o-100*i+2*i*n)/(2*(100-r))+s:r<=0&&r>-100?a=(200*o-100*i+2*i*n)*(100+r)/2e4+s:r===100?(a=200*o-100*i+(i+1)*(100-r)+2*i*n,a=a>0?i:0):r===-100&&(a=s),l[o]=a>i?i:a<0?0:a;return l}function i3t(e,t,r){const n=[];for(let i=0;i<t.length;i++){let s=0,o=0,a=0;"min"in t[i]?{min:s,max:o,avg:a}=t[i]:[s,o,a]=t[i];let l=a??0;e!=="u8"&&(l=255*(l-s)/(o-s)),n.push(s3t(l))}return n}function s3t(e){if(e<=0||e>=255)return tP;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const r=255,n=e+t,i=Math.log(e/r),s=Math.log(n/r);if(s===0)return tP;const o=i/s;return isNaN(o)?tP:Math.min(9.9,Math.max(.01,o))}function o3t(e,t,r,n){let i=1/0,s=-1/0,o=0,a=0,l=0,u=0;const c=e.length,h=new Map,d=[];for(let M=0;M<c;M++){const C=e[M];if(!t||t[M]){d.push(C);const k=(h.get(C)??0)+1;h.set(C,k),k>u&&(u=k,l=C),i=C<i?C:i,s=C>s?C:s,o+=C,a++}}if(a===0)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const m=o/a;let y=0;for(let M=0;M<c;M++)t&&!t[M]||(y+=(e[M]-m)**2);const g=t?t.filter(M=>M).length:c,b=g<=1?0:Math.sqrt(y/(g-1));d.sort((M,C)=>M-C);const S=a>>>1,E={min:i,max:s,avg:m,stddev:b,mode:l,median:a%2?d[Math.floor(S)]:(d[S-1]+d[S])/2};if(["u8","s8","u4","u2","u1"].includes(r)){const M=s-i+1,C=new Uint32Array(M);for(let k=0;k<c;k++)t&&!t[k]||C[e[k]-i]++;return{statistics:E,histogram:{min:i-.5,max:s+.5,size:M,counts:C}}}const x=256,w=new Uint32Array(x),T=(s-i)/x;if(T===0)return{statistics:E,histogram:{min:i,max:s,size:1,counts:new Uint32Array(1).fill(a)}};const I=new Uint32Array(x+1);for(let M=0;M<c;M++)t&&!t[M]||I[Math.floor((e[M]-i)/T)]++;for(let M=0;M<x-1;M++)w[M]=I[M];return w[x-1]=I[x-1]+I[x],{statistics:E,histogram:{min:i,max:s,size:x,counts:w}}}function a3t(e){const{pixels:t,mask:r,pixelType:n,bandMasks:i}=e,s=t.map((o,a)=>o3t(o,i?.[a]??r,n));return{statistics:s.map(({statistics:o})=>o),histograms:s.map(({histogram:o})=>o)}}function w0e(e){if(!e?.pixels?.length)return null;const{pixels:t,mask:r,bandMasks:n,pixelType:i}=e,s=e.width*e.height,o=t.length,a=[],l=[],u=256;let c,h,d,m;for(let y=0;y<o;y++){d=new Uint32Array(u);const g=t[y],b=n?.[y]??r;if(i==="u8"){if(c=255,h=0,b){for(let F=0;F<s;F++)if(b[F]){const P=g[F];c=P<c?P:c,h=P>h?P:h,d[P]++}}else for(let F=0;F<s;F++){const P=g[F];c=P<c?P:c,h=P>h?P:h,d[P]++}d=d.slice(c,h+1)}else{let F=!1;e.statistics||(e.updateStatistics(),F=!0);const P=e.statistics;c=P[y].minValue,h=P[y].maxValue;const B=(h-c)/u;if(B===0){!P||e.validPixelCount||F||e.updateStatistics();const O=(e.validPixelCount||e.width*e.height)/u;for(let v=0;v<u;v++)d[v]=Math.round(O*(v+1))-Math.round(O*v)}else{m=new Uint32Array(u+1);for(let O=0;O<s;O++)b&&!b[O]||m[Math.floor((g[O]-c)/B)]++;for(let O=0;O<u-1;O++)d[O]=m[O];d[u-1]=m[u-1]+m[u]}}const S=i==="u8"?c-.5:c,E=i==="u8"?h+.5:h;a.push({min:S,max:E,size:d.length,counts:d});let x=0,w=0,T=0;for(let F=0;F<d.length;F++)x+=d[F],w+=F*d[F];const I=w/x;for(let F=0;F<d.length;F++)T+=d[F]*(F-I)**2;const M=Math.sqrt(T/(x-1)),C=(E-S)/d.length,k=(I+(i==="u8"?0:.5))*C+c,N=M*C;l.push({min:c,max:h,avg:k,stddev:N})}return{statistics:l,histograms:a}}function l3t(e){const t=[];for(let r=0;r<e.length;r++){const{min:n,max:i,size:s,counts:o}=e[r];let a=0,l=0;for(let y=0;y<s;y++)a+=o[y],l+=y*o[y];const u=l/a;let c=0;for(let y=0;y<s;y++)c+=o[y]*(y-u)**2;const h=(i-n)/s,d=(u+.5)*h+n,m=Math.sqrt(c/(a-1))*h;t.push({min:n,max:i,avg:d,stddev:m})}return t}function Av(e,t){const{pixelBlock:r,bandIds:n,returnHistogramLut:i,rasterInfo:s}=t;let o=null,a=null,l=e.stretchType;if(typeof l=="number"&&(l=vme[l]),e.dra)if(l==="minMax"&&r?.statistics)o=r.statistics.map(N=>[N.minValue,N.maxValue,0,0]);else{const N=w0e(r);o=N!=null?N.statistics:null,a=N!=null?N.histograms:null}else o=e.statistics?.length?e.statistics:s.statistics,a="histograms"in e?e.histograms:void 0,a||(a=s.histograms);l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||s.bandCount,c=[],h=[];let d,m,y,g,b,S,E,x,w;o&&!Array.isArray(o[0])&&(o=o.map(N=>[N.min,N.max,N.avg,N.stddev]));const[T,I]=r0(s.pixelType);if(!o?.length){for(o=[],x=0;x<u;x++)o.push([T,I,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(x=0;x<u;x++)c[x]=T,h[x]=I;break;case"minMax":for(x=0;x<u;x++){const N=o[x];c[x]=N[0],h[x]=N[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:N=2}=e;for(x=0;x<u;x++){const F=o[x];c[x]=F[2]-N*F[3],h[x]=F[2]+N*F[3],c[x]<F[0]&&(c[x]=F[0]),h[x]>F[1]&&(h[x]=F[1])}}break;case"histogramEqualization":for(td(a),x=0;x<u;x++)c[x]=a[x].min,h[x]=a[x].max;break;case"percentClip":for(td(a),x=0;x<a.length;x++){for(d=a[x],b=new Uint32Array(d.size),g=[...d.counts],g.length>=20&&(g[0]=g[1]=g[2]=g[g.length-1]=g[g.length-2]=0),y=0,m=(d.max-d.min)/d.size,E=d.min===-.5&&m===1?.5:0,w=0;w<d.size;w++)y+=g[w],b[w]=y;for(S=(e.minPercent||0)*y/100,c[x]=d.min+E,w=0;w<d.size;w++)if(b[w]>S){c[x]=d.min+m*(w+E);break}for(S=(1-(e.maxPercent||0)/100)*y,h[x]=d.max+E,w=d.size-2;w>=0;w--)if(b[w]<S){h[x]=d.min+m*(w+2-E);break}if(h[x]<c[x]){const N=c[x];c[x]=h[x],h[x]=N}}break;default:for(x=0;x<u;x++){const N=o[x];c[x]=N[0],h[x]=N[1]}}let M,C,k;return l==="histogramEqualization"?(td(a),C=a[0].size||256,M=0,i&&(k=a.map(N=>v0e(N)))):(C=e.max||255,M=e.min||0),u3t({minCutOff:c,maxCutOff:h,outMax:C,outMin:M,histogramLut:k},n)}function u3t(e,t){if(t==null||t.length===0)return e;const r=Math.max.apply(null,t),{minCutOff:n,maxCutOff:i,outMin:s,outMax:o,histogramLut:a}=e;return n.length===t.length||n.length<=r?e:{minCutOff:t.map(l=>n[l]),maxCutOff:t.map(l=>i[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:s,outMax:o}}function Ez(e,t){const r=new Float32Array(e);for(let n=0;n<e;n++)t[n]>1?t[n]>2?r[n]=6.5+(t[n]-2)**2.5:r[n]=6.5+100*(2-t[n])**4:r[n]=1;return r}function a4(e,t){if(!e?.pixels?.length)return e;const{mask:r,bandMasks:n,width:i,height:s,pixels:o}=e,{minCutOff:a,maxCutOff:l,gamma:u}=t,c=t.outMin||0,h=t.outMax||255,d=i*s,m=t.outputPixelType||"u8",y=e.pixels.map(()=>Ht.createEmptyBand(m,d)),g=y.length,b=h-c,S=[],E=[];for(let M=0;M<g;M++)E[M]=l[M]-a[M],S[M]=E[M]===0?0:b/E[M];const x=m.startsWith("u")||m.startsWith("s"),w=u&&u.length>=g,T=!!t.isRenderer;if(w){const M=Ez(g,u);for(let C=0;C<g;C++){const k=n?.[C]??r;for(let N=0;N<d;N++)if(k==null||k[N]){if(E[C]===0){y[C][N]=c;continue}const F=o[C][N],P=(F-a[C])/E[C];let B=1;if(u[C]>1&&(B-=(1/b)**(P*M[C])),F<l[C]&&F>a[C]){const O=B*b*P**(1/u[C])+c;y[C][N]=T?Math.floor(O):x?Math.round(O):O}else F>=l[C]?y[C][N]=h:y[C][N]=c}}}else for(let M=0;M<g;M++){const C=n?.[M]??r;for(let k=0;k<d;k++)if(C==null||C[k]){const N=o[M][k];if(N<l[M]&&N>a[M]){const F=(N-a[M])*S[M]+c;y[M][k]=T?Math.floor(F):x?Math.round(F):F}else N>=l[M]?y[M][k]=h:y[M][k]=c}}const I=new Ht({width:i,height:s,mask:r,bandMasks:n,pixels:y,pixelType:m});return I.updateStatistics(),I}const So=1,Zy=1/111e3;function Tz(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:n,pixelSizePower:i=1,pixelSizeFactor:s=1,scalingType:o,isGCS:a,resolution:l}=e,u=n==="multi-directional"?2*e.zFactor:e.zFactor,{x:c,y:h}=l;let d=u/(8*c),m=u/(8*h);if(a&&u>.001&&(d/=Zy,m/=Zy),o==="adjusted")if(a){const P=c*Zy,B=h*Zy;d=(u+P**i*s)/(8*P),m=(u+B**i*s)/(8*B)}else d=(u+c**i*s)/(8*c),m=(u+h**i*s)/(8*h);let y=(90-t)*Math.PI/180,g=Math.cos(y),b=(360-r+90)*Math.PI/180,S=Math.sin(y)*Math.cos(b),E=Math.sin(y)*Math.sin(b);const x=[315,270,225,360,180,0],w=[60,60,60,60,60,90],T=new Float32Array([3,5,3,2,1,4]),I=T.reduce((P,B)=>P+B),M=T.map(P=>P/I),C=n==="multi-directional"?x.length:1,k=new Float32Array(6),N=new Float32Array(6),F=new Float32Array(6);if(n==="multi-directional")for(let P=0;P<C;P++)t=w[P],r=x[P],y=(90-t)*Math.PI/180,g=Math.cos(y),b=(360-r+90)*Math.PI/180,S=Math.sin(y)*Math.cos(b),E=Math.sin(y)*Math.sin(b),k[P]=g,N[P]=S,F[P]=E;else k.fill(g),N.fill(S),F.fill(E);return{resolution:l,factor:[d,m],sinZcosA:S,sinZsinA:E,cosZ:g,sinZcosAs:N,sinZsinAs:F,cosZs:k,weights:M,hillshadeType:["traditional","multi-directional"].indexOf(n)}}function _O(e,t){const{width:r,height:n}=e,i=r*n,s=new Uint8Array(i),o=e.mask!=null;let a;if(o){a=new Uint8Array(e.mask);for(let I=0;I<a.length;I++)a[I]&&(s[I]=1,a[I]=1)}const l=e.pixels[0],u=new Float32Array(i),c=new Float32Array(i);let h,d=0;if(t){const{resolution:I}=t,M=I?(I.x+I.y)/2:1;d=200*t.zFactor/(M*M),h=new Float32Array(i)}const m=t?.curvatureType;let y,g,b,S,E,x,w,T;for(let I=So;I<n-So;I++){const M=I*r;for(let C=So;C<r-So;C++){const k=M+C;if(!a||a[k]!==0){if(a){if(a[k-r-1]+a[k-r]+a[k-r+1]+a[k-1]+a[k+1]+a[k+r-1]+a[k+r]+a[k+r+1]<7){s[k]=0;continue}y=a[k-r-1]?l[k-r-1]:l[k],g=a[k-r]?l[k-r]:l[k],b=a[k-r+1]?l[k-r+1]:l[k],S=a[k-1]?l[k-1]:l[k],E=a[k+1]?l[k+1]:l[k],x=a[k+r-1]?l[k+r-1]:l[k],w=a[k+r]?l[k+r]:l[k],T=a[k+r+1]?l[k+r+1]:l[k]}else y=l[k-r-1],g=l[k-r],b=l[k-r+1],S=l[k-1],E=l[k+1],x=l[k+r-1],w=l[k+r],T=l[k+r+1];if(u[k]=b+E+E+T-(y+S+S+x),c[k]=x+w+w+T-(y+g+g+b),h!=null){const N=l[k],F=.5*(S+E)-N,P=.5*(g+w)-N;if(m==="standard")h[k]=-d*(F+P);else{const B=(-y+b+x-T)/4,O=(-S+E)/2,v=(g-w)/2,A=O*O,R=v*v,U=A+R;U&&(h[k]=m==="profile"?d*(F*A+P*R+B*O*v)/U:-d*(F*R+P*A-B*O*v)/U)}}}}}return{outMask:o?s:null,dzxs:u,dzys:c,curvatures:h}}function xO(e,t,r){for(let n=0;n<r;n++)e[n*t]=e[n*t+1],e[(n+1)*t-1]=e[(n+1)*t-2];for(let n=1;n<t-1;n++)e[n]=e[n+t],e[n+(r-1)*t]=e[n+(r-2)*t]}function _0e(e,t){if(!Qr(e))return e;const{factor:r,sinZcosA:n,sinZsinA:i,cosZ:s,sinZcosAs:o,sinZsinAs:a,cosZs:l,weights:u}=Tz(t),[c,h]=r,d=t.hillshadeType==="traditional",{width:m,height:y}=e,g=new Uint8Array(m*y),{dzxs:b,dzys:S,outMask:E}=_O(e);for(let x=So;x<y-So;x++){const w=x*m;for(let T=So;T<m-So;T++){const I=w+T;if(!E||E[I]){const M=b[I]*c,C=S[I]*h,k=Math.sqrt(1+M*M+C*C);let N=0;if(d){let F=255*(s+i*C-n*M)/k;F<0&&(F=0),N=F}else{const F=a.length;for(let P=0;P<F;P++){let B=255*(l[P]+a[P]*C-o[P]*M)/k;B<0&&(B=0),N+=B*u[P]}}g[I]=255&N}}}return xO(g,m,y),new Ht({width:m,height:y,pixels:[g],mask:E,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[new R_(0,255)]})}function x0e(e,t,r,n){if(!Qr(e)||!Qr(t))return;const{min:i,max:s}=n,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],c=255.00001/(s-i),h=new Uint8ClampedArray(u.length),d=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),y=r.length-1;for(let g=0;g<u.length;g++){if(l&&l[g]===0)continue;const b=Math.floor((u[g]-i)*c),[S,E]=r[b<0?0:b>y?y:b],x=o[g],w=x*E,T=w*(1-Math.abs(S%2-1)),I=x-w;switch(Math.floor(S)){case 0:h[g]=w+I,d[g]=T+I,m[g]=I;break;case 1:h[g]=T+I,d[g]=w+I,m[g]=I;break;case 2:h[g]=I,d[g]=w+I,m[g]=T+I;break;case 3:h[g]=I,d[g]=T+I,m[g]=w+I;break;case 4:h[g]=T+I,d[g]=I,m[g]=w+I;break;case 5:case 6:h[g]=w+I,d[g]=I,m[g]=T+I}}e.pixels=[h,d,m],e.updateStatistics()}function c3t(e,t){if(!Qr(e))return e;const r=t.zFactor,n=t.pixelSizePower??1,i=t.pixelSizeFactor??1,s=t.slopeType,o=t.isGCS,{x:a,y:l}=t.resolution;let u=r/(8*a),c=r/(8*l);o&&Math.abs(r-1)<1e-4&&(u/=Zy,c/=Zy),s==="adjusted"&&(u=(r+a**n*i)/(8*a),c=(r+l**n*i)/(8*l));const{dzxs:h,dzys:d,outMask:m}=_O(e),{width:y,height:g}=e,b=new Float32Array(y*g);for(let E=So;E<g-So;E++){const x=E*y;for(let w=So;w<y-So;w++){const T=x+w;if(!m||m[T]){const I=h[T]*u,M=d[T]*c,C=Math.sqrt(I*I+M*M);b[x+w]=s==="percent-rise"?100*C:57.2957795*Math.atan(C)}}}xO(b,y,g);const S=new Ht({width:y,height:g,pixels:[b],mask:m,pixelType:"f32",validPixelCount:e.validPixelCount});return S.updateStatistics(),S}function h3t(e,t={}){if(!Qr(e))return e;const{resolution:r}=t,n=r?1/r.x:1,i=r?1/r.y:1,{dzxs:s,dzys:o,outMask:a}=_O(e),{width:l,height:u}=e,c=new Float32Array(l*u);for(let h=So;h<u-So;h++){const d=h*l;for(let m=So;m<l-So;m++){const y=d+m;if(!a||a[y]){const g=s[y]*n,b=o[y]*i;let S=-1;g===0&&b===0||(S=90-57.29578*Math.atan2(b,-g),S<0&&(S+=360),S===360?S=0:S>360&&(S%=360)),c[d+m]=S}}}return xO(c,l,u),new Ht({width:l,height:u,pixels:[c],mask:a,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[new R_(-1,360)]})}function p3t(e,t){if(!Qr(e))return e;const{curvatures:r,outMask:n}=_O(e,t),{width:i,height:s}=e;xO(r,i,s);const o=new Ht({width:i,height:s,pixels:[r],mask:n,pixelType:"f32",validPixelCount:e.validPixelCount});return o.updateStatistics(),o}function d3t(e,t,r){const{hillshadeType:n,altitude:i,azimuth:s,zFactor:o,pixelSizeFactor:a,pixelSizePower:l,slopeType:u}=e;return{hillshadeType:n,altitude:i,azimuth:s,zFactor:o,pixelSizePower:l,pixelSizeFactor:a,scalingType:u==="scaled"?"adjusted":"none",resolution:t,isGCS:r}}let yy=class extends we{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e?.pixelBlock;if(!CQ(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=t.extractBands(e.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{const n=e.extent,i=n.spatialReference.isGeographic,s={x:(n.xmax-n.xmin)/t.width,y:(n.ymax-n.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:i,resolution:s});break}}return r}catch(r){return Pe.getLogger(this).error("symbolize",r.message),t}}simpleStretch(e,t){if(!CQ(e))return e;try{return e.pixels.length>3&&(e=e.extractBands([0,1,2])),a4(e,{...t,isRenderer:!0})}catch(r){return Pe.getLogger(this).error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:o,offset:a}=this.lookup.colormapLut||{};return{colormap:o,colormapOffset:a,isClassBreaks:this.rendererJSON.type==="classBreaks",type:"lut"}}const{pixelBlock:t,isGCS:r,resolution:n,bandIds:i}=e,{rendererJSON:s}=this;return s.type==="rasterStretch"?this._generateStretchWebGLParams(t,s,i):s.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(s,r,n??void 0):s.type==="vectorField"?this._generateVectorFieldWebGLParams(s):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:WL(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:t?WL(e,this.lookup.colormapLut):LSt(e,this.lookup.remapLut??[])}_symbolizeStretch(e,t){const{rasterInfo:r}=this,{pixelType:n,bandCount:i}=r,s=this.rendererJSON,o=["u8","u16","s8","s16"].includes(n);let a,l;const{dra:u}=s,{gamma:c}=this.lookup;if(s.stretchType==="histogramEqualization"){const h=u?null:this.lookup?.histogramLut,d=Av(s,{rasterInfo:r,pixelBlock:e,bandIds:t,returnHistogramLut:!h}),m=a4(e,{...d,gamma:c,isRenderer:!0});l=e7(m,{lut:u?d.histogramLut:h,offset:0})}else if(o){if(u){const h=Av(s,{rasterInfo:r,pixelBlock:e,bandIds:t});a=x7({pixelType:n,...h,gamma:c,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return e;a=this.lookup?this.lookup.stretchLut:null}else a=this.lookup?this.lookup.stretchLut:null;if(!a)return e;i>1&&t!=null&&t.length===e?.pixels.length&&a?.lut.length===i&&(a={lut:t.map(h=>a.lut[h]),offset:a.offset}),l=e7(e,a)}else{const h=Av(s,{rasterInfo:r,pixelBlock:e,bandIds:t});l=a4(e,{...h,gamma:c,isRenderer:!0})}if(s.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;l=WL(l,this.lookup?.colormapLut)}return l}_symbolizeShadedRelief(e,t){const r=this.rendererJSON,n={...r,...t},i=_0e(e,n);if(!r.colorRamp)return i;let s;if(this._isLUTChanged(!0)){if(!this.bind().success)return i;s=this.lookup?this.lookup.hsvMap:null}else s=this.lookup?this.lookup.hsvMap:null;if(!s)return i;const o=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return x0e(i,e,s,o),i}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:n}=this.rasterInfo,i=e.field1;if(!i)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const s=e.defaultSymbol,o=t===1&&["u8","s8"].includes(n);if(!wz(this.rasterInfo,i)&&!o)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const a=[];if(r!=null){const u=r.fields.find(c=>c.name.toLowerCase()==="value");if(!u)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(c=>{const h=e.uniqueValueInfos?.find(m=>String(m.value)===String(c.attributes[i])),d=h?.symbol?.color;d?a.push([c.attributes[u.name]].concat(d)):s&&a.push([c.attributes[u.name]].concat(s.color))})}else{if(i.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};e.uniqueValueInfos?.forEach(u=>{const c=u?.symbol?.color;c?a.push([parseInt(""+u.value,10)].concat(c)):s&&a.push([parseInt(""+u.value,10)].concat(s?.color))})}if(a.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const l=Tv({colormap:a});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=o4(l?.indexedColormap),{success:!0}}_updateColormapRenderer(e){if(!_z(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const t=e.colormapInfos.map(n=>[n.value].concat(n.color)).sort((n,i)=>n[0]-i[0]);if(!t||t.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=Tv({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=o4(r?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(e){if(!h0e(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){const t=Vg(e.colorRamp,{interpolateAlpha:!0}),r=Tv({colormap:t}),n=mme(r.indexedColormap);this.lookup={rendererJSON:e,colormapLut:r,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:t,pixelType:r}=this.rasterInfo,n=t!=null?t.fields.find(o=>o.name.toLowerCase()==="value"):null,i=t!=null?t.fields.find(o=>o.name.toLowerCase()===e.field.toLowerCase()):null,s=n!=null&&i!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||s,tableValueField:n,tableBreakField:i}}_updateClassBreaksRenderer(e){const{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:n,tableBreakField:i}=this._analyzeClassBreaks(e),s=e.classBreakInfos;if(!s?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const o=s.sort((h,d)=>h.classMaxValue-d.classMaxValue),a=o[o.length-1];let l=e.minValue;if(!r){const h=[];for(let d=0;d<o.length;d++)h.push({value:o[d].classMinValue??l,mappedColor:o[d].symbol.color}),l=o[d].classMaxValue;return h.push({value:a.classMaxValue,mappedColor:a.symbol.color}),this.lookup={rendererJSON:e,remapLut:h},this.canRenderInWebGL=!1,{success:!0}}const u=[];if(t!=null&&n!=null&&i!==null&&n!==i){const h=n.name,d=i.name,m=o[o.length-1],{classMaxValue:y}=m;l=e.minValue;for(const g of t.features){const b=g.attributes[h],S=g.attributes[d],E=S===y?m:S<l?null:o.find(({classMaxValue:x})=>x>S);E&&u.push([b].concat(E.symbol.color))}}else{l=Math.floor(e.minValue);for(let h=0;h<o.length;h++){const d=o[h];for(let m=l;m<d.classMaxValue;m++)u.push([m].concat(d.symbol.color));l=Math.ceil(d.classMaxValue)}a.classMaxValue===l&&u.push([a.classMaxValue].concat(a.symbol.color))}const c=Tv({colormap:u,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:c},this.canRenderInWebGL=o4(c?.indexedColormap),{success:!0}}_updateStretchRenderer(e){let{stretchType:t,dra:r}=e;if(!(t==="none"||e.statistics?.length||m3t(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const n=e.histograms||this.rasterInfo.histograms;!f3t(e.stretchType)||n?.length||r||(t="minMax");const{computeGamma:i,useGamma:s,colorRamp:o}=e;let{gamma:a}=e;if(s&&i&&!a?.length){const c=e.statistics?.length?e.statistics:this.rasterInfo.statistics;a=i3t(this.rasterInfo.pixelType,c)}const l=this.rasterInfo.pixelType,u=!r&&["u8","u16","s8","s16"].includes(l);if(t==="histogramEqualization"){const c=n.map(h=>v0e(h));this.lookup={rendererJSON:e,histogramLut:c}}else if(u){const c=Av(e,{rasterInfo:this.rasterInfo}),h=x7({pixelType:l,...c,gamma:s?a:null,rounding:"floor"});this.lookup={rendererJSON:e,stretchLut:h}}if(o&&!y3t(o)){const c=Vg(o,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=Tv({colormap:c}),this.lookup.rendererJSON=e}return this.lookup.gamma=s&&a?.length?a:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,t,r){let n=null,i=null;const s=this.lookup?.colormapLut;t.colorRamp&&s&&(n=s.indexedColormap,i=s.offset),t.stretchType==="histogramEqualization"&&(t={...t,stretchType:"minMax"});const{gamma:o}=this.lookup,a=!(!t.useGamma||!o?.some(x=>x!==1)),{minCutOff:l,maxCutOff:u,outMin:c,outMax:h}=Av(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});let d=0;e!=null&&(d=e.getPlaneCount(),d===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const{bandCount:m}=this.rasterInfo,y=Math.min(3,r?.length||d||m,m),g=new Float32Array(y),b=n||a?1:255;let S;for(S=0;S<l.length;S++)g[S]=u[S]===l[S]?0:(h-c)/(u[S]-l[S])/b;const E=new Float32Array(y);if(a&&o)for(S=0;S<y;S++)o[S]>1?o[S]>2?E[S]=6.5+(o[S]-2)**2.5:E[S]=6.5+100*(2-o[S])**4:E[S]=1;return{bandCount:y,outMin:c/b,outMax:h/b,minCutOff:l,maxCutOff:u,factor:g,useGamma:a,gamma:a?o:[1,1,1],gammaCorrection:a?E:[1,1,1],colormap:n,colormapOffset:i,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t=!1,r={x:0,y:0}){let n=null,i=null;const s=this.lookup?.colormapLut;e.colorRamp&&s&&(n=s.indexedColormap,i=s.offset);const o={...e,isGCS:t,resolution:r},a=Tz(o),l=this.rasterInfo.statistics?.[0];return{...a,minValue:l?.min??0,maxValue:l?.max??8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:n,colormapOffset:i}}_generateVectorFieldWebGLParams(e){const{style:t,inputUnit:r,outputUnit:n,visualVariables:i,symbolTileSize:s,flowRepresentation:o}=e;let a;const l=this.rasterInfo.statistics?.[0].min??0,u=this.rasterInfo.statistics?.[0].max??50,c=i?.find(S=>S.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:u,maxSize:.8*s,minDataValue:l,minSize:.2*s},h=c.minDataValue??l,d=c.maxDataValue??u,m=c.maxSize!=null&&c.minSize!=null?[c.minSize/s,c.maxSize/s]:[.2,.8];if(t==="wind_speed"){const S=(m[0]+m[1])/2;m[0]=m[1]=S}const y=h!=null&&d!=null?[h,d]:null;if(t==="classified_arrow")if(h!=null&&d!=null&&c!=null){a=[];const S=(c.maxDataValue-c.minDataValue)/5;for(let E=0;E<6;E++)a.push(c.minDataValue+S*E)}else a=[0,1e-6,3.5,7,10.5,14];const g=o==="flow_to"==(t==="ocean_current_kn"||t==="ocean_current_m")?0:Math.PI,b=i?.find(S=>S.type==="rotationInfo");return{breakValues:a,dataRange:y,inputUnit:r,outputUnit:n,symbolTileSize:s,symbolPercentRange:m,style:t||"single_arrow",rotation:g,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":b?.rotationType||e.rotationType,type:"vectorField"}}};p([f({json:{write:!0}})],yy.prototype,"rendererJSON",void 0),p([f({type:m3,json:{write:!0}})],yy.prototype,"rasterInfo",void 0),p([f({json:{write:!0}})],yy.prototype,"lookup",void 0),p([f()],yy.prototype,"canRenderInWebGL",void 0),yy=p([W("esri.renderers.support.RasterSymbolizer")],yy);const S0e=yy;function f3t(e){return e==="percentClip"||e==="histogramEqualization"}function m3t(e){return e!=null&&e.length>0&&e[0].min!=null&&e[0].max!=null}function CQ(e){return Qr(e)&&e.validPixelCount!==0}function y3t(e){return e.type==="algorithmic"&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}let Tf=class extends rr(we){constructor(){super(...arguments),this.fromGeometry=null,this.toGeometry=null,this.objectIds=null,this.where=null,this.maxCount=null}};p([f({type:it,json:{read:!0}})],Tf.prototype,"fromGeometry",void 0),p([f({type:it,json:{read:!0,write:!0}})],Tf.prototype,"toGeometry",void 0),p([f({json:{write:!0}})],Tf.prototype,"objectIds",void 0),p([f({type:String,json:{write:!0}})],Tf.prototype,"where",void 0),p([f({type:Number,json:{write:!0}})],Tf.prototype,"maxCount",void 0),Tf=p([W("esri.rest.support.FindImagesParameters")],Tf);const g3t=Tf,E0e=e=>{let t=class extends e{constructor(){super(...arguments),this.make=null,this.model=null,this.focalLength=null,this.pixelSize=null,this.rows=null,this.cols=null}};return p([f({json:{write:!0}})],t.prototype,"make",void 0),p([f({json:{write:!0}})],t.prototype,"model",void 0),p([f({json:{write:!0}})],t.prototype,"focalLength",void 0),p([f({json:{write:!0}})],t.prototype,"pixelSize",void 0),p([f({json:{write:!0}})],t.prototype,"rows",void 0),p([f({json:{write:!0}})],t.prototype,"cols",void 0),t=p([W("esri.rest.support.CameraInfoMixin")],t),t};let Ou=class extends E0e(we){constructor(){super(...arguments),this.id=null,this.referenceUri=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.perspectiveCenter=null,this.orientation=null}writeAcquisitionDate(e,t){t.acquisitionDate=e?.getTime()}};p([f({json:{write:!0}})],Ou.prototype,"id",void 0),p([f({json:{name:"uri",write:!0}})],Ou.prototype,"referenceUri",void 0),p([f({type:Date,json:{write:!0}})],Ou.prototype,"acquisitionDate",void 0),p([Re("acquisitionDate")],Ou.prototype,"writeAcquisitionDate",null),p([f({json:{write:!0}})],Ou.prototype,"cameraID",void 0),p([f({type:it,json:{write:!0}})],Ou.prototype,"center",void 0),p([f({type:it,json:{write:!0}})],Ou.prototype,"perspectiveCenter",void 0),p([f({json:{write:!0}})],Ou.prototype,"orientation",void 0),Ou=p([W("esri.rest.support.ImageInspectionInfo")],Ou);const v3t=Ou;let l4=class extends we{constructor(){super(...arguments),this.images=null}};p([f({type:[v3t],json:{write:!0}})],l4.prototype,"images",void 0),l4=p([W("esri.rest.support.FindImagesResult")],l4);const b3t=l4;var S7;let gy=S7=class extends we{constructor(e){super(e),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new S7(se({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};p([f({type:[String],json:{name:"angleName",write:!0}})],gy.prototype,"angleNames",void 0),p([f({type:it,json:{write:!0}})],gy.prototype,"point",void 0),p([f({type:Ke,json:{write:!0}})],gy.prototype,"spatialReference",void 0),p([f({type:Ft,json:{write:!0}})],gy.prototype,"rasterId",void 0),gy=S7=p([W("esri.rest.support.ImageAngleParameters")],gy);const w3t=gy;let Mv=class extends we{constructor(e){super(e),this.north=null,this.up=null,this.spatialReference=null}};p([f({type:Number,json:{write:!0}})],Mv.prototype,"north",void 0),p([f({type:Number,json:{write:!0}})],Mv.prototype,"up",void 0),p([f({type:Ke,json:{write:!0}})],Mv.prototype,"spatialReference",void 0),Mv=p([W("esri.rest.support.ImageAngleResult")],Mv);const _3t=Mv,ql=new Pt({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let Gu=class extends we{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.pixelSize=null,this.raster=void 0}};p([f()],Gu.prototype,"type",void 0),p([f({type:ql.apiValues,json:{read:ql.read,write:ql.write}})],Gu.prototype,"measureOperation",void 0),p([f({type:sl,json:{write:!0}})],Gu.prototype,"mosaicRule",void 0),p([f({type:it,json:{write:!0}})],Gu.prototype,"pixelSize",void 0),p([f({json:{write:!0}})],Gu.prototype,"raster",void 0),Gu=p([W("esri.rest.support.BaseImageMeasureParameters")],Gu);var E7;let mp=E7=class extends Gu{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new E7(se({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};p([f({types:ji,json:{name:"fromGeometry",read:!0,write:!0}})],mp.prototype,"geometry",void 0),p([Re("geometry")],mp.prototype,"writeGeometry",null),p([f({type:ql.apiValues,json:{write:ql.write}})],mp.prototype,"measureOperation",null),p([f({json:{read:!0}})],mp.prototype,"is3D",void 0),p([f({type:String,json:{read:yd.read,write:yd.write}})],mp.prototype,"linearUnit",void 0),p([f({type:String,json:{read:_E.read,write:_E.write}})],mp.prototype,"areaUnit",void 0),mp=E7=p([W("esri.rest.support.ImageAreaParameters")],mp);const x3t=mp;let rm=class extends we{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};p([f({type:Number,json:{read:!0,write:!0}})],rm.prototype,"value",void 0),p([f({type:String,json:{read:!0,write:!0}})],rm.prototype,"displayValue",void 0),p([f({type:Number,json:{read:!0,write:!0}})],rm.prototype,"uncertainty",void 0),rm=p([W("esri.rest.support.BaseImageMeasureResult.BaseImageMeasureResultValue")],rm);let Bb=class extends rm{constructor(){super(...arguments),this.unit=null}};p([f({type:String,json:{read:yd.read,write:yd.write}})],Bb.prototype,"unit",void 0),Bb=p([W("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultLengthValue")],Bb);let u4=class extends rm{constructor(){super(...arguments),this.unit=null}};p([f({type:String,json:{read:_E.read,write:_E.write}})],u4.prototype,"unit",void 0),u4=p([W("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAreaValue")],u4);let BS=class extends rm{constructor(){super(...arguments),this.unit=null}};p([f({type:String,json:{read:C5.read,write:C5.write}})],BS.prototype,"unit",void 0),BS=p([W("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAngleValue")],BS);let pm=class extends we{constructor(){super(...arguments),this.name=null,this.sensorName=null}};p([f({type:String,json:{read:!0,write:!0}})],pm.prototype,"name",void 0),p([f({type:String,json:{read:!0,write:!0}})],pm.prototype,"sensorName",void 0),pm=p([W("esri.rest.support.BaseImageMeasureResult")],pm);let zx=class extends pm{constructor(){super(...arguments),this.area=null,this.perimeter=null}};p([f({type:u4,json:{read:!0,write:!0}})],zx.prototype,"area",void 0),p([f({type:Bb,json:{read:!0,write:!0}})],zx.prototype,"perimeter",void 0),zx=p([W("esri.rest.support.ImageAreaResult")],zx);const S3t=zx;let c4=class extends rr(we){constructor(){super(...arguments),this.outSpatialReference=null}};p([f({type:Ke,json:{name:"outSR",write:!0}})],c4.prototype,"outSpatialReference",void 0),c4=p([W("esri.rest.support.ImageBoundaryParameters")],c4);const E3t=c4;let Cv=class extends we{constructor(){super(...arguments),this.area=null,this.geometry=null}readGeometry(e,t){return e==null?null:e.rings?ts.fromJSON(e):jt.fromJSON(e)}};p([f({type:Number,json:{write:!0}})],Cv.prototype,"area",void 0),p([f({json:{name:"shape",write:!0}})],Cv.prototype,"geometry",void 0),p([Ee("geometry")],Cv.prototype,"readGeometry",null),Cv=p([W("esri.rest.support.ImageBoundaryResult")],Cv);const T3t=Cv;var T7;let Uc=T7=class extends Gu{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new T7(se({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};p([f({type:it,json:{read:!0,write:!0}})],Uc.prototype,"fromGeometry",void 0),p([Re("fromGeometry")],Uc.prototype,"writeFromGeometry",null),p([f({type:it,json:{read:!0,write:!0}})],Uc.prototype,"toGeometry",void 0),p([f({type:ql.apiValues,json:{write:ql.write}})],Uc.prototype,"measureOperation",null),p([f({json:{read:!0}})],Uc.prototype,"is3D",void 0),p([f({type:String,json:{read:yd.read,write:yd.write}})],Uc.prototype,"linearUnit",void 0),p([f({type:String,json:{read:C5.read,write:C5.write}})],Uc.prototype,"angularUnit",void 0),Uc=T7=p([W("esri.rest.support.ImageDistanceParameters")],Uc);const I3t=Uc;let kv=class extends pm{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};p([f({type:Bb,json:{read:!0,write:!0}})],kv.prototype,"distance",void 0),p([f({type:BS,json:{read:!0,write:!0}})],kv.prototype,"azimuthAngle",void 0),p([f({type:BS,json:{read:!0,write:!0}})],kv.prototype,"elevationAngle",void 0),kv=p([W("esri.rest.support.ImageDistanceResult")],kv);const A3t=kv;let yp=class extends rr(we){constructor(){super(...arguments),this.geometry=null,this.objectIds=null,this.spatialRelationship="intersects",this.timeExtent=null,this.where=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=JSON.stringify(e.toJSON()))}};p([f({types:ji,json:{read:An,write:!0}})],yp.prototype,"geometry",void 0),p([Re("geometry")],yp.prototype,"writeGeometry",null),p([f({json:{write:!0}})],yp.prototype,"objectIds",void 0),p([tt(LG,{ignoreUnknown:!1,name:"spatialRel"})],yp.prototype,"spatialRelationship",void 0),p([f({type:Ro,json:{name:"time",write:!0}})],yp.prototype,"timeExtent",void 0),p([f({type:String,json:{write:!0}})],yp.prototype,"where",void 0),yp=p([W("esri.rest.support.ImageGPSInfoParameters")],yp);const M3t=yp;let h4=class extends E0e(we){constructor(){super(...arguments),this.id=null}};p([f({json:{write:!0}})],h4.prototype,"id",void 0),h4=p([W("esri.rest.support.CameraInfo")],h4);const C3t=h4;let Nu=class extends we{constructor(){super(...arguments),this.id=null,this.name=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.gps=null,this.orientation=null}writeAcquisitionDate(e,t){t.acquisitionDate=e?.getTime()}};p([f({json:{write:!0}})],Nu.prototype,"id",void 0),p([f({json:{write:!0}})],Nu.prototype,"name",void 0),p([f({type:Date,json:{write:!0}})],Nu.prototype,"acquisitionDate",void 0),p([Re("acquisitionDate")],Nu.prototype,"writeAcquisitionDate",null),p([f({json:{write:!0}})],Nu.prototype,"cameraID",void 0),p([f({type:it,json:{write:!0}})],Nu.prototype,"center",void 0),p([f({json:{write:!0}})],Nu.prototype,"gps",void 0),p([f({json:{write:!0}})],Nu.prototype,"orientation",void 0),Nu=p([W("esri.rest.support.ImageGPSInfo")],Nu);const k3t=Nu;let $x=class extends we{constructor(){super(...arguments),this.images=null,this.cameras=null}};p([f({type:[k3t],json:{write:!0}})],$x.prototype,"images",void 0),p([f({type:[C3t],json:{write:!0}})],$x.prototype,"cameras",void 0),$x=p([W("esri.rest.support.ImageGPSInfoResult")],$x);const R3t=$x;var I7;let gp=I7=class extends Gu{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}get measureOperation(){return this.operationType}clone(){return new I7(se({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};p([f({type:it,json:{read:!0}})],gp.prototype,"fromGeometry",void 0),p([Re("fromGeometry")],gp.prototype,"writeFromGeometry",null),p([f({type:it,json:{read:!0,write:!0}})],gp.prototype,"toGeometry",void 0),p([f({type:ql.apiValues,json:{write:ql.write}})],gp.prototype,"measureOperation",null),p([f({json:{read:!0}})],gp.prototype,"operationType",void 0),p([f({type:String,json:{read:yd.read,write:yd.write}})],gp.prototype,"linearUnit",void 0),gp=I7=p([W("esri.rest.support.ImageHeightParameters")],gp);const O3t=gp;let p4=class extends pm{constructor(){super(...arguments),this.height=null}};p([f({type:Bb,json:{read:!0,write:!0}})],p4.prototype,"height",void 0),p4=p([W("esri.rest.support.ImageHeightResult")],p4);const N3t=p4;var A7;let Bc=A7=class extends we{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}clone(){return new A7(se({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};p([f({types:ji,json:{read:An}})],Bc.prototype,"geometry",void 0),p([Re("geometry")],Bc.prototype,"writeGeometry",null),p([f({type:sl,json:{write:!0}})],Bc.prototype,"mosaicRule",void 0),p([f({type:_r,json:{write:!0,name:"renderingRule"}})],Bc.prototype,"rasterFunction",void 0),p([f({type:it,json:{write:!0}})],Bc.prototype,"pixelSize",void 0),p([f({json:{write:!0}})],Bc.prototype,"raster",void 0),p([f({type:Ro,json:{read:{source:"time"},write:{target:"time"}}})],Bc.prototype,"timeExtent",void 0),Bc=A7=p([W("esri.rest.support.ImageHistogramParameters")],Bc);const T0e=Bc;var M7;let ri=M7=class extends we{constructor(){super(...arguments),this.geometry=null,this.rasterFunctions=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t?.mosaicMethod&&(t=sl.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON()))}set rasterFunction(e){let t=e;t?.rasterFunction&&(t=_r.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("rasterFunction",t)}writeRasterFunction(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[r]=JSON.stringify(e.rasterFunctionDefinition))}writeRasterFunctions(e,t,r){e!=null&&(t[r]=JSON.stringify(e.map(n=>n.rasterFunctionDefinition||n.toJSON())))}writePixelSize(e,t,r){e!=null&&(t[r]=JSON.stringify(e))}writeTimeExtent(e,t,r){if(e!=null){const n=e.start!=null?e.start.getTime():null,i=e.end!=null?e.end.getTime():null;t[r]=n!=null?i!=null?`${n},${i}`:`${n}`:null}}clone(){return new M7(se({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};p([f({json:{write:!0}})],ri.prototype,"geometry",void 0),p([Re("geometry")],ri.prototype,"writeGeometry",null),p([f({type:sl,json:{write:!0}})],ri.prototype,"mosaicRule",null),p([Re("mosaicRule")],ri.prototype,"writeMosaicRule",null),p([f({type:_r,json:{write:!0,name:"renderingRule"}})],ri.prototype,"rasterFunction",null),p([Re("rasterFunction")],ri.prototype,"writeRasterFunction",null),p([f({type:[_r],json:{write:!0,name:"renderingRules"}})],ri.prototype,"rasterFunctions",void 0),p([Re("rasterFunctions")],ri.prototype,"writeRasterFunctions",null),p([f({type:it,json:{write:!0}})],ri.prototype,"pixelSize",void 0),p([Re("pixelSize")],ri.prototype,"writePixelSize",null),p([f({type:Boolean,json:{write:!0}})],ri.prototype,"returnGeometry",void 0),p([f({type:Boolean,json:{write:!0}})],ri.prototype,"returnCatalogItems",void 0),p([f({type:Boolean,json:{write:!0}})],ri.prototype,"returnPixelValues",void 0),p([f({type:Number,json:{write:!0}})],ri.prototype,"maxItemCount",void 0),p([f({type:Ro,json:{write:{target:"time"}}})],ri.prototype,"timeExtent",void 0),p([Re("timeExtent")],ri.prototype,"writeTimeExtent",null),p([f({json:{write:!0}})],ri.prototype,"raster",void 0),p([f({json:{write:!0}})],ri.prototype,"viewId",void 0),p([f({type:Boolean,json:{write:!0}})],ri.prototype,"processAsMultidimensional",void 0),ri=M7=p([W("esri.rest.support.ImageIdentifyParameters")],ri);const I0e=ri;let Lu=class extends we{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};p([f({json:{write:!0}})],Lu.prototype,"catalogItemVisibilities",void 0),p([f({type:Qm,json:{write:!0}})],Lu.prototype,"catalogItems",void 0),p([f({type:it,json:{write:!0}})],Lu.prototype,"location",void 0),p([f({json:{write:!0}})],Lu.prototype,"name",void 0),p([f({json:{write:!0}})],Lu.prototype,"objectId",void 0),p([f({json:{write:!0}})],Lu.prototype,"processedValues",void 0),p([f({json:{write:!0}})],Lu.prototype,"properties",void 0),p([f({json:{write:!0}})],Lu.prototype,"value",void 0),Lu=p([W("esri.rest.support.ImageIdentifyResult")],Lu);const L3t=Lu;var C7;let Rv=C7=class extends we{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(n=>n.toJSON())}}clone(){return new C7({geometries:this.geometries?.map(e=>e.clone())??[],rasterId:this.rasterId})}};p([f({type:[it],json:{write:!0}})],Rv.prototype,"geometries",void 0),p([Re("geometries")],Rv.prototype,"writeGeometry",null),p([f({type:Ft,json:{write:!0}})],Rv.prototype,"rasterId",void 0),Rv=C7=p([W("esri.rest.support.ImagePixelLocationParameters")],Rv);const P3t=Rv;let d4=class extends we{constructor(){super(...arguments),this.geometries=null}};p([f({json:{write:!0}})],d4.prototype,"geometries",void 0),d4=p([W("esri.rest.support.ImagePixelLocationResult")],d4);const D3t=d4;var k7;let vy=k7=class extends Gu{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}get measureOperation(){const{is3D:e,geometry:t}=this;return t.type==="point"?e?"point-3D":"point":e?"centroid-3D":"centroid"}clone(){return new k7(se({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};p([f({types:ji,json:{name:"fromGeometry",read:An}})],vy.prototype,"geometry",void 0),p([Re("geometry")],vy.prototype,"writeGeometry",null),p([f({type:ql.apiValues,json:{read:ql.read,write:ql.write}})],vy.prototype,"measureOperation",null),p([f({json:{read:!0}})],vy.prototype,"is3D",void 0),vy=k7=p([W("esri.rest.support.ImagePointParameters")],vy);const F3t=vy;let f4=class extends pm{constructor(){super(...arguments),this.point=null}};p([f({type:it,json:{name:"point.value",read:!0,write:!0}})],f4.prototype,"point",void 0),f4=p([W("esri.rest.support.ImagePointResult")],f4);const j3t=f4;var R7;let so=R7=class extends we{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=e.toJSON())}set locations(e){if(e?.length){const t=new n1({spatialReference:e[0].spatialReference,points:e.map(({x:r,y:n})=>[r,n])});this._set("locations",e),this.geometry=t}}clone(){return new R7(se({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};p([f({types:ji,json:{read:An}})],so.prototype,"geometry",void 0),p([Re("geometry")],so.prototype,"writeGeometry",null),p([f()],so.prototype,"locations",null),p([f({type:String,json:{type:od.jsonValues,read:od.read,write:od.write}})],so.prototype,"interpolation",void 0),p([f({type:sl,json:{write:!0}})],so.prototype,"mosaicRule",void 0),p([f({type:[String],json:{write:!0}})],so.prototype,"outFields",void 0),p([f({type:it,json:{write:!0}})],so.prototype,"pixelSize",void 0),p([f({type:String,json:{write:!0}})],so.prototype,"raster",void 0),p([f({type:Boolean,json:{write:!0}})],so.prototype,"returnFirstValueOnly",void 0),p([f({type:Number,json:{write:!0}})],so.prototype,"sampleDistance",void 0),p([f({type:Number,json:{write:!0}})],so.prototype,"sampleCount",void 0),p([f({type:Number,json:{write:!0}})],so.prototype,"sliceId",void 0),p([f({type:Ro,json:{read:{source:"time"},write:{target:"time"}}})],so.prototype,"timeExtent",void 0),so=R7=p([W("esri.rest.support.ImageSampleParameters")],so);const U3t=so;let vp=class extends we{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};p([f({json:{write:!0}})],vp.prototype,"attributes",void 0),p([f({type:it,json:{write:!0}})],vp.prototype,"location",void 0),p([f({json:{write:!0}})],vp.prototype,"locationId",void 0),p([f({json:{write:!0}})],vp.prototype,"rasterId",void 0),p([f({json:{write:!0}})],vp.prototype,"resolution",void 0),p([f({json:{write:!0}})],vp.prototype,"pixelValue",void 0),vp=p([W("esri.rest.support.ImageSample")],vp);const B3t=vp;let m4=class extends we{constructor(){super(...arguments),this.samples=null}};p([f({type:[B3t],json:{write:!0}})],m4.prototype,"samples",void 0),m4=p([W("esri.rest.support.ImageSampleResult")],m4);const V3t=m4;let by=class extends rr(we){constructor(){super(...arguments),this.geometries=[],this.rasterIds=null,this.outSpatialReference=null}writeGeometries(e,t,r){t.geometries=e?.length?{geometryType:zs(e[0]),geometries:e.map(n=>({...n.toJSON(),spatialReference:void 0}))}:null}};p([f({types:[ji]})],by.prototype,"geometries",void 0),p([Re("geometries")],by.prototype,"writeGeometries",null),p([f({type:[Ft],json:{write:!0}})],by.prototype,"rasterIds",void 0),p([f({type:Ke,json:{name:"outSR",write:!0}})],by.prototype,"outSpatialReference",void 0),by=p([W("esri.rest.support.ImageToMapMultirayParameters")],by);const G3t=by;let bp=class extends rr(we){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.outSpatialReference=null,this.depthOffset=0,this.adjust=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]={...e.toJSON(),spatialReference:void 0})}};p([f({types:ji,json:{read:An,write:!0}})],bp.prototype,"geometry",void 0),p([Re("geometry")],bp.prototype,"writeGeometry",null),p([f({json:{write:!0}})],bp.prototype,"rasterId",void 0),p([f({type:Ke,json:{name:"outSR",write:!0}})],bp.prototype,"outSpatialReference",void 0),p([f({json:{name:"options.DOff",write:!0}})],bp.prototype,"depthOffset",void 0),p([f({json:{name:"options.Adjust",write:!0}})],bp.prototype,"adjust",void 0),bp=p([W("esri.rest.support.ImageToMapParameters")],bp);const z3t=bp;let qx=class extends rr(we){constructor(){super(...arguments),this.referenceUri=null,this.rasterId=null}};p([f({type:String,json:{name:"uri",write:!0}})],qx.prototype,"referenceUri",void 0),p([f({type:Number,json:{write:!0}})],qx.prototype,"rasterId",void 0),qx=p([W("esri.rest.support.ImageUrlParameters")],qx);const $3t=qx;let y4=class extends we{constructor(){super(...arguments),this.url=null}};p([f({json:{name:"imageURL",write:!0}})],y4.prototype,"url",void 0),y4=p([W("esri.rest.support.ImageUrlResult")],y4);const q3t=y4;let wy=class extends rr(we){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.visibleOnly=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]=JSON.stringify(e))}};p([f({types:ji,json:{read:An,write:!0}})],wy.prototype,"geometry",void 0),p([Re("geometry")],wy.prototype,"writeGeometry",null),p([f({json:{write:!0}})],wy.prototype,"rasterId",void 0),p([f({json:{name:"options.VisibleOnly",write:!0}})],wy.prototype,"visibleOnly",void 0),wy=p([W("esri.rest.support.MapToImageParameters")],wy);const H3t=wy;let If=class extends we{constructor(){super(...arguments),this.geometry=null,this.length=null,this.area=null,this.center=null}readCenter(e,t){return e.spatialReference||(e={...e,spatialReference:t.Shape.spatialReference}),it.fromJSON(e)}};p([f({types:ji,json:{name:"Shape",read:An,write:!0}})],If.prototype,"geometry",void 0),p([f({json:{name:"Length",write:!0}})],If.prototype,"length",void 0),p([f({json:{name:"Area",write:!0}})],If.prototype,"area",void 0),p([f({json:{name:"Center",write:!0}})],If.prototype,"center",void 0),p([Ee("center")],If.prototype,"readCenter",null),If=p([W("esri.rest.support.MeasureAreaFromImageResult")],If);const W3t=If;var O7;let Ov=O7=class extends we{constructor(){super(...arguments),this.geometry=null,this.rasterId=void 0}writeGeometry(e,t,r){e!=null&&(t.geometryType=zs(e),t[r]={...e.toJSON(),spatialReference:void 0})}clone(){const e=se({geometry:this.geometry,rasterId:this.rasterId});return new O7(e)}};p([f({types:ji,json:{name:"fromGeometry",read:An,write:!0}})],Ov.prototype,"geometry",void 0),p([Re("geometry")],Ov.prototype,"writeGeometry",null),p([f({json:{write:!0}})],Ov.prototype,"rasterId",void 0),Ov=O7=p([W("esri.rest.support.MeasureFromImageParameters")],Ov);const Z3t=Ov;let Hx=class extends we{constructor(){super(...arguments),this.geometry=null,this.length=null}};p([f({types:ji,json:{name:"Shape",read:An,write:!0}})],Hx.prototype,"geometry",void 0),p([f({json:{name:"Length",write:!0}})],Hx.prototype,"length",void 0),Hx=p([W("esri.rest.support.MeasureLengthFromImageResult")],Hx);const J3t=Hx;function Iz(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const r=[];t.start!=null&&r.push(t.start),t.end==null||r.includes(t.end)||r.push(t.end),e.time=r.join(",")}}async function A0e(e,t,r){t=yn(T0e,t);const n=an(e),i=t.geometry?[t.geometry]:[],s=await cu(i),o=t.toJSON();Iz(o);const a=s?.[0];a!=null&&(o.geometry=Ch(a));const l=As({...n.query,f:"json",...o});return $s(l,r)}async function Y3t(e,t,r){const n=(t=yn(w3t,t)).toJSON();n.angleName!=null&&(n.angleName=n.angleName.join(",")),t?.point?.spatialReference?.imageCoordinateSystem&&(n.point.spatialReference=EO(t.point.spatialReference)),t?.spatialReference?.imageCoordinateSystem&&(n.spatialReference=O_(t.spatialReference));const i=an(e),s=As({...i.query,f:"json",...n}),o=$s(s,r),{data:a}=await Xe(`${i.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new Ke({wkid:0,imageCoordinateSystem:a.spatialReference}):Ke.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new _3t(a)}async function X3t(e,t,r){const n=(t=yn(P3t,t)).toJSON(),{geometries:i}=t;if(i)for(let u=0;u<i.length;u++)i[u].spatialReference?.imageCoordinateSystem&&(n.geometries.geometries[u].spatialReference=EO(i[u].spatialReference));const s=an(e),o=As({...s.query,f:"json",...n}),a=$s(o,r),{data:l}=await Xe(`${s.path}/computePixelLocation`,a);return D3t.fromJSON(l)}async function Q3t(e,t,r){const n=await A0e(e,t,r),i=an(e),{data:s}=await Xe(`${i.path}/computeStatisticsHistograms`,n),{statistics:o}=s;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:s.histograms}}async function K3t(e,t,r){const n=await A0e(e,t,r),i=an(e),{data:s}=await Xe(`${i.path}/computeHistograms`,n);return{histograms:s.histograms}}async function eIt(e,t,r){const n=(t=yn(U3t,t)).toJSON();Iz(n),n.outFields?.length&&(n.outFields=n.outFields.join(","));const i=await cu(t.geometry),s=i?.[0];s!=null&&(n.geometry=Ch(s));const o=an(e),a=As({...o.query,f:"json",...n}),l=$s(a,r),{data:u}=await Xe(`${o.path}/getSamples`,l),c=u?.samples?.map(h=>{const d=h.value==="NaN"||h.value===""?null:h.value.split(" ").map(m=>Number(m));return{...h,pixelValue:d}});return V3t.fromJSON({samples:c})}async function kQ(e,t,r){t=yn(I0e,t);const n=an(e),i=t.geometry?[t.geometry]:[];return cu(i).then(s=>{const o=t.toJSON(),a=s?.[0];a!=null&&(o.geometry=JSON.stringify(Ch(a)));const l=As({...n.query,f:"json",...o}),u=$s(l,r);return Xe(n.path+"/identify",u)}).then(s=>L3t.fromJSON(s.data))}async function tIt(e,t,r){t=yn(O3t,t);const n=await SO(e,t,[t.fromGeometry,t.toGeometry],r);return N3t.fromJSON(n)}async function rIt(e,t,r){t=yn(x3t,t);const n=await SO(e,t,[t.geometry],r);return S3t.fromJSON(n)}async function nIt(e,t,r){t=yn(F3t,t);const n=await SO(e,t,[t.geometry],r);return j3t.fromJSON(n)}async function iIt(e,t,r){t=yn(I3t,t);const n=await SO(e,t,[t.fromGeometry,t.toGeometry],r);return A3t.fromJSON(n)}async function SO(e,t,r,n){const i=an(e),s=await cu(r),o=t.toJSON();s[0]!=null&&(o.fromGeometry=JSON.stringify(Ch(s[0]))),s[1]!=null&&(o.toGeometry=JSON.stringify(Ch(s[1])));const a=As({...i.query,f:"json",...o}),l=$s(a,n),{data:u}=await Xe(i.path+"/measure",l);return u}async function sIt(e,t,r){const n=await M0e(e,t,r);return J3t.fromJSON(n)}async function oIt(e,t,r){const n=await M0e(e,t,r);return W3t.fromJSON(n)}async function M0e(e,t,r){t=yn(Z3t,t);const n=an(e),i=t.toJSON(),s=As({...n.query,f:"json",...i}),o=$s(s,r),{data:a}=await Xe(n.path+"/measureFromImage",o);return a}function Ch(e){const t=e.toJSON();return e.spatialReference?.imageCoordinateSystem&&(t.spatialReference=EO(e.spatialReference)),t}function EO(e){const{imageCoordinateSystem:t}=e;if(t){const{id:r,referenceServiceName:n}=t;return r!=null?n?{icsid:r,icsns:n}:{icsid:r}:{ics:t}}return e.toJSON()}function O_(e,t){if(!e.imageCoordinateSystem)return md(e);const r=EO(e),{icsid:n,icsns:i}=r;return n==null||i!=null&&!t?.toLowerCase().includes("/"+i.toLowerCase()+"/")?JSON.stringify(r):`0:${n}`}async function aIt(e,t,r){t=yn(E3t,t);const n=an(e),i=t.toJSON();t.outSpatialReference&&(i.outSR=O_(t.outSpatialReference));const s=As({...n.query,f:"json",...i}),o=$s(s,r),{data:a}=await Xe(n.path+"/queryBoundary",o);return T3t.fromJSON(a)}async function lIt(e,t,r){const n=(t=yn(M3t,t)).toJSON();Iz(n),n.objectIds?.length&&(n.objectIds=n.objectIds.join(",")),n.geometry||n.objectIds||n.time||n.where||(n.where="1=1");const i=await cu(t.geometry),s=i?.[0];s!=null&&(n.geometry=Ch(s));const o=s?.spatialReference??t.geometry?.spatialReference;o&&(n.inSR=O_(o));const a=an(e),l=As({...a.query,f:"json",...n}),u=$s(l,r),{data:c}=await Xe(`${a.path}/queryGPSInfo`,u);return R3t.fromJSON(c)}async function uIt(e,t,r){const n=(t=yn(z3t,t)).toJSON();t.geometry.spatialReference.imageCoordinateSystem&&(n.geometry=Ch(t.geometry)),t.depthOffset&&t.adjust||delete n.options;const i=an(e),s=As({...i.query,f:"json",...n}),o=$s(s,r),{data:a}=await Xe(`${i.path}/imageToMap`,o);return An(a)}async function cIt(e,t,r){const n=(t=yn(G3t,t)).toJSON();t.rasterIds?.length&&(n.rasterIds=t.rasterIds.join(","));const i=an(e),s=As({...i.query,f:"json",...n}),o=$s(s,r),{data:a}=await Xe(`${i.path}/imageToMapMultiray`,o);return An(a)}async function hIt(e,t,r){const n=(t=yn(H3t,t)).toJSON(),i=await cu(t.geometry),s=i?.[0];s!=null&&(n.geometry=Ch(s)),t.visibleOnly||delete n.options;const o=s?.spatialReference??t.geometry?.spatialReference;o&&(n.inSR=O_(o));const a=an(e),l=As({...a.query,f:"json",...n}),u=$s(l,r),{data:c}=await Xe(`${a.path}/mapToImage`,u);return An(c)}async function pIt(e,t,r){const n=(t=yn($3t,t)).toJSON(),i=an(e),s=As({...i.query,f:"json",...n}),o=$s(s,r),{data:a}=await Xe(`${i.path}/getImageUrl`,o);return q3t.fromJSON(a)}async function dIt(e,t,r){const n=(t=yn(g3t,t)).toJSON(),i=await cu([t.fromGeometry,t.toGeometry]);i[0]!=null&&(n.fromGeometry=Ch(i[0]),i[0].spatialReference&&(n.inSR=O_(i[0].spatialReference))),i[1]!=null&&(n.toGeometry=Ch(i[1])),t.objectIds?.length&&(n.objectIds=n.objectIds.join(","));const s=an(e),o=As({...s.query,f:"json",...n}),a=$s(o,r),{data:l}=await Xe(`${s.path}/find`,a);return b3t.fromJSON(l)}async function C0e(e,t,r){const n=an(e),{rasterFunction:i,sourceJSON:s}=t||{},o=i?JSON.stringify(i.rasterFunctionDefinition||i):null,a=As({...n.query,renderingRule:o,f:"json"}),l=$s(a,r);e=n.path;const u=s||await Xe(e,l).then(U=>U.data),c=u.hasRasterAttributeTable?Xe(`${e}/rasterAttributeTable`,l):null,h=u.hasColormap?Xe(`${e}/colormap`,l):null,d=u.hasHistograms?Xe(`${e}/histograms`,l):null,m=u.currentVersion>=10.3?Xe(`${e}/keyProperties`,l):null,y=u.hasMultidimensions?Xe(`${e}/multidimensionalInfo`,l):null,g=await Promise.allSettled([c,h,d,m,y]);let b=null;if(u.minValues&&u.minValues.length===u.bandCount){b=[];for(let U=0;U<u.minValues.length;U++)b.push({min:u.minValues[U],max:u.maxValues[U],avg:u.meanValues[U],stddev:u.stdvValues[U]})}const S=jt.fromJSON(u.extent),E=Math.ceil(S.width/u.pixelSizeX-.1),x=Math.ceil(S.height/u.pixelSizeY-.1),w=Ke.fromJSON(u.spatialReference||u.extent.spatialReference),T=g[0].status==="fulfilled"?g[0].value?.data:null,I=T?.features?.length?Qm.fromJSON(T):null,M=g[1].status==="fulfilled"?g[1].value?.data.colormap:null,C=M?.length?M:null,k=g[2].status==="fulfilled"?g[2].value?.data.histograms:null,N=k?.[0]?.counts?.length?k:null,F=g[3].status==="fulfilled"?g[3].value?.data??{}:{},P=g[4].status==="fulfilled"?g[4].value?.data.multidimensionalInfo:null,B=P?.variables?.length?P:null;B&&B.variables.forEach(U=>{U.statistics?.length&&U.statistics.forEach(q=>{q.avg=q.mean,q.stddev=q.standardDeviation})});const{defaultVariable:O,serviceDataType:v}=u;O&&O!==F.DefaultVariable&&(F.DefaultVariable=O),v?.includes("esriImageServiceDataTypeVector")&&!v.includes(F.DataType)&&(F.DataType=v.replace("esriImageServiceDataType",""));let A=u.noDataValue;u.noDataValues?.length&&u.noDataValues.some(U=>U!==A)&&(A=u.noDataValues);const R=u.transposeInfo?new gO({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new it({x:u.extent.xmin,y:u.extent.ymax,spatialReference:w}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(E,x))/Math.LN2-8)),transposeInfo:u.transposeInfo}):void 0;return new m3({width:E,height:x,bandCount:u.bandCount,extent:jt.fromJSON(u.extent),spatialReference:w,pixelSize:new it({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:w}),pixelType:u.pixelType.toLowerCase(),statistics:b,attributeTable:I,colormap:C,histograms:N,keyProperties:F,noDataValue:A,multidimensionalInfo:B,storageInfo:R})}function N7(e,t,r){return C0e(e,{sourceJSON:t},r)}function fIt(e,t,r){return C0e(e,{rasterFunction:t},r)}function k0e(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}async function mIt(e,t,r){const n=an(e),i=As({...n?.query,f:"json"}),s=$s(i,r),o=`${n?.path}/${t}/info`,a=Xe(`${o}`,s),l=Xe(`${o}/keyProperties`,s),u=await Promise.allSettled([a,l]),c=u[0].status==="fulfilled"?u[0].value.data:null,h=u[1].status==="fulfilled"?u[1].value.data:null;let d=null;c.statistics?.length&&(d=c.statistics.map(w=>({min:w[0],max:w[1],avg:w[2],stddev:w[3]})));const m=jt.fromJSON(c.extent),y=Math.ceil(m.width/c.pixelSizeX-.1),g=Math.ceil(m.height/c.pixelSizeY-.1),b=m.spatialReference,S=new it({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:b}),E=c.histograms?.length?c.histograms:null,x=new gO({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new m3({width:y,height:g,bandCount:c.bandCount,extent:m,spatialReference:b,pixelSize:S,pixelType:c.pixelType.toLowerCase(),statistics:d,histograms:E,keyProperties:h,storageInfo:x})}function Az(e){const t={};for(const r in e){if(r==="declaredClass")continue;const n=e[r];if(n!=null&&typeof n!="function")if(Array.isArray(n)){t[r]=[];for(let i=0;i<n.length;i++)t[r][i]=Az(n[i])}else typeof n=="object"?n.toJSON&&(t[r]=JSON.stringify(n)):t[r]=n}return t}var $f;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})($f||($f={}));const RQ=4294967296,yIt=new TextDecoder("utf-8"),gIt=xe("safari")||xe("ios")?6:xe("ff")?12:32;let iC=class g4{constructor(t,r,n=0,i=t?t.byteLength:0){this._tag=0,this._dataType=$f.unknown,this._init(t,r,n,i)}_init(t,r,n,i){this._data=t,this._dataView=r,this._pos=n,this._end=i}asUnsafe(){return this}clone(){return new g4(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,n=t.getUint32(r,!0)+t.getUint32(r+4,!0)*RQ;return this._skip(8),n}getSFixed64(){const t=this._dataView,r=this._pos,n=t.getUint32(r,!0)+t.getInt32(r+4,!0)*RQ;return this._skip(8),n}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,n=this._toString(this._data,r,r+t);return this._skip(t),n}getBytes(){const t=this._getLength(),r=this._pos,n=this._toBytes(this._data,r,r+t);return this._skip(t),n}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,n,i){const s=this.getMessage(),o=t(s,r,n,i);return s.release(),o}processMessage(t){const r=this.getMessage(),n=t(r);return r.release(),n}getMessage(){const t=this._getLength(),r=g4.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){g4.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case $f.varint:this._decodeVarint();break;case $f.fixed64:this._skip(8);break;case $f.delimited:this._skip(this._getLength());break;case $f.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r=this._pos,n=0,i=0;if(this._end-r>=10)do{if(i=t[r++],n|=127&i,!(128&i)||(i=t[r++],n|=(127&i)<<7,!(128&i))||(i=t[r++],n|=(127&i)<<14,!(128&i))||(i=t[r++],n|=(127&i)<<21,!(128&i))||(i=t[r++],n+=268435456*(127&i),!(128&i))||(i=t[r++],n+=34359738368*(127&i),!(128&i))||(i=t[r++],n+=4398046511104*(127&i),!(128&i))||(i=t[r++],n+=562949953421312*(127&i),!(128&i))||(i=t[r++],n+=72057594037927940*(127&i),!(128&i))||(i=t[r++],n+=9223372036854776e3*(127&i),!(128&i)))break;throw new Error("Varint too long!")}while(!1);else{let s=1;for(;r!==this._end&&(i=t[r],128&i);)++r,n+=(127&i)*s,s*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=i*s}return this._pos=r,n}_decodeSVarint(){const t=this._data;let r,n=0,i=0;const s=1&t[this._pos];if(i=t[this._pos++],n|=127&i,!(128&i)||(i=t[this._pos++],n|=(127&i)<<7,!(128&i))||(i=t[this._pos++],n|=(127&i)<<14,!(128&i))||(i=t[this._pos++],n|=(127&i)<<21,!(128&i))||(i=t[this._pos++],n+=268435456*(127&i),!(128&i))||(i=t[this._pos++],n+=34359738368*(127&i),!(128&i))||(i=t[this._pos++],n+=4398046511104*(127&i),!(128&i)))return s?-(n+1)/2:n/2;if(r=BigInt(n),i=t[this._pos++],r+=0x2000000000000n*BigInt(127&i),!(128&i)||(i=t[this._pos++],r+=0x100000000000000n*BigInt(127&i),!(128&i))||(i=t[this._pos++],r+=0x8000000000000000n*BigInt(127&i),!(128&i)))return Number(s?-(r+1n)/2n:r/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==$f.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,n){if((n=Math.min(this._end,n))-r>gIt){const o=t.subarray(r,n);return yIt.decode(o)}let i="",s="";for(let o=r;o<n;++o){const a=t[o];128&a?s+="%"+a.toString(16):(i+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(i+=decodeURIComponent(s)),i}_toBytes(t,r,n){return n=Math.min(this._end,n),new Uint8Array(t.buffer,r,n-r)}};iC.pool=new Td(iC,void 0,e=>{e._data=null,e._dataView=null});const rP=2;let na=class Nv{constructor(t=[],r=[]){this.lengths=t??[],this.coords=r??[]}static fromJSON(t){return new Nv(t.lengths,t.coords)}static fromRect(t){const[r,n,i,s]=t,o=i-r,a=s-n;return new Nv([5],[r,n,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const i=this.lengths[n];for(let s=0;s<i;s++)t(this.coords[rP*(s+r)],this.coords[rP*(s+r)+1]);r+=i}}deltaDecode(){const t=this.clone(),{coords:r,lengths:n}=t;let i=0;for(const s of n){for(let o=1;o<s;o++)r[2*(i+o)]+=r[2*(i+o)-2],r[2*(i+o)+1]+=r[2*(i+o)-1];i+=s}return t}clone(t){if(this.lengths.length===0)return new Nv([],[this.coords[0],this.coords[1]]);const r=(this.lengths.length===0?1:this.lengths.reduce((i,s)=>i+s))*rP,n=this.coords.slice(0,r);return t?(t.set(n),new Nv(this.lengths,t)):new Nv(Array.from(this.lengths),Array.from(n))}},Pm=class v4{constructor(t=null,r={},n,i){this.geometry=t,this.attributes=r,this.centroid=n,this.objectId=i,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,r){const n=t.geometry?na.fromJSON(t.geometry):null,i=t.centroid?na.fromJSON(t.centroid):null,s=t.attributes[r];return new v4(n,t.attributes,i,s)}weakClone(){const t=new v4(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){const t=this.geometry?.clone(),r=new v4(t,{...this.attributes},this.centroid?.clone(),this.objectId);return r.displayId=this.displayId,r.geohashX=this.geohashX,r.geohashY=this.geohashY,r}};function R0e(e){return!!e.geometry?.coords?.length}let Mz=class O0e{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new O0e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const N0e=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let vIt=class{constructor(e){this._options=e,this.geometryTypes=N0e,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Mz}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||gn(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=Rg(this._options.sourceSpatialReference)/Rg(e.spatialReference);if(t!==1)for(const r of e.features){if(!R0e(r))continue;const n=r.geometry.coords;for(let i=2;i<n.length;i+=3)n[i]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new Pm}createSpatialReference(){return{wkid:0}}createGeometry(){return new na}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((t,r)=>t+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new na}};const OQ=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],NQ=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],LQ=["upperLeft","lowerLeft"];function PQ(e){return e>=OQ.length?null:OQ[e]}function bIt(e){return e>=NQ.length?null:NQ[e]}function DQ(e){return e>=LQ.length?null:LQ[e]}function FQ(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function wIt(e,t,r){const n=e.asUnsafe(),i=t.createPointGeometry(r);for(;n.next();)switch(n.tag()){case 3:{const s=n.getUInt32(),o=n.pos()+s;let a=0;for(;n.pos()<o;)t.addCoordinatePoint(i,n.getSInt64(),a++);break}default:n.skip()}return i}function _It(e,t,r){const n=e.asUnsafe(),i=t.createGeometry(r),s=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const o=n.getUInt32(),a=n.pos()+o;let l=0;for(;n.pos()<a;)t.addLength(i,n.getUInt32(),l++);break}case 3:{const o=n.getUInt32(),a=n.pos()+o;let l=0;for(t.allocateCoordinates(i);n.pos()<a;)t.addCoordinate(i,n.getSInt64(),l),l++,l===s&&(l=0);break}default:n.skip()}return i}function xIt(e){const t=e.asUnsafe(),r=new na;let n="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const i=t.getUInt32(),s=t.pos()+i;for(;t.pos()<s;)r.lengths.push(t.getUInt32());break}case 3:{const i=t.getUInt32(),s=t.pos()+i;for(;t.pos()<s;)r.coords.push(t.getSInt64());break}case 1:n=N0e[t.getEnum()];break;default:t.skip()}return{queryGeometry:r,queryGeometryType:n}}function SIt(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function L0e(e){const t=e.asUnsafe(),r={type:PQ(0)};for(;t.next();)switch(t.tag()){case 1:r.name=t.getString();break;case 2:r.type=PQ(t.getEnum());break;case 3:r.alias=t.getString();break;case 4:r.sqlType=bIt(t.getEnum());break;case 5:t.skip();break;case 6:r.defaultValue=t.getString();break;default:t.skip()}return r}function EIt(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.name=r.getString();break;case 2:t.isSystemMaintained=r.getBool();break;default:r.skip()}return t}function TIt(e,t,r,n){const i=t.createFeature(r);let s=0;for(;e.next();)switch(e.tag()){case 1:{const o=n[s++].name;i.attributes[o]=e.processMessage(SIt);break}case 2:i.geometry=e.processMessageWithArgs(_It,t,r);break;case 4:i.centroid=e.processMessageWithArgs(wIt,t,r);break;default:e.skip()}return i}function IIt(e){const t=[1,1,1,1],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function AIt(e){const t=[0,0,0,0],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function P0e(e){const t={originPosition:DQ(0)},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.originPosition=DQ(r.getEnum());break;case 2:t.scale=r.processMessage(IIt);break;case 3:t.translate=r.processMessage(AIt);break;default:r.skip()}return t}function MIt(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.shapeAreaFieldName=r.getString();break;case 2:t.shapeLengthFieldName=r.getString();break;case 3:t.units=r.getString();break;default:r.skip()}return t}function CIt(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function kIt(e,t){const r=t.createFeatureResult(),n=e.asUnsafe();r.geometryType=FQ(t,0);let i=!1;for(;n.next();)switch(n.tag()){case 1:r.objectIdFieldName=n.getString();break;case 3:r.globalIdFieldName=n.getString();break;case 4:r.geohashFieldName=n.getString();break;case 5:r.geometryProperties=n.processMessage(MIt);break;case 7:r.geometryType=FQ(t,n.getEnum());break;case 8:r.spatialReference=n.processMessageWithArgs(CIt,t);break;case 10:r.hasZ=n.getBool();break;case 11:r.hasM=n.getBool();break;case 12:r.transform=n.processMessage(P0e);break;case 9:r.exceededTransferLimit=n.getBool();break;case 13:t.addField(r,n.processMessage(L0e));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,n.processMessageWithArgs(TIt,t,r,r.fields));break;case 2:r.uniqueIdField=n.processMessage(EIt);break;default:n.skip()}return t.finishFeatureResult(r),r}function RIt(e,t){const r={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(xIt);break;case 1:r.featureResult=e.processMessageWithArgs(kIt,t);break;default:e.skip()}return n!=null&&r.featureResult&&t.addQueryGeometry(r,n),r}function OIt(e,t){try{const r=new iC(new Uint8Array(e),new DataView(e)),n={};for(;r.next();)r.tag()===2?n.queryResult=r.processMessageWithArgs(RIt,t):r.skip();return n}catch(r){throw new ie("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function D0e(e,t){const r=OIt(e,t),n=r.queryResult.featureResult,i=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(n&&n.features&&n.features.length&&n.objectIdFieldName){const o=n.objectIdFieldName;for(const a of n.features)a.attributes&&(a.objectId=a.attributes[o])}return n&&(n.queryGeometry=i,n.queryGeometryType=s),n}const jQ="Layer does not support extent calculation.";function NIt(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function LIt(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const i=n;let s,o,a;if(r!=null&&(o=r.spatialReference,a=md(o),i.geometryType=zs(r),i.geometry=NIt(r,e.compactGeometryEnabled),i.inSR=a),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete i.outFields:n.outFields.includes("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?(i.outSR=md(n.outSR),s=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR,s=o),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(i.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&e.quantizationParameters?.extent!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(i.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(i.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(i.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const l=n.timeExtent,{start:u,end:c}=l;u==null&&c==null||(i.time=u===c?u:`${u??"null"},${c??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&s!=null&&o.equals(s)&&(i.defaultSR=i.inSR,delete i.inSR,delete i.outSR),i}async function F0e(e,t,r,n){const i=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await v3(e,t,"json",n);return X5(t,r,i.data),i}async function j0e(e,t,r,n){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const i=await U0e(e,t,n),s=i;return s.data=D0e(i.data,r),s}function U0e(e,t,r){return v3(e,t,"pbf",r)}function PIt(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):v3(e,t,"json",r,{returnIdsOnly:!0})}function B0e(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):v3(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function V0e(e,t,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await v3(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),i=n.data;if(i.hasOwnProperty("extent"))return n;if(i.features)throw new Error(jQ);if(i.hasOwnProperty("count"))throw new Error(jQ);return n}async function v3(e,t,r,n={},i={}){const s=typeof e=="string"?Zn(e):e,o=t.geometry?[t.geometry]:[],a=await cu(o,null,{signal:n.signal}),l=a?.[0];l!=null&&((t=t.clone()).geometry=l);const u=Az({...s.query,f:r,...i,...LIt(t,i)});return Xe(Th(s.path,DIt(t,i)?"query3d":"query"),{...n,responseType:r==="pbf"?"array-buffer":"json",query:{...u,...n.query}})}function DIt(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function G0e(e,t,r){const n=an(e),{data:i}=await B0e(n,ui.from(t),r);return i.count}async function Cz(e,t,r){const n=an(e),{data:i}=await PIt(n,ui.from(t),r);return i.objectIds}async function z0e(e,t,r){const n=await $0e(e,t,r);return Qm.fromJSON(n)}async function $0e(e,t,r){const n=an(e),i={...r},s=ui.from(t),{data:o}=await F0e(n,s,s.sourceSpatialReference,i);return o}const zu=()=>Pe.getLogger("esri.views.2d.engine.flow.dataUtils"),FIt=10;async function q0e(e,t,r,n){const i=performance.now(),s=jIt(t,r),o=performance.now(),a=BIt(t,s,r.width,r.height),l=performance.now(),u=GIt(a),c=performance.now(),h=e==="Streamlines"?zIt(u,FIt):$It(u),d=performance.now();return xe("esri-2d-profiler")&&(zu().info("I.1","_createFlowFieldFromData (ms)",Math.round(o-i)),zu().info("I.2","_getStreamlines (ms)",Math.round(l-o)),zu().info("I.3","createAnimatedLinesData (ms)",Math.round(c-l)),zu().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(d-c)),zu().info("I.5","createFlowMesh (ms)",Math.round(d-i)),zu().info("I.6","Mesh size (bytes)",h.vertexData.buffer.byteLength+h.indexData.buffer.byteLength)),await Promise.resolve(),Gr(n),h}function jIt(e,t){const r=VIt(t.data,t.width,t.height,e.smoothing);return e.interpolate?(n,i)=>{const s=Math.floor(n),o=Math.floor(i);if(s<0||s>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=n-s,l=i-o,u=s,c=o,h=s<t.width-1?s+1:s,d=o<t.height-1?o+1:o,m=r[2*(c*t.width+u)],y=r[2*(c*t.width+h)],g=r[2*(d*t.width+u)],b=r[2*(d*t.width+h)],S=r[2*(c*t.width+u)+1],E=r[2*(c*t.width+h)+1];return[(m*(1-l)+g*l)*(1-a)+(y*(1-l)+b*l)*a,(S*(1-l)+r[2*(d*t.width+u)+1]*l)*(1-a)+(E*(1-l)+r[2*(d*t.width+h)+1]*l)*a]}:(n,i)=>{const s=Math.round(n),o=Math.round(i);return s<0||s>=t.width||o<0||o>=t.height?[0,0]:[r[2*(o*t.width+s)],r[2*(o*t.width+s)+1]]}}function UIt(e,t,r,n,i,s,o,a,l){const u=[];let c=r,h=n,d=0,[m,y]=t(c,h);m*=e.velocityScale,y*=e.velocityScale;const g=Math.sqrt(m*m+y*y);let b,S;u.push({x:c,y:h,t:d,speed:g});for(let E=0;E<e.verticesPerLine;E++){let[x,w]=t(c,h);x*=e.velocityScale,w*=e.velocityScale;const T=Math.sqrt(x*x+w*w);if(T<e.minSpeedThreshold)return u;const I=x/T,M=w/T;if(c+=I*e.segmentLength,h+=M*e.segmentLength,d+=e.segmentLength/T,Math.acos(I*b+M*S)>e.maxTurnAngle)return u;if(e.collisions){const C=Math.round(c*l),k=Math.round(h*l);if(C<0||C>o-1||k<0||k>a-1)return u;const N=s[k*o+C];if(N!==-1&&N!==i)return u;s[k*o+C]=i}u.push({x:c,y:h,t:d,speed:T}),b=I,S=M}return u}function BIt(e,t,r,n){const i=[],s=new rg,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(r*o),l=Math.round(n*o),u=new Int32Array(a*l);for(let h=0;h<u.length;h++)u[h]=-1;const c=[];for(let h=0;h<n;h+=e.lineSpacing)for(let d=0;d<r;d+=e.lineSpacing)c.push({x:d,y:h,sort:s.getFloat()});c.sort((h,d)=>h.sort-d.sort);for(const{x:h,y:d}of c)if(s.getFloat()<e.density){const m=UIt(e,t,h,d,i.length,u,a,l,o);if(m.length<2)continue;i.push(m)}return i}function VIt(e,t,r,n){if(n===0)return e;const i=Math.round(3*n),s=new Array(2*i+1);let o=0;for(let u=-i;u<=i;u++){const c=Math.exp(-u*u/(n*n));s[u+i]=c,o+=c}for(let u=-i;u<=i;u++)s[u+i]/=o;const a=new Float32Array(e.length);for(let u=0;u<r;u++)for(let c=0;c<t;c++){let h=0,d=0;for(let m=-i;m<=i;m++){if(c+m<0||c+m>=t)continue;const y=s[m+i];h+=y*e[2*(u*t+(c+m))],d+=y*e[2*(u*t+(c+m))+1]}a[2*(u*t+c)]=h,a[2*(u*t+c)+1]=d}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let c=0;c<r;c++){let h=0,d=0;for(let m=-i;m<=i;m++){if(c+m<0||c+m>=r)continue;const y=s[m+i];h+=y*a[2*((c+m)*t+u)],d+=y*a[2*((c+m)*t+u)+1]}l[2*(c*t+u)]=h,l[2*(c*t+u)+1]=d}return l}function GIt(e,t){const r=new rg,n=e.reduce((l,u)=>l+u.length,0),i=new Float32Array(4*n),s=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const c of l)i[4*o]=c.x,i[4*o+1]=c.y,i[4*o+2]=c.t,i[4*o+3]=c.speed,o++;s[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:r.getFloat()}}return{lineVertices:i,lineDescriptors:s}}function zIt(e,t){const{lineVertices:r,lineDescriptors:n}=e;let i=0,s=0;for(const d of n)i+=2*d.numberOfVertices,s+=6*(d.numberOfVertices-1);const o=new Float32Array(i*9),a=new Uint32Array(s);let l=0,u=0;function c(){a[u++]=l-2,a[u++]=l,a[u++]=l-1,a[u++]=l,a[u++]=l+1,a[u++]=l-1}function h(d,m,y,g,b,S,E,x){const w=l*9;let T=0;o[w+T++]=d,o[w+T++]=m,o[w+T++]=1,o[w+T++]=y,o[w+T++]=S,o[w+T++]=E,o[w+T++]=g/2,o[w+T++]=b/2,o[w+T++]=x,l++,o[w+T++]=d,o[w+T++]=m,o[w+T++]=-1,o[w+T++]=y,o[w+T++]=S,o[w+T++]=E,o[w+T++]=-g/2,o[w+T++]=-b/2,o[w+T++]=x,l++}for(const d of n){const{totalTime:m,timeSeed:y}=d;let g=null,b=null,S=null,E=null,x=null,w=null;for(let T=0;T<d.numberOfVertices;T++){const I=r[4*(d.startVertex+T)],M=r[4*(d.startVertex+T)+1],C=r[4*(d.startVertex+T)+2],k=r[4*(d.startVertex+T)+3];let N=null,F=null,P=null,B=null;if(T>0){N=I-g,F=M-b;const O=Math.sqrt(N*N+F*F);if(N/=O,F/=O,T>1){let v=N+x,A=F+w;const R=Math.sqrt(v*v+A*A);v/=R,A/=R;const U=Math.min(1/(v*N+A*F),t);v*=U,A*=U,P=-A,B=v}else P=-F,B=N;P!==null&&B!==null&&(h(g,b,S,P,B,m,y,k),c())}g=I,b=M,S=C,x=N,w=F,E=k}h(g,b,S,-w,x,m,y,E)}return{vertexData:o,indexData:a}}function $It(e){const{lineVertices:t,lineDescriptors:r}=e;let n=0,i=0;for(const P of r){const B=P.numberOfVertices-1;n+=4*B*2,i+=6*B*2}const s=new Float32Array(n*16),o=new Uint32Array(i);let a,l,u,c,h,d,m,y,g,b,S,E,x,w,T=0,I=0;function M(){o[I++]=T-8,o[I++]=T-7,o[I++]=T-6,o[I++]=T-7,o[I++]=T-5,o[I++]=T-6,o[I++]=T-4,o[I++]=T-3,o[I++]=T-2,o[I++]=T-3,o[I++]=T-1,o[I++]=T-2}function C(P,B,O,v,A,R,U,q,Q,ee,Y,ue,de,ce){const me=T*16;let Se=0;for(const Oe of[1,2])for(const ye of[1,2,3,4])s[me+Se++]=P,s[me+Se++]=B,s[me+Se++]=O,s[me+Se++]=v,s[me+Se++]=U,s[me+Se++]=q,s[me+Se++]=Q,s[me+Se++]=ee,s[me+Se++]=Oe,s[me+Se++]=ye,s[me+Se++]=de,s[me+Se++]=ce,s[me+Se++]=A/2,s[me+Se++]=R/2,s[me+Se++]=Y/2,s[me+Se++]=ue/2,T++}function k(P,B){let O=g+S,v=b+E;const A=Math.sqrt(O*O+v*v);O/=A,v/=A;const R=g*O+b*v;O/=R,v/=R;let U=S+x,q=E+w;const Q=Math.sqrt(U*U+q*q);U/=Q,q/=Q;const ee=S*U+E*q;U/=ee,q/=ee,C(a,l,u,c,-v,O,h,d,m,y,-q,U,P,B),M()}function N(P,B,O,v,A,R){if(g=S,b=E,S=x,E=w,g==null&&b==null&&(g=S,b=E),h!=null&&d!=null){x=P-h,w=B-d;const U=Math.sqrt(x*x+w*w);x/=U,w/=U}g!=null&&b!=null&&k(A,R),a=h,l=d,u=m,c=y,h=P,d=B,m=O,y=v}function F(P,B){g=S,b=E,S=x,E=w,g==null&&b==null&&(g=S,b=E),g!=null&&b!=null&&k(P,B)}for(const P of r){a=null,l=null,u=null,c=null,h=null,d=null,m=null,y=null,g=null,b=null,S=null,E=null,x=null,w=null;const{totalTime:B,timeSeed:O}=P;for(let v=0;v<P.numberOfVertices;v++)N(t[4*(P.startVertex+v)],t[4*(P.startVertex+v)+1],t[4*(P.startVertex+v)+2],t[4*(P.startVertex+v)+3],B,O);F(B,O)}return{vertexData:s,indexData:o}}function UQ(e,t){const r=t.pixels,{width:n,height:i}=t,s=new Float32Array(n*i*2),o=t.mask||new Uint8Array(n*i*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<n*i;a++)s[2*a]=r[0][a],s[2*a+1]=-r[1][a];else if(e==="vector-magdir")for(let a=0;a<n*i;a++){const l=r[0][a],u=d_(r[1][a]),c=Math.cos(u-Math.PI/2),h=Math.sin(u-Math.PI/2);s[2*a]=c*l,s[2*a+1]=h*l}return{data:s,mask:o,width:n,height:i}}async function qIt(e,t,r,n,i,s){const o=performance.now(),a=Bs(t.spatialReference);if(!a){const w=await BQ(e,t,r,n,i,s);return xe("esri-2d-profiler")&&zu().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),xe("esri-2d-profiler")&&zu().info("I.9","Number of parts",1),w}const[l,u]=a.valid,c=u-l,h=Math.ceil(t.width/c),d=t.width/h,m=Math.round(r/h);let y=t.xmin;const g=[],b=performance.now();for(let w=0;w<h;w++){const T=new jt({xmin:y,xmax:y+d,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});g.push(BQ(e,T,m,n,i,s)),y+=d}const S=await Promise.all(g);xe("esri-2d-profiler")&&zu().info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-b)),xe("esri-2d-profiler")&&zu().info("I.9","Number of parts",S.length);const E={data:new Float32Array(r*n*2),mask:new Uint8Array(r*n),width:r,height:n};let x=0;for(const w of S){for(let T=0;T<w.height;T++)for(let I=0;I<w.width;I++)x+I>=r||(E.data[2*(T*r+x+I)]=w.data[2*(T*w.width+I)],E.data[2*(T*r+x+I)+1]=w.data[2*(T*w.width+I)+1],E.mask[T*r+x+I]=w.mask[T*w.width+I]);x+=w.width}return xe("esri-2d-profiler")&&zu().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),E}async function BQ(e,t,r,n,i,s){const o={requestProjectedLocalDirections:!0,signal:s};if(i!=null&&(o.timeExtent=i),e.type==="imagery"){await e.load({signal:s});const u=e.rasterInfo.dataType,c=await e.fetchImage(t,r,n,o);return c?.pixelData?.pixelBlock==null?{data:new Float32Array(r*n*2),mask:new Uint8Array(r*n),width:r,height:n}:UQ(u,c.pixelData.pixelBlock)}await e.load({signal:s});const a=e.serviceRasterInfo.dataType,l=await e.fetchPixels(t,r,n,o);return l?.pixelBlock==null?{data:new Float32Array(r*n*2),mask:new Uint8Array(r*n),width:r,height:n}:UQ(a,l.pixelBlock)}const HIt=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),WIt=ooe(Ds,{min:0,max:255});function ZIt(e){const t=JSON.stringify(e),r=t.includes('"rasterFunctionDefinition":{'),n=r?t.match(/"type":"(.*?FunctionArguments")/gi):t.match(/"rasterFunction":"(.*?")/gi),i=n?.map(s=>r?s.slice(8,-18):s.slice(18,-1));return i?i.join("/"):null}const JIt=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new ti({layer:this}))}readServiceSupportsMosaicRule(n,i){return this._isMosaicRuleSupported(i)}get _rasterFunctionNamesIndex(){const n=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.length<1||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.forEach(i=>{n.set(i.name.toLowerCase().replaceAll(/ /gi,"_"),i.name)}),n}readBandIds(n,i){if(Array.isArray(n)&&n.length>0&&n.every(s=>typeof s=="number"))return n}readCapabilities(n,i){return this._readCapabilities(i)}writeCompressionQuality(n,i,s){n!=null&&this.format!=="lerc"&&(i[s]=n)}writeCompressionTolerance(n,i,s){this.format==="lerc"&&n!=null&&(i[s]=n)}readDefaultMosaicRule(n,i){return this._serviceSupportsMosaicRule?sl.fromJSON(i):null}get fieldsIndex(){return this.fields?new e3(this.fields):null}set format(n){n&&HIt.has(n.toLowerCase())&&this._set("format",n.toLowerCase())}readFormat(n,i){return i.serviceDataType==="esriImageServiceDataTypeVector-UV"||i.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(n,i){return i.minLOD!=null&&i.maxLOD!=null?n:0}readMaxScale(n,i){return i.minLOD!=null&&i.maxLOD!=null?n:0}set mosaicRule(n){let i=n;i?.mosaicMethod&&(i=sl.fromJSON({...i.toJSON(),mosaicMethod:i.mosaicMethod,mosaicOperation:i.mosaicOperation})),this._set("mosaicRule",i)}readMosaicRule(n,i){const s=n||i.mosaicRule;return s?sl.fromJSON(s):this._isMosaicRuleSupported(i)?sl.fromJSON(i):null}writeMosaicRule(n,i,s){let o=this.mosaicRule;const a=this.definitionExpression;o?a&&a!==o.where&&(o=o.clone(),o.where=a):a&&(o=new sl({where:a})),this._isValidCustomizedMosaicRule(o)&&(i[s]=o.toJSON())}writeNoData(n,i,s){n!=null&&typeof n=="number"&&(i[s]=WIt(n))}readObjectIdField(n,i){return n||(n=i.fields.find(s=>s.type==="esriFieldTypeOID"||s.type==="oid")?.name),n}get parsedUrl(){return Zn(this.url)}readSourceType(n,i){return this._isMosaicDataset(i)?"mosaic-dataset":"raster-dataset"}get renderer(){const{activePresetRendererName:n,presetRenderers:i}=this;return n?i?.find(({name:s})=>s===n)?.renderer.clone():this.internalRenderer}set renderer(n){this.activePresetRendererName=null,this.internalRenderer=n}set internalRenderer(n){this.loaded&&(n=this._configRenderer(n)),this._set("internalRenderer",n)}readRenderer(n,i,s){const o=i?.layerDefinition?.drawingInfo?.renderer,a=Pme(o,s);return a==null?null:(a.type==="vector-field"&&i.symbolTileSize&&!o.symbolTileSize&&(a.symbolTileSize=i.symbolTileSize),Fme(a)||Pe.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a)}writeRenderer(n,i,s){i.layerDefinition=i.layerDefinition||{},i.layerDefinition.drawingInfo=i.layerDefinition.drawingInfo||{},i.layerDefinition.drawingInfo.renderer=n.toJSON(),n.type==="vector-field"&&(i.symbolTileSize=n.symbolTileSize)}get rasterFields(){const n=this._rasterAttributeTableFieldPrefix,i=new xa({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),s=new xa({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new xa({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let a=this.fields?se(this.fields):[];a.push(s),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&a.push(i),this.version>=10.4&&this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.some(u=>u.name.toLowerCase()==="none")&&a.push(o),this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.filter(u=>u.name.toLowerCase()!=="none").forEach(u=>{a.push(new xa({name:"Raster.ServicePixelValue."+u.name,alias:u.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(a.push(new xa({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),a.push(new xa({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:l}=this.rasterInfo??{};if(l!=null){const u=l.fields.filter(c=>c.type!=="esriFieldTypeOID"&&c.name.toLowerCase()!=="value").map(c=>{const h=se(c);return h.name=n+c.name,h});a=a.concat(u)}return a}set rasterFunction(n){let i=n;i?.rasterFunction&&(i=_r.fromJSON({...i.toJSON(),rasterFunction:i.rasterFunction,rasterFunctionArguments:i.rasterFunctionArguments})),this._set("rasterFunction",i)}readRasterFunction(n,i){const s=i.rasterFunctionInfos;return i.renderingRule||s?.length&&s[0].name!=="None"?this._isRFTJson(i.renderingRule)?_r.fromJSON({rasterFunctionDefinition:i.renderingRule}):_r.fromJSON(i.renderingRule||{rasterFunctionInfos:i.rasterFunctionInfos}):null}readSpatialReference(n,i){const s=n||i.extent.spatialReference;return s?Ke.fromJSON(s):null}readPixelType(n){return Ub.fromJSON(n)||n}writePixelType(n,i,s){this.serviceRasterInfo!=null&&this.pixelType===this.serviceRasterInfo.pixelType||(i[s]=Ub.toJSON(n))}readVersion(n,i){let s=i.currentVersion;return s||(s=i.hasOwnProperty("fields")||i.hasOwnProperty("timeInfo")?10:9.3),s}applyFilter(n){let i=n;return this.pixelFilter&&(i=this._clonePixelData(n),this.pixelFilter(i)),i}async applyRenderer(n,i){let s=n;const{renderer:o,symbolizer:a,pixelFilter:l,bandIds:u}=this;if(!this._isPicture()&&o&&a&&!l){const c=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(o.toJSON()),h=this._rasterJobHandler.instance;if(h){c&&(a.bind(),await h.updateSymbolizer(a,i),this._cachedRendererJson=o.toJSON());const d=await h.symbolize({bandIds:u,...n},i);s={extent:n.extent,pixelBlock:d}}else s={extent:n.extent,pixelBlock:a.symbolize({bandIds:u,...n})}}return s}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsComputeAngles)throw new ie("imagery-layer:compute-angles","this operation is not supported on the input image service");return Y3t(this.url,n,this._getRequestOptions(i))}async computePixelSpaceLocations(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsComputePixelLocation)throw new ie("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return X3t(this.url,n,this._getRequestOptions(i))}async computeHistograms(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsComputeHistograms)throw new ie("imagery-layer:compute-histograms","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),K3t(this.url,n,this._getRequestOptions(i))}async computeStatisticsHistograms(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsComputeStatisticsHistograms)throw new ie("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),Q3t(this.url,n,this._getRequestOptions(i))}async measureHeight(n,i){const s=await this._fetchCapabilities(i?.signal);if(!(n.operationType==="base-and-top"?s.mensuration.supportsHeightFromBaseAndTop:n.operationType==="base-and-top-shadow"?s.mensuration.supportsHeightFromBaseAndTopShadow:s.mensuration.supportsHeightFromTopAndTopShadow))throw new ie("imagery-layer:measure-height","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),tIt(this.url,n,this._getRequestOptions(i))}async measureAreaAndPerimeter(n,i){const s=await this._fetchCapabilities(i?.signal);if(!(s.mensuration.supportsAreaAndPerimeter&&(!n.is3D||s.mensuration.supports3D)))throw new ie("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),rIt(this.url,n,this._getRequestOptions(i))}async measureDistanceAndAngle(n,i){const s=await this._fetchCapabilities(i?.signal);if(!(s.mensuration.supportsDistanceAndAngle&&(!n.is3D||s.mensuration.supports3D)))throw new ie("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),iIt(this.url,n,this._getRequestOptions(i))}async measurePointOrCentroid(n,i){const s=await this._fetchCapabilities(i?.signal);if(!(s.mensuration.supportsPointOrCentroid&&(!n.is3D||s.mensuration.supports3D)))throw new ie("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return n=se(n),this._applyMosaicAndRenderingRules(n),nIt(this.url,n,this._getRequestOptions(i))}async measureLengthFromImage(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsMeasureFromImage)throw new ie("imagery-layer:measure-length-from-image","this operation is not supported on the input image service");if(n.geometry.type!=="polyline")throw new ie("imagery-layer:measure-length-from-image","this input geometry must be a polyline");return sIt(this.url,n,this._getRequestOptions(i))}async measureAreaFromImage(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsMeasureFromImage)throw new ie("imagery-layer:measure-area-from-image","this operation is not supported on the input image service");if(n.geometry.type!=="polygon")throw new ie("imagery-layer:measure-area-from-image","this input geometry must be a polygon");return oIt(this.url,n,this._getRequestOptions(i))}getField(n){const{fieldsIndex:i}=this;return i?.get(n)}getFieldDomain(n,i){const s=this.getField(n);return s?s.domain:null}async fetchImage(n,i,s,o={}){if(n==null||i==null||s==null)throw new ie("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const h=await this._generateRasterInfo(this.rasterFunction,{signal:o.signal});h&&(this.rasterInfo=h)}const a=this.getExportImageServiceParameters(n,i,s,o.timeExtent);if(a==null){if(o.requestAsImageElement&&this._canRequestImageElement(this.format)){const S=document.createElement("canvas");return S.width=i,S.height=s,o.returnImageBitmap?{imageBitmap:await rC(S,`${r(this.parsedUrl)}/exportImage`,o.signal)}:{imageOrCanvasElement:S}}const{bandIds:h,rasterInfo:d}=this,m=(h?.length||d.bandCount)??0,y=i*s,g=d.pixelType,b=[];for(let S=0;S<m;S++)b.push(Ht.createEmptyBand(g,y));return{pixelData:{pixelBlock:new Ht({width:i,height:s,pixels:b,mask:new Uint8Array(y),pixelType:g}),extent:n}}}const l=!!o.requestAsImageElement&&!this.pixelFilter,u=l&&!!o.returnImageBitmap,c={imageServiceParameters:a,imageProps:{extent:n,width:i,height:s,format:this.format},requestAsImageElement:l,returnImageBitmap:u,signal:o.signal};return this._requestArrayBuffer(c)}fetchKeyProperties(n){return Xe(r(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?n?.rasterFunction:null})}).then(i=>i.data)}fetchRasterAttributeTable(n){return this.version<10.1?Promise.reject(new ie("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Xe(r(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?n?.rasterFunction:null})}).then(i=>Qm.fromJSON(i.data))}getCatalogItemRasterInfo(n,i){const s={...i,query:this._getQueryParams()};return mIt(r(this.parsedUrl),n,s)}async getCatalogItemICSInfo(n,i){const{data:s}=await Xe(r(this.parsedUrl)+"/"+n+"/info/ics",{query:this._getQueryParams(),...i}),o=s?.ics;if(!o)return;let a=null;try{a=(await Xe(r(this.parsedUrl)+"/"+n+"/info",{query:this._getQueryParams(),...i})).data.extent}catch{}if(!a?.spatialReference)return{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null};const l=this.version>=10.7?Xe(r(this.parsedUrl)+"/"+n+"/info/icstopixel",{query:this._getQueryParams(),...i}).then(A=>A.data).catch(()=>({})):{},u=a.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[a]}),inSR:md(u),outSR:"0:"+n},h=Xe(r(this.parsedUrl)+"/project",{query:this._getQueryParams(c),...i}).then(A=>A.data).catch(()=>({})),d=5,m=(a.xmin+a.xmax)/2,y=(a.ymax-a.ymin)/(d+1),g=a.ymin+y,b=[];for(let A=0;A<d;A++)b.push({x:m,y:g+y*A});const S={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:b}),inSR:md(u),outSR:"0:"+n},E=Xe(r(this.parsedUrl)+"/project",{query:this._getQueryParams(S),...i}).then(A=>A.data).catch(()=>({})),x=await Promise.all([l,h,E]);let w=x[0].ipxf;if(w==null){const A=o.geodataXform?.xf_0;A?.name?.toLowerCase()==="topup"&&A?.coefficients?.length===6&&(w={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:A.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const T=jt.fromJSON(x[1]?.geometries?.[0]);T&&(T.spatialReference=new Ke({wkid:0,imageCoordinateSystem:o}));const I=x[2].geometries?x[2].geometries.filter(A=>A?.x!=null&&A.y!=null&&A.x!=="NaN"&&A.y!=="NaN"):[],M=I.length;if(M<3)return{ics:o,icsToPixelTransform:w,icsExtent:T,northDirection:null};let C=0,k=0,N=0,F=0;for(let A=0;A<M;A++)C+=I[A].x,k+=I[A].y,N+=I[A].x*I[A].x,F+=I[A].x*I[A].y;const P=(M*F-C*k)/(M*N-C*C);let B=0;const O=I[d-1].x>I[0].x,v=I[d-1].y>I[0].y;return P===1/0?B=v?90:270:P===0?B=O?0:180:P>0?B=O?180*Math.atan(P)/Math.PI:180*Math.atan(P)/Math.PI+180:P<0&&(B=v?180+180*Math.atan(P)/Math.PI:360+180*Math.atan(P)/Math.PI),{ics:o,icsToPixelTransform:w,icsExtent:T,northDirection:B}}async generateRasterInfo(n,i){n=yn(_r,n);const s={...i,query:this._getQueryParams()};if(!n||n.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(n))return this.serviceRasterInfo??N7(r(this.parsedUrl),this.sourceJSON,s);const o=ZIt(n);if(!o)throw new ie("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[o])return this._functionRasterInfos[o];const a=fIt(r(this.parsedUrl),n,s);this._functionRasterInfos[o]=a;try{return await a}catch(l){throw this._functionRasterInfos[o]=null,l}}getExportImageServiceParameters(n,i,s,o){n=n.clone().shiftCentralMeridian();const a=O_(n.spatialReference,r(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const l=this.exportImageServiceParameters.toJSON(),{bandIds:u,noData:c}=l;let{renderingRule:h}=l;const d=this.rasterFunction?.rasterFunctionDefinition,m=this.renderer?.type,y=!m||m==="raster-stretch"||m==="raster-colormap"||m==="unique-value"||m==="class-breaks"||m==="raster-shaded-relief";if(u?.length&&this._hasRasterFunction(this.rasterFunction)&&!d&&y){const S={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:u}};if(h.rasterFunction==="Stretch")S.rasterFunctionArguments.Raster=h.rasterFunctionArguments.Raster,h.rasterFunctionArguments.Raster=S;else if(h.rasterFunction==="Colormap"){const E=h.rasterFunctionArguments.Raster;E?.rasterFunction==="Stretch"?(S.rasterFunctionArguments.Raster=E.rasterFunctionArguments.Raster,E.rasterFunctionArguments.Raster=S):(S.rasterFunctionArguments.Raster=E,h.rasterFunctionArguments.Raster=S)}else S.rasterFunctionArguments.Raster=h,h=S;l.bandIds=void 0}else l.bandIds=u?.join(",");Array.isArray(c)&&c.length>0&&(l.noData=c.join(","));const g=this._processMultidimensionalIntersection(null,o,this.exportImageServiceParameters.mosaicRule);if(g.isOutSide)return null;l.mosaicRule=g.mosaicRule!=null?JSON.stringify(g.mosaicRule):null,o=g.timeExtent,l.renderingRule=this._getRenderingRuleString(_r.fromJSON(h));const b={};if(o!=null){const{start:S,end:E}=o.toJSON();S&&E&&S===E?b.time=""+S:S==null&&E==null||(b.time=`${S??"null"},${E??"null"}`)}return{bbox:n.xmin+","+n.ymin+","+n.xmax+","+n.ymax,bboxSR:a,imageSR:a,size:i+","+s,...l,...b}}async getSamples(n,i){if(!(await this._fetchCapabilities(i?.signal))?.operations.supportsGetSamples)throw new ie("imagery-layer:get-samples","getSamples operation is not supported on the input image service");n=se(n);const{raster:s}=this;return s&&n.raster==null&&(n.raster=s),eIt(this.url,n,this._getRequestOptions(i))}async identify(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsIdentify)throw new ie("imagery-layer:identify","identify operation is not supported on the input image service");n=se(n),this.version<10.91&&n.geometry?.type==="extent"&&(n.geometry=ts.fromExtent(n.geometry));const s=this._processMultidimensionalIntersection(n.geometry,n.timeExtent,n.mosaicRule||this.mosaicRule);if(s.isOutSide)throw new ie("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");n.timeExtent=s.timeExtent,n.mosaicRule=s.mosaicRule;const{raster:o,rasterFunction:a}=this;return a&&n.rasterFunction==null&&(n.rasterFunction=a),o&&n.raster==null&&(n.raster=o),kQ(this.url,n,this._getRequestOptions(i))}async imageToMap(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsImageToMap)throw new ie("imagery-layer:image-to-map","imageToMap operation is not supported on the input image service");return uIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async imageToMapMultiray(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsImageToMapMultiray)throw new ie("imagery-layer:image-to-map-multiray","imageToMapMultiray operation is not supported on the input image service");return cIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async mapToImage(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsMapToImage)throw new ie("imagery-layer:map-to-image","mapToImage operation is not supported on the input image service");return hIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async findImages(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsFindImages)throw new ie("imagery-layer:find-images","findImages operation is not supported on the input image service");return dIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async getImageUrl(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsGetImageUrl)throw new ie("imagery-layer:get-image-url","getImageUrl operation is not supported on the input image service");return pIt(r(this.parsedUrl),n,this._getRequestOptions(i))}createQuery(){return new ui({outFields:["*"],returnGeometry:!0,where:this.definitionExpression||"1=1"})}async queryBoundary(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsQueryBoundary)throw new ie("imagery-layer:query-boundary","queryBoundary operation is not supported on the input image service");return n=n??{outSpatialReference:this.spatialReference},aIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async queryRasters(n,i){return{query:n,requestOptions:i}=await this._prepareForQuery(n,i),z0e(this.url,n,i)}async queryObjectIds(n,i){return{query:n,requestOptions:i}=await this._prepareForQuery(n,i),Cz(this.url,n,i)}async queryGPSInfo(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsQueryGPSInfo)throw new ie("imagery-layer:query-gps-info","queryGPSInfo operation is not supported on the input image service");return n=n??{where:"1=1"},lIt(r(this.parsedUrl),n,this._getRequestOptions(i))}async queryRasterCount(n,i){return{query:n,requestOptions:i}=await this._prepareForQuery(n,i),G0e(this.url,n,i)}async queryVisibleRasters(n,i){if(!n)throw new ie("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:s,returnDomainValues:o,returnTopmostRaster:a,showNoDataRecords:l}=i||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let u=!1,c=null,h=null;const d="raster.servicepixelvalue",m=this._rasterFunctionNamesIndex;if(n.outFields!=null&&(u=n.outFields.some(T=>!T.toLowerCase().includes(d)),this.version>=10.4)){const T=n.outFields.filter(M=>M.toLowerCase().includes(d)&&M.length>d.length).map(M=>{const C=M.slice(d.length+1);return[this._updateRenderingRulesFunctionName(C,m),C]});c=T.map(M=>new _r({functionName:M[0]})),h=T.map(M=>M[1]);const{rasterFunction:I}=this;c.length===0?I?.functionName?(c.push(I),h.push(I.functionName)):c=null:I?.functionName&&!c.some(M=>M.functionName===I.functionName)&&(c.push(I),h.push(I.functionName))}const y=n.outSpatialReference==null||n.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:g}=this;let b=n.timeExtent||this.timeExtent;if(g){const{isOutside:T,intersection:I}=QL(g,{geometry:n.geometry,timeExtent:n.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(T)throw new ie("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");I?.timeExtent!=null&&(b=I.timeExtent)}const S=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,b);let E=n.geometry;this.version<10.91&&E?.type==="extent"&&(E=ts.fromExtent(E));const x=this._getQueryParams({geometry:E,timeExtent:b,mosaicRule:S,rasterFunction:this.version<10.4?this.rasterFunction:null,rasterFunctions:c,pixelSize:s,returnCatalogItems:u,returnGeometry:y,raster:this.raster,maxItemCount:a?1:null});delete x.f;const w=new I0e(x);try{await this._generateRasterInfo(this.rasterFunction);const T=await kQ(this.url,w,{signal:i?.signal,query:{...this.customParameters}}),I=n.outFields,M=T.value!=null&&T.value.toLowerCase().includes("nodata");if(!(u&&!y&&T?.catalogItems?.features.length&&(l||!M)))return this._processVisibleRastersResponse(T,{returnDomainValues:o,templateRRFunctionNames:h,showNoDataRecords:l,templateFields:I});const C=this.objectIdField||"ObjectId",k=T.catalogItems?.features??[],N=k.map(B=>B.attributes?.[C]),F=new ui({objectIds:N,returnGeometry:!0,outSpatialReference:n.outSpatialReference,outFields:[C]}),P=await this.queryRasters(F);return P?.features?.length&&P.features.forEach(B=>{k.forEach(O=>{O.attributes[C]===B.attributes[C]&&B.geometry&&(O.geometry=B.geometry.clone(),n.outSpatialReference!=null&&(O.geometry.spatialReference=n.outSpatialReference))})}),this._processVisibleRastersResponse(T,{returnDomainValues:o,templateRRFunctionNames:h,showNoDataRecords:l,templateFields:I})}catch{throw new ie("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(n,i){const s=Xe(r(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:n}),signal:i}).then(l=>l.data?.statistics),o=Xe(r(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:n}),signal:i}).then(l=>l.data?.histograms),a=await Promise.all([s,o]);return a[0]&&a[0].forEach(l=>{l.avg=l.mean,l.stddev=l.standardDeviation}),{statistics:a[0]||null,histograms:a[1]||null}}async createFlowMesh(n,i){const s=this._rasterJobHandler.instance;return s?s.createFlowMesh(n,i):q0e(n.meshType,n.simulationSettings,n.flowData,i.signal!=null?i.signal:new AbortController().signal)}getMultidimensionalSubsetVariables(n){const i=n??this.serviceRasterInfo.multidimensionalInfo;return Jme(this.multidimensionalSubset,i)}async _fetchService(n){await this._fetchServiceInfo(n),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const i=this.sourceJSON,s=this.serviceRasterInfo!=null?Promise.resolve(this.serviceRasterInfo):N7(r(this.parsedUrl),i,{signal:n,query:this._getQueryParams()}).then(l=>(this._set("serviceRasterInfo",l),this._set("multidimensionalInfo",l.multidimensionalInfo),k0e(l,i),l)),o=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:n}):null,a=this._getRasterFunctionInfos();return Promise.all([s,o,a]).then(l=>{l[1]?this._set("rasterInfo",l[1]):this._set("rasterInfo",l[0]),l[2]&&this._set("rasterFunctionInfos",l[2]),this.internalRenderer&&!this._isSupportedRenderer(this.internalRenderer)&&(this._set("internalRenderer",null),Pe.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("internalRenderer",this._configRenderer(this.renderer)),this.addHandles([Et(()=>this.rasterFunction,c=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(c).then(h=>{h&&(this.rasterInfo=h)})})]);const{serviceRasterInfo:u}=this;u.multidimensionalInfo!=null&&this._updateMultidimensionalDefinition(u)})}_combineMosaicRuleWithTimeExtent(n,i){const s=this.timeInfo,{multidimensionalInfo:o}=this.serviceRasterInfo;if(n==null||o==null||i==null||s?.startField==null)return n;const{startField:a}=s,l=o.variables.some(g=>g.dimensions.some(b=>b.name===a))?a:"StdTime";if(n=n.clone(),this.sourceType==="mosaic-dataset")return n.multidimensionalDefinition=n.multidimensionalDefinition?.filter(g=>g.dimensionName!==l),this._cleanupMultidimensionalDefinition(n);n.multidimensionalDefinition=n.multidimensionalDefinition||[];const u=n.multidimensionalDefinition.filter(g=>g.dimensionName===l),c=i.start!=null?i.start.getTime():null,h=i.end!=null?i.end.getTime():null,d=c==null||h==null||c===h,m=d?[c||h]:[[c,h]],y=this.version>=10.8;if(u.length)u.forEach(g=>{g.dimensionName===l&&(y?(g.dimensionName=null,g.isSlice=!1,g.values=[]):(g.isSlice=d,g.values=m))});else if(!y){const g=n.multidimensionalDefinition.filter(b=>b.variableName!=null&&b.dimensionName==null);g.length?g.forEach(b=>{b.dimensionName=l,b.isSlice=d,b.values=m}):n.multidimensionalDefinition.push(new Gg({variableName:"",dimensionName:l,isSlice:d,values:m}))}return this._cleanupMultidimensionalDefinition(n)}_cleanupMultidimensionalDefinition(n){return n==null?null:(n.multidimensionalDefinition&&(n.multidimensionalDefinition=n.multidimensionalDefinition.filter(i=>!(!i.variableName&&!i.dimensionName)),n.multidimensionalDefinition.length===0&&(n.multidimensionalDefinition=null)),this.sourceType!=="mosaic-dataset"&&n.multidimensionalDefinition==null?null:n)}async _prepareForQuery(n,i){if(!(await this._fetchCapabilities(i?.signal)).operations.supportsQuery)throw new ie("imagery-layer:query-rasters","query operation is not supported on the input image service");return n=n!=null?yn(ui,n):this.createQuery(),i=this._getRequestOptions(i),this.raster&&(i.query={...i.query,raster:this.raster}),{query:n,requestOptions:i}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const n=new Gme;this._rasterJobHandler.connectionPromise=n.initialize().then(()=>{this._rasterJobHandler.instance=n},()=>{}),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(n){const{rasterInfo:i,rasterFunction:s}=this;return n.type==="unique-value"&&this._hasRasterFunction(s)&&i?.bandCount===1&&["u8","s8"].includes(i.pixelType)||i!=null&&n!=null&&WTt(i).includes(n.type)}async _fetchCapabilities(n){return this.capabilities||await this._fetchServiceInfo(n),this.capabilities}async _fetchServiceInfo(n){let i=this.sourceJSON;if(!i){const{data:s,ssl:o}=await Xe(r(this.parsedUrl),{query:this._getQueryParams(),signal:n});i=s,this.sourceJSON=i,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(i.capabilities?.toLowerCase().split(",").map(s=>s.trim()).indexOf("tilesonly")>-1)throw new ie("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(i,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(n){return n.serviceSourceType?n.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":n.fields?.length>0}_isMosaicRuleSupported(n){if(!n)return!1;const i=this._isMosaicDataset(n),s=n.currentVersion>=10.71&&n.hasMultidimensions&&!(n.fields?.length>1);return i||s}_isVectorFieldResampleFunction(n){if(n==null)return!1;const{functionName:i,functionArguments:s}=n,o=i?.toLowerCase()==="resample",a=s?.ResampleType||s?.resampleType;return o&&(a===7||a===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(n){const i=this._isPicture(),{rasterInfo:s}=this;if(!i&&!this.pixelFilter||this._isVectorDataSet()){const o=this.mosaicRule?.multidimensionalDefinition?.[0].variableName,a=d0e({variableName:o,rasterFunctionName:this.rasterFunction?.functionName,presetRenderers:this.presetRenderers});if(!this.bandIds&&s.bandCount>=3){const u=a?.bandIds??Sz(s);!u||s.bandCount===3&&u[0]===0&&u[1]===1&&u[2]===2||(this.bandIds=u)}n||(n=a?.renderer??f0e(s,{bandIds:this.bandIds,variableName:this.rasterFunction?null:o}));const l=g0e(n.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=l,this.symbolizer.rasterInfo=s):this.symbolizer=new S0e({rendererJSON:l,rasterInfo:s}),this.symbolizer.bind().success||(this.symbolizer=null)}return n}_clonePixelData(n){return n==null?n:{extent:n.extent&&n.extent.clone(),pixelBlock:n.pixelBlock!=null?n.pixelBlock.clone():null}}_getQueryParams(n){n?.renderingRule!=null&&typeof n.renderingRule!="string"&&(n.renderingRule=this._getRenderingRuleString(n.renderingRule));const{raster:i,viewId:s}=this;return{raster:i,viewId:s,f:"json",...n,...this.customParameters}}_getRequestOptions(n){return{...n,query:{...n?.query,...this.customParameters}}}_decodePixelBlock(n,i,s){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:n,options:i}):_7(n,i,s)}async _getRasterFunctionInfos(n){const i=this.sourceJSON.rasterFunctionInfos;return this.loaded?i:i&&this.version>=10.3?i.length===1&&i[0].name.toLowerCase()==="none"?i:(await Xe(r(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:n})).data?.rasterFunctionInfos:null}_canRequestImageElement(n){return!this.pixelFilter&&(!n||n.includes("png"))}async _requestArrayBuffer(n){const{imageProps:i,requestAsImageElement:s,returnImageBitmap:o,signal:a}=n;if(s&&this._canRequestImageElement(i.format)){const y=`${r(this.parsedUrl)}/exportImage`,{data:g}=await Xe(y,{responseType:o?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...n.imageServiceParameters}),signal:a});return g instanceof Blob?{imageBitmap:await rC(g,y,a),params:i}:{imageOrCanvasElement:g,params:i}}const l=this._initJobHandler(),u=Xe(r(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...n.imageServiceParameters}),signal:a}),c=(await Promise.all([u,l]))[0].data,h=i.format||"jpgpng";let d=h;if(d!=="bsq"&&d!=="bip"&&(d=c0e(c)),!d)throw new ie("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(c)));const m={signal:a};return{pixelData:{pixelBlock:await(h==="gif"||h==="bmp"||h.includes("png")&&(d==="png"||d==="jpg")?_7(c,{useCanvas:!0,...i},m):this._decodePixelBlock(c,{width:i.width,height:i.height,planes:null,pixelType:null,noDataValue:null,format:h},m)),extent:i.extent},params:i}}_generateRasterInfo(n,i){return this.generateRasterInfo(n,i).catch(()=>null)}_isValidCustomizedMosaicRule(n){return n&&JSON.stringify(n.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(n){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let i=Zme(n,{multidimensionalSubset:this.multidimensionalSubset});if(i!=null&&i.length>0){this.mosaicRule=this.mosaicRule||new sl;const s=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&this.rasterFunction.functionName?.toLowerCase()!=="none"&&i.forEach(o=>o.variableName=""),i=i.filter(({variableName:o,dimensionName:a})=>o&&o!=="*"||a),!s?.length&&i.length&&(this.mosaicRule.multidimensionalDefinition=i)}}_processVisibleRastersResponse(n,i){i=i||{};const s=n.value,{templateRRFunctionNames:o,showNoDataRecords:a,returnDomainValues:l,templateFields:u}=i,c=n.processedValues;let h=n.catalogItems?.features,d=n.properties?.Values?.map(x=>x.replaceAll(/ /gi,", "))||[];const m=this.objectIdField||"ObjectId",y=typeof s=="string"&&s.toLowerCase().includes("nodata"),g=[];if(s&&!h&&!y){const x={};x[m]=0,d=[s],h=[new dl({geometry:this.fullExtent,attributes:x})]}if(!h)return[];let b,S,E;this._updateResponseFieldNames(h,u),y&&!a&&(h=[]);for(let x=0;x<h.length;x++){if(b=h[x],s!=null){if(S=d[x],E=this.rasterFunction&&c&&c.length>0&&o&&o.length>0&&o.includes(this.rasterFunction.functionName)?c[o.indexOf(this.rasterFunction.functionName)]:s,S.toLowerCase()==="nodata"&&!a)continue;const w="Raster.ItemPixelValue",T="Raster.ServicePixelValue";b.attributes[w]=S,b.attributes[T]=E,this._updateFeatureWithMagDirValues(b,S);const I=this.fields&&this.fields.length>0;let M=this.rasterFunction&&this.serviceRasterInfo.attributeTable!=null?I?S:s:E;this.rasterFunction||(M=I?S:s),this._updateFeatureWithRasterAttributeTableValues(b,M)}if(b.sourceLayer=b.layer=this,l&&this._updateFeatureWithDomainValues(b),o&&c&&o.length===c.length)for(let w=0;w<o.length;w++){const T="Raster.ServicePixelValue."+o[w];b.attributes[T]=c[w]}g.push(h[x])}return g}_processMultidimensionalIntersection(n,i,s){const{multidimensionalSubset:o}=this;if(!o)return{isOutSide:!1,timeExtent:i,mosaicRule:s=this._combineMosaicRuleWithTimeExtent(s,i)};if(o){const{isOutside:a,intersection:l}=QL(o,{geometry:n,timeExtent:i});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null};l?.timeExtent!=null&&(i=l.timeExtent)}if(s=this._combineMosaicRuleWithTimeExtent(s,i),s?.multidimensionalDefinition){const{isOutside:a}=QL(o,{multidimensionalDefinition:s.multidimensionalDefinition});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:i,mosaicRule:s}}_updateFeatureWithRasterAttributeTableValues(n,i){const s=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(s==null)return;const{features:o,fields:a}=s,l=a.map(c=>c.name).find(c=>c.toLowerCase()==="value");if(!l)return;const u=o.filter(c=>c.attributes[l]===(i!=null?parseInt(i,10):null));u&&u[0]&&a.forEach(c=>{const h=this._rasterAttributeTableFieldPrefix+c.name;n.attributes[h]=u[0].attributes[c.name]})}_updateFeatureWithMagDirValues(n,i){if(!this._isVectorDataSet())return;const s=i.split(/,\s*/).map(c=>parseFloat(c)),o=s.map(c=>[c]),a=s.map(c=>({minValue:c,maxValue:c,noDataValue:null})),l=new Ht({height:1,width:1,pixelType:"f32",pixels:o,statistics:a});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:l,extent:new jt(0,0,0,0,this.spatialReference)});const u=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[l.pixels[0][0],l.pixels[1][0]]:yO([l.pixels[0][0],l.pixels[1][0]]);n.attributes["Raster.Magnitude"]=u[0],n.attributes["Raster.Direction"]=u[1]}_updateFeatureWithDomainValues(n){(this.fields&&this.fields.filter(i=>i.domain&&i.domain.type==="coded-value"))?.forEach(i=>{const s=n.attributes[i.name];if(s!=null){const o=i.domain.codedValues.find(a=>a.code===s);o&&(n.attributes[i.name]=o.name)}})}_updateResponseFieldNames(n,i){if(!i||i.length<1)return;const s=this.fieldsIndex;s!=null&&n.forEach(o=>{if(o?.attributes)for(const a of i){const l=s.get(a)?.name;l&&l!==a&&(o.attributes[a]=o.attributes[l],delete o.attributes[l])}})}_getRenderingRuleString(n){if(n){let i=n.toJSON();return i=i.rasterFunctionDefinition??i,(i.thumbnail||i.thumbnailEx)&&(i.thumbnail=i.thumbnailEx=null),JSON.stringify(i)}return null}_hasRasterFunction(n){return n?.functionName!=null&&n.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(n,i){if(!n||n.length<1)return;if(n==="Raw")return n.replace("Raw","None");const s=n.toLowerCase().replaceAll(/ /gi,"_");return i.has(s)?i.get(s):n}_isRFTJson(n){return n?.name&&n.arguments&&n.function&&n.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_applyMosaicAndRenderingRules(n){const{raster:i,mosaicRule:s,rasterFunction:o}=this;o&&"rasterFunction"in n&&n.rasterFunction==null&&(n.rasterFunction=o),s&&n.mosaicRule==null&&(n.mosaicRule=s),i&&n.raster==null&&(n.raster=i)}_readCapabilities(n){const i=n.capabilities?n.capabilities.toLowerCase().split(",").map(S=>S.trim()):["image","catalog"],{currentVersion:s,advancedQueryCapabilities:o,maxRecordCount:a}=n,l=i.includes("image"),u=n.serviceDataType==="esriImageServiceDataTypeElevation",c=!(!n.spatialReference&&!n.extent?.spatialReference),h=i.includes("edit"),d=i.includes("mensuration")&&c,m=n.mensurationCapabilities==null?[]:n.mensurationCapabilities.toLowerCase().split(",").map(S=>S.trim()),y=d&&m.includes("basic"),g=this._isMosaicDataset(n)&&i.includes("catalog"),b=i.includes("download");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:l,supportsExportImage:l,supportsIdentify:l,supportsImageToMap:s>=11.2&&g,supportsImageToMapMultiray:s>=11.2&&g,supportsMapToImage:s>=11.2&&g,supportsFindImages:s>=11.2&&g,supportsGetImageUrl:s>=11.3&&b,supportsMeasure:d,supportsMeasureFromImage:s>=11.2,supportsDownload:b,supportsQuery:g&&n.fields&&n.fields.length>0,supportsGetSamples:s>=10.2&&l,supportsProject:s>=10.3&&l,supportsComputeStatisticsHistograms:s>=10.4&&l,supportsQueryBoundary:s>=10.6&&l,supportsCalculateVolume:s>=10.7&&u,supportsComputePixelLocation:s>=10.7&&g,supportsComputeAngles:s>=10.91,supportsQueryGPSInfo:s>=11.2&&g,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsUpdate:h,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!!o?.supportsStatistics,supportsOrderBy:!!o?.supportsOrderBy,supportsDistinct:!!o?.supportsDistinct,supportsPagination:!!o?.supportsPagination,supportsStandardizedQueriesOnly:!!o?.useStandardizedQueries,supportsPercentileStatistics:!!o?.supportsPercentileStatistics,supportsCentroid:!!o?.supportsReturningGeometryCentroid,supportsDistance:!!o?.supportsQueryWithDistance,supportsExtent:!!o?.supportsReturningQueryExtent,supportsGeometryProperties:!!o?.supportsReturningGeometryProperties,supportsHavingClause:!!o?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!o?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:y,supportsAreaAndPerimeter:y,supportsPointOrCentroid:y,supportsHeightFromBaseAndTop:d&&m.includes("base-top height"),supportsHeightFromBaseAndTopShadow:d&&m.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:d&&m.includes("top-top shadow height"),supports3D:d&&m.includes("3d")}}}};function r(n){return n?.path??""}return p([f({clonable:!1})],t.prototype,"_functionRasterInfos",void 0),p([f({clonable:!1})],t.prototype,"_rasterJobHandler",void 0),p([f({clonable:!1})],t.prototype,"_cachedRendererJson",void 0),p([f({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),p([Ee("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),p([f({readOnly:!0})],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),p([f({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),p([f()],t.prototype,"adjustAspectRatio",void 0),p([f({type:[Ft],json:{write:!0}})],t.prototype,"bandIds",void 0),p([Ee("bandIds")],t.prototype,"readBandIds",null),p([f({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),p([Ee("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),p([f({type:Number})],t.prototype,"compressionQuality",void 0),p([Re("compressionQuality")],t.prototype,"writeCompressionQuality",null),p([f({type:Number})],t.prototype,"compressionTolerance",void 0),p([Re("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),p([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),p([f({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),p([Ee("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),p([f({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),p([f({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),p([f()],t.prototype,"rasterInfo",void 0),p([f({readOnly:!0,type:[xa]})],t.prototype,"fields",void 0),p([f({readOnly:!0})],t.prototype,"fieldsIndex",null),p([f({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff","bip","bsq"],json:{write:!0}})],t.prototype,"format",null),p([Ee("service","format",["serviceDataType"])],t.prototype,"readFormat",null),p([f({type:jt})],t.prototype,"fullExtent",void 0),p([f({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),p([f({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),p([f({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),p([f({type:String,json:{type:od.jsonValues,read:od.read,write:od.write}})],t.prototype,"interpolation",void 0),p([f()],t.prototype,"minScale",void 0),p([Ee("service","minScale")],t.prototype,"readMinScale",null),p([f()],t.prototype,"maxScale",void 0),p([Ee("service","maxScale")],t.prototype,"readMaxScale",null),p([f({type:sl})],t.prototype,"mosaicRule",null),p([Ee("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),p([Re("mosaicRule")],t.prototype,"writeMosaicRule",null),p([f()],t.prototype,"multidimensionalInfo",void 0),p([f({type:Vme,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),p([f({json:{type:Ft}})],t.prototype,"noData",void 0),p([Re("noData")],t.prototype,"writeNoData",null),p([f({type:String,json:{type:FS.jsonValues,read:FS.read,write:FS.write}})],t.prototype,"noDataInterpretation",void 0),p([f({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),p([Ee("objectIdField")],t.prototype,"readObjectIdField",null),p([f({readOnly:!0})],t.prototype,"geometryType",void 0),p([f({})],t.prototype,"typeIdField",void 0),p([f({})],t.prototype,"types",void 0),p([f({readOnly:!0})],t.prototype,"parsedUrl",null),p([f({type:Function})],t.prototype,"pixelFilter",void 0),p([f()],t.prototype,"raster",void 0),p([f({readOnly:!0})],t.prototype,"sourceType",void 0),p([Ee("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),p([f()],t.prototype,"viewId",void 0),p([f()],t.prototype,"renderer",null),p([f({types:FE,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:jE,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:n=>({enabled:n&&n.type!=="vector-field"&&n.type!=="flow"})}}}}})],t.prototype,"internalRenderer",null),p([Ee("internalRenderer")],t.prototype,"readRenderer",null),p([Re("internalRenderer")],t.prototype,"writeRenderer",null),p([f({clonable:!1})],t.prototype,"symbolizer",void 0),p([f(NE)],t.prototype,"opacity",void 0),p([f({readOnly:!0})],t.prototype,"rasterFields",null),p([f({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),p([f({type:_r,json:{name:"renderingRule"}})],t.prototype,"rasterFunction",null),p([Ee("rasterFunction",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRasterFunction",null),p([f({readOnly:!0})],t.prototype,"serviceDataType",void 0),p([f({readOnly:!0,type:Ke})],t.prototype,"spatialReference",void 0),p([Ee("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),p([f({json:{type:Ub.jsonValues}})],t.prototype,"pixelType",void 0),p([Ee("pixelType")],t.prototype,"readPixelType",null),p([Re("pixelType")],t.prototype,"writePixelType",null),p([f({constructOnly:!0,type:m3})],t.prototype,"serviceRasterInfo",void 0),p([f()],t.prototype,"sourceJSON",void 0),p([f(M_)],t.prototype,"url",void 0),p([f({readOnly:!0})],t.prototype,"version",void 0),p([Ee("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=p([W("esri.layers.mixins.ArcGISImageService")],t),t};let Af=class extends rr(we){constructor(e){super(e),this.name=void 0,this.method="none",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};p([f({type:String,json:{write:!0}})],Af.prototype,"name",void 0),p([f({type:["raster-function-template","variable","none"],json:{write:!0}}),tt({rasterFunctionTemplate:"raster-function-template",variable:"variable",none:"none"})],Af.prototype,"method",void 0),p([f({type:String,json:{write:!0}})],Af.prototype,"value",void 0),p([f({type:[Ft],json:{write:!0}})],Af.prototype,"bandIds",void 0),p([f({types:FE,json:{write:!0,origins:{"web-scene":{types:jE,write:{overridePolicy:e=>({enabled:e&&e.type!=="vector-field"&&e.type!=="flow"})}}}}})],Af.prototype,"renderer",void 0),Af=p([W("esri.renderers.support.RasterPresetRenderer")],Af);const YIt=Af,H0e=e=>{let t=class extends e{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return p([f({type:String,json:{name:"layerDefinition.activePresetRendererName",write:{allowNull:!0}}})],t.prototype,"activePresetRendererName",void 0),p([f({type:[YIt],json:{name:"layerDefinition.presetRenderers",write:!0}})],t.prototype,"presetRenderers",void 0),t=p([W("esri.layers.mixins.RasterPresetRendererMixin")],t),t};let Ka=class extends Km(f3(t0(m1(y1(H0e(JIt(g1(c3(a3(kd(rr(Od)))))))))))){constructor(...e){super(...e),this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery",this._debouncedSaveOperations=NT(async(t,r,n)=>{const{save:i,saveAs:s}=await Me(()=>import("./imageryUtils-DUQ3sTvH-DWUTYkb_.js"),__vite__mapDeps([147,138,139,140,136,141,1,2]),import.meta.url);switch(t){case Xu.SAVE:return i(this,r);case Xu.SAVE_AS:return s(this,n,r)}})}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(qo).then(()=>this._fetchService(t))),Promise.resolve(this)}get legendEnabled(){return!this._isPreviewLayer&&(this._get("legendEnabled")??!0)}set legendEnabled(e){this._set("legendEnabled",e)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(e){this._set("listMode",e)}writeOperationalLayerType(e,t,r){const n=this.renderer?.type==="vector-field";t[r]=n?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(e){const t=this.rasterFields,r=this.title,n=new Set;let i=!1,s=!1;this.capabilities&&(i=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,s=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const o=new Set;i&&o.add("raster.itempixelvalue");for(const l of t){const u=l.name.toLowerCase();o.has(u)||u.includes("raster.servicepixelvalue.")||n.add(l.name)}s&&n.add("raster.magnitude").add("raster.direction");const a=hO({fields:t,title:r},{...e,visibleFieldNames:n});return a?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&a.fieldInfos.forEach(({format:l,fieldName:u})=>{l&&u&&/^raster\.(item|service)pixelvalue/i.test(u)&&(l.places=2)}),a}queryFeatures(e,t){return this.queryRasters(e,t).then(r=>{if(r?.features)for(const n of r.features)n.layer=n.sourceLayer=this;return r})}queryFeatureCount(e,t){return this.queryRasterCount(e,t)}redraw(){this.emit("redraw")}async save(e){return this._debouncedSaveOperations(Xu.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Xu.SAVE_AS,t,e)}serviceSupportsSpatialReference(e){return cO(this,e)}write(e,t){if(!this._isPreviewLayer)return super.write(e,t);if(t?.messages){const r=`${t.origin}/${t.layerContainerType||"operational-layers"}`;t.messages.push(new ie("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${r}'`,{layer:this}))}return null}};p([f(rO)],Ka.prototype,"legendEnabled",null),p([f({type:["show","hide"]})],Ka.prototype,"listMode",null),p([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ka.prototype,"isReference",void 0),p([f({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],Ka.prototype,"operationalLayerType",void 0),p([Re("web-map","operationalLayerType")],Ka.prototype,"writeOperationalLayerType",null),p([f(A_)],Ka.prototype,"popupEnabled",void 0),p([f({type:Ad,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Ka.prototype,"popupTemplate",void 0),p([f({readOnly:!0})],Ka.prototype,"defaultPopupTemplate",null),p([f({readOnly:!0,json:{read:!1}})],Ka.prototype,"type",void 0),p([f({readOnly:!0})],Ka.prototype,"_isPreviewLayer",null),Ka=p([W("esri.layers.ImageryLayer")],Ka);const W0e=Ka,XIt=Object.freeze(Object.defineProperty({__proto__:null,default:W0e},Symbol.toStringTag,{value:"Module"})),Z0e=96;function sC(e,t){const r=e.extent,n=e.width,i=wc(r?.spatialReference);return r&&n?r.width/n*i*sV*Z0e:0}function QIt(e,t){return e/(wc(t)*sV*Z0e)}function KIt(e,t,r){return eAt(e,t)&&tAt(e,r)}function eAt(e,t){return t===0||Tb(e,t)||e<t}function tAt(e,t){return t===0||Tb(e,t)||e>t}const J0e=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(r,n){const i=n.capabilities&&n.capabilities.split(",").map(E=>E.toLowerCase().trim());if(!i)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=s!=="tile"&&!!n.supportsDynamicLayers,a=i.includes("query"),l=i.includes("map"),u=!!n.exportTilesAllowed,c=i.includes("tilemap"),h=i.includes("data"),d=s!=="tile"&&(!n.tileInfo||o),m=s!=="tile"&&(!n.tileInfo||o),y=s!=="tile",g=n.cimVersion?VR.parse(n.cimVersion):null,b=g?.greaterEqual(1,4)??!1,S=g?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:h,supportsTileMap:c},exportMap:l?{supportsArcadeExpressionForLabeling:b,supportsSublayersChanges:y,supportsDynamicLayers:o,supportsSublayerVisibility:d,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:S}:null,exportTiles:u?{maxExportTilesCount:+n.maxExportTilesCount}:null}}readVersion(r,n){let i=n.currentVersion;return i||(i=n.hasOwnProperty("capabilities")||n.hasOwnProperty("tables")?10:n.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),i}async fetchRelatedService(r){const n=this.portalItem;if(!n||!qX(n))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=n.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},r).then(s=>s.find(o=>o.type==="Feature Service")??null,()=>null));const i=await this._relatedFeatureServicePromise;return Gr(r),i?{itemId:i.id,url:i.url}:null}async fetchSublayerInfo(r,n){const{source:i}=r;if(this?.portalItem&&this.type==="tile"&&i?.type==="map-layer"&&qX(this.portalItem)&&r.originIdOf("url")<et.SERVICE){const a=await this.fetchRelatedService(n);a&&(r.url=Th(a.url,i.mapLayerId.toString()),r.layerItemId=a.itemId)}const{url:s}=r;let o;if(i.type==="data-layer")o=(await Xe(s,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...n})).data;else if(s&&r.originIdOf("url")>et.SERVICE)try{const a=await this._fetchAllLayersAndTablesFromService(s),l=Ah(s)?.sublayer??i.mapLayerId;o=a.get(l)}catch{}else{let a=r.id;i?.type==="map-layer"&&(a=i.mapLayerId);try{o=(await this.fetchAllLayersAndTables(n)).get(a)}catch{}}return o}async fetchAllLayersAndTables(r){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,r)}async _fetchAllLayersAndTablesFromService(r,n){await this.load(n),this._allLayersAndTablesMap||=new Map;const i=Ah(r),s=s_(this._allLayersAndTablesMap,i?.url.path,()=>Xe(Th(i?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(a=>{const l=new Map,{layers:u,tables:c}=a.data,h=[...u??[],...c??[]];for(const d of h)l.set(d.id,d);return{result:l}},a=>({error:a}))),o=await s;if(Gr(n),"result"in o)return o.result;throw o.error}};return p([f({readOnly:!0})],t.prototype,"capabilities",void 0),p([Ee("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),p([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),p([f({type:jt})],t.prototype,"fullExtent",void 0),p([f(jG)],t.prototype,"id",void 0),p([f({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),p([f(A_)],t.prototype,"popupEnabled",void 0),p([f({type:Ke})],t.prototype,"spatialReference",void 0),p([f({readOnly:!0})],t.prototype,"version",void 0),p([Ee("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=p([W("esri.layers.mixins.ArcGISMapService")],t),t};let Lv=class extends st{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(PB(()=>this._refresh(),Di))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections!=null?this.getCollections():null;if(e==null)return void this.removeAll();let t=0;for(const r of e)r!=null&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new st(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction??(n=>!!n);for(const n of t)if(n){if(r(n)){const i=this.indexOf(n,e);i>=0?i!==e&&this.reorder(n,e):this.add(n,e),++e}if(this.getChildrenFunction){const i=this.getChildrenFunction(n);if(Array.isArray(i))for(const s of i)e=this._processCollection(e,s);else e=this._processCollection(e,i)}}return e}};p([f()],Lv.prototype,"getCollections",void 0),p([f()],Lv.prototype,"getChildrenFunction",void 0),p([f()],Lv.prototype,"itemFilterFunction",void 0),Lv=p([W("esri.core.CollectionFlattener")],Lv);const Dm=Lv,rAt=[["binary","application/octet-stream","bin",""]];function nAt(e,t){return Q0e(t.name,e?.supportedFormats??[])!=null}function iAt(e,t){if(!e)return!1;const r=X0e(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function kz(e,t){return Nz(hAt(e,t))}function Y0e(e,t){return Nz(Q0e(e,t))}function sAt(e,t){return K0e(cAt(e,t))}function X0e(e,t){return Y0e(e.name,t)??kz(e.type,t)}function b3(e,t,r){return kz(e,r)??Y0e(t,r)}function Rz({supportedFormats:e}){return b3("model/gltf-binary","glb",e)}function oAt(e){const t=Rz(e);return t!=null&&e.editFormats.includes(t)}function aAt({supportedFormats:e}){return b3("model/gltf+json","gltf",e)}function lAt({supportedFormats:e}){return b3("application/esri3do-SR_world","wld",e)}function uAt({supportedFormats:e}){return b3("application/esri3do-SR_prj","prj",e)}function Oz(e){return[...rAt,...e]}function cAt(e,t){return Oz(t).find(r=>Nz(r)===e)}function hAt(e,t){const r=e.toLowerCase();return Oz(t).find(n=>K0e(n)===r)}function Q0e(e,t){const r=e.toLowerCase();return Oz(t).find(n=>pAt(n).some(i=>r.endsWith(i)))}function Nz(e){return e?.[0]}function K0e(e){return e?.[1].toLowerCase()}function pAt(e){return e?.[2].split(",").map(t=>t.toLowerCase())??[]}function dAt(e){return e.tables?.find(t=>t.role==="assetMaps")}async function fAt(e,t,r){const n=an(e),i=await V0e(n,ui.from(t),{...r}),s=i.data.extent;return!s||isNaN(s.xmin)||isNaN(s.ymin)||isNaN(s.xmax)||isNaN(s.ymax)?{count:i.data.count,extent:null}:{count:i.data.count,extent:jt.fromJSON(s)}}function Gs(e,t){return e?t?4:3:t?3:2}const w3=()=>Pe.getLogger("esri.layers.graphics.featureConversionUtils"),eye={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},mAt=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s},VQ=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2]},yAt=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+3]},gAt=(e,t,r,n,i,s)=>{e[r]=i,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function Lz(e,t,r,n){if(e){if(r)return t&&n?gAt:VQ;if(t&&n)return yAt}else if(t&&n)return VQ;return mAt}function b4({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function w4({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function nP({scale:e,translate:t},r,n){return r*e[n]+t[n]}function vAt(e,t,r){return e?t?r?Fz(e):Pz(e):r?Dz(e):TO(e):null}function TO(e){const t=e.coords;return{x:t[0],y:t[1]}}function tye(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function Pz(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function bAt(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function Dz(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function wAt(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function Fz(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function _At(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function xAt(e,t,r,n){let i=TO;r&&n?i=Fz:r?i=Pz:n&&(i=Dz);for(const s of t){const{geometry:o,attributes:a}=s,l=o!=null?i(o):null;e.push({attributes:a,geometry:l})}return e}function jz(e,t){return e&&t?_At:e?bAt:t?wAt:tye}function SAt(e,t,r,n,i){const s=jz(r,n);for(const{geometry:o,attributes:a}of t){const l=o!=null?s(new na,o):null;e.push(new Pm(l,a,null,i?a[i]:void 0))}return e}function rye(e,t,r=jz(t.z!=null,t.m!=null)){return r(e,t)}function EAt(e,t,r,n){for(const{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:i!=null?Uz(i,r,n):null});return e}function Uz(e,t,r){if(e==null)return null;const n=Gs(t,r),i=[];for(let s=0;s<e.coords.length;s+=n){const o=[];for(let a=0;a<n;a++)o.push(e.coords[s+a]);i.push(o)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function TAt(e,t,r,n,i){const s=Gs(r,n);for(const{geometry:o,attributes:a}of t){const l=o!=null?nye(new na,o,s):null;e.push(new Pm(l,a,null,i?a[i]:void 0))}return e}function nye(e,t,r=Gs(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let i=0;for(const s of t.points)for(let o=0;o<r;o++)n[i++]=s[o];return e}function IAt(e,t,r,n){for(const{geometry:i,attributes:s}of t)e.push({attributes:s,geometry:i!=null?Bz(i,r,n):null});return e}function Bz(e,t,r){if(!e)return null;const n=Gs(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const h=[];for(let d=0;d<n;d++)h.push(i[a++]);u.push(h)}o.push(u)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function AAt(e,t,r,n,i){const s=Gs(r,n);for(const{geometry:o,attributes:a,centroid:l}of t){const u=o!=null?iye(new na,o,s):null,c=l!=null?rye(new na,l):null;e.push(new Pm(u,a,c,i?a[i]:void 0))}return e}function iye(e,t,r=Gs(t.hasZ,t.hasM)){const{lengths:n,coords:i}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)i[s++]=a[l];n.push(o.length)}return e}function MAt(e,t,r,n){for(const{geometry:i,attributes:s,centroid:o}of t){const a=i!=null?Vz(i,r,n):null;if(o!=null){const l=TO(o);e.push({attributes:s,centroid:l,geometry:a})}else e.push({attributes:s,geometry:a})}return e}function Vz(e,t,r){if(!e)return null;const n=Gs(t,r),{coords:i,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const h=[];for(let d=0;d<n;d++)h.push(i[a++]);u.push(h)}o.push(u)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function CAt(e,t,r,n,i){for(const{geometry:s,centroid:o,attributes:a}of t){const l=s!=null?Gz(new na,s,r,n):null,u=i?a[i]:void 0;o!=null?e.push(new Pm(l,a,tye(new na,o),u)):e.push(new Pm(l,a,null,u))}return e}function Gz(e,t,r=t.hasZ,n=t.hasM){return sye(e,t.rings,r,n)}function sye(e,t,r,n){const i=Gs(r,n),{lengths:s,coords:o}=e;let a=0;ad(e);for(const l of t){for(const u of l)for(let c=0;c<i;c++)o[a++]=u[c];s.push(l.length)}return e}const Vb=[],VS=[];function kAt(e,t,r,n,i){Vb[0]=e;const[s]=zz(VS,Vb,t,r,n,i);return gc(Vb),gc(VS),s}function zz(e,t,r,n,i,s){if(gc(e),!r){for(const o of t){const a=s?o.attributes[s]:void 0;e.push(new Pm(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return SAt(e,t,n,i,s);case"esriGeometryMultipoint":return TAt(e,t,n,i,s);case"esriGeometryPolyline":return AAt(e,t,n,i,s);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return CAt(e,t,n,i,s);default:w3().error("convertToFeatureSet:unknown-geometry",new ie(`Unable to parse unknown geometry type '${r}'`)),gc(e)}return e}function RAt(e,t,r,n){VS[0]=e,oye(Vb,VS,t,r,n);const i=Vb[0];return gc(Vb),gc(VS),i}function OAt(e,t,r){if(e==null)return null;const n=new na;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),cR(e)?jz(t??e.z!=null,r??e.m!=null)(n,e):gh(e)?Gz(n,e,t,r):f_(e)?iye(n,e,Gs(t,r)):uR(e)?nye(n,e,Gs(t,r)):void w3().error("convertFromGeometry:unknown-geometry",new ie(`Unable to parse unknown geometry type '${e}'`))}function $z(e,t,r,n){const i=e&&("coords"in e?e:e.geometry);if(i==null)return null;switch(t){case"esriGeometryPoint":{let s=TO;return r&&n?s=Fz:r?s=Pz:n&&(s=Dz),s(i)}case"esriGeometryMultipoint":return Uz(i,r,n);case"esriGeometryPolyline":return Bz(i,r,n);case"esriGeometryPolygon":return Vz(i,r,n);default:return w3().error("convertToGeometry:unknown-geometry",new ie(`Unable to parse unknown geometry type '${t}'`)),null}}function NAt(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function oye(e,t,r,n,i){if(gc(e),r==null)return NAt(e,t);switch(r){case"esriGeometryPoint":return xAt(e,t,n,i);case"esriGeometryMultipoint":return EAt(e,t,n,i);case"esriGeometryPolyline":return IAt(e,t,n,i);case"esriGeometryPolygon":return MAt(e,t,n,i);default:w3().error("convertToFeatureSet:unknown-geometry",new ie(`Unable to parse unknown geometry type '${r}'`))}return e}function LAt(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:i,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:h,queryGeometryType:d}=e,m={features:oye([],a,l,o,s),fields:i,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:$z(h,d,!1,!1)};return n&&(m.transform=n),u&&(m.exceededTransferLimit=u),s&&(m.hasM=s),o&&(m.hasZ=o),m}function PAt(e,t){const r=new Mz,{hasM:n,hasZ:i,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:c,fields:h}=e;return h&&(r.fields=h),r.geometryType=l??null,r.objectIdFieldName=o??t??null,r.spatialReference=a??null,r.objectIdFieldName?(s&&zz(r.features,s,l,i,n,r.objectIdFieldName),u&&(r.exceededTransferLimit=u),n&&(r.hasM=n),i&&(r.hasZ=i),c&&(r.transform=c),r):(w3().error(new ie("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function DAt(e){const{transform:t,features:r,hasM:n,hasZ:i}=e;if(!t)return e;for(const s of r)s.geometry!=null&&oC(s.geometry,s.geometry,n,i,t),s.centroid!=null&&oC(s.centroid,s.centroid,n,i,t);return e.transform=null,e}function FAt(e,t){const{geometryType:r,features:n,hasM:i,hasZ:s}=t;if(!e)return t;for(let o=0;o<n.length;o++){const a=n[o],l=a.weakClone();l.geometry=new na,L7(l.geometry,a.geometry,i,s,r,e),a.centroid&&(l.centroid=new na,L7(l.centroid,a.centroid,i,s,"esriGeometryPoint",e)),n[o]=l}return t.transform=e,t}function L7(e,t,r,n,i,s,o=r,a=n){if(ad(e),!t?.coords.length)return null;const l=eye[i],{coords:u,lengths:c}=t,h=Gs(r,n),d=Gs(r&&o,n&&a),m=Lz(r,n,o,a);if(!c.length)return m(e.coords,u,0,0,b4(s,u[0]),w4(s,u[1])),ad(e,h,0),e;let y,g,b,S,E=0,x=0,w=x;for(const T of c){if(T<l)continue;let I=0;x=w,b=y=b4(s,u[E]),S=g=w4(s,u[E+1]),m(e.coords,u,x,E,b,S),I++,E+=h,x+=d;for(let M=1;M<T;M++,E+=h)b=b4(s,u[E]),S=w4(s,u[E+1]),b===y&&S===g||(m(e.coords,u,x,E,b-y,S-g),x+=d,I++,y=b,g=S);I>=l&&(e.lengths.push(I),w=x)}return gc(e.coords,w),e.coords.length?e:null}function jAt(e,t,r,n,i,s,o=r,a=n){if(ad(e),!t?.coords.length)return null;const l=eye[i],{coords:u,lengths:c}=t,h=Gs(r,n),d=Gs(r&&o,n&&a),m=Lz(r,n,o,a);if(!c.length)return m(e.coords,u,0,0,u[0],u[1]),ad(e,h,0),e;let y=0;const g=s*s;for(const b of c){if(b<l){y+=b*h;continue}const S=e.coords.length/d,E=y,x=y+(b-1)*h;m(e.coords,u,e.coords.length,E,u[E],u[E+1]),P7(e.coords,u,h,g,m,E,x),m(e.coords,u,e.coords.length,x,u[x],u[x+1]);const w=e.coords.length/d-S;w>=l?e.lengths.push(w):gc(e.coords,S*d),y+=b*h}return e.coords.length?e:null}function UAt(e,t,r,n){const i=e[t],s=e[t+1],o=e[r],a=e[r+1],l=e[n],u=e[n+1];let c=o,h=a,d=l-c,m=u-h;if(d!==0||m!==0){const y=((i-c)*d+(s-h)*m)/(d*d+m*m);y>1?(c=l,h=u):y>0&&(c+=d*y,h+=m*y)}return d=i-c,m=s-h,d*d+m*m}function P7(e,t,r,n,i,s,o){let a,l=n,u=0;for(let c=s+r;c<o;c+=r)a=UAt(t,c,s,o),a>l&&(u=c,l=a);l>n&&(u-s>r&&P7(e,t,r,n,i,s,u),i(e,t,e.length,u,t[u],t[u+1]),o-u>r&&P7(e,t,r,n,i,u,o))}function BAt(e,t,r,n){if(!t?.coords?.length)return null;const i=Gs(r,n);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let c=0;c<u.length;c+=i){const h=u[c],d=u[c+1];s=Math.min(s,h),a=Math.max(a,h),o=Math.min(o,d),l=Math.max(l,d)}}return u8(e)?Cce(e,s,o,a,l):nle(s,o,a,l,e),e}function oC(e,t,r,n,i){const{coords:s,lengths:o}=t,a=Gs(r,n);if(!s.length)return e!==t&&ad(e),e;td(i);const{originPosition:l,scale:u,translate:c}=i,h=$At;h.originPosition=l;const d=h.scale;d[0]=u[0]??1,d[1]=-(u[1]??1),d[2]=u[2]??1,d[3]=u[3]??1;const m=h.translate;if(m[0]=c[0]??0,m[1]=c[1]??0,m[2]=c[2]??0,m[3]=c[3]??0,!o.length){for(let g=0;g<a;++g)e.coords[g]=nP(h,s[g],g);return e!==t&&ad(e,a,0),e}let y=0;for(let g=0;g<o.length;g++){const b=o[g];e.lengths[g]=b;for(let x=0;x<a;++x)e.coords[y+x]=nP(h,s[y+x],x);let S=e.coords[y],E=e.coords[y+1];y+=a;for(let x=1;x<b;x++,y+=a){S+=s[y]*d[0],E+=s[y+1]*d[1],e.coords[y]=S,e.coords[y+1]=E;for(let w=2;w<a;++w)e.coords[y+w]=nP(h,s[y+w],w)}}return e!==t&&ad(e,s.length,o.length),e}function VAt(e,t,r,n,i,s){if(ad(e),e.lengths.push(...t.lengths),r===i&&n===s)for(let o=0;o<t.coords.length;o++)e.coords.push(t.coords[o]);else{const o=Gs(r,n),a=Lz(r,n,i,s),l=t.coords;for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1])}return e}function GAt(e,t,r,n){let i=0,s=e[n*t],o=e[n*(t+1)];for(let a=1;a<r;a++){const l=s+e[n*(t+a)],u=o+e[n*(t+a)+1],c=(l-s)*(u+o);s=l,o=u,i+=c}return .5*i}function zAt(e,t){const{coords:r,lengths:n}=e;let i=0,s=0;for(let o=0;o<n.length;o++){const a=n[o];s+=GAt(r,i,a,t),i+=a}return Math.abs(s)}function ad(e,t=0,r=0){gc(e.lengths,r),gc(e.coords,t)}function gc(e,t=0){e.length!==t&&(e.length=t)}const $At={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function qAt(e,t){return t}function qz(e,t,r,n){switch(r){case 0:return BE(e,t+n,0);case 1:return e.originPosition==="lowerLeft"?BE(e,t+n,1):ZAt(e,t+n,1)}}function aye(e,t,r,n){return r===2?BE(e,t,2):qz(e,t,r,n)}function HAt(e,t,r,n){return r===2?t===0?0:BE(e,t,3):qz(e,t,r,n)}function WAt(e,t,r,n){return r===3?t===0?0:BE(e,t,3):aye(e,t,r,n)}function BE({translate:e,scale:t},r,n){return e[n]+r*t[n]}function ZAt({translate:e,scale:t},r,n){return e[n]-r*t[n]}let JAt=class{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=qAt,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=ZR(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(t!=null)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;td(r),r.push(t);const n=r.map(i=>i.name);this._attributesConstructor=function(){for(const i of n)this[i]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(t,r,n)=>this.addCoordinatePoint(t,r,n),this.createGeometry=t=>this.createPointGeometry(t);break;case"esriGeometryPolygon":this.addCoordinate=(t,r,n)=>this._addCoordinatePolygon(t,r,n),this.createGeometry=t=>this._createPolygonGeometry(t);break;case"esriGeometryPolyline":this.addCoordinate=(t,r,n)=>this._addCoordinatePolyline(t,r,n),this.createGeometry=t=>this._createPolylineGeometry(t);break;case"esriGeometryMultipoint":this.addCoordinate=(t,r,n)=>this._addCoordinateMultipoint(t,r,n),this.createGeometry=t=>this._createMultipointGeometry(t)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){this._lengths.length===0&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,i=oC(r.clone(),r,!1,!1,this._transform),s=$z(i,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...s}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return this._mValueOffset!==null&&e===0&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){r===0&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){r===0&&this._toAddInCurrentPath--==0&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),i=e[e.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),i.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?WAt:t?aye:r?HAt:qz}};async function YAt(e,t,r){const n=an(e),i={...r},s=ui.from(t),o=!s.quantizationParameters,{data:a}=await j0e(n,s,new JAt({sourceSpatialReference:s.sourceSpatialReference,applyTransform:o}),i);return a}let Cl=class extends mt{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return Zn(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=e.outStatistics?.[0]!=null,i=xe("featurelayer-pbf-statistics"),s=!n||i;let o;if(this.pbfSupported&&s)try{o=await YAt(this.url,r,t)}catch(a){if(a.name!=="query:parsing-pbf")throw a;this.pbfSupported=!1}return this.pbfSupported&&s||(o=await $0e(this.url,r,t)),this._normalizeFields(o.fields),o}async featureSetFromJSON(e,t,r){if(!this._queryIs3DObjectFormat(e)||this.infoFor3D==null||!t.features)return Qm.fromJSON(t);const{meshFeatureSetFromJSON:n}=await Ll(Me(()=>import("./meshFeatureSet-C6Ooe2ib-B6PZ-2TO.js"),__vite__mapDeps([148,149,1,2,144,55,90,54,91,150,52,59,83,47,96,46,58,53,56,57,60,42,61,143,151]),import.meta.url),r);return n(e,this.infoFor3D,t)}executeForCount(e,t){return G0e(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return fAt(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return Cz(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:r},{executeRelationshipQuery:n}]=await Ll(Promise.all([Promise.resolve().then(()=>AX),Me(()=>import("./executeRelationshipQuery-BZ4gZDaW-C2QzJdP8.js"),__vite__mapDeps([152,1,2]),import.meta.url)]),t);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),n(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:r},{executeRelationshipQueryForCount:n}]=await Ll(Promise.all([Promise.resolve().then(()=>AX),Me(()=>import("./executeRelationshipQuery-BZ4gZDaW-C2QzJdP8.js"),__vite__mapDeps([152,1,2]),import.meta.url)]),t);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),n(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:r,fetchAttachments:n,processAttachmentQueryResult:i}=await Ll(Me(()=>import("./queryAttachments-OI415YXy-BEdaEONT.js"),__vite__mapDeps([153,1,2]),import.meta.url),t),s=an(this.url);return i(s,await(this.queryAttachmentsSupported?r(s,e,t):n(s,e,t)))}async executeBinsQuery(e,t){const{executeBinsQuery:r}=await Ll(Me(()=>import("./executeBinsQuery-X2ai-A43-D0EwA2iF.js"),__vite__mapDeps([154,1,2]),import.meta.url),t);return r(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:r}=await Ll(Me(()=>import("./executeTopFeaturesQuery-ODAvPcMT-3dM9CmvF.js"),__vite__mapDeps([155,156,1,2]),import.meta.url),t);return r(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:r}=await Ll(Me(()=>import("./executeForTopIds-BxuORtfH-B1gjrBzT.js"),__vite__mapDeps([157,156,1,2]),import.meta.url),t);return r(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:r}=await Ll(Me(()=>import("./executeForTopExtents-DjV2dYml-D73q7aVi.js"),__vite__mapDeps([158,156,1,2]),import.meta.url),t);return r(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:r}=await Ll(Me(()=>import("./executeForTopCount-D87ySeOH-C357ZMuc.js"),__vite__mapDeps([159,156,1,2]),import.meta.url),t);return r(this.parsedUrl,e,t)}_normalizeQuery(e){let t=ui.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?$o.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(r!=null&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const n=Rz(r),i=aAt(r);for(const s of r.queryFormats){if(s===n){t.formatOf3DObjects=s;break}s!==i||t.formatOf3DObjects||(t.formatOf3DObjects=s)}if(!t.formatOf3DObjects)throw new ie("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(t.outSpatialReference&&!gn(t.outSpatialReference,this.sourceSpatialReference))throw new ie("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(t.outFields==null||!t.outFields.includes("*")){t=t===e?t.clone():t,t.outFields==null&&(t.outFields=[]);const{originX:s,originY:o,originZ:a,translationX:l,translationY:u,translationZ:c,scaleX:h,scaleY:d,scaleZ:m,rotationX:y,rotationY:g,rotationZ:b,rotationDeg:S}=r.transformFieldRoles;t.outFields.push(s,o,a,l,u,c,h,d,m,y,g,b,S)}}return t}_normalizeFields(e){if(this.fieldsIndex!=null&&e!=null)for(const t of e){const r=this.fieldsIndex.get(t.name);r&&Object.assign(t,r.toJSON())}}_queryIs3DObjectFormat(e){return this.infoFor3D!=null&&e.returnGeometry===!0&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};p([f({type:$o})],Cl.prototype,"dynamicDataSource",void 0),p([f()],Cl.prototype,"fieldsIndex",void 0),p([f()],Cl.prototype,"gdbVersion",void 0),p([f()],Cl.prototype,"infoFor3D",void 0),p([f({readOnly:!0})],Cl.prototype,"parsedUrl",null),p([f()],Cl.prototype,"pbfSupported",void 0),p([f()],Cl.prototype,"queryAttachmentsSupported",void 0),p([f()],Cl.prototype,"sourceSpatialReference",void 0),p([f({type:String})],Cl.prototype,"url",void 0),Cl=p([W("esri.layers.graphics.sources.support.QueryTask")],Cl);const lye=Cl;var _4;function iP(e){return e?.type==="esriSMS"}function sP(e,t,r){const n=this.originIdOf(t)>=_o(r.origin);return{ignoreOrigin:!0,allowNull:n,enabled:!!r&&r.layer?.type==="map-image"&&(r.writeSublayerStructure||n)}}function oP(e,t,r){return{enabled:!!r&&r.layer?.type==="tile"&&(r.origin&&this.originIdOf(t)>=_o(r.origin)||this._isOverridden(t))}}function bl(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function JI(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=_o(r.origin))}}let XAt=0;const QAt=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);let Mt=_4=class extends kd(b_(pc)){constructor(e){super(e),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,url:r}=this;if(!t&&!r)throw new ie("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const n=t?await t.fetchSublayerInfo(this,e):(await Xe(r,{responseType:"json",query:{f:"json"},...e})).data;n&&(this.sourceJSON=n,this.read({layerDefinition:n},{origin:"service",layer:t,url:an(r)}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:r,supportsQueryAttachments:n},query:{supportsFormatPBF:i,supportsOrderBy:s,supportsPagination:o},data:{supportsAttachment:a},queryRelated:l}=zG(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:r,supportsQueryAttachments:n},data:{supportsAttachment:a},query:{supportsFormatPBF:i,supportsOrderBy:s,supportsPagination:o},queryRelated:l}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readMaxScaleRange(e,t){return{minScale:(t=t.layerDefinition||t).minScale??0,maxScale:t.maxScale??0}}get fieldsIndex(){return new e3(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get id(){return this._get("id")??XAt++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,t){return t.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(i=>i.write({},n))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,t){return(t=t.layerDefinition||t).objectIdField?t.objectIdField:t.fields?.find(r=>r.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const{layerDefinition:r}=t;return 1-.01*(r?.transparency??r?.drawingInfo?.transparency??0)}writeOpacity(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=Jk(this.parent.id):t.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:t,layer:r,url:n}=this,{spatialReference:i}=r,s="gdbVersion"in r?r.gdbVersion:void 0,o=xe("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new lye({fieldsIndex:t,gdbVersion:s,pbfSupported:o,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:i,url:n})}set renderer(e){if(U5(e,this.fieldsIndex),e){for(const t of e.getSymbols())if(Om(t)){Pe.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Zp({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Nr(st.ofType(_4),e)}writeSublayers(e,t,r){this.sublayers?.length&&(t[r]=this.sublayers.map(n=>n.id).toArray().reverse())}readTitle(e,t){return t.layerDefinition?.name??t.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const n=t.fields.find(i=>i.name.toLowerCase()===r);n&&(r=n.name)}return r}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,t?.type==="map-layer")return`${e.path}/${t.mapLayerId}`;const r={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${dd(r)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Qi(this),t=new _4;return Qi(t).store=e.clone(QAt),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return hO(this,e)}createQuery(){return new ui({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await Promise.resolve().then(()=>ome)).default,{layer:t,url:r}=this;let n;if(r&&this.originIdOf("url")>et.SERVICE)n=new e({url:r});else{if(!t?.parsedUrl)throw new ie("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const i=t.parsedUrl;n=new e({url:i.path}),i&&this.source&&(this.source.type==="map-layer"?n.layerId=this.source.mapLayerId:n.dynamicDataSource=this.source)}}return t?.refreshInterval!=null&&(n.refreshInterval=t.refreshInterval),this.definitionExpression&&(n.definitionExpression=this.definitionExpression),this.floorInfo&&(n.floorInfo=se(this.floorInfo)),this.originIdOf("labelingInfo")>et.SERVICE&&(n.labelingInfo=se(this.labelingInfo)),this.originIdOf("labelsVisible")>et.DEFAULTS&&(n.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>et.DEFAULTS&&(n.legendEnabled=this.legendEnabled),this.originIdOf("visible")>et.DEFAULTS&&(n.visible=this.visible),this.originIdOf("minScale")>et.DEFAULTS&&(n.minScale=this.minScale),this.originIdOf("maxScale")>et.DEFAULTS&&(n.maxScale=this.maxScale),this.originIdOf("opacity")>et.DEFAULTS&&(n.opacity=this.opacity),this.originIdOf("popupTemplate")>et.DEFAULTS&&(n.popupTemplate=se(this.popupTemplate)),this.originIdOf("renderer")>et.SERVICE&&(n.renderer=se(this.renderer)),this.source?.type==="data-layer"&&(n.dynamicDataSource=this.source.clone()),this.originIdOf("title")>et.DEFAULTS&&(n.title=this.title),t?.type==="map-image"&&t.originIdOf("customParameters")>et.DEFAULTS&&(n.customParameters=t.customParameters),t?.type==="tile"&&t.originIdOf("customParameters")>et.DEFAULTS&&(n.customParameters=t.customParameters),n}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return VG(this.types,this.typeIdField,e)}getFieldDomain(e,t){const r=t?.feature,n=this.getFeatureType(r);if(n){const i=n.domains&&n.domains[e];if(i&&i.type!=="inherited")return i}return this._getLayerDomain(e)}async queryAttachments(e,t){await this.load(),e=UG.from(e);const r=this.capabilities;if(!r?.data?.supportsAttachment)throw new ie("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:n,objectIds:i,globalIds:s,num:o,size:a,start:l,where:u}=e;if(!r?.operations?.supportsQueryAttachments&&(n?.length>0||s?.length>0||a?.length>0||o||l||u))throw new ie("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(i?.length||s?.length||u))throw new ie("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatureCount(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new ie("queryFeatureCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryFeatures(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new ie("queryFeatures:not-supported","this layer has no url.");const r=await this.queryTask.execute(e,{...t,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(r?.features)for(const n of r.features)n.sourceLayer=this;return r}async queryObjectIds(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new ie("queryObjectIds:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeatures(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new ie("queryRelatedFeatures:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new ie("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new ie("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new ie("queryRelatedFeaturesCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...t,query:{...this.layer?.customParameters,token:r}})}toExportImageJSON(e){const t={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},r=hR(e,this.definitionExpression);r!=null&&(t.definitionExpression=r);const n=["renderer","labelingInfo","opacity","labelsVisible"].reduce((i,s)=>(i[s]=this.originIdOf(s),i),{});if(Object.keys(n).some(i=>n[i]>et.SERVICE)){const i=t.drawingInfo={};if(n.renderer>et.SERVICE&&(i.renderer=this.renderer?this.renderer.toJSON():null),n.labelsVisible>et.SERVICE&&(i.showLabels=this.labelsVisible),this.labelsVisible&&n.labelingInfo>et.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(o=>!o.labelPlacement)&&Pe.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let s=this.labelingInfo;this.geometryType!=null&&(s=nme(this.labelingInfo,SE.toJSON(this.geometryType))),i.showLabels=!0,i.labelingInfo=s.filter(o=>o.labelPlacement).map(o=>o.toJSON({origin:"service",layer:this.layer}))}else i.showLabels=!1;n.opacity>et.SERVICE&&(i.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(i.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline?.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const n of r)iP(n.symbol)&&t(n.symbol);"symbol"in e&&iP(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&iP(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,n=this._get(e);let i,s;switch(e){case"definitionExpression":case"floorInfo":i="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":i="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":i="supportsDynamicLayers",s="supportsModification"}const o=Qi(this).getDefaultOrigin();if(o!=="service"){if(i&&this.layer?.capabilities?.exportMap?.[i]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${i}'`);if(s&&this.capabilities?.exportMap[s]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&n!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null,r.layer=null}),this.removeAllHandles()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.addHandles([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(Pe.getLogger(this).error(new ie("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,t){const{layer:r,declaredClass:n}=this;Pe.getLogger(n).error(new ie("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${r?.id}'`,{reason:t,sublayer:this,layer:r}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}};Mt.test={isMapImageLayerOverridePolicy:e=>e===bl||e===sP,isTileImageLayerOverridePolicy:e=>e===oP},p([f({readOnly:!0})],Mt.prototype,"capabilities",void 0),p([Ee("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],Mt.prototype,"readCapabilities",null),p([f()],Mt.prototype,"defaultPopupTemplate",null),p([f({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:sP}}})],Mt.prototype,"definitionExpression",null),p([f({readOnly:!0})],Mt.prototype,"effectiveScaleRange",null),p([Ee("service","maxScaleRange",["minScale","maxScale"])],Mt.prototype,"readMaxScaleRange",null),p([f({type:[xa],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],Mt.prototype,"fields",void 0),p([f({readOnly:!0})],Mt.prototype,"fieldsIndex",null),p([f({type:GG,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:sP},origins:{"web-scene":{read:!1,write:!1}}}})],Mt.prototype,"floorInfo",null),p([f({type:jt,json:{read:{source:"layerDefinition.extent"}}})],Mt.prototype,"fullExtent",void 0),p([f({type:SE.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:SE.read}}}}})],Mt.prototype,"geometryType",void 0),p([f({type:String})],Mt.prototype,"globalIdField",void 0),p([Ee("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Mt.prototype,"readGlobalIdFieldFromService",null),p([f({type:Ft,json:{write:{ignoreOrigin:!0}}})],Mt.prototype,"id",null),p([f({readOnly:!0})],Mt.prototype,"isTable",void 0),p([Ee("service","isTable",["type"])],Mt.prototype,"readIsTable",null),p([f({value:null,type:[C_],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:bl}}})],Mt.prototype,"labelingInfo",null),p([Re("labelingInfo")],Mt.prototype,"writeLabelingInfo",null),p([f({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:bl}}})],Mt.prototype,"labelsVisible",null),p([f({value:null})],Mt.prototype,"layer",null),p([f({type:String,json:{write:{overridePolicy:oP}}})],Mt.prototype,"layerItemId",void 0),p([f({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:JI}}})],Mt.prototype,"legendEnabled",void 0),p([f({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Mt.prototype,"listMode",null),p([f({type:Number,value:0,json:{write:{overridePolicy:bl}}})],Mt.prototype,"minScale",null),p([Ee("minScale",["minScale","layerDefinition.minScale"])],Mt.prototype,"readMinScale",null),p([f({type:Number,value:0,json:{write:{overridePolicy:bl}}})],Mt.prototype,"maxScale",null),p([Ee("maxScale",["maxScale","layerDefinition.maxScale"])],Mt.prototype,"readMaxScale",null),p([f()],Mt.prototype,"objectIdField",void 0),p([Ee("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Mt.prototype,"readObjectIdFieldFromService",null),p([f({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:bl}}})],Mt.prototype,"opacity",null),p([Ee("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],Mt.prototype,"readOpacity",null),p([Re("opacity")],Mt.prototype,"writeOpacity",null),p([f({json:{type:Ft,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:bl}}})],Mt.prototype,"parent",void 0),p([Re("parent")],Mt.prototype,"writeParent",null),p([f({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:JI,writer(e,t,r){t[r]=!e}}}})],Mt.prototype,"popupEnabled",void 0),p([f({type:Ad,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:JI}}})],Mt.prototype,"popupTemplate",void 0),p([f({readOnly:!0})],Mt.prototype,"queryTask",null),p([f({type:[_fe],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],Mt.prototype,"relationships",void 0),p([f({types:T_,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:bl},origins:{"web-scene":{types:_G,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:bl}}}}})],Mt.prototype,"renderer",null),p([f({types:{key:"type",base:null,typeMap:{"data-layer":$o,"map-layer":Zp}},cast(e){if(e){if("mapLayerId"in e)return yn(Zp,e);if("dataSource"in e)return yn($o,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:bl}}})],Mt.prototype,"source",null),p([f()],Mt.prototype,"sourceJSON",void 0),p([f({type:Ke,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],Mt.prototype,"spatialReference",void 0),p([f({value:null,json:{type:[Ft],write:{target:"subLayerIds",allowNull:!0,overridePolicy:bl}}})],Mt.prototype,"sublayers",null),p([ur("sublayers")],Mt.prototype,"castSublayers",null),p([Re("sublayers")],Mt.prototype,"writeSublayers",null),p([f({type:String,json:{name:"name",write:{overridePolicy:JI}}})],Mt.prototype,"title",void 0),p([Ee("service","title",["name","layerDefinition.name"])],Mt.prototype,"readTitle",null),p([f({type:String})],Mt.prototype,"typeIdField",void 0),p([f({json:{read:!1},readOnly:!0,value:"sublayer"})],Mt.prototype,"type",void 0),p([Ee("typeIdField",["layerDefinition.typeIdField"])],Mt.prototype,"readTypeIdField",null),p([f({type:[uO],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],Mt.prototype,"types",void 0),p([f({type:String,json:{name:"layerUrl",write:{overridePolicy:oP}}})],Mt.prototype,"url",null),p([f({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:bl}}})],Mt.prototype,"visible",null),p([Re("visible")],Mt.prototype,"writeVisible",null),Mt=_4=p([W("esri.layers.support.Sublayer")],Mt);const _3=Mt;function GQ(e,t,r){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>r||n.originIdOf("maxScale")>r||n.originIdOf("renderer")>r||n.originIdOf("labelingInfo")>r||n.originIdOf("opacity")>r||n.originIdOf("labelsVisible")>r||n.originIdOf("source")>r)||!cye(e,t)}function uye(e,t,r){return!!e.some(n=>{const i=n.source,s=!i||i.type==="map-layer"&&i.mapLayerId===n.id&&(i.gdbVersion==null||i.gdbVersion===r);return n.commitProperty("renderer"),n.commitProperty("labelingInfo"),n.commitProperty("opacity"),n.commitProperty("labelsVisible"),!s||n.originIdOf("renderer")>et.SERVICE||n.originIdOf("labelingInfo")>et.SERVICE||n.originIdOf("opacity")>et.SERVICE||n.originIdOf("labelsVisible")>et.SERVICE})||!cye(e,t)}function cye(e,t){if(!e?.length||t==null)return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let n=0;const i=r.length;for(const{id:s}of e){for(;n<i&&r[n]!==s;)n++;if(n>=i)return!1}return!0}function KAt(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition?.minScale!=null)}function eMt(e,t){const r=[],n={};return e&&e.forEach(i=>{const s=new _3;if(s.read(i,t),n[s.id]=s,i.parentLayerId!=null&&i.parentLayerId!==-1){const o=n[i.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(s)}else r.unshift(s)}),r}const YI=st.ofType(_3);function hye(e,t){e&&e.forEach(r=>{t(r),r.sublayers&&r.sublayers.length&&hye(r.sublayers,t)})}const pye=e=>{let t=class extends e{constructor(...r){super(...r),this.allSublayers=new Dm({getCollections:()=>[this.sublayers],getChildrenFunction:n=>n.sublayers}),this.sublayersSourceJSON={[et.SERVICE]:{},[et.PORTAL_ITEM]:{},[et.WEB_SCENE]:{},[et.WEB_MAP]:{}},this.subtables=null,this.addHandles([Et(()=>this.sublayers,(n,i)=>this._handleSublayersChange(n,i),Di),Et(()=>this.subtables,(n,i)=>this._handleSublayersChange(n,i),Di)])}destroy(){this.allSublayers.destroy()}readSublayers(r,n){if(!n||!r)return;const{sublayersSourceJSON:i}=this,s=_o(n.origin);if(s<et.SERVICE||(i[s]={context:n,visibleLayers:r.visibleLayers||i[s].visibleLayers,layers:r.layers||i[s].layers},s>et.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=Qi(this);l.setDefaultOrigin(a),this._set("sublayers",new YI(o)),l.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(n=>n.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const n=_o(r==="web-document"?"web-map":r);let i=et.SERVICE,s=this.sublayersSourceJSON[et.SERVICE].layers,o=this.sublayersSourceJSON[et.SERVICE].context,a=null;const l=[et.PORTAL_ITEM,et.WEB_SCENE,et.WEB_MAP].filter(y=>y<=n);for(const y of l){const g=this.sublayersSourceJSON[y];KAt(g.layers)&&(i=y,s=g.layers,o=g.context,g.visibleLayers&&(a={visibleLayers:g.visibleLayers,context:g.context}))}const u=[et.PORTAL_ITEM,et.WEB_SCENE,et.WEB_MAP].filter(y=>y>i&&y<=n);let c=null;for(const y of u){const{layers:g,visibleLayers:b,context:S}=this.sublayersSourceJSON[y];g&&(c={layers:g,context:S}),b&&(a={visibleLayers:b,context:S})}const h=eMt(s,o),d=new Map,m=new Set;if(c)for(const y of c.layers)d.set(y.id,y);if(a?.visibleLayers)for(const y of a.visibleLayers)m.add(y);return hye(h,y=>{c&&y.read(d.get(y.id),c.context),a&&y.read({defaultVisibility:m.has(y.id)},a.context)}),{origin:tw(i),sublayers:new YI({items:h})}}read(r,n){super.read(r,n),this.readSublayers(r,n)}_handleSublayersChange(r,n){n&&(n.forEach(i=>{i.parent=null,i.layer=null}),this.removeHandles("sublayers-owner")),r&&(r.forEach(i=>{i.parent=this,i.layer=this}),this.addHandles([r.on("after-add",({item:i})=>{i.parent=this,i.layer=this}),r.on("after-remove",({item:i})=>{i.parent=null,i.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(r.on("before-changes",i=>{Pe.getLogger("esri.layers.TileLayer").error(new ie("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),i.preventDefault()}),"sublayers-owner"))}};return p([f({readOnly:!0})],t.prototype,"allSublayers",void 0),p([f({readOnly:!0,type:st.ofType(_3)})],t.prototype,"serviceSublayers",void 0),p([f({value:null,type:YI,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),p([f({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),p([f({type:YI,json:{read:{source:"tables"}}})],t.prototype,"subtables",void 0),t=p([W("esri.layers.mixins.SublayersOwner")],t),t};function tMt(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?dye(e.view.floors,t.floorInfo.floorField):null}function D7(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?dye(e,t.floorInfo.floorField):null}function dye(e,t){if(!e?.length)return null;const r=e.filter(n=>n!=="").map(n=>`'${n}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}const rMt={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let tl=class extends mt{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const r=D7(this.floors,t);return t.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&uye(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(rMt[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,t=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return t.length?JSON.stringify(t.reduce((r,n)=>{const i=D7(this.floors,n),s=hR(i,n.definitionExpression);return s!=null&&(r[n.id]=s),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=this.scale,n=s=>{s.visible&&(r===0||KIt(r,s.minScale,s.maxScale))&&(s.sublayers?s.sublayers.forEach(n):e.unshift(s))};t&&t.forEach(n);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((s,o)=>e[o]!==s)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};p([f({readOnly:!0})],tl.prototype,"dynamicLayers",null),p([f()],tl.prototype,"floors",void 0),p([f({readOnly:!0})],tl.prototype,"hasDynamicLayers",null),p([f()],tl.prototype,"layer",null),p([f({readOnly:!0})],tl.prototype,"layers",null),p([f({readOnly:!0})],tl.prototype,"layerDefs",null),p([f({type:Number})],tl.prototype,"scale",void 0),p([f({readOnly:!0})],tl.prototype,"version",null),p([f({readOnly:!0})],tl.prototype,"visibleSublayers",null),tl=p([W("esri.layers.support.ExportImageParameters")],tl);let Vn=class extends Km(f3(t0(pye(J0e(a3(m1(y1(kd(g1(JR(c3(Od)))))))))))){constructor(...e){super(...e),this._exportImageParameters=new tl({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(qo).then(()=>this._fetchService(t))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(e,t,r,n){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten(({sublayers:c})=>c&&c.toArray().reverse()).toArray();let s=!1;const o=_o(n.origin);if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(o===et.PORTAL_ITEM){const c=this.createSublayersForOrigin("service").sublayers;s=GQ(i,c,et.SERVICE)}else if(o>et.PORTAL_ITEM){const c=this.createSublayersForOrigin("portal-item");s=GQ(i,c.sublayers,_o(c.origin))}}const a=[],l={writeSublayerStructure:s,...n};let u=s||this.hasVisibleLayersForOrigin(o);i.forEach(c=>{const h=c.write({},l);a.push(h),u=u||c.originOf("visible")==="user"}),a.some(c=>Object.keys(c).length>1)&&(t.layers=a),u&&(t.visibleLayers=i.filter(c=>c.visible).map(c=>c.id))}createExportImageParameters(e,t,r,n){const i=n?.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian()),this._exportImageParameters.floors=n?.floors??null,this._exportImageParameters.scale=sC({extent:e,width:t})*i;const s=this._exportImageParameters.toJSON(),o=!n?.rotation||this.version<10.3?{}:{rotation:-n.rotation},a=e?.spatialReference,l=md(a);s.dpi*=i;const u={};if(n?.timeExtent){const{start:c,end:h}=n.timeExtent.toJSON();u.time=c&&h&&c===h?""+c:`${c??"null"},${h??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(u.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:l,imageSR:l,size:t+","+r,...s,...o,...u}}async fetchImage(e,t,r,n){const{data:i}=await this._fetchImage("image",e,t,r,n);return i}async fetchImageBitmap(e,t,r,n){const{data:i,url:s}=await this._fetchImage("blob",e,t,r,n);return rC(i,s,n?.signal)}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Xe(this.url,t),{extent:n,fullExtent:i,timeExtent:s}=r,o=n||i;return{fullExtent:o&&jt.fromJSON(o),timeExtent:s&&Ro.fromJSON({start:s[0],end:s[1]})}}loadAll(){return UT(this,e=>{e(this.allSublayers),e(this.subtables)})}serviceSupportsSpatialReference(e){return cO(this,e)}async _fetchImage(e,t,r,n,i){const s={responseType:e,signal:i?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(t,r,n,i),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},o=this.parsedUrl.path+"/export";if(s.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new ie("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:s.query});try{const{data:a}=await Xe(o,s);return{data:a,url:o}}catch(a){throw Fi(a)?a:new ie("mapimagelayer:image-fetch-error",`Unable to load image: ${o}`,{error:a})}}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await Xe(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(e){return!(e==null||!this.sublayersSourceJSON[e]?.visibleLayers)}};p([f(Dg("dateFieldsTimeReference"))],Vn.prototype,"dateFieldsTimeZone",void 0),p([f({type:Boolean})],Vn.prototype,"datesInUnknownTimezone",void 0),p([f()],Vn.prototype,"dpi",void 0),p([f()],Vn.prototype,"gdbVersion",void 0),p([f()],Vn.prototype,"imageFormat",void 0),p([Ee("imageFormat",["supportedImageFormatTypes"])],Vn.prototype,"readImageFormat",null),p([f({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],Vn.prototype,"imageMaxHeight",void 0),p([f({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],Vn.prototype,"imageMaxWidth",void 0),p([f()],Vn.prototype,"imageTransparency",void 0),p([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Vn.prototype,"isReference",void 0),p([f({json:{read:!1,write:!1}})],Vn.prototype,"labelsVisible",void 0),p([f({type:["ArcGISMapServiceLayer"]})],Vn.prototype,"operationalLayerType",void 0),p([f({json:{read:!1,write:!1}})],Vn.prototype,"popupEnabled",void 0),p([f(Dg("preferredTimeReference"))],Vn.prototype,"preferredTimeZone",void 0),p([f()],Vn.prototype,"sourceJSON",void 0),p([f({json:{write:{ignoreOrigin:!0}}})],Vn.prototype,"sublayers",void 0),p([Re("sublayers",{layers:{type:[_3]},visibleLayers:{type:[Ft]}})],Vn.prototype,"writeSublayers",null),p([f({type:["show","hide","hide-children"]})],Vn.prototype,"listMode",void 0),p([f({json:{read:!1},readOnly:!0,value:"map-image"})],Vn.prototype,"type",void 0),p([f(M_)],Vn.prototype,"url",void 0),Vn=p([W("esri.layers.MapImageLayer")],Vn);const Hz=Vn,nMt=Object.freeze(Object.defineProperty({__proto__:null,default:Hz},Symbol.toStringTag,{value:"Module"}));var F7;let Vc=F7=class extends we{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new F7({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};p([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Vc.prototype,"cols",void 0),p([f({type:Ft,json:{write:!0}})],Vc.prototype,"level",void 0),p([f({type:String,json:{write:!0}})],Vc.prototype,"levelValue",void 0),p([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Vc.prototype,"origin",void 0),p([f({type:Number,json:{write:!0}})],Vc.prototype,"resolution",void 0),p([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Vc.prototype,"rows",void 0),p([f({type:Number,json:{write:!0}})],Vc.prototype,"scale",void 0),Vc=F7=p([W("esri.layers.support.LOD")],Vc);const Vt=Vc;let Wz=class{constructor(e,t,r,n,i=void 0){this.id=e,this.level=t,this.row=r,this.col=n,this.extent=i}};var Mf;const zQ=new Pt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Os=Mf=class extends we{static create(e={}){const{resolutionFactor:t=1,scales:r,size:n=256,spatialReference:i=Ke.WebMercator,numLODs:s=24}=e;if(!xo(i)){const h=[];if(r)for(let d=0;d<r.length;d++){const m=r[d];h.push(new Vt({level:d,scale:m,resolution:m}))}else{let d=5e-4;for(let m=s-1;m>=0;m--)h.unshift(new Vt({level:m,scale:d,resolution:d})),d*=2}return new Mf({dpi:96,lods:h,origin:new it(0,0,i),size:[n,n],spatialReference:i})}const o=Bs(i),a=e.origin?new it({x:e.origin.x,y:e.origin.y,spatialReference:i}):new it(o?{x:o.origin[0],y:o.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),l=96,u=1/(wc(i)*39.37*l),c=[];if(r)for(let h=0;h<r.length;h++){const d=r[h],m=d*u;c.push(new Vt({level:h,scale:d,resolution:m}))}else{let h=u_(i)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const d=Math.ceil(s/t);c.push(new Vt({level:0,scale:h,resolution:h*u}));for(let m=1;m<d;m++){const y=h/2**t,g=y*u;c.push(new Vt({level:m,scale:y,resolution:g})),h=y}}return new Mf({dpi:l,lods:c,origin:a,size:[n,n],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Bs(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return it.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const n=[],i=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(s=>{n.push(s.scale),t=s.scale>t?s.scale:t,r=s.scale<r?s.scale:r,i[s.level]=s})),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),n=r+1;return t[r]/(t[r]/t[n])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let n=0;for(;n<r;n++){const i=t[n],s=t[n+1];if(i<=e)return n;if(s===e)return n+1;if(i>e&&s<e)return n+Math.log(i/e)/Math.log(i/s)}return n}tileAt(e,t,r,n){const i=this.lodAt(e);if(!i)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(gn(t.spatialReference,this.spatialReference))s=t.x,o=t.y,n=r;else{const u=GT(t,this.spatialReference);if(u==null)return null;s=u.x,o=u.y,n=r}const a=i.resolution*this.size[0],l=i.resolution*this.size[1];return n||(n=new Wz(null,0,0,0,Zo())),n.level=e,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(n),n}updateTileInfo(e,t=Mf.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Mf.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const n=e.level-r.level,i=r.resolution*this.size[0]/2**n,s=r.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Zo()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:n}=r,i=n*this.size[0],s=n*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+i,e[3]=e[1]+s,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Mf.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],n=this.lods.length-t;for(let i=0;i<n;i++){const s=i+t,{scale:o,resolution:a}=s>=0?this.lods[s]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Vt({level:i,scale:o,resolution:a}))}return new Mf({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}};p([f({type:Number,json:{write:!0}})],Os.prototype,"compressionQuality",void 0),p([f({type:Number,json:{write:!0}})],Os.prototype,"dpi",void 0),p([f({type:String,json:{read:zQ.read,write:zQ.write,origins:{"web-scene":{read:!1,write:!1}}}})],Os.prototype,"format",void 0),p([f({readOnly:!0})],Os.prototype,"isWrappable",null),p([f({type:it,json:{write:!0}})],Os.prototype,"origin",void 0),p([Ee("origin")],Os.prototype,"readOrigin",null),p([f({type:[Vt],value:null,json:{write:!0}})],Os.prototype,"lods",null),p([f({readOnly:!0})],Os.prototype,"scales",void 0),p([f({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Os.prototype,"size",void 0),p([Ee("size",["rows","cols"])],Os.prototype,"readSize",null),p([Re("size",{cols:{type:Ft},rows:{type:Ft}})],Os.prototype,"writeSize",null),p([f({type:Ke,json:{write:!0}})],Os.prototype,"spatialReference",void 0),Os=Mf=p([W("esri.layers.support.TileInfo")],Os),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Os||(Os={}));const Fm=Os;var j7;let Pp=j7=class extends we{constructor(e){super(e)}clone(){return new j7({customLayerParameters:se(this.customLayerParameters),customParameters:se(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};p([f({json:{type:Object,write:!0}})],Pp.prototype,"customLayerParameters",void 0),p([f({json:{type:Object,write:!0}})],Pp.prototype,"customParameters",void 0),p([f({type:String,json:{write:!0}})],Pp.prototype,"layerIdentifier",void 0),p([f({type:String,json:{write:!0}})],Pp.prototype,"tileMatrixSet",void 0),p([f({type:String,json:{write:!0}})],Pp.prototype,"url",void 0),Pp=j7=p([W("esri.layers.support.WMTSLayerInfo")],Pp);var U7;let Gn=U7=class extends Km(g1(t0(m1(y1(kd(Od)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new jt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Ke.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Ke.WebMercator,this.subDomains=null,this.tileInfo=new Fm({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new it({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ke.WebMercator}),spatialReference:Ke.WebMercator,lods:[new Vt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Vt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Vt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Vt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Vt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Vt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Vt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Vt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Vt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Vt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Vt({level:10,scale:577790.554289,resolution:152.874056570411}),new Vt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Vt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Vt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Vt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Vt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Vt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Vt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Vt({level:18,scale:2256.994353,resolution:.597164283559817}),new Vt({level:19,scale:1128.497176,resolution:.298582141647617}),new Vt({level:20,scale:564.248588,resolution:.14929107082380833}),new Vt({level:21,scale:282.124294,resolution:.07464553541190416}),new Vt({level:22,scale:141.062147,resolution:.03732276770595208}),new Vt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let r="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const n=new ic(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&n.authority?.includes("{subDomain}")&&(r="is missing 'subDomains' property")}else r="spatialReference must match tileInfo.spatialReference";else r="is missing the required 'urlTemplate' property value";if(r)throw new ie("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${r}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||Ke.fromJSON(t.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,n=new ic(t),i=n.scheme?n.scheme+"://":"//",s=i+n.authority+"/",o=n.authority;if(o?.includes("{subDomain}")){if(r&&r.length>0&&o.split(".").length>1)for(const a of r)e.push(i+o.replaceAll(/\{subDomain\}/gi,a)+"/")}else e.push(s);return e.map(Boe)}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new ic(e),r=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.slice(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){tu(e)&&(e="https:"+e),e&&(e=e.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),e=ll(e)),t.templateUrl=e}fetchTile(e,t,r,n={}){const{signal:i}=n,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:i,query:{...this.refreshParameters}};return Xe(s,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,r,n={}){const{signal:i}=n;if(this.fetchTile!==U7.prototype.fetchTile){const l=await this.fetchTile(e,t,r,n);return UE(l,e,t,r,i)}const s=this.getTileUrl(e,t,r),o={responseType:"blob",signal:i,query:{...this.refreshParameters}},{data:a}=await Xe(s,o);return UE(a,e,t,r,i)}getTileUrl(e,t,r){const{levelValues:n,tileServers:i,urlPath:s}=this;if(!n||!i||!s)return"";const o=n[e];return i[t%i.length]+CT(s,{level:o,z:o,col:r,x:r,row:t,y:t})}};p([f({type:String,value:"",json:{write:!0}})],Gn.prototype,"copyright",void 0),p([f({type:jt,json:{write:!0},nonNullable:!0})],Gn.prototype,"fullExtent",void 0),p([f({readOnly:!0,json:{read:!1,write:!1}})],Gn.prototype,"legendEnabled",void 0),p([f({type:["show","hide"]})],Gn.prototype,"listMode",void 0),p([f({json:{read:!0,write:!0}})],Gn.prototype,"blendMode",void 0),p([f()],Gn.prototype,"levelValues",null),p([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Gn.prototype,"isReference",void 0),p([f({type:["WebTiledLayer"],value:"WebTiledLayer"})],Gn.prototype,"operationalLayerType",void 0),p([f({readOnly:!0,json:{read:!1,write:!1}})],Gn.prototype,"popupEnabled",void 0),p([f({type:Ke})],Gn.prototype,"spatialReference",void 0),p([Ee("spatialReference",["spatialReference","fullExtent.spatialReference"])],Gn.prototype,"readSpatialReference",null),p([f({type:[String],json:{write:!0}})],Gn.prototype,"subDomains",void 0),p([f({type:Fm,json:{write:!0}})],Gn.prototype,"tileInfo",void 0),p([f({readOnly:!0})],Gn.prototype,"tileServers",null),p([f({json:{read:!1}})],Gn.prototype,"type",void 0),p([f()],Gn.prototype,"urlPath",null),p([f({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],Gn.prototype,"urlTemplate",void 0),p([Ee("urlTemplate",["urlTemplate","templateUrl"])],Gn.prototype,"readUrlTemplate",null),p([Re("urlTemplate",{templateUrl:{type:String}})],Gn.prototype,"writeUrlTemplate",null),p([f({type:Pp,json:{write:!0}})],Gn.prototype,"wmtsInfo",void 0),Gn=U7=p([W("esri.layers.WebTileLayer")],Gn);const Zz=Gn,iMt=Object.freeze(Object.defineProperty({__proto__:null,default:Zz},Symbol.toStringTag,{value:"Module"}));let Do=class extends Zz{constructor(...e){super(...e),this.portalItem=null,this.isReference=null,this.tileInfo=new Fm({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new it({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Ke.WebMercator}),spatialReference:Ke.WebMercator,lods:[new Vt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new Vt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new Vt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new Vt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new Vt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new Vt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new Vt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new Vt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new Vt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new Vt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new Vt({level:10,scale:577790.554289,resolution:152.874056570411}),new Vt({level:11,scale:288895.277144,resolution:76.4370282850732}),new Vt({level:12,scale:144447.638572,resolution:38.2185141425366}),new Vt({level:13,scale:72223.819286,resolution:19.1092570712683}),new Vt({level:14,scale:36111.909643,resolution:9.55462853563415}),new Vt({level:15,scale:18055.954822,resolution:4.77731426794937}),new Vt({level:16,scale:9027.977411,resolution:2.38865713397468}),new Vt({level:17,scale:4513.988705,resolution:1.19432856685505}),new Vt({level:18,scale:2256.994353,resolution:.597164283559817}),new Vt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new jt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Ke.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};p([f({type:sg,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Do.prototype,"portalItem",void 0),p([f({type:Boolean,json:{read:!1,write:!1}})],Do.prototype,"isReference",void 0),p([f({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Do.prototype,"refreshInterval",null),p([f({type:Fm,json:{write:!1}})],Do.prototype,"tileInfo",void 0),p([f({type:["show","hide"]})],Do.prototype,"listMode",void 0),p([f({readOnly:!0,json:{read:!1,write:!1}})],Do.prototype,"subDomains",void 0),p([f({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],Do.prototype,"fullExtent",void 0),p([f({readOnly:!0,json:{read:!1,write:!1}})],Do.prototype,"urlTemplate",void 0),p([f({type:["OpenStreetMap"]})],Do.prototype,"operationalLayerType",void 0),p([f({json:{read:!1}})],Do.prototype,"type",void 0),p([f({json:{read:!1,write:!1}})],Do.prototype,"copyright",void 0),p([f({json:{read:!1,write:!1}})],Do.prototype,"wmtsInfo",void 0),Do=p([W("esri.layers.OpenStreetMapLayer")],Do);const Jz=Do,sMt=Object.freeze(Object.defineProperty({__proto__:null,default:Jz},Symbol.toStringTag,{value:"Module"}));let fye=class{constructor(e,t=0,r=e.lods[e.lods.length-1].level){this.tileInfo=e,this.minLOD=t,this.maxLOD=r,e.lodAt(t)||(this.minLOD=e.lods[0].level),e.lodAt(r)||(this.maxLOD=e.lods[e.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(e,t,r){const n=this.tileInfo?.lodAt(e);return!n||e<this.minLOD||e>this.maxLOD?"unavailable":n.cols&&n.rows?r>=n.cols[0]&&r<=n.cols[1]&&t>=n.rows[0]&&t<=n.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(e,t,r,n){await a5(n);const i=this.getAvailability(e,t,r);if(i==="unavailable")throw new ie("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r});return i}async fetchAvailabilityUpsample(e,t,r,n,i){await a5(i),n.level=e,n.row=t,n.col=r;const s=this.tileInfo;return s.updateTileInfo(n),this.fetchAvailability(e,t,r,i).catch(o=>{if(Fi(o))throw o;if(s.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n,i);throw o})}};var aC;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(aC||(aC={}));function oMt(e,t=!1){return e<=zk?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}let $Q=class B7{constructor(t){lMt(t);const{location:r,data:n}=t;this.location=Object.freeze(se(r));const i=this.location.width,s=this.location.height;let o=!0,a=!0;const l=Math.ceil(i*s/32),u=oMt(l);let c=0;for(let h=0;h<n.length;h++){const d=h%32;n[h]?(a=!1,u[c]|=1<<d):o=!1,d===31&&++c}a?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=u,this.byteSize=40+vse(u))}getAvailability(t,r){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const n=(t-this.location.top)*this.location.width+(r-this.location.left),i=n%32,s=n>>5,o=this._availability;return s<0||s>o.length?"unknown":o[s]&1<<i?"available":"unavailable"}static fromDefinition(t,r){const n=t.service.request||Xe,{row:i,col:s,width:o,height:a}=t,l={query:{f:"json"}};return r=r?{...l,...r}:l,n(aMt(t),r).then(u=>u.data).catch(u=>{if(u?.details?.httpStatus===422)return{location:{top:i,left:s,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw u}).then(u=>{if(u.location&&(u.location.top!==i||u.location.left!==s||u.location.width!==o||u.location.height!==a))throw new ie("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:i,left:s,width:o,height:a}});return B7.fromJSON(u)})}static fromJSON(t){return Object.freeze(new B7(t))}};function qQ(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function aMt(e){let t;if(e.service.tileServers?.length){const n=e.service.tileServers;t=`${n&&n.length?n[e.row%n.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const r=e.service.query;return r&&(t=`${t}?${r}`),t}function lMt(e){if(!e?.location)throw new ie("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new ie("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new ie("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new ie("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new ie("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}var Dy;function HQ(e,t,r){return new ie("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})}let Fu=Dy=class extends mt{constructor(e){super(e),this._pendingTilemapRequests={},this.request=Xe,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new BR(2*aC.MEGABYTES),this.addHandles(Et(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition(),vs))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"}fetchAvailability(e,t,r,n){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(HQ(e,t,r)):this._fetchTilemap(e,t,r,n).catch(i=>i).then(i=>{if(i instanceof $Q){const s=i.getAvailability(t,r);if(s==="unavailable")throw HQ(e,t,r);return s}if(Fi(i))throw i;return"unknown"})}fetchAvailabilityUpsample(e,t,r,n,i){n.level=e,n.row=t,n.col=r;const s=this.layer.tileInfo;s.updateTileInfo(n);const o=this.fetchAvailability(e,t,r,i).catch(a=>{if(Fi(a))throw a;if(s.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n,i);throw a});return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,i,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,r,n,i,s){if(!this._prefetchingEnabled||e==null)return;const o=`prefetch-${e}`;if(this.hasHandles(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let l=!1;const u=gr(()=>{l||(l=!0,a.abort())});if(this.addHandles(u,o),await Jse(10,a.signal).catch(()=>{}),l||(l=!0,this.removeHandles(o)),Ba(a))return;const c=new Wz(e,t,r,n),h={...i,signal:a.signal},d=this.layer.tileInfo;for(let m=0;Dy._prefetches.length<Dy._maxPrefetch&&d.upsampleTile(c);++m){const y=this.fetchAvailability(c.level,c.row,c.col,h);Dy._prefetches.push(y);const g=()=>{Dy._prefetches.removeUnordered(y)};y.then(g,g)}}_fetchTilemap(e,t,r,n){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new ie("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,i);if(s)return Promise.resolve(s);const o=n?.signal;return n={...n,signal:null},new Promise((a,l)=>{Oa(o,()=>l(Xr()));const u=qQ(i);let c=this._pendingTilemapRequests[u];if(!c){c=$Q.fromDefinition(i,n).then(d=>(this._tilemapCache.put(u,d,d.byteSize),d));const h=()=>{delete this._pendingTilemapRequests[u]};this._pendingTilemapRequests[u]=c,c.then(h,h)}c.then(a,l)})}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:dd({...e.query,...r,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,n){n.level=e,n.row=t-t%this.size,n.col=r-r%this.size;const i=qQ(n);return this._tilemapCache.get(i)}get test(){}};Fu._maxPrefetch=4,Fu._prefetches=new rd({initialSize:Dy._maxPrefetch}),p([f({constructOnly:!0})],Fu.prototype,"layer",void 0),p([f({constructOnly:!0})],Fu.prototype,"minLOD",void 0),p([f({constructOnly:!0})],Fu.prototype,"maxLOD",void 0),p([f({constructOnly:!0})],Fu.prototype,"request",void 0),p([f({constructOnly:!0})],Fu.prototype,"size",void 0),Fu=Dy=p([W("esri.layers.support.TilemapCache")],Fu);const mye=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(r,n){return n.minLOD!=null&&n.maxLOD!=null?r:0}readMaxScale(r,n){return n.minLOD!=null&&n.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,n,i){const s=n.capabilities?.includes("Tilemap");let{minLOD:o,maxLOD:a,minScale:l,maxScale:u}=n;if(o==null&&a==null&&l!==0&&u!==0){const c=h=>Math.round(1e4*h)/1e4;l=c(l||n.tileInfo.lods[0].scale),u=c(u||n.tileInfo.lods[n.tileInfo.lods.length-1].scale);for(const h of n.tileInfo.lods){const d=c(h.scale);o=d>=l?h.level:o,a=d>=u?h.level:a}}if(s)return new Fu({layer:this,minLOD:o,maxLOD:a});if(n.tileInfo){const c=new Fm;return c.read(n.tileInfo,i),new fye(c,o,a)}return null}};return p([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),p([f()],t.prototype,"minScale",void 0),p([Ee("service","minScale")],t.prototype,"readMinScale",null),p([f()],t.prototype,"maxScale",void 0),p([Ee("service","maxScale")],t.prototype,"readMaxScale",null),p([f({type:Ke})],t.prototype,"spatialReference",void 0),p([f({readOnly:!0})],t.prototype,"supportsBlankTile",null),p([f({type:Fm})],t.prototype,"tileInfo",void 0),p([f()],t.prototype,"tilemapCache",void 0),p([Ee("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),p([f()],t.prototype,"version",void 0),t=p([W("esri.layers.mixins.ArcGISCachedService")],t),t};var V7;const WQ=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let hi=V7=class extends Km(t0(pye(mye(J0e(m1(y1(a3(kd(g1(JR(c3(Od)))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(qo).then(()=>this._fetchService(t))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,t){return(e=e||t.tileInfo?.spatialReference)&&Ke.fromJSON(e)}writeSublayers(e,t,r,n){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),s=[],o={writeSublayerStructure:!1,...n};i.forEach(a=>{const l=a.write({},o);s.push(l)}),s.some(a=>Object.keys(a).length>1)&&(t.layers=s)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map(t=>Zn(t).path):null}fetchTile(e,t,r,n={}){const{signal:i}=n,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:i,query:{...this.refreshParameters}};return Xe(s,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,r,n={}){const{signal:i}=n;if(this.fetchTile!==V7.prototype.fetchTile){const l=await this.fetchTile(e,t,r,n);return UE(l,e,t,r,i)}const s=this.getTileUrl(e,t,r),o={responseType:"blob",signal:i,query:{...this.refreshParameters}},{data:a}=await Xe(s,o);return UE(a,e,t,r,i)}getTileUrl(e,t,r){const n=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=dd({...this.parsedUrl?.query,blankTile:!n&&null,...this.customParameters,token:this.apiKey}),s=this.tileServers;return`${s&&s.length?s[t%s.length]:this.parsedUrl?.path}/tile/${e}/${t}/${r}${i?"?"+i:""}`}loadAll(){return UT(this,e=>{e(this.allSublayers)})}_fetchService(e){return new Promise((t,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new ie("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new ie("tile-layer:undefined-url","layer's url is not defined");const n=Ah(this.parsedUrl.path);if(n!=null&&n.serverType==="ImageServer")throw new ie("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Xe(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,r)}).then(t=>{let r=this.url;if(t.ssl&&(r=this.url=r.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!XR(r))return this._fetchServerVersion(r,e).then(n=>{this.read({currentVersion:n})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!Gpe(e))return Promise.reject();const r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Xe(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(n=>{if(n.data&&n.data.currentVersion)return n.data.currentVersion;throw new ie("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i);return t?t[2]:void 0}_getDefaultAttribution(e){if(e==null)return null;let t;e=e.toLowerCase();for(let r=0,n=WQ.length;r<n;r++)if(t=WQ[r],t.toLowerCase().includes(e))return Aa("//static.arcgis.com/attribution/"+t);return null}_getDefaultTileServers(e){if(e==null)return[];const t=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[yye]}};p([f({readOnly:!0})],hi.prototype,"attributionDataUrl",null),p([f({type:["show","hide","hide-children"]})],hi.prototype,"listMode",void 0),p([f({json:{read:!0,write:!0}})],hi.prototype,"blendMode",void 0),p([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],hi.prototype,"isReference",void 0),p([f({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],hi.prototype,"operationalLayerType",void 0),p([f({type:Boolean})],hi.prototype,"resampling",void 0),p([f()],hi.prototype,"sourceJSON",void 0),p([f({type:Ke})],hi.prototype,"spatialReference",void 0),p([Ee("spatialReference",["spatialReference","tileInfo"])],hi.prototype,"readSpatialReference",null),p([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],hi.prototype,"path",void 0),p([f({readOnly:!0})],hi.prototype,"sublayers",void 0),p([Re("sublayers",{layers:{type:[_3]}})],hi.prototype,"writeSublayers",null),p([f({json:{read:!1,write:!1}})],hi.prototype,"popupEnabled",void 0),p([f()],hi.prototype,"tileServers",null),p([ur("tileServers")],hi.prototype,"castTileServers",null),p([f({readOnly:!0,json:{read:!1}})],hi.prototype,"type",void 0),p([f(M_)],hi.prototype,"url",void 0),hi=V7=p([W("esri.layers.TileLayer")],hi);const yye=Symbol("default-fetch-tile");hi.prototype.fetchTile[yye]=!0;const Yz=hi,uMt=Object.freeze(Object.defineProperty({__proto__:null,default:Yz},Symbol.toStringTag,{value:"Module"})),cMt=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function lC(e){return e!=null&&cMt.some(([t,r])=>e>=t&&e<=r)}const hMt={visible:"visibleSublayers"};let th=class extends mt{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",t=>this.notifyChange(hMt[t.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,r=e?.sublayers,n=[],i=s=>{const{minScale:o,maxScale:a,sublayers:l,visible:u}=s;u&&(t===0||(o===0||t<=o)&&(a===0||t>=a))&&(l?l.forEach(i):n.push(s))};return r?.forEach(i),n}toJSON(){const{layer:e,layers:t}=this,{imageFormat:r,imageTransparency:n,version:i}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:n?"TRUE":"FALSE",version:i,layers:t}}};p([f()],th.prototype,"layer",null),p([f({readOnly:!0})],th.prototype,"layers",null),p([f({type:Number})],th.prototype,"scale",void 0),p([f({readOnly:!0})],th.prototype,"version",null),p([f({readOnly:!0})],th.prototype,"visibleSublayers",null),th=p([W("esri.layers.support.ExportWMSImageParameters")],th);var x4;let pMt=0,Ln=x4=class extends b_(J5){constructor(e){super(e),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([ru(()=>this.sublayers,"after-add",({item:t})=>{t.parent=this,t.layer=this.layer},Di),ru(()=>this.sublayers,"after-remove",({item:t})=>{t.layer=t.parent=null},Di),Et(()=>this.sublayers,(t,r)=>{if(r)for(const n of r)n.layer=n.parent=null;if(t)for(const n of t)n.parent=this,n.layer=this.layer},Di),Et(()=>this.layer,t=>{if(this.sublayers)for(const r of this.sublayers)r.layer=t},Di)])}get id(){return this._get("id")??pMt++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t.legendUrl??t.legendURL??null}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}castSublayers(e){return Nr(st.ofType(x4),e)}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new x4;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map(t=>t.clone())??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};p([f()],Ln.prototype,"description",void 0),p([f({readOnly:!0})],Ln.prototype,"dimensions",void 0),p([f({type:jt,json:{name:"extent"}})],Ln.prototype,"fullExtent",void 0),p([f()],Ln.prototype,"fullExtents",void 0),p([f({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],Ln.prototype,"id",null),p([f({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],Ln.prototype,"legendUrl",void 0),p([Ee("legendUrl",["legendUrl","legendURL"])],Ln.prototype,"readLegendUrl",null),p([f({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Ln.prototype,"legendEnabled",void 0),p([f()],Ln.prototype,"layer",void 0),p([f()],Ln.prototype,"maxScale",void 0),p([f()],Ln.prototype,"minScale",void 0),p([f({readOnly:!0})],Ln.prototype,"effectiveScaleRange",null),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],Ln.prototype,"name",void 0),p([f()],Ln.prototype,"parent",void 0),p([f({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],Ln.prototype,"popupEnabled",void 0),p([f({type:Boolean,json:{write:{ignoreOrigin:!0}}})],Ln.prototype,"queryable",void 0),p([f()],Ln.prototype,"sublayers",void 0),p([ur("sublayers")],Ln.prototype,"castSublayers",null),p([f({type:[Number],json:{read:{source:"spatialReferences"}}})],Ln.prototype,"spatialReferences",void 0),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],Ln.prototype,"title",void 0),p([f({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],Ln.prototype,"visible",null),Ln=x4=p([W("esri.layers.support.WMSSublayer")],Ln);const G7=Ln,ZQ={84:4326,83:4269,27:4267};function dMt(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const r=e.documentElement;if(r.nodeName==="ServiceExceptionReport"){const q=Array.prototype.slice.call(r.childNodes).map(Q=>Q.textContent).join(`\r
`);throw new ie("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",q)}const n=Eo("Capability",r),i=Eo("Service",r),s=n&&Eo("Request",n);if(!n||!i||!s)return null;const o=Eo("Layer",n);if(!o)return null;const a=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",l=oh("Title",i,"")||oh("Name",i,""),u=oh("AccessConstraints",i,""),c=/^none$/i.test(u)?"":u,h=oh("Abstract",i,""),d=parseInt(oh("MaxWidth",i,"5000"),10),m=parseInt(oh("MaxHeight",i,"5000"),10),y=YQ(s,"GetMap"),g=JQ(s,"GetMap"),b=T4(o,a,t);if(!b)return null;let S,E=0;const x=Array.prototype.slice.call(n.childNodes),w=b.sublayers??[],T=q=>{q!=null&&w.push(q)};x.forEach(q=>{q.nodeName==="Layer"&&(E===0?S=q:(E===1&&b.name&&(b.name="",T(T4(S,a,t))),T(T4(q,a,t))),E++)});let I=b.sublayers,M=b.extent;const C=b.fullExtents??[];if(I||(I=[]),I.length===0&&I.push(b),!M){const q=new jt(I[0].extent);b.extent=q.toJSON(),M=b.extent}const k=b.spatialReferences.length>0?b.spatialReferences:gye(b),N=JQ(s,"GetFeatureInfo"),F=N?YQ(s,"GetFeatureInfo"):null,P=vye(I),B=b.minScale||0,O=b.maxScale||0,v=b.dimensions??[],A=P.reduce((q,Q)=>q.concat(Q.dimensions??[]),[]),R=v.concat(A).filter(wye);let U=null;if(R.length){const q=R.map(Q=>{const{extent:ee}=Q;return yMt(ee)?ee.map(Y=>Y.getTime()):ee?.map(Y=>[Y.min.getTime(),Y.max.getTime()])}).flat(2).filter(Qo);U={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...q),Math.max(...q)]}}return{copyright:c,description:h,dimensions:v,extent:M,fullExtents:C,featureInfoFormats:F,featureInfoUrl:N,mapUrl:g,maxWidth:d,maxHeight:m,maxScale:O,minScale:B,layers:P,spatialReferences:k,supportedImageFormatTypes:y,timeInfo:U,title:l,version:a}}function fMt(e){const t=e.filter(r=>r.popupEnabled&&r.name&&r.queryable);return t.length?t.map(({name:r})=>r).join():null}function gye(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const r=gye(t);if(r.length>0)return r}return[]}function vye(e){let t=[];for(const r of e)t.push(r),r.sublayers?.length&&(t=t.concat(vye(r.sublayers)),delete r.sublayers);return t}function S4(e,t,r){return t.getAttribute(e)??r}function mMt(e,t,r,n){const i=Eo(e,r);return i?S4(t,i,n):n}function Eo(e,t){for(let r=0;r<t.childNodes.length;r++){const n=t.childNodes[r];if(bye(n)&&n.nodeName===e)return n}return null}function E4(e,t){if(t==null)return[];const r=[];for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];bye(i)&&i.nodeName===e&&r.push(i)}return r}function oh(e,t,r){return Eo(e,t)?.textContent??r}function a2(e,t,r){if(!e)return null;const n=parseFloat(e.getAttribute("minx")),i=parseFloat(e.getAttribute("miny")),s=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,c;r?(a=isNaN(i)?-Number.MAX_VALUE:i,l=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(o)?Number.MAX_VALUE:o,c=isNaN(s)?Number.MAX_VALUE:s):(a=isNaN(n)?-Number.MAX_VALUE:n,l=isNaN(i)?-Number.MAX_VALUE:i,u=isNaN(s)?Number.MAX_VALUE:s,c=isNaN(o)?Number.MAX_VALUE:o);const h=new Ke({wkid:t});return new jt({xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:h})}function JQ(e,t){const r=Eo(t,e);if(r){const n=Eo("DCPType",r);if(n){const i=Eo("HTTP",n);if(i){const s=Eo("Get",i);if(s){let o=mMt("OnlineResource","xlink:href",s,null);if(o){const a=o.indexOf("&");return a!==-1&&a===o.length-1&&(o=o.slice(0,-1)),vMt(o,["service","request"])}}}}}return null}function YQ(e,t){const r=E4("Operation",e);if(!r.length)return E4("Format",Eo(t,e)).map(({textContent:i})=>i).filter(Qo);const n=[];for(const i of r)if(i.getAttribute("name")===t){const s=E4("Format",i);for(const{textContent:o}of s)o!=null&&n.push(o)}return n}function XQ(e,t,r){const n=Eo(t,e);if(!n)return r;const{textContent:i}=n;if(i==null||i==="")return r;const s=Number(i);return isNaN(s)?r:s}function T4(e,t,r){if(!e)return null;const n={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},i=Eo("LatLonBoundingBox",e),s=Eo("EX_GeographicBoundingBox",e);let o=null;i&&(o=a2(i,4326)),s&&(o=new jt(0,0,0,0,new Ke({wkid:4326})),o.xmin=parseFloat(oh("westBoundLongitude",s,"0")),o.ymin=parseFloat(oh("southBoundLatitude",s,"0")),o.xmax=parseFloat(oh("eastBoundLongitude",s,"0")),o.ymax=parseFloat(oh("northBoundLatitude",s,"0"))),i||s||(o=new jt(-180,-90,180,90,new Ke({wkid:4326}))),n.minScale=XQ(e,"MaxScaleDenominator",0),n.maxScale=XQ(e,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(t)?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(l=>{if(l.nodeName==="Name")n.name=l.textContent||"";else if(l.nodeName==="Title")n.title=l.textContent||"";else if(l.nodeName==="Abstract")n.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const h=parseInt(u.slice(5),10);h===0||isNaN(h)||o||(o=t==="1.3.0"?a2(l,h,lC(h)):a2(l,h))}const c=u?.indexOf(":");if(c&&c>-1){let h=parseInt(u.slice(c+1),10);h===0||isNaN(h)||(h=ZQ[h]??h);const d=t==="1.3.0"?a2(l,h,lC(h)):a2(l,h);d&&n.fullExtents&&n.fullExtents.push(d)}}else if(l.nodeName===a)(l.textContent?.split(" ")??[]).forEach(u=>{let c=NaN;if(u.includes(":")){const[h,d]=u.toUpperCase().split(":");h!=="CRS"&&h!=="EPSG"||(c=parseInt(d,10))}else c=parseInt(u,10);if(c!==0&&!isNaN(c)){const h=ZQ[c]??c;n.spatialReferences.includes(h)||n.spatialReferences.push(h)}});else if(l.nodeName!=="Style"||n.legendUrl){if(l.nodeName==="Layer"){const u=T4(l,t,r);u&&(u.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(u))}}else{const u=Eo("LegendURL",l);if(u){const c=Eo("OnlineResource",u);c&&(n.legendUrl=c.getAttribute("xlink:href"))}}}),n.extent=o?.toJSON(),n.dimensions=E4("Dimension",e).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),c=l.getAttribute("units"),h=l.textContent,d=l.getAttribute("unitSymbol")??void 0,m=l.getAttribute("default")??void 0,y=S4("default",l,"0")!=="0",g=S4("nearestValue",l,"0")!=="0",b=S4("current",l,"0")!=="0";return wye({name:u,units:c})?{name:"time",units:"ISO8601",extent:eK(h),default:eK(m),multipleValues:y,nearestValue:g,current:b}:gMt({name:u,units:c})?{name:"elevation",units:c,extent:QQ(h),unitSymbol:d,default:QQ(m),multipleValues:y,nearestValue:g}:{name:u,units:c,extent:KQ(h),unitSymbol:d,default:KQ(m),multipleValues:y,nearestValue:g}}),n}function yMt(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function bye(e){return e.nodeType===Node.ELEMENT_NODE}function gMt(e){return/^elevation$/i.test(e.name)&&/^(epsg|crs):\d+$/i.test(e.units)}function wye(e){return/^time$/i.test(e.name)&&/^iso8601$/i.test(e.units)}function vMt(e,t){const r=[],n=Zn(e);for(const i in n.query)n.query.hasOwnProperty(i)&&(t.includes(i.toLowerCase())||r.push(i+"="+n.query[i]));return n.path+(r.length?"?"+r.join("&"):"")}function QQ(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(n=>{const i=n.split("/");return i.length<2?null:{min:parseFloat(i[0]),max:parseFloat(i[1]),resolution:i.length>=3&&i[2]!=="0"?parseFloat(i[2]):void 0}}).filter(Qo):r.map(n=>parseFloat(n))}function KQ(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(n=>{const i=n.split("/");return i.length<2?null:{min:i[0],max:i[1],resolution:i.length>=3&&i[2]!=="0"?i[2]:void 0}}).filter(Qo):r}function eK(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(n=>{const i=n.split("/");return i.length<2?null:{min:aP(i[0]),max:aP(i[1]),resolution:i.length>=3&&i[2]!=="0"?bMt(i[2]):void 0}}).filter(Qo):r.map(n=>aP(n))}function aP(e){return Ut.fromISO(e,{zone:Ji.utcInstance}).toJSDate()}function bMt(e){const t=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,r=e.match(t);return r?{years:F1(r[1]),months:F1(r[2]),days:F1(r[3]),hours:F1(r[4]),minutes:F1(r[5]),seconds:F1(r[6])}:null}function F1(e){if(!e)return 0;const t=/(?:\d+(?:\.|,)\d+|\d+)/,r=e.match(t);if(!r)return 0;const n=r[0].replace(",",".");return Number(n)}function lP(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const wMt="0000-01-01T00:00:00Z",_Mt="9999-12-31T23:59:59Z";function tK(e){if(!e||e.isAllTime||e.isEmpty)return;const{start:t,end:r}=e;return t&&r&&t.getTime()===r.getTime()?`${lP(t)}`:`${t?lP(t):wMt}/${r?lP(r):_Mt}`}const rK=new Set([102100,3857,102113,900913]),xMt=new Set([3395,54004]);function SMt(e,t){let r=e.wkid;return t==null?r:(r!=null&&t.includes(r)||!e.latestWkid||(r=e.latestWkid),r!=null&&rK.has(r)?t.find(n=>rK.has(n))||t.find(n=>xMt.has(n))||102100:r)}const uP=new Pt({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function nK(e){return e==="text/html"}function iK(e){return e==="text/plain"}let hr=class extends Km(f3(g1(t0(m1(y1(kd(Od))))))){constructor(...e){super(...e),this.allSublayers=new Dm({getCollections:()=>[this.sublayers],getChildrenFunction:t=>t.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([ru(()=>this.sublayers,"after-add",({item:t})=>{t.parent=t.layer=this},Di),ru(()=>this.sublayers,"after-remove",({item:t})=>{t.layer=t.parent=null},Di),Et(()=>this.sublayers,(t,r)=>{if(r)for(const n of r)n.layer=n.parent=null;if(t)for(const n of t)n.parent=n.layer=this},Di)])}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}destroy(){this.allSublayers.destroy()}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(qo).then(()=>this._fetchService(t)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return r?new jt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(nK)??this.featureInfoFormats.find(iK)??null}set featureInfoFormat(e){e==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(nK(e)||iK(e))&&this._override("featureInfoFormat",e)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new Ke(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference?.wkid;e&&r?(t.spatialReferences=e.filter(n=>n!==r),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return sK(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return sK(t.layers,r)}writeSublayers(e,t,r,n){t.layers=[];const i=new Map,s=e.flatten(({sublayers:o})=>o??[]);for(const o of s)if(typeof o.parent?.id=="number"){const a=i.get(o.parent.id);a!=null?a.push(o.id):i.set(o.parent.id,[o.id])}for(const o of s){const a={sublayer:o,...n},l=o.write({parentLayerId:typeof o.parent?.id=="number"?o.parent.id:-1},a);if(i.has(o.id)&&(l.sublayerIds=i.get(o.id)),!o.sublayers&&o.name){const u=o.write({},a);delete u.id,t.layers.push(u)}}t.visibleLayers=s.filter(({visible:o,sublayers:a})=>o&&!a).map(({name:o})=>o).toArray()}set url(e){if(!e)return void this._set("url",e);const{path:t,query:r}=Zn(e);for(const i in r)/^(request|service)$/i.test(i)&&delete r[i];const n=_b(t,r??{});this._set("url",n)}createExportImageParameters(e,t,r,n){const i=n?.pixelRatio??1,s=sC({extent:e,width:t})*i,o=new th({layer:this,scale:s}),{xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:h}=e,d=SMt(h,this.spatialReferences),m=this.version==="1.3.0"&&lC(d)?`${l},${a},${c},${u}`:`${a},${l},${u},${c}`,y=o.toJSON(),g=this.version==="1.3.0"?"crs":"srs";return{bbox:m,[g]:d==null||isNaN(d)?void 0:"EPSG:"+d,...y}}async fetchImage(e,t,r,n){const i=this.mapUrl,s=this.createExportImageParameters(e,t,r,n);if(!s.layers){const l=document.createElement("canvas");return l.width=t,l.height=r,l}const o=tK(n?.timeExtent),a={responseType:"image",query:this._mixCustomParameters({width:t,height:r,...s,time:o,...this.refreshParameters}),signal:n?.signal};return Xe(i??"",a).then(l=>l.data)}async fetchImageBitmap(e,t,r,n){const i=this.mapUrl??"",s=this.createExportImageParameters(e,t,r,n);if(!s.layers){const u=document.createElement("canvas");return u.width=t,u.height=r,u}const o=tK(n?.timeExtent),a={responseType:"blob",query:this._mixCustomParameters({width:t,height:r,...s,time:o,...this.refreshParameters}),signal:n?.signal},{data:l}=await Xe(i,a);return rC(l,i,n?.signal)}fetchFeatureInfo(e,t,r,n,i){const s=sC({extent:e,width:t}),o=new th({layer:this,scale:s}),a=fMt(o.visibleSublayers);if(this.featureInfoUrl==null||a==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const l=this.version==="1.3.0"?{I:n,J:i}:{x:n,y:i},u={query_layers:a,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},c={...this.createExportImageParameters(e,t,r),...u},h=this._mixCustomParameters(c);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(h):this._defaultFetchFeatureInfoFunction(_b(this.featureInfoUrl,h))}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}findSublayerByName(e){return this.allSublayers.find(t=>t.name===e)}serviceSupportsSpatialReference(e){return kwt(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(t=>{const r=t===900913?Ke.WebMercator:new Ke({wkid:t});return gn(r,e)})}_defaultFetchFeatureInfoFunction(e){const t=document.createElement("iframe");t.src=Loe(e),t.style.border="none",t.style.margin="0",t.style.width="100%",t.setAttribute("sandbox","");const r=new Ad({title:this.title,content:t}),n=new dl({sourceLayer:this,popupTemplate:r});return Promise.resolve([n])}async _fetchService(e){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:t,query:r}=this.parsedUrl,{data:n}=await Xe(t,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=dMt(n)}if(this.parsedUrl){const t=new ic(this.parsedUrl.path),{httpsDomains:r}=pr.request;t.scheme!=="https"||t.port&&t.port!=="443"||!t.host||r.includes(t.host)||r.push(t.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new ie("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function EMt(e,t){return e.some(r=>{for(const n in r)if(Aoe(r,n,null,t))return!0;return!1})}function sK(e,t,r){e=e??[];const n=new Map;e.every(s=>s.id==null)&&(e=se(e)).forEach((s,o)=>s.id=o);for(const s of e){const o=new G7;o.read(s,t),r&&!r.includes(o.name)&&(o.visible=!1),n.set(o.id,o)}const i=[];for(const s of e){const o=s.id!=null?n.get(s.id):null;if(o)if(s.parentLayerId!=null&&s.parentLayerId>=0){const a=n.get(s.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new st),a.sublayers.push(o)}else i.push(o)}return i}p([f({readOnly:!0})],hr.prototype,"allSublayers",void 0),p([f({json:{type:Object,write:!0}})],hr.prototype,"customParameters",void 0),p([f({json:{type:Object,write:!0}})],hr.prototype,"customLayerParameters",void 0),p([f({type:String,json:{write:!0}})],hr.prototype,"copyright",void 0),p([f()],hr.prototype,"description",void 0),p([f({readOnly:!0})],hr.prototype,"dimensions",void 0),p([f({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],hr.prototype,"fullExtent",void 0),p([Ee(["web-document","portal-item"],"fullExtent",["extent"])],hr.prototype,"readFullExtentFromItemOrMap",null),p([Re(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],hr.prototype,"writeFullExtent",null),p([f()],hr.prototype,"fullExtents",void 0),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],hr.prototype,"featureInfoFormat",null),p([f({type:[String],readOnly:!0})],hr.prototype,"featureInfoFormats",void 0),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],hr.prototype,"featureInfoUrl",void 0),p([f()],hr.prototype,"fetchFeatureInfoFunction",void 0),p([f({type:String,json:{origins:{"web-document":{default:"image/png",type:uP.jsonValues,read:{reader:uP.read,source:"format"},write:{writer:uP.write,target:"format"}}}}})],hr.prototype,"imageFormat",void 0),p([Ee("imageFormat",["supportedImageFormatTypes"])],hr.prototype,"readImageFormat",null),p([f({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],hr.prototype,"imageMaxHeight",void 0),p([f({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],hr.prototype,"imageMaxWidth",void 0),p([f()],hr.prototype,"imageTransparency",void 0),p([f(rO)],hr.prototype,"legendEnabled",void 0),p([f({type:["show","hide","hide-children"]})],hr.prototype,"listMode",void 0),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],hr.prototype,"mapUrl",void 0),p([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],hr.prototype,"isReference",void 0),p([f({type:["WMS"]})],hr.prototype,"operationalLayerType",void 0),p([f()],hr.prototype,"resourceInfo",void 0),p([f({type:Ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],hr.prototype,"spatialReference",void 0),p([Ee(["web-document","portal-item"],"spatialReference",["spatialReferences"])],hr.prototype,"readSpatialReferenceFromItemOrDocument",null),p([f({type:[Ft],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],hr.prototype,"spatialReferences",void 0),p([Re(["web-document","portal-item"],"spatialReferences")],hr.prototype,"writeSpatialReferences",null),p([f({type:st.ofType(G7),json:{write:{target:"layers",overridePolicy(e,t,r){if(EMt(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],hr.prototype,"sublayers",void 0),p([Ee(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],hr.prototype,"readSublayersFromItemOrMap",null),p([Ee("service","sublayers",["layers"])],hr.prototype,"readSublayers",null),p([Re("sublayers",{layers:{type:[G7]},visibleLayers:{type:[String]}})],hr.prototype,"writeSublayers",null),p([f({json:{read:!1},readOnly:!0,value:"wms"})],hr.prototype,"type",void 0),p([f(M_)],hr.prototype,"url",null),p([f({type:String,json:{write:{ignoreOrigin:!0}}})],hr.prototype,"version",void 0),hr=p([W("esri.layers.WMSLayer")],hr);const _ye=hr,TMt=Object.freeze(Object.defineProperty({__proto__:null,default:_ye},Symbol.toStringTag,{value:"Module"}));var z7;let I4=z7=class extends we{constructor(e){super(e),this.type="none"}clone(){return new z7({type:this.type})}};p([tt({none:"none",stayAbove:"stay-above"})],I4.prototype,"type",void 0),I4=z7=p([W("esri.ground.NavigationConstraint")],I4);var $7;let wp=$7=class extends o_(pc){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new st;const t=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&Pe.getLogger(this).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=n=>{n.parent=null};this.addHandles([this.layers.on("after-add",n=>t(n.item)),this.layers.on("after-remove",n=>r(n.item))])}initialize(){this.when().catch(e=>{Fi(e)||Pe.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)pn(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",fd(e,this._get("layers")))}writeLayers(e,t,r,n){const i=[];e&&(n={...n,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};bgt(s)().write(o,n)&&i.push(o)}else n?.messages&&n.messages.push(new ie("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=i}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return UT(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await Me(()=>import("./ElevationQuery-CPj-liUn-B8bRoP1N.js"),__vite__mapDeps([160,1,2]),import.meta.url);Gr(t);const n=new r,i=this.layers.filter(oK).toArray();return n.queryAll(i,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await Me(()=>import("./ElevationQuery-CPj-liUn-B8bRoP1N.js"),__vite__mapDeps([160,1,2]),import.meta.url);Gr(t);const n=new r,i=this.layers.filter(oK).toArray();return n.createSamplerAll(i,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:se(this.surfaceColor),navigationConstraint:se(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new $7({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const n=t?.origin||"web-scene",i=t?.portal||null,s=t?.url||null,{populateOperationalLayers:o}=await Me(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-OT3cNiQJ-CxTWe27Y.js");return{populateOperationalLayers:l}},__vite__mapDeps([8,9,10,11,1,2]),import.meta.url);Gr(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:n,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function IMt(e){return e&&"createElevationSampler"in e}function oK(e){return e.type==="elevation"||IMt(e)}p([f({json:{read:!1}})],wp.prototype,"layers",null),p([Re("layers")],wp.prototype,"writeLayers",null),p([f({readOnly:!0})],wp.prototype,"resourceInfo",void 0),p([f({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Ft,read:{reader:dw,source:"transparency"},write:{writer:(e,t)=>{t.transparency=TR(e)},target:"transparency"}}})],wp.prototype,"opacity",void 0),p([f({type:Ze,json:{type:[Ft],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],wp.prototype,"surfaceColor",void 0),p([f({type:I4,json:{write:!0}})],wp.prototype,"navigationConstraint",void 0),wp=$7=p([W("esri.Ground")],wp);const uC=wp,XI=new WeakMap;function xye(e){return!e.destroyed&&(XI.has(e)||e.addHandles([Et(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||xye(t))},t=>XI.set(e,t),_a),gr(()=>XI.delete(e))]),XI.get(e))}function AMt(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function MMt(e){return!(!AMt(e)||!Bae(e)?.operations?.supportsEditing||"editingEnabled"in e&&!Vae(e)||xye(e))}const cP=()=>Pe.getLogger("esri.support.basemapUtils");function CMt(){return{}}function kMt(e){for(const t in e){const r=e[t];pn(r),delete e[t]}}function RMt(e,t){let r;if(typeof e=="string"){const n=e in h6,i=!n&&e.includes("/");if(!n&&!i){if(pr.apiKey)cP().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(h6).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");cP().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${s}`)}return null}t&&(r=t[e]),r||(r=n?Eb.fromId(e):new Eb({style:{id:e}}),t&&(t[e]=r))}else r=Nr(Eb,e);return r?.destroyed&&(cP().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function Sye(e){return new Dm({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function hP(e){for(const t of e.values())t?.destroy();e.clear()}const aK={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function OMt(e){let t=null;if(typeof e=="string")if(e in aK){const r=aK[e];t=new uC({resourceInfo:{data:{layers:[r]}}})}else Pe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Nr(uC,e);return t}function q7(e,t,r){let n,i;if(e)for(let s=0,o=e.length;s<o;s++){if(n=e.at(s),n?.[t]===r)return n;if(n?.type==="group"&&(i=q7(n.layers,t,r),i))return i}}const Eye=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new st;const n=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},i=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||Pe.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void Pe.getLogger(this).error("#add()","Cannot add layer to itself.");n(o.item)}),this.layers.on("after-add",o=>i(o.item)),this.layers.on("after-remove",o=>s(o.item))])}destroy(){const r=this.layers.toArray();for(const n of r)n.destroy();this.layers.destroy()}set layers(r){this._set("layers",fd(r,this._get("layers")))}add(r,n){const i=this.layers;if(n=i.getNextIndex(n),r instanceof Od){const s=r;s.parent===this?this.reorder(s,n):i.add(s,n)}else bc(r)?r.then(s=>{this.destroyed||this.add(s,n)}):Pe.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,n){const i=this.layers;let s=i.getNextIndex(n);r.slice().forEach(o=>{o.parent!==this?(i.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(r){return q7(this.layers,"id",r)}findLayerByUid(r){return q7(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,n){return this.layers.reorder(r,n)}layerAdded(r){}layerRemoved(r){}};return p([f()],t.prototype,"layers",null),t=p([W("esri.support.LayersMixin")],t),t};function H7(e,t,r){if(e)for(let n=0,i=e.length;n<i;n++){const s=e.at(n);if(s[t]===r)return s;if(s?.type==="group"){const o=H7(s.tables,t,r);if(o)return o}}}const Tye=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new st,this.addHandles([this.tables.on("after-add",n=>{const i=n.item;i.parent&&i.parent!==this&&"tables"in i.parent&&i.parent.tables.remove(i),i.parent=this,i.type!=="feature"&&Pe.getLogger(this).error(`Layer 'title:${i.title}, id:${i.id}' of type '${i.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const n of r)n.destroy();this.tables.destroy()}set tables(r){this._set("tables",fd(r,this._get("tables")))}findTableById(r){return H7(this.tables,"id",r)}findTableByUid(r){return H7(this.tables,"uid",r)}};return p([f()],t.prototype,"tables",null),t=p([W("esri.support.TablesMixin")],t),t};let Pu=class extends Tye(Eye(jh.EventedMixin(mt))){constructor(e){super(e),this.allLayers=new Dm({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Sye(this),this.basemap=null,this.editableLayers=new Dm({getCollections:()=>[this.allLayers],itemFilterFunction:MMt}),this.ground=new uC,this._basemapCache=CMt()}destroy(){kMt(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=pn(this.basemap),pn(this.ground),this._set("ground",null)}castBasemap(e){return RMt(e,this._basemapCache)}castGround(e){return OMt(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};p([f({readOnly:!0,dependsOn:[]})],Pu.prototype,"allLayers",void 0),p([f({readOnly:!0})],Pu.prototype,"allTables",void 0),p([f({type:Eb,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Pu.prototype,"basemap",void 0),p([ur("basemap")],Pu.prototype,"castBasemap",null),p([f({readOnly:!0})],Pu.prototype,"editableLayers",void 0),p([f({type:uC,nonNullable:!0})],Pu.prototype,"ground",void 0),p([ur("ground")],Pu.prototype,"castGround",null),p([f()],Pu.prototype,"undoRedo",void 0),Pu=p([W("esri.Map")],Pu);const Iye=Pu;function NMt(e){const{exifInfo:t,exifName:r,tagName:n}=e;if(!t||!r||!n)return null;const i=t.find(s=>s.name===r);return i?LMt({tagName:n,tags:i.tags}):null}function LMt(e){const{tagName:t,tags:r}=e;return!r||!t?null:r.find(n=>n.name===t)?.value||null}var W7;const PMt={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let fa=W7=class extends we{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=NMt({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return PMt[t]||null}clone(){return new W7({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};p([f({type:String})],fa.prototype,"contentType",void 0),p([f()],fa.prototype,"exifInfo",void 0),p([f({readOnly:!0})],fa.prototype,"orientationInfo",null),p([f({type:Ft})],fa.prototype,"id",void 0),p([f({type:String})],fa.prototype,"globalId",void 0),p([f({type:String})],fa.prototype,"keywords",void 0),p([f({type:String})],fa.prototype,"name",void 0),p([f({json:{read:!1}})],fa.prototype,"parentGlobalId",void 0),p([f({json:{read:!1}})],fa.prototype,"parentObjectId",void 0),p([f({type:Ft})],fa.prototype,"size",void 0),p([f({json:{read:!1}})],fa.prototype,"url",void 0),fa=W7=p([W("esri.rest.query.support.AttachmentInfo")],fa);const DMt=fa,Xz={convertToGEGeometry:FMt,exportPoint:UMt,exportPolygon:VMt,exportPolyline:zMt,exportMultipoint:qMt,exportExtent:WMt};function FMt(e,t){return t==null?null:e.convertJSONToGeometry(t)}let jMt=class{constructor(e,t,r){this.x=e,this.y=t,this.spatialReference=r,this.z=void 0,this.m=void 0}};function UMt(e,t,r){const n=new jMt(e.getPointX(t),e.getPointY(t),r),i=e.hasZ(t),s=e.hasM(t);return i&&(n.z=e.getPointZ(t)),s&&(n.m=e.getPointM(t)),n}let BMt=class{constructor(e,t,r,n){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)}};function VMt(e,t,r){return new BMt(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))}let GMt=class{constructor(e,t,r,n){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)}};function zMt(e,t,r){return new GMt(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))}let $Mt=class{constructor(e,t,r,n){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)}};function qMt(e,t,r){return new $Mt(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))}let HMt=class{constructor(e,t,r,n,i){this.xmin=e,this.ymin=t,this.xmax=r,this.ymax=n,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}};function WMt(e,t,r){const n=e.hasZ(t),i=e.hasM(t),s=new HMt(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){const o=e.getZExtent(t);s.zmin=o.vmin,s.zmax=o.vmax}if(i){const o=e.getMExtent(t);s.mmin=o.vmin,s.mmax=o.vmax}return s}const pP=[0,0];function Aye(e,t){if(!t)return null;if("x"in t){const r={x:0,y:0};return[r.x,r.y]=e(t.x,t.y,pP),t.z!=null&&(r.z=t.z),t.m!=null&&(r.m=t.m),r}if("xmin"in t){const r={xmin:0,ymin:0,xmax:0,ymax:0};return[r.xmin,r.ymin]=e(t.xmin,t.ymin,pP),[r.xmax,r.ymax]=e(t.xmax,t.ymax,pP),t.hasZ&&(r.zmin=t.zmin,r.zmax=t.zmax,r.hasZ=!0),t.hasM&&(r.mmin=t.mmin,r.mmax=t.mmax,r.hasM=!0),r}return"rings"in t?{rings:lK(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:lK(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:Mye(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function lK(e,t){const r=[];for(const n of e)r.push(Mye(n,t));return r}function Mye(e,t){const r=[];for(const n of e){const i=t(n[0],n[1],[0,0]);r.push(i),n.length>2&&i.push(n[2]),n.length>3&&i.push(n[3])}return r}async function Qz(e,t){if(!e||!t)return;const r=Array.isArray(e)?e.map(n=>n.geometry!=null?n.geometry.spatialReference:null).filter(Qo):[e];await d3(r.map(n=>({source:n,dest:t})))}const Cye=Aye.bind(null,om),kye=Aye.bind(null,zT);function Kz(e,t,r,n){if(!e||(r||(r=t,t=e.spatialReference),!xo(t)||!xo(r)||gn(t,r)))return e;if(xb(t,r)){const i=Va(r)?Cye(e):kye(e);return i.spatialReference=r,i}return bw(Xz,[e],t,r,null,n)[0]}let ZMt=class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,t,r,n){if(!e?.length||!t||!r||gn(t,r))return e;const i={geometries:e,inSpatialReference:t,outSpatialReference:r,geographicTransformation:n,resolve:Ko()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:t,inSpatialReference:r,outSpatialReference:n,resolve:i,geographicTransformation:s}=e;xb(r,n)?Va(n)?i(t.map(Cye)):i(t.map(kye)):i(bw(Xz,t,r,n,s,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};const JMt=new ZMt;function YMt(e,t,r,n){return JMt.push(e,t,r,n)}const Z7=new Pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J7=Object.freeze({});async function XMt(e,t,r){const{outFields:n,orderByFields:i,groupByFieldsForStatistics:s,outStatistics:o}=e;if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(i)for(let a=0;a<i.length;a++)i[a]=i[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),Rye(e,t,r)}async function Rye(e,t,r){if(!e)return null;let{where:n}=e;if(e.where=n=n?.trim(),(!n||/^1 *= *1$/.test(n)||t&&t===n)&&(e.where=null),!e.geometry)return e;let i=await KMt(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:s}=e.geometry;i=ble(i),i.spatialReference=s}if(i){await Qz(i.spatialReference,r),i=QMt(i,r);const s=(await cu(An(i)))[0];if(s==null)throw J7;const o="quantizationParameters"in e&&e.quantizationParameters?.tolerance||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,a=o&&Oye(i,r)?{densificationStep:8*o}:void 0,l=s.toJSON(),u=Kz(l,l.spatialReference,r,a);if(!u)throw J7;u.spatialReference=r,e.geometry=u}return e}function Oye(e,t){if(!e)return!1;const r=e.spatialReference;return($T(e)||gh(e)||f_(e))&&!gn(r,t)&&!nu(r,t)}function QMt(e,t){const r=e.spatialReference;return Oye(e,t)&&$T(e)?{spatialReference:r,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function KMt(e){const{distance:t,units:r}=e,n=e.geometry;if(t==null||"vertexAttributes"in n)return n;const i=n.spatialReference,s=r?Z7.fromJSON(r):c_(i),o=i&&(u_(i)||Va(i))?n:await Qz(i,vE).then(()=>Kz(n,vE));return(await e4t())(o.spatialReference,o,t,s)}async function e4t(){return(await Me(()=>import("./geometryEngineJSON-cnFh4oQ2-BA0BxkoC.js"),__vite__mapDeps([21,22,1,2]),import.meta.url).then(e=>e.g)).geodesicBuffer}let Bp=class extends rr(we){constructor(e){super(e),this.alias=null,this.expression=null,this.field=null,this.responseType=null}};p([f({type:String,json:{write:!0}})],Bp.prototype,"alias",void 0),p([f({type:String,json:{write:!0}})],Bp.prototype,"expression",void 0),p([f({type:String,json:{write:!0}})],Bp.prototype,"field",void 0),p([f({type:String,json:{write:!0}})],Bp.prototype,"responseType",void 0),Bp=p([W("esri.rest.support.BinParametersAttributes")],Bp);const QI=Bp;Bp.from=Nr(Bp);const t4t=new Pt({naturalLog:"natural-log",squareRoot:"square-root"});let Gc=class extends rr(we){constructor(e){super(e),this.expression=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitByAttributes=null,this.stackByAttributes=null,this.transformation=null}};p([f({type:String,json:{write:!0}})],Gc.prototype,"expression",void 0),p([f({type:String,json:{name:"onField",write:!0}})],Gc.prototype,"field",void 0),p([f({type:String,json:{write:!0}})],Gc.prototype,"firstDayOfWeek",void 0),p([f({type:String,json:{write:!0}})],Gc.prototype,"hideUpperBound",void 0),p([f({type:QI,json:{write:{target:{splitBy:{type:String},splitByField:{type:String},splitByAlias:{type:String}},writer:(e,t)=>{e.field!=null&&(t.splitByField=e.field),e.expression!=null&&(t.splitBy=e.expression),e.alias!=null&&(t.splitByAlias=e.alias)}},read:{source:["splitBy","splitByField","splitByAlias"],reader:(e,t)=>new QI({field:t.splitByField,expression:t.splitBy,alias:t.splitByAlias})}}})],Gc.prototype,"splitByAttributes",void 0),p([f({type:QI,json:{write:{target:{stackBy:{type:String},stackByField:{type:String},stackByAlias:{type:String},jsonStyle:{type:String}},writer:(e,t)=>{e.field!=null&&(t.stackByField=e.field),e.expression!=null&&(t.stackBy=e.expression),e.alias!=null&&(t.stackByAlias=e.alias),e.responseType!=null&&(t.jsonStyle=e.responseType)},overridePolicy(){return{enabled:this.stackByAttributes?.field!=null||this.stackByAttributes?.expression!=null}}},read:{source:["stackBy","stackByField","stackByAlias","jsonStyle"],reader:(e,t)=>new QI({field:t.stackByField,expression:t.stackBy,alias:t.stackByAlias,responseType:t.jsonStyle})}}})],Gc.prototype,"stackByAttributes",void 0),p([tt(t4t)],Gc.prototype,"transformation",void 0),Gc=p([W("esri.rest.support.BinParametersBase")],Gc);const x3=Gc,r4t=Mn()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),uK="percent-of-total",cK="field",Nye=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let r=this._get("normalizationType");const n=!!this.normalizationField,i=this.normalizationTotal!=null;return n||i?(r=n&&cK||i&&uK||null,n&&i&&Pe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):r!==cK&&r!==uK||(r=null),r}set normalizationType(r){this._set("normalizationType",r)}};return p([f({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),p([f({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),p([f({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),p([f({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),p([tt(r4t,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=p([W("esri.rest.support.NormalizationBinParametersMixin")],t),t};function hK(e,t,r){_i(r,e instanceof Date?e.getTime():e,t)}let Vp=class extends Nye(x3){constructor(e){super(e),this.bins=null,this.end=null,this.start=null,this.type="auto-interval"}};p([f({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],Vp.prototype,"bins",void 0),p([f({json:{name:"parameters.end",write:{writer:hK}}})],Vp.prototype,"end",void 0),p([f({json:{name:"parameters.start",write:{writer:hK}}})],Vp.prototype,"start",void 0),p([tt({autoIntervalBin:"auto-interval"},{readOnly:!0})],Vp.prototype,"type",void 0),Vp=p([W("esri.rest.support.AutoIntervalBinParameters")],Vp);const n4t=Vp;Vp.from=Nr(Vp);const i4t=Mn()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let Jy=class extends rr(we){constructor(e){super(e),this.value=null,this.units=null}};p([f({type:Number,json:{name:"number",write:!0}})],Jy.prototype,"value",void 0),p([tt(i4t,{name:"unit"})],Jy.prototype,"units",void 0),Jy=p([W("esri.rest.support.DateBinTimeInterval")],Jy);const pK=Jy;Jy.from=Nr(Jy);function dK(e,t,r){_i(r,typeof e=="string"?e:e?.getTime(),t)}function fK(e,t){const r=e.parameters[t];return r?typeof r=="string"?r:new Date(r):null}let rh=class extends x3{constructor(e){super(e),this.end=null,this.interval=null,this.offset=null,this.start=null,this.type="date"}};p([f({cast:e=>e?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>fK(t,"end")},write:{writer:dK}}})],rh.prototype,"end",void 0),p([f({type:pK,json:{name:"parameters",write:!0}})],rh.prototype,"interval",void 0),p([f({type:pK,json:{name:"parameters.offset",write:!0}})],rh.prototype,"offset",void 0),p([f({cast:e=>e?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>fK(t,"start")},write:{writer:dK}}})],rh.prototype,"start",void 0),p([tt({dateBin:"date"},{readOnly:!0})],rh.prototype,"type",void 0),rh=p([W("esri.rest.support.DateBinParameters")],rh);const s4t=rh;rh.from=Nr(rh);function o4t(e){return e[0]instanceof Date}function a4t(e,t,r){_i(r,e&&o4t(e)?e.map(n=>n.getTime()):e,t)}let Yy=class extends x3{constructor(e){super(e),this.boundaries=null,this.type="fixed-boundaries"}};p([f({json:{name:"parameters.boundaries",write:{writer:a4t}}})],Yy.prototype,"boundaries",void 0),p([tt({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],Yy.prototype,"type",void 0),Yy=p([W("esri.rest.support.FixedBoundariesBinParameters")],Yy);const l4t=Yy;Yy.from=Nr(Yy);function mK(e,t,r){_i(r,e instanceof Date?e.getTime():e,t)}let Gp=class extends Nye(x3){constructor(e){super(e),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};p([f({json:{name:"parameters.end",write:{writer:mK}}})],Gp.prototype,"end",void 0),p([f({type:Number,json:{name:"parameters.interval",write:!0}})],Gp.prototype,"interval",void 0),p([f({json:{name:"parameters.start",write:{writer:mK}}})],Gp.prototype,"start",void 0),p([tt({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],Gp.prototype,"type",void 0),Gp=p([W("esri.rest.support.FixedIntervalBinParameters")],Gp);const u4t=Gp;Gp.from=Nr(Gp);const c4t=new Pt({asc:"ascending",desc:"descending"}),h4t={base:x3,key:"type",typeMap:{"auto-interval":n4t,date:s4t,"fixed-boundaries":l4t,"fixed-interval":u4t}};let ii=class extends rr(we){constructor(e){super(e),this.binParameters=null,this.binOrder="ascending",this.cacheHint=void 0,this.datumTransformation=null,this.defaultSpatialReference=null,this.distance=void 0,this.geometry=null,this.lowerBoundaryAlias=null,this.outSpatialReference=null,this.outStatistics=null,this.quantizationParameters=null,this.returnDistinctValues=null,this.spatialRelationship="intersects",this.upperBoundaryAlias=null,this.units=null,this.where="1=1"}set outTimeZone(e){this._set("outTimeZone",e),e&&!_ue(e)&&Pe.getLogger(this).warn("#outTimeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}};p([f({types:h4t,json:{name:"bin",write:!0}})],ii.prototype,"binParameters",void 0),p([tt(c4t)],ii.prototype,"binOrder",void 0),p([f({type:Boolean,json:{write:!0}})],ii.prototype,"cacheHint",void 0),p([f({json:{write:!0}})],ii.prototype,"datumTransformation",void 0),p([f({type:Ke,json:{name:"defaultSR",write:!0}})],ii.prototype,"defaultSpatialReference",void 0),p([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ii.prototype,"distance",void 0),p([f({types:ji,json:{read:An,write:!0}})],ii.prototype,"geometry",void 0),p([f({type:String,json:{write:!0}})],ii.prototype,"lowerBoundaryAlias",void 0),p([f({type:Ke,json:{name:"outSR",write:!0}})],ii.prototype,"outSpatialReference",void 0),p([f({type:[PG],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],ii.prototype,"outStatistics",void 0),p([f({value:null,json:{name:"outTimeReference",read:{reader:e=>e.ianaTimeZone},write:{writer:(e,t,r)=>{e&&(t[r]={ianaTimeZone:e})}}}})],ii.prototype,"outTimeZone",null),p([f({type:NG,json:{write:!0}})],ii.prototype,"quantizationParameters",void 0),p([f({type:Boolean,json:{write:!0}})],ii.prototype,"returnDistinctValues",void 0),p([tt(LG,{name:"spatialRel"})],ii.prototype,"spatialRelationship",void 0),p([f({type:String,json:{write:!0}})],ii.prototype,"upperBoundaryAlias",void 0),p([f({type:String,json:{read:Z7.read,write:{writer:Z7.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],ii.prototype,"units",void 0),p([f({type:String,json:{write:!0}})],ii.prototype,"where",void 0),ii=p([W("esri.rest.support.BinsQuery")],ii);const Lye=ii;ii.from=Nr(ii);const p4t=Object.freeze(Object.defineProperty({__proto__:null,default:Lye},Symbol.toStringTag,{value:"Module"}));var Y7;let Pv=Y7=class extends we{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new Y7({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};p([f({type:[String],json:{write:!0}})],Pv.prototype,"groupByFields",void 0),p([f({type:Number,json:{write:!0}})],Pv.prototype,"topCount",void 0),p([f({type:[String],json:{write:!0}})],Pv.prototype,"orderByFields",void 0),Pv=Y7=p([W("esri.rest.support.TopFilter")],Pv);const d4t=Pv;var X7;const yK=new Pt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),gK=new Pt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ln=X7=class extends we{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new X7(se({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};p([f({type:Boolean,json:{write:!0}})],ln.prototype,"cacheHint",void 0),p([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ln.prototype,"distance",void 0),p([f({types:ji,json:{read:An,write:!0}})],ln.prototype,"geometry",void 0),p([f({type:Number,json:{write:!0}})],ln.prototype,"geometryPrecision",void 0),p([f({type:Number,json:{write:!0}})],ln.prototype,"maxAllowableOffset",void 0),p([f({type:Number,json:{read:{source:"resultRecordCount"}}})],ln.prototype,"num",void 0),p([f({json:{write:!0}})],ln.prototype,"objectIds",void 0),p([f({type:[String],json:{write:!0}})],ln.prototype,"orderByFields",void 0),p([f({type:[String],json:{write:!0}})],ln.prototype,"outFields",void 0),p([f({type:Ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],ln.prototype,"outSpatialReference",void 0),p([f({type:String,json:{write:!0}})],ln.prototype,"resultType",void 0),p([f({json:{write:!0}})],ln.prototype,"returnGeometry",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ln.prototype,"returnM",void 0),p([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ln.prototype,"returnZ",void 0),p([f({type:Number,json:{read:{source:"resultOffset"}}})],ln.prototype,"start",void 0),p([Re("start"),Re("num")],ln.prototype,"writeStart",null),p([f({type:String,json:{read:{source:"spatialRel",reader:yK.read},write:{target:"spatialRel",writer:yK.write}}})],ln.prototype,"spatialRelationship",void 0),p([f({type:Ro,json:{write:!0}})],ln.prototype,"timeExtent",void 0),p([f({type:d4t,json:{write:!0}})],ln.prototype,"topFilter",void 0),p([f({type:String,json:{read:gK.read,write:{writer:gK.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],ln.prototype,"units",void 0),p([f({type:String,json:{write:!0}})],ln.prototype,"where",void 0),ln=X7=p([W("esri.rest.support.TopFeaturesQuery")],ln),ln.from=Nr(ln);const Pye=ln,KI=Object.freeze(Object.defineProperty({__proto__:null,default:Pye},Symbol.toStringTag,{value:"Module"}));let _y=class extends L5{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};p([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_y.prototype,"row",void 0),p([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_y.prototype,"column",void 0),p([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_y.prototype,"rows",void 0),p([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_y.prototype,"columns",void 0),_y=p([W("esri.CameraLayout")],_y);const Dye=_y;let Fye=class{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,r=!1){return vK(this.range,this.min,this.max,e,t,r)}clamp(e,t=0){return hl(e-t,this.min,this.max)+t}monotonic(e,t,r){return e<t?t:t+Q7(this.range,e-t,r)}minimalMonotonic(e,t,r){return vK(this.range,e,e+this.range,t,r)}center(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)}diff(e,t,r){return this.monotonic(e,t,r)-e}shortestSignedDiff(e,t){e=this.normalize(e);const r=(t=this.normalize(t))-e,n=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(r)<Math.abs(n)?r:n}contains(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t}};function vK(e,t,r,n,i=0,s=!1){return(n-=i)<t?n+=Q7(e,t-n):n>r&&(n-=Q7(e,n-r)),s&&n===r&&(n=t),n+i}function Q7(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const jye=new Fye(0,360);let zc=class extends rr(we){constructor(...e){super(...e),this.position=new it([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Dye}normalizeCtorArgs(e,t,r,n){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const i={position:e};return t!=null&&(i.heading=t),r!=null&&(i.tilt=r),n!=null&&(i.fov=n),i}return e}writePosition(e,t,r,n){const i=e.clone();i.x=Ds(e.x||0),i.y=Ds(e.y||0),i.z=e.hasZ?Ds(e.z||0):e.z,t[r]=i.write({},n)}readPosition(e,t){const r=new it;return r.read(e,t),r.x=Ds(r.x||0),r.y=Ds(r.y||0),r.z=r.hasZ?Ds(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};p([f({type:it,json:{write:{isRequired:!0}}})],zc.prototype,"position",void 0),p([Re("position")],zc.prototype,"writePosition",null),p([Ee("position")],zc.prototype,"readPosition",null),p([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ur(e=>jye.normalize(Ds(e)))],zc.prototype,"heading",void 0),p([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ur(e=>hl(Ds(e),-180,180))],zc.prototype,"tilt",void 0),p([f({type:Number,nonNullable:!0,json:{default:55,write:!0}}),ur(e=>hl(Ds(e,55),1,170))],zc.prototype,"fov",void 0),p([f({type:Dye,nonNullable:!0,json:{read:!1,write:!1}})],zc.prototype,"layout",void 0),zc=p([W("esri.Camera")],zc);const f4t=zc;var K7;let Cf=K7=class extends we{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new K7({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};p([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:dP}}}}})],Cf.prototype,"rotation",void 0),p([ur("rotation")],Cf.prototype,"castRotation",null),p([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:dP}}}}})],Cf.prototype,"scale",void 0),p([f({types:ji,json:{read:An,write:!0,origins:{"web-scene":{read:An,write:{overridePolicy:dP}}}}})],Cf.prototype,"targetGeometry",void 0),p([f({type:f4t,json:{write:!0}})],Cf.prototype,"camera",void 0),Cf=K7=p([W("esri.Viewpoint")],Cf);const Hl=Cf;function dP(){return{enabled:!this.camera}}const A4={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,n=this.values;return t<=r.xsmall?n.xsmall:t<=r.small?n.small:t<=r.medium?n.medium:t<=r.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,n=this.values;return t<=r.xsmall?n.xsmall:t<=r.small?n.small:t<=r.medium?n.medium:t<=r.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],n=t[1],i=this.values;return n>=r?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},fP={xsmall:544,small:768,medium:992,large:1200};function m4t(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function mP(e,t){return t?A4[e].valueToClassName[t].split(" "):[]}const y4t=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=fP}initialize(){this.addHandles(Et(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),vs))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!m4t(r)){const n=JSON.stringify(fP,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n),r=fP}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=mo.acquire(),n=mo.acquire();let i,s=!1;for(i in A4){const o=this[i],a=A4[i].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[i]=a,mP(i,o).forEach(l=>n.push(l)),mP(i,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,n),mo.release(r),mo.release(n))}_applyClassNameChanges(r,n){const i=this.container;i&&(n.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let n;for(n in A4)mP(n,this[n]).forEach(i=>r.classList.remove(i))}};return p([f()],t.prototype,"breakpoints",null),p([f()],t.prototype,"orientation",void 0),p([f()],t.prototype,"widthBreakpoint",void 0),p([f()],t.prototype,"heightBreakpoint",void 0),t=p([W("esri.views.BreakpointsOwner")],t),t};function e$(e){return typeof e=="string"?document.getElementById(e):e??null}function bK(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let bm=class extends mt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,t,r={}){return this._installWatch(e,t,r,Et)}addWhen(e,t,r={}){return this._installWatch(e,t,r,mc)}addOnCollectionChange(e,t,{initial:r=!1,final:n=!1}={}){const i=++this._handleId;return this.addHandles([ru(e,"after-changes",this._createSyncUpdatingCallback(),Di),ru(e,"change",t,{onListenerAdd:r?s=>t({added:s.toArray(),removed:[]}):void 0,onListenerRemove:n?s=>t({added:[],removed:s.toArray()}):void 0})],i),gr(()=>this.removeHandles(i))}addPromise(e){if(e==null)return e;const t=++this._handleId;this.addHandles(gr(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(eA)||this._set("updating",!1))}),t),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(t);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,t,r={},n){const i=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,i);const s=n(e,t,r);return this.addHandles(s,i),gr(()=>this.removeHandles(i))}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),n=Et(e,r,{sync:!0,equals:()=>!1});return this.addHandles(n,t),n}_createSyncUpdatingCallback(){return()=>{this.removeHandles(eA),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(i_(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(eA))}),eA)}}};p([f({readOnly:!0})],bm.prototype,"updating",void 0),bm=p([W("esri.core.support.UpdatingHandles")],bm);const eA=-42;var cC=function(){return cC=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cC.apply(this,arguments)},ej={exports:{}},zn={},tj={exports:{}},Fy={};function wK(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function g4t(e,t,r){}function v4t(e,t,r){}var b4t=/javascript\s*\:/img;function w4t(e,t){return b4t.test(t)?"":t}Fy.whiteList=wK(),Fy.getDefaultWhiteList=wK,Fy.onAttr=g4t,Fy.onIgnoreAttr=v4t,Fy.safeAttrValue=w4t;var _4t={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},l2=_4t;function x4t(e,t){e=l2.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,n=!1,i=0,s=0,o="";function a(){if(!n){var c=l2.trim(e.slice(i,s)),h=c.indexOf(":");if(h!==-1){var d=l2.trim(c.slice(0,h)),m=l2.trim(c.slice(h+1));if(d){var y=t(i,o.length,d,m,c);y&&(o+=y+"; ")}}}i=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var u=e.indexOf("*/",s+2);if(u===-1)break;s=u+1,i=s+1,n=!1}else l==="("?n=!0:l===")"?n=!1:l===";"?n||a():l===`
`&&a()}return l2.trim(o)}var S4t=x4t,tA=Fy,E4t=S4t;function _K(e){return e==null}function T4t(e){var t={};for(var r in e)t[r]=e[r];return t}function Uye(e){e=T4t(e||{}),e.whiteList=e.whiteList||tA.whiteList,e.onAttr=e.onAttr||tA.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||tA.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||tA.safeAttrValue,this.options=e}Uye.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,n=r.whiteList,i=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=E4t(e,function(l,u,c,h,d){var m=n[c],y=!1;if(m===!0?y=m:typeof m=="function"?y=m(h):m instanceof RegExp&&(y=m.test(h)),y!==!0&&(y=!1),h=o(c,h),!!h){var g={position:u,sourcePosition:l,source:d,isWhite:y};if(y){var b=i(c,h,g);return _K(b)?c+":"+h:b}else{var b=s(c,h,g);if(!_K(b))return b}}});return a};var I4t=Uye;(function(e,t){var r=Fy,n=I4t;function i(o,a){var l=new n(a);return l.process(o)}t=e.exports=i,t.FilterCSS=n;for(var s in r)t[s]=r[s]})(tj,tj.exports);var t$=tj.exports,r$={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,i;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},A4t=t$.FilterCSS,M4t=t$.getDefaultWhiteList,hC=r$;function xK(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Bye=new A4t;function C4t(e,t,r){}function k4t(e,t,r){}function R4t(e,t,r){}function O4t(e,t,r){}function Vye(e){return e.replace(L4t,"&lt;").replace(P4t,"&gt;")}function N4t(e,t,r,n){if(r=Wye(r),t==="href"||t==="src"){if(r=hC.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(rA.lastIndex=0,rA.test(r))return""}else if(t==="style"){if(SK.lastIndex=0,SK.test(r)||(EK.lastIndex=0,EK.test(r)&&(rA.lastIndex=0,rA.test(r))))return"";n!==!1&&(n=n||Bye,r=n.process(r))}return r=Zye(r),r}var L4t=/</g,P4t=/>/g,D4t=/"/g,F4t=/&quot;/g,j4t=/&#([a-zA-Z0-9]*);?/gim,U4t=/&colon;?/gim,B4t=/&newline;?/gim,rA=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,SK=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,EK=/u\s*r\s*l\s*\(.*/gi;function Gye(e){return e.replace(D4t,"&quot;")}function zye(e){return e.replace(F4t,'"')}function $ye(e){return e.replace(j4t,function(t,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function qye(e){return e.replace(U4t,":").replace(B4t," ")}function Hye(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return hC.trim(t)}function Wye(e){return e=zye(e),e=$ye(e),e=qye(e),e=Hye(e),e}function Zye(e){return e=Gye(e),e=Vye(e),e}function V4t(){return""}function G4t(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function n(o){return r?!0:hC.indexOf(e,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(n(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return i.push([s!==!1?s:l.position,c]),s=!1,u}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return hC.forEach(i,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function z4t(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("<!--",r);if(n===-1){t+=e.slice(r);break}t+=e.slice(r,n);var i=e.indexOf("-->",n);if(i===-1)break;r=i+3}return t}function $4t(e){var t=e.split("");return t=t.filter(function(r){var n=r.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),t.join("")}zn.whiteList=xK(),zn.getDefaultWhiteList=xK,zn.onTag=C4t,zn.onIgnoreTag=k4t,zn.onTagAttr=R4t,zn.onIgnoreTagAttr=O4t,zn.safeAttrValue=N4t,zn.escapeHtml=Vye,zn.escapeQuote=Gye,zn.unescapeQuote=zye,zn.escapeHtmlEntities=$ye,zn.escapeDangerHtml5Entities=qye,zn.clearNonPrintableCharacter=Hye,zn.friendlyAttrValue=Wye,zn.escapeAttrValue=Zye,zn.onIgnoreTagStripAll=V4t,zn.StripTagBody=G4t,zn.stripCommentTag=z4t,zn.stripBlankChar=$4t,zn.cssFilter=Bye,zn.getDefaultCSSWhiteList=M4t;var pC={},qf=r$;function q4t(e){var t=qf.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=qf.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function H4t(e){return e.slice(0,2)==="</"}function W4t(e,t,r){var n="",i=0,s=!1,o=!1,a=0,l=e.length,u="",c="";e:for(a=0;a<l;a++){var h=e.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){n+=r(e.slice(i,a)),s=a,i=a;continue}if(h===">"){n+=r(e.slice(i,s)),c=e.slice(s,a+1),u=q4t(c),n+=t(s,n.length,u,c,H4t(c)),i=a+1,s=!1;continue}if(h==='"'||h==="'")for(var d=1,m=e.charAt(a-d);m.trim()===""||m==="=";){if(m==="="){o=h;continue e}m=e.charAt(a-++d)}}else if(h===o){o=!1;continue}}return i<e.length&&(n+=r(e.substr(i))),n}var Z4t=/[^a-zA-Z0-9\\_:.-]/gim;function J4t(e,t){var r=0,n=0,i=[],s=!1,o=e.length;function a(d,m){if(d=qf.trim(d),d=d.replace(Z4t,"").toLowerCase(),!(d.length<1)){var y=t(d,m||"");y&&i.push(y)}}for(var l=0;l<o;l++){var u=e.charAt(l),c,h;if(s===!1&&u==="="){s=e.slice(r,l),r=l+1,n=e.charAt(r)==='"'||e.charAt(r)==="'"?r:X4t(e,l+1);continue}if(s!==!1&&l===n){if(h=e.indexOf(u,l+1),h===-1)break;c=qf.trim(e.slice(n+1,h)),a(s,c),s=!1,l=h,r=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),s===!1)if(h=Y4t(e,l),h===-1){c=qf.trim(e.slice(r,l)),a(c),s=!1,r=l+1;continue}else{l=h-1;continue}else if(h=Q4t(e,l-1),h===-1){c=qf.trim(e.slice(r,l)),c=TK(c),a(s,c),s=!1,r=l+1;continue}else continue}return r<e.length&&(s===!1?a(e.slice(r)):a(s,TK(qf.trim(e.slice(r))))),qf.trim(i.join(" "))}function Y4t(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function X4t(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function Q4t(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function K4t(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function TK(e){return K4t(e)?e.substr(1,e.length-2):e}pC.parseTag=W4t,pC.parseAttr=J4t;var e5t=t$.FilterCSS,Uu=zn,Jye=pC,t5t=Jye.parseTag,r5t=Jye.parseAttr,M4=r$;function nA(e){return e==null}function n5t(e){var t=M4.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=M4.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=M4.trim(e.slice(0,-1))),{html:e,closing:r}}function i5t(e){var t={};for(var r in e)t[r]=e[r];return t}function s5t(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(n){return n.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function Yye(e){e=i5t(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Uu.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=s5t(e.whiteList||e.allowList):e.whiteList=Uu.whiteList,e.onTag=e.onTag||Uu.onTag,e.onTagAttr=e.onTagAttr||Uu.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Uu.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Uu.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Uu.safeAttrValue,e.escapeHtml=e.escapeHtml||Uu.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new e5t(e.css))}Yye.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,n=r.whiteList,i=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,u=r.escapeHtml,c=t.cssFilter;r.stripBlankChar&&(e=Uu.stripBlankChar(e)),r.allowCommentTag||(e=Uu.stripCommentTag(e));var h=!1;r.stripIgnoreTagBody&&(h=Uu.StripTagBody(r.stripIgnoreTagBody,s),s=h.onIgnoreTag);var d=t5t(e,function(m,y,g,b,S){var E={sourcePosition:m,position:y,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(n,g)},x=i(g,b,E);if(!nA(x))return x;if(E.isWhite){if(E.isClosing)return"</"+g+">";var w=n5t(b),T=n[g],I=r5t(w.html,function(M,C){var k=M4.indexOf(T,M)!==-1,N=o(g,M,C,k);return nA(N)?k?(C=l(g,M,C,c),C?M+'="'+C+'"':M):(N=a(g,M,C,k),nA(N)?void 0:N):N});return b="<"+g,I&&(b+=" "+I),w.closing&&(b+=" /"),b+=">",b}else return x=s(g,b,E),nA(x)?u(b):x},u);return h&&(d=h.remove(d)),d};var o5t=Yye;(function(e,t){var r=zn,n=pC,i=o5t;function s(a,l){var u=new i(l);return u.process(a)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=i,function(){for(var a in r)t[a]=r[a];for(var l in n)t[l]=n[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(ej,ej.exports);var j1=ej.exports,a5t=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},l5t=function(){function e(t,r){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=cC(cC({},j1.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?n.sanitizeUrl(a):j1.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;t&&!r?i=t:t&&r?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(s){if(s==="whiteList")i.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,t.whiteList||{}]);else if(s==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=t[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new j1.FilterXSS(i)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var n=(r??{}).isProtocolRequired,i=n===void 0?!0:n,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?j1.escapeAttrValue(t):!s&&!i?j1.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,n,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,n,i):j1.safeAttrValue(t,r,n,i)},e.prototype.validate=function(t,r){r===void 0&&(r={});var n=this.sanitize(t,r);return{isValid:t===n,sanitized:n}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(n){return r._entityMap[n]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(n,i){return r.test(n)?n:"&#x".concat(Number(t.charCodeAt(i)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(n){Object.keys(n).forEach(function(i){Array.isArray(n[i])&&Array.isArray(r[i])?r[i]=r[i].concat(n[i]):r[i]=n[i]})}),r},e.prototype._iterateOverObject=function(t,r){var n=this;r===void 0&&(r={});try{var i=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var u=n.validate(l,r);return u.isValid?a.concat([l]):(i=!0,a.concat([u.sanitized]))},[]);else if(a5t(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var u=t[l],c=n.validate(u,r);return c.isValid?a[l]=u:(i=!0,a[l]=c.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return i?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const IO=new Map;function Xye(){IO.clear()}function u5t(e){return IO.get(e)}function c5t(e,t){IO.set(e,t)}function yP(e){IO.delete(e)}function Qye(...e){const t=mo.acquire();for(let n=0;n<e.length;n++){const i=e[n],s=typeof i;if(s==="string")t.push(i);else if(Array.isArray(i))t.push.apply(t,i);else if(s==="object")for(const o in i)i[o]&&t.push(o)}const r=t.join(" ");return mo.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(n=>{Xye();for(const i of n)e.get(i.target)?.(i)}),r=(n,i,s)=>(e.set(n,i),t.observe(n,s),gr(()=>{t.unobserve(n),e.delete(n)}));return(n,i,s)=>{let o=null;return e_([Et(()=>typeof n=="function"?n():n,a=>{o?.remove(),a&&(o=r(a,i,s))},_a),gr(()=>o?.remove())])}})();function Kye(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function h5t(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function p5t(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const d5t=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],f5t=d5t.reduce((e,t)=>(e[t]=[],e),{}),m5t=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ege=new l5t({whiteList:f5t,onTagAttr:(e,t,r)=>{const n=`${t}="${r}"`;if(m5t.includes(t))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function y5t(e){return e==="Enter"||e===" "}async function tge(e,t){await Xse(n_(t));const r=typeof e=="function"?e():e;r&&("setFocus"in r&&typeof r.setFocus=="function"?await r.setFocus():r instanceof HTMLElement&&r.focus())}const rge="http://www.w3.org/",AO=`${rge}2000/svg`,nge=`${rge}1999/xlink`;let IK=[],n$=(e,t)=>{let r={};return Object.keys(e).forEach(n=>{r[n]=e[n]}),t&&Object.keys(t).forEach(n=>{r[n]=t[n]}),r},i$=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),ige=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},g5t=(e,t,r)=>{if(t.vnodeSelector!==""){for(let n=r;n<e.length;n++)if(i$(e[n],t))return n}return-1},gP=(e,t,r,n)=>{let i=e[t];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(i$(a,i))throw new Error(`${r.vnodeSelector} had a ${i.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},v5t=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},rj=[],nj=!1,sge=e=>{(e.children||[]).forEach(sge),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},AK=()=>{nj=!1,rj.forEach(sge),rj.length=0},MK=e=>{rj.push(e),nj||(nj=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(AK,{timeout:16}):setTimeout(AK,16))},CK=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),MK(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),MK(e))},b5t=(e,t,r)=>{if(!t)return;let n=r.eventHandlerInterceptor,i=Object.keys(t),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")sj(e,l,!0);else if(a==="classes"){let u=Object.keys(l),c=u.length;for(let h=0;h<c;h++){let d=u[h];l[d]&&e.classList.add(d)}}else if(a==="styles"){let u=Object.keys(l),c=u.length;for(let h=0;h<c;h++){let d=u[h],m=l[d];m&&(ige(m),r.styleApplyer(e,d,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(n&&(l=n(a,l,e,t)),a==="oninput"&&function(){let c=l;l=function(h){c.apply(this,[h]),h.target["oninput-value"]=h.target.value}}()),e[a]=l):r.namespace===AO?a==="href"?e.setAttributeNS(nge,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=ege.sanitize(l):ij(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function ij(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let dC,w5t=(e,t,r)=>{if(t)for(let n of t)sb(n,e,void 0,r)},oge=(e,t,r)=>{w5t(e,t.children,r),t.text&&(e.textContent=t.text),b5t(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},sb=(e,t,r,n)=>{let i,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")i=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(i,r):t.appendChild(i);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let c=o.charAt(s-1),h=o.slice(s,l);c==="."?i.classList.add(h):c==="#"?i.id=h:(h==="svg"&&(n=n$(n,{namespace:AO})),n.namespace!==void 0?i=e.domNode=a.createElementNS(n.namespace,h):(i=e.domNode=e.domNode||a.createElement(h),h==="input"&&e.properties&&e.properties.type!==void 0&&i.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(i,r):i.parentNode!==t&&t.appendChild(i)),s=l+1}}oge(i,e,n)}},sj=(e,t,r)=>{t&&t.split(" ").forEach(n=>{n&&e.classList.toggle(n,r)})},_5t=(e,t,r,n)=>{if(!r)return;let i=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=r[l],c=t[l];if(l==="class")c!==u&&(sj(e,c,!1),sj(e,u,!0));else if(l==="classes"){let h=e.classList,d=Object.keys(u),m=d.length;for(let y=0;y<m;y++){let g=d[y],b=!!u[g];b!==!!c[g]&&(i=!0,b?h.add(g):h.remove(g))}}else if(l==="styles"){let h=Object.keys(u),d=h.length;for(let m=0;m<d;m++){let y=h[m],g=u[y];g!==c[y]&&(i=!0,g?(ige(g),n.styleApplyer(e,y,g)):n.styleApplyer(e,y,""))}}else if(u||typeof c!="string"||(u=""),l!=="value"||ij(e)){if(u!==c){let h=typeof u;h==="function"&&n.eventHandlerInterceptor||(n.namespace===AO?l==="href"?e.setAttributeNS(nge,l,u):e.setAttribute(l,u):h==="string"?l==="innerHTML"?e[l]=ege.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):ij(e)&&l in e?e[l]=u:e.setAttribute(l,u):e[l]!==u&&(e[l]=u),i=!0)}}else{let h=e[l];h!==u&&(e["oninput-value"]?h===e["oninput-value"]:u!==c)&&(e[l]=u,e["oninput-value"]=void 0),u!==c&&(i=!0)}}return i},x5t=(e,t,r,n,i)=>{if(r===n)return!1;n=n||IK;let s,o=(r=r||IK).length,a=n.length,l=0,u=0,c=!1;for(;u<a;){let h=l<o?r[l]:void 0,d=n[u];if(h!==void 0&&i$(h,d))c=dC(h,d,i)||c,l++;else{let m=g5t(r,d,l+1);if(m>=0){for(s=l;s<m;s++)CK(r[s]),gP(r,s,e,"removed");c=dC(r[m],d,i)||c,l=m+1}else sb(d,t,l<o?r[l].domNode:void 0,i),v5t(d),gP(n,u,e,"added")}u++}if(o>l)for(s=l;s<o;s++)CK(r[s]),gP(r,s,e,"removed");return c};dC=(e,t,r)=>{let n=e.domNode,i=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=n.ownerDocument.createTextNode(t.text);return n.parentNode.replaceChild(o,n),t.domNode=o,i=!0,i}t.domNode=n}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=n$(r,{namespace:AO})),e.text!==t.text&&(s=!0,t.text===void 0?n.removeChild(n.firstChild):n.textContent=t.text),t.domNode=n,s=x5t(t,n,e.children,t.children,r)||s,s=_5t(n,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),i};let u2=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=e;e=r,dC(n,r,t)},domNode:e.domNode});const S5t={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Dv=e=>n$(S5t,e),dm={create:(e,t)=>(t=Dv(t),sb(e,document.createElement("div"),void 0,t),u2(e,t)),append:(e,t,r)=>(r=Dv(r),sb(t,e,void 0,r),u2(t,r)),insertBefore:(e,t,r)=>(r=Dv(r),sb(t,e.parentNode,e,r),u2(t,r)),merge:(e,t,r)=>(r=Dv(r),t.domNode=e,oge(e,t,r),u2(t,r)),replace:(e,t,r)=>(r=Dv(r),sb(t,e.parentNode,e,r),e.parentNode.removeChild(e),u2(t,r))},age,E5t=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};age=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let T5t=(e,t)=>{let r=e;return t.forEach(n=>{r=r&&r.children?age(r.children,i=>i.domNode===n):void 0}),r},I5t=(e,t,r)=>{let n=function(i){r("domEvent",i);let s=t(),o=E5t(i.currentTarget,s.domNode);o.reverse();let a,l=T5t(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",i),a};return(i,s,o,a)=>n},oj=e=>{let t,r,n=Dv(e),i=n.performanceLogger,s=!0,o=!1,a=[],l=[],u=(h,d,m)=>{let y,g=()=>y;n.eventHandlerInterceptor=I5t(t,g,i),y=h(d,m(),n),a.push(y),l.push(m)},c=()=>{if(r=void 0,s){s=!1,i("renderStart",void 0);for(let h=0;h<a.length;h++){let d=l[h]();i("rendered",void 0),a[h].update(d),i("patched",void 0)}i("renderDone",void 0),s=!0}};return t={renderNow:c,scheduleRender:()=>{r||o||(r=requestAnimationFrame(c))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(h,d)=>{u(dm.append,h,d)},insertBefore:(h,d)=>{u(dm.insertBefore,h,d)},merge:(h,d)=>{u(dm.merge,h,d)},replace:(h,d)=>{u(dm.replace,h,d)},detach:h=>{for(let d=0;d<l.length;d++)if(l[d]===h)return l.splice(d,1),a.splice(d,1)[0];throw new Error("renderFunction was not found")}},t},kf=class extends mt{constructor(){super(...arguments),this.items=new st,this._watchUpdatingTracking=new bm,this._callbacks=new Map,this._projector=oj(),this._hiddenProjector=oj()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const r of t.added){const n=()=>r.render();this._callbacks.set(r,n),this._projector.append(this.surface,n)}for(const r of t.removed){const n=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(n.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,r=this._hiddenProjector;let n;const i=()=>(n=e.render(),n);r.append(t,i),r.renderNow();const s={left:0,top:0,right:0,bottom:0};if(n?.domNode){const o=n.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(r.detach(i);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const r=this.computeBoundingRect(e),n=this.computeBoundingRect(t);return Math.max(r.left,n.left)<=Math.min(r.right,n.right)&&Math.max(r.top,n.top)<=Math.min(r.bottom,n.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,t){const r=!!t?.disableDecorations;if(!this.items.some(i=>i.visible&&!(r&&i.isDecoration)))return;const n=e.getContext("2d");n.save(),n.font=this._fontString(),this.items.forEach(i=>{r&&i.isDecoration||(n.save(),i.renderCanvas(n),n.restore())}),n.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};p([f({readOnly:!0})],kf.prototype,"surface",void 0),p([f({readOnly:!0})],kf.prototype,"items",void 0),p([f({readOnly:!0})],kf.prototype,"needsRender",null),p([f({readOnly:!0})],kf.prototype,"_watchUpdatingTracking",void 0),p([f({readOnly:!0})],kf.prototype,"updating",null),kf=p([W("esri.views.overlay.ViewOverlay")],kf);const kK=kf,vP=[0,0];function A5t(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return vP[0]=r.left+(t?.pageXOffset??0),vP[1]=r.top+(t?.pageYOffset??0),vP}function RK(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function M5t(e){const t=document.createElement("div");return e.appendChild(t),t}const c2=16,iA=750,C5t=512,k5t=2,R5t=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:c2,time:iA},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([Et(()=>this.cursor,n=>{const{surface:i}=this;i&&i.setAttribute("data-cursor",n)}),Et(()=>this.navigating,n=>{const{surface:i}=this;i&&i.setAttribute("data-navigating",n.toString())})])}initialize(){this.addHandles([Et(()=>this.ui,(r,n)=>this._handleUIChange(r,n),vs),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=pn(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const n=this._get("container"),i=e$(r);if(i||typeof r!="string"||Pe.getLogger(this).error("#container",`element with id '${r}' not found`),n===i)return;if(this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(RK(this.root),this._set("root",null)),this.userContent&&(bK(this.userContent,n),RK(this.userContent),this._set("userContent",null))),!i)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);i.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",bK(i,s),i.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",i.insertBefore(o,i.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new kK;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(Et(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ag({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=mn(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",i),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,n,i){const s=this.position;return r-=s?s[0]:0,n-=s?s[1]:0,i?(i[0]=r,i[1]=n):i=[r,n],i}containerToPage(r,n,i){const s=this.position;return r+=s?s[0]:0,n+=s?s[1]:0,i?(i[0]=r,i[1]=n):i=[r,n],i}_handleUIChange(r,n){this.removeHandles("ui"),n&&n!==r&&n.destroy(),r&&(r.view=this,this.addHandles(Et(()=>this.root,i=>{r.container=i?M5t(i):null},vs),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=c2,r.time=iA,this.addHandles([r_(window,"resize",()=>{r.freq=c2,r.time=iA}),Ag({prepare:n=>{const i=this._measure(),s=this._freqInfo;if(s.time+=n.deltaTime,i&&(s.freq=c2,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||i?c2:Math.min(iA,s.freq*k5t),!i&&s.freq>=C5t&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,n=r?r.clientWidth:0,i=r?r.clientHeight:0;if(n===0||i===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return n===s&&i===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",i),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:n,height:i}),!0)}_position(){const r=this.container,n=this.position,i=r&&A5t(r);return!!i&&(!n||i[0]!==n[0]||i[1]!==n[1])&&(this._set("position",[i[0],i[1]]),!0)}forceDOMReadyCycle(){}};return p([f()],t.prototype,"container",null),p([f({readOnly:!0})],t.prototype,"focused",null),p([f({readOnly:!0})],t.prototype,"height",void 0),p([f()],t.prototype,"messagesCommon",void 0),p([f({type:kK})],t.prototype,"overlay",void 0),p([f({readOnly:!0})],t.prototype,"position",void 0),p([f({readOnly:!0})],t.prototype,"resizing",void 0),p([f({readOnly:!0})],t.prototype,"root",void 0),p([f({value:null,readOnly:!0})],t.prototype,"size",null),p([f({readOnly:!0})],t.prototype,"surface",void 0),p([f({readOnly:!0})],t.prototype,"suspended",void 0),p([f()],t.prototype,"ui",void 0),p([f({readOnly:!0})],t.prototype,"userContent",void 0),p([f({readOnly:!0})],t.prototype,"width",void 0),p([f()],t.prototype,"widthBreakpoint",void 0),t=p([W("esri.views.DOMContainer")],t),t},lge=xe("mac")?"Meta":"Control",O5t=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),N5t=e=>O5t.has(e);let L5t=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const t=e.modifiers;for(const r of this.keyModifiers)if(!t.has(r))return!1;return!0}},is=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const r of t)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(t=>this._handleEvent(t)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,r){let n;typeof t=="function"?(r=t,n=[]):n=t||[];const i=typeof e=="string"?new L5t(e,n):e,s=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},o=u=>{const c=this._incoming[u.match.eventType];if(c){const h=c.indexOf(u);c.splice(h,1),s(),this._manager&&this._manager.updateDependencies()}},a=new P5t(i,r,{onPause:o,onRemove:o,onResume:u=>{const c=this._incoming[u.match.eventType];c&&!c.includes(u)&&(c.push(u),s(),this._manager&&this._manager.updateDependencies())}});let l=this._incoming[i.eventType];return l||(l=[],this._incoming[i.eventType]=l),l.push(a),s(),this._manager&&this._manager.updateDependencies(),a}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new D5t(e,{onEmit:(r,n,i,s)=>{this._manager?.emit(r.eventType,n,i,s)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const t=this._incoming[e.type];if(t){for(const r of t)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},P5t=class{constructor(e,t,r){this.match=e,this._callback=t,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},D5t=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,r){this._removed||this._handler.onEmit(this,e,t,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},F5t=class extends is{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>this._update(t.data))}_update(e){const t=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:n}=e;t===this._value&&this._x===r&&this._y===n||(this._value=t,this._x=r,this._y=n,this._onChange(t,r,n))}},j5t=class{constructor(e,t){this._observable=new l_,this._value=e,this._equalityFunction=t}get value(){return It(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function xw(e,t=Ese){return new j5t(e,t)}let U5t=class extends is{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=xw(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},B5t=class{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const r in e){const n=e[r],i=new zse(n,void 0,void 0,2,2);this._properties[r]={pool:i,acquired:[]}}this._afterDispatchHandle=clt(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const r of t.acquired)eZ(r)||t.pool.release(r);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),r=this._properties[e];let n=r.pool.acquire();for(r.acquired.push(n);n===t;)r.acquired.push(n),n=r.pool.acquire();return n}_release(){for(const e in this._properties){const t=this._properties[e];let r=0;for(const n of t.acquired)eZ(n)?t.acquired[r++]=n:t.pool.release(n);t.acquired.length=r}}},kl=class extends mt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=lge,this._latestPointerType="mouse",this._propertiesPool=new B5t({latestPointerLocation:z5t},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,t,r=ld.INTERNAL){if(this._nameToGroup[e]||t.length===0)return;const n={name:e,handlers:t.map(i=>({handler:i,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=n;for(let i=n.handlers.length-1;i>=0;i--){const s=n.handlers[i];this._handlers.push(s),s.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,u,c)=>{this._emitInputEvent(s.priorityIndex+1,o,a,l,c,u)},setPointerCapture:(o,a)=>{this._setPointerCapture(n,s,o,a)},setEventCallback:o=>{s.eventCallback=o},setUninstallCallback:o=>{s.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Pe.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const n=this._handlersPriority[r];n.priorityIndex=r;let i=n.handler.hasSideEffects;if(!i){for(const s of n.handler.outgoingEventTypes)if(e.has(s)){i=!0;break}}if(i)for(const s of n.handler.incomingEventMatches){e.add(s.eventType);for(const o of s.keyModifiers)N5t(o)||t.add(o)}n.active=i}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,r){this._latestPointerType=e;const n=this._get("latestPointerLocation");if(n==null||n.x!==t||n.y!==r){const i=this._propertiesPool.get("latestPointerLocation");i.x=t,i.y=r,this._set("latestPointerLocation",i)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const i=t;this._pointerCaptures.delete(i.native.pointerId)}this._updateKeyModifiers(e,t);const r=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,n=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,n)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const n=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},i=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(n(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(n(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&i(o,e==="key-down")}const s=t.native;i("Alt",!!s?.altKey),i("Control",!!s?.ctrlKey),i("Ctrl",!!s?.ctrlKey),i("Shift",!!s?.shiftKey),i("Meta",!!s?.metaKey),i("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new F5t((e,t,r)=>this._setLatestPointer(e,t,r)),this._multiTouchHandler=new U5t,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ld.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ld.INTERNAL)}_setPointerCapture(e,t,r,n){const i=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),n?(s.add(i),s.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(i)&&(s.delete(i),s.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,r,n){this._emitInputEvent(0,e,t,r,n)}_emitInputEvent(e,t,r,n,i,s){const o=n!==void 0?n:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=i!==void 0&&i,l={event:new V5t(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new Y5,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:t,priorityIndex:r}=e.events.pop(),n=t.data?.eventId;if(!(n!=null&&this._stoppedPropagationEventIds.has(n)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback?.(t),t.shouldStopPropagation()){n!=null&&this._stoppedPropagationEventIds.add(n);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new Y5;t.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)t.push(r.events.pop());r.events=t,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const n of t.handler.incomingEventMatches){if(r.eventType!==n.eventType)continue;const i=r.keyModifiers.filter(s=>n.keyModifiers.includes(s));if(i.length===r.keyModifiers.length!=(i.length===n.keyModifiers.length))return r.keyModifiers.length>n.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let n=0;for(;n<t.length&&this._compareHandlerPriority(r,t[n])>=0;)n++;t.splice(n,0,r)}return t}get debug(){const e=t=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=r};return{injectEvent:(t,r)=>{e(()=>this._onEventReceived(t,r))},disablePointerCapture:e}}};p([f({readOnly:!0})],kl.prototype,"hasPendingInputs",null),p([f({constructOnly:!0})],kl.prototype,"eventSource",void 0),p([f({constructOnly:!0})],kl.prototype,"recognizers",void 0),p([f()],kl.prototype,"_latestPointerType",void 0),p([f()],kl.prototype,"latestPointerType",null),p([f()],kl.prototype,"multiTouchActive",null),p([f({readOnly:!0})],kl.prototype,"latestPointerLocation",void 0),p([f()],kl.prototype,"_paused",void 0),p([f({readOnly:!0})],kl.prototype,"updating",null),kl=p([W("esri.views.input.InputManager")],kl);let V5t=class{constructor(e,t,r,n,i){this.type=e,this.data=t,this.timestamp=r,this.modifiers=n,this.cancelable=i,this._propagationState=Hf.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Hf.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Hf.STOPPED)}async(e){this._propagationState|=Hf.PAUSED;const t=(r,n)=>{this._propagationState&=~Hf.PAUSED;const i=this._resumeCallback;if(this._resumeCallback=null,i&&i(),n)throw r;return r};return(typeof e=="function"?e():e).then(r=>t(r,!1),r=>t(r,!0))}shouldPausePropagation(e){return!!(this._propagationState&Hf.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Hf;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Hf||(Hf={}));const ld={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let G5t=class{};const z5t=G5t;function Kd(e){return e!=null&&"open"in e&&"declaredClass"in e}function OK(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const $5t=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([Et(()=>[this.ui,this.popup],([r,n],i)=>{const s="popup",o="manual";if(i){const[a,l]=i;a&&Kd(l)&&(l.view=null,OK(l)&&a.remove(l,s))}r&&Kd(n)&&(n.view=this,OK(n)&&r.add(n,{key:s,position:o,internal:!0}))},vs),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(Kd(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),Kd(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},ld.WIDGET)]),CR(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{Me(()=>import("./Popup-ChvDUefZ-CWljpouw.js"),__vite__mapDeps([161,1,2,4,162,26,17,13,163]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Kd(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void Pe.getLogger(this).error(new ie("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){this._popupSetupTask?.abort(),Kd(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,n){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,n),n)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Kd(this.popup))return this._popupSetupTask=tR(async r=>{const{default:n}=await Me(()=>import("./Popup-ChvDUefZ-CWljpouw.js"),__vite__mapDeps([161,1,2,4,162,26,17,13,163]),import.meta.url);if(Gr(r),!this.popup||Kd(this.popup))return;const i=this.popup;delete i.open,delete i.close,this.popup=new n(i)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:n},i){const s=[],o=[];let a=!1;const l=zat(i,xe("popup-view-fetch-timeout")??H5t),u=d=>{const m=new q5t(d);return o.push(m),s.push(m.promise),m},c=d=>{const m=o.at(-1);return m&&m.layerView===d&&!a?m:u(d)};for(const d of n)"graphic"in d?(c(d.layerView).graphics.push(d.graphic),a=!1):(s.push(d.layerView.fetchPopupFeaturesAtLocation(d.mapPoint,l)),a=!0);o.map(d=>d.resolve(l));const h=qse(s).then(d=>d.filter(m=>!!m).flat());return{pendingFeatures:s,allGraphicsPromise:h,location:r}}async _getPopupHits(r,n){const{hits:i,location:s}=await this.popupHitTest(r);Gr(n);const o=[];for(const a of i)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,n)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}}_isValidPopupGraphic(r,n){return r&&!!r.getEffectivePopupTemplate(n?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return p([f()],t.prototype,"popup",void 0),p([f()],t.prototype,"popupEnabled",void 0),t=p([W("esri.views.PopupView")],t),t};let q5t=class{constructor(e){this.layerView=e,this._resolver=Ko(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:t,graphics:r,_resolver:n}=this;if(!t)return n.resolve(r),n.promise;let i;return t.fetchPopupFeaturesFromGraphics(r,e).catch(s=>(i=s,null)).then(s=>{s?n.resolve(s):n.reject(i)}),n.promise}};const H5t=5e3;let fC=class extends NS{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(Pe.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};fC=p([W("esri.support.AnalysesCollection")],fC);let Rf=class extends mt{constructor(e){super(e),this.view=null,this.baseLayerViews=new st,this.referenceLayerViews=new st,this._loadingHandle=Et(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},vs)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(const e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};p([f({constructOnly:!0})],Rf.prototype,"view",void 0),p([f({readOnly:!0})],Rf.prototype,"baseLayerViews",void 0),p([f({readOnly:!0})],Rf.prototype,"referenceLayerViews",void 0),p([f({readOnly:!0})],Rf.prototype,"suspended",null),p([f({type:Boolean,readOnly:!0})],Rf.prototype,"updating",null),Rf=p([W("esri.views.BasemapView")],Rf);const W5t=Rf;function Z5t(e){return"tryRecycleWith"in e}function J5t(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let Y5t=class{constructor(e,t,r){this.layer=e,this.view=t,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Ko(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Oa(this._controller.signal,()=>{const n=new ie("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(n)})}tryRecycle(e){if(!this.done||!this.layerView||!Z5t(this.layerView))return null;const t=this.layer.type,r=this._controller.signal;for(let n=0;n<e.length;n++){const i=e[n];if(i.type!==t)continue;const s=this.layerView.tryRecycleWith(i,{signal:r});if(s){e.splice(n,1),this.layer=i;const o=this.layerView,a=o.view;return this.promise=Promise.race([s.then(()=>(Gr(this._controller.signal),i.emit("layerview-destroy",{view:a,layerView:o}),a.emit("layerview-destroy",{view:a,layerView:o}),i.emit("layerview-create",{view:a,layerView:o}),a.emit("layerview-create",{view:a,layerView:o}),o)),new Promise((l,u)=>Oa(this._controller.signal,()=>u(Xr())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:t,view:r}=this;t.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:t,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:r}=this;this._map=r.map;try{let n,i;if(await t.load({signal:e}),t.prefetchResources&&await t.prefetchResources({signal:e}),Q5t(t))n=await t.createLayerView(r,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new ie("layer:view-not-supported","No layerview implementation was found");const o=await this.layerViewImporter.importLayerView(t);Gr(e),n="default"in o?new o.default({layer:t,view:r}):new o({layer:t,view:r})}const s=()=>{i=mn(i),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};i=Oa(e,s),Gr(e);try{await n.when()}catch(o){throw s(),o}if(!this._map?.allLayers?.includes(t))return s(),void this._deferred.reject(new ie("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=n,t.emit("layerview-create",{view:r,layerView:n}),r.emit("layerview-create",{layer:t,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(n){t.emit("layerview-create-error",{view:r,error:n}),r.emit("layerview-create-error",{layer:t,error:n}),this.done=!0,this._deferred.reject(new ie("layerview:create-error","layerview creation failed",{layer:t,error:n}))}}},Rl=class extends mt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new bm,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const t=this.view.map?.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Ko(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(i_(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,n=[],i=this.view.ready,s=a=>{if(a!=null){for(const l of a)if(l){r.add(l);const u=this._layerLayerViewInfoMap.get(l);u&&i?u.start():u||this._recyclingInfoMap.has(l)||n.push(l),"layers"in l&&l.layers&&s(l.layers)}}};for(const a of this._rootCollectionNames)s(Gl(this,a));for(const[a,l]of this._layerLayerViewInfoMap)if(!r.has(a)){this._layerLayerViewInfoMap.delete(l.layer);const u=l.tryRecycle(n);u?(this.notifyChange("updating"),this._recyclingInfoMap.set(l.layer,l),u.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),this._layerLayerViewInfoMap.set(l.layer,l),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy(),this._reschedule()})):l.destroy()}for(const[a,l]of this._recyclingInfoMap)r.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy());for(const a of n)this._createLayerView(a);this._refreshCollections();const o=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);r.forEach(a=>"layers"in a&&o.push(a.layers)),this.addHandles(o.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([ru(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),Et(()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),_a)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),hP(this._recyclingInfoMap),hP(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Xr()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||soe(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(hP(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ie("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const n=r.layerView;return!(!n||!t||n.parent===t)||!!(r.done&&n&&"layers"in e&&e.layers?.length)&&e.layers.some(i=>this.isCreatingLayerViewsForLayer(i,n))}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(Gl(this,e),Gl(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,r){if(!e||!t)return void(t&&t.removeAll());let n=0;for(const i of e){const s=this._layerLayerViewInfoMap.get(i);if(!s?.layerView)continue;const o=s.layerView;o.layer=i,o.parent=r,t.at(n)!==o&&t.splice(n,0,o),"layers"in i&&J5t(o)&&this._populateLayerViewsOwners(i.layers,o.layerViews,o),n+=1}n<t.length&&t.splice(n,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new Y5t(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),r=>{r&&(Fi(r)||r.name==="cancelled:layerview-create")||Pe.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};p([f()],Rl.prototype,"_workPromise",void 0),p([f({readOnly:!0})],Rl.prototype,"_watchUpdatingTracking",void 0),p([f({readOnly:!0})],Rl.prototype,"_layersToLayerViews",null),p([f({readOnly:!0})],Rl.prototype,"_rootCollectionNames",null),p([f()],Rl.prototype,"layerViewImporter",void 0),p([f()],Rl.prototype,"supportsGround",void 0),p([f({readOnly:!0})],Rl.prototype,"updating",null),p([f({readOnly:!0})],Rl.prototype,"updatingRemaining",null),p([f({constructOnly:!0})],Rl.prototype,"view",void 0),Rl=p([W("esri.views.LayerViewManager")],Rl);const X5t=Rl;function Q5t(e){return"createLayerView"in e&&e.createLayerView!=null}let el=class extends mt{constructor(e){super(e),this.factor=1.5,this.offset=Yi(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};p([f({type:Number})],el.prototype,"factor",void 0),p([f({nonNullable:!0})],el.prototype,"offset",void 0),p([f()],el.prototype,"position",void 0),p([f({type:Number,range:{min:0}})],el.prototype,"size",void 0),p([f()],el.prototype,"maskUrl",void 0),p([f()],el.prototype,"maskEnabled",void 0),p([f()],el.prototype,"overlayUrl",void 0),p([f()],el.prototype,"overlayEnabled",void 0),p([f({readOnly:!0})],el.prototype,"version",null),p([f({type:Boolean})],el.prototype,"visible",void 0),el=p([W("esri.views.Magnifier")],el);const uge=el;let GS=class{constructor(e){this._observable=new l_,this._map=new Map(e)}get size(){return It(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const t=this._map.delete(e);return t&&this._observable.notify(),t}entries(){return It(this._observable),this._map.entries()}forEach(e,t){It(this._observable),this._map.forEach((r,n)=>e.call(t,r,n,this),t)}get(e){return It(this._observable),this._map.get(e)}has(e){return It(this._observable),this._map.has(e)}keys(){return It(this._observable),this._map.keys()}set(e,t){return this._map.set(e,t),this._observable.notify(),this}values(){return It(this._observable),this._map.values()}[Symbol.iterator](){return It(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function sA(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let _p=class extends jh.EventedAccessor{constructor(e){super(e),this._selectionMap=new GS,this._sources=new st,this._trashCan=[],this._layerEditHandles=new st,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([Et(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),ru(()=>this.sources,"change",t=>{const r=this._selectionMap;for(const n of t.removed)r.delete(n);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const e=new st;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(t=>"sublayers"in t&&t.sublayers?t.sublayers:null).forEach(t=>{(sA(t)&&!Uht(t)||F0(t))&&e.add(t)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(mn)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[t,r]=e;return{layer:t,selection:[...r.selection]}})}get count(){let e=0;for(const t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){fd(e,this._sources)}async getSelectedFeatures(e,t={},r="layerView"){const{view:n,selections:i}=this,s=(e!==void 0?i.filter(o=>e.includes(o.layer)):i).filter(o=>o.selection.length>0).map(async o=>{const{layer:a,selection:l}=o,u=F0(a)?a.parent:a;if(u==null||!LK(u))return null;if(r==="layer")return PK(u,l,t);if(NK(u))return null;const c=await n.whenLayerView(u).catch(()=>null);return c?PK(c,l,t):null});return(await Promise.all(s)).filter(o=>o!=null)}updateSelection(e){const t=new Map;for(const[i,s]of this._selectionMap)t.set(i,[...s.selection]);let r=!1;const n=e.current.concat(e.added);for(const i of n){const s=i.sourceLayer,o=i.getObjectId();if(this.sources.includes(s)&&(sA(s)||F0(s))&&o!==null){const a=s_(t,s,()=>[]);a.includes(o)||(a.push(o),r=!0)}}for(const i of e.removed){const s=i.sourceLayer,o=i.getObjectId();if(this.sources.includes(s)&&(sA(s)||F0(s))&&o!==null){const a=t.get(s),l=a?.indexOf(o);l!==void 0&&l>=0&&(a?.splice(l,1),r=!0)}}if(r){const{_selectionMap:i,_trashCan:s}=this,o=[];for(const[a,l]of t){const u=i.get(a);u!==void 0&&s.push(u),i.set(a,{selection:l}),o.push({layer:a,selection:l,...TD(u!==void 0?u.selection:[],l)})}this._onSelectionChange(o)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,t){const r=this._selectionMap.get(e),n=r!==void 0?[...r.selection]:[];for(const i of t)n.includes(i)||n.push(i);this._setSelection(e,n)}removeFromSelection(e,t){const r=this._selectionMap.get(e);if(!r)return;const n=[];for(const i of r.selection)t.includes(i)||n.push(i);this._setSelection(e,n)}toggleInSelection(e,t){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,t);const n=new Set(r.selection),i=new Set(t),s=rlt(n,i);this._setSelection(e,Array.from(s))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const t=[];for(const[r,n]of this._selectionMap.entries())t.push({layer:r,added:[],removed:[...n.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();const{sources:e,view:t,_selectionMap:r,showHighlight:n}=this,i=this._vizTaskId;for(const s of e){const o=r.get(s),a=F0(s)?s.parent:s;if(a!=null&&LK(a)){if(NK(a))continue;t.whenLayerView(a).then(l=>{o?.highlightHandle?.remove(),o!=null&&n&&i===this._vizTaskId&&"highlight"in l&&typeof l.highlight=="function"&&o.selection.length>0&&(o.highlightHandle=l.highlight(o.selection,"selection"))}).catch(()=>{o?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(mn);for(const e of this.sources){const t=F0(e)?e.parent:e;if(t!=null&&sA(t)){const r=t.on("edits",n=>{this._handleEditChanges(n,e)});this._layerEditHandles.push(r)}}}_handleEditChanges(e,t){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){const r=e.deletedFeatures.filter(n=>n.error==null).map(n=>n.objectId).filter(Qo);this.removeFromSelection(t,r)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!eCt(r,{selection:t})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...t]});const n={layer:e,selection:[...t],...TD(r!==void 0?r.selection:[],t)};this._onSelectionChange([n])}}};p([f({readOnly:!0,nonNullable:!0})],_p.prototype,"selections",null),p([f({readOnly:!0,nonNullable:!0})],_p.prototype,"count",null),p([f({constructOnly:!0,nonNullable:!0})],_p.prototype,"view",void 0),p([f({readOnly:!0,nonNullable:!0})],_p.prototype,"hasSelection",null),p([f()],_p.prototype,"showHighlight",void 0),p([f()],_p.prototype,"sources",null),_p=p([W("esri.views.SelectionManager")],_p);const NK=e=>F0(e)?e.parent?.isTable===!0:e.isTable,K5t=e=>e.layer!==void 0,LK=e=>e?.when!==void 0,eCt=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],n=[...t.selection];if(r.length!==n.length)return!1;r.sort(),n.sort();for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1}return!0},PK=async(e,t,r={})=>{let n;if(K5t(e)){const i=e;n=i===void 0?null:await i.queryFeatures(new ui({...r,objectIds:t})).then(s=>({data:s,layer:e.layer}))}else{const i=e;n=i===void 0?null:await i.queryFeatures(new ui({...r,objectIds:t})).then(s=>({data:s,layer:i}))}return n},tCt=_p;let Wx=class extends rr(mt){constructor(e){super(e),this.accentColor=new Ze([255,127,0]),this.textColor=new Ze([255,255,255])}};p([f({type:Ze,nonNullable:!0})],Wx.prototype,"accentColor",void 0),p([f({type:Ze,nonNullable:!0})],Wx.prototype,"textColor",void 0),Wx=p([W("esri.views.Theme")],Wx);const aj=Wx;var DK;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(DK||(DK={}));const cge=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],hge={};function pge(e){return!!hge[e]}function rCt(e){for(const t of e)if(!pge(t))return!1;return!0}cge.forEach(e=>{hge[e]=!0});let nCt=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:t,priority:r},n)=>this.inputManager?.installHandlers(n,[t],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>this.inputManager?.uninstallHandlers(t)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,r,n){const i=Array.isArray(e)?e:e.split(",");if(!rCt(i))return i.some(pge)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,o;Array.isArray(t)?o=t:(s=t,o=[]),typeof r=="function"?s=r:n=r,n=n??ld.DEFAULT;const a=this._createUniqueGroupName(),l=new iCt(this.view,i,o,s);this._handlers.set(a,{handler:l,priority:n});for(const u of i){const c=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,c+1)}return this.inputManager&&this.inputManager.installHandlers(a,[l],n),gr(()=>this._removeHandler(a,i))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of t){const n=this._handlerCounts.get(r);n===void 0||(n===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,n-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},iCt=class extends is{constructor(e,t,r,n){super(!0),this._latestDragStart=void 0,this.view=e;for(const i of t)switch(i){case"click":this.registerIncoming("click",r,s=>n(aCt(e,s)));break;case"double-click":this.registerIncoming("double-click",r,s=>n(lCt(e,s)));break;case"immediate-click":this.registerIncoming("immediate-click",r,s=>n(uCt(e,s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,s=>n(cCt(e,s)));break;case"hold":this.registerIncoming("hold",r,s=>n(hCt(e,s)));break;case"drag":this.registerIncoming("drag",r,s=>{const o=this._wrapDrag(s);o&&n(o)});break;case"key-down":this.registerIncoming("key-down",r,s=>n(pCt(s)));break;case"key-up":this.registerIncoming("key-up",r,s=>n(dCt(s)));break;case"pointer-down":this.registerIncoming("pointer-down",r,s=>n(h2(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,s=>n(h2(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,s=>n(h2(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,s=>n(fCt(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,s=>n(mCt(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,s=>n(h2(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,s=>n(h2(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,s=>{n(yCt(s))});break;case"focus":this.registerIncoming("focus",r,s=>{n(sCt(s))});break;case"blur":this.registerIncoming("blur",r,s=>{n(oCt(s))})}}_wrapDrag(e){const t=e.data,{x:r,y:n}=t.center,{action:i,pointerType:s,button:o}=t;if(i==="start"&&(this._latestDragStart=t),!this._latestDragStart)return;const a=t.pointer.native,l=t.buttons,{cancelable:u,timestamp:c}=e,h={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return i==="end"&&(this._latestDragStart=void 0),{type:"drag",action:i,x:r,y:n,origin:h,pointerType:s,button:o,buttons:l,radius:t.radius,angle:fV(t.angle),native:a,timestamp:c,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}};function sCt(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function oCt(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function aCt(e,t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"click",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:c,screenPoint:Yi(s,o),mapPoint:S3(e,s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function lCt(e,t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"double-click",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:S3(e,s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function uCt(e,t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:h}=t;return{type:"immediate-click",pointerId:u,pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:S3(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}function cCt(e,t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:h}=t;return{type:"immediate-double-click",pointerId:u,pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:S3(e,s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}function hCt(e,t){const{pointerType:r,button:n,buttons:i,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:r,button:n,buttons:i,x:s,y:o,native:a,timestamp:u,mapPoint:S3(e,s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}function S3(e,t,r){return e.toMap(Yi(t,r),{exclude:[]})}function pCt(e){const{key:t,repeat:r,native:n}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-down",key:t,repeat:r,native:n,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function dCt(e){const{key:t,native:r}=e.data,{cancelable:n,timestamp:i}=e;return{type:"key-up",key:t,native:r,timestamp:i,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function h2(e,t){const{x:r,y:n,button:i,buttons:s,native:o,eventId:a}=e.data,l=o.pointerId,u=o.pointerType,{cancelable:c,timestamp:h}=e;return{type:t,x:r,y:n,pointerId:l,pointerType:u,button:i,buttons:s,native:o,timestamp:h,eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}function fCt(e){const{x:t,y:r,buttons:n,native:i,eventId:s}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,u=e.data.action,c={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:d}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:n,action:u,origin:c,native:i,timestamp:d,eventId:s,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function mCt(e){const{cancelable:t,data:r,timestamp:n}=e,{x:i,y:s,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:n,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function yCt(e){const{action:t,state:r,device:n}=e.data,{cancelable:i,timestamp:s}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:n,timestamp:s,action:t,buttons:o,axes:a,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var Sw,FK,jK;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(Sw||(Sw={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(FK||(FK={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(jK||(jK={}));function gCt(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return Pe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function lj(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Sw.USER)&&e.getEditableFlag(Sw.MANAGER)}function ju(e){return Yi(e.x,e.y)}function dge(e,t){const r=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return r?Yi(t.clientX-r.left,t.clientY-r.top):Yi(0,0)}function fge(e,t){return t instanceof Event?dge(e,t):ju(t)}function mge(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let vCt=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,t){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":BK(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!VK(e))break;const n=ju(e),i=U1(n,e.pointerType,t.forEachTool);if(i==null)break;const s=i.manipulator,o=i.tool;s==null||o==null||!s.interactive||s.grabbable&&s.grabbableForEvent(e)||!s.grabbing||s.dragging||this._releaseManipulatorBeforeDragging(s,e,t),s!=null&&o!=null&&s.interactive&&s.grabbable&&s.grabbableForEvent(e)&&!s.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:s,tool:o,start:n,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&t.activeTool==null&&(this._revertToNullActiveTool=!0,t.setActiveTool(i.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:n}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!VK(e))break;const n=this._grabbedManipulators.get(e.pointerId),i=n?.manipulator,s=n?.tool;if(i==null||s==null)break;const o=ju(e);o.x=hl(o.x,0,t.view.width),o.y=hl(o.y,0,t.view.height);const a=n.start,l=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(i.dragging=!0,l?i.events.emit("drag",{action:"update",start:a,screenPoint:o}):i.events.emit("drag",{action:"start",start:a,screenPoint:o,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:s,manipulator:i,start:a}));break;case"end":i.dragging=!1,l&&i.events.emit("drag",{action:"end",start:a,screenPoint:o}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}r();break}case"immediate-click":{const n=ju(e),i=U1(n,e.pointerType,t.forEachTool);if(bCt(e)||t.forEachTool(l=>{if((i==null||i.tool!==l||l.automaticManipulatorSelection)&&l.manipulators){let u=!1;l.manipulators.forEach(({manipulator:c})=>{c.selected&&(c.selected=!1,u=!0)}),u&&l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged()}}),i==null)break;const{manipulator:s,tool:o}=i;if(!s.interactive)break;s.selectable&&o.automaticManipulatorSelection&&(s.selected=!s.selected,o.onManipulatorSelectionChanged&&o.onManipulatorSelectionChanged());const a=e.native.shiftKey;s.events.emit("immediate-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),bP(s,r);break}case"click":{const n=ju(e),i=U1(n,e.pointerType,t.forEachTool),s=i?.manipulator;if(s==null||!s.interactive)break;const o=e.native.shiftKey;s.events.emit(e.type,{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o}),r();break}case"double-click":{const n=ju(e),i=U1(n,e.pointerType,t.forEachTool),s=i!=null?i.manipulator:null;if(s==null||!s.interactive)break;const o=e.native.shiftKey;s.events.emit("double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),bP(s,r);break}case"immediate-double-click":{const n=ju(e),i=U1(n,e.pointerType,t.forEachTool),s=i!=null?i.manipulator:null;if(s==null||!s.interactive)break;const o=e.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:n,button:e.button,pointerType:e.pointerType,shiftKey:o,stopPropagation:r}),e.pointerType==="mouse"&&bP(s,r);break}}this._onFocusChange(t.forEachTool)}_releaseManipulatorBeforeDragging(e,t,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:ju(t)}),this._grabbedManipulators.forEach(({manipulator:n},i)=>{n===e&&this._grabbedManipulators.delete(i)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,t){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:ju(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(t.setActiveTool))}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=UK(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=UK(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:n})=>{t.add(n)}),this._hoveredManipulators.forEach(({tool:n})=>{r.add(n)}),e(n=>{n.hasGrabbedManipulators=t.has(n),n.hasHoveredManipulators=r.has(n);const i=this._grabbedManipulators.values(),s=kse(i,({tool:o})=>o===n);n.firstGrabbedManipulator=s!=null?s.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:r},n=!0,i){const s=(o,a)=>o===e&&(i==null||i===a);this._grabbedManipulators.forEach(({tool:o,manipulator:a,pointerType:l},u)=>{s(o,a)&&(this._grabbedManipulators.delete(u),a.grabbing=!1,a.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:l}))}),this._draggedManipulators.forEach(({tool:o,manipulator:a},l)=>{s(o,a)&&(this._draggedManipulators.delete(l),a.dragging=!1,a.events.emit("drag",{action:"cancel"}))}),n&&this._hoveredManipulators.forEach(({tool:o,manipulator:a},l)=>{s(o,a)&&(this._hoveredManipulators.delete(l),a.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(t)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Yi(t.x,t.y),r,t.pointerType,e)})}handleHoverEvent(e,t){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!BK(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(ju(e),e.pointerId,e.pointerType,t))}_updateHoveredStateForPointerAtScreenPosition(e,t,r,n){let i=U1(e,r,n);const s=this._hoveredManipulators.get(t)?.manipulator;i==null||i.manipulator.interactive||(i=null),i!=null&&s===i.manipulator||(s!=null&&(s.hovering=!1),i!=null?(i.manipulator.hovering=!0,this._hoveredManipulators.set(t,i)):this._hoveredManipulators.delete(t),this._onFocusChange(n))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:t},r)=>{e===r&&(this._hoveredManipulators.delete(e),t.hovering=!1)})}};function UK(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function U1(e,t,r){let n=null;return r(i=>{if(i.manipulators==null||!lj(i))return!1;const s=i.manipulators.intersect(e,t);return s!=null&&(n={tool:i,manipulator:s},!0)}),n}function BK(e){return e==="mouse"}function VK(e){return e.pointerType!=="mouse"||e.button===0}function bCt(e){return!!e.native.shiftKey}function bP(e,t){e?.consumesClicks&&t()}const GK="attached",wP="tools",wCt=1e3;let $c=class extends mt{constructor(e){super(e),this._updatingHandles=new bm,this._clock=t_,this._manipulatorState=new vCt,this.tools=new st,this.cursor=null,this._interacting=!1,this._interactingTimeout=wCt,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(const r of this.tools.items)if(t(r))return}}initialize(){this.addHandles([this.view.on(cge,e=>{this._handleInputEvent(e)},ld.TOOL),...gCt(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Pe.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const n=lj(r);this.activeTool!=null&&n||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!n)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=mn(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([Et(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],GK):this.addHandles(Et(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(GK),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:r})=>e(r,t))})}_handleInputEvent(e){let t=!1;const r={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(n=>{!t&&n.visible&&n.handleInputEvent(r)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(wP),this._forEachTool(e=>{if(e instanceof mt){const t=Et(()=>[e.cursor,e.visible,e.editable],()=>{lj(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,wP)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],wP)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Sw.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){}};p([f({constructOnly:!0,nonNullable:!0})],$c.prototype,"view",void 0),p([f({value:null})],$c.prototype,"activeTool",null),p([f({readOnly:!0,type:st})],$c.prototype,"tools",void 0),p([f({readOnly:!0})],$c.prototype,"cursor",void 0),p([f({readOnly:!0})],$c.prototype,"updating",null),p([f()],$c.prototype,"_interacting",void 0),p([f({readOnly:!0})],$c.prototype,"interacting",null),$c=p([W("esri.views.ToolViewManager")],$c);let Fv=class extends mt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":_Ct.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return xCt[this.deviceType]}};p([f({nonNullable:!0,readOnly:!0})],Fv.prototype,"nativeIndex",void 0),p([f({type:String,readOnly:!0})],Fv.prototype,"deviceType",null),p([f({type:Number,readOnly:!0})],Fv.prototype,"axisThreshold",null),Fv=p([W("esri.views.input.gamepad.GamepadInputDevice")],Fv);const s$=Fv,_Ct=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),xCt={standard:.15,spacemouse:.025,unknown:0};let Zx=class extends mt{constructor(...e){super(...e),this.devices=new st,this.enabledFocusMode="document"}};p([f({type:st.ofType(s$),readOnly:!0})],Zx.prototype,"devices",void 0),p([f({type:["document","view","none"]})],Zx.prototype,"enabledFocusMode",void 0),Zx=p([W("esri.views.input.gamepad.GamepadSettings")],Zx);const SCt=Zx;let C4=class extends mt{constructor(){super(...arguments),this.gamepad=new SCt}};p([f({readOnly:!0})],C4.prototype,"gamepad",void 0),C4=p([W("esri.views.input.Input")],C4);const ECt=C4,o$=()=>pr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Of=class extends mt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};p([f({type:Boolean,nonNullable:!0})],Of.prototype,"enabled",void 0),p([f({type:s$})],Of.prototype,"device",void 0),p([f({type:["pan","zoom"],nonNullable:!0})],Of.prototype,"mode",void 0),p([f({type:["forward-down","forward-up"],nonNullable:!0})],Of.prototype,"tiltDirection",void 0),p([f({type:Number,nonNullable:!0})],Of.prototype,"velocityFactor",void 0),Of=p([W("esri.views.navigation.gamepad.GamepadSettings")],Of);const yge=Of;let xy=class extends mt{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new yge,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!o$()}};p([f({type:Boolean})],xy.prototype,"browserTouchPanEnabled",void 0),p([f({type:yge,nonNullable:!0})],xy.prototype,"gamepad",void 0),p([f({type:Boolean})],xy.prototype,"momentumEnabled",void 0),p([f({type:Boolean})],xy.prototype,"mouseWheelZoomEnabled",void 0),xy=p([W("esri.views.navigation.Navigation")],xy);const gge=xy;var zK;function TCt(e){if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Ah(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&vge(e)&&e.heightModelInfo?e.heightModelInfo:ICt(e)?h3.deriveUnitFromSR(MCt,e.spatialReference):null}function vge(e){return"heightModelInfo"in e}function bge(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function ICt(e){return bge(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):wge(e)}function ACt(e){return e.layers!=null||wge(e)||bge(e)||vge(e)}function wge(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(zK||(zK={}));const MCt=new h3({heightModel:"gravity-related-height"});var VE;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(VE||(VE={}));let uj,_P=null;async function CCt(e){_P||(_P=Me(()=>import("./geometryServiceUtils-D2bq_wSl-C90lHlfh.js"),__vite__mapDeps([164,165,1,2]),import.meta.url).then(t=>uj=t)),await _P,Gr(e)}async function _ge(e,t,r,n){if(!e)return null;const i=e.spatialReference;return Pd()||nu(i,t)?Dd(e,t):uj?uj.projectGeometry(e,t,r,n):(await Promise.race([CCt(n),bd(n)]),_ge(e,t,r,n))}let Wr=class extends mt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=ew(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const n=this._getSupportedSpatialReferences(r);if(n.length>0){const i=this._narrowDownSpatialReferenceCandidates(e,n);i!=null&&(e=i)}return e?.length===1})&&e?.length!==1)return{updating:!0};const t=this._pickSpatialReferenceCandidate(e);return{spatialReference:t?.spatialReference??null,viewingMode:t?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),t=this.spatialReference;if(!t)return{updating:this._spatialReferenceTask.updating};let r;const n=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers}],i=>!(!("tileInfo"in i)||!i.tileInfo?.spatialReference.equals(t))&&(r=i,!0),i=>"tileInfo"in i);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:n}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const t=this._collectLayers(this.mapCollections,r=>{const n=TCt(r);return!!n&&(e={heightModelInfo:n,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>ACt(r));return{...e,updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],t=this._collectLayers(this.mapCollections,r=>{const n="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),i=this.requiresExtentInSpatialReference?null:n[0],s=n.find(o=>o.spatialReference.equals(this.spatialReference))??i;if(s)return e.push({extent:s,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const o of n)e.push({extent:o,layer:r});return!1});return{candidates:e,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),n=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=ew(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:tR(async i=>{try{const s=await _ge(r.extent,n,"portalItem"in r.layer?r.layer.portalItem:void 0,i);this._projectExtentTask={...this._projectExtentTask,task:null,output:s}}catch{if(Ba(i))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;const r=new Array;for(const n of e)for(const i of t){if(!n.spatialReference.equals(i.spatialReference))continue;const s=RCt(n.viewingMode,i.viewingMode);if(s!==!1){r.push({spatialReference:n.spatialReference,viewingMode:s});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(t))&&(e=e.filter(({spatialReference:r})=>r.equals(t))),e.length>1&&e.some(({viewingMode:r})=>r!==VE.Local)&&(e=e.filter(({viewingMode:r})=>r!==VE.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const r=[];for(const n of t){const i=this.getSpatialReferenceSupport(n,e);if(i!=null){const s=i.constraints??[{spatialReference:n,viewingMode:null}];for(const{spatialReference:o,viewingMode:a}of s)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||r.push({spatialReference:o,viewingMode:a})}}return r}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:r})=>t.equals(r.spatialReference))||e[0]}_collectLayers(e,t,r=()=>!0){if(this._loadMaybe(this.map?.())!=="loaded")return!0;const n=new kCt(r,t);for(const i of e)if(this._collectCollection(i,n),n.done||n.preloading===this.sourcePreloadCount)break;return n.updating}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const r of e.layers)if(t.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":if(t.updating||(t.done=t.pushLayer(r)),t.done||t.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},t)}if(t.done||t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{Fi(t)}),"loading"):e.loadStatus:"loaded"}};p([f()],Wr.prototype,"required",void 0),p([f({constructOnly:!0})],Wr.prototype,"map",void 0),p([f({constructOnly:!0})],Wr.prototype,"getSpatialReferenceSupport",void 0),p([f()],Wr.prototype,"defaultSpatialReference",void 0),p([f()],Wr.prototype,"userSpatialReference",void 0),p([f()],Wr.prototype,"sourcePreloadCount",void 0),p([f()],Wr.prototype,"priorityCollection",void 0),p([f()],Wr.prototype,"requiresExtentInSpatialReference",void 0),p([f()],Wr.prototype,"suspended",void 0),p([f({readOnly:!0})],Wr.prototype,"ready",null),p([f({readOnly:!0})],Wr.prototype,"heightModelInfoReady",null),p([f({readOnly:!0})],Wr.prototype,"spatialReference",null),p([f({readOnly:!0})],Wr.prototype,"extent",null),p([f({readOnly:!0})],Wr.prototype,"heightModelInfo",null),p([f({readOnly:!0})],Wr.prototype,"vcsWkid",null),p([f({readOnly:!0})],Wr.prototype,"latestVcsWkid",null),p([f({readOnly:!0})],Wr.prototype,"viewingMode",null),p([f({readOnly:!0})],Wr.prototype,"tileInfo",null),p([f({readOnly:!0})],Wr.prototype,"mapCollections",null),p([f({readOnly:!0})],Wr.prototype,"_spatialReferenceTask",null),p([f({readOnly:!0})],Wr.prototype,"_tileInfoTask",null),p([f({readOnly:!0})],Wr.prototype,"_heightModelInfoTask",null),p([f({readOnly:!0})],Wr.prototype,"_extentCandidatesTask",null),p([f()],Wr.prototype,"_extentTask",null),p([f()],Wr.prototype,"_projectExtentTask",void 0),Wr=p([W("esri.views.support.DefaultsFromMap")],Wr);let kCt=class{constructor(e,t){this.layerFilter=e,this.pushLayer=t,this.preloading=-1,this.updating=!1,this.done=!1}};function RCt(e,t){return e!=null?t!=null?e===t&&e:e:t}var Jx;let _t=Jx=class extends jh.EventedMixin(FT(mt)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new e1,this.updatingHandles=new bm,this.allLayerViews=new Dm({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:NCt}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new vm,this.analyses=new fC,this.typeSpecificPreconditionsReady=!0,this.layerViews=new st,this.magnifier=new uge,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new ECt,this.navigation=new gge,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new nCt(this),this.persistableViewModels=new st,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(Et(()=>this.preconditionsReady,t=>{const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Jx.views.add(this)):(this._lockedSpatialReference=null,Jx.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(n){return void queueMicrotask(()=>{this.fatalError=new ie("startup-error",null,n)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Di))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,CR(()=>this.ready)))),this.basemapView=new W5t({view:this}),this.layerViewManager=new X5t({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new $c({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new tCt({view:this}),this.addHandles([Et(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},_a),Et(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Di),Et(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},_a)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([Et(()=>this.defaultsFromMap?.ready,t=>{const r=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const n=gr(()=>e=ew(e));e=tR(async i=>{try{await OB(this.spatialReferenceWarningDelay,null,i)}catch{return}finally{e=null}Pe.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(n,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(Jx.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=pn(this.graphics),this.analyses=pn(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),pn(this.analysisViewManager),this.toolViewManager=pn(this.toolViewManager),this.layerViewManager=pn(this.layerViewManager),this.selectionManager=pn(this.selectionManager),this.basemapView=pn(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=pn(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Pe.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Wr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||pc.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(Pe.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),pc.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!gn(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??fc}set timeZone(e){this._userTimeZone=e,_ue(e)||Pe.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new aj}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new ie("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&Pe.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(mc(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};_t.views=new st,p([f()],_t.prototype,"_userSpatialReference",void 0),p([f()],_t.prototype,"activeTool",null),p([f({readOnly:!0})],_t.prototype,"allLayerViews",void 0),p([f()],_t.prototype,"groundView",void 0),p([f()],_t.prototype,"animation",null),p([f()],_t.prototype,"basemapView",void 0),p([f()],_t.prototype,"center",null),p([f()],_t.prototype,"defaultsFromMapSettings",null),p([f()],_t.prototype,"defaultsFromMap",null),p([f()],_t.prototype,"fatalError",void 0),p([f({type:jt})],_t.prototype,"extent",null),p([f(ZF(vm,"graphics"))],_t.prototype,"graphics",void 0),p([f(ZF(fC,"analyses"))],_t.prototype,"analyses",void 0),p([f({readOnly:!0,type:h3})],_t.prototype,"heightModelInfo",null),p([f({readOnly:!0})],_t.prototype,"interacting",null),p([f({readOnly:!0})],_t.prototype,"navigating",null),p([f({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],_t.prototype,"preconditionsReady",null),p([f({readOnly:!0})],_t.prototype,"typeSpecificPreconditionsReady",void 0),p([f({type:st,readOnly:!0})],_t.prototype,"layerViews",void 0),p([f()],_t.prototype,"resolution",null),p([f({type:uge})],_t.prototype,"magnifier",void 0),p([f({value:null,type:Iye})],_t.prototype,"map",null),p([f()],_t.prototype,"padding",void 0),p([f({readOnly:!0})],_t.prototype,"ready",void 0),p([f({type:Ke})],_t.prototype,"spatialReference",null),p([f()],_t.prototype,"spatialReferenceWarningDelay",void 0),p([f()],_t.prototype,"stationary",null),p([f({readOnly:!0})],_t.prototype,"supportsGround",void 0),p([f({type:Ro})],_t.prototype,"timeExtent",null),p([f({type:String,nonNullable:!0})],_t.prototype,"timeZone",null),p([f()],_t.prototype,"tools",null),p([f()],_t.prototype,"toolViewManager",void 0),p([f({readOnly:!0})],_t.prototype,"type",void 0),p([f({type:Number})],_t.prototype,"scale",void 0),p([f({readOnly:!0})],_t.prototype,"updating",void 0),p([f({readOnly:!0})],_t.prototype,"initialExtentRequired",void 0),p([f({readOnly:!0})],_t.prototype,"initialExtent",null),p([f()],_t.prototype,"cursor",null),p([f({readOnly:!0})],_t.prototype,"input",void 0),p([f({type:gge,nonNullable:!0})],_t.prototype,"navigation",void 0),p([f()],_t.prototype,"layerViewManager",void 0),p([f()],_t.prototype,"analysisViewManager",void 0),p([f()],_t.prototype,"selectionManager",void 0),p([f()],_t.prototype,"width",void 0),p([f()],_t.prototype,"height",void 0),p([f({readOnly:!0})],_t.prototype,"resizing",void 0),p([f({value:null,readOnly:!0})],_t.prototype,"size",null),p([f({readOnly:!0})],_t.prototype,"suspended",void 0),p([f({readOnly:!0})],_t.prototype,"viewEvents",void 0),p([f({readOnly:!0})],_t.prototype,"persistableViewModels",void 0),p([f()],_t.prototype,"_isValid",void 0),p([f()],_t.prototype,"_readyCycleForced",void 0),p([f()],_t.prototype,"_lockedSpatialReference",void 0),p([f()],_t.prototype,"_userTimeZone",void 0),p([f()],_t.prototype,"_lockedTimeZone",void 0),p([f()],_t.prototype,"_userTimeExtent",void 0),p([f()],_t.prototype,"_lockedTimeExtent",void 0),p([f({type:aj})],_t.prototype,"theme",void 0),p([f({readOnly:!0,type:aj})],_t.prototype,"effectiveTheme",null),_t=Jx=p([W("esri.views.View")],_t);const xP=globalThis.$arcgis;xP&&!xP.views&&Object.defineProperty(xP,"views",{configurable:!1,enumerable:!0,writable:!1,value:_t.views});const OCt=_t;function NCt(e){return e.layerViews}function Pn(){return[0,0]}function LCt(e){return[e[0],e[1]]}function N_(e,t){return[e,t]}function xge(e,t=Pn()){const r=Math.min(2,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t}function PCt(e,t){return new Float64Array(e,t,2)}function Sge(){return Pn()}function Ege(){return N_(1,1)}function Tge(){return N_(1,0)}function Ige(){return N_(0,1)}const Age=Sge(),Mge=Ege(),Cge=Tge(),kge=Ige();Object.freeze(Object.defineProperty({__proto__:null,ONES:Mge,UNIT_X:Cge,UNIT_Y:kge,ZEROS:Age,clone:LCt,create:Pn,createView:PCt,fromArray:xge,fromValues:N_,ones:Ege,unitX:Tge,unitY:Ige,zeros:Sge},Symbol.toStringTag,{value:"Module"}));let Nf=class extends w5{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Ko(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new ie("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=bc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};p([f({readOnly:!0})],Nf.prototype,"done",null),p([f({readOnly:!0,type:String})],Nf.prototype,"state",void 0),p([f()],Nf.prototype,"target",void 0),Nf=p([W("esri.views.ViewAnimation")],Nf),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Nf||(Nf={}));const cj=Nf;function cg(e,t){return e[0]=t[0],e[1]=t[1],e}function qi(e,t,r){return e[0]=t,e[1]=r,e}function a$(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Ew(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Rge(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function Oge(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function DCt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function FCt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Nge(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Lge(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function jCt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function L_(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Pge(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function E3(e,t){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function GE(e,t){const r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function zE(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function l$(e){const t=e[0],r=e[1];return t*t+r*r}function Dge(e,t){return e[0]=-t[0],e[1]=-t[1],e}function UCt(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function mC(e,t){const r=t[0],n=t[1];let i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function u$(e,t){return e[0]*t[0]+e[1]*t[1]}function c$(e,t,r){const n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function Fge(e,t,r,n){const i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function BCt(e,t=1){const r=2*t3()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function VCt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function $u(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function GCt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function zCt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function jge(e,t,r,n){const i=t[0]-r[0],s=t[1]-r[1],o=Math.sin(n),a=Math.cos(n);return e[0]=i*a-s*o+r[0],e[1]=i*o+s*a+r[1],e}function Uge(e,t){const r=e[0],n=e[1],i=t[0],s=t[1];let o=r*r+n*n;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*i+n*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function $Ct(e){return"vec2("+e[0]+", "+e[1]+")"}function Bge(e,t){return e[0]===t[0]&&e[1]===t[1]}function Vge(e,t){const r=e[0],n=e[1],i=t[0],s=t[1],o=Co();return Math.abs(r-i)<=o*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))}function Gge(e,t,r,n,i){let s=t[0]-r[0],o=t[1]-r[1];const a=(n[0]*s+n[1]*o)*(i-1);return s=n[0]*a,o=n[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const qCt=zE,MO=Ew,HCt=Rge,WCt=Oge,ZCt=E3,JCt=GE,YCt=l$;Object.freeze(Object.defineProperty({__proto__:null,add:a$,angle:Uge,ceil:DCt,copy:cg,cross:c$,dist:ZCt,distance:E3,div:WCt,divide:Oge,dot:u$,equals:Vge,exactEquals:Bge,floor:FCt,inverse:UCt,len:qCt,length:zE,lerp:Fge,max:Lge,min:Nge,mul:HCt,multiply:Rge,negate:Dge,normalize:mC,projectAndScale:Gge,random:BCt,rotate:jge,round:jCt,scale:L_,scaleAndAdd:Pge,set:qi,sqrDist:JCt,sqrLen:YCt,squaredDistance:GE,squaredLength:l$,str:$Ct,sub:MO,subtract:Ew,transformMat2:VCt,transformMat2d:$u,transformMat3:GCt,transformMat4:zCt},Symbol.toStringTag,{value:"Module"}));function XCt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function zge(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function $ge(e,t,r,n,i,s,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e}function CO(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-n*i;return l?(l=1/l,e[0]=s*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*a-s*o)*l,e[5]=(n*o-r*a)*l,e):null}function QCt(e){return e[0]*e[3]-e[1]*e[2]}function h$(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1],h=r[2],d=r[3],m=r[4],y=r[5];return e[0]=n*u+s*c,e[1]=i*u+o*c,e[2]=n*h+s*d,e[3]=i*h+o*d,e[4]=n*m+s*y+a,e[5]=i*m+o*y+l,e}function T3(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+s*u,e[1]=i*c+o*u,e[2]=n*-u+s*c,e[3]=i*-u+o*c,e[4]=a,e[5]=l,e}function kO(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n*u,e[1]=i*u,e[2]=s*c,e[3]=o*c,e[4]=a,e[5]=l,e}function Tw(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=n*u+s*c+a,e[5]=i*u+o*c+l,e}function p$(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function qge(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function d$(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function KCt(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ekt(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function tkt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function Hge(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function rkt(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function nkt(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function ikt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function skt(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=t[0],u=t[1],c=t[2],h=t[3],d=t[4],m=t[5],y=Co();return Math.abs(r-l)<=y*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-u)<=y*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-c)<=y*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-h)<=y*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-d)<=y*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=y*Math.max(1,Math.abs(a),Math.abs(m))}const okt=h$,akt=Hge;Object.freeze(Object.defineProperty({__proto__:null,add:tkt,copy:XCt,determinant:QCt,equals:skt,exactEquals:ikt,frob:ekt,fromRotation:p$,fromScaling:qge,fromTranslation:d$,identity:zge,invert:CO,mul:okt,multiply:h$,multiplyScalar:rkt,multiplyScalarAndAdd:nkt,rotate:T3,scale:kO,set:$ge,str:KCt,sub:akt,subtract:Hge,translate:Tw},Symbol.toStringTag,{value:"Module"}));function bh(){return[1,0,0,1,0,0]}function Wge(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function lkt(e,t,r,n,i,s){return[e,t,r,n,i,s]}function ukt(e,t){return new Float64Array(e,t,6)}const ckt=bh();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:ckt,clone:Wge,create:bh,createView:ukt,fromValues:lkt},Symbol.toStringTag,{value:"Module"}));const Zge=96,Jge=39.37,hkt=180/Math.PI;function Yge(e){return e.wkid?e:e.spatialReference||Ke.WGS84}function f$(e,t){return t.type?qi(e,t.x,t.y):cg(e,t)}function Xge(e){return wc(e)}function RO(e,t,r=0){let n=e.width,i=e.height;if(r!==0){const a=d_(r),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));n=e.width*l+e.height*u,i=e.width*u+e.height*l}const s=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(n/s,i/o)*vkt(e.spatialReference)}async function Yx(e,t,r,n){let i,s;if(!e||Array.isArray(e)&&!e.length)return null;if(st.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(c=>"attributes"in c),l=e.some(c=>!c.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const c=new Map;for(const y of e){const g=y.layer,b=c.get(g)||[],S=y.attributes[g.objectIdField];S!=null&&b.push(S),c.set(g,b)}const h=[];c.forEach((y,g)=>{const b=t.allLayerViews.find(S=>S.layer.id===g.id);if(b&&"queryFeatures"in b){const S=g.createQuery();S.objectIds=y,S.returnGeometry=!0,h.push(b.queryFeatures(S))}});const d=await Promise.all(h),m=[];for(const y of d)if(y&&y.features&&y.features.length)for(const g of y.features)g.geometry!=null&&m.push(g.geometry);u=m}for(const c of u)n=await Yx(c,t,r,n);return n}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")i=new it(e);else if(e instanceof _c)i=e;else if("geometry"in e){if(e.geometry)i=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0,i=(await l.queryFeatures(u))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new jt({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=wSt(i);break;default:s=i.extent}if(!s)return null;Pd()||nu(s.spatialReference,r)||await bd();const o=Dd(s,r);if(!o)return null;if(n){const a=o.center,l=a.clone();l.x=dO(a.x,n.center.x,r),l.x!==a.x&&o.centerAt(l),n=n.union(o)}else n=o;return n}function pkt(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const n of e){const i=n.layer;i?.minScale&&i.maxScale&&(t=i.minScale<t?i.minScale:t,r=i.maxScale>r?i.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function $K(e,t){const r=Yge(e);return gn(r,t)||r.imageCoordinateSystem||t.imageCoordinateSystem?e:Dd(e,t)}async function dkt(e,t){if(!e||!t)return new Hl({targetGeometry:new it,scale:0,rotation:0});let r=t.spatialReference;const{constraints:n,padding:i,viewpoint:s,size:o}=t,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;e instanceof Hl?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l?.targetGeometry?u=l.targetGeometry:e instanceof jt?u=e:e instanceof _c?u=await Yx(e,t,r):e&&(u=await Yx(e.center,t,r)||await Yx(e.target,t,r)||await Yx(e,t,r)),!u&&s?.targetGeometry?u=s.targetGeometry:!u&&t.extent&&(u=t.extent),r||(r=Yge(t.spatialReference||t.extent||u)),Pd()||gn(u.spatialReference,r)||nu(u.spatialReference,r)||await bd();const c=$K(u,r),h="center"in c?c.center:c;t.pickClosestTarget!==!1&&h.type==="point"&&s.targetGeometry?.type==="point"&&(h.x=dO(h.x,s.targetGeometry.x,h.spatialReference));let d=0;l?d=l.rotation:e.hasOwnProperty("rotation")?d=e.rotation:s&&(d=s.rotation);let m=0;m=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&n&&n.effectiveLODs?n.zoomToScale(e.zoom):Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0?s.scale:RO($K(u.extent,r),a,d);const y=pkt(e.target??e);y&&(y.min&&y.min<m?m=y.min:y.max&&y.max>m&&(m=y.max));let g=new Hl({targetGeometry:h,scale:m,rotation:d});return n&&(g=n.fit(g),n.constrainByGeometry(g),n.rotationEnabled||(g.rotation=s.rotation)),g}function To(e,t){const r=e.targetGeometry,n=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function Qge(e,t,r){return r?qi(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):L_(e,t,.5)}const fkt=function(){const e=Pn();return function(t,r,n){const i=r.targetGeometry;f$(e,i);const s=.5*P_(r);return t.xmin=e[0]-s*n[0],t.ymin=e[1]-s*n[1],t.xmax=e[0]+s*n[0],t.ymax=e[1]+s*n[1],t.spatialReference=i.spatialReference,t}}();function mkt(e,t,r,n,i){return hj(e,t,r.center),e.scale=RO(r,n),i?.constraints?.constrain(e),e}function ykt(e,t,r,n){return v$(e,t,r,n),CO(e,e)}const m$=function(){const e=Pn();return function(t,r,n){return MO(t,bkt(t,r),Qge(e,r,n))}}(),gkt=function(){const e=bh(),t=Pn();return function(r,n,i,s){const o=P_(n),a=y$(n);return qi(t,o,o),qge(e,t),T3(e,e,a),Tw(e,e,m$(t,i,s)),Tw(e,e,[0,s.top-s.bottom]),qi(r,e[4],e[5])}}();function P_(e){return e.scale*Kge(e.targetGeometry?.spatialReference)}function Kge(e){return e!=null&&xo(e)?1/(Xge(e)*Jge*Zge):1}function y$(e){return GR(e.rotation)||0}function vkt(e){return xo(e)?Xge(e)*Jge*Zge:1}function bkt(e,t){return L_(e,t,.5)}const g$=function(){const e=Pn(),t=Pn(),r=Pn();return function(n,i,s,o,a,l){return Dge(e,i),L_(t,s,.5*l),qi(r,1/o*l,-1/o*l),d$(n,t),a&&T3(n,n,a),kO(n,n,r),Tw(n,n,e),n}}(),v$=function(){const e=Pn();return function(t,r,n,i){const s=P_(r),o=y$(r);return f$(e,r.targetGeometry),g$(t,e,n,s,o,i)}}(),wkt=function(){const e=Pn();return function(t,r,n,i){const s=P_(r);return f$(e,r.targetGeometry),g$(t,e,n,s,0,i)}}();function b$(e){const t=Bs(e);return t?t.valid[1]-t.valid[0]:0}function _kt(e,t){return Math.round(b$(e)/t)}const e1e=function(){const e=Pn(),t=Pn(),r=[0,0,0];return function(n,i,s){Ew(e,n,i),mC(e,e),Ew(t,n,s),mC(t,t),c$(r,e,t);let o=Math.acos(u$(e,t)/(zE(e)*zE(t)))*hkt;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),xkt=function(){const e=Pn();return function(t,r,n,i){const s=t.targetGeometry;return To(t,r),gkt(e,r,n,i),s.x+=e[0],s.y+=e[1],t}}(),hj=function(e,t,r){To(e,t);const n=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,e},Skt=function(){const e=Pn();return function(t,r,n,i,s){s||(s="center"),MO(e,n,i),L_(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":qi(e,0,0);break;case"left":qi(e,-o,0);break;case"top":qi(e,0,a);break;case"right":qi(e,o,0);break;case"bottom":qi(e,0,-a);break;case"top-left":qi(e,-o,a);break;case"bottom-left":qi(e,-o,-a);break;case"top-right":qi(e,o,a);break;case"bottom-right":qi(e,o,-a)}return I3(t,r,e),t}}();function Ekt(e,t,r){return To(e,t),e.rotation+=r,e}function Tkt(e,t,r){return To(e,t),e.rotation=r,e}const Ikt=function(){const e=Pn();return function(t,r,n,i,s){return To(t,r),isNaN(n)||n===0||(t1e(e,i,r,s),t.scale=r.scale*n,r1e(e,e,t,s),I3(t,t,qi(e,e[0]-i[0],i[1]-e[1]))),t}}();function qK(e,t,r){return To(e,t),e.scale=r,e}const w$=function(){const e=Pn();return function(t,r,n,i,s,o){return To(t,r),isNaN(n)||n===0||(t1e(e,s,r,o),t.scale=r.scale*n,t.rotation+=i,r1e(e,e,t,o),I3(t,t,qi(e,e[0]-s[0],s[1]-e[1]))),t}}(),Akt=function(){const e=Pn(),t=Pn();return function(r,n,i,s,o,a,l){return m$(t,a,l),a$(e,o,t),s?w$(r,n,i,s,e,a):Ikt(r,n,i,e,a)}}(),t1e=function(){const e=bh();return function(t,r,n,i){return $u(t,r,ykt(e,n,i,1))}}(),r1e=function(){const e=bh();return function(t,r,n,i){return $u(t,r,v$(e,n,i,1))}}(),I3=function(){const e=Pn(),t=bh();return function(r,n,i){To(r,n);const s=P_(n),o=r.targetGeometry;return p$(t,y$(n)),kO(t,t,N_(s,s)),$u(e,i,t),o.x+=e[0],o.y+=e[1],r}}();function _$(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Mkt(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ckt(e,t,r,n,i,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o}function kkt(e,t){return new Float32Array(e,t,6)}function n1e(e,t,r,n){const i=t[n],s=t[n+1];e[n]=r[0]*i+r[2]*s+r[4],e[n+1]=r[1]*i+r[3]*s+r[5]}function i1e(e,t,r,n=0,i=0,s=2){const o=i||t.length/s;for(let a=n;a<o;a++)n1e(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:Mkt,create:_$,createView:kkt,fromValues:Ckt,transform:n1e,transformMany:i1e},Symbol.toStringTag,{value:"Module"}));function s1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Rkt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function x$(e,t,r,n,i,s,o,a,l,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function S$(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function o1e(e,t){if(e===t){const r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function a1e(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=c*o-a*u,d=-c*s+a*l,m=u*s-o*l;let y=r*h+n*d+i*m;return y?(y=1/y,e[0]=h*y,e[1]=(-c*n+i*u)*y,e[2]=(a*n-i*o)*y,e[3]=d*y,e[4]=(c*r-i*l)*y,e[5]=(-a*r+i*s)*y,e[6]=m*y,e[7]=(-u*r+n*l)*y,e[8]=(o*r-n*s)*y,e):null}function l1e(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-a*u,e[1]=i*u-n*c,e[2]=n*a-i*o,e[3]=a*l-s*c,e[4]=r*c-i*l,e[5]=i*s-r*a,e[6]=s*u-o*l,e[7]=n*l-r*u,e[8]=r*o-n*s,e}function Okt(e){const t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*s-o*l)+r*(-u*i+o*a)+n*(l*i-s*a)}function OO(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=r[0],m=r[1],y=r[2],g=r[3],b=r[4],S=r[5],E=r[6],x=r[7],w=r[8];return e[0]=d*n+m*o+y*u,e[1]=d*i+m*a+y*c,e[2]=d*s+m*l+y*h,e[3]=g*n+b*o+S*u,e[4]=g*i+b*a+S*c,e[5]=g*s+b*l+S*h,e[6]=E*n+x*o+w*u,e[7]=E*i+x*a+w*c,e[8]=E*s+x*l+w*h,e}function yC(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=r[0],m=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=d*n+m*o+u,e[7]=d*i+m*a+c,e[8]=d*s+m*l+h,e}function E$(e,t,r){const n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=Math.sin(r),m=Math.cos(r);return e[0]=m*n+d*o,e[1]=m*i+d*a,e[2]=m*s+d*l,e[3]=m*o-d*n,e[4]=m*a-d*i,e[5]=m*l-d*s,e[6]=u,e[7]=c,e[8]=h,e}function u1e(e,t,r){const n=r[0],i=r[1],s=r[2];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function c1e(e,t,r){const n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function h1e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function p1e(e,t){const r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Nkt(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Lkt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function d1e(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,u=r*o,c=n*o,h=n*a,d=i*o,m=i*a,y=i*l,g=s*o,b=s*a,S=s*l;return e[0]=1-h-y,e[3]=c-S,e[6]=d+b,e[1]=c+S,e[4]=1-u-y,e[7]=m-g,e[2]=d-b,e[5]=m+g,e[8]=1-u-h,e}function Pkt(e,t){const r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10],h=c*o-a*u,d=-c*s+a*l,m=u*s-o*l,y=r*h+n*d+i*m;if(!y)return null;const g=1/y;return e[0]=h*g,e[1]=(-c*n+i*u)*g,e[2]=(a*n-i*o)*g,e[3]=d*g,e[4]=(c*r-i*l)*g,e[5]=(-a*r+i*s)*g,e[6]=m*g,e[7]=(-u*r+n*l)*g,e[8]=(o*r-n*s)*g,e}function f1e(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],m=t[11],y=t[12],g=t[13],b=t[14],S=t[15],E=r*a-n*o,x=r*l-i*o,w=r*u-s*o,T=n*l-i*a,I=n*u-s*a,M=i*u-s*l,C=c*g-h*y,k=c*b-d*y,N=c*S-m*y,F=h*b-d*g,P=h*S-m*g,B=d*S-m*b;let O=E*B-x*P+w*F+T*N-I*k+M*C;return O?(O=1/O,e[0]=(a*B-l*P+u*F)*O,e[1]=(l*N-o*B-u*k)*O,e[2]=(o*P-a*N+u*C)*O,e[3]=(i*P-n*B-s*F)*O,e[4]=(r*B-i*N+s*k)*O,e[5]=(n*N-r*P-s*C)*O,e[6]=(g*M-b*I+S*T)*O,e[7]=(b*w-y*M-S*x)*O,e[8]=(y*I-g*w+S*E)*O,e):null}function Dkt(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Fkt(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function jkt(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Ukt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function m1e(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Bkt(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Vkt(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function Gkt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function zkt(e,t){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=t[0],d=t[1],m=t[2],y=t[3],g=t[4],b=t[5],S=t[6],E=t[7],x=t[8],w=Co();return Math.abs(r-h)<=w*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-d)<=w*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-m)<=w*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-y)<=w*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(o-g)<=w*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-b)<=w*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-S)<=w*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-E)<=w*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-x)<=w*Math.max(1,Math.abs(c),Math.abs(x))}function $kt(e){const t=Co(),r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(n*n+o*o+u*u))<=t&&Math.abs(1-(i*i+a*a+c*c))<=t}const qkt=OO,Hkt=m1e;Object.freeze(Object.defineProperty({__proto__:null,add:Ukt,adjoint:l1e,copy:Rkt,determinant:Okt,equals:zkt,exactEquals:Gkt,frob:jkt,fromMat2d:Lkt,fromMat4:s1e,fromQuat:d1e,fromRotation:p1e,fromScaling:Nkt,fromTranslation:h1e,identity:S$,invert:a1e,isOrthoNormal:$kt,mul:qkt,multiply:OO,multiplyScalar:Bkt,multiplyScalarAndAdd:Vkt,normalFromMat4:f1e,normalFromMat4Legacy:Pkt,projection:Dkt,rotate:E$,scale:u1e,scaleByVec2:c1e,set:x$,str:Fkt,sub:Hkt,subtract:m1e,translate:yC,transpose:o1e},Symbol.toStringTag,{value:"Module"}));function zS(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function y1e(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Wkt(e,t,r,n,i,s,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=i,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function Zkt(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:y1e,create:zS,createView:Zkt,fromValues:Wkt},Symbol.toStringTag,{value:"Module"}));function T$(){return new Float32Array(2)}function Jkt(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function zg(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function Ykt(e,t){return new Float32Array(e,t,2)}function g1e(){return T$()}function v1e(){return zg(1,1)}function b1e(){return zg(1,0)}function w1e(){return zg(0,1)}const _1e=g1e(),x1e=v1e(),Xkt=b1e(),Qkt=w1e();Object.freeze(Object.defineProperty({__proto__:null,ONES:x1e,UNIT_X:Xkt,UNIT_Y:Qkt,ZEROS:_1e,clone:Jkt,create:T$,createView:Ykt,fromValues:zg,ones:v1e,unitX:b1e,unitY:w1e,zeros:g1e},Symbol.toStringTag,{value:"Module"}));function Kkt(e){return e instanceof Float32Array&&e.length>=2}function eRt(e){return Array.isArray(e)&&e.length>=2}function SP(e){return Kkt(e)||eRt(e)}var pj;const qh=[0,0];let xp=pj=class extends we{constructor(e){super(e),this._viewpoint2D={center:Pn(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new jt,this.id=0,this.inverseTransform=bh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=bh(),this.transformNoRotation=bh(),this.displayMat3=zS(),this.displayViewMat3=zS(),this.viewMat3=zS(),this.viewMat2d=_$(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=To(r,e.viewpoint),this._set("size",cg(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new pj({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return SP(t)?$u(e,t,this.inverseTransform):(qh[0]=t,qh[1]=r,$u(e,qh,this.inverseTransform))}toScreen(e,t,r){return SP(t)?$u(e,t,this.transform):(qh[0]=t,qh[1]=r,$u(e,qh,this.transform))}toScreenNoRotation(e,t,r){return SP(t)?$u(e,t,this.transformNoRotation):(qh[0]=t,qh[1]=r,$u(e,qh,this.transformNoRotation))}wrapMapCoordinate(e,t){cg(e,t);const[r]=t,[n]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const l=b$(s)/2;o=Math.max(o,n-l),a=Math.min(a,n+l)}return(r<o||r>a)&&(e[0]=dO(r,n,s)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,n=this._get("pixelRatio")||1,i=this._get("size");return g$(e,r,i,t,0,n),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new Hl({targetGeometry:new it(e[0],e[1],t),scale:r,rotation:n});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=P_(o),this.rotation=n,this.scale=r,this.spatialReference=t,cg(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;x$(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=S$(this.viewMat3),c=zg(s[0]/2,s[1]/2),h=zg(-s[0]/2,-s[1]/2),d=GR(n);yC(u,u,c),E$(u,u,d),yC(u,u,h),OO(this.displayViewMat3,this.displayMat3,u);const m=d$(this.viewMat2d,c);return T3(m,m,d),Tw(m,m,h),fkt(this.extent,o,s),v$(this.transform,o,s,i),CO(this.inverseTransform,this.transform),wkt(this.transformNoRotation,o,s,i),this.worldScreenWidth=_kt(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};p([f({readOnly:!0})],xp.prototype,"id",void 0),p([f({value:1,json:{write:!0}})],xp.prototype,"pixelRatio",null),p([f({json:{write:!0}})],xp.prototype,"size",null),p([f()],xp.prototype,"spatialReference",void 0),p([f({type:Hl,json:{write:!0}})],xp.prototype,"viewpoint",null),p([f({readOnly:!0})],xp.prototype,"visibleArea",null),xp=pj=p([W("esri.views.2d.ViewState")],xp);const HK=xp;var dj,fj;let zp=dj=class extends mt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new dj({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};p([f()],zp.prototype,"left",void 0),p([f()],zp.prototype,"top",void 0),p([f()],zp.prototype,"right",void 0),p([f()],zp.prototype,"bottom",void 0),zp=dj=p([W("esri.views.2d.PaddedViewState.Padding")],zp);let jv=fj=class extends HK{constructor(...e){super(...e),this.paddedViewState=new HK,this._updateContent=(()=>{const t=Pn();return()=>{const r=this._get("size"),n=this._get("padding");if(!r||!n)return;const i=this.paddedViewState;qi(t,n.left+n.right,n.top+n.bottom),Ew(t,r,t),cg(i.size,t);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(Et(()=>[this.size,this.padding],()=>this._updateContent(),Di)),this.padding=new zp,this.size=[0,0]}set padding(e){this._set("padding",e||new zp)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const r=this._get("padding");r&&(t=xkt(e.clone(),e,this._get("size"),r));const{targetGeometry:n,rotation:i,scale:s}=t,{x:o,y:a,spatialReference:l}=n,u=this._viewpoint2D;u.center[0]=o,u.center[1]=a,u.rotation=i,u.scale=s,u.spatialReference=l,this._update()}}clone(){return new fj({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};p([f()],jv.prototype,"paddedViewState",void 0),p([f({type:zp})],jv.prototype,"padding",null),p([f()],jv.prototype,"viewpoint",null),jv=fj=p([W("esri.views.2d.PaddedViewState")],jv);const I$=jv;function nm(e,t,r,n){const i=3*e,s=3*(r-e)-i,o=1-i-s,a=3*t,l=3*(n-t)-a,u=1-a-l;function c(y){return((o*y+s)*y+i)*y}function h(y){return((u*y+l)*y+a)*y}function d(y){return(3*o*y+2*s)*y+i}function m(y,g){let b,S,E,x,w,T;for(E=y,T=0;T<8;T++){if(x=c(E)-y,Math.abs(x)<g)return E;if(w=d(E),Math.abs(w)<1e-6)break;E-=x/w}if(b=0,S=1,E=y,E<b)return b;if(E>S)return S;for(;b<S;){if(x=c(E),Math.abs(x-y)<g)return E;y>x?b=E:S=E,E=.5*(S-b)+b}return E}return function(y,g=1e-6){return h(m(y,g))}}const tRt=/^cubic-bezier\((.*)\)/,Xc={};function rRt(e){let t=Xc[e]||null;if(!t){const r=tRt.exec(e);if(r){const n=r[1].split(",").map(i=>parseFloat(i.trim()));n.length!==4||n.some(i=>isNaN(i))||(t=nm.apply(nm,n))}}return t}Xc.ease=nm(.25,.1,.25,1),Xc.linear=nm(0,0,1,1),Xc.easeIn=Xc["ease-in"]=nm(.42,0,1,1),Xc.easeOut=Xc["ease-out"]=nm(0,0,.58,1),Xc.easeInOut=Xc["ease-in-out"]=nm(.42,0,.58,1);let WK=class{constructor(e){this._view=e,this.viewpoint=new Hl({targetGeometry:new it,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,t]=this._view.size;return Math.sqrt(e*e+t*t)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Kge(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,t){t.pan=Sae(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,t.rotate=d_(r),t.sourceZoom=this.scale,t.targetZoom=e.scale}interpolate(e,t,r){const{pan:n,rotate:i,zoom:s,zoomOffset:o}=r,{center:a}=this;a.spatialReference=e.center.spatialReference,a.x=eb(e.center.x,t.center.x,n),a.y=eb(e.center.y,t.center.y,n),this.viewpoint.scale=eb(e.scale,t.scale+o,s);let l=e.rotation;const u=t.rotation;Math.abs(u-l)>=180&&(l+=360*(l<u?1:-1)),this.viewpoint.rotation=eb(l,u,i)}copyFrom(e){To(this.viewpoint,e.viewpoint),this._view=e.view}};const S1e=e=>e*e,nRt=e=>1-S1e(1-e),iRt=e=>2**(10*(e-1)),sRt=e=>1-iRt(1-e);function oRt(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return n=>n<r?e*n*n:t*n-t+1}function aRt(e,t){return(r,n)=>r<t?t*e(r/t,n):1-e((1-r)/(1-t),n)*(1-t)}const ZK=aRt(oRt(1),.5);let lRt=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const $E={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},E1e={...$E,maxDuration:4e3};let uRt=class T1e{constructor(t){this._createCamera=t,this.compared=new lRt,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:$E.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new T1e(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,n){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=n.desiredScreenFlow??$E.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Co()}get hasFov(){return Math.abs(this.compared.fov)>Co()}get hasRotate(){return this.compared.rotate>Co()}},cRt=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},hRt=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,t)=>e+t.time,0)}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,n=0;const i=this.definition,s=this.segments.reduce((o,a)=>o||a.definition.hasZoom,!1);for(let o=0;o<this.segments.length;o++){const a=this.segments[o],l=a.definition;if(e<=a.time||o===this.segments.length-1){if(this.segmentInterpolateComponentsAt(a,a.time===0?0:e/a.time,t),i.hasPan&&!isNaN(t.pan)&&isFinite(i.compared.pan)?t.pan=(r+l.compared.pan*t.pan)/i.compared.pan:t.pan=1,i.hasRotate&&!isNaN(t.rotate)&&isFinite(i.compared.rotate)?t.rotate=(n+l.compared.rotate*t.rotate)/i.compared.rotate:t.rotate=1,s&&!isNaN(t.zoom)&&isFinite(l.compared.targetZoom)){const{sourceZoom:u,targetZoom:c}=l.compared,h=t.zoom*(c-u)+u,d=this.segments[0].definition.compared.sourceZoom,m=this.segments[this.segments.length-1].definition.compared.targetZoom,y=Math.abs(c-d)>Math.abs(u-d)?c:u;t.zoomOffset=y-m,t.zoom=(h-d)/(y-d)}else t.zoom=1;return t}e-=a.time,r+=l.compared.pan,n+=l.compared.rotate}}segmentInterpolateComponentsAt(e,t,r){e.interpolateComponentsAt(t,r)}},EP=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,t=e.compared,r=t.sourceZoom,n=t.targetZoom;this._zoomSign=r>n?1:-1,this._panPixelsAtSource=t.pan*e.source.pixelsPerPanAtZoom(r);const i=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=t.rotate*i}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,t=this.definition.compared.targetZoom,{hasZoom:r,hasPan:n,hasRotate:i}=this.definition;let s=0,o=0;r&&(n&&(s=(t/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),i&&(o=this._zoomSign*(Math.log(e/t)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const a=this.definition.desiredPixelFlow;if(r&&n&&i){const l=s+o+s*o;this._zoomPixelFlow=s*o/l*a,this._panPixelFlow=o/l*a,this._rotatePixelFlow=s/l*a}else if(r&&n){const l=1+s;this._zoomPixelFlow=s/l*a,this._panPixelFlow=1/l*a}else if(r&&i){const l=1+o;this._zoomPixelFlow=o/l*a,this._rotatePixelFlow=1/l*a}else if(n&&i){const l=this._panPixelsAtSource/this._rotatePixels,u=1+l;this._panPixelFlow=l/u*a,this._rotatePixelFlow=1/u*a}else n?this._panPixelFlow=a:r?this._zoomPixelFlow=a:i&&(this._rotatePixelFlow=a);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const l=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=l,this._panPixelFlow/=l,this._rotatePixelFlow/=l}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/pRt:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,t=e*this._panPixelsAtSource;return Math.log(t*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(t*(t/r)**-e-t)/(r-t)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:t,segmentEnd:r}=this.definition;return t+e*(r-t)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(t*e*this._time)-1))/(t*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),t.zoom=this._interpolateComponentsZoom(e),t.pan=this._interpolateComponentsPan(e),t.rotate=this._interpolateComponentsRotate(e),t.zoomOffset=0,t.fov=this._interpolateComponentsFov(e)}};const pRt=d_(45);function dRt(e,t,r){const n=t-e.compared.sourceZoom,i=e.halfWindowPanAtZoom(n);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+i)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*i)}function fRt(e,t,r){const n=1/t,i=Math.log(e.compared.sourceZoom*n),s=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,u=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*n*s*o*l*u-e.halfWindowSize*i*s*o*l+e.halfWindowSize*i*s*o*u/(a*a)}function mRt(e,t,r){const n=t-e.compared.sourceZoom,i=1/n,s=1/t,o=Math.log(e.compared.sourceZoom*s),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(n))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(n*n)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function yRt(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function gRt(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function vRt(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function bRt(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function wRt(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function _Rt(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function xRt(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function SRt(e,t,r){const n=Math.log(t/e.compared.targetZoom),i=1/e.desiredPixelFlow,s=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*n*i*s*a+e.halfWindowSize*n*i*s*l/(o*o)+e.halfWindowSize*i*s*a*l/t}function ERt(e,t,r){const n=t-e.compared.targetZoom,i=1/n,s=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(n*n)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function TRt(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function IRt(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function ARt(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function MRt(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,n=t,i=e.halfWindowPanAtZoom(n),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*i);return e.compared.sourceZoom<=e.compared.targetZoom?s*(r-i):s*(r+i)}function CRt(e,t){let r=kRt(e,t);const n={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},i=n.ascensionFactor===0,s=n.descensionFactor===0,o=i?yRt:dRt,a=i?gRt:fRt,l=i?vRt:mRt,u=s?TRt:xRt,c=s?IRt:SRt,h=s?ARt:ERt,d=w=>o(e,w,n)+bRt(e,w,n)+u(e,w,n),m=w=>a(e,w,n)+wRt(e,w,n)+c(e,w,n),y=w=>l(e,w,n)+_Rt(e,w,n)+h(e,w,n);let g=d(r);const b=MRt(e);let S;const E=t.maximumIterations||20,x=t.maximumDistance!=null?t.maximumDistance:1/0;for(S=0;S<E;S++){const w=t.desiredSlope??1e-6;let T=m(r);Math.abs(T)>w&&(T+=w);const I=T/y(r);if(isNaN(I)||r>=x&&I<0){if(!isFinite(x))return null;r=x,g=d(r);break}if(r-=I,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const M=d(r);if(Math.abs(M-g)/g<=.005)break;g=M}return g>b*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function kRt(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),n=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return n<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,n):n}let RRt=class extends hRt{constructor(e,t){super(),this._preallocSegments=[new EP,new EP,new EP],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,t)}update(e,t){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=t?.apex?CRt(e,t.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,t?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,t,r){e.interpolateComponentsAt(t,r),e===this._ascensionSegment?r.zoom=nRt(r.zoom):e===this._descensionSegment&&(r.zoom=S1e(r.zoom))}_updateWithApex(e,t){const[r,n,i]=this._preallocSegments,s=t?.ascensionFactor??.5,o=Math.min(1-s,t?.ascensionFactor!=null&&t.descensionFactor!=null?t.descensionFactor:.5),a=1-s-o;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*s,r.definition.compared.rotate=this.definition.compared.rotate*s,r.definition.segmentEnd=s,r.update(),this._ascensionSegment=r,this.segments.push(r),a>0&&(n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.copyFrom(this.definition),n.definition.compared.sourceZoom=e,n.definition.compared.targetZoom=e,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=r.definition.segmentEnd,n.definition.segmentEnd=r.definition.segmentEnd+a,n.update(),this.segments.push(n)),i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.sourceZoom=e,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentStart=s+a,i.update(),this._descensionSegment=i,this.segments.push(i)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const ORt=new cRt;let NRt=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=ZK,this.definition=new uRt(e),this.path=new RRt}update(e,t,r){this.definition.update(e,t,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Hse(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?ZK:sRt)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,ORt);t.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const t=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(r-t)}_applyTimeSettings(e,t){const r=t.speedFactor!=null?t.speedFactor:1,n=t.minDuration??$E.minDuration/r,i=t.maxDuration??$E.maxDuration/r;return e=t.duration!=null?t.duration:Math.min(Math.max(e/r,n),i)}};const JK=2e3,LRt=64;let PRt=class{constructor(e){this._view=e,this._animation=new NRt(()=>new WK(this._view)),this._current=new WK(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,t,r={}){To(this._current.viewpoint,e),To(this._source.viewpoint,e),To(this._target.viewpoint,t),this._animation.update(this._source,this._target,r)}applyRatio(e,t){this._animation.cameraAt(t,this._current),To(e,this._current.viewpoint)}},Uv=class extends mt{constructor(e){super(e),this._animation=null,this._destinationViewState=new I$,this.updateFunction=null,this.easing=Xc.ease,this.viewpoint=new Hl({targetGeometry:new it,scale:0,rotation:0}),this._updateTask=Ag({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new PRt(e.view)}destroy(){this._updateTask=mn(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,r){this.stop();const n=this.viewpoint;To(n,t);const i=(typeof r?.easing=="string"?rRt(r.easing):r?.easing)||this.easing,s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(t.scale,s.scale)*LRt,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??E1e.maxDuration,speedFactor:r?.speedFactor,easing:typeof i=="function"?a=>i(a):void 0}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,DRt(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const r=new cj({target:e.clone()}),n=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==cj.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,n=this._transition.duration,i=n>0?r/n:1,s=i>=1;this._transition.applyRatio(this.viewpoint,i),s&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function DRt(e,t,r,n){if(t?.duration!=null)return!0;const{time:i,isLinear:s}=e,o=t?.speedFactor||1,a=t?.maxDuration??E1e.maxDuration/o;if(xe("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",i),console.log("adjusted max duration:	",a),console.log("is linear:",s)),i>a)return xe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){const l=Pn(),u=Yi(...n.toScreen(l,...r.center)),c=Yi(...r.toScreen(l,...n.center)),h=c!=null&&c.x>-(1.5-.5)*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-(1.5-.5)*r.size[1]&&c.y<(1.5+.5)*r.size[1],d=u!=null&&u.x>-(1.5-.5)*n.size[0]&&u.x<(1.5+.5)*n.size[0]&&u.y>-(1.5-.5)*n.size[1]&&u.y<(1.5+.5)*n.size[1];if(xe("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,h),console.log(`start is within ${1.5} screens at dest view:`,d)),i>JK/o&&!h&&!d)return xe("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${JK/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}p([f()],Uv.prototype,"easing",void 0),p([f()],Uv.prototype,"view",void 0),p([f()],Uv.prototype,"viewpoint",void 0),Uv=p([W("esri.views.2d.AnimationManager")],Uv);const FRt=Uv;var uo;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(uo||(uo={}));const I1e=Symbol("Yield");let jRt=class{constructor(){this._tasks=new Array,this._runningTasks=xw(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return I1e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,r){return++this._runningTasks.value,new Promise((n,i)=>this._tasks.push(new YK(n,i,e,t,r))).finally(()=>--this._runningTasks.value)}unshift(e,t,r){return++this._runningTasks.value,new Promise((n,i)=>this._tasks.unshift(new YK(n,i,e,t,r))).finally(()=>--this._runningTasks.value)}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const r=Ba(t.signal);if(r&&!t.abortCallback)t.reject(Xr());else{const n=r?t.abortCallback?.(Xr()):t.callback(e);bc(n)?n.then(t.resolve,t.reject):t.resolve(n)}}catch(r){t.reject(r)}return!0}cancelAll(){const e=Xr();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0}},YK=class{constructor(e,t,r,n=void 0,i=void 0){this.resolve=e,this.reject=t,this.callback=r,this.signal=n,this.abortCallback=i}},Xx=class extends mt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};p([f()],Xx.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),p([f()],Xx.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Xx=p([W("esri.views.support.debugFlags")],Xx);const URt=new Xx;function BRt(){return new gC.Scheduler}var ir;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(ir||(ir={}));const Pl=0,XK=new Map([[ir.RESOURCE_CONTROLLER_IMMEDIATE,Pl],[ir.RESOURCE_CONTROLLER,4],[ir.SLIDE,Pl],[ir.STREAM_DATA_LOADER,Pl],[ir.ELEVATION_QUERY,Pl],[ir.TERRAIN_SURFACE,1],[ir.SURFACE_GEOMETRY_UPDATES,1],[ir.LOD_RENDERER,2],[ir.GRAPHICS_CORE,2],[ir.I3S_CONTROLLER,2],[ir.POINT_CLOUD_LAYER,2],[ir.FEATURE_TILE_FETCHER,2],[ir.CLOUDS_GENERATOR,2],[ir.OVERLAY,4],[ir.STAGE,4],[ir.GRAPHICS_DECONFLICTOR,4],[ir.FILTER_VISIBILITY,4],[ir.SCALE_VISIBILITY,4],[ir.FRUSTUM_VISIBILITY,4],[ir.POINT_OF_INTEREST_FREQUENT,6],[ir.POINT_OF_INTEREST_INFREQUENT,30],[ir.LABELER,8],[ir.FEATURE_QUERY_ENGINE,8],[ir.FEATURE_TILE_TREE,16],[ir.FEATURE_TILE_TREE_ACTIVE,Pl],[ir.ELEVATION_ALIGNMENT,12],[ir.ELEVATION_ALIGNMENT_SCENE,14],[ir.TEXT_TEXTURE_ATLAS,12],[ir.TEXTURE_UNLOAD,12],[ir.LINE_OF_SIGHT_TOOL,16],[ir.LINE_OF_SIGHT_TOOL_INTERACTIVE,Pl],[ir.SNAPPING,Pl],[ir.SHADOW_ACCUMULATOR,30],[ir.MAPVIEW_FETCH_QUEUE,Pl],[ir.MAPVIEW_LAYERVIEW_UPDATE,2],[ir.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Pl]]);function QK(e){return XK.has(e)?XK.get(e):typeof e=="number"?e:1}const VRt=6.5,KK=1,GRt=30,zRt=1e3/30,$Rt=100,eee=.9;var gC,x0;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(s=>s.needsUpdate)}constructor(){this._updating=xw(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new mS("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=uo.INTERACTING,this._tasks=new rd,this._runQueue=new rd,this._load=0,this._idleStateCallbacks=new rd,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=Et(()=>URt.SCHEDULER_LOG_SLOW_TASKS,s=>this._debug=s,vs);for(const s of Object.keys(ir))this.performanceInfo.tasks.set(ir[s],new mS(ir[s]))}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),mn(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=new r(this,s,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new mS(s)),a}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===uo.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===uo.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==uo.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=VRt,a=s.frameDuration,l=KK;switch(this.state){case uo.IDLE:o=0,a=Math.max($Rt,s.frameDuration),l=GRt;break;case uo.INTERACTING:a=Math.max(zRt,s.frameDuration);case uo.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==uo.IDLE&&a<KK&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case uo.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case uo.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return x0.SCHEDULED;let o=x0.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=x0.READY:o!==x0.READY&&(o=x0.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*eee+s*(1-eee)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===Pl&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Pl&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===I1e&&(a.blockFrame=this._frameNumber)}catch(u){Pe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,ir.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(ir))this._frameTaskTimes.set(ir[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(s)}get test(){return this._test}}e.Scheduler=t;class r{get task(){return this._task.value}get updating(){return this._queue.running}constructor(s,o,a){this._scheduler=s,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new jRt,this._handles=new e1,this._basePriority=QK(o),this.schedulePriority=this._basePriority,this._task=xw(a??this._queue),this._handles.add(mc(()=>this.task.running,l=>s.taskRunningChanged(l)))}remove(){this.processQueue(A$),this._scheduler.removeTask(this),this.schedule=mj.schedule,this.reschedule=mj.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){if(this.name===s)return;this.name=s;const o=QK(s);this._basePriority!==Pl&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){return this._queue.runTask(s)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=uo.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=n})(gC||(gC={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(x0||(x0={}));const A$=(()=>{const e=new gC.Budget;return e.enabled=!1,e})();let qRt=class{remove(){}processQueue(){}schedule(e,t,r){try{if(Ba(t)){const n=Xr();return r?Promise.resolve(r(n)):Promise.reject(n)}return OD(e(A$))}catch(n){return Promise.reject(n)}}reschedule(e,t,r){return this.schedule(e,t,r)}};const mj=new qRt;let HRt=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=BRt(),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||bc(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=t=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:n,labelManager:i,state:{id:s}}=this.view;r.forEach(this._updateLayerView,this),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),n!=null&&(n.lastUpdateId!==s&&(n.viewChange(),n.lastUpdateId=s),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=uo.ANIMATING:this.view.interacting?this._scheduler.state=uo.INTERACTING:this._scheduler.state=uo.IDLE,this._scheduler.updateBudget(t)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new I$,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=Et(()=>e.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=Ag(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}},k4=class extends mt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,t){if(!e)return void Pe.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new cj;this.view.animation=r,await CR(()=>this.view.ready,t);const n={...t,animate:t?.animate??!o$(),animationMode:t?.animationMode??"auto"},{extent:i,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:u,allLayerViews:c}=this.view,h=dkt(e,{extent:i,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:u,allLayerViews:c,pickClosestTarget:t?.pickClosestTarget??!0});return r?.update(h),this._gotoTask={},n.animate?this._gotoAnimated(h,n):this._gotoImmediate(h,n)}_gotoImmediate(e,t){const r=this._gotoTask,n=this.view.animation,i=e.then(s=>{if(Gr(t),r!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=n.target=s,n.finish()});return this._cancellableGoTo(r,n,i,t)}_gotoAnimated(e,t){const r=this._gotoTask,n=this.view.animation;if(!n)return Promise.resolve();const i=e.then(s=>{if(Gr(t),r!==this._gotoTask)throw new ie("view:goto-interrupted","Goto was interrupted");return n.update(s),this.view.animationManager.animate(n,this.view.viewpoint,t),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,n,i,t)}_cancellableGoTo(e,t,r,n){const i=()=>e===this._gotoTask;return Ll(r,n).finally(()=>{i()&&(t.done||t.stop())})}};p([f({constructOnly:!0})],k4.prototype,"view",void 0),k4=p([W("esri.views.2d.GoToManager")],k4);function un(){return Promise.all([Me(()=>import("./webglDeps-Dw9YmB8n-D327Cymv.js"),__vite__mapDeps([166,74,73,127,167,129,1,2]),import.meta.url),Me(()=>import("./mapViewDeps-Z1Pn0MJe-C2o-zjHA.js"),__vite__mapDeps([168,1,2,75,76,77,78,72,73,74,50,79,44,169,129,84,170,167,92,171,116,115,83,172,107,81,82,114,166,127,173,87,174,71,13,34,175,125,123,109,126,176,177,85,80,178,179,180,181,182,183,122,184]),import.meta.url)])}const p2=()=>un().then(()=>Me(()=>import("./TileLayerView2D-Bpx_TyJu-BkCc60d1.js"),__vite__mapDeps([185,107,75,76,77,78,72,73,74,50,79,44,171,170,129,167,92,116,115,83,114,173,87,174,71,13,34,1,2,169,84,81,82,125,123,109,178,179,186,187,183,188,163,189,181,182,190,191,15,16,17,18,192,193]),import.meta.url)),S0=()=>un().then(()=>Me(()=>import("./FeatureLayerView2D-BuwByqi6-Mm6-4Jhk.js"),__vite__mapDeps([194,171,195,188,163,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,87,172,107,196,193,190,1,2]),import.meta.url).then(e=>e.F)),tee={"base-dynamic":()=>un().then(()=>Me(()=>import("./BaseDynamicLayerView2D-STJ2_8Ou-Bcf7RNrQ.js"),__vite__mapDeps([197,198,170,72,73,74,50,129,167,92,171,116,115,83,188,163,199,187,190,1,2]),import.meta.url)),"base-tile":p2,"bing-maps":p2,catalog:()=>un().then(()=>Me(()=>import("./CatalogLayerView2D-XzvEyTyi-qN9I8z1F.js"),__vite__mapDeps([200,188,171,163,1,2]),import.meta.url)),"catalog-dynamic-group":()=>un().then(()=>Me(()=>import("./CatalogDynamicGroupLayerView2D-C3GrQqN8-lvGAd_nm.js"),__vite__mapDeps([201,188,171,163,1,2]),import.meta.url)),"catalog-footprint":()=>un().then(()=>Me(()=>import("./CatalogFootprintLayerView2D-DV1Pbenx-DCVEaqeE.js"),__vite__mapDeps([202,194,171,195,188,163,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,87,172,107,196,193,190,1,2]),import.meta.url)),csv:S0,"geo-rss":()=>un().then(()=>Me(()=>import("./GeoRSSLayerView2D-DN1NyDgA-GuCOtukP.js"),__vite__mapDeps([203,188,171,163,180,181,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,178,71,13,34,1,2,179]),import.meta.url)),feature:S0,geojson:S0,parquet:S0,graphics:()=>un().then(()=>Me(()=>import("./GraphicsLayerView2D-DB_o6F5P-CU56GF4h.js"),__vite__mapDeps([204,188,171,163,180,181,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,178,71,13,34,1,2,179,196]),import.meta.url)),group:()=>un().then(()=>Me(()=>import("./GroupLayerView2D-BFNo2cZi-DIwLe7q8.js"),__vite__mapDeps([205,188,171,163,1,2]),import.meta.url)),imagery:()=>un().then(()=>Me(()=>import("./ImageryLayerView2D-BZ8xlRHu-Cn0lOImW.js"),__vite__mapDeps([206,207,74,129,50,170,72,73,167,92,171,116,115,83,188,163,178,75,76,77,78,79,44,71,13,34,1,2,169,84,179,189,181,182,183,198,187,199,99,195,193,190]),import.meta.url)),"imagery-tile":()=>un().then(()=>Me(()=>import("./ImageryTileLayerView2D-D_thjFMp-CGA5BwqE.js"),__vite__mapDeps([208,207,74,129,50,170,72,73,167,92,171,116,115,83,188,163,209,183,210,99,1,2,195,193,190]),import.meta.url)),kml:()=>un().then(()=>Me(()=>import("./KMLLayerView2D-BYmL22tu-BVux4hOL.js"),__vite__mapDeps([211,212,187,171,198,170,72,73,74,50,129,167,92,116,115,83,188,163,180,181,182,75,76,77,78,79,44,183,169,84,178,71,13,34,1,2,179,99,175,166,127,125,123,109,174,107,126,209]),import.meta.url)),"knowledge-graph":()=>un().then(()=>Me(()=>import("./KnowledgeGraphLayerView2D-PmMnbqbF-BYgRUjLK.js"),__vite__mapDeps([213,188,171,163,1,2]),import.meta.url)),"link-chart":()=>un().then(()=>Me(()=>import("./KnowledgeGraphLayerView2D-PmMnbqbF-BYgRUjLK.js"),__vite__mapDeps([213,188,171,163,1,2]),import.meta.url)),"knowledge-graph-sublayer":S0,"map-image":()=>un().then(()=>Me(()=>import("./MapImageLayerView2D-DdbbjR7X-5Xja-bSL.js"),__vite__mapDeps([214,198,170,72,73,74,50,129,167,92,171,116,115,83,188,163,178,75,76,77,78,79,44,71,13,34,1,2,169,84,179,189,181,182,183,199,187,195,190,191,15,16,17,18,192,193]),import.meta.url)),"map-notes":()=>un().then(()=>Me(()=>import("./MapNotesLayerView2D-CXBTQ81l-D8zKoefw.js"),__vite__mapDeps([215,188,171,163,180,181,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,178,71,13,34,1,2,179]),import.meta.url)),media:()=>un().then(()=>Me(()=>import("./MediaLayerView2D-s3jmdbCI-dW_V5VM0.js"),__vite__mapDeps([216,1,2,217,179,54,107,75,76,77,78,72,73,74,50,79,44,171,170,129,167,92,116,115,83,114,173,87,174,71,13,34,169,84,81,82,125,123,109,178,177,85,218,188,163]),import.meta.url)),"ogc-feature":()=>un().then(()=>Me(()=>import("./OGCFeatureLayerView2D-BwXpgdwd-BqtUTIGu.js"),__vite__mapDeps([219,194,171,195,188,163,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,87,172,107,196,193,190,1,2]),import.meta.url)),"open-street-map":p2,"oriented-imagery":S0,route:()=>un().then(()=>Me(()=>import("./RouteLayerView2D-BsyIGh1D-Dg5Re9tN.js"),__vite__mapDeps([220,221,188,171,163,180,181,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,178,71,13,34,1,2,179]),import.meta.url)),stream:()=>un().then(()=>Me(()=>import("./StreamLayerView2D-C1yEz9lA-lZeUZyQK.js"),__vite__mapDeps([222,194,171,195,188,163,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,87,172,107,196,193,190,1,2]),import.meta.url)),"subtype-group":()=>un().then(()=>Me(()=>import("./SubtypeGroupLayerView2D-Ds6xFnOx-DbucFQTI.js"),__vite__mapDeps([223,194,171,195,188,163,182,75,76,77,78,72,73,74,50,79,44,183,170,129,167,92,116,115,83,169,84,87,172,107,196,193,190,1,2]),import.meta.url)),tile:p2,"vector-tile":()=>un().then(()=>Me(()=>import("./VectorTileLayerView2D-DtS79O1b-B3XRQdK8.js"),__vite__mapDeps([224,114,78,176,107,84,77,74,129,115,170,72,73,50,167,92,171,116,83,183,33,117,118,188,163,190,1,2]),import.meta.url)),video:()=>un().then(()=>Me(()=>import("./VideoLayerView2D-DOWtjEH4-DCdfDshy.js"),__vite__mapDeps([225,226,218,92,170,72,73,74,50,129,167,171,116,115,83,169,75,76,77,78,79,44,84,188,163,180,181,182,183,178,71,13,34,1,2,179]),import.meta.url)),wcs:()=>un().then(()=>Me(()=>import("./ImageryTileLayerView2D-D_thjFMp-CGA5BwqE.js"),__vite__mapDeps([208,207,74,129,50,170,72,73,167,92,171,116,115,83,188,163,209,183,210,99,1,2,195,193,190]),import.meta.url)),"web-tile":p2,wfs:S0,wms:()=>un().then(()=>Me(()=>import("./WMSLayerView2D-DPEhttA5-CFlp5C1F.js"),__vite__mapDeps([227,198,170,72,73,74,50,129,167,92,171,116,115,83,188,163,199,187,190,195,1,2]),import.meta.url)),wmts:()=>un().then(()=>Me(()=>import("./WMTSLayerView2D-B2NrsaCP-DtAj6HsK.js"),__vite__mapDeps([228,186,187,171,170,72,73,74,50,129,167,92,116,115,83,183,188,163,190,1,2]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function WRt(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ie(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const ree={hasLayerViewModule:e=>tee[e.type]!=null,importLayerView:e=>{const t=tee[e.type];if(t==null)throw WRt(e);return t(e)}};function ZRt(e,t){const{spatialReference:r}=t,n=[t.x,t.y];let i=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let c=0;c<u.length-1;c++){mpt(a,n,u,c);const h=E3(n,a);h<i&&(i=h,s=a[0],o=a[1])}return{coordinate:new it({x:s,y:o,spatialReference:r}),distance:i}}var yj;let jy=yj=class extends SR(mt){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Dd(this.geometry,this.spatialReference)}catch(e){return Pe.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?h_(this.normalizedGeometry,r):lV(this.normalizedGeometry,r))return e;const{coordinate:n}=ZRt(this.normalizedGeometry,r);return n&&(e.targetGeometry=n),e}clone(){return new yj({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};p([f({constructOnly:!0})],jy.prototype,"geometry",void 0),p([f({readOnly:!0})],jy.prototype,"normalizedGeometry",null),p([f({constructOnly:!0})],jy.prototype,"spatialReference",void 0),jy=yj=p([W("esri.views.2d.constraints.GeometryConstraint")],jy);var gj;let Qx=gj=class extends SR(mt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new gj({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};p([f()],Qx.prototype,"enabled",void 0),p([f()],Qx.prototype,"rotationEnabled",void 0),Qx=gj=p([W("esri.views.2d.constraints.RotationConstraint")],Qx);const A1e=Qx;var vj;let ma=vj=class extends SR(mt){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:n,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(r!==0&&n!==0&&r<n&&([r,n]=[n,r]),!t?.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",n);t=t.map(c=>c.clone()),t.sort((c,h)=>h.scale-c.scale),t.forEach((c,h)=>c.level=h);for(const c of t)!l&&r>0&&r>=c.scale&&(o=c.level,l=!0),!u&&n>0&&n>=c.scale&&(a=e?e.level:-1,u=!0),e=c;i===-1&&(i=r===0?0:o),s===-1&&(s=n===0?t.length-1:a),i=Math.max(i,0),i=Math.min(i,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),i>s&&([i,s]=[s,i]),r=t[i].scale,n=t[s].scale,t.splice(0,i),t.splice(s-i+1,t.length),t.forEach((c,h)=>{this._lodByScale[c.scale]=c,this._scales[h]=c.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",n)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,n=this.effectiveMaxScale,i=e.targetGeometry,s=t&&t.targetGeometry,o=n!==0&&e.scale<n,a=r!==0&&e.scale>r;if(o||a){const l=a?r:n;if(t&&s){const u=(l-t.scale)/(e.scale-t.scale);i.x=s.x+(i.x-s.x)*u,i.y=s.y+(i.y-s.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),n=Math.ceil(e);return t[r]+(e-r)*(t[n]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,n;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(r=t[i],n=t[i+1],n===e)return i+this.effectiveMinZoom+1;if(r>e&&n<e)return i+this.effectiveMinZoom+1-(e-n)/(r-n)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new vj({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};p([f({readOnly:!0})],ma.prototype,"effectiveLODs",void 0),p([f({readOnly:!0})],ma.prototype,"effectiveMinZoom",void 0),p([f({readOnly:!0})],ma.prototype,"effectiveMaxZoom",void 0),p([f({readOnly:!0})],ma.prototype,"effectiveMinScale",void 0),p([f({readOnly:!0})],ma.prototype,"effectiveMaxScale",void 0),p([f()],ma.prototype,"lods",void 0),p([f()],ma.prototype,"minZoom",void 0),p([f()],ma.prototype,"maxZoom",void 0),p([f()],ma.prototype,"minScale",void 0),p([f()],ma.prototype,"maxScale",void 0),p([f()],ma.prototype,"snapToZoom",void 0),ma=vj=p([W("esri.views.2d.constraints.ZoomConstraint")],ma);const M1e=ma,JRt={base:null,key:"type",typeMap:{extent:jt,polygon:ts}};let ni=class extends mt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new st}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new jy({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new A1e({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,n=this.maxZoom,i=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===r&&e.maxZoom===n&&e.minScale===i&&e.maxScale===s&&e.snapToZoom===o?e:new M1e({lods:t,minZoom:r,maxZoom:n,minScale:i,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(r=>r.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};p([f({readOnly:!0})],ni.prototype,"effectiveLODs",null),p([f({readOnly:!0})],ni.prototype,"effectiveMinScale",null),p([f({readOnly:!0})],ni.prototype,"effectiveMaxScale",null),p([f({readOnly:!0})],ni.prototype,"effectiveMinZoom",null),p([f({readOnly:!0})],ni.prototype,"effectiveMaxZoom",null),p([f({types:JRt,value:null})],ni.prototype,"geometry",null),p([f({type:[Vt]})],ni.prototype,"lods",void 0),p([f()],ni.prototype,"minScale",void 0),p([f()],ni.prototype,"maxScale",void 0),p([f()],ni.prototype,"minZoom",void 0),p([f()],ni.prototype,"maxZoom",void 0),p([f()],ni.prototype,"rotationEnabled",void 0),p([f()],ni.prototype,"snapToZoom",void 0),p([f({type:st})],ni.prototype,"customConstraints",void 0),p([f()],ni.prototype,"view",void 0),p([f({readOnly:!0})],ni.prototype,"version",null),p([f({type:jy,readOnly:!0})],ni.prototype,"_geometry",null),p([f({type:A1e})],ni.prototype,"_rotation",null),p([f({readOnly:!0,type:M1e})],ni.prototype,"_zoom",null),ni=p([W("esri.views.2d.MapViewConstraints")],ni);const C1e=ni;let wd=class Sy{static getId(t,r,n,i){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${n}/${i}`}constructor(t,r,n,i){this.set(t,r,n,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,n=63&this.level;return(3&this.world)<<30|r<<22|t<<8|n}acquire(t,r,n,i){this.set(t,r,n,i)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Sy(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,n,i){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+n,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Sy(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,r,n){const i=this.clone();return i.col+=t,i.row+=r,n.normalizeKey(i),i}getChildKeys(){const t=this.level+1,r=this.row<<1,n=this.col<<1,i=this.world;return[new Sy(t,r,n,i),new Sy(t,r,n+1,i),new Sy(t,r+1,n,i),new Sy(t,r+1,n+1,i)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};wd.pool=new Td(wd,null,null,25,50);function B1(e,t){return[e,t]}function E0(e,t,r){return e[0]=t,e[1]=r,e}function YRt(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}const yu=new wd("0/0/0/0");let XRt=class k1e{static create(t,r,n=null){const i=Bs(t.spatialReference),s=r.origin||B1(t.origin.x,t.origin.y),o=B1(t.size[0]*r.resolution,t.size[1]*r.resolution),a=B1(-1/0,-1/0),l=B1(1/0,1/0),u=B1(1/0,1/0);n!=null&&(E0(a,Math.max(0,Math.floor((n.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymax)/o[1]))),E0(l,Math.max(0,Math.floor((n.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymin)/o[1]))),E0(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:c,rows:h}=r;let d,m,y,g;return!n&&c&&h&&(E0(a,c[0],h[0]),E0(l,c[1],h[1]),E0(u,c[1]-c[0]+1,h[1]-h[0]+1)),t.isWrappable?(d=B1(Math.ceil(Math.round((i.valid[1]-i.valid[0])/r.resolution)/t.size[0]),u[1]),m=!0,y=i.origin,g=i.valid):(d=u,m=!1),new k1e(r.level,r.resolution,r.scale,s,a,l,u,o,d,m,y,g)}constructor(t,r,n,i,s,o,a,l,u,c,h,d){this.level=t,this.resolution=r,this.scale=n,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=u,this.wrap=c,this._spatialReferenceOrigin=h,this._spatialReferenceValid=d}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}normalizeKey(t){if(!this.wrap)return;const r=this.worldSize[0],n=t.col;n<0?(t.col=n+r,t.world-=1):n>=r&&(t.col=n-r,t.world+=1)}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const r=this.origin[0]+t*this.norm[0],n=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&n&&i?r===n[0]?i[0]:this.origin[0]===n[0]&&t===this.worldSize[0]?i[1]:r:r}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,n=!1){yu.set(r);const i=n?yu.col:this.denormalizeCol(yu.col,yu.world),s=yu.row;return YRt(t,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),t}getTileCoords(t,r,n=!1){yu.set(r);const i=n?yu.col:this.denormalizeCol(yu.col,yu.world);return Array.isArray(t)?E0(t,this.getXForColumn(i),this.getYForRow(yu.row)):(t.x=this.getXForColumn(i),t.y=this.getYForRow(yu.row)),t}},Iw=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:t,colFrom:r,colTo:n}of this.spans)for(let i=r;i<=n;i++){const s=e.getWorldForColumn(i);yield new wd(e.level,t,e.normalizeCol(i),s)}}forEach(e,t){const{spans:r,lodInfo:n}=this,{level:i}=n;if(r.length!==0)for(const{row:s,colFrom:o,colTo:a}of r)for(let l=o;l<=a;l++)e.call(t,i,s,n.normalizeCol(l),n.getWorldForColumn(l))}};Iw.pool=new Td(Iw);let TP=class{constructor(e,t,r){this.row=e,this.colFrom=t,this.colTo=r}};const bn=new wd("0/0/0/0");let QRt=class R1e{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[n,i]=t,[s,o]=r,a=s-n,l=o-i,u=l!==0?a/l:0,c=(Math.ceil(i)-i)*u,h=(Math.floor(i)-i)*u;return new R1e(n,Math.floor(i),Math.ceil(o),u,a<0?c:h,a<0?h:c,a<0?s:n,a<0?n:s)}constructor(t,r,n,i,s,o,a,l){this.x=t,this.ymin=r,this.ymax=n,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const $a=[[0,0],[0,0],[0,0],[0,0]],KRt=1e-6;let O1e=class{constructor(e,t=null,r=e.lods[0].level,n=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=t,this.scales=[],this._infoByScale={},this._infoByLevel={};const i=e.lods.filter(o=>o.level>=r&&o.level<=n);this.minScale=i[0].scale,this.maxScale=i[i.length-1].scale;const s=this._lodInfos=i.map(o=>XRt.create(e,o,t));i.forEach((o,a)=>{this._infoByLevel[o.level]=s[a],this._infoByScale[o.scale]=s[a],this.scales[a]=o.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,t,r=!1){bn.set(t);const n=this._infoByLevel[bn.level];return n?n.getTileBounds(e,bn,r):e}getTileCoords(e,t,r=!1){bn.set(t);const n=this._infoByLevel[bn.level];return n?n.getTileCoords(e,bn,r):e}getTileCoverage(e,t=192,r=!0,n="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const i=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=Iw.pool.acquire(i),o=this._wrap;let a,l,u,c=1/0,h=-1/0;const d=s.spans;$a[0][0]=$a[0][1]=$a[1][1]=$a[3][0]=-t,$a[1][0]=$a[2][0]=e.size[0]+t,$a[2][1]=$a[3][1]=e.size[1]+t;for(const b of $a)e.toMap(b,b),b[0]=i.getColumnForX(b[0]),b[1]=i.getRowForY(b[1]);const m=[];let y=3;for(let b=0;b<4;b++){if($a[b][1]===$a[y][1]){y=b;continue}const S=QRt.create($a[b],$a[y]);c=Math.min(S.ymin,c),h=Math.max(S.ymax,h),m[S.ymin]===void 0&&(m[S.ymin]=[]),m[S.ymin].push(S),y=b}if(c==null||h==null||h-c>100)return null;let g=[];for(a=c;a<h;){m[a]!=null&&(g=g.concat(m[a])),l=1/0,u=-1/0;for(let b=g.length-1;b>=0;b--){const S=g[b];l=Math.min(l,S.getLeftCol()),u=Math.max(u,S.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=i.first[1]&&a<=i.last[1])if(o)if(i.size[0]<i.worldSize[0]){const b=Math.floor(u/i.worldSize[0]);for(let S=Math.floor(l/i.worldSize[0]);S<=b;S++)d.push(new TP(a,Math.max(i.getFirstColumnForWorld(S),l),Math.min(i.getLastColumnForWorld(S),u)))}else d.push(new TP(a,l,u));else l>i.last[0]||u<i.first[0]||(l=Math.max(l,i.first[0]),u=Math.min(u,i.last[0]),d.push(new TP(a,l,u)));a+=1;for(let b=g.length-1;b>=0;b--){const S=g[b];S.ymax>=a?S.incrRow():g.splice(b,1)}}return s}getTileParentId(e){bn.set(e);const t=this._infoByLevel[bn.level],r=this._lodInfos.indexOf(t)-1;return r<0?null:(this._getTileIdAtLOD(bn,this._lodInfos[r],bn),bn.id)}getTileResolution(e){const t=this._infoByLevel[typeof e=="object"?e.level:e];return t?t.resolution:-1}getTileScale(e){const t=this._infoByLevel[e.level];return t?t.scale:-1}intersects(e,t){bn.set(t);const r=this._infoByLevel[bn.level],n=e.lodInfo;if(n.resolution>r.resolution){this._getTileIdAtLOD(bn,n,bn);const s=n.denormalizeCol(bn.col,bn.world);for(const o of e.spans)if(o.row===bn.row&&o.colFrom<=s&&o.colTo>=s)return!0}if(n.resolution<r.resolution){const[s,o,a,l]=e.spans.reduce((y,g)=>(y[0]=Math.min(y[0],g.row),y[1]=Math.max(y[1],g.row),y[2]=Math.min(y[2],g.colFrom),y[3]=Math.max(y[3],g.colTo),y),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(bn.col,bn.world),c=n.getColumnForX(r.getXForColumn(u)),h=n.getRowForY(r.getYForRow(bn.row)),d=n.getColumnForX(r.getXForColumn(u+1))-1,m=n.getRowForY(r.getYForRow(bn.row+1))-1;return!(c>l||d<a||h>o||m<s)}const i=n.denormalizeCol(bn.col,bn.world);return e.spans.some(s=>s.row===bn.row&&s.colFrom<=i&&s.colTo>=i)}normalizeBounds(e,t,r){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){const n=Bs(this.tileInfo.spatialReference),i=-r*(n.valid[1]-n.valid[0]);e[0]+=i,e[2]+=i}return e}getSmallestInfoForScale(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>t[0])return this._infoByScale[t[0]];for(let r=1;r<t.length-1;r++)if(e>t[r]+KRt)return this._infoByScale[t[r-1]];return this._infoByScale[t[t.length-1]]}getClosestInfoForScale(e){const t=this.scales;return this._infoByScale[e]||(e=t.reduce((r,n)=>Math.abs(n-e)<Math.abs(r-e)?n:r,t[0])),this._infoByScale[e]}scaleToLevel(e){const t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=t.length-1;r>=0;r--)if(e<t[r])return r===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[r]].level+(t[r]-e)/(t[r]-t[r+1]);return this._infoByScale[t[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,t,r){const n=this._infoByLevel[r.level];return e.set(r),t.resolution<n.resolution?null:(t.resolution===n.resolution||(e.level=t.level,e.col=Math.floor(r.col*n.resolution/t.resolution+.01),e.row=Math.floor(r.row*n.resolution/t.resolution+.01)),e)}},eOt=class{constructor(e,t){this.item=e,this.controller=t,this.promise=null}},N1e=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new GS,this._controllers=new GS,this._processingItems=new GS,this._pausedSignal=xw(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Y5(e.peeker),this.process=e.process;const t=e.scheduler;e.priority&&t&&(this._task=t.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=mn(this._schedule),this._task=mn(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(t=>e.push(t)),this._controllers.clear(),e.forEach(t=>t.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((t,r)=>e(r))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,t){const r=this.get(e);if(r)return r;const n=new AbortController;let i=null;t&&(i=Oa(t,()=>n.abort()));const s=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),o(),l.reject(Xr())},o=()=>{a.remove(),i?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},a=Hk(n.signal,s),l=Ko();return this._deferreds.set(e,l),this._controllers.set(e,n),l.promise.then(o,o),this._queue.push(e),this._scheduleNext(),l.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Xr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=i_(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let t;const r=new AbortController,n=new eOt(e,r);this._processingItems.set(e,n);try{t=this.process(e,r.signal)}catch(i){this._processError(n,i)}bc(t)?(n.promise=t,t.then(i=>this._processResult(n,i),i=>this._processError(n,i))):this._processResult(n,t)}get test(){}};const nee=[0,0];let Sp=class extends mt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:t,scheduler:r,priority:n}=this;this._queue=new N1e({concurrency:e,scheduler:r,priority:n,process:(i,s)=>{const o=this._keyToItem.get(i);return t(o,{signal:s})},peeker:i=>this._peek(i)})}destroy(){this.clear(),this._queue=pn(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),n=this.tileInfoView.getTileScale(e.key),i=s_(this._tilesByScale,n,()=>new Set),s=()=>{i.delete(e.key),i.size===0&&this._tilesByScale.delete(n),this._keyToItem.delete(t)};return i.add(e.key),this._keyToItem.set(t,e),r.then(s,s),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const t=new Set;for(const s of e)t.add(this._keyToItem.get(s).key);const r=this.state.scale;let n,i=Number.POSITIVE_INFINITY;for(const[s,o]of this._tilesByScale)if(Qse(o,a=>t.has(a))){const a=Math.abs(s-r);a<i&&(n=o,i=a)}return this._getClosestTileKey(n,e).id}_getClosestTileKey(e,t){const r=this.tileInfoView,n=this.state.center;let i,s=Number.POSITIVE_INFINITY;for(const o of e)if(t.has(o.id)){r.getTileCoords(nee,o);const a=E3(nee,n);a<s&&(s=a,i=o)}return i}};p([f({constructOnly:!0})],Sp.prototype,"concurrency",void 0),p([f({constructOnly:!0})],Sp.prototype,"priority",void 0),p([f({constructOnly:!0})],Sp.prototype,"process",void 0),p([f({constructOnly:!0})],Sp.prototype,"scheduler",void 0),p([f()],Sp.prototype,"state",void 0),p([f({constructOnly:!0})],Sp.prototype,"tileInfoView",void 0),Sp=p([W("esri.views.2d.tiling.TileQueue")],Sp);const tOt=Sp;let rOt=class{constructor(e,t,r){this.maxSize=e,this._tileInfoView=t,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const t=this._tilePerId.get(e);if(!t)return;const r=t.key.level,n=this._tileKeysPerLevel[r];iee(this._tilePerId,e);for(let i=0;i<n.length;i++)if(n[i].id===e){n.splice(i,1);break}return t.visible=!0,t}add(e){e.visible=!1;const t=e.key,r=t.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const n=t.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(t)}prune(e,t,r){let n=this._tilePerId.size;if(n<=this.maxSize)return;let i=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&i>=0;)i!==e&&(n=this._pruneAroundCenterTile(n,t,r,i)),i--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,t,r,e))}_pruneAroundCenterTile(e,t,r,n){const i=this._tileKeysPerLevel[n];if(!i||i.length===0)return e;const{size:s,origin:o}=this._tileInfoView.tileInfo,a=r*s[0],l=r*s[1],u=[0,0],c=[0,0];for(i.sort((h,d)=>(u[0]=o.x+a*(h.col+.5),u[1]=o.y-l*(h.row+.5),c[0]=o.x+a*(d.col+.5),c[1]=o.y-l*(d.row+.5),GE(u,t)-GE(c,t)));i.length>0;){const h=i.pop();if(this._removeTile(h.id),--e===this.maxSize)break}return e}_removeTile(e){const t=this._tilePerId.get(e);this._removedFunc&&t&&this._removedFunc(t),iee(this._tilePerId,e)}};function iee(e,t){e.delete(t)}const T0=new wd(0,0,0,0),Hh=new Map,d2=[],IP=[];let nOt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new rOt(e.cacheSize,this.tileInfoView,t=>{this.releaseTile(t)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:t,tileIndex:r}=this,{scale:n,center:i,resolution:s}=e.state,{minScale:o,maxScale:a}=this.tileInfoView,l=!e.stationary&&n>this._previousScale;if(this._previousScale=n,!t&&(n>o||n<a))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:c,lodInfo:h}=u,{level:d}=h;this.tiles.length=0,r.forEach(b=>b.visible=!0);let m=0,y=0;if(c.length>0)for(const{row:b,colFrom:S,colTo:E}of c)for(let x=S;x<=E;x++){m++;const w=T0.set(d,b,h.normalizeCol(x),h.getWorldForColumn(x)).id;let T=r.get(w);if(T)T.isReady?(Hh.set(w,T),y++):l||this._addParentTile(w,Hh);else{if(this._tileCache?.has(w)){if(T=this._tileCache.pop(w),this.tileIndex.set(w,T),T.isReady){Hh.set(w,T),y++;continue}}else T=this.acquireTile(T0),this.tileIndex.set(w,T);l||this._addParentTile(w,Hh)}}const g=y===m;for(const[b,S]of r){if(Hh.has(b))continue;T0.set(b);const E=this.tileInfoView.intersects(u,T0),x=this.cachePolicy==="purge"?T0.level!==d:T0.level>d;!E||!l&&g?!x&&E||d2.push(S):S.isReady?x&&this.cachePolicy==="purge"&&this._hasReadyAncestor(T0,d)?d2.push(S):IP.push(S):x&&d2.push(S)}for(const b of IP)b.isReady&&Hh.set(b.key.id,b);for(const b of d2)this._tileCache?this._tileCache.add(b):this.releaseTile(b),r.delete(b.key.id);for(const b of Hh.values())this.tiles.push(b);for(const b of r.values())Hh.has(b.key.id)||(b.visible=!1);this._tileCache?.prune(d,i,s),Iw.pool.release(u),IP.length=0,d2.length=0,Hh.clear()}clear(){const{tileIndex:e}=this;for(const t of e.values())this.releaseTile(t);e.clear()}refresh(e){for(const t of this.tileIndex.values())e(t);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,t){let r=e,n=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(n=this.tileIndex.get(r),n?.isReady){t.has(n.key.id)||t.set(n.key.id,n);break}}else if(this._tileCache?.has(r)&&(n=this._tileCache.pop(r),this.tileIndex.set(r,n),n?.isReady)){t.has(n.key.id)||t.set(n.key.id,n);break}}_hasReadyAncestor(e,t){const r=Zo();this.tileInfoView.getTileBounds(r,e,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=t&&n.key.level<e.level){const i=Zo();if(this.tileInfoView.getTileBounds(i,n.key,!0),ole(i,r))return!0}return!1}},oo=class extends mt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([Et(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Di)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new it({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(n){return void Pe.getLogger(this).error(new ie("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:n}))}const r=this.viewpoint;hj(r,r,t),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Pe.getLogger(this).error(new ie("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(n){return void Pe.getLogger(this).error(new ie("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const r=this.viewpoint;mkt(r,r,t,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;Tkt(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const t=this.viewpoint;qK(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,r;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new ie("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new ie("mapview:invalid-viewpoint","geometry not defined"))}catch(i){r=new ie("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:i})}if(r)return void Pe.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const n=new Hl({targetGeometry:new it,scale:0,rotation:0});To(n,t),this.constraints?.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this._set("viewpoint",n)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}const t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);const r=this.viewpoint;qK(r,r,t),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:t,constraints:r}=this,n=this._get("center"),i=this._get("extent"),s=this._get("scale"),o=this._get("rotation"),a=this._get("viewpoint"),l=this._get("zoom"),u=l!=null&&r!=null&&r.zoomToScale(l)||void 0;let c,h,d;const m=a?.rotation,y=a?.targetGeometry;y?.type==="extent"?c=y:y?.type==="point"&&(h=y,d=a?.scale);const g=i??c;return{center:n??h??g?.center,rotation:o??m,scale:(s??u??d??(g&&RO(g,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,r,n){const i=e.targetGeometry;try{this._project(e,r)}catch(s){Pe.getLogger(this).warn(new ea("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:r,error:s})),e.targetGeometry=n||new it({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new I$({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,t],spatialReference:r,rotation:n,scale:i}=this.state.paddedViewState,s=new it({x:e,y:t,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",n),this._set("scale",i),this._set("state",null)}changeSpatialReference(e){const t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const r=t.clone(),[n,i]=t.center;let s=null;try{s=this._project(new it({x:n,y:i,spatialReference:t.spatialReference}),e)}catch(a){rR()||Pe.getLogger(this).warn(new ea("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:e,error:a}))}s||(s=new it({x:0,y:0,spatialReference:e}));const o=hj(new Hl({targetGeometry:new it,scale:0,rotation:0}),t.viewpoint,s);r.viewpoint=o;try{const a=[t.size[0]/2,t.size[1]/2],l=[a[0]+20,a[1]],u=t.toMap([0,0],l),{x:c,y:h}=this._project(new it({x:u[0],y:u[1],spatialReference:t.spatialReference}),e);u[0]=c,u[1]=h,r.toScreen(u,u);const d=e1e(a,u,l),m=Math.hypot(u[0]-a[0],u[1]-a[1])/20;!Number.isFinite(m)||Math.abs(m)>4?(o.rotation=0,o.targetGeometry=new it({x:0,y:0,spatialReference:e})):(o.scale*=m,o.scale>xe("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(d)?d:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(e,t){if(!this.ready)return;const r=this.state;let n=this.state.paddedViewState.viewpoint;const i=this.state.paddedViewState.size.slice();r.size=[e,t],Skt(n,n,i,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints?.constrain(n,void 0)??n,this.state.viewpoint=n}toMap(e){if(!this.ready)return null;const t=[0,0],[r,n]=this.state.toMap(t,[e.x,e.y]),i=this.state.spatialReference;return new it({x:r,y:n,spatialReference:i})}toScreen(e,t){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),n=[r.x,r.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(n,n),this.state.toScreen(n,n),Yi(n[0],n[1])}_project(e,t){const r=e?.targetGeometry||e;if(!t)return e;if(!r)return null;if(t.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||gn(t,r.spatialReference))return e;const n=Dd(r,t);if(!n)throw new ie("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:t});return iOt(e)?(e.targetGeometry=n,e):n}};function iOt(e){return e?.declaredClass==="esri.Viewpoint"}p([f({type:it})],oo.prototype,"center",null),p([f()],oo.prototype,"constraints",void 0),p([f({type:jt})],oo.prototype,"extent",null),p([f({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],oo.prototype,"padding",null),p([f()],oo.prototype,"ready",void 0),p([f()],oo.prototype,"resizeAlign",void 0),p([f({readOnly:!0})],oo.prototype,"resolution",null),p([f({type:Number})],oo.prototype,"rotation",null),p([f({type:Number})],oo.prototype,"scale",null),p([f({readOnly:!0})],oo.prototype,"state",void 0),p([f({type:Hl})],oo.prototype,"viewpoint",null),p([f({readOnly:!0})],oo.prototype,"visibleArea",null),p([f()],oo.prototype,"zoom",null),oo=p([W("esri.views.2d.ViewStateManager")],oo);function M$(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let see=class extends is{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,r=>this._handleDoubleClick(r,t))}_handleDoubleClick(e,t){M$(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},sOt=class extends is{constructor(e,t,r){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",r,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:r}=t;if(r!==this.pointerType)return;e.stopPropagation();const{action:n,delta:i}=t,{view:s}=this,{mapViewNavigation:o}=s;switch(n){case"begin":{const{scale:a}=s;this._startScale=a,this._currentScale=a,this._previousDelta=i,o.begin();break}case"update":{if(this._previousDelta.y===i.y)return;this._previousDelta=i;const a=1.015**i.y,l=this._startScale*a,u=l/this._currentScale;o.setViewpointImmediate(u),this._currentScale=l;break}case"end":{const{constraints:a}=s,{effectiveLODs:l,snapToZoom:u}=a;if(!u||!l)return void o.end();const c=a.snapScale(this._currentScale),h=(i.y>0?Math.max(c,a.snapToPreviousScale(this._startScale)):Math.min(c,a.snapToNextScale(this._startScale)))/this._currentScale;o.zoom(h).then(()=>{o.end()});break}}}},NO=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,r=t.pointers.size;switch(t.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},oOt=class extends is{constructor(e,t,r){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",r,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new NO({start:(t,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(t,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(t,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(t,r)=>t===1&&M$(r.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},aOt=class extends is{constructor(e,t,r){super(!0),this._view=e,this.pointerAction=t;const n=this._view.mapViewNavigation;this._dragEventSeparator=new NO({start:(i,s)=>{n.rotate.begin(this._view,s.data),s.stopPropagation()},update:(i,s)=>{n.rotate.update(this._view,s.data),s.stopPropagation()},end:(i,s)=>{n.rotate.end(),s.stopPropagation()},condition:(i,s)=>i===1&&M$(s.data,this.pointerAction)}),this.registerIncoming("drag",r,i=>this._dragEventSeparator.handle(i))}};function C$(e){const t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function L1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function P1e(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function D1e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function k$(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function R$(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function O$(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function lOt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function uOt(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function F1e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function j1e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function U1e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function B1e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function cOt(e,t=0,r=1){return e[0]=Math.min(Math.max(e[0],t),r),e[1]=Math.min(Math.max(e[1],t),r),e[2]=Math.min(Math.max(e[2],t),r),e}function hOt(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function N$(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function V1e(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function L$(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function P$(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function D$(e){const t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function G1e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function z1e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function vC(e,t){const r=t[0],n=t[1],i=t[2];let s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function F$(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $1e(e,t,r){const n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=i*l-s*a,e[1]=s*o-n*l,e[2]=n*a-i*o,e}function pOt(e,t,r){const n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2],u=i*l-s*a,c=s*o-n*l,h=n*a-i*o,d=Math.sqrt(u*u+c*c+h*h);return e[0]=u/d,e[1]=c/d,e[2]=h/d,e}function q1e(e,t,r,n){const i=t[0],s=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e}function dOt(e,t,r,n,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),c=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+n[0]*u+i[0]*c,e[1]=t[1]*a+r[1]*l+n[1]*u+i[1]*c,e[2]=t[2]*a+r[2]*l+n[2]*u+i[2]*c,e}function fOt(e,t,r,n,i,s){const o=1-s,a=o*o,l=s*s,u=a*o,c=3*s*a,h=3*l*o,d=l*s;return e[0]=t[0]*u+r[0]*c+n[0]*h+i[0]*d,e[1]=t[1]*u+r[1]*c+n[1]*h+i[1]*d,e[2]=t[2]*u+r[2]*c+n[2]*h+i[2]*d,e}function mOt(e,t=1){const r=t3,n=2*r()*Math.PI,i=2*r()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(n)*s,e[1]=Math.sin(n)*s,e[2]=i*t,e}function H1e(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12],e[1]=r[1]*n+r[5]*i+r[9]*s+r[13],e[2]=r[2]*n+r[6]*i+r[10]*s+r[14],e}function W1e(e,t,r){const n=t[0],i=t[1],s=t[2];return e[0]=n*r[0]+i*r[3]+s*r[6],e[1]=n*r[1]+i*r[4]+s*r[7],e[2]=n*r[2]+i*r[5]+s*r[8],e}function Z1e(e,t,r){const n=r[0],i=r[1],s=r[2],o=r[3],a=t[0],l=t[1],u=t[2],c=i*u-s*l,h=s*a-n*u,d=n*l-i*a,m=i*d-s*h,y=s*c-n*d,g=n*h-i*c,b=2*o;return e[0]=a+c*b+2*m,e[1]=l+h*b+2*y,e[2]=u+d*b+2*g,e}function yOt(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function gOt(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function J1e(e,t,r,n){const i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function vOt(e,t){vC(oee,e),vC(aee,t);const r=F$(oee,aee);return r>1?0:r<-1?Math.PI:Math.acos(r)}const oee=Cd(),aee=Cd();function bOt(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Y1e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function X1e(e,t){if(e===t)return!0;const r=e[0],n=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=Co();return Math.abs(r-s)<=l*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function Q1e(e,t,r){const n=r[0]-t[0],i=r[1]-t[1],s=r[2]-t[2];let o=n*n+i*i+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=n*o,e[1]=i*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const K1e=k$,wOt=R$,_Ot=O$,eve=L$,tve=P$,rve=C$,nve=D$;Object.freeze(Object.defineProperty({__proto__:null,abs:F1e,add:D1e,angle:vOt,bezier:fOt,ceil:lOt,clamp:cOt,copy:L1e,cross:$1e,crossAndNormalize:pOt,direction:Q1e,dist:eve,distance:L$,div:_Ot,divide:O$,dot:F$,equals:X1e,exactEquals:Y1e,floor:uOt,hermite:dOt,inverse:z1e,len:rve,length:C$,lerp:q1e,max:B1e,min:U1e,mul:wOt,multiply:R$,negate:G1e,normalize:vC,random:mOt,rotateX:yOt,rotateY:gOt,rotateZ:J1e,round:hOt,scale:N$,scaleAndAdd:V1e,set:P1e,sign:j1e,sqrDist:tve,sqrLen:nve,squaredDistance:P$,squaredLength:D$,str:bOt,sub:K1e,subtract:k$,transformMat3:W1e,transformMat4:H1e,transformQuat:Z1e},Symbol.toStringTag,{value:"Module"}));function gu(e){let t=e*e;return e<0&&(t*=-1),t}function xOt(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function SOt(e,t,r){const n=r,i=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(n.translation[0]=gu(i.axes[0]),n.translation[1]=gu(i.axes[1]),n.translation[2]=gu(i.buttons[7])-gu(i.buttons[6]),n.heading=gu(i.axes[2]),n.tilt=gu(i.axes[3])):s.deviceType==="spacemouse"&&(n.translation[0]=1.2*gu(i.axes[0]),n.translation[1]=1.2*gu(i.axes[1]),n.translation[2]=2*-gu(i.axes[2]),n.heading=1.2*gu(i.axes[5]),n.tilt=1.2*gu(i.axes[3])),n.tilt*=o,N$(n.translation,n.translation,a),n}function EOt(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let TOt=class extends is{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new e1,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([Et(()=>this._view.navigation.gamepad?.enabled,t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=Ag({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},vs)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,xOt(this._transformation)):(this._currentDevice=e.data.device,SOt(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(EOt(t))return;const r=this._view.viewpoint.clone(),n=this._view.navigation.gamepad.velocityFactor,i=AOt*n*e;I3(r,r,[t.translation[0]*i,-t.translation[1]*i]);const s=1+t.translation[2]*MOt*e,o=this._view.constraints.rotationEnabled?-t.heading*IOt*e:0,a=this._view.size,l=[a[0]/2,a[1]];w$(r,r,s,o,l,a);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const IOt=.06,AOt=.7,MOt=6e-4;function ive(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),gr(()=>document.removeEventListener("visibilitychange",t))}let COt=class extends is{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=n=>{const i=this._keyMap[n.data.key];if(n.modifiers.has("Meta")||n.modifiers.has("Control"))return void this._stopMovement();if(i==null)return;n.stopPropagation(),n.preventDefault();const s=n.type==="key-down";if(this._pressedKeys[s?"add":"delete"](i),s){if(this._direction===i)return;this._direction=i,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const o=this._timeout===void 0,a=this._pressedKeys.size>0;o||a?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=ive(n=>n?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const t=this._currentDirection!=null;if(e!=null){if(t||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else t&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},kOt=class extends is{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",r,n=>this._handleKeyUp(n)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=ive(n=>n?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[e.data.key];if(this._pressed=n!=null,this._pressed){if(e.preventDefault(),t)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var ob;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(ob||(ob={}));let ROt=class extends is{constructor(e,t,r){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",r,n=>this._handleKeyDown(n)),t.zoomIn.forEach(n=>this._keysToZoomAction[n]=ob.IN),t.zoomOut.forEach(n=>this._keysToZoomAction[n]=ob.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const n=this._keysToZoomAction[r],{mapViewNavigation:i}=this.view;let s=null;switch(n){case ob.IN:s=i.zoomIn();break;case ob.OUT:s=i.zoomOut();break;default:return}i.begin(),s.then(()=>i.end()),e.stopPropagation()}};const OOt=.6;let NOt=class extends is{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const t=this._view.mapViewNavigation,{x:r,y:n,deltaY:i}=e.data,s=1/OOt**(1/60*i),o=t.zoom(s,[r,n]);o&&(this._canZoom=!1,o.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}},LOt=class extends is{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const t=this.view.mapViewNavigation;this._dragEventSeparator=new NO({start:(r,n)=>{t.pinch.begin(this.view,n.data),n.stopPropagation()},update:(r,n)=>{t.pinch.update(this.view,n.data),n.stopPropagation()},end:(r,n)=>{t.pinch.end(this.view),n.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function lee(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>FOt(r,e.axisThreshold))}:{buttons:[],axes:[]}}function POt(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function DOt(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function FOt(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let jOt=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=i=>{this._connectGamepad(i.gamepad)},this._onDisconnectGamepad=i=>{const s=i.gamepad,o=s.index,a=this._inputDevices[o];a&&(this._emitGamepadEvent(s,lee(a),!1),this._inputDevices.splice(o,1),this._latestUpdate.splice(o,1),this._input.gamepad.devices.remove(a),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=r&&n,this.supported&&(uee(i=>this._connectGamepad(i)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new s$(e);t.deviceType!=="unknown"&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ag({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!t;uee(n=>{const i=this._inputDevices[n.index];if(!i)return;const s=this._latestUpdate[n.index],o=lee(i),a=r||DOt(o);s&&(s.timestamp===n.timestamp||!s.active&&a||POt(s.state,o))||this._emitGamepadEvent(n,o,!a)})}_emitGamepadEvent(e,t,r){const n=this._latestUpdate[e.index],i=n&&n.active;if(!i&&!r)return;const s=!i&&r?"start":i&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:s})}};function UOt(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function uee(e){for(const t of navigator.getGamepads())UOt(t)&&e(t)}const cee=xe("edge"),BOt=xe("chrome"),VOt=xe("ff"),GOt=xe("safari"),hee="esri-view-surface",V1={touchNone:`${hee}--touch-none`,touchPan:`${hee}--touch-pan`};let sve=class ove{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new jOt(t,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=pn(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const n=this._active[r];this._element.removeEventListener(AP[r],n),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&AP[r]){const n=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(AP[r],n),this._active[r]=n}}),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?V1.touchNone:V1.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?V1.touchPan:V1.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(V1.touchNone),this._element.classList.remove(V1.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const n=dge(this._element,t);return ove.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),r.x=n.x,r.y=n.y,r}_handleKey(t,r){const{key:n}=r;n&&t==="key-up"&&this._keyDownState.delete(n);const i={native:r,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&t==="key-down"&&this._keyDownState.add(i.key),this._callback(t,i)}_handlePointer(t,r){const n=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,n)}_handlePointerPreventDefault(t,r){const n=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,n)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&xe("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,r){let n=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:cee&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}cee?n*=.7:BOt||GOt?n*=.6:VOt&&(n*=1.375);const i=100,s=Math.abs(n);s>i&&(n=n/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:n});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const n={native:r};r.preventDefault(),this._callback(t,n)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};sve.test={disableSubpixelCoordinates:!1};const AP={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let zOt=class extends is{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const js={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function bC(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function $Ot(e,t){const r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}function qOt(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Yi()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[x,w]=e,[T,I]=[w.x-x.x,w.y-x.y];return t.radius=Math.sqrt(T*T+I*I)/2,t.center.x=(x.x+w.x)/2,t.center.y=(x.y+w.y)/2,t}let r=0,n=0;for(let x=0;x<e.length;x++)r+=e[x].x,n+=e[x].y;r/=e.length,n/=e.length;const i=e.map(x=>x.x-r),s=e.map(x=>x.y-n);let o=0,a=0,l=0,u=0,c=0,h=0,d=0;for(let x=0;x<i.length;x++){const w=i[x],T=s[x],I=w*w,M=T*T;o+=I,a+=M,l+=w*T,u+=I*w,c+=M*T,h+=w*M,d+=T*I}const m=.5*(u+h),y=.5*(c+d),g=o*a-l*l,b=(m*a-y*l)/g,S=(o*y-l*m)/g,E=Yi(b+r,S+n);return{radius:Math.sqrt(b*b+S*S+(o+a)/e.length),center:E}}function hg(e){const{native:t}=e,{pointerId:r,button:n,pointerType:i}=t;return i==="mouse"?`${r}:${n}`:`${i}`}let HOt=class extends is{constructor(e=js.maximumDoubleClickDelay,t=js.maximumDoubleClickDistance,r=js.maximumDoubleTouchDelay,n=js.maximumDoubleTouchDistance,i=t_){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=i,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Yi(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new NO({start:(s,o)=>this._dragStart(s,o),update:(s,o)=>this._dragUpdate(o),end:(s,o)=>this._dragEnd(o)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=mn(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=mn(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:n}=t,{center:i}=r;this._dragStartCenter=i;const s=MP("begin",Yi(0,0),r);this._doubleTapDrag.emit(s,void 0,n),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:r}=e,{center:n}=t,i=MP("update",Yi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),t);this._doubleTapDrag.emit(i,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:r}=e,{center:n}=t,i=MP("end",Yi(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),t);this._doubleTapDrag.emit(i,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,r=hg(t),n=this._pointerState.get(r),{pointerType:i}=t.native;if(n){const s=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),bC(n.event.data,t)>s?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:r}=t.native,n=hg(t),i=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(n),i);this._pointerState.set(n,{event:e,doubleTapTimeout:s}),this.refreshHasPendingInputs()}};function MP(e,t,r){const{button:n,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:n,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}}let WOt=class extends is{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,r,n){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:n,pointers:ZOt(this._activePointerMap),pointer:t,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const t=e.native.pointerId,r=oA(this._activePointerMap).angle,n={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,n);const i=R4(n,ave(this._activePointerMap));n.initialAngle=i,n.lastAngle=i,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const t=e.native.pointerId,r=this._activePointerMap.get(t);r?r.event=e:this._addPointer(e)}_removePointer(e){const t=oA(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=oA(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=R4(r,t)-e,r.lastAngle=R4(r,t)-e})}_emitEvent(e,t,r){const n=oA(this._activePointerMap);this._drag.emit(this._createPayload(e,t,n,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const t=e.data,r=t.currentEvent,n=e.timestamp;switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,n)):(this._addPointer(r),this._emitEvent("added",r,n),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,n))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function ave(e){const t=[];return e.forEach(r=>{t.push(Yi(r.event.x,r.event.y))}),qOt(t)}function oA(e){const t=ave(e);let r=0;return e.forEach(n=>{let i=R4(n,t),s=i-n.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=n.lastAngle+s,n.lastAngle=i;const o=i-n.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function ZOt(e){const t=new Map;return e.forEach((r,n)=>t.set(n,r.event)),t}function R4(e,t){const r=e.event,n=r.x-t.center.x,i=r.y-t.center.y;return Math.atan2(i,n)}var pee;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(pee||(pee={}));let JOt=class extends is{constructor(e=js.maximumDoubleClickDelay,t=js.maximumDoubleClickDistance,r=js.maximumDoubleTouchDelay,n=js.maximumDoubleTouchDistance,i=t_){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=i,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const t=e.data,r=hg(t);if(!this._pointerState.has(r)){const n={downButton:t.native.button,x:t.x,y:t.y,immediateDoubleClick:null};this._pointerState.set(r,n),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,r=hg(t),n=this._pointerState.get(r);if(n&&n.downButton===t.native.button){const i=n.immediateDoubleClick,s=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;i?(i.timeoutHandle.remove(),bC(i,e.data)>s?this._startImmediateDoubleClick(e,n):(this._immediateDoubleClick.emit(e.data,void 0,i.modifiers),this._removeState(t))):bC(n,e.data)>s?this._removeState(t):this._startImmediateDoubleClick(e,n)}}_startImmediateDoubleClick(e,t){const r=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const t=hg(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},YOt=class extends is{constructor(e=js.maximumClickDelay,t=js.movementUntilMouseDrag,r=js.movementUntilPenDrag,n=js.movementUntilTouchDrag,i=js.holdDelay,s=t_){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=n,this._holdDelay=i,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",o=>this._handlePointerLoss(o,"pointer-up")),this.registerIncoming("pointer-capture-lost",o=>this._handlePointerLoss(o,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",o=>this._handlePointerLoss(o,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",o=>this._handlePointerMove(o)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=mn(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const t=e.data,r=t.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const s=this._pointerState.get(r);if(s){if(!s.isDragging){const o=s.previousEvent;this._pointerHold.emit(o,void 0,e.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this._holdDelay));const i={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(r,i),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const t=e.data,r=t.native.pointerId,n=this._pointerState.get(r);n&&(n.isDragging?this._pointerDrag.emit(aA("update",n,t),void 0,n.modifiers):$Ot(t,n.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),n.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,r=t.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=e.modifiers,n.isDragging=!0,r===n.startEvent.native.pointerId?this._pointerDrag.emit(aA("start",n,t)):this._pointerDrag.emit(aA("start",n,n.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){const r=e.data,n=r.native.pointerId,i=this._pointerState.get(n);i&&(i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging?this._pointerDrag.emit(aA("end",i,t==="pointer-up"?r:i.previousEvent),void 0,i.modifiers):t==="pointer-up"&&i.downButton===r.native.button&&e.timestamp-i.startTimestamp<=this._maximumClickDelay&&!i.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(n),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function aA(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let XOt=class extends is{constructor(e=js.maximumDoubleClickDelay,t=js.maximumDoubleClickDistance,r=js.maximumDoubleTouchDelay,n=js.maximumDoubleTouchDistance,i=t_){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=n,this._clock=i,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",s=>this._handleImmediateClick(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=mn(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,t){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=mn(r.doubleClickTimer),t&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const t=e.data,{pointerType:r}=t.native,n=QOt(t);if(!this._pointerState.has(n))return void this._startClick(e);const i=this._pointerState.get(n),{data:s,modifiers:o}=i.event,a=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;bC(s,t)>a?(this._clearDoubleClickTimer(n,!0),this._startClick(e)):(this._clearDoubleClickTimer(n,!1),i.pointerDownCount===2&&this._doubleClick.emit(s,void 0,o))}_handlePointerDown(e){const t=hg(e.data),r=this._pointerState.get(t);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:r}}=t,n=hg(t),i=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),i);this._pointerState.set(n,{event:e,doubleClickTimer:s,pointerDownCount:1}),this.refreshHasPendingInputs()}};function QOt(e){const{pointerId:t,pointerType:r,button:n}=e.native;return r==="mouse"?`${t}:${n}`:`${r}`}const lA={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Ey=class extends mt{initialize(){const e=()=>this.view?.ready;this.addHandles([mc(()=>!e(),()=>this._disconnect()),mc(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=pn(this._inputManager)}_connect(){const e=this.view.surface,t=new sve(e,this.view.input),r=[new JOt,new YOt,new XOt,new WOt(this.view.navigation),new HOt],n=new kl({eventSource:t,recognizers:r});n.installHandlers("prevent-context-menu",[new zOt],ld.INTERNAL),n.installHandlers("navigation",[new LOt(this.view),new TOt(this.view),new NOt(this.view),new see(this.view),new see(this.view,[lA.counter]),new oOt(this.view,"primary"),new COt(this.view,lA.pan),new ROt(this.view,lA.zoom),new kOt(this.view,lA.rotate),new aOt(this.view,"secondary"),new sOt(this.view,"touch")],ld.INTERNAL),this.view.viewEvents.connect(n),this._source=t,this._inputManager=n,Et(()=>this.view?.navigation?.browserTouchPanEnabled,i=>{this._source&&(this._source.browserTouchPanningEnabled=!i)},vs)}get test(){}};p([f()],Ey.prototype,"view",void 0),p([f()],Ey.prototype,"latestPointerType",null),p([f()],Ey.prototype,"latestPointerLocation",null),p([f()],Ey.prototype,"multiTouchActive",null),Ey=p([W("esri.views.2d.input.MapViewInputManager")],Ey);const KOt=Ey;function lve(e,t,r,n,i){uve(e,t,r||0,n||e.length-1,i||eNt)}function uve(e,t,r,n,i){for(;n>r;){if(n-r>600){var s=n-r+1,o=t-r+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);uve(e,t,Math.max(r,Math.floor(t-o*l/s+u)),Math.min(n,Math.floor(t+(s-o)*l/s+u)),i)}var c=e[t],h=r,d=n;for(f2(e,r,t),i(e[n],c)>0&&f2(e,r,n);h<d;){for(f2(e,h,d),h++,d--;i(e[h],c)<0;)h++;for(;i(e[d],c)>0;)d--}i(e[r],c)===0?f2(e,r,d):f2(e,++d,n),d<=t&&(r=d+1),t<=d&&(n=d-1)}}function f2(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function eNt(e,t){return e<t?-1:e>t?1:0}function qE(e,t){if(!(this instanceof qE))return new qE(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function tNt(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function G1(e,t){Kx(e,0,e.children.length,t,e)}function Kx(e,t,r,n,i){i||(i=Bv(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],eS(i,e.leaf?n(s):s);return i}function eS(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function dee(e,t){return e.minX-t.minX}function fee(e,t){return e.minY-t.minY}function CP(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function uA(e){return e.maxX-e.minX+(e.maxY-e.minY)}function rNt(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function nNt(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,s-n)}function kP(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function cA(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Bv(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function mee(e,t,r,n,i){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=n||(s=t+Math.ceil((r-t)/n/2)*n,lve(e,s,t,r,i),o.push(t,s,s,r))}qE.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!cA(e,t))return r;for(var i,s,o,a,l=[];t;){for(i=0,s=t.children.length;i<s;i++)o=t.children[i],cA(e,a=t.leaf?n(o):o)&&(t.leaf?r.push(o):kP(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!cA(e,t))return!1;for(var n,i,s,o,a=[];t;){for(n=0,i=t.children.length;n<i;n++)if(s=t.children[n],cA(e,o=t.leaf?r(s):s)){if(t.leaf||kP(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Bv([]),this},remove:function(e,t){if(e==null)return this;for(var r,n,i,s,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],r=u.pop(),s=!0),o.leaf&&(i=tNt(e,o.children,t))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!kP(o,a)?n?(r++,o=n.children[r],s=!1):o=null:(l.push(o),u.push(r),r=0,n=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:dee,compareMinY:fee,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var i,s=r-t+1,o=this._maxEntries;if(s<=o)return G1(i=Bv(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),(i=Bv([])).leaf=!1,i.height=n;var a,l,u,c,h=Math.ceil(s/o),d=h*Math.ceil(Math.sqrt(o));for(mee(e,t,r,d,this.compareMinX),a=t;a<=r;a+=d)for(mee(e,a,u=Math.min(a+d-1,r),h,this.compareMinY),l=a;l<=u;l+=h)c=Math.min(l+h-1,u),i.children.push(this._build(e,l,c,n-1));return G1(i,this.toBBox),i},_chooseSubtree:function(e,t,r,n){for(var i,s,o,a,l,u,c,h;n.push(t),!t.leaf&&n.length-1!==r;){for(c=h=1/0,i=0,s=t.children.length;i<s;i++)l=CP(o=t.children[i]),(u=rNt(e,o)-l)<h?(h=u,c=l<c?l:c,a=o):u===h&&l<c&&(c=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),s=[],o=this._chooseSubtree(i,this.data,t,s);for(o.children.push(e),eS(o,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var s=this._chooseSplitIndex(r,i,n),o=Bv(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,G1(r,this.toBBox),G1(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=Bv([e,t]),this.data.height=e.height+1,this.data.leaf=!1,G1(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,i,s,o,a,l,u,c;for(l=u=1/0,n=t;n<=r-t;n++)o=nNt(i=Kx(e,0,n,this.toBBox),s=Kx(e,n,r,this.toBBox)),a=CP(i)+CP(s),o<l?(l=o,c=n,u=a<u?a:u):o===l&&a<u&&(u=a,c=n);return c},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:dee,i=e.leaf?this.compareMinY:fee;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var i,s,o=this.toBBox,a=Kx(e,0,t,o),l=Kx(e,r-t,r,o),u=uA(a)+uA(l);for(i=t;i<r-t;i++)s=e.children[i],eS(a,e.leaf?o(s):s),u+=uA(a);for(i=r-t-1;i>=t;i--)s=e.children[i],eS(l,e.leaf?o(s):s),u+=uA(l);return u},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)eS(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():G1(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let bj=class cve{constructor(t,r){this.key=new wd(0,0,0,0),this.bounds=Zo(),this.objectIds=new Set,this.key.set(r);const n=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.level=n.level,this.scale=n.scale,this.minScale=t.zoomToScale(n.level-1),this.maxScale=t.zoomToScale(n.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return jt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=mo.acquire();for(let n=0;n<t.length;n++)r[n]=new cve(this.tileInfoView,t[n]);return r}getQuantizationParameters(){return NG.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const I0={added:[],removed:[]},RP=new Set,iNt=new wd(0,0,0,0);function sNt(e,t){const r=Bs(t);if(!r)return null;const[n,i]=r.valid;return e[2]>i?[Zo([e[0],e[1],i,e[3]]),Zo([n,e[1],n+e[2]-i,e[3]])]:e[0]<n?[Zo([n,e[1],e[2],e[3]]),Zo([i-(n-e[0]),e[1],i,e[3]])]:null}let oNt=class extends jh{constructor(e){super(),this._tiles=new Map,this._index=qE(9,xe("esri-csp-restrictions")?t=>({minX:t.bounds[0],minY:t.bounds[1],maxX:t.bounds[2],maxY:t.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||ile(e)===0||sle(e)===0)return[];const t=sNt(e,this.tileScheme.spatialReference);return t!=null?[...new Set([...this.boundsIntersections(t[0]),...this.boundsIntersections(t[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const t={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const n=new bj(this.tileScheme,r);this._tiles.set(r,n),this._index.insert(n),t.added.push(n)}for(const r of e.removed)if(this.has(r)){const n=this.get(r);this._tiles.delete(r),this._index.remove(n),t.removed.push(n)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(t.added.length||t.removed.length)&&this.emit("update",t)}setViewState(e){const t=this.tileScheme.getTileCoverage(e,0);if(!t)return;const{spans:r,lodInfo:n}=t,{level:i}=n;if(r.length>0)for(const{row:s,colFrom:o,colTo:a}of r)for(let l=o;l<=a;l++){const u=iNt.set(i,s,n.normalizeCol(l),n.getWorldForColumn(l)).id;if(RP.add(u),!this.has(u)){const c=new bj(this.tileScheme,u);this._tiles.set(u,c),this._index.insert(c),this.tiles.push(c),I0.added.push(c)}}for(let s=this.tiles.length-1;s>=0;s--){const o=this.tiles[s];RP.has(o.id)||(this._tiles.delete(o.id),this.tiles.splice(s,1),this._index.remove(o),I0.removed.push(o))}(I0.added.length||I0.removed.length)&&this.emit("update",I0),Iw.pool.release(t),RP.clear(),I0.added.length=0,I0.removed.length=0}};const aNt=1e-30,wj=512,hA=16777216,lNt=8,uNt=29,cNt=24,hNt=4,pNt=0,dNt=0,fNt=0,mNt=1,yNt=2,gNt=3,vNt=4,bNt=5,wNt=6,_Nt=12,xNt=13,SNt=5,hve=6,ENt=5,TNt=6;var _j;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(_j||(_j={}));const j$=6,pve=1<<j$,INt=pve<<1,ANt=1.05,MNt=3,CNt=1,kNt=3,RNt=3,ONt=5,NNt=6,LNt=1.15,dve=2,PNt=128,DNt=256,FNt=DNt-2*dve,jNt=2,UNt=128,BNt=10,VNt=1024,GNt=128,zNt=4,$Nt=1,qNt=1<<20,HNt=.75,WNt=10,ZNt=.75,JNt=256,YNt=32,XNt=512,QNt=0,KNt=1,fve=1,eLt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],tLt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],m2=256,rLt=new Ze("cyan"),nLt=1,iLt=.25;new Ze("black");const sLt="default",oLt="temporary",aLt=new Ze("yellow");let Ty=class extends mt{constructor(e){super(e),this.color=rLt.clone(),this.haloOpacity=nLt,this.fillOpacity=iLt}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};p([f({type:Ze})],Ty.prototype,"color",void 0),p([f({type:Ze})],Ty.prototype,"haloColor",void 0),p([f()],Ty.prototype,"haloOpacity",void 0),p([f()],Ty.prototype,"fillOpacity",void 0),Ty=p([W("esri.views.support.HighlightOptions")],Ty);const lLt=Ty;var xj;let tS=xj=class extends lLt{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){return new xj({color:this.color.clone(),haloColor:this.haloColor?.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};p([f()],tS.prototype,"haloWidth",void 0),p([f()],tS.prototype,"haloBlur",void 0),tS=xj=p([W("esri.views.2d.support.HighlightOptions")],tS);const jm=tS;var Sj,Ej,Tj,Ij,wC,Aj,Mj,Bu,_C,Gb,Li,HE,al,nn,vt,Aw,nh,Cj,kj,Rj;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(Sj||(Sj={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ej||(Ej={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(Tj||(Tj={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(Ij||(Ij={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(wC||(wC={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(Aj||(Aj={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(Mj||(Mj={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(Bu||(Bu={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(_C||(_C={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(Gb||(Gb={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(Li||(Li={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(HE||(HE={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(al||(al={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(nn||(nn={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(vt||(vt={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(Aw||(Aw={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(nh||(nh={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(Cj||(Cj={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(kj||(kj={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(Rj||(Rj={}));const uLt=33984;var WE,Oj,Nj;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(WE||(WE={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(Oj||(Oj={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(Nj||(Nj={}));const cLt=33306;var fs,Lj,yee,gee,Pj,Dj,vee;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(fs||(fs={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(Lj||(Lj={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(yee||(yee={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(gee||(gee={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(Pj||(Pj={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(Dj||(Dj={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(vee||(vee={}));const hLt=()=>Pe.getLogger("esri.views.webgl.checkWebGLError");function pLt(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const mve=!!xe("enable-feature:webgl-debug");function U$(){return mve}function dLt(){return mve}function Iy(e){if(U$()){const t=e.getError();if(t){const r=pLt(e,t),n=new Error().stack;hLt().error(new ie("webgl-error","WebGL error occurred",{message:r,stack:n}))}}}var xC;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(xC||(xC={}));function yve(e){switch(e){case Bu.BYTE:case Bu.UNSIGNED_BYTE:return 1;case Bu.SHORT:case Bu.UNSIGNED_SHORT:case Bu.HALF_FLOAT:return 2;case Bu.FLOAT:case Bu.INT:case Bu.UNSIGNED_INT:return 4}}function gve(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function fLt(e,t,r,n,i=0){const s=e.gl;e.bindBuffer(r);for(const o of n){const a=t.get(o.name);if(a==null){console.warn(`There is no location for vertex attribute '${o.name}' defined.`);continue}const l=i*o.stride;if(o.count<=4)s.vertexAttribPointer(a,o.count,o.type,o.normalized,o.stride,o.offset+l),s.enableVertexAttribArray(a),o.divisor>0&&e.gl.vertexAttribDivisor(a,o.divisor);else if(o.count===9)for(let u=0;u<3;u++)s.vertexAttribPointer(a+u,3,o.type,o.normalized,o.stride,o.offset+12*u+l),s.enableVertexAttribArray(a+u),o.divisor>0&&e.gl.vertexAttribDivisor(a+u,o.divisor);else if(o.count===16)for(let u=0;u<4;u++)s.vertexAttribPointer(a+u,4,o.type,o.normalized,o.stride,o.offset+16*u+l),s.enableVertexAttribArray(a+u),o.divisor>0&&e.gl?.vertexAttribDivisor(a+u,o.divisor);else console.error("Unsupported vertex attribute element count: "+o.count);if(U$()){const u=gve(e),c=yve(o.type),h=o.offset,d=Math.round(c/h)!==c/h?`. Offset not a multiple of stride. DataType requires ${c} bytes, but descriptor has an offset of ${h}`:"";u&&console.error(`Unable to bind vertex attribute "${o.name}" with baseInstanceOffset ${l}${d}:`,u,o)}}}function mLt(e,t,r,n){const i=e.gl;e.bindBuffer(r);for(const s of n){const o=t.get(s.name);if(s.count<=4)i.disableVertexAttribArray(o),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(o,0);else if(s.count===9)for(let a=0;a<3;a++)i.disableVertexAttribArray(o+a),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(o+a,0);else if(s.count===16)for(let a=0;a<4;a++)i.disableVertexAttribArray(o+a),s.divisor&&s.divisor>0&&e.gl?.vertexAttribDivisor(o+a,0);else console.error("Unsupported vertex attribute element count: "+s.count)}e.unbindBuffer(wC.ARRAY_BUFFER)}function vve(e){switch(e){case nn.ALPHA:case nn.LUMINANCE:case nn.RED:case nn.RED_INTEGER:case vt.R8:case vt.R8I:case vt.R8UI:case vt.R8_SNORM:case nh.STENCIL_INDEX8:return 1;case nn.LUMINANCE_ALPHA:case nn.RG:case nn.RG_INTEGER:case vt.RGBA4:case vt.R16F:case vt.R16I:case vt.R16UI:case vt.RG8:case vt.RG8I:case vt.RG8UI:case vt.RG8_SNORM:case vt.RGB565:case vt.RGB5_A1:case nh.DEPTH_COMPONENT16:return 2;case nn.DEPTH_COMPONENT:case nn.RGB:case nn.RGB_INTEGER:case vt.RGB8:case vt.RGB8I:case vt.RGB8UI:case vt.RGB8_SNORM:case vt.SRGB8:case nh.DEPTH_COMPONENT24:return 3;case nn.DEPTH_STENCIL:case nn.DEPTH24_STENCIL8:case nn.RGBA:case nn.RGBA_INTEGER:case vt.RGBA8:case vt.R32F:case vt.R11F_G11F_B10F:case vt.RG16F:case vt.R32I:case vt.R32UI:case vt.RG16I:case vt.RG16UI:case vt.RGBA8I:case vt.RGBA8UI:case vt.RGBA8_SNORM:case vt.SRGB8_ALPHA8:case vt.RGB9_E5:case vt.RGB10_A2UI:case vt.RGB10_A2:case nh.DEPTH_STENCIL:case nh.DEPTH_COMPONENT32F:case nh.DEPTH24_STENCIL8:return 4;case nh.DEPTH32F_STENCIL8:return 5;case vt.RGB16F:case vt.RGB16I:case vt.RGB16UI:return 6;case vt.RG32F:case vt.RG32I:case vt.RG32UI:case vt.RGBA16F:case vt.RGBA16I:case vt.RGBA16UI:return 8;case vt.RGB32F:case vt.RGB32I:case vt.RGB32UI:return 12;case vt.RGBA32F:case vt.RGBA32I:case vt.RGBA32UI:return 16;case fs.COMPRESSED_RGB_S3TC_DXT1_EXT:case fs.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case fs.COMPRESSED_RGBA_S3TC_DXT3_EXT:case fs.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case fs.COMPRESSED_R11_EAC:case fs.COMPRESSED_SIGNED_R11_EAC:case fs.COMPRESSED_RGB8_ETC2:case fs.COMPRESSED_SRGB8_ETC2:case fs.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case fs.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case fs.COMPRESSED_RG11_EAC:case fs.COMPRESSED_SIGNED_RG11_EAC:case fs.COMPRESSED_RGBA8_ETC2_EAC:case fs.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let B$=class{constructor(e=0,t=e){this.width=e,this.height=t,this.target=al.TEXTURE_2D,this.pixelFormat=nn.RGBA,this.dataType=Aw.UNSIGNED_BYTE,this.samplingMode=Li.LINEAR,this.wrapMode=HE.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function yLt(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:vve(e.internalFormat))*(e.target===al.TEXTURE_CUBE_MAP?6:1))}let bve=class wve extends B${constructor(t,r){switch(super(),this.context=t,Object.assign(this,r),this.internalFormat){case vt.R16F:case vt.R16I:case vt.R16UI:case vt.R32F:case vt.R32I:case vt.R32UI:case vt.R8_SNORM:case vt.R8:case vt.R8I:case vt.R8UI:this.pixelFormat=nn.RED}}static validate(t,r){return new wve(t,r)}},V$=class Ol{constructor(t,r=null,n=null){if(this.type=xC.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,n=r;else{const i=bve.validate(t,r);if(!i)throw new ie("Texture descriptor invalid");this._descriptor=i}this._descriptor.target===al.TEXTURE_CUBE_MAP?this._setDataCubeMap(n):this.setData(n)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return yLt(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(WE.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,r){const n=this._descriptor;if(n.width!==t||n.height!==r){if(this._wasImmutablyAllocated)throw new ie("Immutable textures can't be resized!");n.width=t,n.height=r,this._descriptor.target===al.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let r=al.TEXTURE_CUBE_MAP_POSITIVE_X;r<=al.TEXTURE_CUBE_MAP_NEGATIVE_Z;r++)this._setData(t,r)}setData(t){this._setData(t)}_setData(t,r){const n=this._descriptor.context?.gl;if(!n)return;Iy(n),this._glName||(this._glName=n.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(WE.Texture,this));const i=this._descriptor,s=r??i.target,o=y2(s),a=this._descriptor.context.bindTexture(this,Ol.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Ol.TEXTURE_UNIT_FOR_UPDATES),pA(i),this._configurePixelStorage(),Iy(n);const l=this._deriveInternalFormat();if(_ee(t)){let u="width"in t?t.width:t.codedWidth,c="height"in t?t.height:t.codedHeight;const h=1;t instanceof HTMLVideoElement&&(u=t.videoWidth,c=t.videoHeight),i.width&&i.height,o&&i.depth,i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,l,i.hasMipmap,u,c,h),this._texImage(s,0,l,u,c,h,t),Iy(n),i.hasMipmap&&(this.generateMipmap(),Iy(n)),i.width||(i.width=u),i.height||(i.height=c),o&&!i.depth&&(i.depth=h)}else{const{width:u,height:c,depth:h}=i;if(u==null||c==null)throw new ie("Width and height must be specified!");if(o&&h==null)throw new ie("Depth must be specified!");if(i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(s,l,i.hasMipmap,u,c,h),O4(t)){const d=t.levels,m=xee(s,u,c,h),y=Math.min(m-1,d.length-1);n.texParameteri(i.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,y);const g=l;if(!bLt(g))throw new ie("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((b,S,E,x)=>{const w=d[Math.min(b,d.length-1)];this._compressedTexImage(s,b,g,S,E,x,w)},y)}else this._texImage(s,0,l,u,c,h,t),Iy(n),i.hasMipmap&&this.generateMipmap()}bee(n,this._descriptor),wee(n,this._descriptor),gLt(this._descriptor.context,this._descriptor),Iy(n),this._descriptor.context.bindTexture(a,Ol.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,r,n,i,s,o,a=0){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const l=this._descriptor,u=this._deriveInternalFormat(),{context:c,pixelFormat:h,dataType:d,target:m,isImmutable:y}=l;if(y&&!this._wasImmutablyAllocated)throw new ie("Cannot update immutable texture before allocation!");const g=c.bindTexture(this,Ol.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||n<0||r+i>l.width||n+s>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=c;a&&b.pixelStorei(b.UNPACK_SKIP_ROWS,a),_ee(o)?b.texSubImage2D(m,t,r,n,i,s,h,d,o):O4(o)?b.compressedTexSubImage2D(m,t,r,n,i,s,u,o.levels[t]):b.texSubImage2D(m,t,r,n,i,s,h,d,o),a&&b.pixelStorei(b.UNPACK_SKIP_ROWS,0),c.bindTexture(g,Ol.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,r,n,i,s,o,a,l){l||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const u=this._descriptor,c=this._deriveInternalFormat(),{context:h,pixelFormat:d,dataType:m,isImmutable:y,target:g}=u;if(y&&!this._wasImmutablyAllocated)throw new ie("Cannot update immutable texture before allocation!");y2(g)||console.warn("Attempting to set 3D texture data on a non-3D texture");const b=h.bindTexture(this,Ol.TEXTURE_UNIT_FOR_UPDATES);h.setActiveTexture(Ol.TEXTURE_UNIT_FOR_UPDATES),(r<0||n<0||i<0||r+s>u.width||n+o>u.height||i+a>u.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=h;if(O4(l))l=l.levels[t],S.compressedTexSubImage3D(g,t,r,n,i,s,o,a,c,l);else{const E=l;S.texSubImage3D(g,t,r,n,i,s,o,a,d,m,E)}h.bindTexture(b,Ol.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new ie("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,pA(t)}t.samplingMode===Li.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=Li.LINEAR_MIPMAP_NEAREST):t.samplingMode===Li.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Li.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,Ol.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Ol.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(r,Ol.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new ie("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,pA(t)}t.samplingMode===Li.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=Li.LINEAR):t.samplingMode===Li.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=Li.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,pA(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,r=t.context.gl;this._samplingModeDirty&&(bee(r,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(wee(r,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===nn.DEPTH_STENCIL&&(this._descriptor.internalFormat=nn.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case Aw.FLOAT:switch(this._descriptor.pixelFormat){case nn.RGBA:return this._descriptor.internalFormat=vt.RGBA32F;case nn.RGB:return this._descriptor.internalFormat=vt.RGB32F;default:throw new ie("Unable to derive format")}case Aw.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case nn.RGBA:return this._descriptor.internalFormat=vt.RGBA8;case nn.RGB:return this._descriptor.internalFormat=vt.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===nn.DEPTH_STENCIL?nn.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:r,flipped:n,preMultiplyAlpha:i}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_texStorage(t,r,n,i,s,o){const{gl:a}=this._descriptor.context;if(!vLt(r))throw new ie("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=n?xee(t,i,s,o):1;if(y2(t)){if(o==null)throw new ie("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,r,i,s,o)}else a.texStorage2D(t,l,r,i,s);this._wasImmutablyAllocated=!0}_texImage(t,r,n,i,s,o,a){const l=this._descriptor.context.gl,u=y2(t),{isImmutable:c,pixelFormat:h,dataType:d}=this._descriptor;if(c){if(a!=null){const m=a;if(u){if(o==null)throw new ie("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,r,0,0,0,i,s,o,h,d,m)}else l.texSubImage2D(t,r,0,0,i,s,h,d,m)}}else{const m=a;if(u){if(o==null)throw new ie("Missing depth dimension for 3D texture upload");l.texImage3D(t,r,n,i,s,o,0,h,d,m)}else l.texImage2D(t,r,n,i,s,0,h,d,m)}}_compressedTexImage(t,r,n,i,s,o,a){const l=this._descriptor.context.gl,u=y2(t);if(this._descriptor.isImmutable){if(a!=null)if(u){if(o==null)throw new ie("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,r,0,0,0,i,s,o,n,a)}else l.compressedTexSubImage2D(t,r,0,0,i,s,n,a)}else if(u){if(o==null)throw new ie("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,r,n,i,s,o,0,a)}else l.compressedTexImage2D(t,r,n,i,s,0,a)}_forEachMipmapLevel(t,r=1/0){let{width:n,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===al.TEXTURE_3D;if(n==null||i==null||l&&s==null)throw new ie("Missing texture dimensions for mipmap calculation");for(let u=0;t(u,n,i,s),o&&(n!==1||i!==1||l&&s!==1)&&!(u>=r);++u)n=Math.max(1,n>>1),i=Math.max(1,i>>1),l&&(s=Math.max(1,s>>1))}};function pA(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function bee(e,t){let r=t.samplingMode,n=t.samplingMode;r===Li.LINEAR_MIPMAP_NEAREST||r===Li.LINEAR_MIPMAP_LINEAR?(r=Li.LINEAR,t.hasMipmap||(n=Li.LINEAR)):r!==Li.NEAREST_MIPMAP_NEAREST&&r!==Li.NEAREST_MIPMAP_LINEAR||(r=Li.NEAREST,t.hasMipmap||(n=Li.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,r),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,n)}function wee(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function gLt(e,t){const r=e.capabilities.textureFilterAnisotropic;r&&e.gl.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function vLt(e){return e in vt}function bLt(e){return e in fs}function O4(e){return e!=null&&"type"in e&&e.type==="compressed"}function wLt(e){return e!=null&&"byteLength"in e}function _ee(e){return e!=null&&!O4(e)&&!wLt(e)}function y2(e){return e===al.TEXTURE_3D||e===al.TEXTURE_2D_ARRAY}function xee(e,t,r,n=1){let i=Math.max(t,r);return e===al.TEXTURE_3D&&(i=Math.max(i,n)),Math.round(Math.log(i)/Math.LN2)+1}V$.TEXTURE_UNIT_FOR_UPDATES=0;const OP=()=>Pe.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function _Lt(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const xLt=[0,0,0,0];let _ve=class{constructor(){this.type="single",this._highlightOptions=new jm,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*m2),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,t){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,hve),t.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<j$)-1,activeGradient:this}]}_updateGradientTexture(e){const{optionsKey:t}=this._highlightOptions;if(t===this._optionsShadeTexKey)return;this._optionsShadeTexKey=t,_Lt(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,n=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,i=r.outlinePosition-r.outlineWidth/2,s=r.outlinePosition+r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,a=Math.sqrt(Math.PI/2)*fve,l=Math.abs(n)>a?Math.round(10*(Math.abs(n)-a))/10:0,u=Math.abs(o)>a?Math.round(10*(Math.abs(o)-a))/10:0;let c;l&&!u?OP().error("The outer rim of the highlight is "+l+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!l&&u?OP().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):l&&u&&OP().error("The highlight is "+Math.max(l,u)+"px away from the edge of the feature; consider reducing some width values.");const h=[void 0,void 0,void 0,void 0];function d(y,g,b){h[0]=(1-b)*y[0]+b*g[0],h[1]=(1-b)*y[1]+b*g[1],h[2]=(1-b)*y[2]+b*g[2],h[3]=(1-b)*y[3]+b*g[3]}const{_texelData:m}=this;for(let y=0;y<m2;++y)c=n+y/(m2-1)*(o-n),c<n?(h[0]=0,h[1]=0,h[2]=0,h[3]=0):c<i?d(xLt,r.outlineColor,(c-n)/(i-n)):c<s?[h[0],h[1],h[2],h[3]]=r.outlineColor:c<o?d(r.outlineColor,r.fillColor,(c-s)/(o-s)):[h[0],h[1],h[2],h[3]]=r.fillColor,m[4*y]=255*h[0],m[4*y+1]=255*h[1],m[4*y+2]=255*h[2],m[4*y+3]=255*h[3];if(this._minMaxDistance[0]=n,this._minMaxDistance[1]=o,!this._shadeTex){const y=new B$;y.wrapMode=HE.CLAMP_TO_EDGE,y.width=m2,y.height=1,this._shadeTex=new V$(e,y)}this._shadeTex.updateData(0,0,0,m2,1,this._texelData)}},SLt=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let t=0;t<e.length;t++)this.gradients[t]||(this.gradients[t]=new _ve),this.gradients[t].setHighlightOptions(e[t].options);for(let t=e.length+1;t<this.gradients.length;t++)this.gradients[t].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const t=[];for(let r=0;r<this.gradients.length;r++){const n=this.gradients[r];t.push({activeReasons:e,activeGradient:n}),e<<=1}return t}};var See,Fj,jj,Eee,Uj,Tee,ZE,Bj,Vj;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(See||(See={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(Fj||(Fj={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(jj||(jj={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(Eee||(Eee={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(Uj||(Uj={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(Tee||(Tee={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(ZE||(ZE={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(Bj||(Bj={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(Vj||(Vj={}));const xve={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:_C.EQUAL,mask:255,op:{fail:Gb.KEEP,zFail:Gb.KEEP,zPass:Gb.REPLACE}}}},ELt={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},TLt={...xve,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Sve({pixelRatio:e,state:t,displayLevel:r,requiredLevel:n},i){const s=1/2**(r-i.key.level),o=1/2**(n-i.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:t.scale,currentZoom:r,metersPerSRUnit:wc(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function G$(e){return e.passOptions?.type==="highlight"}function z$(e){return e.passOptions?.type==="hittest"}function ILt(e){if(!z$(e))return null;const{position:t,distance:r,smallSymbolDistance:n,smallSymbolSizeThreshold:i}=e.passOptions;return{position:t,distance:r,smallSymbolDistance:n,smallSymbolSizeThreshold:i}}function ALt(e){if(!G$(e))return null;const{activeReasons:t,highlightAll:r}=e.passOptions;return{activeReasons:t,highlightAll:r?1:0}}function MLt(e,t,r){const n={};for(const i in r)r[i]instanceof Function?n[i]=r[i](e,t):n[i]=r[i];return n}function CLt(e,t){const{attributeView:r,context:n}=e;return{storage:r.getUniforms(n),view:Sve(e,t),hittestRequest:ILt(e),highlight:ALt(e)}}function kLt(e){return{inside:e.selection===ZE.InsideEffect,outside:e.selection===ZE.OutsideEffect}}function Eve(e){return z$(e)?ELt:G$(e)&&e.passOptions.stepType==="clear"?TLt:xve}function RLt(e){const{row:t,col:r}=e.key,n=r*wj,i=t*wj;return{tileOffsetFromLocalOrigin:[n%hA,i%hA],maxIntsToLocalOrigin:[Math.floor(n/hA),Math.floor(i/hA)]}}const OLt=new Pt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function NLt(e){return OLt.toJSON(e)}function LLt(e){const{bandCount:t,attributeTable:r,colormap:n,pixelType:i}=e.raster.rasterInfo;return t===1&&(r!=null||n!=null||i==="u8"||i==="s8")}function Tve(e,t){return t==null?(e?.destroy(),null):(e?.type==="single"&&Array.isArray(t)&&(e.destroy(),e=null),e?.type!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new SLt:new _ve),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function PLt(e,t,r,n){const{painter:i,highlightGradient:s}=e,{highlight:o}=i.effects;if(!s)return;const a=e.passOptions,l=s.getReasonsWithGradients();for(let u=0;u<l.length;u++){const c={...e,passOptions:{type:"highlight",activeGradient:n!=null?l[n].activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(c),r(c),u<l.length-1){let d=0;for(let m=u+1;m<l.length;m++)d|=l[m].activeReasons;r({...e,passOptions:{type:"highlight",activeGradient:n!=null?l[n].activeGradient:l[u].activeGradient,activeReasons:d,stepType:"clear",highlightAll:t}})}const h={...e,passOptions:{type:"highlight",activeGradient:n!=null?l[n].activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"draw",highlightAll:t}};i.setPipelineState(Eve(e)),i.updatePipelineState(e.context),o.draw(h),o.unbind()}e.passOptions=a}const dA=e=>parseFloat(e)/100;function Ive(e,t,r){const n=typeof e.left=="string"?dA(e.left)*t:e.left,i=typeof e.right=="string"?dA(e.right)*t:e.right,s=typeof e.top=="string"?dA(e.top)*r:e.top,o=typeof e.bottom=="string"?dA(e.bottom)*r:e.bottom,a=s;return{xmin:n,xmax:Math.max(t-i,n),ymin:a,ymax:Math.max(r-o,s)}}function Ave(e,t,r,n){switch(t.type){case"rect":{const{width:i,height:s}=e,{xmin:o,xmax:a,ymin:l,ymax:u}=Ive(t,i,s),{x:c,y:h}=r;return c>o&&c<a&&h>l&&h<u}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||sR(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?lV(t.geometry,n):h_(t.geometry,n))}}var Gj;let Xy=Gj=class extends mt{constructor(...e){super(...e),this.name="default",this.options=new jm}clone(){return new Gj({name:this.name,options:this.options.clone()})}};p([f({type:String})],Xy.prototype,"name",void 0),p([f({type:jm})],Xy.prototype,"options",void 0),Xy=Gj=p([W("esri.views.2d.support.HighlightGroup")],Xy);const Mve=st.ofType(Xy);function Cve(){return new Mve([{name:sLt,options:new jm},{name:oLt,options:new jm({color:aLt})}])}Cve().items.map(e=>e.name);function kve(e){if(!e.highlights)return null;const t=e.highlights.findIndex(r=>r.name==="default");return t===-1?null:e.highlights.items[t].options}function Rve(e,t){if(!e.highlights){if(!t)return;e.highlights=new Mve([{name:"default",options:new jm}])}const r=e.highlights.findIndex(n=>n.name==="default");t?e.highlights.items[r].options=t:e.highlights.removeAt(r)}async function DLt(e,t,r){const n=mge(t)?fge(e,t):t;if(!e.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,l=null;r?.include?Aee(r.include,Iee(e,d=>{i.add(d),NP(d,m=>s.add(m))},(d,m)=>{s.add(d),i.add(m)},d=>{a||(a=new Set),a.add(d)},d=>i.add(d),()=>o=!0)):(o=!0,i=new Set(e.allLayerViews),i.forEach(d=>{NP(d,m=>s.add(m))})),r?.exclude&&Aee(r.exclude,Iee(e,d=>{i.delete(d),NP(d,m=>s.delete(m))},d=>s.delete(d),d=>{l||(l=new Set),l.add(d)}));const u=e.toMap(n),c=e.allLayerViews.filter(d=>!d.suspended&&i.has(d)&&d.clips.every(m=>Ave(e,m,n,u))).reverse();let h=[...o?e.graphicsView.hitTest(u).map(d=>({type:"graphic",graphic:d,layer:null,mapPoint:u})):[],...await Promise.all(c.map(d=>d.hitTest(u,n)).toArray())].filter(Qo).flat().filter(Qo);return h=h.filter(d=>d.type!=="graphic"||d.layer?.type!=="subtype-group"||s.has(d.graphic.layer)),a&&(h=h.filter(d=>!("graphic"in d)||!d.graphic||a?.has(zj(d.graphic)))),l&&(h=h.filter(d=>!("graphic"in d)||!d.graphic||!l?.has(zj(d.graphic)))),{screenPoint:n,results:h}}function Iee(e,t,r,n,i,s){return o=>{if(o instanceof dl){if(o.layer===e)s?.();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&i?.(a)}n(zj(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function Aee(e,t){if(e)if(r5(e))for(const r of e)if(r5(r))for(const n of r)t(n);else t(r);else t(e)}function zj(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function NP({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}let g2=null,SC=!0;function FLt(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(SC)try{return new ImageData(e,t)}catch{SC=!1}return Ove(e,t,r)}function jLt(e,t,r,n){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(SC)try{return new ImageData(e,t,r)}catch{SC=!1}const i=Ove(t,r,n);return i.data.set(e,0),i}function ULt(){return g2||(g2=document.createElement("canvas"),g2.width=1,g2.height=1),g2}function Ove(e,t,r){return r||(r=ULt()),r.getContext("2d").createImageData(e,t)}async function BLt(e,t){const r=window.URL.createObjectURL(e);try{const{data:n}=await Xe(r,{...t,responseType:"image"});return n}catch(n){throw Fi(n)?n:new ie("invalid-image",`Could not fetch requested image at ${r}`)}finally{window.URL.revokeObjectURL(r)}}async function VLt(e,t){const{arrayBuffer:r,mediaType:n}=await GLt(e,t),i=n==="image/png";if(n==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await Me(()=>import("./gif-Bui8aA6k-C67NI_vy.js"),__vite__mapDeps([229,1,2]),import.meta.url);if(s(r))return o(r,t)}if(i){const{isAnimatedPNG:s,parseApng:o}=await Me(()=>import("./apng-CJzaTn1o-DgTHv046.js"),__vite__mapDeps([230,1,2]),import.meta.url);if(s(r))return o(r,t)}return BLt(new Blob([r],{type:n}),t)}async function GLt(e,t){const r=Cg(e);if(r?.isBase64)return{arrayBuffer:koe(r.data),mediaType:r.mediaType};const n=await Xe(e,{responseType:"array-buffer",...t});return{arrayBuffer:n.data,mediaType:n.getHeader?.("Content-Type")??""}}function Nve(e,t,r){const{ctx:n,canvas:i}=Pve(e,r),s=n.getImageData(0,0,e.width,e.height),o=Fve(i,t);return Dve(i),{dataUrl:o,data:s}}function Lve(e,t){const{ctx:r,canvas:n}=Pve(e,t),i=r.getImageData(0,0,e.width,e.height);return Dve(n),i}function Pve(e,t){const r=zLt();t.premultipliedAlpha&&WLt(e),r.width=e.width,r.height=e.height;const n=r.getContext("2d",{willReadFrequently:!0});return n.putImageData(e,0,0),t.flipY&&HLt(n),{ctx:n,canvas:r}}function Dve(e){e.width=0,e.height=0}function zLt(){return LP==null&&(LP=document.createElement("canvas")),LP}let LP=null;function Fve(e,t){const r=ZLt[t.format],n=t.quality/100;return e.toDataURL(r,n)}function jve(e,t){const r=qLt(e),n=YLt[r];return{format:r,quality:hl(t??n,0,100)}}function Uve(e,t){return t/Math.max(e[0],e[1])}function $Lt(e,t,r,n=0,i=0,s=e.width-n,o=e.height-i,a=!1){const{data:l}=e,{width:u,height:c,data:h}=t,d=s/u,m=o/c,y=Math.ceil(d/2),g=Math.ceil(m/2),b=e.width;for(let S=0;S<c;S++)for(let E=0;E<u;E++){const x=4*(E+(a?c-S-1:S)*u);let w=0,T=0,I=0,M=0,C=0,k=0;const N=(S+.5)*m;for(let F=Math.floor(S*m);F<(S+1)*m;F++){const P=Math.abs(N-(F+.5))/g,B=(E+.5)*d,O=P*P;for(let v=Math.floor(E*d);v<(E+1)*d;v++){const A=Math.abs(B-(v+.5))/y,R=Math.sqrt(O+A*A);if(R>=1)continue;let U=2*R*R*R-3*R*R+1;const q=4*(n+v+(i+F)*b);k+=U*l[q+3],T+=U,!r&&l[q+3]<255&&(U=U*l[q+3]/255),I+=U*l[q],M+=U*l[q+1],C+=U*l[q+2],w+=U}}h[x]=I/w,h[x+1]=M/w,h[x+2]=C/w,h[x+3]=k/T}return t}function qLt(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return JLt}}function HLt(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function WLt(e){const t=e.data,r=t.length;for(let n=0;n<r;n+=4){const i=t[n+3];if(i!==255&&i>0){const s=255/i;t[n]=t[n]*s,t[n+1]=t[n+1]*s,t[n+2]=t[n+2]*s}}}const ZLt={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Mee=98,JLt="png",YLt={png:100,jpg:Mee,jpeg:Mee},XLt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:FLt,encode:Nve,encodeData:Lve,getFormatAndQuality:jve,getMaximumResolutionScale:Uve,resampleHermite:$Lt,toDataUrl:Fve},Symbol.toStringTag,{value:"Module"})),Bve={flipY:!0,premultipliedAlpha:!0};async function QLt(e,t){const r=await Vve(e,t),{format:n,quality:i}=jve(t?.format,t?.quality);return Nve(r,{format:n,quality:i},Bve)}async function KLt(e,t){const r=await Vve(e,t);return Lve(r,Bve)}function Vve(e,t){const r=rPt(t||{},tPt(e.stage,e.size),e.size,e.padding),n=ePt(t,e.allLayerViews);return e.stage.takeScreenshot(r,n,e.backgroundColor,t?.rotation)}function ePt(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(n=>{const i=t.find(s=>s.layer.id===n.id);i?.container&&r.push(i.container)}),r}function tPt(e,t){return Math.min(4,Uve(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function rPt(e,t,r,n){e.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let i=null;e.width!=null&&e.height!=null?i=[e.width,e.height]:e.width==null&&e.height!=null?i=[e.height,e.height]:e.width!=null&&e.height==null?i=[e.width,e.width]:e.width==null&&e.height==null&&(i=null);const s=r[0]-(n.left+n.right),o=r[1]-(n.top+n.bottom);let a,l,u=e.area||{x:0,y:0,width:s,height:o};if(i){const c=s/o,h=i[0]/i[1];if(h>c){const d=u.width/h;u={x:u.x,y:Math.round(u.y+(u.height-d)/2),width:u.width,height:Math.round(d)}}else{const d=u.height*h;u={x:Math.round(u.x+(u.width-d)/2),y:u.y,width:Math.round(d),height:u.height}}}else i=[u.width,u.height];return i[0]>u.width?(a=Math.min(i[0]/u.width,t),l=i[0]/u.width/a):(a=1,l=i[0]/u.width),{cropArea:{x:Math.round((u.x+n.left)*a),y:Math.round((u.y+n.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const Cee=160;let rS=class extends mt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Cee&&this.clear()},Cee))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};p([f()],rS.prototype,"_timer",void 0),p([f()],rS.prototype,"stationary",null),rS=p([W("esri.views.2d.support.StationaryManager")],rS);const nPt=e=>e.includes("Brush");let $$=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),nPt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}},PP;function Gve(){return PP||(PP=oPt()),PP}let iPt=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function sPt(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=t.getContext("webgl2"),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return n&&(e.supportsHighPrecisionFragment=n.precision>0),r}function oPt(){const e=new iPt,t=sPt(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function aPt(e){const t=Gve();return t.available?e==="3d"&&t.majorPerformanceCaveat?new ie("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new ie("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ie("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ie("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function lPt(e){return e&&"nodeType"in e}function uPt(e){return e&&typeof e.render=="function"}const kee={component:"esri-component"};let Ay=class extends mt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(kee.component),t&&t.classList.remove(kee.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||lPt(e)?(this._set("widget",null),e$(e)):(uPt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};p([f()],Ay.prototype,"id",null),p([f()],Ay.prototype,"node",null),p([ur("node")],Ay.prototype,"castNode",null),p([f({readOnly:!0})],Ay.prototype,"widget",void 0),Ay=p([W("esri.views.ui.Component")],Ay);const N4=Ay,zve="calcite-mode-";function cPt(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function $ve(){return cPt().startsWith("dark")}function qve(){return`${zve}${$ve()?"dark":"light"}`}function Hve(e){hPt(e),e.classList.add(qve())}function hPt(e){Array.from(e.classList).forEach(t=>{t.startsWith(zve)&&e.classList.remove(t)})}const pPt={left:0,top:0,bottom:0,right:0},Wve={bottom:30,top:15,right:15,left:15},Wh="esri-ui",aa={ui:Wh,corner:`${Wh}-corner`,innerContainer:`${Wh}-inner-container`,manualContainer:`${Wh}-manual-container`,cornerContainer:`${Wh}-corner-container`,topLeft:`${Wh}-top-left`,topRight:`${Wh}-top-right`,bottomLeft:`${Wh}-bottom-left`,bottomRight:`${Wh}-bottom-right`};function dPt(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function fA(e){return e===0?"0":`${e}px`}function DP(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function FP(e,{top:t,bottom:r,left:n,right:i}){e.style.top=t,e.style.bottom=r,e.style.left=n,e.style.right=i}let qc=class extends jh.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Xo(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&FP(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&FP(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([Et(()=>[this.view?.padding,this.container],this._applyViewPadding,vs),Et(()=>this.padding,this._applyUIPadding,vs),Et(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},vs),Oae(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(aa.ui),Hve(e),this._attachContainers(e)),t&&(t.classList.remove(aa.ui),FP(t,{top:"",bottom:"",left:"",right:""}),t.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const t=this._getViewPadding(),{top:r,bottom:n}=t;return Math.max(e-r-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Wve,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const t=this._getViewPadding(),{left:r,right:n}=t;return Math.max(e-r-n,0)}add(e,t){let r,n,i;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const s=DP(e);s&&({index:r,position:t,component:e,key:n}=s),t&&typeof t=="object"&&({index:r,key:n,position:t,internal:i}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,n,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(n=>this.remove(n,t));const r=this._find(e);if(r){if(this._componentMap.has(r)&&this._componentMap.get(r)?.key!==t)return;const n=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(n,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const i of e)this.empty(i,t);return}const r=this._positionNameToContainerLookup[e??"manual"],n=Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(i=>i==null?!1:!(this._componentMap.get(i)?.internal??!1)||t.removeInternal);for(const i of n)this.remove(i)}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let r;const n=DP(e)||DP(t);if(n&&(r=n.index,t=n.position,e=n.component||e),t&&!this._isValidPosition(t))return;const i=this.remove(e);i&&this.add(i,{position:t,index:r})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,t)):this._getComponentsAtPosition(e,t):this._components.filter(r=>t.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:n})=>r??n)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,r,n,i){e instanceof N4||(e=new N4({node:e}));const{widget:s}=e;s!=null&&s instanceof mt&&s.addHandles(gr(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:r}),this._components.push(e),this._componentMap.set(e,{key:n,internal:i})}_find(e){return e?e instanceof N4?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??pPt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(aa.innerContainer,aa.cornerContainer);const t=document.createElement("div");t.classList.add(aa.innerContainer,aa.manualContainer);const r=document.createElement("div");r.classList.add(aa.topLeft,aa.corner),e.appendChild(r);const n=document.createElement("div");n.classList.add(aa.topRight,aa.corner),e.appendChild(n);const i=document.createElement("div");i.classList.add(aa.bottomLeft,aa.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(aa.bottomRight,aa.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=Kye();this._cornerNameToContainerLookup={"top-left":r,"top-right":n,"bottom-left":i,"bottom-right":s,"top-leading":o?n:r,"top-trailing":o?r:n,"bottom-leading":o?s:i,"bottom-trailing":o?i:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.position??"manual",{component:r,index:n}=e,i=this._positionNameToContainerLookup[t],s=n!=null&&n>-1;if(dPt(r.widget)&&r.widget.startup(),!s)return void i.appendChild(r.node);const o=Array.from(i.children);if(n===0){const{firstChild:l}=i;return void(l?l.parentNode?.insertBefore(r.node,l):i.appendChild(r.node))}if(n>=o.length)return void i.appendChild(r.node);const a=o[n];a.parentNode?.insertBefore(r.node,a)}_toPixelPosition(e){return{top:fA(e.top),left:fA(e.left),right:fA(e.right),bottom:fA(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(n=>this._findByNode(n)).filter(Qo).filter(n=>t.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:i})=>n??i)}};p([f()],qc.prototype,"_locale",void 0),p([f()],qc.prototype,"container",null),p([f()],qc.prototype,"height",null),p([f({value:Wve})],qc.prototype,"padding",null),p([ur("padding")],qc.prototype,"castPadding",null),p([f()],qc.prototype,"view",void 0),p([f()],qc.prototype,"width",null),qc=p([W("esri.views.ui.UI")],qc);const fPt=qc,mPt={handleInterceptedEvent:(e,t,r,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||r,[n]))},yPt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},gPt=e=>({...yPt,...e}),vPt=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},bPt=(e,t)=>e.find(t),Ree=(e,t,r=!1)=>{let n=e;return t.forEach((i,s)=>{const o=n?.children?bPt(n.children,a=>a.domNode===i):void 0;r&&!o&&s!==t.length-1||(n=o)}),n},wPt=e=>{let t;const r={...mPt,...e},n=gPt(r),i=n.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],c=(d,m,y)=>{let g;n.eventHandlerInterceptor=(S,E,x,w)=>function(T){let I;i("domEvent",T);const M=vPt(T.currentTarget,g.domNode),C=M.some(N=>customElements.get(N?.tagName?.toLowerCase()));if(T.eventPhase===Event.CAPTURING_PHASE||!C)M.reverse(),I=Ree(g.getLastRender(),M);else{const N=T.composedPath(),F=N.slice(N.indexOf(T.currentTarget),N.indexOf(g.domNode)).reverse();I=Ree(g.getLastRender(),F,!0)}let k;return I&&(k=r.handleInterceptedEvent(t,I,this,T)),i("domEventProcessed",T),k},r.postProcessProjectionOptions?.(n);const b=y();g=d(m,b,n),n.eventHandlerInterceptor=void 0,l.push(g),u.push(y),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(g,b)};let h=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let d=0;d<l.length;d++){const m=u[d]();i("rendered",void 0);try{l[d].update(m)}catch(y){console.error(y)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(h=r.modifyDoRenderImplementation(h,l,u)),t={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(d,m)=>{c(dm.append,d,m)},insertBefore:(d,m)=>{c(dm.insertBefore,d,m)},merge:(d,m)=>{c(dm.merge,d,m)},replace:(d,m)=>{c(dm.replace,d,m)},detach:d=>{for(let m=0;m<u.length;m++)if(u[m]===d)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Zve="calcite-mode-auto",Jve="calcite-mode-dark",_Pt="calcite-mode-light",xPt={autoMode:Zve,darkMode:Jve,lightMode:_Pt,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},SPt={filter:250,nextTick:0,resize:150,reposition:100};var jl={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},EPt=Object.defineProperty,TPt=(e,t)=>{for(var r in t)EPt(e,r,{get:t[r],enumerable:!0})},Yve=new WeakMap,v1=e=>Yve.get(e),IPt=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Yve.set(e,r)},Oee=(e,t)=>t in e,A3=(e,t)=>(0,console.error)(e,t),EC=new Map,APt=[],MPt="slot-fb{display:contents}slot-fb[hidden]{display:none}",Nee="http://www.w3.org/1999/xlink",M3=typeof window<"u"?window:{},oc=M3.document||{head:{}},CPt=M3.HTMLElement||class{},Es={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},kPt=(()=>{let e=!1;try{oc.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),RPt=e=>Promise.resolve(e),OPt=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),$j=!1,qj=[],Xve=[],Qve=(e,t)=>r=>{e.push(r),$j||($j=!0,t&&Es.$flags$&4?NPt(Hj):Es.raf(Hj))},Lee=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){A3(r)}e.length=0},Hj=()=>{Lee(qj),Lee(Xve),($j=qj.length>0)&&Es.raf(Hj)},NPt=e=>RPt().then(e),LPt=Qve(qj,!1),PPt=Qve(Xve,!0),Kve=e=>{const t=new URL(e,Es.$resourcesUrl$);return t.origin!==M3.location.origin?t.href:t.pathname},DPt=e=>Es.$resourcesUrl$=e,Pee={},FPt="http://www.w3.org/2000/svg",jPt="http://www.w3.org/1999/xhtml",UPt=e=>e!=null,q$=e=>(e=typeof e,e==="object"||e==="function");function BPt(e){var t,r,n;return(n=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?n:void 0}var VPt={};TPt(VPt,{err:()=>ebe,map:()=>GPt,ok:()=>Wj,unwrap:()=>zPt,unwrapErr:()=>$Pt});var Wj=e=>({isOk:!0,isErr:!1,value:e}),ebe=e=>({isOk:!1,isErr:!0,value:e});function GPt(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(n=>Wj(n)):Wj(r)}if(e.isErr){const r=e.value;return ebe(r)}throw"should never get here"}var zPt=e=>{if(e.isOk)return e.value;throw e.value},$Pt=e=>{if(e.isErr)return e.value;throw e.value},$g=(e,t="")=>()=>{},H$=(e,t,...r)=>{let n=null,i=null,s=null,o=!1,a=!1;const l=[],u=h=>{for(let d=0;d<h.length;d++)n=h[d],Array.isArray(n)?u(n):n!=null&&typeof n!="boolean"&&((o=typeof e!="function"&&!q$(n))&&(n=String(n)),o&&a?l[l.length-1].$text$+=n:l.push(o?TC(null,n):n),a=o)};if(u(r),t){t.key&&(i=t.key),t.name&&(s=t.name);{const h=t.className||t.class;h&&(t.class=typeof h!="object"?h:Object.keys(h).filter(d=>h[d]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,HPt);const c=TC(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=i,c.$name$=s,c},TC=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},tbe={},qPt=e=>e&&e.$tag$===tbe,HPt={forEach:(e,t)=>e.map(Dee).forEach(t),map:(e,t)=>e.map(Dee).map(t).map(WPt)},Dee=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),WPt=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),H$(e.vtag,r,...e.vchildren||[])}const t=TC(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},ZPt=e=>APt.map(t=>t(e)).find(t=>!!t),JPt=(e,t)=>e!=null&&!q$(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,YPt=e=>e,XPt=(e,t,r)=>{const n=YPt(e);return{emit:i=>QPt(n,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:i})}},QPt=(e,t,r)=>{const n=Es.ce(t,r);return e.dispatchEvent(n),n},Fee=new WeakMap,KPt=(e,t,r)=>{let n=EC.get(e);OPt&&r?(n=n||new CSSStyleSheet,typeof n=="string"?n=t:n.replaceSync(t)):n=t,EC.set(e,n)},eDt=(e,t,r)=>{var n;const i=rbe(t,r),s=EC.get(i);if(e=e.nodeType===11?e:oc,s)if(typeof s=="string"){e=e.head||e;let o=Fee.get(e),a;if(o||Fee.set(e,o=new Set),!o.has(i)){{a=oc.createElement("style"),a.innerHTML=s;const l=(n=Es.$nonce$)!=null?n:BPt(oc);l!=null&&a.setAttribute("nonce",l),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=MPt),o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},tDt=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$;$g("attachStyles",t.$tagName$);const i=eDt(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);n&10&&n&2&&(r["s-sc"]=i,r.classList.add(i+"-h"),n&2&&r.classList.add(i+"-s"))},rbe=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),jee=(e,t,r,n,i,s)=>{if(r!==n){let o=Oee(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=Uee(r),c=Uee(n);l.remove(...u.filter(h=>h&&!c.includes(h))),l.add(...c.filter(h=>h&&!u.includes(h)))}else if(t==="style"){for(const l in r)(!n||n[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in n)(!r||n[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,n[l]):e.style[l]=n[l])}else if(t!=="key")if(t==="ref")n&&n(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):Oee(M3,a)?t=a.slice(2):t=a[2]+t.slice(3),r||n){const l=t.endsWith(nbe);t=t.replace(nDt,""),r&&Es.rel(e,t,r,l),n&&Es.ael(e,t,n,l)}}else{const l=q$(n);if((o||l&&n!==null)&&!i)try{if(e.tagName.includes("-"))e[t]=n;else{const c=n??"";t==="list"?o=!1:(r==null||e[t]!=c)&&(e[t]=c)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),n==null||n===!1?(n!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(Nee,t):e.removeAttribute(t)):(!o||s&4||i)&&!l&&(n=n===!0?"":n,u?e.setAttributeNS(Nee,t,n):e.setAttribute(t,n))}}},rDt=/\s/,Uee=e=>e?e.split(rDt):[],nbe="Capture",nDt=new RegExp(nbe+"$"),ibe=(e,t,r)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Pee,s=t.$attrs$||Pee;for(const o of Bee(Object.keys(i)))o in s||jee(n,o,i[o],void 0,r,t.$flags$);for(const o of Bee(Object.keys(s)))jee(n,o,i[o],s[o],r,t.$flags$)};function Bee(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Vv,Zj,Mw,IC=!1,AC=!1,W$=!1,nl=!1,MC=(e,t,r,n)=>{var i;const s=t.$children$[r];let o=0,a,l,u;if(IC||(W$=!0,s.$tag$==="slot"&&(Vv&&n.classList.add(Vv+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)a=s.$elm$=oc.createTextNode(s.$text$);else if(s.$flags$&1)a=s.$elm$=oc.createTextNode("");else{if(nl||(nl=s.$tag$==="svg"),a=s.$elm$=oc.createElementNS(nl?FPt:jPt,!IC&&jl.slotRelocation&&s.$flags$&2?"slot-fb":s.$tag$),nl&&s.$tag$==="foreignObject"&&(nl=!1),ibe(null,s,nl),a.getRootNode().querySelector("body")&&jl.scoped&&UPt(Vv)&&a["s-si"]!==Vv&&a.classList.add(a["s-si"]=Vv),J$(a,n),s.$children$)for(o=0;o<s.$children$.length;++o)l=MC(e,s,o,a),l&&a.appendChild(l);s.$tag$==="svg"?nl=!1:a.tagName==="foreignObject"&&(nl=!0)}return a["s-hn"]=Mw,s.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=Zj,a["s-sn"]=s.$name$||"",a["s-rf"]=(i=s.$attrs$)==null?void 0:i.ref,u=e&&e.$children$&&e.$children$[r],u&&u.$tag$===s.$tag$&&e.$elm$&&JE(e.$elm$,!1)),a},JE=(e,t)=>{Es.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&jl.experimentalSlotFixes){let n=e;for(;n=n.nextSibling;)n&&n["s-sn"]===e["s-sn"]&&n["s-sh"]===Mw&&r.push(n)}for(let n=r.length-1;n>=0;n--){const i=r[n];i["s-hn"]!==Mw&&i["s-ol"]&&(wm(abe(i),i,Z$(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,W$=!0),t&&JE(i,t)}Es.$flags$&=-2},sbe=(e,t,r,n,i,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===Mw&&(o=o.shadowRoot);i<=s;++i)n[i]&&(a=MC(null,r,i,e),a&&(n[i].$elm$=a,wm(o,a,Z$(t))))},obe=(e,t,r)=>{for(let n=t;n<=r;++n){const i=e[n];if(i){const s=i.$elm$;cbe(i),s&&(AC=!0,s["s-ol"]?s["s-ol"].remove():JE(s,!0),s.remove())}}},iDt=(e,t,r,n,i=!1)=>{let s=0,o=0,a=0,l=0,u=t.length-1,c=t[0],h=t[u],d=n.length-1,m=n[0],y=n[d],g,b;for(;s<=u&&o<=d;)if(c==null)c=t[++s];else if(h==null)h=t[--u];else if(m==null)m=n[++o];else if(y==null)y=n[--d];else if(mA(c,m,i))Gv(c,m,i),c=t[++s],m=n[++o];else if(mA(h,y,i))Gv(h,y,i),h=t[--u],y=n[--d];else if(mA(c,y,i))(c.$tag$==="slot"||y.$tag$==="slot")&&JE(c.$elm$.parentNode,!1),Gv(c,y,i),wm(e,c.$elm$,h.$elm$.nextSibling),c=t[++s],y=n[--d];else if(mA(h,m,i))(c.$tag$==="slot"||y.$tag$==="slot")&&JE(h.$elm$.parentNode,!1),Gv(h,m,i),wm(e,h.$elm$,c.$elm$),h=t[--u],m=n[++o];else{for(a=-1,l=s;l<=u;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===m.$key$){a=l;break}a>=0?(b=t[a],b.$tag$!==m.$tag$?g=MC(t&&t[o],r,a,e):(Gv(b,m,i),t[a]=void 0,g=b.$elm$),m=n[++o]):(g=MC(t&&t[o],r,o,e),m=n[++o]),g&&wm(abe(c.$elm$),g,Z$(c.$elm$))}s>u?sbe(e,n[d+1]==null?null:n[d+1].$elm$,r,n,o,d):o>d&&obe(t,s,u)},mA=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&r&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,Z$=e=>e&&e["s-ol"]||e,abe=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Gv=(e,t,r=!1)=>{const n=t.$elm$=e.$elm$,i=e.$children$,s=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(nl=o==="svg"?!0:o==="foreignObject"?!1:nl,o==="slot"&&!IC||ibe(e,t,nl),i!==null&&s!==null?iDt(n,i,t,s,r):s!==null?(e.$text$!==null&&(n.textContent=""),sbe(n,null,t,s,0,s.length-1)):!r&&jl.updatable&&i!==null&&obe(i,0,i.length-1),nl&&o==="svg"&&(nl=!1)):(l=n["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(n.data=a)},lbe=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const n=r["s-sn"];r.hidden=!1;for(const i of t)if(i!==r){if(i["s-hn"]!==r["s-hn"]||n!==""){if(i.nodeType===1&&(n===i.getAttribute("slot")||n===i["s-sn"])||i.nodeType===3&&n===i["s-sn"]){r.hidden=!0;break}}else if(i.nodeType===1||i.nodeType===3&&i.textContent.trim()!==""){r.hidden=!0;break}}}lbe(r)}},$p=[],ube=e=>{let t,r,n;for(const i of e.childNodes){if(i["s-sr"]&&(t=i["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const s=i["s-sn"];for(n=r.length-1;n>=0;n--)if(t=r[n],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==i["s-hn"]&&!jl.experimentalSlotFixes)if(Vee(t,s)){let o=$p.find(a=>a.$nodeToRelocate$===t);AC=!0,t["s-sn"]=t["s-sn"]||s,o?(o.$nodeToRelocate$["s-sh"]=i["s-hn"],o.$slotRefNode$=i):(t["s-sh"]=i["s-hn"],$p.push({$slotRefNode$:i,$nodeToRelocate$:t})),t["s-sr"]&&$p.map(a=>{Vee(a.$nodeToRelocate$,t["s-sn"])&&(o=$p.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else $p.some(o=>o.$nodeToRelocate$===t)||$p.push({$nodeToRelocate$:t})}i.nodeType===1&&ube(i)}},Vee=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",cbe=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(cbe)},wm=(e,t,r)=>{const n=e?.insertBefore(t,r);return J$(t,e),n},hbe=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...hbe(e.parentElement)),t},J$=(e,t,r=!1)=>{var n;if(e&&t&&e.nodeType===1){const i=new Set(hbe(t).filter(Boolean));if(i.size&&((n=e.classList)==null||n.add(...e["s-scs"]=[...i]),e["s-ol"]||r))for(const s of Array.from(e.childNodes))J$(s,e,!0)}},sDt=(e,t,r=!1)=>{var n,i,s,o,a;const l=e.$hostElement$,u=e.$cmpMeta$,c=e.$vnode$||TC(null,null),h=qPt(t)?t:H$(null,null,t);if(Mw=l.tagName,u.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},u.$attrsToReflect$.map(([d,m])=>h.$attrs$[m]=l[d])),r&&h.$attrs$)for(const d of Object.keys(h.$attrs$))l.hasAttribute(d)&&!["key","ref","style","class"].includes(d)&&(h.$attrs$[d]=l[d]);h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=c.$elm$=l.shadowRoot||l,Vv=l["s-sc"],IC=(u.$flags$&1)!==0,Zj=l["s-cr"],AC=!1,Gv(c,h,r);{if(Es.$flags$|=1,W$){ube(h.$elm$);for(const d of $p){const m=d.$nodeToRelocate$;if(!m["s-ol"]){const y=oc.createTextNode("");y["s-nr"]=m,wm(m.parentNode,m["s-ol"]=y,m)}}for(const d of $p){const m=d.$nodeToRelocate$,y=d.$slotRefNode$;if(y){const g=y.parentNode;let b=y.nextSibling;{let S=(n=m["s-ol"])==null?void 0:n.previousSibling;for(;S;){let E=(i=S["s-nr"])!=null?i:null;if(E&&E["s-sn"]===m["s-sn"]&&g===E.parentNode){for(E=E.nextSibling;E===m||E?.["s-sr"];)E=E?.nextSibling;if(!E||!E["s-nr"]){b=E;break}}S=S.previousSibling}}(!b&&g!==m.parentNode||m.nextSibling!==b)&&m!==b&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),wm(g,m,b),m.nodeType===1&&(m.hidden=(s=m["s-ih"])!=null?s:!1)),m&&typeof y["s-rf"]=="function"&&y["s-rf"](m)}else m.nodeType===1&&(r&&(m["s-ih"]=(o=m.hidden)!=null?o:!1),m.hidden=!0)}}AC&&lbe(h.$elm$),Es.$flags$&=-2,$p.length=0}if(jl.experimentalScopedSlotChanges&&u.$flags$&2)for(const d of h.$elm$.childNodes)d["s-hn"]!==Mw&&!d["s-sh"]&&(r&&d["s-ih"]==null&&(d["s-ih"]=(a=d.hidden)!=null?a:!1),d.hidden=!0);Zj=void 0},oDt=(e,t)=>{},Y$=(e,t)=>(e.$flags$|=16,oDt(e,e.$ancestorComponent$),PPt(()=>aDt(e,t))),aDt=(e,t)=>{const r=e.$hostElement$;$g("scheduleUpdate",e.$cmpMeta$.$tagName$);const n=r;if(!n)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let i;return t?i=zb(n,"componentWillLoad"):i=zb(n,"componentWillUpdate"),i=Gee(i,()=>zb(n,"componentWillRender")),Gee(i,()=>uDt(e,n,t))},Gee=(e,t)=>lDt(e)?e.then(t).catch(r=>{console.error(r),t()}):t(),lDt=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",uDt=async(e,t,r)=>{const n=e.$hostElement$;$g("update",e.$cmpMeta$.$tagName$),n["s-rc"],r&&tDt(e),$g("render",e.$cmpMeta$.$tagName$),cDt(e,t,n,r),hDt(e)},zee=null,cDt=(e,t,r,n)=>{try{zee=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(jl.hasRenderFn||jl.reflect)&&(jl.vdomRender||jl.reflect)&&(jl.hydrateServerSide||sDt(e,t,n))}catch(i){A3(i,e.$hostElement$)}return zee=null,null},hDt=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,n=$g("postUpdate",t),i=r;e.$ancestorComponent$,zb(i,"componentDidRender"),e.$flags$&64?(zb(i,"componentDidUpdate"),n()):(e.$flags$|=64,zb(i,"componentDidLoad"),n())},pDt=e=>{{const t=v1(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&Y$(t,!1),r}},zb=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(n){A3(n)}},dDt=(e,t)=>v1(e).$instanceValues$.get(t),fDt=(e,t,r,n)=>{const i=v1(e),s=e,o=i.$instanceValues$.get(t),a=i.$flags$,l=s;r=JPt(r,n.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!u){i.$instanceValues$.set(t,r);{if(n.$watchers$&&a&128){const c=n.$watchers$[t];c&&c.map(h=>{try{l[h](r,o,t)}catch(d){A3(d,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;Y$(i,!1)}}}},mDt=(e,t,r)=>{var n,i;const s=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((n=t.$members$)!=null?n:{});o.map(([a,[l]])=>{(l&31||l&32)&&Object.defineProperty(s,a,{get(){return dDt(this,a)},set(u){fDt(this,a,u,t)},configurable:!0,enumerable:!0})});{const a=new Map;s.attributeChangedCallback=function(l,u,c){Es.jmp(()=>{var h;const d=a.get(l);if(this.hasOwnProperty(d))c=this[d],delete this[d];else{if(s.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==c)return;if(d==null){const m=v1(this),y=m?.$flags$;if(y&&!(y&8)&&y&128&&c!==u){const g=this;((h=t.$watchers$)==null?void 0:h[l])?.forEach(b=>{g[b]!=null&&g[b].call(g,c,u,l)})}return}}this[d]=c===null&&typeof this[d]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((i=t.$watchers$)!=null?i:{}),...o.filter(([l,u])=>u[0]&15).map(([l,u])=>{var c;const h=u[1]||l;return a.set(h,l),u[0]&512&&((c=t.$attrsToReflect$)==null||c.push([l,h])),h})]))}}return e},yDt=async(e,t,r,n)=>{let i;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{i=e.constructor;const s=e.localName;customElements.whenDefined(s).then(()=>t.$flags$|=128)}if(i&&i.style){let s;typeof i.style=="string"?s=i.style:typeof i.style!="string"&&(t.$modeName$=ZPt(e),t.$modeName$&&(s=i.style[t.$modeName$]));const o=rbe(r,t.$modeName$);EC.has(o)||($g("registerStyles",r.$tagName$),KPt(o,s,!!(r.$flags$&1)))}}t.$ancestorComponent$,Y$(t,!0)},$ee=e=>{},gDt=e=>{if(!(Es.$flags$&1)){const t=v1(e),r=t.$cmpMeta$;$g("connectedCallback",r.$tagName$),t.$flags$&1?(pbe(e,t,r.$listeners$),t?.$lazyInstance$?$ee(t.$lazyInstance$):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>$ee(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&vDt(e),r.$members$&&Object.entries(r.$members$).map(([n,[i]])=>{if(i&31&&e.hasOwnProperty(n)){const s=e[n];delete e[n],e[n]=s}}),yDt(e,t,r))}},vDt=e=>{const t=e["s-cr"]=oc.createComment("");t["s-cn"]=!0,wm(e,t,e.firstChild)},bDt=async e=>{if(!(Es.$flags$&1)){const t=v1(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},wDt=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const n=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){IPt(this,r)},connectedCallback(){const s=v1(this);pbe(this,s,r.$listeners$),gDt(this),n&&n.call(this)},disconnectedCallback(){bDt(this),i&&i.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${r.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=r.$tagName$,mDt(e,r)},_Dt=(e,t)=>t,pbe=(e,t,r,n)=>{r&&r.map(([i,s,o])=>{const a=SDt(e,i),l=xDt(t,o),u=EDt(i);Es.ael(a,s,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Es.rel(a,s,l,u))})},xDt=(e,t)=>r=>{try{jl.lazyLoad||e.$hostElement$[t](r)}catch(n){A3(n)}},SDt=(e,t)=>t&4?oc:t&8?M3:t&16?oc.body:e,EDt=e=>kPt?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;const $S=globalThis.calciteConfig,TDt=$S?.focusTrapStack||[];$S?.logLevel;const qee="2.13.2",IDt="2024-10-24",ADt="e38e2977d";function MDt(){if($S&&$S.version)return;console.info(`Using Calcite Components ${qee} [Date: ${IDt}, Revision: ${ADt}]`);const e=$S||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:qee,writable:!1}),globalThis.calciteConfig=e}const dbe=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;function Hee(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(Jve)||e.contains(Zve)&&t?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&n(o),s=o};let s=r();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function CDt(){dbe()&&(document.readyState==="interactive"?Hee():document.addEventListener("DOMContentLoaded",()=>Hee(),{once:!0})),MDt()}const kDt=CDt;kDt();let fbe;function RDt(){try{Kve(".")}catch{DPt(Aa(br(fbe)))}}function LO(e){const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null}fbe="components/assets";const mbe=Symbol("widget"),ybe=Symbol("widget-test-data"),ODt=[],NDt={},CC=new WeakMap;function gbe(e,t){let r=t.children;if(r?.length)for(let i=0;i<r.length;++i)r[i]=gbe(e,r[i]);else r=ODt;const n=t.vnodeSelector;if(kC(n)){const i=t.properties||NDt,s=i.key||n,o={key:s,afterCreate:LDt,afterUpdate:PDt,afterRemoved:vbe,parentWidget:e,widgetConstructor:n,widgetProperties:{...i,key:s,children:r}};return{vnodeSelector:n.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function LDt(e,t,r,{parentWidget:n,widgetConstructor:i,widgetProperties:s}){const o=new i(s);o.container=e,CC.set(e,o),o.afterCreate?.(o,e),n.addHandles(gr(()=>vbe(e))),queueMicrotask(()=>{o[ybe].projector.renderNow()})}function PDt(e,t,r,{widgetProperties:n}){const i=CC.get(e);i&&(i.set(n),i.afterUpdate?.(i,e))}function vbe(e){const t=CC.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),CC.delete(e))}function kC(e){return typeof e=="function"&&e[mbe]}const Wee=new Set;function DDt(e){Wee.add(e),e.finally(()=>Wee.delete(e))}var bbe;const FDt="esri.widgets.Widget";let jDt=0;function wbe(e,t){const r=Object.prototype.hasOwnProperty;for(const n in t)r.call(t,n)&&r.call(e,n)&&(e[n]!=null&&t[n]!=null&&typeof e[n]=="object"&&typeof t[n]=="object"?wbe(e[n],t[n]):e[n]=t[n]);return e}const UDt=wPt({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(n,i,s,o)=>{const a=t?.(n,i,s,o),l=r.test(n);if(!((n=n.replace(r,"")).toLowerCase()in s)||l){const u=n[2].toLowerCase()+n.slice(3),c=m=>a?.call(s,m);s.addEventListener(u,c,l);const h=()=>s.removeEventListener(u,c,l),d=o.afterRemoved;o.afterRemoved=m=>{d?.(m),h()}}return a}},handleInterceptedEvent(e,t,r,n){const{eventPhase:i,type:s}=n,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Xye(),e.scheduleRender(),l[a].call(l.bind||r,n))}});let jP=!1,ki=class extends FT(jh.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=UDt,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=NT(async()=>{if(this._messageBundleProps?.length){const a=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:l,propertyName:u})=>{if(this.destroyed)return;let c=await Fae(l);this.uiStrings&&Object.keys(this.uiStrings)&&(c=wbe(se(c),this.uiStrings)),this[u]=c}));if(this.destroyed)return;for(const l of a)l.status==="rejected"&&Pe.getLogger(this).error("widget-intl:locale-error",this.declaredClass,l.reason)}await this.loadLocale()}),RDt();const r="esri-widget-uid-"+eO(),n=this.render.bind(this);this._trackingTarget=new Zk(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const i=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),s=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const a=n()??i(),l=a.properties??={};if(l.key??=r,kC(a.vnodeSelector)){if(!this.visible)return i()}else this.visible?l.styles||(l.styles={}):(l.class="",l.styles={display:"none"}),l.styles.display??="";let u=0;return a.children?.forEach(c=>{kC(c.vnodeSelector)||(c.properties??={},c.properties.key??=`${this.id}--${u++}`)}),gbe(this,a)};this.render=()=>{if(jP)return s();let a=u5t(this)??null;if(a)return a;this._trackingTarget.clear(),jP=!0;try{a=pd(this._trackingTarget,s)}catch(l){throw Pe.getLogger(this).error(l),l}finally{jP=!1}return a&&c5t(this,a),a};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),DDt(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(RD):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(pn(this._trackingTarget),pn(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,yP(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return e$(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+jDt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(bbe=mbe,ybe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(yP(this),this._projector.scheduleRender())}own(e){CB(Pe.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return Qye.apply(this,e)}renderNow(){yP(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(Et(()=>this.viewModel,(t,r)=>{r&&this.removeHandles("delegated-events"),t&&qk(t)&&this.addHandles(this._delegatedEventNames.map(n=>r_(t,n,i=>{this.emit(n,i)})),"delegated-events")},_a)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(RD),this.scheduleRender()};this.addHandles([Oae(e),Et(()=>this.uiStrings,e),mc(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};ki[bbe]=!0,ki.vnodeSelector="div",p([f()],ki.prototype,"_readyForTrueRender",void 0),p([f({value:null})],ki.prototype,"container",null),p([ur("container")],ki.prototype,"castContainer",null),p([f()],ki.prototype,"icon",null),p([f()],ki.prototype,"id",null),p([f()],ki.prototype,"label",null),p([f()],ki.prototype,"renderable",null),p([f()],ki.prototype,"uiStrings",void 0),p([f()],ki.prototype,"viewModel",void 0),p([f({value:!0})],ki.prototype,"visible",null),p([f()],ki.prototype,"key",void 0),p([f()],ki.prototype,"children",void 0),p([f()],ki.prototype,"afterCreate",void 0),p([f()],ki.prototype,"afterUpdate",void 0),p([f()],ki.prototype,"afterRemoved",void 0),ki=p([W(FDt)],ki);const C3=ki,BDt=new Map;function VDt(e){return BDt.get(e)}function Zee(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function GDt(e,t){return e.length!==t.length||e.some((r,n)=>r.text!==t[n].text)}function v2(e,t,r){!r||!t||e.find(n=>n.layerView===t&&n.text===r)||e.push({text:r,layerView:t})}function zDt(e){return e.type==="bing-maps"}const Zh=[];let zv=class extends mt{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new st,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(n=>Et(()=>[n.suspended,n.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(n=>{n.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(n.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(n=>{this._pendingAttributions.delete(n),this._fetchedAttributionData.delete(n)}),this._updateAttributionItems()},this.addHandles([ru(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),mc(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e?.allLayerViews;if(Zh.length=0,!e||!t)return void this._clear();t.forEach(n=>{if(n.suspended||!n.layer?.attributionVisible)return;const i=n.layer;if(Zee(i,"user"))return void v2(Zh,n,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(n)){const o=this._fetchedAttributionData.get(n);return void(o?v2(Zh,n,this._getDynamicAttribution(o,e,i)):Zee(i)&&v2(Zh,n,i.copyright))}return void this._fetchAttributionData(n)}const s="portalItem"in i?i.portalItem?.accessInformation:void 0;v2(Zh,n,s||i.copyright)});const r=t.find(n=>n.layer?.type==="integrated-mesh-3dtiles");if(this.view&&r){const n=VDt(this.view);if(n){const i=n.getAttributionText();for(let s=0;s<i.length;++s)v2(Zh,r,i[s])}}GDt(this.items,Zh)&&(this.items.removeAll(),this.items.addMany(Zh)),Zh.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await jT(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,zDt(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,n={};if(!r)return n;for(let i=0;i<r.length;i++){const s=r[i],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),c=a.zoomMax-(t&&a.zoomMax?1:0),h=new jt({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Ke.WGS84}),d={extent:ym(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let m=u;m<=c;m++)n[m]??=[],n[m].push(d)}}return n.maxKey=Math.max.apply(null,Object.keys(n)),n}_getDynamicAttribution(e,t,r){const{extent:n,scale:i}=t;let s=r.tileInfo?.scaleToZoom(i)??0;if(s=Math.min(e.maxKey??0,Math.round(s)),!n||s==null||s<=-1)return"";const o=e[s],a=GT(n.center.clone().normalize(),Ke.WebMercator),l=new Set;return o?o.filter(u=>{const c=u.id,h=!l.has(c)&&a&&u.extent&&h_(u.extent,a);return h&&l.add(c),h}).sort((u,c)=>c.score-u.score||u.objectId-c.objectId).map(u=>u.attribution).join(", "):""}};p([f({readOnly:!0,type:st})],zv.prototype,"items",void 0),p([f({readOnly:!0})],zv.prototype,"state",null),p([f()],zv.prototype,"view",void 0),zv=p([W("esri.widgets.Attribution.AttributionViewModel")],zv);const _be=zv,ac={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function $Dt(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:HDt(e[t])}}}function qDt(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function HDt(e){return function(t,...r){qDt(t)?y5t(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function k3(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var WDt=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},xbe=function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];Array.isArray(i)?xbe(i,t):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=WDt(i)),t.push(i))}},ZDt=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var i=[];return xbe(r,i),{vnodeSelector:e,properties:t||void 0,children:i,text:void 0,domNode:null}};function Jo(e,t,...r){return typeof e!="function"||kC(e)?ZDt(e,t,...r):e(t,...r)}function JDt(...e){return e}const z1="esri-attribution",$1={base:z1,poweredBy:`${z1}__powered-by`,sources:`${z1}__sources`,open:`${z1}--open`,sourcesOpen:`${z1}__sources--open`,link:`${z1}__link`};let Fo=class extends C3{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:n})=>this._checkSourceTextOverflow(n))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new _be}initialize(){this.addHandles(ru(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[$1.open]:this._isOpen};return Jo("div",{bind:this,class:this.classes($1.base,ac.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Jo("div",{class:$1.poweredBy},"Powered by"," ",Jo("a",{class:$1.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,r=t?0:void 0,{attributionText:n}=this,i={[$1.sourcesOpen]:e,[ac.interactive]:t};return Jo("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes($1.sources,i),innerHTML:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:r,clientWidth:n,scrollWidth:i}=e,s=i>n,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const a=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};p([f()],Fo.prototype,"_isOpen",void 0),p([f()],Fo.prototype,"_isInteractive",null),p([f()],Fo.prototype,"_attributionTextOverflowed",void 0),p([f()],Fo.prototype,"_prevSourceNodeHeight",void 0),p([f({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Fo.prototype,"attributionText",null),p([f()],Fo.prototype,"icon",null),p([f()],Fo.prototype,"itemDelimiter",void 0),p([f()],Fo.prototype,"label",null),p([f(),k3("esri/widgets/Attribution/t9n/Attribution")],Fo.prototype,"messages",void 0),p([f()],Fo.prototype,"view",null),p([f({type:_be})],Fo.prototype,"viewModel",void 0),p([$Dt()],Fo.prototype,"_toggleState",null),Fo=p([W("esri.widgets.Attribution")],Fo);const YDt=Fo;function Sbe(){return xe("mapview-essential-goto-duration")}function XDt(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}const Ebe=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:n}=this;return td(n),this.goToOverride?this.goToOverride(n,r):n.goTo(r.target,r.options)}};return p([f()],t.prototype,"goToOverride",void 0),p([f()],t.prototype,"view",void 0),t=p([W("esri.widgets.support.GoTo")],t),t};let My=class extends Ebe(mt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(Et(()=>this.view,this._updateRotationWatcher,vs))}destroy(){this.view=null}get canShowNorth(){return XDt(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Sbe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?Et(()=>e?.rotation,this._updateForRotation,vs):Et(()=>e?.camera,this._updateForCamera,vs))}};p([f({readOnly:!0})],My.prototype,"canShowNorth",null),p([f({readOnly:!0})],My.prototype,"orientation",void 0),p([f({readOnly:!0})],My.prototype,"state",null),p([f()],My.prototype,"view",void 0),My=p([W("esri.widgets.Compass.CompassViewModel")],My);const Tbe=My,Jee="esri-compass",Yee={base:Jee,iconContainer:`${Jee}__icon-container`};let Ep=class extends C3{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Tbe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return LO({button:()=>Me(()=>import("./calcite-button-f0Oiah94-C0JiqHnl.js"),__vite__mapDeps([231,232,233,234,235,236,237,238,239,240,241,242,243,244,1,2]),import.meta.url),icon:()=>Me(()=>import("./calcite-icon-C7cRkbvP-C2iXNAOL.js"),__vite__mapDeps([245,242,233,240,1,2]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,{messages:r}=this;return Jo("div",{class:this.classes(Yee.base,ac.widget)},Jo("calcite-button",{class:ac.widgetButton,disabled:t==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Jo("div",{"aria-hidden":"true",class:Yee.iconContainer,title:r.reset},Jo("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};p([f()],Ep.prototype,"goToOverride",null),p([f()],Ep.prototype,"icon",null),p([f()],Ep.prototype,"label",null),p([f(),k3("esri/widgets/Compass/t9n/Compass")],Ep.prototype,"messages",void 0),p([f()],Ep.prototype,"view",null),p([f({type:Tbe})],Ep.prototype,"viewModel",void 0),Ep=p([W("esri.widgets.Compass")],Ep);const QDt=Ep,Xee="esri-navigation-toggle",Qee={base:Xee,isLayoutHorizontal:`${Xee}--horizontal`};let $v=class extends mt{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(mc(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){const e=this.view?.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};p([f({readOnly:!0})],$v.prototype,"state",null),p([f()],$v.prototype,"_navigationMode",void 0),p([f()],$v.prototype,"view",void 0),$v=p([W("esri.widgets.NavigationToggle.NavigationToggleViewModel")],$v);const Ibe=$v;let Tp=class extends C3{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Ibe,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;tge(r),this.toggle()}}loadDependencies(){return LO({button:()=>Me(()=>import("./calcite-button-f0Oiah94-C0JiqHnl.js"),__vite__mapDeps([231,232,233,234,235,236,237,238,239,240,241,242,243,244,1,2]),import.meta.url)})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Jo("div",{class:this.classes(Qee.base,ac.widget,{[Qee.isLayoutHorizontal]:this.layout==="horizontal"})},Jo("calcite-button",{afterCreate:n=>{this._panButton=n},appearance:t?"outline-fill":"solid",class:ac.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:t?void 0:-1,title:r}),Jo("calcite-button",{afterCreate:n=>{this._rotateButton=n},appearance:t?"solid":"outline-fill",class:ac.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:t?-1:void 0,title:r}))}};p([f()],Tp.prototype,"icon",null),p([f()],Tp.prototype,"label",null),p([f({value:"vertical"})],Tp.prototype,"layout",null),p([f(),k3("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Tp.prototype,"messages",void 0),p([f()],Tp.prototype,"view",null),p([f({type:Ibe})],Tp.prototype,"viewModel",void 0),Tp=p([W("esri.widgets.NavigationToggle")],Tp);const KDt=Tp;let Cy=class extends mt{get canZoomIn(){if(!this.view?.ready)return!1;const e=this.view?.constraints?.effectiveMaxScale;return e===0||this._scale>e}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const t=e.constraints?.effectiveMinScale;return t===0||this._scale<t}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};p([f({readOnly:!0})],Cy.prototype,"canZoomIn",null),p([f({readOnly:!0})],Cy.prototype,"canZoomOut",null),p([f()],Cy.prototype,"view",void 0),p([f()],Cy.prototype,"_scale",null),Cy=p([W("esri.widgets.Zoom.ZoomConditions2D")],Cy);const e6t=Cy;let qv=class extends mt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};p([f({readOnly:!0})],qv.prototype,"canZoomIn",null),p([f({readOnly:!0})],qv.prototype,"canZoomOut",null),p([f()],qv.prototype,"view",void 0),qv=p([W("esri.widgets.Zoom.ZoomConditions3D")],qv);const t6t=qv;let Lf=class extends mt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new e6t({view:e}):e.type==="3d"&&(this._zoomConditions=new t6t({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():o5(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():o5(e.goTo({zoomFactor:.5}))}};p([f()],Lf.prototype,"_zoomConditions",void 0),p([f()],Lf.prototype,"canZoomIn",null),p([f()],Lf.prototype,"canZoomOut",null),p([f({readOnly:!0})],Lf.prototype,"state",null),p([f()],Lf.prototype,"view",null),Lf=p([W("esri.widgets.Zoom.ZoomViewModel")],Lf);const Abe=Lf,Kee={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Ip=class extends C3{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new Abe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return LO({button:()=>Me(()=>import("./calcite-button-f0Oiah94-C0JiqHnl.js"),__vite__mapDeps([231,232,233,234,235,236,237,238,239,240,241,242,243,244,1,2]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[Kee.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:t,canZoomOut:r}=this.viewModel,{zoomIn:n,zoomOut:i}=this.messages;return Jo("div",{class:this.classes(Kee.base,ac.widget,e)},Jo("calcite-button",{class:ac.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:n,onclick:this.zoomIn,title:n}),Jo("calcite-button",{class:ac.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:i,onclick:this.zoomOut,title:i}))}};p([f()],Ip.prototype,"icon",null),p([f()],Ip.prototype,"label",null),p([f({value:"vertical"})],Ip.prototype,"layout",null),p([f(),k3("esri/widgets/Zoom/t9n/Zoom")],Ip.prototype,"messages",void 0),p([f()],Ip.prototype,"view",null),p([f({type:Abe})],Ip.prototype,"viewModel",void 0),Ip=p([W("esri.widgets.Zoom")],Ip);const r6t=Ip;function n6t(e){return e?.view!==void 0}let L4=class extends fPt{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(r=>{const n=this._find(r),i=n?.widget;n6t(i)&&(i.view=t)})},this._componentsWatcher=(t,r)=>{this._removeComponents(r),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([Et(()=>this.components,this._componentsWatcher,vs),Et(()=>this.view,this._updateViewAwareWidgets,vs)])}_add(e,t,r,n,i){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,t,r,n,i)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);return new N4({id:e,node:t})}_createWidget(e){const t=this.view;switch(e){case"attribution":return new YDt({view:t});case"compass":return new QDt({view:t});case"navigation-toggle":return new KDt({view:t});case"zoom":return new r6t({view:t})}}};p([f()],L4.prototype,"components",void 0),L4=p([W("esri.views.ui.DefaultUI")],L4);const Mbe=L4;let P4=class extends Mbe{constructor(e){super(e),this.components=["attribution","zoom"]}};p([f()],P4.prototype,"components",void 0),P4=p([W("esri.views.ui.2d.DefaultUI2D")],P4);const Cbe=P4;class i6t extends VR{constructor(t,r){super(t,r,"webmap")}}function UP(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new i6t(2,32);var Jj;let D4=Jj=class extends we{constructor(e){super(e),this.color=new Ze([0,0,0,1])}clone(){return new Jj(se({color:this.color}))}};p([f({type:Ze,json:{write:!0}})],D4.prototype,"color",void 0),D4=Jj=p([W("esri.webmap.background.ColorBackground")],D4);const kbe=D4;let Rbe,Obe,Nbe,Lbe,Pbe,Dbe,Fbe;async function s6t(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:n,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([Me(()=>import("./webglDeps-Dw9YmB8n-D327Cymv.js"),__vite__mapDeps([166,74,73,127,167,129,1,2]),import.meta.url),Me(()=>import("./mapViewDeps-Z1Pn0MJe-C2o-zjHA.js"),__vite__mapDeps([168,1,2,75,76,77,78,72,73,74,50,79,44,169,129,84,170,167,92,171,116,115,83,172,107,81,82,114,166,127,173,87,174,71,13,34,175,125,123,109,126,176,177,85,80,178,179,180,181,182,183,122,184]),import.meta.url)]);Obe=e,Nbe=t,Lbe=r,Pbe=n,Dbe=i,Fbe=s,Rbe=o}let Bt=class extends y4t($5t(R5t(OCt))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Dm({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new k4({view:this}),this.graphicsView=null,this.stateManager=new oo({constraints:new C1e({view:this})}),this.stationaryManager=new rS,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new HRt(this),this.floors=new st,this.grid=null,this.highlights=Cve(),this.inputManager=new KOt({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new $$,this.type="2d",this.view2dType=null,this.ui=new Cbe,this.test={takeScreenshot:async t=>KLt(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([Et(()=>this.viewpoint,()=>this.stationaryManager.flip(),Di),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),vwt()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=pn(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new oNt(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:n,extent:i}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!i&&(t?.effectiveLODs||(s=-1),(!r||e===0&&s===-1)&&(n?.targetGeometry==null||n.targetGeometry.type!=="extent"&&!n.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,r=this.spatialReference;return ez(t.spatialReference,r)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e);const r=()=>{this.destroyed||e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};e.when(r,r)}get background(){return UP(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get highlightOptions(){return kve(this)}set highlightOptions(e){Rve(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(xe("esri-2d-log-updating")){const r=this.allLayerViews.reduce((n,i)=>({...n,[`${i.layer.id}(${i.layer.type})`]:!i.destroyed&&!("layerViews"in i)&&i.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new ts({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return DLt(this,e,t)}async takeScreenshot(e){return QLt(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=mge(e)?fge(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,r,n){return this.inputManager&&this.viewEvents.on(e,t,r,n)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return UP(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return UP(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return ree.hasLayerViewModule(e)}importLayerView(e){return ree.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Pe.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),r=await this.hitTest(e),n=this.allLayerViews.toArray().filter(l=>l.clips.every(u=>Ave(this,u,e,t))).reverse(),i=new globalThis.Map(n.map(l=>[l.layer.uid,l])),s=[];let o=0,a=0;for(;o<r.results.length||a<n.length;){const l=r.results.at(o);if(l&&l.type!=="graphic"){++o;continue}const u=i.get((l?.layer??l?.graphic.layer)?.uid);if((!l||u)&&a<n.length&&n.at(a)!==u){const c=n.at(a);"fetchPopupFeaturesAtLocation"in c&&s.push({mapPoint:t,layerView:c}),++a}else l&&(s.push({graphic:l.graphic,layerView:u}),++o)}return{hits:s,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=aPt(this.type);if(xe("safari")&&xe("safari")<9&&(e=new ie("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:xe("safari")})),e!=null)throw Pe.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return s6t()}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:r,padding:n,size:i}=this;if(!e)return null;const s=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=s?.viewpoint,l=a?.targetGeometry?.extent??t,u=l?.center,c=a?.rotation??0,h=a?.scale||l&&RO(l,[i[0]-n.left-n.right,i[1]-n.top-n.bottom]),d=o.center??u,m=o.rotation??c,y=o.scale??h;return d&&y?new Hl({targetGeometry:d,scale:y,rotation:m}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new Rbe(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Dbe,this._magnifierView.magnifier=this.magnifier,this._gridView=new Fbe;const r=new Lbe({view:this});this._set("labelManager",r);const n=new FRt({view:this});this._set("animationManager",n);const i=new Pbe({view:this,animationManager:n});this._set("mapViewNavigation",i),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",o=>this.fatalError=o.error),Et(()=>this.stationary,o=>t.stationary=o,_a),Et(()=>this.background,o=>{t.backgroundColor=o?.color,this._magnifierView.backgroundColor=o?.color},_a),Et(()=>this.magnifier,o=>this._magnifierView.magnifier=o,_a),Et(()=>this.grid,o=>this._gridView.grid=o,_a),Et(()=>this.renderingOptions,o=>t.renderingOptions=o,_a),Et(()=>this.highlights.items.map(o=>({name:o.name,options:{fillColor:o.options.color,haloColor:o.options.haloColor,fillOpacity:o.options.fillOpacity,haloOpacity:o.options.haloOpacity,haloWidth:o.options.haloWidth,haloBlur:o.options.haloBlur}})),()=>{t.highlightGradient=Tve(t.highlightGradient,this.highlights.items)},_a),Et(()=>this.state.id,()=>t.state=this.state,_a)],"map-view"),this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(o=>o(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new O1e(Fm.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Obe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Nbe(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:r,size:n,stage:i}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:n,stage:i}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Bt.type="2d",p([f({readOnly:!0})],Bt.prototype,"animationManager",void 0),p([f({constructOnly:!0})],Bt.prototype,"deactivatedWebGLExtensions",void 0),p([f({constructOnly:!0})],Bt.prototype,"debugWebGLExtensions",void 0),p([f({readOnly:!0})],Bt.prototype,"featuresTilingScheme",void 0),p([f({readOnly:!0})],Bt.prototype,"fullOpacity",void 0),p([f()],Bt.prototype,"goToManager",void 0),p([f({readOnly:!0})],Bt.prototype,"graphicsTileStore",null),p([f()],Bt.prototype,"graphicsView",void 0),p([f()],Bt.prototype,"stateManager",void 0),p([f()],Bt.prototype,"constraintsInfo",null),p([f({readOnly:!0})],Bt.prototype,"state",null),p([f()],Bt.prototype,"initialExtentRequired",null),p([f()],Bt.prototype,"labelManager",void 0),p([f({readOnly:!0})],Bt.prototype,"mapViewNavigation",void 0),p([f({constructOnly:!0})],Bt.prototype,"renderCanvas",void 0),p([f()],Bt.prototype,"renderingOptions",void 0),p([f({constructOnly:!0})],Bt.prototype,"supersampleScreenshotsEnabled",void 0),p([f({readOnly:!0})],Bt.prototype,"supportsGround",void 0),p([f()],Bt.prototype,"defaultsFromMapSettings",null),p([f({readOnly:!0})],Bt.prototype,"typeSpecificPreconditionsReady",null),p([f()],Bt.prototype,"animation",null),p([f({type:kbe})],Bt.prototype,"background",null),p([f()],Bt.prototype,"center",null),p([f({type:C1e})],Bt.prototype,"constraints",null),p([f()],Bt.prototype,"extent",null),p([f()],Bt.prototype,"floors",void 0),p([f()],Bt.prototype,"grid",void 0),p([f({type:jm})],Bt.prototype,"highlightOptions",null),p([f({type:st.ofType(Xy)})],Bt.prototype,"highlights",void 0),p([f({readOnly:!0})],Bt.prototype,"inputManager",void 0),p([f()],Bt.prototype,"map",void 0),p([f()],Bt.prototype,"padding",null),p([f({readOnly:!0})],Bt.prototype,"rendering",null),p([f()],Bt.prototype,"resizeAlign",null),p([f({readOnly:!0})],Bt.prototype,"resolution",null),p([f()],Bt.prototype,"rotation",null),p([f()],Bt.prototype,"scale",null),p([f({constructOnly:!0})],Bt.prototype,"spatialReferenceLocked",void 0),p([f()],Bt.prototype,"stationary",null),p([f({readOnly:!0})],Bt.prototype,"tileInfo",null),p([f({type:$$,readOnly:!0})],Bt.prototype,"timeline",void 0),p([f({readOnly:!0})],Bt.prototype,"type",void 0),p([f({readOnly:!0})],Bt.prototype,"updating",null),p([f({readOnly:!0})],Bt.prototype,"view2dType",void 0),p([f()],Bt.prototype,"viewpoint",null),p([f({readOnly:!0})],Bt.prototype,"visibleArea",null),p([f()],Bt.prototype,"zoom",null),p([f({readOnly:!0})],Bt.prototype,"navigating",null),p([f(),ur(e=>e instanceof Mbe?e:yn(Cbe,e))],Bt.prototype,"ui",void 0),Bt=p([W("esri.views.View2D")],Bt);const o6t=Bt;let F4=class extends o6t{constructor(e){super(e),this.view2dType="map"}};p([f({readOnly:!0})],F4.prototype,"view2dType",void 0),F4=p([W("esri.views.MapView")],F4);const jbe=F4;class Yt{wkid;latestWkid;wkt;constructor(t,r){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=r)}isEqual(t){return!!(this.isWebMercator()&&t.isWebMercator()||this.wkid&&t.wkid&&this.wkid===t.wkid||this.wkt&&t.wkt&&this.wkt===t.wkt||this.latestWkid&&t.latestWkid&&this.latestWkid===t.latestWkid)}clone(){const t=new Yt("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new Yt(4326)}static fromConfig(t){if(t.wkt)return new Yt(t.wkt);if(t.wkid)return new Yt(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof Yt?t.clone():typeof t=="string"&&t.startsWith("EPSG:")?new Yt(parseInt(t.substring(5).trim())):new Yt(t):Yt.latLongSR()}static fromESRI(t){if(t.wkt)return new Yt(t.wkt);{const r=t.toJSON().latestWkid,n=new Yt(t.wkid);return r&&(n.latestWkid=r),n}}toESRI(){return new Ke(this.lean())}static fromGeoJSON(t){const r=Yt.parseGeoJsonCrs(t);return r.substring(0,5)==="EPSG:"?new Yt(parseInt(r.slice(5))):new Yt(r)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const r=/urn:ogc:def:crs:EPSG::(\d+)/,n=t.properties.name,i=n.match(r);if(i)return"EPSG:"+i[1];if(n.substring(0,7)!=="urn:ogc")return n}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class b1{sr;id;constructor(t,r){this.id=t?t.toString():"",this.sr=Yt.parseSR(r)}get type(){return or.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===or.NONE||this.type===or.UNKNOWN}geoJsonFactory(t,r){const n={type:t,coordinates:r};return this.sr&&(n.crs=this.sr.toGeoJSON()),n}}class n0 extends b1{constructor(){super("no_geometry")}get type(){return or.NONE}}let Io=class nS extends b1{rawArray;constructor(t,r,n,i){super(t,r.sr||n),i?this.rawArray=r.slice():this.rawArray=nS.parseXY(r)}get type(){return or.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let r;if(Array.isArray(t)&&t.length===2)r=t;else{if(t instanceof nS)return t.toArray();r=[t.x,t.y]}if(isNaN(r[0])||isNaN(r[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(r[0]),parseFloat(r[1])]}static fromESRI(t,r){return new nS(r,[t.x,t.y],Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new it({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new nS(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.POINT,this.toArray())}};class Ra extends b1{rawArray;constructor(t,r,n,i){super(t,r.sr||n),i?this.rawArray=Ra.arrayDeepCopy(r):r instanceof Ra?this.rawArray=r.toArray():this.rawArray=Ra.parsePointSet(r)}get pointArray(){return this.rawArray.map((t,r)=>new Io(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new Io(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=Io.parseXY(t)}get length(){return this.rawArray.length}toArray(){return Ra.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(r=>Io.parseXY(r))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(r=>r.slice())}}class $b extends Ra{constructor(t,r,n,i){super(t,r,n,i)}get type(){return or.MULTIPOINT}static fromESRI(t,r){return new $b(r,t.points,Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new n1({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new $b(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.MULTIPOINT,this.toArray())}}class _m extends Ra{constructor(t,r,n,i){if(super(t,r,n,i),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return or.LINESTRING}static fromESRI(t,r){return new _m(r,t.paths[0],Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new Ca({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new _m(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.LINESTRING,this.toArray())}}class Wu extends b1{rawArray;constructor(t,r,n,i){if(super(t,r.sr||n),i)this.rawArray=Wu.arrayDeepCopy(r);else if(r instanceof Wu)this.rawArray=r.toArray();else if(r instanceof Ra)this.rawArray=[r.toArray()];else if(Array.isArray(r)){if(r.length===0)throw new Error("no lines provided");this.rawArray=r.map(s=>Ra.parsePointSet(s))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,r)=>new _m(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new _m(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=Ra.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return or.MULTILINESTRING}toArray(){return Wu.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(r=>r.map(n=>n.slice()))}static fromESRI(t,r){return new Wu(r,t.paths,Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new Ca({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Wu(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.MULTILINESTRING,this.toArray())}}class pg extends Ra{constructor(t,r,n,i){if(super(t,r,n,i),pg.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return or.LINEARRING}updateAt(t,r){const n=this.length-1;r===0?super.updateAt(t,n):r===n&&super.updateAt(t,0),super.updateAt(t,r)}static closeRing(t){const r=t[0],n=t[t.length-1];(r[0]!==n[0]||r[1]!==n[1])&&t.push(r.slice())}static fromESRI(t,r){return new pg(r,t.rings[0],Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new ts({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new pg(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.POLYGON,[this.toArray()])}}class Fs extends b1{rawArray;constructor(t,r,n,i){super(t,r.sr||n),i?this.rawArray=Fs.arrayDeepCopy(r):this.rawArray=Fs.parsePolygon(r)}addLinearRings(t){t.forEach(r=>this.rawArray.push(r.toArray()))}get ringArray(){return this.rawArray.map((t,r)=>new pg(this.childIdGenerator(r),t,this.sr,!0))}get type(){return or.POLYGON}toArray(){return Fs.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let r=[];if(t instanceof Fs)return t.toArray();if(t instanceof Wu)r=t.toArray();else if(t instanceof Ra)r=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");r=t.map(n=>Ra.parsePointSet(n))}else throw new Error("invalid input format for parsePolygon");return r.forEach(n=>pg.closeRing(n)),r}static arrayDeepCopy(t){return t.map(r=>r.map(n=>n.slice()))}static fromESRI(t,r){return new Fs(r,t.rings,Yt.fromESRI(t.spatialReference),!0)}toESRI(){return new ts({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Fs(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.POLYGON,this.toArray())}}class qp extends b1{rawArray;constructor(t,r,n,i){super(t,r.sr||n),i?this.rawArray=qp.arrayDeepCopy(r):this.rawArray=qp.parseMultiPolygon(r)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,r)=>new Fs(this.childIdGenerator(r),t,this.sr,!0))}get type(){return or.MULTIPOLYGON}toArray(){return qp.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof qp)return t.toArray();if(t instanceof Fs)return[t.toArray()];if(t instanceof Wu||t instanceof Ra)return[Fs.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(r=>Fs.parsePolygon(r))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(r=>r.map(n=>n.map(i=>i.slice())))}static fromESRI(t,r){return new qp(r,[t.rings],Yt.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(r=>{r.forEach(n=>t.push(n))}),new ts({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new qp(r,t.coordinates,Yt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(ai.MULTIPOLYGON,this.toArray())}}class Tn extends b1{rawMin;rawMax;constructor(t,r,n,i){super(t,r.sr||i),this.rawMin=Io.parseXY(r),this.rawMax=Io.parseXY(n)}get type(){return or.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new Io(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return Tn.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new Tn(this.id,this.rawMin,this.rawMax,this.sr)}contains(t){return this.sr.isEqual(t.sr)?this.xmin<=t.x&&this.xmax>=t.x&&this.ymin<=t.y&&this.ymax>=t.y:(console.error("Extent.contains(point) must have point in same spatial reference as the extent."),!1)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new Fs(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,r,n,i,s,o){return new Tn(t,[r,n],[i,s],o)}static fromConfig(t,r){return new Tn(t,[r.xmin,r.ymin],[r.xmax,r.ymax],Yt.fromConfig(r.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,r){return Tn.fromParams(r,t.xmin,t.ymin,t.xmax,t.ymax,Yt.fromESRI(t.spatialReference))}toESRI(){return new jt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,r){return Tn.fromESRI(jt.fromJSON(t),r)}static fromGeoJSON(t,r){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const n=t.coordinates[0].slice(),i=n.slice();return[1,2,3].forEach(s=>{[0,1].forEach(o=>{const a=t.coordinates[s];n[o]>a[o]&&(n[o]=a[o]),i[o]<a[o]&&(i[o]=a[o])})}),new Tn(r,n,i,Yt.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(ai.POLYGON,this.toPolygonArray())}}class _d{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const r=t.length;if(r<3||r>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map((n,i)=>i===3?n:parseInt(n)),r===3&&this.c.push(1)}else if(typeof t=="string"){const r=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(n=>{const i=r.substring(n,n+2);return _d.hexToInt(i)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((r,n)=>{r<0&&(console.error("Negative value passed to colour"),this.c[n]=0),r>255&&(console.error("Rotund value passed to colour"),this.c[n]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(r=>_d.intToHex(r)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new Ze(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const r=t.toString(16);return r.length===1?`0${r}`:r}}class Hp{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let r;const n=t.length;if(n===0)return;const i=t.substring(n-2);return i==="px"?r=parseFloat(t.substring(0,n-2))*1.333333:i==="pt"?r=parseFloat(t.substring(0,n-2)):r=parseFloat(t),r}else return t}}class ed extends Hp{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:Hc.CIRCLE},super(),this._style=t.style||Hc.CIRCLE,t.style===Hc.ICON){const r=t;this._icon=r.icon||"",this._height=Hp.convToPoints(r.height)||16.5,this._width=Hp.convToPoints(r.width)||16.5,this._size=0,this._colour=new _d,this._outline=new wh,this._path=""}else{const r=t;this._size=Hp.convToPoints(r.size)||12,this._colour=new _d(r.colour??"#ffffff40"),this._outline=new wh(r.outline),this._path=this._style===Hc.PATH&&r.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=Hp.convToPoints(t.xOffset)||0,this._yOffset=Hp.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===Hc.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===Hc.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===Hc.ICON?ed.isImageUrl(this.icon)?(t=new vh,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new ra,t.color=new Ze(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new ra,t.color=new Ze(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const r={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const n=r;n.style=t.style,n.colour=t.color.toRgba(),n.size=t.size,n.path=t.path,n.outline=wh.fromESRI(t.outline).toOptions()}else{const n=r;n.style=Hc.ICON,n.width=t.width,n.height=t.height,n.icon=t.url}return new ed(r)}static fromArcServer(t){return ed.fromESRI(jR(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class wh extends Hp{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||ga.SOLID;const r=Hp.convToPoints(t.width);this._width=typeof r>"u"||r<0?.75:r,this._colour=new _d(t.colour),this._miter=t.miter??2,this._cap=t.cap||sse.ROUND,this._join=t.join||ise.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new No;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const r={width:t.width,colour:t.color.toRgba(),style:t.style};return new wh(r)}static fromArcServer(t){return wh.fromESRI(jR(t))}}class Cw extends Hp{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new _d(t.fill.colour),this._fillStyle=t.fill.style||ose.SOLID,this._outlineStyle=new wh(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),r=new Ze(this.fillColour.rgba),n=new yc;return n.style=this.fillStyleType,n.color=r,n.outline=t,n}static fromESRI(t){const r={fill:{colour:t.color.toRgba(),style:t.style},outline:wh.fromESRI(t.outline).toOptions()};return new Cw(r)}static fromArcServer(t){return Cw.fromESRI(jR(t))}}class a6t{Extent=Tn;Graphic=Kl;LineString=_m;LineStyle=wh;LinearRing=pg;MultiLineString=Wu;MultiPoint=$b;MultiPolygon=qp;Point=Io;PointStyle=ed;Polygon=Fs;PolygonStyle=Cw;SpatialReference=Yt;esriMapClickToRamp(t,r){return{mapPoint:Io.fromESRI(t.mapPoint,r),screenX:t.x,screenY:t.y,button:t.button,input:t.native.pointerType,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,r){switch(t.type){case"point":return Io.fromESRI(t,r);case"polyline":{const n=t;return n.paths.length===1?_m.fromESRI(n,r):Wu.fromESRI(n,r)}case"polygon":return Fs.fromESRI(t,r);case"extent":return Tn.fromESRI(t,r);case"multipoint":return $b.fromESRI(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,r){switch(t.type){case ai.POINT:return Io.fromGeoJSON(t,r);case ai.LINESTRING:return _m.fromGeoJSON(t,r);case ai.POLYGON:return Fs.fromGeoJSON(t,r);case ai.MULTIPOINT:return $b.fromGeoJSON(t,r);case ai.MULTILINESTRING:return Wu.fromGeoJSON(t,r);case ai.MULTIPOLYGON:return qp.fromGeoJSON(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){const r={},n={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:r};return Object.keys(t.attributes).forEach(i=>n.properties[i]=t.attributes[i]),n}graphicGeoJsonToRamp(t,r){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const n=this.geomGeoJsonToRamp(t.geometry,r),i={};return Object.keys(t.properties.forEach(s=>i[s]=t.properties[s])),new Kl(n,"",i)}graphicRampToEsri(t){const r={attributes:{},id:t.id};return r.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(n=>r.attributes[n]=t.attributes[n]),t.style&&(r.symbol=this.styleRampToEsri(t.style)),new dl(r)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return ed.fromESRI(t);case"simple-line":return wh.fromESRI(t);case"simple-fill":return Cw.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new ed}}serverGeomTypeToRampGeomType(t){if(!t)return or.NONE;switch(t){case"esriGeometryPolygon":return or.POLYGON;case"esriGeometryPolyline":return or.LINESTRING;case"esriGeometryPoint":return or.POINT;case"esriGeometryMultipoint":return or.MULTIPOINT;case"esriGeometryEnvelope":return or.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),or.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return or.NONE;switch(t){case"polygon":return or.POLYGON;case"polyline":return or.LINESTRING;case"point":return or.POINT;case"multipoint":return or.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),or.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(t){switch(t){case ai.POINT:return"point";case ai.LINESTRING:case ai.MULTILINESTRING:return"polyline";case ai.POLYGON:case ai.MULTIPOLYGON:return"polygon";case ai.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${t}`)}}isImageUrl(t){return ed.isImageUrl(t)}}class RC{layerIdx;name;children;uid;isRoot;constructor(t,r,n="",i=!0){this.layerIdx=t,this.name=n,this.isRoot=i,this.children=[],this.uid=r}findChildByUid(t){if(this.uid===t)return this;{let r;return this.children.some(n=>r=n.findChildByUid(t)),r}}findChildByIdx(t){if(this.layerIdx===t)return this;{let r;return this.children.some(n=>r=n.findChildByIdx(t)),r}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class Ube{minScale;maxScale;constructor(t=0,r=0){this.minScale=t,this.maxScale=r}isOffScale(t){const r={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(r.offScale=!0,r.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(r.offScale=!0,r.zoomIn=!0),r}}class Bbe{sql;cache;extent;constructor(t="",r=""){this.sql={[co.PERMANENT]:t,[co.INITIAL]:r},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const r=this.sql,n=Object.keys(r).filter(i=>r[i]);return t.length===0?n:n.filter(i=>t.indexOf(i)===-1)}isActive(){return this.sqlActiveFilters([co.PERMANENT]).length>0}getCombinedSql(t=[]){const r=this.sqlActiveFilters(t),n=r.length;return n===0?"":n===1?this.sql[r[0]]:r.map(i=>`(${this.sql[i]})`).join(" AND ")}setSql(t,r){t===co.PERMANENT?console.error("Attempted to overwrite a permanent filter. Not allowed."):(this.sql[t]=r,this.clearCacheSet(t))}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(co.EXTENT))}getCacheKey(t,r){return`_cache$${t.sort().join("$")}${r?"$"+co.EXTENT:""}$`}getCache(t,r){const n=this.getCacheKey(t,r);return this.cache[n]}setCache(t,r,n){const i=this.getCacheKey(r,n);this.cache[i]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(r=>t[r])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(r=>{r.indexOf(`$${t}$`)>-1&&delete this.cache[r]})}clearAll(){this.sql={[co.PERMANENT]:this.sql[co.PERMANENT]},this.extent=void 0,this.clearAllCaches()}}class YE{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,r,n=void 0,i=void 0){this.id=t,this.sr=r.sr.clone(),this._defaultExtent=r.clone(),this._fullExtent=n?.clone(),this._maximumExtent=i?.clone(),n&&!n.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${n.sr}`),i&&!i.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${i.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new YE(t.id,Tn.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?Tn.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?Tn.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new YE(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class bi{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,r)=>{this.resolveMe=n=>{t(n)},this.rejectMe=r})}}var iS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Vbe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var BP,ete;function l6t(){if(ete)return BP;ete=1;var e=function(S){return t(S)&&!r(S)};function t(S){return!!S&&typeof S=="object"}function r(S){var E=Object.prototype.toString.call(S);return E==="[object RegExp]"||E==="[object Date]"||s(S)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103;function s(S){return S.$$typeof===i}function o(S){return Array.isArray(S)?[]:{}}function a(S,E){return E.clone!==!1&&E.isMergeableObject(S)?g(o(S),S,E):S}function l(S,E,x){return S.concat(E).map(function(w){return a(w,x)})}function u(S,E){if(!E.customMerge)return g;var x=E.customMerge(S);return typeof x=="function"?x:g}function c(S){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(S).filter(function(E){return Object.propertyIsEnumerable.call(S,E)}):[]}function h(S){return Object.keys(S).concat(c(S))}function d(S,E){try{return E in S}catch{return!1}}function m(S,E){return d(S,E)&&!(Object.hasOwnProperty.call(S,E)&&Object.propertyIsEnumerable.call(S,E))}function y(S,E,x){var w={};return x.isMergeableObject(S)&&h(S).forEach(function(T){w[T]=a(S[T],x)}),h(E).forEach(function(T){m(S,T)||(d(S,T)&&x.isMergeableObject(E[T])?w[T]=u(T,x)(S[T],E[T],x):w[T]=a(E[T],x))}),w}function g(S,E,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=a;var w=Array.isArray(E),T=Array.isArray(S),I=w===T;return I?w?x.arrayMerge(S,E,x):y(S,E,x):a(E,x)}g.all=function(S,E){if(!Array.isArray(S))throw new Error("first argument should be an array");return S.reduce(function(x,w){return g(x,w,E)},{})};var b=g;return BP=b,BP}var u6t=l6t();const X$=D_(u6t);class c6t{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r==="x"?n:n&3|8).toString(16)})}convertImageToCanvas(t,r,n=!0){const i=r??document.createElement("canvas"),s=document.createElement("img");n&&(s.crossOrigin="anonymous");const o=new Promise((a,l)=>{s.addEventListener("load",()=>{i.width=s.width,i.height=s.height,i.getContext("2d")?.drawImage(s,0,0),a(i)}),s.addEventListener("error",u=>l(u))});return s.src=t,o}async convertImagetoDataURL(t,r="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(n=>n.toDataURL(r)).catch(n=>(console.error("Failed to load crossorigin image",t,n),t))}parseUrlIndex(t){const r={rootUrl:t,index:0},n=/\/(\d+)\/?$/,i=t.match(n);if(i){const s=i[1];r.index=isNaN(parseInt(s))?void 0:parseInt(s),r.rootUrl=t.substr(0,t.length-i[0].length)}else console.warn("Cannot extract layer index from url "+t);return r}controlAvailable(t,r){return r?.disabledControls?.includes(t)?!1:r?.controls?r?.controls?.includes(t):!0}}class XE{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((r,n)=>{const[i,s]=n.split("=");return r[i]=s,r},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const r=X$.all([{},this.queryMap,t]);return`${this.base}${Object.entries(r).filter(([,n])=>n!==void 0).map(([n,i],s)=>`${s===0?"?":""}${n}=${i}`).join("&")}`}}var Yj={exports:{}},h6t=Yj.exports,tte;function Gbe(){return tte||(tte=1,function(e,t){(function(r,n){e.exports=n(),typeof window=="object"&&(r.Terraformer=n())})(h6t,function(){var r={},n=6378137,i=57.29577951308232,s=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(L){return Object.prototype.toString.call(L)==="[object Array]"}function u(){var L=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,L)}function c(L,G){for(var j in G)G.hasOwnProperty(j)&&(L[j]=G[j]);return L}function h(L){if(L.type)switch(L.type){case"Point":return[L.coordinates[0],L.coordinates[1],L.coordinates[0],L.coordinates[1]];case"MultiPoint":return y(L.coordinates);case"LineString":return y(L.coordinates);case"MultiLineString":return d(L.coordinates);case"Polygon":return d(L.coordinates);case"MultiPolygon":return m(L.coordinates);case"Feature":return L.geometry?h(L.geometry):null;case"FeatureCollection":return g(L);case"GeometryCollection":return b(L);default:throw new Error("Unknown type: "+L.type)}return null}function d(L){for(var G=null,j=null,V=null,$=null,J=0;J<L.length;J++)for(var X=L[J],te=0;te<X.length;te++){var le=X[te],ve=le[0],ke=le[1];(G===null||ve<G)&&(G=ve),(j===null||ve>j)&&(j=ve),(V===null||ke<V)&&(V=ke),($===null||ke>$)&&($=ke)}return[G,V,j,$]}function m(L){for(var G=null,j=null,V=null,$=null,J=0;J<L.length;J++)for(var X=L[J],te=0;te<X.length;te++)for(var le=X[te],ve=0;ve<le.length;ve++){var ke=le[ve],je=ke[0],yt=ke[1];(G===null||je<G)&&(G=je),(j===null||je>j)&&(j=je),(V===null||yt<V)&&(V=yt),($===null||yt>$)&&($=yt)}return[G,V,j,$]}function y(L){for(var G=null,j=null,V=null,$=null,J=0;J<L.length;J++){var X=L[J],te=X[0],le=X[1];(G===null||te<G)&&(G=te),(j===null||te>j)&&(j=te),(V===null||le<V)&&(V=le),($===null||le>$)&&($=le)}return[G,V,j,$]}function g(L){for(var G=[],j,V=L.features.length-1;V>=0;V--)j=h(L.features[V].geometry),G.push([j[0],j[1]]),G.push([j[2],j[3]]);return y(G)}function b(L){for(var G=[],j,V=L.geometries.length-1;V>=0;V--)j=h(L.geometries[V]),G.push([j[0],j[1]]),G.push([j[2],j[3]]);return y(G)}function S(L){var G=h(L);return{x:G[0],y:G[1],w:Math.abs(G[0]-G[2]),h:Math.abs(G[1]-G[3])}}function E(L){return L*i}function x(L){return L*s}function w(L,G){for(var j=0;j<L.length;j++)typeof L[j][0]=="number"&&(L[j]=G(L[j])),typeof L[j]=="object"&&(L[j]=w(L[j],G));return L}function T(L){var G=L[0],j=L[1];return[E(G/n)-Math.floor((E(G/n)+180)/360)*360,E(Math.PI/2-2*Math.atan(Math.exp(-1*j/n)))]}function I(L){var G=L[0],j=Math.max(Math.min(L[1],89.99999),-89.99999);return[x(G)*n,n/2*Math.log((1+Math.sin(x(j)))/(1-Math.sin(x(j))))]}function M(L,G,j){if(L.type==="Point")L.coordinates=G(L.coordinates);else if(L.type==="Feature")L.geometry=M(L.geometry,G,!0);else if(L.type==="FeatureCollection")for(var V=0;V<L.features.length;V++)L.features[V]=M(L.features[V],G,!0);else if(L.type==="GeometryCollection")for(var $=0;$<L.geometries.length;$++)L.geometries[$]=M(L.geometries[$],G,!0);else L.coordinates=w(L.coordinates,G);return j||G===I&&(L.crs=o),G===T&&delete L.crs,L}function C(L){return M(L,I)}function k(L){return M(L,T)}function N(L,G){return L<G?-1:L>G?1:0}function F(L,G){return L[0]>G[0]?-1:L[0]<G[0]?1:L[1]>G[1]?-1:L[1]<G[1]?1:0}function P(L,G,j){return N((G[0]-L[0])*(j[1]-L[1])-(j[0]-L[0])*(G[1]-L[1]),0)}function B(L,G){var j=G[0]-L[0],V=G[1]-L[1];return j*j+V*V}function O(L,G){var j=G;for(var V in L){var $=P(G,j,L[V]);($===-1||$===0&&B(G,L[V])>B(G,j))&&(j=L[V])}return j}function v(L){if(L.length===0)return[];if(L.length===1)return L;for(var G=[L.sort(F)[0]],j=0;j<G.length;j++){var V=O(L,G[j]);V!==G[0]&&G.push(V)}return G}function A(L){for(var G,j=0;j<L.length-3;j++){var V=L[j],$=L[j+1],J=L[j+2],X=[$[0]-V[0],$[1]-V[1]],te=J[0]*X[1]-J[1]*X[0]+X[0]*V[1]-X[1]*V[0];if(j===0)te<0?G=!0:G=!1;else if(G&&te>0||!G&&te<0)return!1}return!0}function R(L,G){for(var j=!1,V=-1,$=L.length,J=$-1;++V<$;J=V)(L[V][1]<=G[1]&&G[1]<L[J][1]||L[J][1]<=G[1]&&G[1]<L[V][1])&&G[0]<(L[J][0]-L[V][0])*(G[1]-L[V][1])/(L[J][1]-L[V][1])+L[V][0]&&(j=!j);return j}function U(L,G){if(L&&L.length){if(L.length===1)return R(L[0],G);if(R(L[0],G)){for(var j=1;j<L.length;j++)if(R(L[j],G))return!1;return!0}else return!1}else return!1}function q(L,G,j,V){var $=(V[0]-j[0])*(L[1]-j[1])-(V[1]-j[1])*(L[0]-j[0]),J=(G[0]-L[0])*(L[1]-j[1])-(G[1]-L[1])*(L[0]-j[0]),X=(V[1]-j[1])*(G[0]-L[0])-(V[0]-j[0])*(G[1]-L[1]);if(X!==0){var te=$/X,le=J/X;if(0<=te&&te<=1&&0<=le&&le<=1)return!0}return!1}function Q(L){return!isNaN(parseFloat(L))&&isFinite(L)}function ee(L,G){if(Q(L[0][0])){if(Q(G[0][0])){for(var j=0;j<L.length-1;j++)for(var V=0;V<G.length-1;V++)if(q(L[j],L[j+1],G[V],G[V+1]))return!0}else for(var $=0;$<G.length;$++)if(ee(L,G[$]))return!0}else for(var J=0;J<L.length;J++)if(ee(L[J],G))return!0;return!1}function Y(L){for(var G=[],j=0;j<L.length;j++){var V=L[j].slice();ue(V[0],V[V.length-1])===!1&&V.push(V[0]),G.push(V)}return G}function ue(L,G){for(var j=0;j<L.length;j++)if(L[j]!==G[j])return!1;return!0}function de(L,G){if(L.length!==G.length)return!1;for(var j=L.slice().sort(F),V=G.slice().sort(F),$=0;$<j.length;$++){if(j[$].length!==V[$].length)return!1;for(var J=0;J<j.length;J++)if(j[$][J]!==V[$][J])return!1}return!0}var ce=["length"];function me(L){if(L)switch(L.type){case"Point":return new Se(L);case"MultiPoint":return new Oe(L);case"LineString":return new ye(L);case"MultiLineString":return new Fe(L);case"Polygon":return new ze(L);case"MultiPolygon":return new dt(L);case"Feature":return new re(L);case"FeatureCollection":return new D(L);case"GeometryCollection":return new K(L);default:throw new Error("Unknown type: "+L.type)}}me.prototype.toMercator=function(){return C(this)},me.prototype.toGeographic=function(){return k(this)},me.prototype.envelope=function(){return S(this)},me.prototype.bbox=function(){return h(this)},me.prototype.convexHull=function(){var L=[],G,j;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)L=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(G=0;G<this.coordinates.length;G++)L=L.concat(this.coordinates[G]);if(L.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(G=0;G<this.coordinates.length;G++)for(j=0;j<this.coordinates[G].length;j++)L=L.concat(this.coordinates[G][j]);if(L.length<3)return null}else return null;else if(this.type==="Feature"){var V=new me(this.geometry);return V.convexHull()}return new ze({type:"Polygon",coordinates:Y([v(L)])})},me.prototype.toJSON=function(){var L={};for(var G in this)this.hasOwnProperty(G)&&ce.indexOf(G)===-1&&(L[G]=this[G]);return L.bbox=h(this),L},me.prototype.contains=function(L){return new me(L).within(this)},me.prototype.within=function(L){var G,j,V,$;if(L.type==="Feature"&&(L=L.geometry),L.type==="Point"&&this.type==="Point")return ue(this.coordinates,L.coordinates);if(L.type==="MultiLineString"&&this.type==="Point")for(j=0;j<L.coordinates.length;j++){var J={type:"LineString",coordinates:L.coordinates[j]};if(this.within(J))return!0}if((L.type==="LineString"||L.type==="MultiPoint")&&this.type==="Point")for(j=0;j<L.coordinates.length;j++){if(this.coordinates.length!==L.coordinates[j].length)return!1;if(ue(this.coordinates,L.coordinates[j]))return!0}if(L.type==="Polygon")if(this.type==="Polygon"){if(L.coordinates.length===this.coordinates.length){for(j=0;j<this.coordinates.length;j++)if(de(this.coordinates[j],L.coordinates[j]))return!0}return this.coordinates.length&&U(L.coordinates,this.coordinates[0][0])?!ee(Y(this.coordinates),Y(L.coordinates)):!1}else{if(this.type==="Point")return U(L.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(j=0;j<this.coordinates.length;j++)if(U(L.coordinates,this.coordinates[j])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(j=0;j<this.coordinates.length;j++){var X=new ye(this.coordinates[j]);if(X.within(L)===!1)return $++,!1}return!0}else if(this.type==="MultiPolygon"){for(j=0;j<this.coordinates.length;j++){var te=new me({type:"Polygon",coordinates:this.coordinates[j]});if(te.within(L)===!1)return!1}return!0}}if(L.type==="MultiPolygon"){if(this.type==="Point"){if(L.coordinates.length){for(j=0;j<L.coordinates.length;j++)if(G=L.coordinates[j],U(G,this.coordinates)&&ee([this.coordinates],L.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(j=0;j<this.coordinates.length;j++)if(L.coordinates[j].length===this.coordinates.length){for(V=0;V<this.coordinates.length;V++)if(de(this.coordinates[V],L.coordinates[j][V]))return!0}if(ee(this.coordinates,L.coordinates)===!1&&L.coordinates.length){for(j=0;j<L.coordinates.length;j++)G=L.coordinates[j],U(G,this.coordinates[0][0])===!1?$=!1:$=!0;return $}}else if(this.type==="LineString"||this.type==="MultiPoint")for(j=0;j<L.coordinates.length;j++){var le={type:"Polygon",coordinates:L.coordinates[j]};return!!this.within(le)}else if(this.type==="MultiLineString"){for(j=0;j<this.coordinates.length;j++){var ve=new ye(this.coordinates[j]);if(ve.within(L)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(j=0;j<L.coordinates.length;j++){var ke={type:"Polygon",coordinates:L.coordinates[j]};if(this.within(ke)===!1)return!1}return!0}}return!1},me.prototype.intersects=function(L){L.type==="Feature"&&(L=L.geometry);var G=new me(L);if(this.within(L)||G.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&L.type!=="Point"&&L.type!=="MultiPoint")return ee(this.coordinates,L.coordinates);if(this.type==="Feature"){var j=new me(this.geometry);return j.intersects(L)}return u("Type "+this.type+" to "+L.type+" intersection is not supported by intersects"),!1};function Se(L){var G=Array.prototype.slice.call(arguments);if(L&&L.type==="Point"&&L.coordinates)c(this,L);else if(L&&l(L))this.coordinates=L;else if(G.length>=2)this.coordinates=G;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}Se.prototype=new me,Se.prototype.constructor=Se;function Oe(L){if(L&&L.type==="MultiPoint"&&L.coordinates)c(this,L);else if(l(L))this.coordinates=L;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}Oe.prototype=new me,Oe.prototype.constructor=Oe,Oe.prototype.forEach=function(L){for(var G=0;G<this.coordinates.length;G++)L.apply(this,[this.coordinates[G],G,this.coordinates]);return this},Oe.prototype.addPoint=function(L){return this.coordinates.push(L),this},Oe.prototype.insertPoint=function(L,G){return this.coordinates.splice(G,0,L),this},Oe.prototype.removePoint=function(L){return typeof L=="number"?this.coordinates.splice(L,1):this.coordinates.splice(this.coordinates.indexOf(L),1),this},Oe.prototype.get=function(L){return new Se(this.coordinates[L])};function ye(L){if(L&&L.type==="LineString"&&L.coordinates)c(this,L);else if(l(L))this.coordinates=L;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}ye.prototype=new me,ye.prototype.constructor=ye,ye.prototype.addVertex=function(L){return this.coordinates.push(L),this},ye.prototype.insertVertex=function(L,G){return this.coordinates.splice(G,0,L),this},ye.prototype.removeVertex=function(L){return this.coordinates.splice(L,1),this};function Fe(L){if(L&&L.type==="MultiLineString"&&L.coordinates)c(this,L);else if(l(L))this.coordinates=L;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}Fe.prototype=new me,Fe.prototype.constructor=Fe,Fe.prototype.forEach=function(L){for(var G=0;G<this.coordinates.length;G++)L.apply(this,[this.coordinates[G],G,this.coordinates])},Fe.prototype.get=function(L){return new ye(this.coordinates[L])};function ze(L){if(L&&L.type==="Polygon"&&L.coordinates)c(this,L);else if(l(L))this.coordinates=L;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}ze.prototype=new me,ze.prototype.constructor=ze,ze.prototype.addVertex=function(L){return this.insertVertex(L,this.coordinates[0].length-1),this},ze.prototype.insertVertex=function(L,G){return this.coordinates[0].splice(G,0,L),this},ze.prototype.removeVertex=function(L){return this.coordinates[0].splice(L,1),this},ze.prototype.close=function(){this.coordinates=Y(this.coordinates)},ze.prototype.hasHoles=function(){return this.coordinates.length>1},ze.prototype.holes=function(){var L=[];if(this.hasHoles())for(var G=1;G<this.coordinates.length;G++)L.push(new ze([this.coordinates[G]]));return L};function dt(L){if(L&&L.type==="MultiPolygon"&&L.coordinates)c(this,L);else if(l(L))this.coordinates=L;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}dt.prototype=new me,dt.prototype.constructor=dt,dt.prototype.forEach=function(L){for(var G=0;G<this.coordinates.length;G++)L.apply(this,[this.coordinates[G],G,this.coordinates])},dt.prototype.get=function(L){return new ze(this.coordinates[L])},dt.prototype.close=function(){var L=[];return this.forEach(function(G){L.push(Y(G))}),this.coordinates=L,this};function re(L){if(L&&L.type==="Feature")c(this,L);else if(L&&L.type&&L.coordinates)this.geometry=L;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}re.prototype=new me,re.prototype.constructor=re;function D(L){if(L&&L.type==="FeatureCollection"&&L.features)c(this,L);else if(l(L))this.features=L;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}D.prototype=new me,D.prototype.constructor=D,D.prototype.forEach=function(L){for(var G=0;G<this.features.length;G++)L.apply(this,[this.features[G],G,this.features])},D.prototype.get=function(L){var G;return this.forEach(function(j){j.id===L&&(G=j)}),new re(G)};function K(L){if(L&&L.type==="GeometryCollection"&&L.geometries)c(this,L);else if(l(L))this.geometries=L;else if(L.coordinates&&L.type)this.type="GeometryCollection",this.geometries=[L];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}K.prototype=new me,K.prototype.constructor=K,K.prototype.forEach=function(L){for(var G=0;G<this.geometries.length;G++)L.apply(this,[this.geometries[G],G,this.geometries])},K.prototype.get=function(L){return new me(this.geometries[L])};function H(L,G,j){for(var V=I(L),$=j||64,J={type:"Polygon",coordinates:[[]]},X=1;X<=$;X++){var te=X*(360/$)*Math.PI/180;J.coordinates[0].push([V[0]+G*Math.cos(te),V[1]+G*Math.sin(te)])}return J.coordinates=Y(J.coordinates),k(J)}function z(L,G,j){var V=j||64,$=G||250;if(!L||L.length<2||!$||!V)throw new Error("Terraformer: missing parameter for Terraformer.Circle");c(this,new re({type:"Feature",geometry:H(L,$,V),properties:{radius:$,center:L,steps:V}}))}return z.prototype=new me,z.prototype.constructor=z,z.prototype.recalculate=function(){return this.geometry=H(this.properties.center,this.properties.radius,this.properties.steps),this},z.prototype.center=function(L){return L&&(this.properties.center=L,this.recalculate()),this.properties.center},z.prototype.radius=function(L){return L&&(this.properties.radius=L,this.recalculate()),this.properties.radius},z.prototype.steps=function(L){return L&&(this.properties.steps=L,this.recalculate()),this.properties.steps},z.prototype.toJSON=function(){var L=me.prototype.toJSON.call(this);return L},r.Primitive=me,r.Point=Se,r.MultiPoint=Oe,r.LineString=ye,r.MultiLineString=Fe,r.Polygon=ze,r.MultiPolygon=dt,r.Feature=re,r.FeatureCollection=D,r.GeometryCollection=K,r.Circle=z,r.toMercator=C,r.toGeographic=k,r.Tools={},r.Tools.positionToMercator=I,r.Tools.positionToGeographic=T,r.Tools.applyConverter=M,r.Tools.toMercator=C,r.Tools.toGeographic=k,r.Tools.createCircle=H,r.Tools.calculateBounds=h,r.Tools.calculateEnvelope=S,r.Tools.coordinatesContainPoint=R,r.Tools.polygonContainsPoint=U,r.Tools.arraysIntersectArrays=ee,r.Tools.coordinatesContainPoint=R,r.Tools.coordinatesEqual=de,r.Tools.convexHull=v,r.Tools.isConvex=A,r.MercatorCRS=o,r.GeographicCRS=a,r})}(Yj)),Yj.exports}var p6t=Gbe();function d6t(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var qg=1,Hg=2,qb=3,f6t=4,Xj=5,rte=6378137,m6t=6356752314e-3,nte=.0066943799901413165,qS=484813681109536e-20,$e=Math.PI/2,y6t=.16666666666666666,g6t=.04722222222222222,v6t=.022156084656084655,at=1e-10,Ls=.017453292519943295,hh=57.29577951308232,jr=Math.PI/4,QE=Math.PI*2,pi=3.14159265359,ya={};ya.greenwich=0,ya.lisbon=-9.131906111111,ya.paris=2.337229166667,ya.bogota=-74.080916666667,ya.madrid=-3.687938888889,ya.rome=12.452333333333,ya.bern=7.439583333333,ya.jakarta=106.807719444444,ya.ferro=-17.666666666667,ya.brussels=4.367975,ya.stockholm=18.058277777778,ya.athens=23.7163375,ya.oslo=10.722916666667;const b6t={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ite=/[\s_\-\/\(\)]/g;function Um(e,t){if(e[t])return e[t];for(var r=Object.keys(e),n=t.toLowerCase().replace(ite,""),i=-1,s,o;++i<r.length;)if(s=r[i],o=s.toLowerCase().replace(ite,""),o===n)return e[s]}function Qj(e){var t={},r=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),n,i,s,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Ls},lat_1:function(a){t.lat1=a*Ls},lat_2:function(a){t.lat2=a*Ls},lat_ts:function(a){t.lat_ts=a*Ls},lon_0:function(a){t.long0=a*Ls},lon_1:function(a){t.long1=a*Ls},lon_2:function(a){t.long2=a*Ls},alpha:function(a){t.alpha=parseFloat(a)*Ls},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*Ls},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=Um(b6t,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Ls},pm:function(a){var l=Um(ya,a);t.from_greenwich=(l||parseFloat(a))*Ls},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(n in r)i=r[n],n in o?(s=o[n],typeof s=="function"?s(i):t[s]=i):t[n]=i;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var sS=1,ste=2,ote=3,yA=4,ate=5,VP=-1,w6t=/\s/,_6t=/[A-Za-z]/,x6t=/[A-Za-z84_]/,gA=/[,\]]/,lte=/[\d\.E\-\+]/;function Ap(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=sS}Ap.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==yA)for(;w6t.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case sS:return this.neutral(e);case ste:return this.keyword(e);case yA:return this.quoted(e);case ate:return this.afterquote(e);case ote:return this.number(e);case VP:return}},Ap.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=yA;return}if(gA.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)},Ap.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=sS;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=sS,this.currentObject=this.stack.pop(),this.currentObject||(this.state=VP);return}},Ap.prototype.number=function(e){if(lte.test(e)){this.word+=e;return}if(gA.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)},Ap.prototype.quoted=function(e){if(e==='"'){this.state=ate;return}this.word+=e},Ap.prototype.keyword=function(e){if(x6t.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=sS;return}if(gA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)},Ap.prototype.neutral=function(e){if(_6t.test(e)){this.word=e,this.state=ste;return}if(e==='"'){this.word="",this.state=yA;return}if(lte.test(e)){this.word=e,this.state=ote;return}if(gA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)},Ap.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===VP)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function S6t(e){var t=new Ap(e);return t.output()}function ute(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,i=r.reduce(function(s,o){return ab(o,s),s},n);t&&(e[t]=i)}function ab(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},ab(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var n;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&ab(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&ab(e[3],t[r]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],ute(t,r,e);return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return ab(e,t[r]);return ute(t,r,e)}}var E6t=.017453292519943295;function T6t(e,t){var r=t[0],n=t[1];!(r in e)&&n in e&&(e[r]=e[n],t.length===3&&(e[r]=t[2](e[r])))}function Ac(e){return e*E6t}function I6t(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",r=0,n=e.AXIS.length;r<n;++r){var i=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];i[0].indexOf("north")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="north"?t+="n":i[0].indexOf("south")!==-1||(i[0]==="y"||i[0]==="lat")&&i[1]==="south"?t+="s":i[0].indexOf("east")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="east"?t+="e":(i[0].indexOf("west")!==-1||(i[0]==="x"||i[0]==="lon")&&i[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;e.type==="GEOGCS"&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var c=e.to_meter||1;return u*c}var a=function(u){return T6t(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ac],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ac],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ac],["lat0","latitude_of_origin",Ac],["lat0","standard_parallel_1",Ac],["lat1","standard_parallel_1",Ac],["lat2","standard_parallel_2",Ac],["azimuth","Azimuth"],["alpha","azimuth",Ac],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Ac(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Ac(e.lat0>0?90:-90))}function zbe(e){var t=S6t(e),r=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",r]);var i={};return ab(t,i),I6t(i),i}function Go(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?Go[e]=Qj(arguments[1]):Go[e]=zbe(arguments[1]):Go[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?Go.apply(t,n):Go(n)});if(typeof e=="string"){if(e in Go)return Go[e]}else"EPSG"in e?Go["EPSG:"+e.EPSG]=e:"ESRI"in e?Go["ESRI:"+e.ESRI]=e:"IAU2000"in e?Go["IAU2000:"+e.IAU2000]=e:console.log(e);return}}d6t(Go);function A6t(e){return typeof e=="string"}function M6t(e){return e in Go}var C6t=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function k6t(e){return C6t.some(function(t){return e.indexOf(t)>-1})}var R6t=["3857","900913","3785","102113"];function O6t(e){var t=Um(e,"authority");if(t){var r=Um(t,"epsg");return r&&R6t.indexOf(r)>-1}}function N6t(e){var t=Um(e,"extension");if(t)return Um(t,"proj4")}function L6t(e){return e[0]==="+"}function P6t(e){if(A6t(e)){if(M6t(e))return Go[e];if(k6t(e)){var t=zbe(e);if(O6t(t))return Go["EPSG:3857"];var r=N6t(t);return r?Qj(r):t}if(L6t(e))return Qj(e)}else return e}function cte(e,t){e=e||{};var r,n;if(!t)return e;for(n in t)r=t[n],r!==void 0&&(e[n]=r);return e}function kh(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}function R3(e){return e<0?-1:1}function ut(e){return Math.abs(e)<=pi?e:e-R3(e)*QE}function lc(e,t,r){var n=e*r,i=.5*e;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*($e-t))/n}function KE(e,t){for(var r=.5*e,n,i,s=$e-2*Math.atan(t),o=0;o<=15;o++)if(n=e*Math.sin(s),i=$e-2*Math.atan(t*Math.pow((1-n)/(1+n),r))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function D6t(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=kh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function F6t(e){var t=e.x,r=e.y;if(r*hh>90&&r*hh<-90&&t*hh>180&&t*hh<-180)return null;var n,i;if(Math.abs(Math.abs(r)-$e)<=at)return null;if(this.sphere)n=this.x0+this.a*this.k0*ut(t-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(jr+.5*r));else{var s=Math.sin(r),o=lc(this.e,r,s);n=this.x0+this.a*this.k0*ut(t-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return e.x=n,e.y=i,e}function j6t(e){var t=e.x-this.x0,r=e.y-this.y0,n,i;if(this.sphere)i=$e-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(i=KE(this.e,s),i===-9999)return null}return n=ut(this.long0+t/(this.a*this.k0)),e.x=n,e.y=i,e}var U6t=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const B6t={init:D6t,forward:F6t,inverse:j6t,names:U6t};function V6t(){}function hte(e){return e}var G6t=["longlat","identity"];const z6t={init:V6t,forward:hte,inverse:hte,names:G6t};var $6t=[B6t,z6t],j4={},OC=[];function $be(e,t){var r=OC.length;return e.names?(OC[r]=e,e.names.forEach(function(n){j4[n.toLowerCase()]=r}),this):(console.log(t),!0)}function q6t(e){if(!e)return!1;var t=e.toLowerCase();if(typeof j4[t]<"u"&&OC[j4[t]])return OC[j4[t]]}function H6t(){$6t.forEach($be)}const W6t={start:H6t,add:$be,get:q6t};var nr={};nr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},nr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},nr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},nr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},nr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},nr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},nr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},nr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},nr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},nr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},nr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},nr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},nr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},nr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},nr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},nr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},nr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},nr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},nr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},nr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},nr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},nr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},nr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},nr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},nr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},nr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},nr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},nr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},nr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},nr.hough={a:6378270,rf:297,ellipseName:"Hough"},nr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},nr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},nr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},nr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},nr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},nr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},nr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},nr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},nr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},nr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},nr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},nr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Z6t=nr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};nr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function J6t(e,t,r,n){var i=e*e,s=t*t,o=(i-s)/i,a=0;n?(e*=1-o*(y6t+o*(g6t+o*v6t)),i=e*e,o=0):a=Math.sqrt(o);var l=(i-s)/s;return{es:o,e:a,ep2:l}}function Y6t(e,t,r,n,i){if(!e){var s=Um(nr,n);s||(s=Z6t),e=s.a,t=s.b,r=s.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<at)&&(i=!0,t=e),{a:e,b:t,rf:r,sphere:i}}var zi={};zi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},zi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},zi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},zi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},zi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},zi.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},zi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},zi.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},zi.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},zi.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},zi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},zi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},zi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},zi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},zi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},zi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},zi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},zi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function X6t(e,t,r,n,i,s,o){var a={};return e===void 0||e==="none"?a.datum_type=Xj:a.datum_type=f6t,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=qg),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Hg,a.datum_params[3]*=qS,a.datum_params[4]*=qS,a.datum_params[5]*=qS,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=qb,a.grids=o),a.a=r,a.b=n,a.es=i,a.ep2=s,a}var qbe={};function Q6t(e,t){var r=new DataView(t),n=t8t(r),i=r8t(r,n),s=n8t(r,i,n),o={header:i,subgrids:s};return qbe[e]=o,o}function K6t(e){if(e===void 0)return null;var t=e.split(",");return t.map(e8t)}function e8t(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:qbe[e]||null,isNull:!1}}function lb(e){return e/3600*Math.PI/180}function t8t(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function r8t(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Kj(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Kj(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function n8t(e,t,r){for(var n=176,i=[],s=0;s<t.nSubgrids;s++){var o=s8t(e,n,r),a=o8t(e,n,o,r),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[lb(o.lowerLongitude),lb(o.lowerLatitude)],del:[lb(o.longitudeInterval),lb(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:i8t(a)}),n+=176+o.gridNodeCount*16}return i}function i8t(e){return e.map(function(t){return[lb(t.longitudeShift),lb(t.latitudeShift)]})}function s8t(e,t,r){return{name:Kj(e,t+8,t+16).trim(),parent:Kj(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function o8t(e,t,r,n){for(var i=t+176,s=16,o=[],a=0;a<r.gridNodeCount;a++){var l={latitudeShift:e.getFloat32(i+a*s,n),longitudeShift:e.getFloat32(i+a*s+4,n),latitudeAccuracy:e.getFloat32(i+a*s+8,n),longitudeAccuracy:e.getFloat32(i+a*s+12,n)};o.push(l)}return o}function _h(e,t){if(!(this instanceof _h))return new _h(e);t=t||function(u){if(u)throw u};var r=P6t(e);if(typeof r!="object"){t("Could not parse to valid json: "+e);return}var n=_h.projections.get(r.projName);if(!n){t("Could not get projection name from: "+e);return}if(r.datumCode&&r.datumCode!=="none"){var i=Um(zi,r.datumCode);i&&(r.datum_params=r.datum_params||(i.towgs84?i.towgs84.split(","):null),r.ellps=i.ellipse,r.datumName=i.datumName?i.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var s=Y6t(r.a,r.b,r.rf,r.ellps,r.sphere),o=J6t(s.a,s.b,s.rf,r.R_A),a=K6t(r.nadgrids),l=r.datum||X6t(r.datumCode,r.datum_params,s.a,s.b,o.es,o.ep2,a);cte(this,r),cte(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}_h.projections=W6t,_h.projections.start();function a8t(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===qg?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Hg?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function Hbe(e,t,r){var n=e.x,i=e.y,s=e.z?e.z:0,o,a,l,u;if(i<-$e&&i>-1.001*$e)i=-$e;else if(i>$e&&i<1.001*$e)i=$e;else{if(i<-$e)return{x:-1/0,y:-1/0,z:e.z};if(i>$e)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),a=Math.sin(i),u=Math.cos(i),l=a*a,o=r/Math.sqrt(1-t*l),{x:(o+s)*u*Math.cos(n),y:(o+s)*u*Math.sin(n),z:(o*(1-t)+s)*a}}function Wbe(e,t,r,n){var i=1e-12,s=i*i,o=30,a,l,u,c,h,d,m,y,g,b,S,E,x,w=e.x,T=e.y,I=e.z?e.z:0,M,C,k;if(a=Math.sqrt(w*w+T*T),l=Math.sqrt(w*w+T*T+I*I),a/r<i){if(M=0,l/r<i)return C=$e,k=-n,{x:e.x,y:e.y,z:e.z}}else M=Math.atan2(T,w);u=I/l,c=a/l,h=1/Math.sqrt(1-t*(2-t)*c*c),y=c*(1-t)*h,g=u*h,x=0;do x++,m=r/Math.sqrt(1-t*g*g),k=a*y+I*g-m*(1-t*g*g),d=t*m/(m+k),h=1/Math.sqrt(1-d*(2-d)*c*c),b=c*(1-d)*h,S=u*h,E=S*y-b*g,y=b,g=S;while(E*E>s&&x<o);return C=Math.atan(S/Math.abs(b)),{x:M,y:C,z:k}}function l8t(e,t,r){if(t===qg)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===Hg){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+a*e.z)+n,y:u*(l*e.x+e.y-o*e.z)+i,z:u*(-a*e.x+o*e.y+e.z)+s}}}function u8t(e,t,r){if(t===qg)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===Hg){var n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6],c=(e.x-n)/u,h=(e.y-i)/u,d=(e.z-s)/u;return{x:c+l*h-a*d,y:-l*c+h+o*d,z:a*c-o*h+d}}}function vA(e){return e===qg||e===Hg}function c8t(e,t,r){if(a8t(e,t)||e.datum_type===Xj||t.datum_type===Xj)return r;var n=e.a,i=e.es;if(e.datum_type===qb){var s=pte(e,!1,r);if(s!==0)return;n=rte,i=nte}var o=t.a,a=t.b,l=t.es;if(t.datum_type===qb&&(o=rte,a=m6t,l=nte),i===l&&n===o&&!vA(e.datum_type)&&!vA(t.datum_type))return r;if(r=Hbe(r,i,n),vA(e.datum_type)&&(r=l8t(r,e.datum_type,e.datum_params)),vA(t.datum_type)&&(r=u8t(r,t.datum_type,t.datum_params)),r=Wbe(r,l,o,a),t.datum_type===qb){var u=pte(t,!0,r);if(u!==0)return}return r}function pte(e,t,r){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<e.grids.length;o++){var a=e.grids[o];if(s.push(a.name),a.isNull){i=n;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var h=l[u],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,m=h.ll[0]-d,y=h.ll[1]-d,g=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,b=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(y>n.y||m>n.x||b<n.y||g<n.x)&&(i=h8t(n,t,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*hh+" "+n.y*hh+" tried: '"+s+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function h8t(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var i={x:e.x,y:e.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=ut(i.x-Math.PI)+Math.PI;var s=dte(i,r);if(t){if(isNaN(s.x))return n;s.x=i.x-s.x,s.y=i.y-s.y;var o=9,a=1e-12,l,u;do{if(u=dte(s,r),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=ut(s.x+r.ll[0]),n.y=s.y+r.ll[1]}else isNaN(s.x)||(n.x=e.x+s.x,n.y=e.y+s.y);return n}function dte(e,t){var r={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(r.x),y:Math.floor(r.y)},i={x:r.x-1*n.x,y:r.y-1*n.y},s={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return s;o=n.y*t.lim[0]+n.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var c={x:t.cvs[o][0],y:t.cvs[o][1]},h=i.x*i.y,d=i.x*(1-i.y),m=(1-i.x)*(1-i.y),y=(1-i.x)*i.y;return s.x=m*a.x+d*l.x+y*c.x+h*u.x,s.y=m*a.y+d*l.y+y*c.y+h*u.y,s}function fte(e,t,r){var n=r.x,i=r.y,s=r.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&r.z===void 0))switch(l===0?(o=n,"ew".indexOf(e.axis[l])!==-1?a="x":a="y"):l===1?(o=i,"ns".indexOf(e.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":r[a]!==void 0&&(u.z=o);break;case"d":r[a]!==void 0&&(u.z=-o);break;default:return null}return u}function Zbe(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function p8t(e){mte(e.x),mte(e.y)}function mte(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function d8t(e,t){return(e.datum.datum_type===qg||e.datum.datum_type===Hg||e.datum.datum_type===qb)&&t.datumCode!=="WGS84"||(t.datum.datum_type===qg||t.datum.datum_type===Hg||t.datum.datum_type===qb)&&e.datumCode!=="WGS84"}function NC(e,t,r,n){var i;Array.isArray(r)?r=Zbe(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var s=r.z!==void 0;if(p8t(r),e.datum&&t.datum&&d8t(e,t)&&(i=new _h("WGS84"),r=NC(e,i,r,n),e=i),n&&e.axis!=="enu"&&(r=fte(e,!1,r)),e.projName==="longlat")r={x:r.x*Ls,y:r.y*Ls,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r),!r)return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=c8t(e.datum,t.datum,r),!!r)return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*hh,y:r.y*hh,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&t.axis!=="enu"?fte(t,!0,r):(r&&!s&&delete r.z,r)}var yte=_h("WGS84");function GP(e,t,r,n){var i,s,o;return Array.isArray(r)?(i=NC(e,t,r,n)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(r.slice(3)):[i.x,i.y,r[2]].concat(r.slice(3)):[i.x,i.y].concat(r.slice(2)):[i.x,i.y]):(s=NC(e,t,r,n),o=Object.keys(r),o.length===2||o.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=r[a]}),s)}function gte(e){return e instanceof _h?e:e.oProj?e.oProj:_h(e)}function rn(e,t,r){e=gte(e);var n=!1,i;return typeof t>"u"?(t=e,e=yte,n=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=yte,n=!0),t=gte(t),r?GP(e,t,r):(i={forward:function(s,o){return GP(e,t,s,o)},inverse:function(s,o){return GP(t,e,s,o)}},n&&(i.oProj=t),i)}var vte=6,Jbe="AJSAJS",Ybe="AFAFAF",ub=65,va=73,Nl=79,oS=86,aS=90;const f8t={forward:Xbe,inverse:m8t,toPoint:Qbe};function Xbe(e,t){return t=t||5,v8t(y8t({lat:e[1],lon:e[0]}),t)}function m8t(e){var t=Q$(ewe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Qbe(e){var t=Q$(ewe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function zP(e){return e*(Math.PI/180)}function bte(e){return 180*(e/Math.PI)}function y8t(e){var t=e.lat,r=e.lon,n=6378137,i=.00669438,s=.9996,o,a,l,u,c,h,d,m=zP(t),y=zP(r),g,b;b=Math.floor((r+180)/6)+1,r===180&&(b=60),t>=56&&t<64&&r>=3&&r<12&&(b=32),t>=72&&t<84&&(r>=0&&r<9?b=31:r>=9&&r<21?b=33:r>=21&&r<33?b=35:r>=33&&r<42&&(b=37)),o=(b-1)*6-180+3,g=zP(o),a=i/(1-i),l=n/Math.sqrt(1-i*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),c=a*Math.cos(m)*Math.cos(m),h=Math.cos(m)*(y-g),d=n*((1-i/4-3*i*i/64-5*i*i*i/256)*m-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*m)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*m)-35*i*i*i/3072*Math.sin(6*m));var S=s*l*(h+(1-u+c)*h*h*h/6+(5-18*u+u*u+72*c-58*a)*h*h*h*h*h/120)+5e5,E=s*(d+l*Math.tan(m)*(h*h/2+(5-u+9*c+4*c*c)*h*h*h*h/24+(61-58*u+u*u+600*c-330*a)*h*h*h*h*h*h/720));return t<0&&(E+=1e7),{northing:Math.round(E),easting:Math.round(S),zoneNumber:b,zoneLetter:g8t(t)}}function Q$(e){var t=e.northing,r=e.easting,n=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,h,d,m,y,g,b,S,E,x=r-5e5,w=t;n<"N"&&(w-=1e7),b=(i-1)*6-180+3,l=a/(1-a),g=w/s,S=g/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),E=S+(3*u/2-27*u*u*u/32)*Math.sin(2*S)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*S)+151*u*u*u/96*Math.sin(6*S),c=o/Math.sqrt(1-a*Math.sin(E)*Math.sin(E)),h=Math.tan(E)*Math.tan(E),d=l*Math.cos(E)*Math.cos(E),m=o*(1-a)/Math.pow(1-a*Math.sin(E)*Math.sin(E),1.5),y=x/(c*s);var T=E-c*Math.tan(E)/m*(y*y/2-(5+3*h+10*d-4*d*d-9*l)*y*y*y*y/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*y*y*y*y*y*y/720);T=bte(T);var I=(y-(1+2*h+d)*y*y*y/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*y*y*y*y*y/120)/Math.cos(E);I=b+bte(I);var M;if(e.accuracy){var C=Q$({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});M={top:C.lat,right:C.lon,bottom:T,left:I}}else M={lat:T,lon:I};return M}function g8t(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function v8t(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+b8t(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}function b8t(e,t,r){var n=Kbe(r),i=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return w8t(i,s,n)}function Kbe(e){var t=e%vte;return t===0&&(t=vte),t}function w8t(e,t,r){var n=r-1,i=Jbe.charCodeAt(n),s=Ybe.charCodeAt(n),o=i+e-1,a=s+t,l=!1;o>aS&&(o=o-aS+ub-1,l=!0),(o===va||i<va&&o>va||(o>va||i<va)&&l)&&o++,(o===Nl||i<Nl&&o>Nl||(o>Nl||i<Nl)&&l)&&(o++,o===va&&o++),o>aS&&(o=o-aS+ub-1),a>oS?(a=a-oS+ub-1,l=!0):l=!1,(a===va||s<va&&a>va||(a>va||s<va)&&l)&&a++,(a===Nl||s<Nl&&a>Nl||(a>Nl||s<Nl)&&l)&&(a++,a===va&&a++),a>oS&&(a=a-oS+ub-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function ewe(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,n="",i,s=0;!/[A-Z]/.test(i=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;n+=i,s++}var o=parseInt(n,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;r=e.substring(s,s+=2);for(var l=Kbe(o),u=_8t(r.charAt(0),l),c=x8t(r.charAt(1),l);c<S8t(a);)c+=2e6;var h=t-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var d=h/2,m=0,y=0,g,b,S,E,x;return d>0&&(g=1e5/Math.pow(10,d),b=e.substring(s,s+d),m=parseFloat(b)*g,S=e.substring(s+d),y=parseFloat(S)*g),E=m+u,x=y+c,{easting:E,northing:x,zoneLetter:a,zoneNumber:o,accuracy:g}}function _8t(e,t){for(var r=Jbe.charCodeAt(t-1),n=1e5,i=!1;r!==e.charCodeAt(0);){if(r++,r===va&&r++,r===Nl&&r++,r>aS){if(i)throw"Bad character: "+e;r=ub,i=!0}n+=1e5}return n}function x8t(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=Ybe.charCodeAt(t-1),n=0,i=!1;r!==e.charCodeAt(0);){if(r++,r===va&&r++,r===Nl&&r++,r>oS){if(i)throw"Bad character: "+e;r=ub,i=!0}n+=1e5}return n}function S8t(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Hb(e,t,r){if(!(this instanceof Hb))return new Hb(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Hb.fromMGRS=function(e){return new Hb(Qbe(e))},Hb.prototype.toMGRS=function(e){return Xbe([this.x,this.y],e)};var E8t=1,T8t=.25,wte=.046875,_te=.01953125,xte=.01068115234375,I8t=.75,A8t=.46875,M8t=.013020833333333334,C8t=.007120768229166667,k8t=.3645833333333333,R8t=.005696614583333333,O8t=.3076171875;function K$(e){var t=[];t[0]=E8t-e*(T8t+e*(wte+e*(_te+e*xte))),t[1]=e*(I8t-e*(wte+e*(_te+e*xte)));var r=e*e;return t[2]=r*(A8t-e*(M8t+e*C8t)),r*=e,t[3]=r*(k8t-e*R8t),t[4]=r*e*O8t,t}function F_(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var N8t=20;function eq(e,t,r){for(var n=1/(1-t),i=e,s=N8t;s;--s){var o=Math.sin(i),a=1-t*o*o;if(a=(F_(i,o,Math.cos(i),r)-e)*(a*Math.sqrt(a))*n,i-=a,Math.abs(a)<at)return i}return i}function L8t(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=K$(this.es),this.ml0=F_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function P8t(e){var t=e.x,r=e.y,n=ut(t-this.long0),i,s,o,a=Math.sin(r),l=Math.cos(r);if(this.es){var u=l*n,c=Math.pow(u,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),m=Math.abs(l)>at?Math.tan(r):0,y=Math.pow(m,2),g=Math.pow(y,2);i=1-this.es*Math.pow(a,2),u=u/Math.sqrt(i);var b=F_(r,a,l,this.en);s=this.a*(this.k0*u*(1+c/6*(1-y+h+c/20*(5-18*y+g+14*h-58*y*h+c/42*(61+179*g-g*y-479*y)))))+this.x0,o=this.a*(this.k0*(b-this.ml0+a*n*u/2*(1+c/12*(5-y+9*h+4*d+c/30*(61+g-58*y+270*h-330*y*h+c/56*(1385+543*g-g*y-3111*y))))))+this.y0}else{var S=l*Math.sin(n);if(Math.abs(Math.abs(S)-1)<at)return 93;if(s=.5*this.a*this.k0*Math.log((1+S)/(1-S))+this.x0,o=l*Math.cos(n)/Math.sqrt(1-Math.pow(S,2)),S=Math.abs(o),S>=1){if(S-1>at)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=s,e.y=o,e}function D8t(e){var t,r,n,i,s=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,r=eq(t,this.es,this.en),Math.abs(r)<$e){var a=Math.sin(r),l=Math.cos(r),u=Math.abs(l)>at?Math.tan(r):0,c=this.ep2*Math.pow(l,2),h=Math.pow(c,2),d=Math.pow(u,2),m=Math.pow(d,2);t=1-this.es*Math.pow(a,2);var y=s*Math.sqrt(t)/this.k0,g=Math.pow(y,2);t=t*u,n=r-t*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*h-g/30*(61+90*d-252*c*d+45*m+46*c-g/56*(1385+3633*d+4095*m+1574*m*d)))),i=ut(this.long0+y*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*m+8*c*d+6*c-g/42*(61+662*d+1320*m+720*m*d))))/l)}else n=$e*R3(o),i=0;else{var b=Math.exp(s/this.k0),S=.5*(b-1/b),E=this.lat0+o/this.k0,x=Math.cos(E);t=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(S,2))),n=Math.asin(t),o<0&&(n=-n),S===0&&x===0?i=0:i=ut(Math.atan2(S,x)+this.long0)}return e.x=i,e.y=n,e}var F8t=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const U4={init:L8t,forward:P8t,inverse:D8t,names:F8t};function twe(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function Ma(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function j8t(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function U8t(e){var t=Math.abs(e);return t=j8t(t*(1+t/(Ma(1,t)+1))),e<0?-t:t}function tq(e,t){for(var r=2*Math.cos(2*t),n=e.length-1,i=e[n],s=0,o;--n>=0;)o=-s+r*i+e[n],s=i,i=o;return t+o*Math.sin(2*t)}function B8t(e,t){for(var r=2*Math.cos(t),n=e.length-1,i=e[n],s=0,o;--n>=0;)o=-s+r*i+e[n],s=i,i=o;return Math.sin(t)*o}function V8t(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function rwe(e,t,r){for(var n=Math.sin(t),i=Math.cos(t),s=twe(r),o=V8t(r),a=2*i*o,l=-2*n*s,u=e.length-1,c=e[u],h=0,d=0,m=0,y,g;--u>=0;)y=d,g=h,d=c,h=m,c=-y+a*d-l*h+e[u],m=-g+l*d+a*h;return a=n*o,l=i*s,[a*c-l*m,a*m+l*c]}function G8t(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(U4.init.apply(this),this.forward=U4.forward,this.inverse=U4.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var n=tq(this.cbg,this.lat0);this.Zb=-this.Qn*(n+B8t(this.gtu,2*n))}function z8t(e){var t=ut(e.x-this.long0),r=e.y;r=tq(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),s=Math.sin(t),o=Math.cos(t);r=Math.atan2(n,o*i),t=Math.atan2(s*i,Ma(n,i*o)),t=U8t(Math.tan(t));var a=rwe(this.gtu,2*r,2*t);r=r+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function $8t(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var n,i;if(Math.abs(t)<=2.623395162778){var s=rwe(this.utg,2*r,2*t);r=r+s[0],t=t+s[1],t=Math.atan(twe(t));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(t),u=Math.cos(t);r=Math.atan2(o*u,Ma(l,u*a)),t=Math.atan2(l,u*a),n=ut(t+this.long0),i=tq(this.cgb,r)}else n=1/0,i=1/0;return e.x=n,e.y=i,e}var q8t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const B4={init:G8t,forward:z8t,inverse:$8t,names:q8t};function H8t(e,t){if(e===void 0){if(e=Math.floor((ut(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var W8t="etmerc";function Z8t(){var e=H8t(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Ls,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,B4.init.apply(this),this.forward=B4.forward,this.inverse=B4.inverse}var J8t=["Universal Transverse Mercator System","utm"];const Y8t={init:Z8t,names:J8t,dependsOn:W8t};function rq(e,t){return Math.pow((1-e)/(1+e),t)}var X8t=20;function Q8t(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+jr)/(Math.pow(Math.tan(.5*this.lat0+jr),this.C)*rq(this.e*e,this.ratexp))}function K8t(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+jr),this.C)*rq(this.e*Math.sin(r),this.ratexp))-$e,e.x=this.C*t,e}function e9t(e){for(var t=1e-14,r=e.x/this.C,n=e.y,i=Math.pow(Math.tan(.5*n+jr)/this.K,1/this.C),s=X8t;s>0&&(n=2*Math.atan(i*rq(this.e*Math.sin(e.y),-.5*this.e))-$e,!(Math.abs(n-e.y)<t));--s)e.y=n;return s?(e.x=r,e.y=n,e):null}var t9t=["gauss"];const nq={init:Q8t,forward:K8t,inverse:e9t,names:t9t};function r9t(){nq.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function n9t(e){var t,r,n,i;return e.x=ut(e.x-this.long0),nq.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function i9t(e){var t,r,n,i,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Ma(e.x,e.y)){var o=2*Math.atan2(s,this.R2);t=Math.sin(o),r=Math.cos(o),i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/s),n=Math.atan2(e.x*t,s*this.cosc0*r-e.y*this.sinc0*t)}else i=this.phic0,n=0;return e.x=n,e.y=i,nq.inverse.apply(this,[e]),e.x=ut(e.x+this.long0),e}var s9t=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const o9t={init:r9t,forward:n9t,inverse:i9t,names:s9t};function a9t(e,t,r){return t*=r,Math.tan(.5*($e+e))*Math.pow((1-t)/(1+t),.5*r)}function l9t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=at&&(this.k0=.5*(1+R3(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=at&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=at&&Math.abs(Math.cos(this.lat_ts))>at&&(this.k0=.5*this.cons*kh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/lc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=kh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$e,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function u9t(e){var t=e.x,r=e.y,n=Math.sin(r),i=Math.cos(r),s,o,a,l,u,c,h=ut(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=at&&Math.abs(r+this.lat0)<=at?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*i*Math.cos(h)),e.x=this.a*s*i*Math.sin(h)+this.x0,e.y=this.a*s*(this.coslat0*n-this.sinlat0*i*Math.cos(h))+this.y0,e):(o=2*Math.atan(this.ssfn_(r,n,this.e))-$e,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=at?(u=lc(this.e,r*this.con,this.con*n),c=2*this.a*this.k0*u/this.cons,e.x=this.x0+c*Math.sin(t-this.long0),e.y=this.y0-this.con*c*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<at?(s=2*this.a*this.k0/(1+l*Math.cos(h)),e.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),e.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),e.x=s*l*Math.sin(h)+this.x0,e))}function c9t(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,s,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,r=this.lat0,o<=at?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<at?this.lat0>0?t=ut(this.long0+Math.atan2(e.x,-1*e.y)):t=ut(this.long0+Math.atan2(e.x,e.y)):t=ut(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=at){if(o<=at)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=o*this.cons/(2*this.a*this.k0),r=this.con*KE(this.e,n),t=this.con*ut(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=at?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/o),t=ut(this.long0+Math.atan2(e.x*Math.sin(i),o*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),r=-1*KE(this.e,Math.tan(.5*($e+s)));return e.x=t,e.y=r,e}var h9t=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const p9t={init:l9t,forward:u9t,inverse:c9t,names:h9t,ssfn_:a9t};function d9t(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=this.rf,i=1/n,s=2*i-Math.pow(i,2),o=this.e=Math.sqrt(s);this.R=this.k0*r*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function f9t(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function m9t(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,h=0;Math.abs(u-c)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var y9t=["somerc"];const g9t={init:d9t,forward:f9t,inverse:m9t,names:y9t};var Hv=1e-7;function v9t(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(r)!==-1}function b9t(){var e,t,r,n,i,s,o,a,l,u,c=0,h,d=0,m=0,y=0,g=0,b=0,S=0;this.no_off=v9t(this),this.no_rot="no_rot"in this;var E=!1;"alpha"in this&&(E=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),E&&(S=this.alpha),x&&(c=this.rectified_grid_angle*Ls),E||x)d=this.longc;else if(m=this.long1,g=this.lat1,y=this.long2,b=this.lat2,Math.abs(g-b)<=Hv||(e=Math.abs(g))<=Hv||Math.abs(e-$e)<=Hv||Math.abs(Math.abs(this.lat0)-$e)<=Hv||Math.abs(Math.abs(b)-$e)<=Hv)throw new Error;var w=1-this.es;t=Math.sqrt(w),Math.abs(this.lat0)>at?(a=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*a*a,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*t/e,n=this.B*t/(r*Math.sqrt(e)),i=n*n-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(lc(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=i=1),E||x?(E?(h=Math.asin(Math.sin(S)/n),x||(c=S)):(h=c,S=Math.asin(n*Math.sin(h))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(lc(this.e,g,Math.sin(g)),this.B),o=Math.pow(lc(this.e,b,Math.sin(b)),this.B),i=this.E/s,l=(o-s)/(o+s),u=this.E*this.E,u=(u-o*s)/(u+o*s),e=m-y,e<-Math.pi?y-=QE:e>Math.pi&&(y+=QE),this.lam0=ut(.5*(m+y)-Math.atan(u*Math.tan(.5*this.B*(m-y))/l)/this.B),h=Math.atan(2*Math.sin(this.B*ut(m-this.lam0))/(i-1/i)),c=S=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(jr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(jr+i))}function w9t(e){var t={},r,n,i,s,o,a,l,u;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-$e)>at){if(o=this.E/Math.pow(lc(this.e,e.y,Math.sin(e.y)),this.B),a=1/o,r=.5*(o-a),n=.5*(o+a),s=Math.sin(this.B*e.x),i=(r*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(i)-1)<at)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*e.x),Math.abs(a)<Hv?l=this.A*e.x:l=this.ArB*Math.atan2(r*this.cosgam+s*this.singam,a)}else u=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function _9t(e){var t,r,n,i,s,o,a,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*r),i=.5*(n-1/n),s=.5*(n+1/n),o=Math.sin(this.BrA*t),a=(o*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<at)l.x=0,l.y=a<0?-$e:$e;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=KE(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var x9t=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const S9t={init:b9t,forward:w9t,inverse:_9t,names:x9t};function E9t(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<at)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=kh(this.e,t,r),i=lc(this.e,this.lat1,t),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=kh(this.e,s,o),l=lc(this.e,this.lat2,s),u=lc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>at?this.ns=Math.log(n/a)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function T9t(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=at&&(r=R3(r)*($e-2*at));var n=Math.abs(Math.abs(r)-$e),i,s;if(n>at)i=lc(this.e,r,Math.sin(r)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(n=r*this.ns,n<=0)return null;s=0}var o=this.ns*ut(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function I9t(e){var t,r,n,i,s,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),r=1):(t=-Math.sqrt(o*o+a*a),r=-1);var l=0;if(t!==0&&(l=Math.atan2(r*o,r*a)),t!==0||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),i=KE(this.e,n),i===-9999)return null}else i=-$e;return s=ut(l/this.ns+this.long0),e.x=s,e.y=i,e}var A9t=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const M9t={init:E9t,forward:T9t,inverse:I9t,names:A9t};function C9t(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function k9t(e){var t,r,n,i,s,o,a,l=e.x,u=e.y,c=ut(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),s=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function R9t(e){var t,r,n,i,s,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),i=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,c+=1;while(l===0&&c<15);return c>=15?null:e}var O9t=["Krovak","krovak"];const N9t={init:C9t,forward:k9t,inverse:R9t,names:O9t};function Yo(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)}function O3(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function N3(e){return .375*e*(1+.25*e*(1+.46875*e))}function L3(e){return .05859375*e*e*(1+.75*e)}function P3(e){return e*e*e*(35/3072)}function kw(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)}function i0(e){return Math.abs(e)<$e?e:e-R3(e)*Math.PI}function LC(e,t,r,n,i){var s,o;s=e/t;for(var a=0;a<15;a++)if(o=(e-(t*s-r*Math.sin(2*s)+n*Math.sin(4*s)-i*Math.sin(6*s)))/(t-2*r*Math.cos(2*s)+4*n*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function L9t(){this.sphere||(this.e0=O3(this.es),this.e1=N3(this.es),this.e2=L3(this.es),this.e3=P3(this.es),this.ml0=this.a*Yo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function P9t(e){var t,r,n=e.x,i=e.y;if(n=ut(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=kw(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),c=u*u,h=this.es*o*o/(1-this.es),d=this.a*Yo(this.e0,this.e1,this.e2,this.e3,i);t=a*u*(1-c*l*(1/6-(8-l+8*h)*c/120)),r=d-this.ml0+a*s/o*c*(.5+(5-l+6*h)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function D9t(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,n,i;if(this.sphere){var s=r+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(t)),i=Math.atan2(Math.tan(t),Math.cos(s))}else{var o=this.ml0/this.a+r,a=LC(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-$e)<=at)return e.x=this.long0,e.y=$e,r<0&&(e.y*=-1),e;var l=kw(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),h=t*this.a/l,d=h*h;n=a-l*Math.tan(a)/u*h*h*(.5-(1+3*c)*h*h/24),i=h*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(a)}return e.x=ut(i+this.long0),e.y=i0(n),e}var F9t=["Cassini","Cassini_Soldner","cass"];const j9t={init:L9t,forward:P9t,inverse:D9t,names:F9t};function xm(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var U9t=1,B9t=2,V9t=3,G9t=4;function z9t(){var e=Math.abs(this.lat0);if(Math.abs(e-$e)<at?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<at?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=xm(this.e,1),this.mmf=.5/(1-this.es),this.apa=Q9t(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=xm(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function $9t(e){var t,r,n,i,s,o,a,l,u,c,h=e.x,d=e.y;if(h=ut(h-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n,r<=at)return null;r=Math.sqrt(2/r),t=r*c*Math.sin(h),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<at)return null;r=jr-d*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(h),r*=n}}else{switch(a=0,l=0,u=0,n=Math.cos(h),i=Math.sin(h),s=Math.sin(d),o=xm(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=$e+d,o=this.qp-o;break;case this.S_POLE:u=d-$e,o=this.qp+o;break}if(Math.abs(u)<at)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?r=this.ymf*u*(this.cosb1*a-this.sinb1*l*n):r=(u=Math.sqrt(2/(1+l*n)))*a*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*i,r=n*(this.mode===this.S_POLE?u:-u)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function q9t(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,n,i,s,o,a,l,u;if(this.sphere){var c=0,h,d=0;if(h=Math.sqrt(t*t+r*r),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=at?0:Math.asin(r*d/h),t*=d,r=c*h;break;case this.OBLIQ:i=Math.abs(h)<=at?this.lat0:Math.asin(c*this.sinph0+r*d*this.cosph0/h),t*=d*this.cosph0,r=(c-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:r=-r,i=$e-i;break;case this.S_POLE:i-=$e;break}n=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,l=Math.sqrt(t*t+r*r),l<at)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+r*o*this.cosb1/l,a=this.qp*u,r=l*this.cosb1*s-r*this.sinb1*o):(u=r*o/l,a=this.qp*u,r=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),a=t*t+r*r,!a)return e.x=this.long0,e.y=this.lat0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}n=Math.atan2(t,r),i=K9t(Math.asin(u),this.apa)}return e.x=ut(this.long0+n),e.y=i,e}var H9t=.3333333333333333,W9t=.17222222222222222,Z9t=.10257936507936508,J9t=.06388888888888888,Y9t=.0664021164021164,X9t=.016415012942191543;function Q9t(e){var t,r=[];return r[0]=e*H9t,t=e*e,r[0]+=t*W9t,r[1]=t*J9t,t*=e,r[0]+=t*Z9t,r[1]+=t*Y9t,r[2]=t*X9t,r}function K9t(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var eFt=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const tFt={init:z9t,forward:$9t,inverse:q9t,names:eFt,S_POLE:U9t,N_POLE:B9t,EQUIT:V9t,OBLIQ:G9t};function Bm(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function rFt(){Math.abs(this.lat1+this.lat2)<at||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=kh(this.e3,this.sin_po,this.cos_po),this.qs1=xm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=kh(this.e3,this.sin_po,this.cos_po),this.qs2=xm(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=xm(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>at?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function nFt(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=xm(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*ut(t-this.long0),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return e.x=o,e.y=a,e}function iFt(e){var t,r,n,i,s,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),i=0,t!==0&&(i=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,r)),s=ut(i/this.ns0+this.long0),e.x=s,e.y=o,e}function sFt(e,t){var r,n,i,s,o,a=Bm(.5*t);if(e<at)return a;for(var l=e*e,u=1;u<=25;u++)if(r=Math.sin(a),n=Math.cos(a),i=e*r,s=1-i*i,o=.5*s*s/n*(t/(1-l)-r/s+.5/e*Math.log((1-i)/(1+i))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var oFt=["Albers_Conic_Equal_Area","Albers","aea"];const aFt={init:rFt,forward:nFt,inverse:iFt,names:oFt,phi1z:sFt};function lFt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function uFt(e){var t,r,n,i,s,o,a,l,u=e.x,c=e.y;return n=ut(u-this.long0),t=Math.sin(c),r=Math.cos(c),i=Math.cos(n),o=this.sin_p14*t+this.cos_p14*r*i,s=1,o>0||Math.abs(o)<=at?(a=this.x0+this.a*s*r*Math.sin(n)/o,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=l,e}function cFt(e){var t,r,n,i,s,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),r=Math.sin(i),n=Math.cos(i),o=Bm(n*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),s=ut(this.long0+s)):(o=this.phic0,s=0),e.x=s,e.y=o,e}var hFt=["gnom"];const pFt={init:lFt,forward:uFt,inverse:cFt,names:hFt};function dFt(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*$e:$e;for(var n=Math.asin(.5*t),i,s,o,a,l=0;l<30;l++)if(s=Math.sin(n),o=Math.cos(n),a=e*s,i=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-s/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),n+=i,Math.abs(i)<=1e-10)return n;return NaN}function fFt(){this.sphere||(this.k0=kh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function mFt(e){var t=e.x,r=e.y,n,i,s=ut(t-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=xm(this.e,Math.sin(r));n=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return e.x=n,e.y=i,e}function yFt(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=ut(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=dFt(this.e,2*e.y*this.k0/this.a),t=ut(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var gFt=["cea"];const vFt={init:fFt,forward:mFt,inverse:yFt,names:gFt};function bFt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function wFt(e){var t=e.x,r=e.y,n=ut(t-this.long0),i=i0(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*i,e}function _Ft(e){var t=e.x,r=e.y;return e.x=ut(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=i0(this.lat0+(r-this.y0)/this.a),e}var xFt=["Equirectangular","Equidistant_Cylindrical","eqc"];const SFt={init:bFt,forward:wFt,inverse:_Ft,names:xFt};var Ste=20;function EFt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=O3(this.es),this.e1=N3(this.es),this.e2=L3(this.es),this.e3=P3(this.es),this.ml0=this.a*Yo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function TFt(e){var t=e.x,r=e.y,n,i,s,o=ut(t-this.long0);if(s=o*Math.sin(r),this.sphere)Math.abs(r)<=at?(n=this.a*o,i=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(r),i=this.a*(i0(r-this.lat0)+(1-Math.cos(s))/Math.tan(r)));else if(Math.abs(r)<=at)n=this.a*o,i=-1*this.ml0;else{var a=kw(this.a,this.e,Math.sin(r))/Math.tan(r);n=a*Math.sin(s),i=this.a*Yo(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(s))}return e.x=n+this.x0,e.y=i+this.y0,e}function IFt(e){var t,r,n,i,s,o,a,l,u;if(n=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=at)t=ut(n/this.a+this.long0),r=0;else{o=this.lat0+i/this.a,a=n*n/this.a/this.a+o*o,l=o;var c;for(s=Ste;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=at){r=l;break}t=ut(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=at)r=0,t=ut(this.long0+n/this.a);else{o=(this.ml0+i)/this.a,a=n*n/this.a/this.a+o*o,l=o;var h,d,m,y,g;for(s=Ste;s;--s)if(g=this.e*Math.sin(l),h=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Yo(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),y=d/this.a,u=(o*(h*y+1)-y-.5*h*(y*y+a))/(this.es*Math.sin(2*l)*(y*y+a-2*o*y)/(4*h)+(o-y)*(h*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=at){r=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=ut(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var AFt=["Polyconic","poly"];const MFt={init:EFt,forward:TFt,inverse:IFt,names:AFt};function CFt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function kFt(e){var t,r=e.x,n=e.y,i=n-this.lat0,s=r-this.long0,o=i/qS*1e-5,a=s,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var c=u,h=a,d=1,m=0,y,g,b=0,S=0;for(t=1;t<=6;t++)y=d*c-m*h,g=m*c+d*h,d=y,m=g,b=b+this.B_re[t]*d-this.B_im[t]*m,S=S+this.B_im[t]*d+this.B_re[t]*m;return e.x=S*this.a+this.x0,e.y=b*this.a+this.y0,e}function RFt(e){var t,r=e.x,n=e.y,i=r-this.x0,s=n-this.y0,o=s/this.a,a=i/this.a,l=1,u=0,c,h,d=0,m=0;for(t=1;t<=6;t++)c=l*o-u*a,h=u*o+l*a,l=c,u=h,d=d+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var y=0;y<this.iterations;y++){var g=d,b=m,S,E,x=o,w=a;for(t=2;t<=6;t++)S=g*d-b*m,E=b*d+g*m,g=S,b=E,x=x+(t-1)*(this.B_re[t]*g-this.B_im[t]*b),w=w+(t-1)*(this.B_im[t]*g+this.B_re[t]*b);g=1,b=0;var T=this.B_re[1],I=this.B_im[1];for(t=2;t<=6;t++)S=g*d-b*m,E=b*d+g*m,g=S,b=E,T=T+t*(this.B_re[t]*g-this.B_im[t]*b),I=I+t*(this.B_im[t]*g+this.B_re[t]*b);var M=T*T+I*I;d=(x*T+w*I)/M,m=(w*T-x*I)/M}var C=d,k=m,N=1,F=0;for(t=1;t<=9;t++)N=N*C,F=F+this.D[t]*N;var P=this.lat0+F*qS*1e5,B=this.long0+k;return e.x=B,e.y=P,e}var OFt=["New_Zealand_Map_Grid","nzmg"];const NFt={init:CFt,forward:kFt,inverse:RFt,names:OFt};function LFt(){}function PFt(e){var t=e.x,r=e.y,n=ut(t-this.long0),i=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=i,e.y=s,e}function DFt(e){e.x-=this.x0,e.y-=this.y0;var t=ut(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var FFt=["Miller_Cylindrical","mill"];const jFt={init:LFt,forward:PFt,inverse:DFt,names:FFt};var UFt=20;function BFt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=K$(this.es)}function VFt(e){var t,r,n=e.x,i=e.y;if(n=ut(n-this.long0),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),o=UFt;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<at)break}t=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);r=this.a*F_(i,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e}function GFt(e){var t,r,n,i;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Bm((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Bm(Math.sin(t)/this.n)),n=ut(n+this.long0),t=i0(t)):(t=eq(e.y/this.a,this.es,this.en),i=Math.abs(t),i<$e?(i=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=ut(r)):i-at<$e&&(n=this.long0)),e.x=n,e.y=t,e}var zFt=["Sinusoidal","sinu"];const $Ft={init:BFt,forward:VFt,inverse:GFt,names:zFt};function qFt(){}function HFt(e){for(var t=e.x,r=e.y,n=ut(t-this.long0),i=r,s=Math.PI*Math.sin(r);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<at)break}i/=2,Math.PI/2-Math.abs(r)<at&&(n=0);var a=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=a,e.y=l,e}function WFt(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=ut(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return e.x=n,e.y=i,e}var ZFt=["Mollweide","moll"];const JFt={init:qFt,forward:HFt,inverse:WFt,names:ZFt};function YFt(){Math.abs(this.lat1+this.lat2)<at||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=O3(this.es),this.e1=N3(this.es),this.e2=L3(this.es),this.e3=P3(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=kh(this.e,this.sinphi,this.cosphi),this.ml1=Yo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<at?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=kh(this.e,this.sinphi,this.cosphi),this.ml2=Yo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Yo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function XFt(e){var t=e.x,r=e.y,n;if(this.sphere)n=this.a*(this.g-r);else{var i=Yo(this.e0,this.e1,this.e2,this.e3,r);n=this.a*(this.g-i)}var s=this.ns*ut(t-this.long0),o=this.x0+n*Math.sin(s),a=this.y0+this.rh-n*Math.cos(s);return e.x=o,e.y=a,e}function QFt(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,n,i;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(r!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=ut(this.long0+s/this.ns),n=i0(this.g-r/this.a),e.x=i,e.y=n,e;var o=this.g-r/this.a;return n=LC(o,this.e0,this.e1,this.e2,this.e3),i=ut(this.long0+s/this.ns),e.x=i,e.y=n,e}var KFt=["Equidistant_Conic","eqdc"];const e7t={init:YFt,forward:XFt,inverse:QFt,names:KFt};function t7t(){this.R=this.a}function r7t(e){var t=e.x,r=e.y,n=ut(t-this.long0),i,s;Math.abs(r)<=at&&(i=this.x0+this.R*n,s=this.y0);var o=Bm(2*Math.abs(r/Math.PI));(Math.abs(n)<=at||Math.abs(Math.abs(r)-$e)<=at)&&(i=this.x0,r>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/n-n/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),h=c/(u+c-1),d=h*h,m=h*(2/u-1),y=m*m,g=Math.PI*this.R*(a*(h-y)+Math.sqrt(l*(h-y)*(h-y)-(y+l)*(d-y)))/(y+l);n<0&&(g=-g),i=this.x0+g;var b=l+h;return g=Math.PI*this.R*(m*b-a*Math.sqrt((y+l)*(l+1)-b*b))/(y+l),r>=0?s=this.y0+g:s=this.y0-g,e.x=i,e.y=s,e}function n7t(e){var t,r,n,i,s,o,a,l,u,c,h,d,m;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,n=e.x/h,i=e.y/h,s=n*n+i*i,o=-Math.abs(i)*(1+s),a=o-2*i*i+n*n,l=-2*o+1+2*i*i+s*s,m=i*i/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),h=3*m/u/c,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,e.y>=0?r=(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:r=-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(n)<at?t=this.long0:t=ut(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-i*i)+s*s))/2/n),e.x=t,e.y=r,e}var i7t=["Van_der_Grinten_I","VanDerGrinten","vandg"];const s7t={init:t7t,forward:r7t,inverse:n7t,names:i7t};function o7t(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function a7t(e){var t=e.x,r=e.y,n=Math.sin(e.y),i=Math.cos(e.y),s=ut(t-this.long0),o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C,k,N,F,P;return this.sphere?Math.abs(this.sin_p12-1)<=at?(e.x=this.x0+this.a*($e-r)*Math.sin(s),e.y=this.y0-this.a*($e-r)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=at?(e.x=this.x0+this.a*($e+r)*Math.sin(s),e.y=this.y0+this.a*($e+r)*Math.cos(s),e):(M=this.sin_p12*n+this.cos_p12*i*Math.cos(s),T=Math.acos(M),I=T?T/Math.sin(T):1,e.x=this.x0+this.a*I*i*Math.sin(s),e.y=this.y0+this.a*I*(this.cos_p12*n-this.sin_p12*i*Math.cos(s)),e):(o=O3(this.es),a=N3(this.es),l=L3(this.es),u=P3(this.es),Math.abs(this.sin_p12-1)<=at?(c=this.a*Yo(o,a,l,u,$e),h=this.a*Yo(o,a,l,u,r),e.x=this.x0+(c-h)*Math.sin(s),e.y=this.y0-(c-h)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=at?(c=this.a*Yo(o,a,l,u,$e),h=this.a*Yo(o,a,l,u,r),e.x=this.x0+(c+h)*Math.sin(s),e.y=this.y0+(c+h)*Math.cos(s),e):(d=n/i,m=kw(this.a,this.e,this.sin_p12),y=kw(this.a,this.e,n),g=Math.atan((1-this.es)*d+this.es*m*this.sin_p12/(y*i)),b=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(g)-this.sin_p12*Math.cos(s)),b===0?C=Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):Math.abs(Math.abs(b)-Math.PI)<=at?C=-Math.asin(this.cos_p12*Math.sin(g)-this.sin_p12*Math.cos(g)):C=Math.asin(Math.sin(s)*Math.cos(g)/Math.sin(b)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),E=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es),x=S*E,w=E*E,k=C*C,N=k*C,F=N*C,P=F*C,T=m*C*(1-k*w*(1-w)/6+N/8*x*(1-2*w)+F/120*(w*(4-7*w)-3*S*S*(1-7*w))-P/48*x),e.x=this.x0+T*Math.sin(b),e.y=this.y0+T*Math.cos(b),e))}function l7t(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,s,o,a,l,u,c,h,d,m,y,g,b,S,E,x,w,T,I,M,C;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*$e*this.a?void 0:(r=t/this.a,n=Math.sin(r),i=Math.cos(r),s=this.long0,Math.abs(t)<=at?o=this.lat0:(o=Bm(i*this.sin_p12+e.y*n*this.cos_p12/t),a=Math.abs(this.lat0)-$e,Math.abs(a)<=at?this.lat0>=0?s=ut(this.long0+Math.atan2(e.x,-e.y)):s=ut(this.long0-Math.atan2(-e.x,e.y)):s=ut(this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))),e.x=s,e.y=o,e)):(l=O3(this.es),u=N3(this.es),c=L3(this.es),h=P3(this.es),Math.abs(this.sin_p12-1)<=at?(d=this.a*Yo(l,u,c,h,$e),t=Math.sqrt(e.x*e.x+e.y*e.y),m=d-t,o=LC(m/this.a,l,u,c,h),s=ut(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=o,e):Math.abs(this.sin_p12+1)<=at?(d=this.a*Yo(l,u,c,h,$e),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-d,o=LC(m/this.a,l,u,c,h),s=ut(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),b=Math.atan2(e.x,e.y),y=kw(this.a,this.e,this.sin_p12),S=Math.cos(b),E=this.e*this.cos_p12*S,x=-E*E/(1-this.es),w=3*this.es*(1-x)*this.sin_p12*this.cos_p12*S/(1-this.es),T=t/y,I=T-x*(1+x)*Math.pow(T,3)/6-w*(1+3*x)*Math.pow(T,4)/24,M=1-x*I*I/2-T*I*I*I/6,g=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*S),s=ut(this.long0+Math.asin(Math.sin(b)*Math.sin(I)/Math.cos(g))),C=Math.sin(g),o=Math.atan2((C-this.es*M*this.sin_p12)*Math.tan(g),C*(1-this.es)),e.x=s,e.y=o,e))}var u7t=["Azimuthal_Equidistant","aeqd"];const c7t={init:o7t,forward:a7t,inverse:l7t,names:u7t};function h7t(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function p7t(e){var t,r,n,i,s,o,a,l,u=e.x,c=e.y;return n=ut(u-this.long0),t=Math.sin(c),r=Math.cos(c),i=Math.cos(n),o=this.sin_p14*t+this.cos_p14*r*i,s=1,(o>0||Math.abs(o)<=at)&&(a=this.a*s*r*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=l,e}function d7t(e){var t,r,n,i,s,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Bm(t/this.a),n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(t)<=at?(a=this.lat0,e.x=o,e.y=a,e):(a=Bm(i*this.sin_p14+e.y*n*this.cos_p14/t),s=Math.abs(this.lat0)-$e,Math.abs(s)<=at?(this.lat0>=0?o=ut(this.long0+Math.atan2(e.x,-e.y)):o=ut(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=ut(this.long0+Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n)),e.x=o,e.y=a,e))}var f7t=["ortho"];const m7t={init:h7t,forward:p7t,inverse:d7t,names:f7t};var qn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ur={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function y7t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=$e-jr/2?this.face=qn.TOP:this.lat0<=-($e-jr/2)?this.face=qn.BOTTOM:Math.abs(this.long0)<=jr?this.face=qn.FRONT:Math.abs(this.long0)<=$e+jr?this.face=this.long0>0?qn.RIGHT:qn.LEFT:this.face=qn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function g7t(e){var t={x:0,y:0},r,n,i,s,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,n=e.x,this.face===qn.TOP)s=$e-r,n>=jr&&n<=$e+jr?(l.value=Ur.AREA_0,i=n-$e):n>$e+jr||n<=-($e+jr)?(l.value=Ur.AREA_1,i=n>0?n-pi:n+pi):n>-($e+jr)&&n<=-jr?(l.value=Ur.AREA_2,i=n+$e):(l.value=Ur.AREA_3,i=n);else if(this.face===qn.BOTTOM)s=$e+r,n>=jr&&n<=$e+jr?(l.value=Ur.AREA_0,i=-n+$e):n<jr&&n>=-jr?(l.value=Ur.AREA_1,i=-n):n<-jr&&n>=-($e+jr)?(l.value=Ur.AREA_2,i=-n-$e):(l.value=Ur.AREA_3,i=n>0?-n+pi:-n-pi);else{var u,c,h,d,m,y,g;this.face===qn.RIGHT?n=Wb(n,+$e):this.face===qn.BACK?n=Wb(n,+pi):this.face===qn.LEFT&&(n=Wb(n,-$e)),d=Math.sin(r),m=Math.cos(r),y=Math.sin(n),g=Math.cos(n),u=m*g,c=m*y,h=d,this.face===qn.FRONT?(s=Math.acos(u),i=bA(s,h,c,l)):this.face===qn.RIGHT?(s=Math.acos(c),i=bA(s,h,-u,l)):this.face===qn.BACK?(s=Math.acos(-u),i=bA(s,h,-c,l)):this.face===qn.LEFT?(s=Math.acos(-c),i=bA(s,h,u,l)):(s=i=0,l.value=Ur.AREA_0)}return a=Math.atan(12/pi*(i+Math.acos(Math.sin(i)*Math.cos(jr))-$e)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Ur.AREA_1?a+=$e:l.value===Ur.AREA_2?a+=pi:l.value===Ur.AREA_3&&(a+=1.5*pi),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function v7t(e){var t={lam:0,phi:0},r,n,i,s,o,a,l,u,c,h={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?h.value=Ur.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(h.value=Ur.AREA_1,r-=$e):e.x<0&&-e.x>=Math.abs(e.y)?(h.value=Ur.AREA_2,r=r<0?r+pi:r-pi):(h.value=Ur.AREA_3,r+=$e),c=pi/12*Math.tan(r),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),i=Math.cos(r),s=Math.tan(n),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===qn.TOP)u=Math.acos(l),t.phi=$e-u,h.value===Ur.AREA_0?t.lam=a+$e:h.value===Ur.AREA_1?t.lam=a<0?a+pi:a-pi:h.value===Ur.AREA_2?t.lam=a-$e:t.lam=a;else if(this.face===qn.BOTTOM)u=Math.acos(l),t.phi=u-$e,h.value===Ur.AREA_0?t.lam=-a+$e:h.value===Ur.AREA_1?t.lam=-a:h.value===Ur.AREA_2?t.lam=-a-$e:t.lam=a<0?-a-pi:-a+pi;else{var d,m,y;d=l,c=d*d,c>=1?y=0:y=Math.sqrt(1-c)*Math.sin(a),c+=y*y,c>=1?m=0:m=Math.sqrt(1-c),h.value===Ur.AREA_1?(c=m,m=-y,y=c):h.value===Ur.AREA_2?(m=-m,y=-y):h.value===Ur.AREA_3&&(c=m,m=y,y=-c),this.face===qn.RIGHT?(c=d,d=-m,m=c):this.face===qn.BACK?(d=-d,m=-m):this.face===qn.LEFT&&(c=d,d=m,m=-c),t.phi=Math.acos(-y)-$e,t.lam=Math.atan2(m,d),this.face===qn.RIGHT?t.lam=Wb(t.lam,-$e):this.face===qn.BACK?t.lam=Wb(t.lam,-pi):this.face===qn.LEFT&&(t.lam=Wb(t.lam,+$e))}if(this.es!==0){var g,b,S;g=t.phi<0?1:0,b=Math.tan(t.phi),S=this.b/Math.sqrt(b*b+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),g&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function bA(e,t,r,n){var i;return e<at?(n.value=Ur.AREA_0,i=0):(i=Math.atan2(t,r),Math.abs(i)<=jr?n.value=Ur.AREA_0:i>jr&&i<=$e+jr?(n.value=Ur.AREA_1,i-=$e):i>$e+jr||i<=-($e+jr)?(n.value=Ur.AREA_2,i=i>=0?i-pi:i+pi):(n.value=Ur.AREA_3,i+=$e)),i}function Wb(e,t){var r=e+t;return r<-pi?r+=QE:r>+pi&&(r-=QE),r}var b7t=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const w7t={init:y7t,forward:g7t,inverse:v7t,names:b7t};var eU=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],lS=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],nwe=.8487,iwe=1.3523,swe=hh/5,_7t=1/swe,cb=18,PC=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},x7t=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function S7t(e,t,r,n){for(var i=t;n;--n){var s=e(i);if(i-=s,Math.abs(s)<r)break}return i}function E7t(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function T7t(e){var t=ut(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*swe);n<0?n=0:n>=cb&&(n=cb-1),r=hh*(r-_7t*n);var i={x:PC(eU[n],r)*t,y:PC(lS[n],r)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*nwe+this.x0,i.y=i.y*this.a*iwe+this.y0,i}function I7t(e){var t={x:(e.x-this.x0)/(this.a*nwe),y:Math.abs(e.y-this.y0)/(this.a*iwe)};if(t.y>=1)t.x/=eU[cb][0],t.y=e.y<0?-$e:$e;else{var r=Math.floor(t.y*cb);for(r<0?r=0:r>=cb&&(r=cb-1);;)if(lS[r][0]>t.y)--r;else if(lS[r+1][0]<=t.y)++r;else break;var n=lS[r],i=5*(t.y-n[0])/(lS[r+1][0]-n[0]);i=S7t(function(s){return(PC(n,s)-t.y)/x7t(n,s)},i,at,100),t.x/=PC(eU[r],i),t.y=(5*r+i)*Ls,e.y<0&&(t.y=-t.y)}return t.x=ut(t.x+this.long0),t}var A7t=["Robinson","robin"];const M7t={init:E7t,forward:T7t,inverse:I7t,names:A7t};function C7t(){this.name="geocent"}function k7t(e){var t=Hbe(e,this.es,this.a);return t}function R7t(e){var t=Wbe(e,this.es,this.a,this.b);return t}var O7t=["Geocentric","geocentric","geocent","Geocent"];const N7t={init:C7t,forward:k7t,inverse:R7t,names:O7t};var fo={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},b2={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function L7t(){if(Object.keys(b2).forEach(function(r){if(typeof this[r]>"u")this[r]=b2[r].def;else{if(b2[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);b2[r].num&&(this[r]=parseFloat(this[r]))}b2[r].degrees&&(this[r]=this[r]*Ls)}.bind(this)),Math.abs(Math.abs(this.lat0)-$e)<at?this.mode=this.lat0<0?fo.S_POLE:fo.N_POLE:Math.abs(this.lat0)<at?this.mode=fo.EQUIT:(this.mode=fo.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function P7t(e){e.x-=this.long0;var t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i,s;switch(this.mode){case fo.OBLIQ:s=this.sinph0*t+this.cosph0*r*n;break;case fo.EQUIT:s=r*n;break;case fo.S_POLE:s=-t;break;case fo.N_POLE:s=t;break}switch(s=this.pn1/(this.p-s),i=s*r*Math.sin(e.x),this.mode){case fo.OBLIQ:s*=this.cosph0*t-this.sinph0*r*n;break;case fo.EQUIT:s*=t;break;case fo.N_POLE:s*=-(r*n);break;case fo.S_POLE:s*=r*n;break}var o,a;return o=s*this.cg+i*this.sg,a=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*a,s=o*a,e.x=i*this.a,e.y=s*this.a,e}function D7t(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r,n,i;i=1/(this.pn1-e.y*this.sw),r=this.pn1*e.x*i,n=this.pn1*e.y*this.cw*i,e.x=r*this.cg+n*this.sg,e.y=n*this.cg-r*this.sg;var s=Ma(e.x,e.y);if(Math.abs(s)<at)t.x=0,t.y=e.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case fo.OBLIQ:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/s),e.y=(o-this.sinph0*Math.sin(t.y))*s,e.x*=a*this.cosph0;break;case fo.EQUIT:t.y=Math.asin(e.y*a/s),e.y=o*s,e.x*=a;break;case fo.N_POLE:t.y=Math.asin(o),e.y=-e.y;break;case fo.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var F7t=["Tilted_Perspective","tpers"];const j7t={init:L7t,forward:P7t,inverse:D7t,names:F7t};function U7t(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function B7t(e){var t=e.x,r=e.y,n,i,s,o;if(t=t-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var a=this.radius_p/Ma(this.radius_p*Math.cos(r),Math.sin(r));if(i=a*Math.cos(t)*Math.cos(r),s=a*Math.sin(t)*Math.cos(r),o=a*Math.sin(r),(this.radius_g-i)*i-s*s-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/Ma(o,n)),e.y=this.radius_g_1*Math.atan(o/n)):(e.x=this.radius_g_1*Math.atan(s/n),e.y=this.radius_g_1*Math.atan(o/Ma(s,n)))}else this.shape==="sphere"&&(n=Math.cos(r),i=Math.cos(t)*n,s=Math.sin(t)*n,o=Math.sin(r),n=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(s/Ma(o,n)),e.y=this.radius_g_1*Math.atan(o/n)):(e.x=this.radius_g_1*Math.atan(s/n),e.y=this.radius_g_1*Math.atan(o/Ma(s,n))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function V7t(e){var t=-1,r=0,n=0,i,s,o,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Ma(1,n)):(r=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Ma(1,r));var l=n/this.radius_p;if(i=r*r+l*l+t*t,s=2*this.radius_g*t,o=s*s-4*i*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*i),t=this.radius_g+a*t,r*=a,n*=a,e.x=Math.atan2(r,t),e.y=Math.atan(n*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+n*n)):(r=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+r*r)),i=r*r+n*n+t*t,s=2*this.radius_g*t,o=s*s-4*i*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-s-Math.sqrt(o))/(2*i),t=this.radius_g+a*t,r*=a,n*=a,e.x=Math.atan2(r,t),e.y=Math.atan(n*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var G7t=["Geostationary Satellite View","Geostationary_Satellite","geos"];const z7t={init:U7t,forward:B7t,inverse:V7t,names:G7t};var HS=1.340264,WS=-.081106,ZS=893e-6,JS=.003796,DC=Math.sqrt(3)/2;function $7t(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function q7t(e){var t=ut(e.x-this.long0),r=e.y,n=Math.asin(DC*Math.sin(r)),i=n*n,s=i*i*i;return e.x=t*Math.cos(n)/(DC*(HS+3*WS*i+s*(7*ZS+9*JS*i))),e.y=n*(HS+WS*i+s*(ZS+JS*i)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function H7t(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,r=12,n=e.y,i,s,o,a,l,u;for(u=0;u<r&&(i=n*n,s=i*i*i,o=n*(HS+WS*i+s*(ZS+JS*i))-e.y,a=HS+3*WS*i+s*(7*ZS+9*JS*i),n-=l=o/a,!(Math.abs(l)<t));++u);return i=n*n,s=i*i*i,e.x=DC*e.x*(HS+3*WS*i+s*(7*ZS+9*JS*i))/Math.cos(n),e.y=Math.asin(Math.sin(n)/DC),e.x=ut(e.x+this.long0),e}var W7t=["eqearth","Equal Earth","Equal_Earth"];const Z7t={init:$7t,forward:q7t,inverse:H7t,names:W7t};var eT=1e-10;function J7t(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<eT)throw new Error;this.es?(this.en=K$(this.es),this.m1=F_(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=X7t,this.forward=Y7t):(Math.abs(this.phi1)+eT>=$e?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=K7t,this.forward=Q7t)}function Y7t(e){var t=ut(e.x-(this.long0||0)),r=e.y,n,i,s;return n=this.am1+this.m1-F_(r,i=Math.sin(r),s=Math.cos(r),this.en),i=s*t/(n*Math.sqrt(1-this.es*i*i)),e.x=n*Math.sin(i),e.y=this.am1-n*Math.cos(i),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function X7t(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,n,i;if(r=Ma(e.x,e.y=this.am1-e.y),i=eq(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(i))<$e)t=Math.sin(i),n=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(i);else if(Math.abs(t-$e)<=eT)n=0;else throw new Error;return e.x=ut(n+(this.long0||0)),e.y=i0(i),e}function Q7t(e){var t=ut(e.x-(this.long0||0)),r=e.y,n,i;return i=this.cphi1+this.phi1-r,Math.abs(i)>eT?(e.x=i*Math.sin(n=t*Math.cos(r)/i),e.y=this.cphi1-i*Math.cos(n)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function K7t(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,n=Ma(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>$e)throw new Error;return Math.abs(Math.abs(r)-$e)<=eT?t=0:t=n*Math.atan2(e.x,e.y)/Math.cos(r),e.x=ut(t+(this.long0||0)),e.y=i0(r),e}var ejt=["bonne","Bonne (Werner lat_1=90)"];const tjt={init:J7t,names:ejt};function rjt(e){e.Proj.projections.add(U4),e.Proj.projections.add(B4),e.Proj.projections.add(Y8t),e.Proj.projections.add(o9t),e.Proj.projections.add(p9t),e.Proj.projections.add(g9t),e.Proj.projections.add(S9t),e.Proj.projections.add(M9t),e.Proj.projections.add(N9t),e.Proj.projections.add(j9t),e.Proj.projections.add(tFt),e.Proj.projections.add(aFt),e.Proj.projections.add(pFt),e.Proj.projections.add(vFt),e.Proj.projections.add(SFt),e.Proj.projections.add(MFt),e.Proj.projections.add(NFt),e.Proj.projections.add(jFt),e.Proj.projections.add($Ft),e.Proj.projections.add(JFt),e.Proj.projections.add(e7t),e.Proj.projections.add(s7t),e.Proj.projections.add(c7t),e.Proj.projections.add(m7t),e.Proj.projections.add(w7t),e.Proj.projections.add(M7t),e.Proj.projections.add(N7t),e.Proj.projections.add(j7t),e.Proj.projections.add(z7t),e.Proj.projections.add(Z7t),e.Proj.projections.add(tjt)}rn.defaultDatum="WGS84",rn.Proj=_h,rn.WGS84=new rn.Proj("WGS84"),rn.Point=Hb,rn.toPoint=Zbe,rn.defs=Go,rn.nadgrid=Q6t,rn.transform=NC,rn.mgrs=f8t,rn.version="__VERSION__",rjt(rn);const njt="EPSG:4326";class ijt{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,rn.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),rn.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),rn.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),rn.defs("EPSG:102100",rn.defs("EPSG:3857")),rn.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),rn.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const r=t<10?`0${t}`:t;rn.defs(`EPSG:326${r}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}addProjection(t,r){t=typeof t=="number"?`EPSG:${t}`:t,rn.defs(t,r)}defaultEpsgLookup(t){const r=/urn:ogc:def:crs:EPSG::(\d+)/,n=/EPSG:(\d+)/,i=String(t).match(r)||String(t).match(n)||[];if(i.length<2)throw new Error("Invalid code provided.");return new Promise((s,o)=>{const a=`https://epsg.io/${i[1]}.proj4`;Xe(a,{responseType:"text"}).then(l=>{l.data?s(l.data):o()},l=>{o(l)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let r,n="";try{r=this.normalizeProj(t)}catch{return!1}if(!r.startsWith("EPSG:"))return!0;typeof t=="object"&&t.latestWkid&&(n=this.normalizeProj(t.latestWkid));const i=(o,a)=>{o!==a&&rn.defs(a,rn.defs(o))};if(rn.defs(r))return!0;if(n&&rn.defs(n))return i(n,r),!0;const s=async o=>{try{const a=await this.epsgLookup(o);return a===null||a===""?!1:(rn.defs(o,a),!0)}catch{return!1}};return await(n?s(n):Promise.resolve(!1))?(i(n,r),!0):s(r)}async checkProjBomber(t){if(t.length>0){const r=t.pop();if(await this.checkProj(r))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",r),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,r,n){let i,s;if(r?i=this.normalizeProj(r):i=Yt.parseGeoJsonCrs(t.crs),n?s=this.normalizeProj(n):s=njt,s===i)return t;await this.checkProjBomber([i,s]);const o=rn(i,s).forward;return p6t.Tools.applyConverter(t,o)}async projectGeometry(t,r){if(r.type===or.EXTENT)return this.projectExtent(t,r);await this.checkProjBomber([t,r.sr]);const n=r.toGeoJSON(),i=await this.projectGeoJson(n,this.normalizeProj(r.sr),this.normalizeProj(t)),s=Eg.geom.geomGeoJsonToRamp(i,r.id);return s.sr=Yt.parseSR(t),s}async projectExtent(t,r){const n=(g,b,S)=>{if(S===0)return[g,b];const E=[(g[0]+b[0])/2,(g[1]+b[1])/2];if(S===1)return[g,E,b];if(S>1){const x=n(g,E,S-1),w=n(E,b,S-1);return x.concat(w.slice(1))}return[[]]},i=r.toPolygonArray().pop()||[];let s=[];[0,1,2,3].map(g=>n(i[g],i[g+1],3).slice(1)).forEach(g=>s=s.concat(g));const o=new Fs("warpy",[s],r.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(g=>g[0]),c=l.map(g=>g[1]),h=Math.min.apply(null,u),d=Math.max.apply(null,u),m=Math.min.apply(null,c),y=Math.max.apply(null,c);return Tn.fromParams(r.id+"_projected",h,m,d,y,a.sr)}}class sjt{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new ijt,this.geom=new a6t,this.sharedUtils=new c6t}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const r=n=>n.map(i=>({level:i[0],resolution:i[1],scale:i[2]}));if(t===this.DEFAULT_LAMBERT)return r([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return r([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class Si{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function ojt(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function ajt(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(r=>e[r]!==void 0)}function owe(e){return typeof e=="object"&&Object.keys(e).every(t=>typeof t=="string")&&Object.values(e).every(t=>t instanceof HTMLElement)}function ljt(e){return typeof e=="object"&&e.default!==void 0}var wA={exports:{}},Ete;function ujt(){if(Ete)return wA.exports;Ete=1;function e(){}return e.prototype={on:function(t,r,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:r,ctx:n}),this},once:function(t,r,n){var i=this;function s(){i.off(t,s),r.apply(n,arguments)}return s._=r,this.on(t,s,n)},emit:function(t){var r=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,s=n.length;for(i;i<s;i++)n[i].fn.apply(n[i].ctx,r);return this},off:function(t,r){var n=this.e||(this.e={}),i=n[t],s=[];if(i&&r)for(var o=0,a=i.length;o<a;o++)i[o].fn!==r&&i[o].fn._!==r&&s.push(i[o]);return s.length?n[t]=s:delete n[t],this}},wA.exports=e,wA.exports.TinyEmitter=e,wA.exports}var cjt=ujt();function ia(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const yr={},dg=[],La=()=>{},iq=()=>!1,w1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),PO=e=>e.startsWith("onUpdate:"),Kr=Object.assign,DO=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},hjt=Object.prototype.hasOwnProperty,Ar=(e,t)=>hjt.call(e,t),wt=Array.isArray,fg=e=>_1(e)==="[object Map]",s0=e=>_1(e)==="[object Set]",tU=e=>_1(e)==="[object Date]",awe=e=>_1(e)==="[object RegExp]",zt=e=>typeof e=="function",Lr=e=>typeof e=="string",iu=e=>typeof e=="symbol",zr=e=>e!==null&&typeof e=="object",FO=e=>(zr(e)||zt(e))&&zt(e.then)&&zt(e.catch),sq=Object.prototype.toString,_1=e=>sq.call(e),lwe=e=>_1(e).slice(8,-1),D3=e=>_1(e)==="[object Object]",jO=e=>Lr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Sm=ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uwe=ia("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),UO=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},pjt=/-(\w)/g,ws=UO(e=>e.replace(pjt,(t,r)=>r?r.toUpperCase():"")),djt=/\B([A-Z])/g,wo=UO(e=>e.replace(djt,"-$1").toLowerCase()),x1=UO(e=>e.charAt(0).toUpperCase()+e.slice(1)),mg=UO(e=>e?`on${x1(e)}`:""),yo=(e,t)=>!Object.is(e,t),yg=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},oq=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},tT=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rT=e=>{const t=Lr(e)?Number(e):NaN;return isNaN(t)?e:t};let Tte;const aq=()=>Tte||(Tte=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),fjt=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function mjt(e){return fjt.test(e)?`__props.${e}`:`__props[${JSON.stringify(e)}]`}function yjt(e,t){return e+JSON.stringify(t,(r,n)=>typeof n=="function"?n.toString():n)}const gjt={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},vjt={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},bjt={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},wjt={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},_jt={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},xjt="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",lq=ia(xjt),Sjt=lq,Ite=2;function cwe(e,t=0,r=e.length){if(t=Math.max(0,Math.min(t,e.length)),r=Math.max(0,Math.min(r,e.length)),t>r)return"";let n=e.split(/(\r?\n)/);const i=n.filter((a,l)=>l%2===1);n=n.filter((a,l)=>l%2===0);let s=0;const o=[];for(let a=0;a<n.length;a++)if(s+=n[a].length+(i[a]&&i[a].length||0),s>=t){for(let l=a-Ite;l<=a+Ite||r>s;l++){if(l<0||l>=n.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${n[l]}`);const c=n[l].length,h=i[l]&&i[l].length||0;if(l===a){const d=t-(s-(c+h)),m=Math.max(1,r>s?c-d:r-t);o.push("   |  "+" ".repeat(d)+"^".repeat(m))}else if(l>a){if(r>s){const d=Math.max(Math.min(r-s,c),1);o.push("   |  "+"^".repeat(d))}s+=c+h}}break}return o.join(`
`)}function Fd(e){if(wt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Lr(n)?uq(n):Fd(n);if(i)for(const s in i)t[s]=i[s]}return t}else if(Lr(e)||zr(e))return e}const Ejt=/;(?![^(]*\))/g,Tjt=/:([^]+)/,Ijt=/\/\*[^]*?\*\//g;function uq(e){const t={};return e.replace(Ijt,"").split(Ejt).forEach(r=>{if(r){const n=r.split(Tjt);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ajt(e){let t="";if(!e||Lr(e))return t;for(const r in e){const n=e[r];if(Lr(n)||typeof n=="number"){const i=r.startsWith("--")?r:wo(r);t+=`${i}:${n};`}}return t}function Jn(e){let t="";if(Lr(e))t=e;else if(wt(e))for(let r=0;r<e.length;r++){const n=Jn(e[r]);n&&(t+=n+" ")}else if(zr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function hwe(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Lr(t)&&(e.class=Jn(t)),r&&(e.style=Fd(r)),e}const Mjt="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",Cjt="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",kjt="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",Rjt="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",pwe=ia(Mjt),dwe=ia(Cjt),fwe=ia(kjt),mwe=ia(Rjt),ywe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gwe=ia(ywe),Ojt=ia(ywe+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function cq(e){return!!e||e===""}const Njt=/[>/="'\u0009\u000a\u000c\u0020]/,$P={};function Ljt(e){if($P.hasOwnProperty(e))return $P[e];const t=Njt.test(e);return t&&console.error(`unsafe attribute name: ${e}`),$P[e]=!t}const Pjt={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},Djt=ia("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),Fjt=ia("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),jjt=ia("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function Ujt(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}const Bjt=/["'&<>]/;function Vjt(e){const t=""+e,r=Bjt.exec(t);if(!r)return t;let n="",i,s,o=0;for(s=r.index;s<t.length;s++){switch(t.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==s&&(n+=t.slice(o,s)),o=s+1,n+=i}return o!==s?n+t.slice(o,s):n}const Gjt=/^-?>|<!--|-->|--!>|<!-$/g;function zjt(e){return e.replace(Gjt,"")}const vwe=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function $jt(e,t){return e.replace(vwe,r=>t?r==='"'?'\\\\\\"':`\\\\${r}`:`\\${r}`)}function qjt(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=xd(e[n],t[n]);return r}function xd(e,t){if(e===t)return!0;let r=tU(e),n=tU(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=iu(e),n=iu(t),r||n)return e===t;if(r=wt(e),n=wt(t),r||n)return r&&n?qjt(e,t):!1;if(r=zr(e),n=zr(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,s=Object.keys(t).length;if(i!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!xd(e[o],t[o]))return!1}}return String(e)===String(t)}function F3(e,t){return e.findIndex(r=>xd(r,t))}const bwe=e=>!!(e&&e.__v_isRef===!0),on=e=>Lr(e)?e:e==null?"":wt(e)||zr(e)&&(e.toString===sq||!zt(e.toString))?bwe(e)?on(e.value):JSON.stringify(e,wwe,2):String(e),wwe=(e,t)=>bwe(t)?wwe(e,t.value):fg(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],s)=>(r[qP(n,s)+" =>"]=i,r),{})}:s0(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>qP(r))}:iu(t)?qP(t):zr(t)&&!wt(t)&&!D3(t)?String(t):t,qP=(e,t="")=>{var r;return iu(e)?`Symbol(${(r=e.description)!=null?r:t})`:e},Hjt=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:dg,EMPTY_OBJ:yr,NO:iq,NOOP:La,PatchFlagNames:vjt,PatchFlags:gjt,ShapeFlags:bjt,SlotFlags:wjt,camelize:ws,capitalize:x1,cssVarNameEscapeSymbolsRE:vwe,def:oq,escapeHtml:Vjt,escapeHtmlComment:zjt,extend:Kr,genCacheKey:yjt,genPropsAccessExp:mjt,generateCodeFrame:cwe,getEscapedCssVarName:$jt,getGlobalThis:aq,hasChanged:yo,hasOwn:Ar,hyphenate:wo,includeBooleanAttr:cq,invokeArrayFns:yg,isArray:wt,isBooleanAttr:Ojt,isBuiltInDirective:uwe,isDate:tU,isFunction:zt,isGloballyAllowed:lq,isGloballyWhitelisted:Sjt,isHTMLTag:pwe,isIntegerKey:jO,isKnownHtmlAttr:Djt,isKnownMathMLAttr:jjt,isKnownSvgAttr:Fjt,isMap:fg,isMathMLTag:fwe,isModelListener:PO,isObject:zr,isOn:w1,isPlainObject:D3,isPromise:FO,isRegExp:awe,isRenderableAttrValue:Ujt,isReservedProp:Sm,isSSRSafeAttrName:Ljt,isSVGTag:dwe,isSet:s0,isSpecialBooleanAttr:gwe,isString:Lr,isSymbol:iu,isVoidTag:mwe,looseEqual:xd,looseIndexOf:F3,looseToNumber:tT,makeMap:ia,normalizeClass:Jn,normalizeProps:hwe,normalizeStyle:Fd,objectToString:sq,parseStringStyle:uq,propsToAttrMap:Pjt,remove:DO,slotFlagsText:_jt,stringifyStyle:Ajt,toDisplayString:on,toHandlerKey:mg,toNumber:rT,toRawType:lwe,toTypeString:_1},Symbol.toStringTag,{value:"Module"}));var Wjt={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_always_auth:"",npm_config_user_agent:"npm/10.9.0 node/v22.12.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",NODE_AUTH_TOKEN:"XXXXX-XXXXX-XXXXX-XXXXX",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ramp4-pcar4",npm_package_engines_node:"=22.12.0",GRADLE_HOME:"/usr/share/gradle-8.11.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"57148724",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_local_prefix:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",SYSTEMD_EXEC_PID:"833",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241215.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.10/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.4/x64",JOURNAL_STREAM:"8:6481",GITHUB_WORKFLOW:"Build demo site and deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/22.12.0/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",npm_config_npm_version:"10.9.0",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"12419971258",STATS_VMFE:"true",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"tag",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ramp4-pcar4/ramp4-pcar4/.github/workflows/demo-build.yml@refs/tags/v4.10.0",ACTIONS_ID_TOKEN_REQUEST_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikh5cTROQVRBanNucUM3bWRydEFoaHJDUjJfUSJ9.eyJuYW1laWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJzY3AiOiJBY3Rpb25zLkdlbmVyaWNSZWFkOjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCBBY3Rpb25zLlJlc3VsdHM6ZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5OmNhMzk1MDg1LTA0MGEtNTI2Yi0yY2U4LWJkYzg1ZjY5Mjc3NCBBY3Rpb25zLlVwbG9hZEFydGlmYWN0czowMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAvMTpCdWlsZC9CdWlsZC8xMTc5NyBEaXN0cmlidXRlZFRhc2suR2VuZXJhdGVJZFRva2VuOmUzM2ZiMWRkLTkyMjItNDJiYS1iNzk0LWI0ODRmZDMzZjg0OTpjYTM5NTA4NS0wNDBhLTUyNmItMmNlOC1iZGM4NWY2OTI3NzQgTG9jYXRpb25TZXJ2aWNlLkNvbm5lY3QgUmVhZEFuZFVwZGF0ZUJ1aWxkQnlVcmk6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwLzE6QnVpbGQvQnVpbGQvMTE3OTciLCJJZGVudGl0eVR5cGVDbGFpbSI6IlN5c3RlbTpTZXJ2aWNlSWRlbnRpdHkiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiJERERERERERC1ERERELUREREQtRERERC1EREREREREREREREQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3ByaW1hcnlzaWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJhdWkiOiIxZmE4NDE2ZS05OTQzLTRlMWEtYjY4MS1hODAxOGQxOGIzNzQiLCJzaWQiOiJhMDllZjkzMi04YjkxLTQyNGEtOWZhOC1lODZkM2FiODhlNDEiLCJhYyI6Ilt7XCJTY29wZVwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcIlBlcm1pc3Npb25cIjozfSx7XCJTY29wZVwiOlwicmVmcy9oZWFkcy9tYWluXCIsXCJQZXJtaXNzaW9uXCI6MX1dIiwiYWNzbCI6IjEwIiwib2lkY19leHRyYSI6IntcInJlZlwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcInNoYVwiOlwiMWYzMmY1YzRkZWRhZDdhYzM1YTc4OTVlN2Y3NDBkOWU0ODM1OTkwM1wiLFwicmVwb3NpdG9yeVwiOlwicmFtcDQtcGNhcjQvcmFtcDQtcGNhcjRcIixcInJlcG9zaXRvcnlfb3duZXJcIjpcInJhbXA0LXBjYXI0XCIsXCJyZXBvc2l0b3J5X293bmVyX2lkXCI6XCI1NzE0ODcyNFwiLFwicnVuX2lkXCI6XCIxMjQxOTk3MTI1OFwiLFwicnVuX251bWJlclwiOlwiMTMxXCIsXCJydW5fYXR0ZW1wdFwiOlwiMVwiLFwicmVwb3NpdG9yeV92aXNpYmlsaXR5XCI6XCJwdWJsaWNcIixcInJlcG9zaXRvcnlfaWRcIjpcIjIxODM1NjA1N1wiLFwiYWN0b3JfaWRcIjpcIjc1ODUyNDVcIixcImFjdG9yXCI6XCJqYW1lcy1yYWVcIixcIndvcmtmbG93XCI6XCJCdWlsZCBkZW1vIHNpdGUgYW5kIGRlcGxveSB0byBHaXRIdWIgUGFnZXNcIixcImhlYWRfcmVmXCI6XCJcIixcImJhc2VfcmVmXCI6XCJcIixcImV2ZW50X25hbWVcIjpcInB1c2hcIixcInJlZl9wcm90ZWN0ZWRcIjpcImZhbHNlXCIsXCJyZWZfdHlwZVwiOlwidGFnXCIsXCJ3b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJ3b3JrZmxvd19zaGFcIjpcIjFmMzJmNWM0ZGVkYWQ3YWMzNWE3ODk1ZTdmNzQwZDllNDgzNTk5MDNcIixcImVudmlyb25tZW50XCI6XCJnaXRodWItcGFnZXNcIixcImVudmlyb25tZW50X25vZGVfaWRcIjpcIkVOX2t3RE9EUVBaV2M0ZUV4MlpcIixcImpvYl93b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJqb2Jfd29ya2Zsb3dfc2hhXCI6XCIxZjMyZjVjNGRlZGFkN2FjMzVhNzg5NWU3Zjc0MGQ5ZTQ4MzU5OTAzXCIsXCJydW5uZXJfZW52aXJvbm1lbnRcIjpcImdpdGh1Yi1ob3N0ZWRcIn0iLCJvaWRjX3N1YiI6InJlcG86cmFtcDQtcGNhcjQvcmFtcDQtcGNhcjQ6ZW52aXJvbm1lbnQ6Z2l0aHViLXBhZ2VzIiwib3JjaGlkIjoiZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5LmJ1aWxkLl9fZGVmYXVsdCIsImlzcyI6InZzdG9rZW4uYWN0aW9ucy5naXRodWJ1c2VyY29udGVudC5jb20iLCJhdWQiOiJ2c3Rva2VuLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tfHZzbzpkYzhlN2U0ZC00ZDQ1LTQ4ZDAtYmY4YS02YmQ0YzZjMjQ2MDciLCJuYmYiOjE3MzQ2MzgxODcsImV4cCI6MTczNDY2MDk4N30.RARk5esxipY8hoZlRACe-X_yM76TNaGPNYLTOeo3QHil127k0ynntWTAIhvG4AnWGYhGaYy4r4nNazwMI7YVAcri6W6w4txoRtMEUdA20vrF04HAvi2LIMPtdLXXW03zl6hIVd22jIGJI6t6hor6a8dQKa5uN4XR_tcXzEI8Vhv3S4R4fOIPJthxGXdW5oC06Arc0YSPRDRDTk-Lb4qXWQVoaQ4oHaRZGaA0xHNITcKkzLN9AHvPFnzaIyK4iQ8Zr_0B2I-Tyor7AAKyCfvKVt980mzK76axB0fid1T0ATLZNg8nftwlvB-y9u-KqFPIf8iOeoMrMNQVV9FHigeU7w",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/22.12.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_f84c0023-8fe3-4772-972b-468f8650057c",INVOCATION_ID:"b4280ab4ab86413d99aedf730c4ee39c",NPM_CONFIG_USERCONFIG:"/home/runner/work/_temp/.npmrc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",npm_package_name:"ramp-pcar",GITHUB_ACTION:"__run_4",GITHUB_RUN_NUMBER:"131",GITHUB_TRIGGERING_ACTOR:"james-rae",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 2",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"v4.10.0",GITHUB_REPOSITORY:"ramp4-pcar4/ramp4-pcar4",STATS_D_D:"true",npm_lifecycle_script:"vite build --mode esDynamic",npm_config_loglevel:"silent",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"218356057",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"4.10.0",npm_lifecycle_event:"build:esDynamic",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",GITHUB_REF:"refs/tags/v4.10.0",GITHUB_ACTOR:"james-rae",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/22.12.0/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",GITHUB_ACTOR_ID:"7585245",RUNNER_WORKSPACE:"/home/runner/work/ramp4-pcar4",npm_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",ACTIONS_ID_TOKEN_REQUEST_URL:"https://pipelinesghubeus2.actions.githubusercontent.com/CYYZq0bGEiBG5XjoYFUt7ZUW3UppKtccmRBdNq2vSmlX4E20ap/00000000-0000-0000-0000-000000000000/_apis/distributedtask/hubs/Actions/plans/e33fb1dd-9222-42ba-b794-b484fd33f849/jobs/ca395085-040a-526b-2ce8-bdc85f692774/idtoken?api-version=2.0",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",npm_config_global_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",INIT_CWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",EDITOR:"vi",NODE_ENV:"production"};let zo;class hq{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zo,!t&&zo&&(this.index=(zo.scopes||(zo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=zo;try{return zo=this,t()}finally{zo=r}}}on(){zo=this}off(){zo=this.parent}stop(t){if(this._active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function BO(e){return new hq(e)}function pq(){return zo}function _we(e,t=!1){zo&&zo.cleanups.push(e)}let cn;const HP=new WeakSet;class nT{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zo&&zo.active&&zo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,HP.has(this)&&(HP.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Swe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ate(this),Ewe(this);const t=cn,r=uc;cn=this,uc=!0;try{return this.fn()}finally{Twe(this),cn=t,uc=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)mq(t);this.deps=this.depsTail=void 0,Ate(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?HP.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rU(this)&&this.run()}get dirty(){return rU(this)}}let xwe=0,hb;function Swe(e){e.flags|=8,e.next=hb,hb=e}function dq(){xwe++}function fq(){if(--xwe>0)return;let e;for(;hb;){let t=hb,r;for(;t;)t.flags&=-9,t=t.next;for(t=hb,hb=void 0;t;){if(t.flags&1)try{t.trigger()}catch(n){e||(e=n)}r=t.next,t.next=void 0,t=r}}if(e)throw e}function Ewe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Twe(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),mq(n),Zjt(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function rU(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Iwe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Iwe(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===iT))return;e.globalVersion=iT;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!rU(e)){e.flags&=-3;return}const r=cn,n=uc;cn=e,uc=!0;try{Ewe(e);const i=e.fn(e._value);(t.version===0||yo(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{cn=r,uc=n,Twe(e),e.flags&=-3}}function mq(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n),!r.subs&&r.computed){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)mq(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Zjt(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}function Jjt(e,t){e.effect instanceof nT&&(e=e.effect.fn);const r=new nT(e);t&&Kr(r,t);try{r.run()}catch(i){throw r.stop(),i}const n=r.run.bind(r);return n.effect=r,n}function Yjt(e){e.effect.stop()}let uc=!0;const Awe=[];function jd(){Awe.push(uc),uc=!1}function Ud(){const e=Awe.pop();uc=e===void 0?!0:e}function Ate(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=cn;cn=void 0;try{t()}finally{cn=r}}}let iT=0;class Xjt{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class VO{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!cn||!uc||cn===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==cn)r=this.activeLink=new Xjt(cn,this),cn.deps?(r.prevDep=cn.depsTail,cn.depsTail.nextDep=r,cn.depsTail=r):cn.deps=cn.depsTail=r,Mwe(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=cn.depsTail,r.nextDep=void 0,cn.depsTail.nextDep=r,cn.depsTail=r,cn.deps===r&&(cn.deps=n)}return r}trigger(t){this.version++,iT++,this.notify(t)}notify(t){dq();try{Wjt.NODE_ENV;for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{fq()}}}function Mwe(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Mwe(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const FC=new WeakMap,gg=Symbol(""),nU=Symbol(""),sT=Symbol("");function Oo(e,t,r){if(uc&&cn){let n=FC.get(e);n||FC.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new VO),i.target=e,i.map=n,i.key=r),i.track()}}function ud(e,t,r,n,i,s){const o=FC.get(e);if(!o){iT++;return}const a=l=>{l&&l.trigger()};if(dq(),t==="clear")o.forEach(a);else{const l=wt(e),u=l&&jO(r);if(l&&r==="length"){const c=Number(n);o.forEach((h,d)=>{(d==="length"||d===sT||!iu(d)&&d>=c)&&a(h)})}else switch(r!==void 0&&a(o.get(r)),u&&a(o.get(sT)),t){case"add":l?u&&a(o.get("length")):(a(o.get(gg)),fg(e)&&a(o.get(nU)));break;case"delete":l||(a(o.get(gg)),fg(e)&&a(o.get(nU)));break;case"set":fg(e)&&a(o.get(gg));break}}fq()}function Qjt(e,t){const r=FC.get(e);return r&&r.get(t)}function q1(e){const t=Xt(e);return t===e?t:(Oo(t,"iterate",sT),cl(e)?t:t.map(go))}function GO(e){return Oo(e=Xt(e),"iterate",sT),e}const Kjt={__proto__:null,[Symbol.iterator](){return WP(this,Symbol.iterator,go)},concat(...e){return q1(this).concat(...e.map(t=>wt(t)?q1(t):t))},entries(){return WP(this,"entries",e=>(e[1]=go(e[1]),e))},every(e,t){return Jh(this,"every",e,t,void 0,arguments)},filter(e,t){return Jh(this,"filter",e,t,r=>r.map(go),arguments)},find(e,t){return Jh(this,"find",e,t,go,arguments)},findIndex(e,t){return Jh(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Jh(this,"findLast",e,t,go,arguments)},findLastIndex(e,t){return Jh(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Jh(this,"forEach",e,t,void 0,arguments)},includes(...e){return ZP(this,"includes",e)},indexOf(...e){return ZP(this,"indexOf",e)},join(e){return q1(this).join(e)},lastIndexOf(...e){return ZP(this,"lastIndexOf",e)},map(e,t){return Jh(this,"map",e,t,void 0,arguments)},pop(){return w2(this,"pop")},push(...e){return w2(this,"push",e)},reduce(e,...t){return Mte(this,"reduce",e,t)},reduceRight(e,...t){return Mte(this,"reduceRight",e,t)},shift(){return w2(this,"shift")},some(e,t){return Jh(this,"some",e,t,void 0,arguments)},splice(...e){return w2(this,"splice",e)},toReversed(){return q1(this).toReversed()},toSorted(e){return q1(this).toSorted(e)},toSpliced(...e){return q1(this).toSpliced(...e)},unshift(...e){return w2(this,"unshift",e)},values(){return WP(this,"values",go)}};function WP(e,t,r){const n=GO(e),i=n[t]();return n!==e&&!cl(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=r(s.value)),s}),i}const eUt=Array.prototype;function Jh(e,t,r,n,i,s){const o=GO(e),a=o!==e&&!cl(e),l=o[t];if(l!==eUt[t]){const h=l.apply(e,s);return a?go(h):h}let u=r;o!==e&&(a?u=function(h,d){return r.call(this,go(h),d,e)}:r.length>2&&(u=function(h,d){return r.call(this,h,d,e)}));const c=l.call(o,u,n);return a&&i?i(c):c}function Mte(e,t,r,n){const i=GO(e);let s=r;return i!==e&&(cl(e)?r.length>3&&(s=function(o,a,l){return r.call(this,o,a,l,e)}):s=function(o,a,l){return r.call(this,o,go(a),l,e)}),i[t](s,...n)}function ZP(e,t,r){const n=Xt(e);Oo(n,"iterate",sT);const i=n[t](...r);return(i===-1||i===!1)&&HO(r[0])?(r[0]=Xt(r[0]),n[t](...r)):i}function w2(e,t,r=[]){jd(),dq();const n=Xt(e)[t].apply(e,r);return fq(),Ud(),n}const tUt=ia("__proto__,__v_isRef,__isVue"),Cwe=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(iu));function rUt(e){iu(e)||(e=String(e));const t=Xt(this);return Oo(t,"has",e),t.hasOwnProperty(e)}class kwe{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){const i=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(i?s?Dwe:Pwe:s?Lwe:Nwe).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=wt(t);if(!i){let l;if(o&&(l=Kjt[r]))return l;if(r==="hasOwnProperty")return rUt}const a=Reflect.get(t,r,wr(t)?t:n);return(iu(r)?Cwe.has(r):tUt(r))||(i||Oo(t,"get",r),s)?a:wr(a)?o&&jO(r)?a:a.value:zr(a)?i?gq(a):Ts(a):a}}class Rwe extends kwe{constructor(t=!1){super(!1,t)}set(t,r,n,i){let s=t[r];if(!this._isShallow){const l=Vm(s);if(!cl(n)&&!Vm(n)&&(s=Xt(s),n=Xt(n)),!wt(t)&&wr(s)&&!wr(n))return l?!1:(s.value=n,!0)}const o=wt(t)&&jO(r)?Number(r)<t.length:Ar(t,r),a=Reflect.set(t,r,n,wr(t)?t:i);return t===Xt(i)&&(o?yo(n,s)&&ud(t,"set",r,n):ud(t,"add",r,n)),a}deleteProperty(t,r){const n=Ar(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&ud(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!iu(r)||!Cwe.has(r))&&Oo(t,"has",r),n}ownKeys(t){return Oo(t,"iterate",wt(t)?"length":gg),Reflect.ownKeys(t)}}class Owe extends kwe{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const nUt=new Rwe,iUt=new Owe,sUt=new Rwe(!0),oUt=new Owe(!0),yq=e=>e,zO=e=>Reflect.getPrototypeOf(e);function _A(e,t,r=!1,n=!1){e=e.__v_raw;const i=Xt(e),s=Xt(t);r||(yo(t,s)&&Oo(i,"get",t),Oo(i,"get",s));const{has:o}=zO(i),a=n?yq:r?vq:go;if(o.call(i,t))return a(e.get(t));if(o.call(i,s))return a(e.get(s));e!==i&&e.get(t)}function xA(e,t=!1){const r=this.__v_raw,n=Xt(r),i=Xt(e);return t||(yo(e,i)&&Oo(n,"has",e),Oo(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function SA(e,t=!1){return e=e.__v_raw,!t&&Oo(Xt(e),"iterate",gg),Reflect.get(e,"size",e)}function Cte(e,t=!1){!t&&!cl(e)&&!Vm(e)&&(e=Xt(e));const r=Xt(this);return zO(r).has.call(r,e)||(r.add(e),ud(r,"add",e,e)),this}function kte(e,t,r=!1){!r&&!cl(t)&&!Vm(t)&&(t=Xt(t));const n=Xt(this),{has:i,get:s}=zO(n);let o=i.call(n,e);o||(e=Xt(e),o=i.call(n,e));const a=s.call(n,e);return n.set(e,t),o?yo(t,a)&&ud(n,"set",e,t):ud(n,"add",e,t),this}function Rte(e){const t=Xt(this),{has:r,get:n}=zO(t);let i=r.call(t,e);i||(e=Xt(e),i=r.call(t,e)),n&&n.call(t,e);const s=t.delete(e);return i&&ud(t,"delete",e,void 0),s}function Ote(){const e=Xt(this),t=e.size!==0,r=e.clear();return t&&ud(e,"clear",void 0,void 0),r}function EA(e,t){return function(r,n){const i=this,s=i.__v_raw,o=Xt(s),a=t?yq:e?vq:go;return!e&&Oo(o,"iterate",gg),s.forEach((l,u)=>r.call(n,a(l),a(u),i))}}function TA(e,t,r){return function(...n){const i=this.__v_raw,s=Xt(i),o=fg(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...n),c=r?yq:t?vq:go;return!t&&Oo(s,"iterate",l?nU:gg),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[c(h[0]),c(h[1])]:c(h),done:d}},[Symbol.iterator](){return this}}}}function ef(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function aUt(){const e={get(i){return _A(this,i)},get size(){return SA(this)},has:xA,add:Cte,set:kte,delete:Rte,clear:Ote,forEach:EA(!1,!1)},t={get(i){return _A(this,i,!1,!0)},get size(){return SA(this)},has:xA,add(i){return Cte.call(this,i,!0)},set(i,s){return kte.call(this,i,s,!0)},delete:Rte,clear:Ote,forEach:EA(!1,!0)},r={get(i){return _A(this,i,!0)},get size(){return SA(this,!0)},has(i){return xA.call(this,i,!0)},add:ef("add"),set:ef("set"),delete:ef("delete"),clear:ef("clear"),forEach:EA(!0,!1)},n={get(i){return _A(this,i,!0,!0)},get size(){return SA(this,!0)},has(i){return xA.call(this,i,!0)},add:ef("add"),set:ef("set"),delete:ef("delete"),clear:ef("clear"),forEach:EA(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=TA(i,!1,!1),r[i]=TA(i,!0,!1),t[i]=TA(i,!1,!0),n[i]=TA(i,!0,!0)}),[e,r,t,n]}const[lUt,uUt,cUt,hUt]=aUt();function $O(e,t){const r=t?e?hUt:cUt:e?uUt:lUt;return(n,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Ar(r,i)&&i in n?r:n,i,s)}const pUt={get:$O(!1,!1)},dUt={get:$O(!1,!0)},fUt={get:$O(!0,!1)},mUt={get:$O(!0,!0)},Nwe=new WeakMap,Lwe=new WeakMap,Pwe=new WeakMap,Dwe=new WeakMap;function yUt(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gUt(e){return e.__v_skip||!Object.isExtensible(e)?0:yUt(lwe(e))}function Ts(e){return Vm(e)?e:qO(e,!1,nUt,pUt,Nwe)}function Fwe(e){return qO(e,!1,sUt,dUt,Lwe)}function gq(e){return qO(e,!0,iUt,fUt,Pwe)}function uS(e){return qO(e,!0,oUt,mUt,Dwe)}function qO(e,t,r,n,i){if(!zr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=gUt(e);if(o===0)return e;const a=new Proxy(e,o===2?n:r);return i.set(e,a),a}function Wl(e){return Vm(e)?Wl(e.__v_raw):!!(e&&e.__v_isReactive)}function Vm(e){return!!(e&&e.__v_isReadonly)}function cl(e){return!!(e&&e.__v_isShallow)}function HO(e){return e?!!e.__v_raw:!1}function Xt(e){const t=e&&e.__v_raw;return t?Xt(t):e}function wi(e){return!Ar(e,"__v_skip")&&Object.isExtensible(e)&&oq(e,"__v_skip",!0),e}const go=e=>zr(e)?Ts(e):e,vq=e=>zr(e)?gq(e):e;function wr(e){return e?e.__v_isRef===!0:!1}function Le(e){return jwe(e,!1)}function j3(e){return jwe(e,!0)}function jwe(e,t){return wr(e)?e:new vUt(e,t)}class vUt{constructor(t,r){this.dep=new VO,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Xt(t),this._value=r?t:go(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||cl(t)||Vm(t);t=n?t:Xt(t),yo(t,r)&&(this._rawValue=t,this._value=n?t:go(t),this.dep.trigger())}}function bUt(e){e.dep&&e.dep.trigger()}function Tt(e){return wr(e)?e.value:e}function wUt(e){return zt(e)?e():Tt(e)}const _Ut={get:(e,t,r)=>t==="__v_raw"?e:Tt(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return wr(i)&&!wr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function bq(e){return Wl(e)?e:new Proxy(e,_Ut)}class xUt{constructor(t){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new VO,{get:n,set:i}=t(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=i}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Uwe(e){return new xUt(e)}function wq(e){const t=wt(e)?new Array(e.length):{};for(const r in e)t[r]=Vwe(e,r);return t}class SUt{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Qjt(Xt(this._object),this._key)}}class EUt{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Bwe(e,t,r){return wr(e)?e:zt(e)?new EUt(e):zr(e)&&arguments.length>1?Vwe(e,t,r):Le(e)}function Vwe(e,t,r){const n=e[t];return wr(n)?n:new SUt(e,t,r)}class TUt{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new VO(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=iT-1,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&cn!==this)return Swe(this),!0}get value(){const t=this.dep.track();return Iwe(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function IUt(e,t,r=!1){let n,i;return zt(e)?n=e:(n=e.get,i=e.set),new TUt(n,i,r)}const AUt={GET:"get",HAS:"has",ITERATE:"iterate"},MUt={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},IA={},jC=new WeakMap;let Wf;function CUt(){return Wf}function Gwe(e,t=!1,r=Wf){if(r){let n=jC.get(r);n||jC.set(r,n=[]),n.push(e)}}function kUt(e,t,r=yr){const{immediate:n,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=r,u=w=>i?w:cl(w)||i===!1||i===0?Jp(w,1):Jp(w);let c,h,d,m,y=!1,g=!1;if(wr(e)?(h=()=>e.value,y=cl(e)):Wl(e)?(h=()=>u(e),y=!0):wt(e)?(g=!0,y=e.some(w=>Wl(w)||cl(w)),h=()=>e.map(w=>{if(wr(w))return w.value;if(Wl(w))return u(w);if(zt(w))return l?l(w,2):w()})):zt(e)?t?h=l?()=>l(e,2):e:h=()=>{if(d){jd();try{d()}finally{Ud()}}const w=Wf;Wf=c;try{return l?l(e,3,[m]):e(m)}finally{Wf=w}}:h=La,t&&i){const w=h,T=i===!0?1/0:i;h=()=>Jp(w(),T)}const b=pq(),S=()=>{c.stop(),b&&DO(b.effects,c)};if(s&&t){const w=t;t=(...T)=>{w(...T),S()}}let E=g?new Array(e.length).fill(IA):IA;const x=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const T=c.run();if(i||y||(g?T.some((I,M)=>yo(I,E[M])):yo(T,E))){d&&d();const I=Wf;Wf=c;try{const M=[T,E===IA?void 0:g&&E[0]===IA?[]:E,m];l?l(t,3,M):t(...M),E=T}finally{Wf=I}}}else c.run()};return a&&a(x),c=new nT(h),c.scheduler=o?()=>o(x,!1):x,m=w=>Gwe(w,!1,c),d=c.onStop=()=>{const w=jC.get(c);if(w){if(l)l(w,4);else for(const T of w)T();jC.delete(c)}},t?n?x(!0):E=c.run():o?o(x.bind(null,!0),!0):c.run(),S.pause=c.pause.bind(c),S.resume=c.resume.bind(c),S.stop=S,S}function Jp(e,t=1/0,r){if(t<=0||!zr(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,wr(e))Jp(e.value,t,r);else if(wt(e))for(let n=0;n<e.length;n++)Jp(e[n],t,r);else if(s0(e)||fg(e))e.forEach(n=>{Jp(n,t,r)});else if(D3(e)){for(const n in e)Jp(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Jp(e[n],t,r)}return e}var Zf={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_always_auth:"",npm_config_user_agent:"npm/10.9.0 node/v22.12.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",NODE_AUTH_TOKEN:"XXXXX-XXXXX-XXXXX-XXXXX",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ramp4-pcar4",npm_package_engines_node:"=22.12.0",GRADLE_HOME:"/usr/share/gradle-8.11.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"57148724",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_local_prefix:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",SYSTEMD_EXEC_PID:"833",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241215.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.10/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.4/x64",JOURNAL_STREAM:"8:6481",GITHUB_WORKFLOW:"Build demo site and deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/22.12.0/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",npm_config_npm_version:"10.9.0",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"12419971258",STATS_VMFE:"true",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"tag",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ramp4-pcar4/ramp4-pcar4/.github/workflows/demo-build.yml@refs/tags/v4.10.0",ACTIONS_ID_TOKEN_REQUEST_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikh5cTROQVRBanNucUM3bWRydEFoaHJDUjJfUSJ9.eyJuYW1laWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJzY3AiOiJBY3Rpb25zLkdlbmVyaWNSZWFkOjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCBBY3Rpb25zLlJlc3VsdHM6ZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5OmNhMzk1MDg1LTA0MGEtNTI2Yi0yY2U4LWJkYzg1ZjY5Mjc3NCBBY3Rpb25zLlVwbG9hZEFydGlmYWN0czowMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAvMTpCdWlsZC9CdWlsZC8xMTc5NyBEaXN0cmlidXRlZFRhc2suR2VuZXJhdGVJZFRva2VuOmUzM2ZiMWRkLTkyMjItNDJiYS1iNzk0LWI0ODRmZDMzZjg0OTpjYTM5NTA4NS0wNDBhLTUyNmItMmNlOC1iZGM4NWY2OTI3NzQgTG9jYXRpb25TZXJ2aWNlLkNvbm5lY3QgUmVhZEFuZFVwZGF0ZUJ1aWxkQnlVcmk6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwLzE6QnVpbGQvQnVpbGQvMTE3OTciLCJJZGVudGl0eVR5cGVDbGFpbSI6IlN5c3RlbTpTZXJ2aWNlSWRlbnRpdHkiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiJERERERERERC1ERERELUREREQtRERERC1EREREREREREREREQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3ByaW1hcnlzaWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJhdWkiOiIxZmE4NDE2ZS05OTQzLTRlMWEtYjY4MS1hODAxOGQxOGIzNzQiLCJzaWQiOiJhMDllZjkzMi04YjkxLTQyNGEtOWZhOC1lODZkM2FiODhlNDEiLCJhYyI6Ilt7XCJTY29wZVwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcIlBlcm1pc3Npb25cIjozfSx7XCJTY29wZVwiOlwicmVmcy9oZWFkcy9tYWluXCIsXCJQZXJtaXNzaW9uXCI6MX1dIiwiYWNzbCI6IjEwIiwib2lkY19leHRyYSI6IntcInJlZlwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcInNoYVwiOlwiMWYzMmY1YzRkZWRhZDdhYzM1YTc4OTVlN2Y3NDBkOWU0ODM1OTkwM1wiLFwicmVwb3NpdG9yeVwiOlwicmFtcDQtcGNhcjQvcmFtcDQtcGNhcjRcIixcInJlcG9zaXRvcnlfb3duZXJcIjpcInJhbXA0LXBjYXI0XCIsXCJyZXBvc2l0b3J5X293bmVyX2lkXCI6XCI1NzE0ODcyNFwiLFwicnVuX2lkXCI6XCIxMjQxOTk3MTI1OFwiLFwicnVuX251bWJlclwiOlwiMTMxXCIsXCJydW5fYXR0ZW1wdFwiOlwiMVwiLFwicmVwb3NpdG9yeV92aXNpYmlsaXR5XCI6XCJwdWJsaWNcIixcInJlcG9zaXRvcnlfaWRcIjpcIjIxODM1NjA1N1wiLFwiYWN0b3JfaWRcIjpcIjc1ODUyNDVcIixcImFjdG9yXCI6XCJqYW1lcy1yYWVcIixcIndvcmtmbG93XCI6XCJCdWlsZCBkZW1vIHNpdGUgYW5kIGRlcGxveSB0byBHaXRIdWIgUGFnZXNcIixcImhlYWRfcmVmXCI6XCJcIixcImJhc2VfcmVmXCI6XCJcIixcImV2ZW50X25hbWVcIjpcInB1c2hcIixcInJlZl9wcm90ZWN0ZWRcIjpcImZhbHNlXCIsXCJyZWZfdHlwZVwiOlwidGFnXCIsXCJ3b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJ3b3JrZmxvd19zaGFcIjpcIjFmMzJmNWM0ZGVkYWQ3YWMzNWE3ODk1ZTdmNzQwZDllNDgzNTk5MDNcIixcImVudmlyb25tZW50XCI6XCJnaXRodWItcGFnZXNcIixcImVudmlyb25tZW50X25vZGVfaWRcIjpcIkVOX2t3RE9EUVBaV2M0ZUV4MlpcIixcImpvYl93b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJqb2Jfd29ya2Zsb3dfc2hhXCI6XCIxZjMyZjVjNGRlZGFkN2FjMzVhNzg5NWU3Zjc0MGQ5ZTQ4MzU5OTAzXCIsXCJydW5uZXJfZW52aXJvbm1lbnRcIjpcImdpdGh1Yi1ob3N0ZWRcIn0iLCJvaWRjX3N1YiI6InJlcG86cmFtcDQtcGNhcjQvcmFtcDQtcGNhcjQ6ZW52aXJvbm1lbnQ6Z2l0aHViLXBhZ2VzIiwib3JjaGlkIjoiZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5LmJ1aWxkLl9fZGVmYXVsdCIsImlzcyI6InZzdG9rZW4uYWN0aW9ucy5naXRodWJ1c2VyY29udGVudC5jb20iLCJhdWQiOiJ2c3Rva2VuLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tfHZzbzpkYzhlN2U0ZC00ZDQ1LTQ4ZDAtYmY4YS02YmQ0YzZjMjQ2MDciLCJuYmYiOjE3MzQ2MzgxODcsImV4cCI6MTczNDY2MDk4N30.RARk5esxipY8hoZlRACe-X_yM76TNaGPNYLTOeo3QHil127k0ynntWTAIhvG4AnWGYhGaYy4r4nNazwMI7YVAcri6W6w4txoRtMEUdA20vrF04HAvi2LIMPtdLXXW03zl6hIVd22jIGJI6t6hor6a8dQKa5uN4XR_tcXzEI8Vhv3S4R4fOIPJthxGXdW5oC06Arc0YSPRDRDTk-Lb4qXWQVoaQ4oHaRZGaA0xHNITcKkzLN9AHvPFnzaIyK4iQ8Zr_0B2I-Tyor7AAKyCfvKVt980mzK76axB0fid1T0ATLZNg8nftwlvB-y9u-KqFPIf8iOeoMrMNQVV9FHigeU7w",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/22.12.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_f84c0023-8fe3-4772-972b-468f8650057c",INVOCATION_ID:"b4280ab4ab86413d99aedf730c4ee39c",NPM_CONFIG_USERCONFIG:"/home/runner/work/_temp/.npmrc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",npm_package_name:"ramp-pcar",GITHUB_ACTION:"__run_4",GITHUB_RUN_NUMBER:"131",GITHUB_TRIGGERING_ACTOR:"james-rae",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 2",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"v4.10.0",GITHUB_REPOSITORY:"ramp4-pcar4/ramp4-pcar4",STATS_D_D:"true",npm_lifecycle_script:"vite build --mode esDynamic",npm_config_loglevel:"silent",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"218356057",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"4.10.0",npm_lifecycle_event:"build:esDynamic",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",GITHUB_REF:"refs/tags/v4.10.0",GITHUB_ACTOR:"james-rae",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/22.12.0/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",GITHUB_ACTOR_ID:"7585245",RUNNER_WORKSPACE:"/home/runner/work/ramp4-pcar4",npm_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",ACTIONS_ID_TOKEN_REQUEST_URL:"https://pipelinesghubeus2.actions.githubusercontent.com/CYYZq0bGEiBG5XjoYFUt7ZUW3UppKtccmRBdNq2vSmlX4E20ap/00000000-0000-0000-0000-000000000000/_apis/distributedtask/hubs/Actions/plans/e33fb1dd-9222-42ba-b794-b484fd33f849/jobs/ca395085-040a-526b-2ce8-bdc85f692774/idtoken?api-version=2.0",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",npm_config_global_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",INIT_CWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",EDITOR:"vi",NODE_ENV:"production"};const vg=[];function RUt(e){vg.push(e)}function OUt(){vg.pop()}let JP=!1;function NUt(e,...t){if(JP)return;JP=!0,jd();const r=vg.length?vg[vg.length-1].component:null,n=r&&r.appContext.config.warnHandler,i=LUt();if(n)S1(n,r,11,[e+t.map(s=>{var o,a;return(a=(o=s.toString)==null?void 0:o.call(s))!=null?a:JSON.stringify(s)}).join(""),r&&r.proxy,i.map(({vnode:s})=>`at <${W_e(r,s.type)}>`).join(`
`),i]);else{const s=[`[Vue warn]: ${e}`,...t];i.length&&s.push(`
`,...PUt(i)),console.warn(...s)}Ud(),JP=!1}function LUt(){let e=vg[vg.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function PUt(e){const t=[];return e.forEach((r,n)=>{t.push(...n===0?[]:[`
`],...DUt(r))}),t}function DUt({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,i=` at <${W_e(e.component,e.type,n)}`,s=">"+r;return e.props?[i,...FUt(e.props),s]:[i+s]}function FUt(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(n=>{t.push(...zwe(n,e[n]))}),r.length>3&&t.push(" ..."),t}function zwe(e,t,r){return Lr(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:wr(t)?(t=zwe(e,Xt(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):zt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Xt(t),r?t:[`${e}=`,t])}function jUt(e,t){}const UUt={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},BUt={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function S1(e,t,r,n){try{return n?e(...n):e()}catch(i){E1(i,t,r)}}function su(e,t,r,n){if(zt(e)){const i=S1(e,t,r,n);return i&&FO(i)&&i.catch(s=>{E1(s,t,r)}),i}if(wt(e)){const i=[];for(let s=0;s<e.length;s++)i.push(su(e[s],t,r,n));return i}}function E1(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||yr;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,l,u)===!1)return}a=a.parent}if(s){jd(),S1(s,null,10,[e,l,u]),Ud();return}}VUt(e,r,i,n,o)}function VUt(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}let oT=!1,iU=!1;const Ho=[];let Qc=0;const Zb=[];let Jf=null,Wv=0;const $we=Promise.resolve();let _q=null;function xc(e){const t=_q||$we;return e?t.then(this?e.bind(this):e):t}function GUt(e){let t=oT?Qc+1:0,r=Ho.length;for(;t<r;){const n=t+r>>>1,i=Ho[n],s=aT(i);s<e||s===e&&i.flags&2?t=n+1:r=n}return t}function xq(e){if(!(e.flags&1)){const t=aT(e),r=Ho[Ho.length-1];!r||!(e.flags&2)&&t>=aT(r)?Ho.push(e):Ho.splice(GUt(t),0,e),e.flags|=1,qwe()}}function qwe(){!oT&&!iU&&(iU=!0,_q=$we.then(Hwe))}function UC(e){wt(e)?Zb.push(...e):Jf&&e.id===-1?Jf.splice(Wv+1,0,e):e.flags&1||(Zb.push(e),e.flags|=1),qwe()}function Nte(e,t,r=oT?Qc+1:0){for(;r<Ho.length;r++){const n=Ho[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Ho.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function BC(e){if(Zb.length){const t=[...new Set(Zb)].sort((r,n)=>aT(r)-aT(n));if(Zb.length=0,Jf){Jf.push(...t);return}for(Jf=t,Wv=0;Wv<Jf.length;Wv++){const r=Jf[Wv];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Jf=null,Wv=0}}const aT=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Hwe(e){iU=!1,oT=!0;const t=La;try{for(Qc=0;Qc<Ho.length;Qc++){const r=Ho[Qc];r&&!(r.flags&8)&&(Zf.NODE_ENV!=="production"&&t(r),r.flags&4&&(r.flags&=-2),S1(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;Qc<Ho.length;Qc++){const r=Ho[Qc];r&&(r.flags&=-2)}Qc=0,Ho.length=0,BC(),oT=!1,_q=null,(Ho.length||Zb.length)&&Hwe()}}let Zv,AA=[];function Wwe(e,t){var r,n;Zv=e,Zv?(Zv.enabled=!0,AA.forEach(({event:i,args:s})=>Zv.emit(i,...s)),AA=[]):typeof window<"u"&&window.HTMLElement&&!((n=(r=window.navigator)==null?void 0:r.userAgent)!=null&&n.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{Wwe(i,t)}),setTimeout(()=>{Zv||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,AA=[])},3e3)):AA=[]}let Xi=null,WO=null;function lT(e){const t=Xi;return Xi=e,WO=e&&e.type.__scopeId||null,t}function zUt(e){WO=e}function $Ut(){WO=null}const qUt=e=>xi;function xi(e,t=Xi,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&pU(-1);const s=lT(t);let o;try{o=e(...i)}finally{lT(s),n._d&&pU(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function $r(e,t){if(Xi===null)return e;const r=z3(Xi),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,o,a,l=yr]=t[i];s&&(zt(s)&&(s={mounted:s,updated:s}),s.deep&&Jp(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function ih(e,t,r,n){const i=e.dirs,s=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(jd(),su(l,r,8,[e.el,a,e,t]),Ud())}}const Zwe=Symbol("_vte"),Jwe=e=>e.__isTeleport,YS=e=>e&&(e.disabled||e.disabled===""),HUt=e=>e&&(e.defer||e.defer===""),Lte=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Pte=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,sU=(e,t)=>{const r=e&&e.to;return Lr(r)?t?t(r):null:r},WUt={name:"Teleport",__isTeleport:!0,process(e,t,r,n,i,s,o,a,l,u){const{mc:c,pc:h,pbc:d,o:{insert:m,querySelector:y,createText:g,createComment:b}}=u,S=YS(t.props);let{shapeFlag:E,children:x,dynamicChildren:w}=t;if(e==null){const T=t.el=g(""),I=t.anchor=g("");m(T,r,n),m(I,r,n);const M=(k,N)=>{E&16&&(i&&i.isCE&&(i.ce._teleportTarget=k),c(x,k,N,i,s,o,a,l))},C=()=>{const k=t.target=sU(t.props,y),N=Xwe(k,t,g,m);k&&(o!=="svg"&&Lte(k)?o="svg":o!=="mathml"&&Pte(k)&&(o="mathml"),S||(M(k,N),V4(t)))};S&&(M(r,I),V4(t)),HUt(t.props)?ys(C,s):C()}else{t.el=e.el,t.targetStart=e.targetStart;const T=t.anchor=e.anchor,I=t.target=e.target,M=t.targetAnchor=e.targetAnchor,C=YS(e.props),k=C?r:I,N=C?T:M;if(o==="svg"||Lte(I)?o="svg":(o==="mathml"||Pte(I))&&(o="mathml"),w?(d(e.dynamicChildren,w,k,i,s,o,a),Pq(e,t,!0)):l||h(e,t,k,N,i,s,o,a,!1),S)C?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):MA(t,r,T,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const F=t.target=sU(t.props,y);F&&MA(t,F,null,u,0)}else C&&MA(t,I,M,u,1);V4(t)}},remove(e,t,r,{um:n,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:h,props:d}=e;if(h&&(i(u),i(c)),s&&i(l),o&16){const m=s||!YS(d);for(let y=0;y<a.length;y++){const g=a[y];n(g,t,r,m,!!g.dynamicChildren)}}},move:MA,hydrate:ZUt};function MA(e,t,r,{o:{insert:n},m:i},s=2){s===0&&n(e.targetAnchor,t,r);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=e,h=s===2;if(h&&n(o,t,r),(!h||YS(c))&&l&16)for(let d=0;d<u.length;d++)i(u[d],t,r,2);h&&n(a,t,r)}function ZUt(e,t,r,n,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},h){const d=t.target=sU(t.props,l);if(d){const m=d._lpa||d.firstChild;if(t.shapeFlag&16)if(YS(t.props))t.anchor=h(o(e),t,a(e),r,n,i,s),t.targetStart=m,t.targetAnchor=m&&o(m);else{t.anchor=o(e);let y=m;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")t.targetStart=y;else if(y.data==="teleport anchor"){t.targetAnchor=y,d._lpa=t.targetAnchor&&o(t.targetAnchor);break}}y=o(y)}t.targetAnchor||Xwe(d,t,c,u),h(m&&o(m),t,d,r,n,i,s)}V4(t)}return t.anchor&&o(t.anchor)}const Ywe=WUt;function V4(e){const t=e.ctx;if(t&&t.ut){let r=e.targetStart;for(;r&&r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Xwe(e,t,r,n){const i=t.targetStart=r(""),s=t.targetAnchor=r("");return i[Zwe]=s,e&&(n(i,e),n(s,e)),s}const Yf=Symbol("_leaveCb"),CA=Symbol("_enterCb");function Sq(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qs(()=>{e.isMounted=!0}),Sc(()=>{e.isUnmounting=!0}),e}const wl=[Function,Array],Eq={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:wl,onEnter:wl,onAfterEnter:wl,onEnterCancelled:wl,onBeforeLeave:wl,onLeave:wl,onAfterLeave:wl,onLeaveCancelled:wl,onBeforeAppear:wl,onAppear:wl,onAfterAppear:wl,onAppearCancelled:wl},Qwe=e=>{const t=e.subTree;return t.component?Qwe(t.component):t},JUt={name:"BaseTransition",props:Eq,setup(e,{slots:t}){const r=rs(),n=Sq();return()=>{const i=t.default&&ZO(t.default(),!0);if(!i||!i.length)return;const s=Kwe(i),o=Xt(e),{mode:a}=o;if(n.isLeaving)return YP(s);const l=Dte(s);if(!l)return YP(s);let u=Rw(l,o,n,r,d=>u=d);l.type!==Pi&&Sd(l,u);const c=r.subTree,h=c&&Dte(c);if(h&&h.type!==Pi&&!Zu(l,h)&&Qwe(r).type!==Pi){const d=Rw(h,o,n,r);if(Sd(h,d),a==="out-in"&&l.type!==Pi)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave},YP(s);a==="in-out"&&l.type!==Pi&&(d.delayLeave=(m,y,g)=>{const b=t_e(n,h);b[String(h.key)]=h,m[Yf]=()=>{y(),m[Yf]=void 0,delete u.delayedLeave},u.delayedLeave=g})}return s}}};function Kwe(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Pi){t=r;break}}return t}const e_e=JUt;function t_e(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Rw(e,t,r,n,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:h,onBeforeLeave:d,onLeave:m,onAfterLeave:y,onLeaveCancelled:g,onBeforeAppear:b,onAppear:S,onAfterAppear:E,onAppearCancelled:x}=t,w=String(e.key),T=t_e(r,e),I=(k,N)=>{k&&su(k,n,9,N)},M=(k,N)=>{const F=N[1];I(k,N),wt(k)?k.every(P=>P.length<=1)&&F():k.length<=1&&F()},C={mode:o,persisted:a,beforeEnter(k){let N=l;if(!r.isMounted)if(s)N=b||l;else return;k[Yf]&&k[Yf](!0);const F=T[w];F&&Zu(e,F)&&F.el[Yf]&&F.el[Yf](),I(N,[k])},enter(k){let N=u,F=c,P=h;if(!r.isMounted)if(s)N=S||u,F=E||c,P=x||h;else return;let B=!1;const O=k[CA]=v=>{B||(B=!0,v?I(P,[k]):I(F,[k]),C.delayedLeave&&C.delayedLeave(),k[CA]=void 0)};N?M(N,[k,O]):O()},leave(k,N){const F=String(e.key);if(k[CA]&&k[CA](!0),r.isUnmounting)return N();I(d,[k]);let P=!1;const B=k[Yf]=O=>{P||(P=!0,N(),O?I(g,[k]):I(y,[k]),k[Yf]=void 0,T[F]===e&&delete T[F])};T[F]=e,m?M(m,[k,B]):B()},clone(k){const N=Rw(k,t,r,n,i);return i&&i(N),N}};return C}function YP(e){if(U3(e))return e=Oh(e),e.children=null,e}function Dte(e){if(!U3(e))return Jwe(e.type)&&e.children?Kwe(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&zt(r.default))return r.default()}}function Sd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Sd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ZO(e,t=!1,r){let n=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:s);o.type===Zr?(o.patchFlag&128&&i++,n=n.concat(ZO(o.children,t,a))):(t||o.type!==Pi)&&n.push(a!=null?Oh(o,{key:a}):o)}if(i>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function mr(e,t){return zt(e)?Kr({name:e.name},t,{setup:e}):e}function YUt(){const e=rs();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Tq(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function VC(e){const t=rs(),r=j3(null);if(t){const n=t.refs===yr?t.refs={}:t.refs;Object.defineProperty(n,e,{enumerable:!0,get:()=>r.value,set:i=>r.value=i})}return r}function GC(e,t,r,n,i=!1){if(wt(e)){e.forEach((y,g)=>GC(y,t&&(wt(t)?t[g]:t),r,n,i));return}if(Em(n)&&!i)return;const s=n.shapeFlag&4?z3(n.component):n.el,o=i?null:s,{i:a,r:l}=e,u=t&&t.r,c=a.refs===yr?a.refs={}:a.refs,h=a.setupState,d=Xt(h),m=h===yr?()=>!1:y=>Ar(d,y);if(u!=null&&u!==l&&(Lr(u)?(c[u]=null,m(u)&&(h[u]=null)):wr(u)&&(u.value=null)),zt(l))S1(l,a,12,[o,c]);else{const y=Lr(l),g=wr(l);if(y||g){const b=()=>{if(e.f){const S=y?m(l)?h[l]:c[l]:l.value;i?wt(S)&&DO(S,s):wt(S)?S.includes(s)||S.push(s):y?(c[l]=[s],m(l)&&(h[l]=c[l])):(l.value=[s],e.k&&(c[e.k]=l.value))}else y?(c[l]=o,m(l)&&(h[l]=o)):g&&(l.value=o,e.k&&(c[e.k]=o))};o?(b.id=-1,ys(b,r)):b()}}}let Fte=!1;const H1=()=>{Fte||(console.error("Hydration completed but contains mismatches."),Fte=!0)},XUt=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",QUt=e=>e.namespaceURI.includes("MathML"),kA=e=>{if(e.nodeType===1){if(XUt(e))return"svg";if(QUt(e))return"mathml"}},pb=e=>e.nodeType===8;function KUt(e){const{mt:t,p:r,o:{patchProp:n,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=e,c=(x,w)=>{if(!w.hasChildNodes()){r(null,x,w),BC(),w._vnode=x;return}h(w.firstChild,x,null,null,null),BC(),w._vnode=x},h=(x,w,T,I,M,C=!1)=>{C=C||!!w.dynamicChildren;const k=pb(x)&&x.data==="[",N=()=>g(x,w,T,I,M,k),{type:F,ref:P,shapeFlag:B,patchFlag:O}=w;let v=x.nodeType;w.el=x,O===-2&&(C=!1,w.dynamicChildren=null);let A=null;switch(F){case cd:v!==3?w.children===""?(l(w.el=i(""),o(x),x),A=x):A=N():(x.data!==w.children&&(H1(),x.data=w.children),A=s(x));break;case Pi:E(x)?(A=s(x),S(w.el=x.content.firstChild,x,T)):v!==8||k?A=N():A=s(x);break;case wg:if(k&&(x=s(x),v=x.nodeType),v===1||v===3){A=x;const R=!w.children.length;for(let U=0;U<w.staticCount;U++)R&&(w.children+=A.nodeType===1?A.outerHTML:A.data),U===w.staticCount-1&&(w.anchor=A),A=s(A);return k?s(A):A}else N();break;case Zr:k?A=y(x,w,T,I,M,C):A=N();break;default:if(B&1)(v!==1||w.type.toLowerCase()!==x.tagName.toLowerCase())&&!E(x)?A=N():A=d(x,w,T,I,M,C);else if(B&6){w.slotScopeIds=M;const R=o(x);if(k?A=b(x):pb(x)&&x.data==="teleport start"?A=b(x,x.data,"teleport end"):A=s(x),t(w,R,null,T,I,kA(R),C),Em(w)){let U;k?(U=ar(Zr),U.anchor=A?A.previousSibling:R.lastChild):U=x.nodeType===3?xh(""):ar("div"),U.el=x,w.component.subTree=U}}else B&64?v!==8?A=N():A=w.type.hydrate(x,w,T,I,M,C,e,m):B&128&&(A=w.type.hydrate(x,w,T,I,kA(o(x)),M,C,e,h))}return P!=null&&GC(P,null,I,w),A},d=(x,w,T,I,M,C)=>{C=C||!!w.dynamicChildren;const{type:k,props:N,patchFlag:F,shapeFlag:P,dirs:B,transition:O}=w,v=k==="input"||k==="option";if(v||F!==-1){B&&ih(w,null,T,"created");let A=!1;if(E(x)){A=I_e(I,O)&&T&&T.vnode.props&&T.vnode.props.appear;const U=x.content.firstChild;A&&O.beforeEnter(U),S(U,x,T),w.el=x=U}if(P&16&&!(N&&(N.innerHTML||N.textContent))){let U=m(x.firstChild,w,x,T,I,M,C);for(;U;){RA(x,1)||H1();const q=U;U=U.nextSibling,a(q)}}else if(P&8){let U=w.children;U[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(U=U.slice(1)),x.textContent!==U&&(RA(x,0)||H1(),x.textContent=w.children)}if(N){if(v||!C||F&48){const U=x.tagName.includes("-");for(const q in N)(v&&(q.endsWith("value")||q==="indeterminate")||w1(q)&&!Sm(q)||q[0]==="."||U)&&n(x,q,null,N[q],void 0,T)}else if(N.onClick)n(x,"onClick",null,N.onClick,void 0,T);else if(F&4&&Wl(N.style))for(const U in N.style)N.style[U]}let R;(R=N&&N.onVnodeBeforeMount)&&wa(R,T,w),B&&ih(w,null,T,"beforeMount"),((R=N&&N.onVnodeMounted)||B||A)&&D_e(()=>{R&&wa(R,T,w),A&&O.enter(x),B&&ih(w,null,T,"mounted")},I)}return x.nextSibling},m=(x,w,T,I,M,C,k)=>{k=k||!!w.dynamicChildren;const N=w.children,F=N.length;for(let P=0;P<F;P++){const B=k?N[P]:N[P]=Ta(N[P]),O=B.type===cd;x?(O&&!k&&P+1<F&&Ta(N[P+1]).type===cd&&(l(i(x.data.slice(B.children.length)),T,s(x)),x.data=B.children),x=h(x,B,I,M,C,k)):O&&!B.children?l(B.el=i(""),T):(RA(T,1)||H1(),r(null,B,T,null,I,M,kA(T),C))}return x},y=(x,w,T,I,M,C)=>{const{slotScopeIds:k}=w;k&&(M=M?M.concat(k):k);const N=o(x),F=m(s(x),w,N,T,I,M,C);return F&&pb(F)&&F.data==="]"?s(w.anchor=F):(H1(),l(w.anchor=u("]"),N,F),F)},g=(x,w,T,I,M,C)=>{if(RA(x.parentElement,1)||H1(),w.el=null,C){const F=b(x);for(;;){const P=s(x);if(P&&P!==F)a(P);else break}}const k=s(x),N=o(x);return a(x),r(null,w,N,k,T,I,kA(N),M),k},b=(x,w="[",T="]")=>{let I=0;for(;x;)if(x=s(x),x&&pb(x)&&(x.data===w&&I++,x.data===T)){if(I===0)return s(x);I--}return x},S=(x,w,T)=>{const I=w.parentNode;I&&I.replaceChild(x,w);let M=T;for(;M;)M.vnode.el===w&&(M.vnode.el=M.subTree.el=x),M=M.parent},E=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[c,h]}const jte="data-allow-mismatch",eBt={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function RA(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(jte);)e=e.parentElement;const r=e&&e.getAttribute(jte);if(r==null)return!1;if(r==="")return!0;{const n=r.split(",");return t===0&&n.includes("children")?!0:r.split(",").includes(eBt[t])}}const tBt=(e=1e4)=>t=>{const r=requestIdleCallback(t,{timeout:e});return()=>cancelIdleCallback(r)};function rBt(e){const{top:t,left:r,bottom:n,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(t>0&&t<s||n>0&&n<s)&&(r>0&&r<o||i>0&&i<o)}const nBt=e=>(t,r)=>{const n=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){n.disconnect(),t();break}},e);return r(i=>{if(i instanceof Element){if(rBt(i))return t(),n.disconnect(),!1;n.observe(i)}}),()=>n.disconnect()},iBt=e=>t=>{if(e){const r=matchMedia(e);if(r.matches)t();else return r.addEventListener("change",t,{once:!0}),()=>r.removeEventListener("change",t)}},sBt=(e=[])=>(t,r)=>{Lr(e)&&(e=[e]);let n=!1;const i=o=>{n||(n=!0,s(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{r(o=>{for(const a of e)o.removeEventListener(a,i)})};return r(o=>{for(const a of e)o.addEventListener(a,i,{once:!0})}),s};function oBt(e,t){if(pb(e)&&e.data==="["){let r=1,n=e.nextSibling;for(;n;){if(n.nodeType===1){if(t(n)===!1)break}else if(pb(n))if(n.data==="]"){if(--r===0)break}else n.data==="["&&r++;n=n.nextSibling}}else t(e)}const Em=e=>!!e.type.__asyncLoader;function Iq(e){zt(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=e;let u=null,c,h=0;const d=()=>(h++,u=null,m()),m=()=>{let y;return u||(y=u=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),l)return new Promise((b,S)=>{l(g,()=>b(d()),()=>S(g),h+1)});throw g}).then(g=>y!==u&&u?u:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),c=g,g)))};return mr({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,g,b){const S=s?()=>{const E=s(b,x=>oBt(y,x));E&&(g.bum||(g.bum=[])).push(E)}:b;c?S():m().then(()=>!g.isUnmounted&&S())},get __asyncResolved(){return c},setup(){const y=gi;if(Tq(y),c)return()=>XP(c,y);const g=x=>{u=null,E1(x,y,13,!n)};if(a&&y.suspense||G3)return m().then(x=>()=>XP(x,y)).catch(x=>(g(x),()=>n?ar(n,{error:x}):null));const b=Le(!1),S=Le(),E=Le(!!i);return i&&setTimeout(()=>{E.value=!1},i),o!=null&&setTimeout(()=>{if(!b.value&&!S.value){const x=new Error(`Async component timed out after ${o}ms.`);g(x),S.value=x}},o),m().then(()=>{b.value=!0,y.parent&&U3(y.parent.vnode)&&y.parent.update()}).catch(x=>{g(x),S.value=x}),()=>{if(b.value&&c)return XP(c,y);if(S.value&&n)return ar(n,{error:S.value});if(r&&!E.value)return ar(r)}}})}function XP(e,t){const{ref:r,props:n,children:i,ce:s}=t.vnode,o=ar(e,n,i);return o.ref=r,o.ce=s,delete t.vnode.ce,o}const U3=e=>e.type.__isKeepAlive,aBt={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=rs(),n=r.ctx;if(!n.renderer)return()=>{const E=t.default&&t.default();return E&&E.length===1?E[0]:E};const i=new Map,s=new Set;let o=null;const a=r.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:h}}}=n,d=h("div");n.activate=(E,x,w,T,I)=>{const M=E.component;u(E,x,w,0,a),l(M.vnode,E,x,w,M,a,T,E.slotScopeIds,I),ys(()=>{M.isDeactivated=!1,M.a&&yg(M.a);const C=E.props&&E.props.onVnodeMounted;C&&wa(C,M.parent,E)},a)},n.deactivate=E=>{const x=E.component;$C(x.m),$C(x.a),u(E,d,null,1,a),ys(()=>{x.da&&yg(x.da);const w=E.props&&E.props.onVnodeUnmounted;w&&wa(w,x.parent,E),x.isDeactivated=!0},a)};function m(E){QP(E),c(E,r,a,!0)}function y(E){i.forEach((x,w)=>{const T=ZC(x.type);T&&!E(T)&&g(w)})}function g(E){const x=i.get(E);x&&(!o||!Zu(x,o))?m(x):o&&QP(o),i.delete(E),s.delete(E)}_s(()=>[e.include,e.exclude],([E,x])=>{E&&y(w=>cS(E,w)),x&&y(w=>!cS(x,w))},{flush:"post",deep:!0});let b=null;const S=()=>{b!=null&&(qC(r.subTree.type)?ys(()=>{i.set(b,OA(r.subTree))},r.subTree.suspense):i.set(b,OA(r.subTree)))};return qs(S),j_(S),Sc(()=>{i.forEach(E=>{const{subTree:x,suspense:w}=r,T=OA(x);if(E.type===T.type&&E.key===T.key){QP(T);const I=T.component.da;I&&ys(I,w);return}m(E)})}),()=>{if(b=null,!t.default)return o=null;const E=t.default(),x=E[0];if(E.length>1)return o=null,E;if(!Rh(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let w=OA(x);if(w.type===Pi)return o=null,w;const T=w.type,I=ZC(Em(w)?w.type.__asyncResolved||{}:T),{include:M,exclude:C,max:k}=e;if(M&&(!I||!cS(M,I))||C&&I&&cS(C,I))return w.shapeFlag&=-257,o=w,x;const N=w.key==null?T:w.key,F=i.get(N);return w.el&&(w=Oh(w),x.shapeFlag&128&&(x.ssContent=w)),b=N,F?(w.el=F.el,w.component=F.component,w.transition&&Sd(w,w.transition),w.shapeFlag|=512,s.delete(N),s.add(N)):(s.add(N),k&&s.size>parseInt(k,10)&&g(s.values().next().value)),w.shapeFlag|=256,o=w,qC(x.type)?x:w}}},lBt=aBt;function cS(e,t){return wt(e)?e.some(r=>cS(r,t)):Lr(e)?e.split(",").includes(t):awe(e)?(e.lastIndex=0,e.test(t)):!1}function r_e(e,t){i_e(e,"a",t)}function n_e(e,t){i_e(e,"da",t)}function i_e(e,t,r=gi){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(JO(t,n,r),r){let i=r.parent;for(;i&&i.parent;)U3(i.parent.vnode)&&uBt(n,t,r,i),i=i.parent}}function uBt(e,t,r,n){const i=JO(t,e,n,!0);U_(()=>{DO(n[t],i)},r)}function QP(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function OA(e){return e.shapeFlag&128?e.ssContent:e}function JO(e,t,r=gi,n=!1){if(r){const i=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{jd();const a=Zg(r),l=su(t,r,e,o);return a(),Ud(),l});return n?i.unshift(s):i.push(s),s}}const Bd=e=>(t,r=gi)=>{(!G3||e==="sp")&&JO(e,(...n)=>t(...n),r)},B3=Bd("bm"),qs=Bd("m"),s_e=Bd("bu"),j_=Bd("u"),Sc=Bd("bum"),U_=Bd("um"),o_e=Bd("sp"),a_e=Bd("rtg"),l_e=Bd("rtc");function Aq(e,t=gi){JO("ec",e,t)}const Mq="components",cBt="directives";function di(e,t){return kq(Mq,e,!0,t)||e}const u_e=Symbol.for("v-ndc");function Cq(e){return Lr(e)?kq(Mq,e,!1)||e:e||u_e}function qr(e){return kq(cBt,e)}function kq(e,t,r=!0,n=!1){const i=Xi||gi;if(i){const s=i.type;if(e===Mq){const a=ZC(s,!1);if(a&&(a===t||a===ws(t)||a===x1(ws(t))))return s}const o=Ute(i[e]||s[e],t)||Ute(i.appContext[e],t);return!o&&n?s:o}}function Ute(e,t){return e&&(e[t]||e[ws(t)]||e[x1(ws(t))])}function o0(e,t,r,n){let i;const s=r&&r[n],o=wt(e);if(o||Lr(e)){const a=o&&Wl(e);let l=!1;a&&(l=!cl(e),e=GO(e)),i=new Array(e.length);for(let u=0,c=e.length;u<c;u++)i[u]=t(l?go(e[u]):e[u],u,void 0,s&&s[u])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(zr(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,s&&s[l]));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[l]=t(e[c],c,l,s&&s[l])}}else i=[];return r&&(r[n]=i),i}function hBt(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(wt(n))for(let i=0;i<n.length;i++)e[n[i].name]=n[i].fn;else n&&(e[n.name]=n.key?(...i)=>{const s=n.fn(...i);return s&&(s.key=n.key),s}:n.fn)}return e}function Qu(e,t,r={},n,i){if(Xi.ce||Xi.parent&&Em(Xi.parent)&&Xi.parent.ce)return t!=="default"&&(r.name=t),qe(),fn(Zr,null,[ar("slot",r,n&&n())],64);let s=e[t];s&&s._c&&(s._d=!1),qe();const o=s&&Rq(s(r)),a=fn(Zr,{key:(r.key||o&&o.key||`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Rq(e){return e.some(t=>Rh(t)?!(t.type===Pi||t.type===Zr&&!Rq(t.children)):!0)?e:null}function pBt(e,t){const r={};for(const n in e)r[t&&/[A-Z]/.test(n)?`on:${n}`:mg(n)]=e[n];return r}const oU=e=>e?z_e(e)?z3(e):oU(e.parent):null,XS=Kr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>oU(e.parent),$root:e=>oU(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Oq(e),$forceUpdate:e=>e.f||(e.f=()=>{xq(e.update)}),$nextTick:e=>e.n||(e.n=xc.bind(e.proxy)),$watch:e=>GBt.bind(e)}),KP=(e,t)=>e!==yr&&!e.__isScriptSetup&&Ar(e,t),aU={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:s,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return s[t]}else{if(KP(n,t))return o[t]=1,n[t];if(i!==yr&&Ar(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&Ar(u,t))return o[t]=3,s[t];if(r!==yr&&Ar(r,t))return o[t]=4,r[t];lU&&(o[t]=0)}}const c=XS[t];let h,d;if(c)return t==="$attrs"&&Oo(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(r!==yr&&Ar(r,t))return o[t]=4,r[t];if(d=l.config.globalProperties,Ar(d,t))return d[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:s}=e;return KP(i,t)?(i[t]=r,!0):n!==yr&&Ar(n,t)?(n[t]=r,!0):Ar(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:s}},o){let a;return!!r[o]||e!==yr&&Ar(e,o)||KP(t,o)||(a=s[0])&&Ar(a,o)||Ar(n,o)||Ar(XS,o)||Ar(i.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Ar(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},dBt=Kr({},aU,{get(e,t){if(t!==Symbol.unscopables)return aU.get(e,t,e)},has(e,t){return t[0]!=="_"&&!lq(t)}});function fBt(){return null}function mBt(){return null}function yBt(e){}function gBt(e){}function vBt(){return null}function bBt(){}function wBt(e,t){return null}function _Bt(){return c_e().slots}function xBt(){return c_e().attrs}function c_e(){const e=rs();return e.setupContext||(e.setupContext=H_e(e))}function uT(e){return wt(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}function SBt(e,t){const r=uT(e);for(const n in t){if(n.startsWith("__skip"))continue;let i=r[n];i?wt(i)||zt(i)?i=r[n]={type:i,default:t[n]}:i.default=t[n]:i===null&&(i=r[n]={default:t[n]}),i&&t[`__skip_${n}`]&&(i.skipFactory=!0)}return r}function EBt(e,t){return!e||!t?e||t:wt(e)&&wt(t)?e.concat(t):Kr({},uT(e),uT(t))}function TBt(e,t){const r={};for(const n in e)t.includes(n)||Object.defineProperty(r,n,{enumerable:!0,get:()=>e[n]});return r}function IBt(e){const t=rs();let r=e();return fU(),FO(r)&&(r=r.catch(n=>{throw Zg(t),n})),[r,()=>Zg(t)]}let lU=!0;function ABt(e){const t=Oq(e),r=e.proxy,n=e.ctx;lU=!1,t.beforeCreate&&Bte(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:d,beforeUpdate:m,updated:y,activated:g,deactivated:b,beforeDestroy:S,beforeUnmount:E,destroyed:x,unmounted:w,render:T,renderTracked:I,renderTriggered:M,errorCaptured:C,serverPrefetch:k,expose:N,inheritAttrs:F,components:P,directives:B,filters:O}=t;if(u&&MBt(u,n,null),o)for(const A in o){const R=o[A];zt(R)&&(n[A]=R.bind(r))}if(i){const A=i.call(r,r);zr(A)&&(e.data=Ts(A))}if(lU=!0,s)for(const A in s){const R=s[A],U=zt(R)?R.bind(r,r):zt(R.get)?R.get.bind(r,r):La,q=!zt(R)&&zt(R.set)?R.set.bind(r):La,Q=cr({get:U,set:q});Object.defineProperty(n,A,{enumerable:!0,configurable:!0,get:()=>Q.value,set:ee=>Q.value=ee})}if(a)for(const A in a)h_e(a[A],n,r,A);if(l){const A=zt(l)?l.call(r):l;Reflect.ownKeys(A).forEach(R=>{Nq(R,A[R])})}c&&Bte(c,e,"c");function v(A,R){wt(R)?R.forEach(U=>A(U.bind(r))):R&&A(R.bind(r))}if(v(B3,h),v(qs,d),v(s_e,m),v(j_,y),v(r_e,g),v(n_e,b),v(Aq,C),v(l_e,I),v(a_e,M),v(Sc,E),v(U_,w),v(o_e,k),wt(N))if(N.length){const A=e.exposed||(e.exposed={});N.forEach(R=>{Object.defineProperty(A,R,{get:()=>r[R],set:U=>r[R]=U})})}else e.exposed||(e.exposed={});T&&e.render===La&&(e.render=T),F!=null&&(e.inheritAttrs=F),P&&(e.components=P),B&&(e.directives=B),k&&Tq(e)}function MBt(e,t,r=La){wt(e)&&(e=uU(e));for(const n in e){const i=e[n];let s;zr(i)?"default"in i?s=Ki(i.from||n,i.default,!0):s=Ki(i.from||n):s=Ki(i),wr(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function Bte(e,t,r){su(wt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function h_e(e,t,r,n){let i=n.includes(".")?O_e(r,n):()=>r[n];if(Lr(e)){const s=t[e];zt(s)&&_s(i,s)}else if(zt(e))_s(i,e.bind(r));else if(zr(e))if(wt(e))e.forEach(s=>h_e(s,t,r,n));else{const s=zt(e.handler)?e.handler.bind(r):t[e.handler];zt(s)&&_s(i,s,e)}}function Oq(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>zC(l,u,o,!0)),zC(l,t,o)),zr(t)&&s.set(t,l),l}function zC(e,t,r,n=!1){const{mixins:i,extends:s}=t;s&&zC(e,s,r,!0),i&&i.forEach(o=>zC(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const a=CBt[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const CBt={data:Vte,props:Gte,emits:Gte,methods:hS,computed:hS,beforeCreate:jo,created:jo,beforeMount:jo,mounted:jo,beforeUpdate:jo,updated:jo,beforeDestroy:jo,beforeUnmount:jo,destroyed:jo,unmounted:jo,activated:jo,deactivated:jo,errorCaptured:jo,serverPrefetch:jo,components:hS,directives:hS,watch:RBt,provide:Vte,inject:kBt};function Vte(e,t){return t?e?function(){return Kr(zt(e)?e.call(this,this):e,zt(t)?t.call(this,this):t)}:t:e}function kBt(e,t){return hS(uU(e),uU(t))}function uU(e){if(wt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function jo(e,t){return e?[...new Set([].concat(e,t))]:t}function hS(e,t){return e?Kr(Object.create(null),e,t):t}function Gte(e,t){return e?wt(e)&&wt(t)?[...new Set([...e,...t])]:Kr(Object.create(null),uT(e),uT(t??{})):t}function RBt(e,t){if(!e)return t;if(!t)return e;const r=Kr(Object.create(null),e);for(const n in t)r[n]=jo(e[n],t[n]);return r}function p_e(){return{app:null,config:{isNativeTag:iq,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OBt=0;function NBt(e,t){return function(r,n=null){zt(r)||(r=Kr({},r)),n!=null&&!zr(n)&&(n=null);const i=p_e(),s=new WeakSet,o=[];let a=!1;const l=i.app={_uid:OBt++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:J_e,get config(){return i.config},set config(u){},use(u,...c){return s.has(u)||(u&&zt(u.install)?(s.add(u),u.install(l,...c)):zt(u)&&(s.add(u),u(l,...c))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,c){return c?(i.components[u]=c,l):i.components[u]},directive(u,c){return c?(i.directives[u]=c,l):i.directives[u]},mount(u,c,h){if(!a){const d=l._ceVNode||ar(r,n);return d.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(d,u):e(d,u,h),a=!0,l._container=u,u.__vue_app__=l,z3(d.component)}},onUnmount(u){o.push(u)},unmount(){a&&(su(o,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return i.provides[u]=c,l},runWithContext(u){const c=bg;bg=l;try{return u()}finally{bg=c}}};return l}}let bg=null;function Nq(e,t){if(gi){let r=gi.provides;const n=gi.parent&&gi.parent.provides;n===r&&(r=gi.provides=Object.create(n)),r[e]=t}}function Ki(e,t,r=!1){const n=gi||Xi;if(n||bg){const i=bg?bg._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&zt(t)?t.call(n&&n.proxy):t}}function d_e(){return!!(gi||Xi||bg)}const f_e={},m_e=()=>Object.create(f_e),y_e=e=>Object.getPrototypeOf(e)===f_e;function LBt(e,t,r,n=!1){const i={},s=m_e();e.propsDefaults=Object.create(null),g_e(e,t,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:Fwe(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function PBt(e,t,r,n){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,a=Xt(i),[l]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let d=c[h];if(YO(e.emitsOptions,d))continue;const m=t[d];if(l)if(Ar(s,d))m!==s[d]&&(s[d]=m,u=!0);else{const y=ws(d);i[y]=cU(l,a,y,m,e,!1)}else m!==s[d]&&(s[d]=m,u=!0)}}}else{g_e(e,t,i,s)&&(u=!0);let c;for(const h in a)(!t||!Ar(t,h)&&((c=wo(h))===h||!Ar(t,c)))&&(l?r&&(r[h]!==void 0||r[c]!==void 0)&&(i[h]=cU(l,a,h,void 0,e,!0)):delete i[h]);if(s!==a)for(const h in s)(!t||!Ar(t,h))&&(delete s[h],u=!0)}u&&ud(e.attrs,"set","")}function g_e(e,t,r,n){const[i,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Sm(l))continue;const u=t[l];let c;i&&Ar(i,c=ws(l))?!s||!s.includes(c)?r[c]=u:(a||(a={}))[c]=u:YO(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(s){const l=Xt(r),u=a||yr;for(let c=0;c<s.length;c++){const h=s[c];r[h]=cU(i,l,h,u[h],e,!Ar(u,h))}}return o}function cU(e,t,r,n,i,s){const o=e[r];if(o!=null){const a=Ar(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&zt(l)){const{propsDefaults:u}=i;if(r in u)n=u[r];else{const c=Zg(i);n=u[r]=l.call(null,t),c()}}else n=l;i.ce&&i.ce._setProp(r,n)}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===wo(r))&&(n=!0))}return n}const DBt=new WeakMap;function v_e(e,t,r=!1){const n=r?DBt:t.propsCache,i=n.get(e);if(i)return i;const s=e.props,o={},a=[];let l=!1;if(!zt(e)){const c=h=>{l=!0;const[d,m]=v_e(h,t,!0);Kr(o,d),m&&a.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return zr(e)&&n.set(e,dg),dg;if(wt(s))for(let c=0;c<s.length;c++){const h=ws(s[c]);zte(h)&&(o[h]=yr)}else if(s)for(const c in s){const h=ws(c);if(zte(h)){const d=s[c],m=o[h]=wt(d)||zt(d)?{type:d}:Kr({},d),y=m.type;let g=!1,b=!0;if(wt(y))for(let S=0;S<y.length;++S){const E=y[S],x=zt(E)&&E.name;if(x==="Boolean"){g=!0;break}else x==="String"&&(b=!1)}else g=zt(y)&&y.name==="Boolean";m[0]=g,m[1]=b,(g||Ar(m,"default"))&&a.push(h)}}const u=[o,a];return zr(e)&&n.set(e,u),u}function zte(e){return e[0]!=="$"&&!Sm(e)}const b_e=e=>e[0]==="_"||e==="$stable",Lq=e=>wt(e)?e.map(Ta):[Ta(e)],FBt=(e,t,r)=>{if(t._n)return t;const n=xi((...i)=>(Zf.NODE_ENV!=="production"&&gi&&(!r||(r.root,gi.root)),Lq(t(...i))),r);return n._c=!1,n},w_e=(e,t,r)=>{const n=e._ctx;for(const i in e){if(b_e(i))continue;const s=e[i];if(zt(s))t[i]=FBt(i,s,n);else if(s!=null){const o=Lq(s);t[i]=()=>o}}},__e=(e,t)=>{const r=Lq(t);e.slots.default=()=>r},x_e=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},jBt=(e,t,r)=>{const n=e.slots=m_e();if(e.vnode.shapeFlag&32){const i=t._;i?(x_e(n,t,r),r&&oq(n,"_",i,!0)):w_e(t,n)}else t&&__e(e,t)},UBt=(e,t,r)=>{const{vnode:n,slots:i}=e;let s=!0,o=yr;if(n.shapeFlag&32){const a=t._;a?r&&a===1?s=!1:x_e(i,t,r):(s=!t.$stable,w_e(t,i)),o=t}else t&&(__e(e,t),o={default:1});if(s)for(const a in i)!b_e(a)&&o[a]==null&&delete i[a]},ys=D_e;function S_e(e){return T_e(e)}function E_e(e){return T_e(e,KUt)}function T_e(e,t){const r=aq();r.__VUE__=!0;const{insert:n,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:d,setScopeId:m=La,insertStaticContent:y}=e,g=(re,D,K,H=null,z=null,L=null,G=void 0,j=null,V=!!D.dynamicChildren)=>{if(re===D)return;re&&!Zu(re,D)&&(H=Se(re),Y(re,z,L,!0),re=null),D.patchFlag===-2&&(V=!1,D.dynamicChildren=null);const{type:$,ref:J,shapeFlag:X}=D;switch($){case cd:b(re,D,K,H);break;case Pi:S(re,D,K,H);break;case wg:re==null&&E(D,K,H,G);break;case Zr:P(re,D,K,H,z,L,G,j,V);break;default:X&1?T(re,D,K,H,z,L,G,j,V):X&6?B(re,D,K,H,z,L,G,j,V):(X&64||X&128)&&$.process(re,D,K,H,z,L,G,j,V,Fe)}J!=null&&z&&GC(J,re&&re.ref,L,D||re,!D)},b=(re,D,K,H)=>{if(re==null)n(D.el=a(D.children),K,H);else{const z=D.el=re.el;D.children!==re.children&&u(z,D.children)}},S=(re,D,K,H)=>{re==null?n(D.el=l(D.children||""),K,H):D.el=re.el},E=(re,D,K,H)=>{[re.el,re.anchor]=y(re.children,D,K,H,re.el,re.anchor)},x=({el:re,anchor:D},K,H)=>{let z;for(;re&&re!==D;)z=d(re),n(re,K,H),re=z;n(D,K,H)},w=({el:re,anchor:D})=>{let K;for(;re&&re!==D;)K=d(re),i(re),re=K;i(D)},T=(re,D,K,H,z,L,G,j,V)=>{D.type==="svg"?G="svg":D.type==="math"&&(G="mathml"),re==null?I(D,K,H,z,L,G,j,V):k(re,D,z,L,G,j,V)},I=(re,D,K,H,z,L,G,j)=>{let V,$;const{props:J,shapeFlag:X,transition:te,dirs:le}=re;if(V=re.el=o(re.type,L,J&&J.is,J),X&8?c(V,re.children):X&16&&C(re.children,V,null,H,z,eD(re,L),G,j),le&&ih(re,null,H,"created"),M(V,re,re.scopeId,G,H),J){for(const ke in J)ke!=="value"&&!Sm(ke)&&s(V,ke,null,J[ke],L,H);"value"in J&&s(V,"value",null,J.value,L),($=J.onVnodeBeforeMount)&&wa($,H,re)}le&&ih(re,null,H,"beforeMount");const ve=I_e(z,te);ve&&te.beforeEnter(V),n(V,D,K),(($=J&&J.onVnodeMounted)||ve||le)&&ys(()=>{$&&wa($,H,re),ve&&te.enter(V),le&&ih(re,null,H,"mounted")},z)},M=(re,D,K,H,z)=>{if(K&&m(re,K),H)for(let L=0;L<H.length;L++)m(re,H[L]);if(z){let L=z.subTree;if(D===L||qC(L.type)&&(L.ssContent===D||L.ssFallback===D)){const G=z.vnode;M(re,G,G.scopeId,G.slotScopeIds,z.parent)}}},C=(re,D,K,H,z,L,G,j,V=0)=>{for(let $=V;$<re.length;$++){const J=re[$]=j?Xf(re[$]):Ta(re[$]);g(null,J,D,K,H,z,L,G,j)}},k=(re,D,K,H,z,L,G)=>{const j=D.el=re.el;let{patchFlag:V,dynamicChildren:$,dirs:J}=D;V|=re.patchFlag&16;const X=re.props||yr,te=D.props||yr;let le;if(K&&A0(K,!1),(le=te.onVnodeBeforeUpdate)&&wa(le,K,D,re),J&&ih(D,re,K,"beforeUpdate"),K&&A0(K,!0),(X.innerHTML&&te.innerHTML==null||X.textContent&&te.textContent==null)&&c(j,""),$?N(re.dynamicChildren,$,j,K,H,eD(D,z),L):G||U(re,D,j,null,K,H,eD(D,z),L,!1),V>0){if(V&16)F(j,X,te,K,z);else if(V&2&&X.class!==te.class&&s(j,"class",null,te.class,z),V&4&&s(j,"style",X.style,te.style,z),V&8){const ve=D.dynamicProps;for(let ke=0;ke<ve.length;ke++){const je=ve[ke],yt=X[je],ft=te[je];(ft!==yt||je==="value")&&s(j,je,yt,ft,z,K)}}V&1&&re.children!==D.children&&c(j,D.children)}else!G&&$==null&&F(j,X,te,K,z);((le=te.onVnodeUpdated)||J)&&ys(()=>{le&&wa(le,K,D,re),J&&ih(D,re,K,"updated")},H)},N=(re,D,K,H,z,L,G)=>{for(let j=0;j<D.length;j++){const V=re[j],$=D[j],J=V.el&&(V.type===Zr||!Zu(V,$)||V.shapeFlag&70)?h(V.el):K;g(V,$,J,null,H,z,L,G,!0)}},F=(re,D,K,H,z)=>{if(D!==K){if(D!==yr)for(const L in D)!Sm(L)&&!(L in K)&&s(re,L,D[L],null,z,H);for(const L in K){if(Sm(L))continue;const G=K[L],j=D[L];G!==j&&L!=="value"&&s(re,L,j,G,z,H)}"value"in K&&s(re,"value",D.value,K.value,z)}},P=(re,D,K,H,z,L,G,j,V)=>{const $=D.el=re?re.el:a(""),J=D.anchor=re?re.anchor:a("");let{patchFlag:X,dynamicChildren:te,slotScopeIds:le}=D;le&&(j=j?j.concat(le):le),re==null?(n($,K,H),n(J,K,H),C(D.children||[],K,J,z,L,G,j,V)):X>0&&X&64&&te&&re.dynamicChildren?(N(re.dynamicChildren,te,K,z,L,G,j),(D.key!=null||z&&D===z.subTree)&&Pq(re,D,!0)):U(re,D,K,J,z,L,G,j,V)},B=(re,D,K,H,z,L,G,j,V)=>{D.slotScopeIds=j,re==null?D.shapeFlag&512?z.ctx.activate(D,K,H,G,V):O(D,K,H,z,L,G,V):v(re,D,V)},O=(re,D,K,H,z,L,G)=>{const j=re.component=G_e(re,H,z);if(U3(re)&&(j.ctx.renderer=Fe),$_e(j,!1,G),j.asyncDep){if(z&&z.registerDep(j,A,G),!re.el){const V=j.subTree=ar(Pi);S(null,V,D,K)}}else A(j,re,D,K,z,L,G)},v=(re,D,K)=>{const H=D.component=re.component;if(ZBt(re,D,K))if(H.asyncDep&&!H.asyncResolved){R(H,D,K);return}else H.next=D,H.update();else D.el=re.el,H.vnode=D},A=(re,D,K,H,z,L,G)=>{const j=()=>{if(re.isMounted){let{next:X,bu:te,u:le,parent:ve,vnode:ke}=re;{const ct=A_e(re);if(ct){X&&(X.el=ke.el,R(re,X,G)),ct.asyncDep.then(()=>{re.isUnmounted||j()});return}}let je=X,yt;A0(re,!1),X?(X.el=ke.el,R(re,X,G)):X=ke,te&&yg(te),(yt=X.props&&X.props.onVnodeBeforeUpdate)&&wa(yt,ve,X,ke),A0(re,!0);const ft=G4(re),Ot=re.subTree;re.subTree=ft,g(Ot,ft,h(Ot.el),Se(Ot),re,z,L),X.el=ft.el,je===null&&Dq(re,ft.el),le&&ys(le,z),(yt=X.props&&X.props.onVnodeUpdated)&&ys(()=>wa(yt,ve,X,ke),z)}else{let X;const{el:te,props:le}=D,{bm:ve,m:ke,parent:je,root:yt,type:ft}=re,Ot=Em(D);if(A0(re,!1),ve&&yg(ve),!Ot&&(X=le&&le.onVnodeBeforeMount)&&wa(X,je,D),A0(re,!0),te&&dt){const ct=()=>{re.subTree=G4(re),dt(te,re.subTree,re,z,null)};Ot&&ft.__asyncHydrate?ft.__asyncHydrate(te,re,ct):ct()}else{yt.ce&&yt.ce._injectChildStyle(ft);const ct=re.subTree=G4(re);g(null,ct,K,H,re,z,L),D.el=ct.el}if(ke&&ys(ke,z),!Ot&&(X=le&&le.onVnodeMounted)){const ct=D;ys(()=>wa(X,je,ct),z)}(D.shapeFlag&256||je&&Em(je.vnode)&&je.vnode.shapeFlag&256)&&re.a&&ys(re.a,z),re.isMounted=!0,D=K=H=null}};re.scope.on();const V=re.effect=new nT(j);re.scope.off();const $=re.update=V.run.bind(V),J=re.job=V.runIfDirty.bind(V);J.i=re,J.id=re.uid,V.scheduler=()=>xq(J),A0(re,!0),$()},R=(re,D,K)=>{D.component=re;const H=re.vnode.props;re.vnode=D,re.next=null,PBt(re,D.props,H,K),UBt(re,D.children,K),jd(),Nte(re),Ud()},U=(re,D,K,H,z,L,G,j,V=!1)=>{const $=re&&re.children,J=re?re.shapeFlag:0,X=D.children,{patchFlag:te,shapeFlag:le}=D;if(te>0){if(te&128){Q($,X,K,H,z,L,G,j,V);return}else if(te&256){q($,X,K,H,z,L,G,j,V);return}}le&8?(J&16&&me($,z,L),X!==$&&c(K,X)):J&16?le&16?Q($,X,K,H,z,L,G,j,V):me($,z,L,!0):(J&8&&c(K,""),le&16&&C(X,K,H,z,L,G,j,V))},q=(re,D,K,H,z,L,G,j,V)=>{re=re||dg,D=D||dg;const $=re.length,J=D.length,X=Math.min($,J);let te;for(te=0;te<X;te++){const le=D[te]=V?Xf(D[te]):Ta(D[te]);g(re[te],le,K,null,z,L,G,j,V)}$>J?me(re,z,L,!0,!1,X):C(D,K,H,z,L,G,j,V,X)},Q=(re,D,K,H,z,L,G,j,V)=>{let $=0;const J=D.length;let X=re.length-1,te=J-1;for(;$<=X&&$<=te;){const le=re[$],ve=D[$]=V?Xf(D[$]):Ta(D[$]);if(Zu(le,ve))g(le,ve,K,null,z,L,G,j,V);else break;$++}for(;$<=X&&$<=te;){const le=re[X],ve=D[te]=V?Xf(D[te]):Ta(D[te]);if(Zu(le,ve))g(le,ve,K,null,z,L,G,j,V);else break;X--,te--}if($>X){if($<=te){const le=te+1,ve=le<J?D[le].el:H;for(;$<=te;)g(null,D[$]=V?Xf(D[$]):Ta(D[$]),K,ve,z,L,G,j,V),$++}}else if($>te)for(;$<=X;)Y(re[$],z,L,!0),$++;else{const le=$,ve=$,ke=new Map;for($=ve;$<=te;$++){const nt=D[$]=V?Xf(D[$]):Ta(D[$]);nt.key!=null&&ke.set(nt.key,$)}let je,yt=0;const ft=te-ve+1;let Ot=!1,ct=0;const Te=new Array(ft);for($=0;$<ft;$++)Te[$]=0;for($=le;$<=X;$++){const nt=re[$];if(yt>=ft){Y(nt,z,L,!0);continue}let $t;if(nt.key!=null)$t=ke.get(nt.key);else for(je=ve;je<=te;je++)if(Te[je-ve]===0&&Zu(nt,D[je])){$t=je;break}$t===void 0?Y(nt,z,L,!0):(Te[$t-ve]=$+1,$t>=ct?ct=$t:Ot=!0,g(nt,D[$t],K,null,z,L,G,j,V),yt++)}const ht=Ot?BBt(Te):dg;for(je=ht.length-1,$=ft-1;$>=0;$--){const nt=ve+$,$t=D[nt],Wt=nt+1<J?D[nt+1].el:H;Te[$]===0?g(null,$t,K,Wt,z,L,G,j,V):Ot&&(je<0||$!==ht[je]?ee($t,K,Wt,2):je--)}}},ee=(re,D,K,H,z=null)=>{const{el:L,type:G,transition:j,children:V,shapeFlag:$}=re;if($&6){ee(re.component.subTree,D,K,H);return}if($&128){re.suspense.move(D,K,H);return}if($&64){G.move(re,D,K,Fe);return}if(G===Zr){n(L,D,K);for(let J=0;J<V.length;J++)ee(V[J],D,K,H);n(re.anchor,D,K);return}if(G===wg){x(re,D,K);return}if(H!==2&&$&1&&j)if(H===0)j.beforeEnter(L),n(L,D,K),ys(()=>j.enter(L),z);else{const{leave:J,delayLeave:X,afterLeave:te}=j,le=()=>n(L,D,K),ve=()=>{J(L,()=>{le(),te&&te()})};X?X(L,le,ve):ve()}else n(L,D,K)},Y=(re,D,K,H=!1,z=!1)=>{const{type:L,props:G,ref:j,children:V,dynamicChildren:$,shapeFlag:J,patchFlag:X,dirs:te,cacheIndex:le}=re;if(X===-2&&(z=!1),j!=null&&GC(j,null,K,re,!0),le!=null&&(D.renderCache[le]=void 0),J&256){D.ctx.deactivate(re);return}const ve=J&1&&te,ke=!Em(re);let je;if(ke&&(je=G&&G.onVnodeBeforeUnmount)&&wa(je,D,re),J&6)ce(re.component,K,H);else{if(J&128){re.suspense.unmount(K,H);return}ve&&ih(re,null,D,"beforeUnmount"),J&64?re.type.remove(re,D,K,Fe,H):$&&!$.hasOnce&&(L!==Zr||X>0&&X&64)?me($,D,K,!1,!0):(L===Zr&&X&384||!z&&J&16)&&me(V,D,K),H&&ue(re)}(ke&&(je=G&&G.onVnodeUnmounted)||ve)&&ys(()=>{je&&wa(je,D,re),ve&&ih(re,null,D,"unmounted")},K)},ue=re=>{const{type:D,el:K,anchor:H,transition:z}=re;if(D===Zr){de(K,H);return}if(D===wg){w(re);return}const L=()=>{i(K),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(re.shapeFlag&1&&z&&!z.persisted){const{leave:G,delayLeave:j}=z,V=()=>G(K,L);j?j(re.el,L,V):V()}else L()},de=(re,D)=>{let K;for(;re!==D;)K=d(re),i(re),re=K;i(D)},ce=(re,D,K)=>{const{bum:H,scope:z,job:L,subTree:G,um:j,m:V,a:$}=re;$C(V),$C($),H&&yg(H),z.stop(),L&&(L.flags|=8,Y(G,re,D,K)),j&&ys(j,D),ys(()=>{re.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},me=(re,D,K,H=!1,z=!1,L=0)=>{for(let G=L;G<re.length;G++)Y(re[G],D,K,H,z)},Se=re=>{if(re.shapeFlag&6)return Se(re.component.subTree);if(re.shapeFlag&128)return re.suspense.next();const D=d(re.anchor||re.el),K=D&&D[Zwe];return K?d(K):D};let Oe=!1;const ye=(re,D,K)=>{re==null?D._vnode&&Y(D._vnode,null,null,!0):g(D._vnode||null,re,D,null,null,null,K),D._vnode=re,Oe||(Oe=!0,Nte(),BC(),Oe=!1)},Fe={p:g,um:Y,m:ee,r:ue,mt:O,mc:C,pc:U,pbc:N,n:Se,o:e};let ze,dt;return t&&([ze,dt]=t(Fe)),{render:ye,hydrate:ze,createApp:NBt(ye,ze)}}function eD({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function A0({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function I_e(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Pq(e,t,r=!1){const n=e.children,i=t.children;if(wt(n)&&wt(i))for(let s=0;s<n.length;s++){const o=n[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Xf(i[s]),a.el=o.el),!r&&a.patchFlag!==-2&&Pq(o,a)),a.type===cd&&(a.el=o.el)}}function BBt(e){const t=e.slice(),r=[0];let n,i,s,o,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<u?s=a+1:o=a;u<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function A_e(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:A_e(t)}function $C(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const M_e=Symbol.for("v-scx"),C_e=()=>Ki(M_e);function VBt(e,t){return V3(e,null,t)}function k_e(e,t){return V3(e,null,{flush:"post"})}function R_e(e,t){return V3(e,null,{flush:"sync"})}function _s(e,t,r){return V3(e,t,r)}function V3(e,t,r=yr){const{immediate:n,deep:i,flush:s,once:o}=r,a=Kr({},r);let l;if(G3)if(s==="sync"){const d=C_e();l=d.__watcherHandles||(d.__watcherHandles=[])}else if(!t||n)a.once=!0;else{const d=()=>{};return d.stop=La,d.resume=La,d.pause=La,d}const u=gi;a.call=(d,m,y)=>su(d,u,m,y);let c=!1;s==="post"?a.scheduler=d=>{ys(d,u&&u.suspense)}:s!=="sync"&&(c=!0,a.scheduler=(d,m)=>{m?d():xq(d)}),a.augmentJob=d=>{t&&(d.flags|=4),c&&(d.flags|=2,u&&(d.id=u.uid,d.i=u))};const h=kUt(e,t,a);return l&&l.push(h),h}function GBt(e,t,r){const n=this.proxy,i=Lr(e)?e.includes(".")?O_e(n,e):()=>n[e]:e.bind(n,n);let s;zt(t)?s=t:(s=t.handler,r=t);const o=Zg(this),a=V3(i,s.bind(n),r);return o(),a}function O_e(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function zBt(e,t,r=yr){const n=rs(),i=ws(t),s=wo(t),o=N_e(e,t),a=Uwe((l,u)=>{let c,h=yr,d;return R_e(()=>{const m=e[t];yo(c,m)&&(c=m,u())}),{get(){return l(),r.get?r.get(c):c},set(m){const y=r.set?r.set(m):m;if(!yo(y,c)&&!(h!==yr&&yo(m,h)))return;const g=n.vnode.props;g&&(t in g||i in g||s in g)&&(`onUpdate:${t}`in g||`onUpdate:${i}`in g||`onUpdate:${s}`in g)||(c=m,u()),n.emit(`update:${t}`,y),yo(m,y)&&yo(m,h)&&!yo(y,d)&&u(),h=m,d=y}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||yr:a,done:!1}:{done:!0}}}},a}const N_e=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ws(t)}Modifiers`]||e[`${wo(t)}Modifiers`];function $Bt(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||yr;let i=r;const s=t.startsWith("update:"),o=s&&N_e(n,t.slice(7));o&&(o.trim&&(i=r.map(c=>Lr(c)?c.trim():c)),o.number&&(i=r.map(tT)));let a,l=n[a=mg(t)]||n[a=mg(ws(t))];!l&&s&&(l=n[a=mg(wo(t))]),l&&su(l,e,6,i);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,su(u,e,6,i)}}function L_e(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const s=e.emits;let o={},a=!1;if(!zt(e)){const l=u=>{const c=L_e(u,t,!0);c&&(a=!0,Kr(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(zr(e)&&n.set(e,null),null):(wt(s)?s.forEach(l=>o[l]=null):Kr(o,s),zr(e)&&n.set(e,o),o)}function YO(e,t){return!e||!w1(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ar(e,t[0].toLowerCase()+t.slice(1))||Ar(e,wo(t))||Ar(e,t))}function G4(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:d,setupState:m,ctx:y,inheritAttrs:g}=e,b=lT(e);let S,E;try{if(r.shapeFlag&4){const w=i||n,T=Zf.NODE_ENV!=="production"&&m.__isScriptSetup?new Proxy(w,{get(I,M,C){return NUt(`Property '${String(M)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(I,M,C)}}):w;S=Ta(u.call(T,w,c,Zf.NODE_ENV!=="production"?uS(h):h,m,d,y)),E=a}else{const w=t;Zf.NODE_ENV,S=Ta(w.length>1?w(Zf.NODE_ENV!=="production"?uS(h):h,Zf.NODE_ENV!=="production"?{get attrs(){return uS(a)},slots:o,emit:l}:{attrs:a,slots:o,emit:l}):w(Zf.NODE_ENV!=="production"?uS(h):h,null)),E=t.props?a:HBt(a)}}catch(w){QS.length=0,E1(w,e,1),S=ar(Pi)}let x=S;if(E&&g!==!1){const w=Object.keys(E),{shapeFlag:T}=x;w.length&&T&7&&(s&&w.some(PO)&&(E=WBt(E,s)),x=Oh(x,E,!1,!0))}return r.dirs&&(x=Oh(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&Sd(x,r.transition),S=x,lT(b),S}function qBt(e,t=!0){let r;for(let n=0;n<e.length;n++){const i=e[n];if(Rh(i)){if(i.type!==Pi||i.children==="v-if"){if(r)return;r=i}}else return}return r}const HBt=e=>{let t;for(const r in e)(r==="class"||r==="style"||w1(r))&&((t||(t={}))[r]=e[r]);return t},WBt=(e,t)=>{const r={};for(const n in e)(!PO(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function ZBt(e,t,r){const{props:n,children:i,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?$te(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const d=c[h];if(o[d]!==n[d]&&!YO(u,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?$te(n,o,u):!0:!!o;return!1}function $te(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const s=n[i];if(t[s]!==e[s]&&!YO(r,s))return!0}return!1}function Dq({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const qC=e=>e.__isSuspense;let hU=0;const JBt={name:"Suspense",__isSuspense:!0,process(e,t,r,n,i,s,o,a,l,u){if(e==null)XBt(t,r,n,i,s,o,a,l,u);else{if(s&&s.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}QBt(e,t,r,n,i,o,a,l,u)}},hydrate:KBt,normalize:eVt},YBt=JBt;function cT(e,t){const r=e.props&&e.props[t];zt(r)&&r()}function XBt(e,t,r,n,i,s,o,a,l){const{p:u,o:{createElement:c}}=l,h=c("div"),d=e.suspense=P_e(e,i,n,t,h,r,s,o,a,l);u(null,d.pendingBranch=e.ssContent,h,null,n,d,s,o),d.deps>0?(cT(e,"onPending"),cT(e,"onFallback"),u(null,e.ssFallback,t,r,n,null,s,o),Jb(d,e.ssFallback)):d.resolve(!1,!0)}function QBt(e,t,r,n,i,s,o,a,{p:l,um:u,o:{createElement:c}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,m=t.ssFallback,{activeBranch:y,pendingBranch:g,isInFallback:b,isHydrating:S}=h;if(g)h.pendingBranch=d,Zu(d,g)?(l(g,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():b&&(S||(l(y,m,r,n,i,null,s,o,a),Jb(h,m)))):(h.pendingId=hU++,S?(h.isHydrating=!1,h.activeBranch=g):u(g,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=c("div"),b?(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0?h.resolve():(l(y,m,r,n,i,null,s,o,a),Jb(h,m))):y&&Zu(d,y)?(l(y,d,r,n,i,h,s,o,a),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0&&h.resolve()));else if(y&&Zu(d,y))l(y,d,r,n,i,h,s,o,a),Jb(h,d);else if(cT(t,"onPending"),h.pendingBranch=d,d.shapeFlag&512?h.pendingId=d.component.suspenseId:h.pendingId=hU++,l(null,d,h.hiddenContainer,null,i,h,s,o,a),h.deps<=0)h.resolve();else{const{timeout:E,pendingId:x}=h;E>0?setTimeout(()=>{h.pendingId===x&&h.fallback(m)},E):E===0&&h.fallback(m)}}function P_e(e,t,r,n,i,s,o,a,l,u,c=!1){const{p:h,m:d,um:m,n:y,o:{parentNode:g,remove:b}}=u;let S;const E=tVt(e);E&&t&&t.pendingBranch&&(S=t.pendingId,t.deps++);const x=e.props?rT(e.props.timeout):void 0,w=s,T={vnode:e,parent:t,parentComponent:r,namespace:o,container:n,hiddenContainer:i,deps:0,pendingId:hU++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(I=!1,M=!1){const{vnode:C,activeBranch:k,pendingBranch:N,pendingId:F,effects:P,parentComponent:B,container:O}=T;let v=!1;T.isHydrating?T.isHydrating=!1:I||(v=k&&N.transition&&N.transition.mode==="out-in",v&&(k.transition.afterLeave=()=>{F===T.pendingId&&(d(N,O,s===w?y(k):s,0),UC(P))}),k&&(g(k.el)===O&&(s=y(k)),m(k,B,T,!0)),v||d(N,O,s,0)),Jb(T,N),T.pendingBranch=null,T.isInFallback=!1;let A=T.parent,R=!1;for(;A;){if(A.pendingBranch){A.effects.push(...P),R=!0;break}A=A.parent}!R&&!v&&UC(P),T.effects=[],E&&t&&t.pendingBranch&&S===t.pendingId&&(t.deps--,t.deps===0&&!M&&t.resolve()),cT(C,"onResolve")},fallback(I){if(!T.pendingBranch)return;const{vnode:M,activeBranch:C,parentComponent:k,container:N,namespace:F}=T;cT(M,"onFallback");const P=y(C),B=()=>{T.isInFallback&&(h(null,I,N,P,k,null,F,a,l),Jb(T,I))},O=I.transition&&I.transition.mode==="out-in";O&&(C.transition.afterLeave=B),T.isInFallback=!0,m(C,k,null,!0),O||B()},move(I,M,C){T.activeBranch&&d(T.activeBranch,I,M,C),T.container=I},next(){return T.activeBranch&&y(T.activeBranch)},registerDep(I,M,C){const k=!!T.pendingBranch;k&&T.deps++;const N=I.vnode.el;I.asyncDep.catch(F=>{E1(F,I,0)}).then(F=>{if(I.isUnmounted||T.isUnmounted||T.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:P}=I;mU(I,F,!1),N&&(P.el=N);const B=!N&&I.subTree.el;M(I,P,g(N||I.subTree.el),N?null:y(I.subTree),T,o,C),B&&b(B),Dq(I,P.el),k&&--T.deps===0&&T.resolve()})},unmount(I,M){T.isUnmounted=!0,T.activeBranch&&m(T.activeBranch,r,I,M),T.pendingBranch&&m(T.pendingBranch,r,I,M)}};return T}function KBt(e,t,r,n,i,s,o,a,l){const u=t.suspense=P_e(t,n,r,e.parentNode,document.createElement("div"),null,i,s,o,a,!0),c=l(e,u.pendingBranch=t.ssContent,r,u,s,o);return u.deps===0&&u.resolve(!1,!0),c}function eVt(e){const{shapeFlag:t,children:r}=e,n=t&32;e.ssContent=qte(n?r.default:r),e.ssFallback=n?qte(r.fallback):ar(Pi)}function qte(e){let t;if(zt(e)){const r=Wg&&e._c;r&&(e._d=!1,qe()),e=e(),r&&(e._d=!0,t=Ao,F_e())}return wt(e)&&(e=qBt(e)),e=Ta(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function D_e(e,t){t&&t.pendingBranch?wt(e)?t.effects.push(...e):t.effects.push(e):UC(e)}function Jb(e,t){e.activeBranch=t;const{vnode:r,parentComponent:n}=e;let i=t.el;for(;!i&&t.component;)t=t.component.subTree,i=t.el;r.el=i,n&&n.subTree===r&&(n.vnode.el=i,Dq(n,i))}function tVt(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Zr=Symbol.for("v-fgt"),cd=Symbol.for("v-txt"),Pi=Symbol.for("v-cmt"),wg=Symbol.for("v-stc"),QS=[];let Ao=null;function qe(e=!1){QS.push(Ao=e?null:[])}function F_e(){QS.pop(),Ao=QS[QS.length-1]||null}let Wg=1;function pU(e){Wg+=e,e<0&&Ao&&(Ao.hasOnce=!0)}function j_e(e){return e.dynamicChildren=Wg>0?Ao||dg:null,F_e(),Wg>0&&Ao&&Ao.push(e),e}function pt(e,t,r,n,i,s){return j_e(Ge(e,t,r,n,i,s,!0))}function fn(e,t,r,n,i){return j_e(ar(e,t,r,n,i,!0))}function Rh(e){return e?e.__v_isVNode===!0:!1}function Zu(e,t){return e.type===t.type&&e.key===t.key}function rVt(e){}const U_e=({key:e})=>e??null,z4=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Lr(e)||wr(e)||zt(e)?{i:Xi,r:e,k:t,f:!!r}:e:null);function Ge(e,t=null,r=null,n=0,i=null,s=e===Zr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&U_e(t),ref:t&&z4(t),scopeId:WO,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Xi};return a?(Fq(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Lr(r)?8:16),Wg>0&&!o&&Ao&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Ao.push(l),l}const ar=nVt;function nVt(e,t=null,r=null,n=0,i=null,s=!1){if((!e||e===u_e)&&(e=Pi),Rh(e)){const a=Oh(e,t,!0);return r&&Fq(a,r),Wg>0&&!s&&Ao&&(a.shapeFlag&6?Ao[Ao.indexOf(e)]=a:Ao.push(a)),a.patchFlag=-2,a}if(pVt(e)&&(e=e.__vccOpts),t){t=B_e(t);let{class:a,style:l}=t;a&&!Lr(a)&&(t.class=Jn(a)),zr(l)&&(HO(l)&&!wt(l)&&(l=Kr({},l)),t.style=Fd(l))}const o=Lr(e)?1:qC(e)?128:Jwe(e)?64:zr(e)?4:zt(e)?2:0;return Ge(e,t,r,n,i,o,s,!0)}function B_e(e){return e?HO(e)||y_e(e)?Kr({},e):e:null}function Oh(e,t,r=!1,n=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=e,u=t?XO(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&U_e(u),ref:t&&t.ref?r&&s?wt(s)?s.concat(z4(t)):[s,z4(t)]:z4(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Zr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Oh(e.ssContent),ssFallback:e.ssFallback&&Oh(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Sd(c,l.clone(c)),c}function xh(e=" ",t=0){return ar(cd,null,e,t)}function V_e(e,t){const r=ar(wg,null,e);return r.staticCount=t,r}function En(e="",t=!1){return t?(qe(),fn(Pi,null,e)):ar(Pi,null,e)}function Ta(e){return e==null||typeof e=="boolean"?ar(Pi):wt(e)?ar(Zr,null,e.slice()):Rh(e)?Xf(e):ar(cd,null,String(e))}function Xf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Oh(e)}function Fq(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(wt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Fq(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!y_e(t)?t._ctx=Xi:i===3&&Xi&&(Xi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else zt(t)?(t={default:t,_ctx:Xi},r=32):(t=String(t),n&64?(r=16,t=[xh(t)]):r=8);e.children=t,e.shapeFlag|=r}function XO(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Jn([t.class,n.class]));else if(i==="style")t.style=Fd([t.style,n.style]);else if(w1(i)){const s=t[i],o=n[i];o&&s!==o&&!(wt(s)&&s.includes(o))&&(t[i]=s?[].concat(s,o):o)}else i!==""&&(t[i]=n[i])}return t}function wa(e,t,r,n=null){su(e,t,7,[r,n])}const iVt=p_e();let sVt=0;function G_e(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||iVt,s={uid:sVt++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hq(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:v_e(n,i),emitsOptions:L_e(n,i),emit:null,emitted:null,propsDefaults:yr,inheritAttrs:n.inheritAttrs,ctx:yr,data:yr,props:yr,attrs:yr,slots:yr,refs:yr,setupState:yr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=$Bt.bind(null,s),e.ce&&e.ce(s),s}let gi=null;const rs=()=>gi||Xi;let HC,dU;{const e=aq(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};HC=t("__VUE_INSTANCE_SETTERS__",r=>gi=r),dU=t("__VUE_SSR_SETTERS__",r=>G3=r)}const Zg=e=>{const t=gi;return HC(e),e.scope.on(),()=>{e.scope.off(),HC(t)}},fU=()=>{gi&&gi.scope.off(),HC(null)};function z_e(e){return e.vnode.shapeFlag&4}let G3=!1;function $_e(e,t=!1,r=!1){t&&dU(t);const{props:n,children:i}=e.vnode,s=z_e(e);LBt(e,n,s,t),jBt(e,i,r);const o=s?oVt(e,t):void 0;return t&&dU(!1),o}function oVt(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,aU);const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?H_e(e):null,s=Zg(e);jd();const o=S1(n,e,0,[e.props,i]);if(Ud(),s(),FO(o)){if(Em(e)||Tq(e),o.then(fU,fU),t)return o.then(a=>{mU(e,a,t)}).catch(a=>{E1(a,e,0)});e.asyncDep=o}else mU(e,o,t)}else q_e(e,t)}function mU(e,t,r){zt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:zr(t)&&(e.setupState=bq(t)),q_e(e,r)}let WC,yU;function aVt(e){WC=e,yU=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,dBt))}}const lVt=()=>!WC;function q_e(e,t,r){const n=e.type;if(!e.render){if(!t&&WC&&!n.render){const i=n.template||Oq(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,u=Kr(Kr({isCustomElement:s,delimiters:a},o),l);n.render=WC(i,u)}}e.render=n.render||La,yU&&yU(e)}{const i=Zg(e);jd();try{ABt(e)}finally{Ud(),i()}}}const uVt={get(e,t){return Oo(e,"get",""),e[t]}};function H_e(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,uVt),slots:e.slots,emit:e.emit,expose:t}}function z3(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bq(wi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in XS)return XS[r](e)},has(t,r){return r in t||r in XS}})):e.proxy}const cVt=/(?:^|[-_])(\w)/g,hVt=e=>e.replace(cVt,t=>t.toUpperCase()).replace(/[-_]/g,"");function ZC(e,t=!0){return zt(e)?e.displayName||e.name:e.name||t&&e.__name}function W_e(e,t,r=!1){let n=ZC(t);if(!n&&t.__file){const i=t.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&e&&e.parent){const i=s=>{for(const o in s)if(s[o]===t)return o};n=i(e.components||e.parent.type.components)||i(e.appContext.components)}return n?hVt(n):r?"App":"Anonymous"}function pVt(e){return zt(e)&&"__vccOpts"in e}const cr=(e,t)=>IUt(e,t,G3);function Vl(e,t,r){const n=arguments.length;return n===2?zr(t)&&!wt(t)?Rh(t)?ar(e,null,[t]):ar(e,t):ar(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&Rh(r)&&(r=[r]),ar(e,t,r))}function dVt(){}function fVt(e,t,r,n){const i=r[n];if(i&&Z_e(i,e))return i;const s=t();return s.memo=e.slice(),s.cacheIndex=n,r[n]=s}function Z_e(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let n=0;n<r.length;n++)if(yo(r[n],t[n]))return!1;return Wg>0&&Ao&&Ao.push(e),!0}const J_e="3.5.9",mVt=La,yVt=BUt,gVt=Zv,vVt=Wwe,bVt={createComponentInstance:G_e,setupComponent:$_e,renderComponentRoot:G4,setCurrentRenderingInstance:lT,isVNode:Rh,normalizeVNode:Ta,getComponentPublicInstance:z3,ensureValidVNode:Rq,pushWarningContext:RUt,popWarningContext:OUt},wVt=bVt,_Vt=null,xVt=null,SVt=null;let gU;const Hte=typeof window<"u"&&window.trustedTypes;if(Hte)try{gU=Hte.createPolicy("vue",{createHTML:e=>e})}catch{}const Y_e=gU?e=>gU.createHTML(e):e=>e,EVt="http://www.w3.org/2000/svg",TVt="http://www.w3.org/1998/Math/MathML",Dp=typeof document<"u"?document:null,Wte=Dp&&Dp.createElement("template"),IVt={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?Dp.createElementNS(EVt,e):t==="mathml"?Dp.createElementNS(TVt,e):r?Dp.createElement(e,{is:r}):Dp.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>Dp.createTextNode(e),createComment:e=>Dp.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Dp.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,s){const o=r?r.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===s||!(i=i.nextSibling)););else{Wte.innerHTML=Y_e(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Wte.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},tf="transition",_2="animation",Ow=Symbol("_vtc"),X_e={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Q_e=Kr({},Eq,X_e),AVt=e=>(e.displayName="Transition",e.props=Q_e,e),QO=AVt((e,{slots:t})=>Vl(e_e,K_e(e),t)),M0=(e,t=[])=>{wt(e)?e.forEach(r=>r(...t)):e&&e(...t)},Zte=e=>e?wt(e)?e.some(t=>t.length>1):e.length>1:!1;function K_e(e){const t={};for(const P in e)P in X_e||(t[P]=e[P]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,y=MVt(i),g=y&&y[0],b=y&&y[1],{onBeforeEnter:S,onEnter:E,onEnterCancelled:x,onLeave:w,onLeaveCancelled:T,onBeforeAppear:I=S,onAppear:M=E,onAppearCancelled:C=x}=t,k=(P,B,O)=>{Pf(P,B?c:a),Pf(P,B?u:o),O&&O()},N=(P,B)=>{P._isLeaving=!1,Pf(P,h),Pf(P,m),Pf(P,d),B&&B()},F=P=>(B,O)=>{const v=P?M:E,A=()=>k(B,P,O);M0(v,[B,A]),Jte(()=>{Pf(B,P?l:s),Mp(B,P?c:a),Zte(v)||Yte(B,n,g,A)})};return Kr(t,{onBeforeEnter(P){M0(S,[P]),Mp(P,s),Mp(P,o)},onBeforeAppear(P){M0(I,[P]),Mp(P,l),Mp(P,u)},onEnter:F(!1),onAppear:F(!0),onLeave(P,B){P._isLeaving=!0;const O=()=>N(P,B);Mp(P,h),Mp(P,d),t2e(),Jte(()=>{P._isLeaving&&(Pf(P,h),Mp(P,m),Zte(w)||Yte(P,n,b,O))}),M0(w,[P,O])},onEnterCancelled(P){k(P,!1),M0(x,[P])},onAppearCancelled(P){k(P,!0),M0(C,[P])},onLeaveCancelled(P){N(P),M0(T,[P])}})}function MVt(e){if(e==null)return null;if(zr(e))return[tD(e.enter),tD(e.leave)];{const t=tD(e);return[t,t]}}function tD(e){return rT(e)}function Mp(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Ow]||(e[Ow]=new Set)).add(t)}function Pf(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Ow];r&&(r.delete(t),r.size||(e[Ow]=void 0))}function Jte(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let CVt=0;function Yte(e,t,r,n){const i=e._endId=++CVt,s=()=>{i===e._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:o,timeout:a,propCount:l}=e2e(e,t);if(!o)return n();const u=o+"end";let c=0;const h=()=>{e.removeEventListener(u,d),s()},d=m=>{m.target===e&&++c>=l&&h()};setTimeout(()=>{c<l&&h()},a+1),e.addEventListener(u,d)}function e2e(e,t){const r=window.getComputedStyle(e),n=y=>(r[y]||"").split(", "),i=n(`${tf}Delay`),s=n(`${tf}Duration`),o=Xte(i,s),a=n(`${_2}Delay`),l=n(`${_2}Duration`),u=Xte(a,l);let c=null,h=0,d=0;t===tf?o>0&&(c=tf,h=o,d=s.length):t===_2?u>0&&(c=_2,h=u,d=l.length):(h=Math.max(o,u),c=h>0?o>u?tf:_2:null,d=c?c===tf?s.length:l.length:0);const m=c===tf&&/\b(transform|all)(,|$)/.test(n(`${tf}Property`).toString());return{type:c,timeout:h,propCount:d,hasTransform:m}}function Xte(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Qte(r)+Qte(e[n])))}function Qte(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function t2e(){return document.body.offsetHeight}function kVt(e,t,r){const n=e[Ow];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const JC=Symbol("_vod"),r2e=Symbol("_vsh"),KO={beforeMount(e,{value:t},{transition:r}){e[JC]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):x2(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),x2(e,!0),n.enter(e)):n.leave(e,()=>{x2(e,!1)}):x2(e,t))},beforeUnmount(e,{value:t}){x2(e,t)}};function x2(e,t){e.style.display=t?e[JC]:"none",e[r2e]=!t}function RVt(){KO.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const n2e=Symbol("");function OVt(e){const t=rs();if(!t)return;const r=t.ut=(i=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>YC(s,i))},n=()=>{const i=e(t.proxy);t.ce?YC(t.ce,i):vU(t.subTree,i),r(i)};B3(()=>{k_e(n)}),qs(()=>{const i=new MutationObserver(n);i.observe(t.subTree.el.parentNode,{childList:!0}),U_(()=>i.disconnect())})}function vU(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{vU(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)YC(e.el,t);else if(e.type===Zr)e.children.forEach(r=>vU(r,t));else if(e.type===wg){let{el:r,anchor:n}=e;for(;r&&(YC(r,t),r!==n);)r=r.nextSibling}}function YC(e,t){if(e.nodeType===1){const r=e.style;let n="";for(const i in t)r.setProperty(`--${i}`,t[i]),n+=`--${i}: ${t[i]};`;r[n2e]=n}}const NVt=/(^|;)\s*display\s*:/;function LVt(e,t,r){const n=e.style,i=Lr(r);let s=!1;if(r&&!i){if(t)if(Lr(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&$4(n,a,"")}else for(const o in t)r[o]==null&&$4(n,o,"");for(const o in r)o==="display"&&(s=!0),$4(n,o,r[o])}else if(i){if(t!==r){const o=n[n2e];o&&(r+=";"+o),n.cssText=r,s=NVt.test(r)}}else t&&e.removeAttribute("style");JC in e&&(e[JC]=s?n.display:"",e[r2e]&&(n.display="none"))}const Kte=/\s*!important$/;function $4(e,t,r){if(wt(r))r.forEach(n=>$4(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=PVt(e,t);Kte.test(r)?e.setProperty(wo(n),r.replace(Kte,""),"important"):e[n]=r}}const ere=["Webkit","Moz","ms"],rD={};function PVt(e,t){const r=rD[t];if(r)return r;let n=ws(t);if(n!=="filter"&&n in e)return rD[t]=n;n=x1(n);for(let i=0;i<ere.length;i++){const s=ere[i]+n;if(s in e)return rD[t]=s}return t}const tre="http://www.w3.org/1999/xlink";function rre(e,t,r,n,i,s=gwe(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(tre,t.slice(6,t.length)):e.setAttributeNS(tre,t,r):r==null||s&&!cq(r)?e.removeAttribute(t):e.setAttribute(t,s?"":iu(r)?String(r):r)}function DVt(e,t,r,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Y_e(r):r);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const o=i==="OPTION"?e.getAttribute("value")||"":e.value,a=r==null?e.type==="checkbox"?"on":"":String(r);(o!==a||!("_value"in e))&&(e.value=a),r==null&&e.removeAttribute(t),e._value=r;return}let s=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=cq(r):r==null&&o==="string"?(r="",s=!0):o==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}function Yp(e,t,r,n){e.addEventListener(t,r,n)}function FVt(e,t,r,n){e.removeEventListener(t,r,n)}const nre=Symbol("_vei");function jVt(e,t,r,n,i=null){const s=e[nre]||(e[nre]={}),o=s[t];if(n&&o)o.value=n;else{const[a,l]=UVt(t);if(n){const u=s[t]=GVt(n,i);Yp(e,a,u,l)}else o&&(FVt(e,a,o,l),s[t]=void 0)}}const ire=/(?:Once|Passive|Capture)$/;function UVt(e){let t;if(ire.test(e)){t={};let r;for(;r=e.match(ire);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wo(e.slice(2)),t]}let nD=0;const BVt=Promise.resolve(),VVt=()=>nD||(BVt.then(()=>nD=0),nD=Date.now());function GVt(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;su(zVt(n,r.value),t,5,[n])};return r.value=e,r.attached=VVt(),r}function zVt(e,t){if(wt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const sre=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,$Vt=(e,t,r,n,i,s)=>{const o=i==="svg";t==="class"?kVt(e,n,o):t==="style"?LVt(e,r,n):w1(t)?PO(t)||jVt(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qVt(e,t,n,o))?(DVt(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&rre(e,t,n,o,s,t!=="value")):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),rre(e,t,n,o))};function qVt(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&sre(t)&&zt(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sre(t)&&Lr(r)?!1:!!(t in e||e._isVueCE&&(/[A-Z]/.test(t)||!Lr(r)))}const ore={};function i2e(e,t,r){const n=mr(e,t);D3(n)&&Kr(n,t);class i extends eN{constructor(o){super(n,o,r)}}return i.def=n,i}const HVt=(e,t)=>i2e(e,t,f2e),WVt=typeof HTMLElement<"u"?HTMLElement:class{};class eN extends WVt{constructor(t,r={},n=Jg){super(),this._def=t,this._props=r,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==Jg?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof eN){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,xc(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const i of n)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(n,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=n;let a;if(s&&!wt(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=rT(this._props[l])),(a||(a=Object.create(null)))[ws(l)]=!0)}this._numberProps=a,i&&this._resolveProps(n),this.shadowRoot&&this._applyStyles(o),this._mount(n)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(n=>t(this._def=n,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const n in r)Ar(this,n)||Object.defineProperty(this,n,{get:()=>Tt(r[n])})}_resolveProps(t){const{props:r}=t,n=wt(r)?r:Object.keys(r||{});for(const i of Object.keys(this))i[0]!=="_"&&n.includes(i)&&this._setProp(i,this[i]);for(const i of n.map(ws))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const r=this.hasAttribute(t);let n=r?this.getAttribute(t):ore;const i=ws(t);r&&this._numberProps&&this._numberProps[i]&&(n=rT(n)),this._setProp(i,n,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,r,n=!0,i=!1){r!==this._props[t]&&(r===ore?delete this._props[t]:(this._props[t]=r,t==="key"&&this._app&&(this._app._ceVNode.key=r)),i&&this._instance&&this._update(),n&&(r===!0?this.setAttribute(wo(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(wo(t),r+""):r||this.removeAttribute(wo(t))))}_update(){Yb(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const r=ar(this._def,Kr(t,this._props));return this._instance||(r.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,D3(o[0])?Kr({detail:o},o[0]):{detail:o}))};n.emit=(s,...o)=>{i(s,o),wo(s)!==s&&i(wo(s),o)},this._setParent()}),r}_applyStyles(t,r){if(!t)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const n=this._nonce;for(let i=t.length-1;i>=0;i--){const s=document.createElement("style");n&&s.setAttribute("nonce",n),s.textContent=t[i],this.shadowRoot.prepend(s)}}_parseSlots(){const t=this._slots={};let r;for(;r=this.firstChild;){const n=r.nodeType===1&&r.getAttribute("slot")||"default";(t[n]||(t[n]=[])).push(r),this.removeChild(r)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let n=0;n<t.length;n++){const i=t[n],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(r&&l.nodeType===1){const u=r+"-s",c=document.createTreeWalker(l,1);l.setAttribute(u,"");let h;for(;h=c.nextNode();)h.setAttribute(u,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function s2e(e){const t=rs();return t&&t.ce||null}function ZVt(){const e=s2e();return e&&e.shadowRoot}function JVt(e="$style"){{const t=rs();if(!t)return yr;const r=t.type.__cssModules;return r&&r[e]||yr}}const o2e=new WeakMap,a2e=new WeakMap,XC=Symbol("_moveCb"),are=Symbol("_enterCb"),YVt=e=>(delete e.props.mode,e),XVt=YVt({name:"TransitionGroup",props:Kr({},Q_e,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=rs(),n=Sq();let i,s;return j_(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!tGt(i[0].el,r.vnode.el,o))return;i.forEach(QVt),i.forEach(KVt);const a=i.filter(eGt);t2e(),a.forEach(l=>{const u=l.el,c=u.style;Mp(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const h=u[XC]=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",h),u[XC]=null,Pf(u,o))};u.addEventListener("transitionend",h)})}),()=>{const o=Xt(e),a=K_e(o);let l=o.tag||Zr;if(i=[],s)for(let u=0;u<s.length;u++){const c=s[u];c.el&&c.el instanceof Element&&(i.push(c),Sd(c,Rw(c,a,n,r)),o2e.set(c,c.el.getBoundingClientRect()))}s=t.default?ZO(t.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&Sd(c,Rw(c,a,n,r))}return ar(l,null,s)}}}),jq=XVt;function QVt(e){const t=e.el;t[XC]&&t[XC](),t[are]&&t[are]()}function KVt(e){a2e.set(e,e.el.getBoundingClientRect())}function eGt(e){const t=o2e.get(e),r=a2e.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${i}px)`,s.transitionDuration="0s",e}}function tGt(e,t,r){const n=e.cloneNode(),i=e[Ow];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:o}=e2e(n);return s.removeChild(n),o}const Gm=e=>{const t=e.props["onUpdate:modelValue"]||!1;return wt(t)?r=>yg(t,r):t};function rGt(e){e.target.composing=!0}function lre(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Zl=Symbol("_assign"),hT={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Zl]=Gm(i);const s=n||i.props&&i.props.type==="number";Yp(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r&&(a=a.trim()),s&&(a=tT(a)),e[Zl](a)}),r&&Yp(e,"change",()=>{e.value=e.value.trim()}),t||(Yp(e,"compositionstart",rGt),Yp(e,"compositionend",lre),Yp(e,"change",lre))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:s}},o){if(e[Zl]=Gm(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?tT(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},Uq={deep:!0,created(e,t,r){e[Zl]=Gm(r),Yp(e,"change",()=>{const n=e._modelValue,i=Nw(e),s=e.checked,o=e[Zl];if(wt(n)){const a=F3(n,i),l=a!==-1;if(s&&!l)o(n.concat(i));else if(!s&&l){const u=[...n];u.splice(a,1),o(u)}}else if(s0(n)){const a=new Set(n);s?a.add(i):a.delete(i),o(a)}else o(l2e(e,s))})},mounted:ure,beforeUpdate(e,t,r){e[Zl]=Gm(r),ure(e,t,r)}};function ure(e,{value:t},r){e._modelValue=t;let n;wt(t)?n=F3(t,r.props.value)>-1:s0(t)?n=t.has(r.props.value):n=xd(t,l2e(e,!0)),e.checked!==n&&(e.checked=n)}const Bq={created(e,{value:t},r){e.checked=xd(t,r.props.value),e[Zl]=Gm(r),Yp(e,"change",()=>{e[Zl](Nw(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e[Zl]=Gm(n),t!==r&&(e.checked=xd(t,n.props.value))}},Vq={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=s0(t);Yp(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>r?tT(Nw(o)):Nw(o));e[Zl](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,xc(()=>{e._assigning=!1})}),e[Zl]=Gm(n)},mounted(e,{value:t}){cre(e,t)},beforeUpdate(e,t,r){e[Zl]=Gm(r)},updated(e,{value:t}){e._assigning||cre(e,t)}};function cre(e,t){const r=e.multiple,n=wt(t);if(!(r&&!n&&!s0(t))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],a=Nw(o);if(r)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=F3(t,a)>-1}else o.selected=t.has(a);else if(xd(Nw(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Nw(e){return"_value"in e?e._value:e.value}function l2e(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const u2e={created(e,t,r){NA(e,t,r,null,"created")},mounted(e,t,r){NA(e,t,r,null,"mounted")},beforeUpdate(e,t,r,n){NA(e,t,r,n,"beforeUpdate")},updated(e,t,r,n){NA(e,t,r,n,"updated")}};function c2e(e,t){switch(e){case"SELECT":return Vq;case"TEXTAREA":return hT;default:switch(t){case"checkbox":return Uq;case"radio":return Bq;default:return hT}}}function NA(e,t,r,n,i){const s=c2e(e.tagName,r.props&&r.props.type)[i];s&&s(e,t,r,n)}function nGt(){hT.getSSRProps=({value:e})=>({value:e}),Bq.getSSRProps=({value:e},t)=>{if(t.props&&xd(t.props.value,e))return{checked:!0}},Uq.getSSRProps=({value:e},t)=>{if(wt(e)){if(t.props&&F3(e,t.props.value)>-1)return{checked:!0}}else if(s0(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},u2e.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const r=c2e(t.type.toUpperCase(),t.props&&t.props.type);if(r.getSSRProps)return r.getSSRProps(e,t)}}const iGt=["ctrl","shift","alt","meta"],sGt={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>iGt.some(r=>e[`${r}Key`]&&!t.includes(r))},$3=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(i,...s)=>{for(let o=0;o<t.length;o++){const a=sGt[t[o]];if(a&&a(i,t))return}return e(i,...s)})},oGt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gq=(e,t)=>{const r=e._withKeys||(e._withKeys={}),n=t.join(".");return r[n]||(r[n]=i=>{if(!("key"in i))return;const s=wo(i.key);if(t.some(o=>o===s||oGt[o]===s))return e(i)})},h2e=Kr({patchProp:$Vt},IVt);let KS,hre=!1;function p2e(){return KS||(KS=S_e(h2e))}function d2e(){return KS=hre?KS:E_e(h2e),hre=!0,KS}const Yb=(...e)=>{p2e().render(...e)},aGt=(...e)=>{d2e().hydrate(...e)},Jg=(...e)=>{const t=p2e().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=y2e(n);if(!i)return;const s=t._component;!zt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,m2e(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t},f2e=(...e)=>{const t=d2e().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=y2e(n);if(i)return r(i,!0,m2e(i))},t};function m2e(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function y2e(e){return Lr(e)?document.querySelector(e):e}let pre=!1;const lGt=()=>{pre||(pre=!0,nGt(),RVt())},uGt=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:e_e,BaseTransitionPropsValidators:Eq,Comment:Pi,DeprecationTypes:SVt,EffectScope:hq,ErrorCodes:UUt,ErrorTypeStrings:yVt,Fragment:Zr,KeepAlive:lBt,ReactiveEffect:nT,Static:wg,Suspense:YBt,Teleport:Ywe,Text:cd,TrackOpTypes:AUt,Transition:QO,TransitionGroup:jq,TriggerOpTypes:MUt,VueElement:eN,assertNumber:jUt,callWithAsyncErrorHandling:su,callWithErrorHandling:S1,camelize:ws,capitalize:x1,cloneVNode:Oh,compatUtils:xVt,computed:cr,createApp:Jg,createBlock:fn,createCommentVNode:En,createElementBlock:pt,createElementVNode:Ge,createHydrationRenderer:E_e,createPropsRestProxy:TBt,createRenderer:S_e,createSSRApp:f2e,createSlots:hBt,createStaticVNode:V_e,createTextVNode:xh,createVNode:ar,customRef:Uwe,defineAsyncComponent:Iq,defineComponent:mr,defineCustomElement:i2e,defineEmits:mBt,defineExpose:yBt,defineModel:bBt,defineOptions:gBt,defineProps:fBt,defineSSRCustomElement:HVt,defineSlots:vBt,devtools:gVt,effect:Jjt,effectScope:BO,getCurrentInstance:rs,getCurrentScope:pq,getCurrentWatcher:CUt,getTransitionRawChildren:ZO,guardReactiveProps:B_e,h:Vl,handleError:E1,hasInjectionContext:d_e,hydrate:aGt,hydrateOnIdle:tBt,hydrateOnInteraction:sBt,hydrateOnMediaQuery:iBt,hydrateOnVisible:nBt,initCustomFormatter:dVt,initDirectivesForSSR:lGt,inject:Ki,isMemoSame:Z_e,isProxy:HO,isReactive:Wl,isReadonly:Vm,isRef:wr,isRuntimeOnly:lVt,isShallow:cl,isVNode:Rh,markRaw:wi,mergeDefaults:SBt,mergeModels:EBt,mergeProps:XO,nextTick:xc,normalizeClass:Jn,normalizeProps:hwe,normalizeStyle:Fd,onActivated:r_e,onBeforeMount:B3,onBeforeUnmount:Sc,onBeforeUpdate:s_e,onDeactivated:n_e,onErrorCaptured:Aq,onMounted:qs,onRenderTracked:l_e,onRenderTriggered:a_e,onScopeDispose:_we,onServerPrefetch:o_e,onUnmounted:U_,onUpdated:j_,onWatcherCleanup:Gwe,openBlock:qe,popScopeId:$Ut,provide:Nq,proxyRefs:bq,pushScopeId:zUt,queuePostFlushCb:UC,reactive:Ts,readonly:gq,ref:Le,registerRuntimeCompiler:aVt,render:Yb,renderList:o0,renderSlot:Qu,resolveComponent:di,resolveDirective:qr,resolveDynamicComponent:Cq,resolveFilter:_Vt,resolveTransitionHooks:Rw,setBlockTracking:pU,setDevtoolsHook:vVt,setTransitionHooks:Sd,shallowReactive:Fwe,shallowReadonly:uS,shallowRef:j3,ssrContextKey:M_e,ssrUtils:wVt,stop:Yjt,toDisplayString:on,toHandlerKey:mg,toHandlers:pBt,toRaw:Xt,toRef:Bwe,toRefs:wq,toValue:wUt,transformVNodeArgs:rVt,triggerRef:bUt,unref:Tt,useAttrs:xBt,useCssModule:JVt,useCssVars:OVt,useHost:s2e,useId:YUt,useModel:zBt,useSSRContext:C_e,useShadowRoot:ZVt,useSlots:_Bt,useTemplateRef:VC,useTransitionState:Sq,vModelCheckbox:Uq,vModelDynamic:u2e,vModelRadio:Bq,vModelSelect:Vq,vModelText:hT,vShow:KO,version:J_e,warn:mVt,watch:_s,watchEffect:VBt,watchPostEffect:k_e,watchSyncEffect:R_e,withAsyncContext:IBt,withCtx:xi,withDefaults:wBt,withDirectives:$r,withKeys:Gq,withMemo:fVt,withModifiers:$3,withScopeId:qUt},Symbol.toStringTag,{value:"Module"}));var cGt=!1,g2e={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_always_auth:"",npm_config_user_agent:"npm/10.9.0 node/v22.12.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",NODE_AUTH_TOKEN:"XXXXX-XXXXX-XXXXX-XXXXX",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ramp4-pcar4",npm_package_engines_node:"=22.12.0",GRADLE_HOME:"/usr/share/gradle-8.11.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"57148724",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_local_prefix:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",SYSTEMD_EXEC_PID:"833",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241215.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.10/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.4/x64",JOURNAL_STREAM:"8:6481",GITHUB_WORKFLOW:"Build demo site and deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/22.12.0/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",npm_config_npm_version:"10.9.0",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"12419971258",STATS_VMFE:"true",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"tag",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ramp4-pcar4/ramp4-pcar4/.github/workflows/demo-build.yml@refs/tags/v4.10.0",ACTIONS_ID_TOKEN_REQUEST_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikh5cTROQVRBanNucUM3bWRydEFoaHJDUjJfUSJ9.eyJuYW1laWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJzY3AiOiJBY3Rpb25zLkdlbmVyaWNSZWFkOjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCBBY3Rpb25zLlJlc3VsdHM6ZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5OmNhMzk1MDg1LTA0MGEtNTI2Yi0yY2U4LWJkYzg1ZjY5Mjc3NCBBY3Rpb25zLlVwbG9hZEFydGlmYWN0czowMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAvMTpCdWlsZC9CdWlsZC8xMTc5NyBEaXN0cmlidXRlZFRhc2suR2VuZXJhdGVJZFRva2VuOmUzM2ZiMWRkLTkyMjItNDJiYS1iNzk0LWI0ODRmZDMzZjg0OTpjYTM5NTA4NS0wNDBhLTUyNmItMmNlOC1iZGM4NWY2OTI3NzQgTG9jYXRpb25TZXJ2aWNlLkNvbm5lY3QgUmVhZEFuZFVwZGF0ZUJ1aWxkQnlVcmk6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwLzE6QnVpbGQvQnVpbGQvMTE3OTciLCJJZGVudGl0eVR5cGVDbGFpbSI6IlN5c3RlbTpTZXJ2aWNlSWRlbnRpdHkiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiJERERERERERC1ERERELUREREQtRERERC1EREREREREREREREQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3ByaW1hcnlzaWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJhdWkiOiIxZmE4NDE2ZS05OTQzLTRlMWEtYjY4MS1hODAxOGQxOGIzNzQiLCJzaWQiOiJhMDllZjkzMi04YjkxLTQyNGEtOWZhOC1lODZkM2FiODhlNDEiLCJhYyI6Ilt7XCJTY29wZVwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcIlBlcm1pc3Npb25cIjozfSx7XCJTY29wZVwiOlwicmVmcy9oZWFkcy9tYWluXCIsXCJQZXJtaXNzaW9uXCI6MX1dIiwiYWNzbCI6IjEwIiwib2lkY19leHRyYSI6IntcInJlZlwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcInNoYVwiOlwiMWYzMmY1YzRkZWRhZDdhYzM1YTc4OTVlN2Y3NDBkOWU0ODM1OTkwM1wiLFwicmVwb3NpdG9yeVwiOlwicmFtcDQtcGNhcjQvcmFtcDQtcGNhcjRcIixcInJlcG9zaXRvcnlfb3duZXJcIjpcInJhbXA0LXBjYXI0XCIsXCJyZXBvc2l0b3J5X293bmVyX2lkXCI6XCI1NzE0ODcyNFwiLFwicnVuX2lkXCI6XCIxMjQxOTk3MTI1OFwiLFwicnVuX251bWJlclwiOlwiMTMxXCIsXCJydW5fYXR0ZW1wdFwiOlwiMVwiLFwicmVwb3NpdG9yeV92aXNpYmlsaXR5XCI6XCJwdWJsaWNcIixcInJlcG9zaXRvcnlfaWRcIjpcIjIxODM1NjA1N1wiLFwiYWN0b3JfaWRcIjpcIjc1ODUyNDVcIixcImFjdG9yXCI6XCJqYW1lcy1yYWVcIixcIndvcmtmbG93XCI6XCJCdWlsZCBkZW1vIHNpdGUgYW5kIGRlcGxveSB0byBHaXRIdWIgUGFnZXNcIixcImhlYWRfcmVmXCI6XCJcIixcImJhc2VfcmVmXCI6XCJcIixcImV2ZW50X25hbWVcIjpcInB1c2hcIixcInJlZl9wcm90ZWN0ZWRcIjpcImZhbHNlXCIsXCJyZWZfdHlwZVwiOlwidGFnXCIsXCJ3b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJ3b3JrZmxvd19zaGFcIjpcIjFmMzJmNWM0ZGVkYWQ3YWMzNWE3ODk1ZTdmNzQwZDllNDgzNTk5MDNcIixcImVudmlyb25tZW50XCI6XCJnaXRodWItcGFnZXNcIixcImVudmlyb25tZW50X25vZGVfaWRcIjpcIkVOX2t3RE9EUVBaV2M0ZUV4MlpcIixcImpvYl93b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJqb2Jfd29ya2Zsb3dfc2hhXCI6XCIxZjMyZjVjNGRlZGFkN2FjMzVhNzg5NWU3Zjc0MGQ5ZTQ4MzU5OTAzXCIsXCJydW5uZXJfZW52aXJvbm1lbnRcIjpcImdpdGh1Yi1ob3N0ZWRcIn0iLCJvaWRjX3N1YiI6InJlcG86cmFtcDQtcGNhcjQvcmFtcDQtcGNhcjQ6ZW52aXJvbm1lbnQ6Z2l0aHViLXBhZ2VzIiwib3JjaGlkIjoiZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5LmJ1aWxkLl9fZGVmYXVsdCIsImlzcyI6InZzdG9rZW4uYWN0aW9ucy5naXRodWJ1c2VyY29udGVudC5jb20iLCJhdWQiOiJ2c3Rva2VuLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tfHZzbzpkYzhlN2U0ZC00ZDQ1LTQ4ZDAtYmY4YS02YmQ0YzZjMjQ2MDciLCJuYmYiOjE3MzQ2MzgxODcsImV4cCI6MTczNDY2MDk4N30.RARk5esxipY8hoZlRACe-X_yM76TNaGPNYLTOeo3QHil127k0ynntWTAIhvG4AnWGYhGaYy4r4nNazwMI7YVAcri6W6w4txoRtMEUdA20vrF04HAvi2LIMPtdLXXW03zl6hIVd22jIGJI6t6hor6a8dQKa5uN4XR_tcXzEI8Vhv3S4R4fOIPJthxGXdW5oC06Arc0YSPRDRDTk-Lb4qXWQVoaQ4oHaRZGaA0xHNITcKkzLN9AHvPFnzaIyK4iQ8Zr_0B2I-Tyor7AAKyCfvKVt980mzK76axB0fid1T0ATLZNg8nftwlvB-y9u-KqFPIf8iOeoMrMNQVV9FHigeU7w",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/22.12.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_f84c0023-8fe3-4772-972b-468f8650057c",INVOCATION_ID:"b4280ab4ab86413d99aedf730c4ee39c",NPM_CONFIG_USERCONFIG:"/home/runner/work/_temp/.npmrc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",npm_package_name:"ramp-pcar",GITHUB_ACTION:"__run_4",GITHUB_RUN_NUMBER:"131",GITHUB_TRIGGERING_ACTOR:"james-rae",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 2",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"v4.10.0",GITHUB_REPOSITORY:"ramp4-pcar4/ramp4-pcar4",STATS_D_D:"true",npm_lifecycle_script:"vite build --mode esDynamic",npm_config_loglevel:"silent",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"218356057",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"4.10.0",npm_lifecycle_event:"build:esDynamic",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",GITHUB_REF:"refs/tags/v4.10.0",GITHUB_ACTOR:"james-rae",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/22.12.0/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",GITHUB_ACTOR_ID:"7585245",RUNNER_WORKSPACE:"/home/runner/work/ramp4-pcar4",npm_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",ACTIONS_ID_TOKEN_REQUEST_URL:"https://pipelinesghubeus2.actions.githubusercontent.com/CYYZq0bGEiBG5XjoYFUt7ZUW3UppKtccmRBdNq2vSmlX4E20ap/00000000-0000-0000-0000-000000000000/_apis/distributedtask/hubs/Actions/plans/e33fb1dd-9222-42ba-b794-b484fd33f849/jobs/ca395085-040a-526b-2ce8-bdc85f692774/idtoken?api-version=2.0",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",npm_config_global_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",INIT_CWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",EDITOR:"vi",NODE_ENV:"production"};let v2e;const tN=e=>v2e=e,b2e=Symbol();function bU(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var eE;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(eE||(eE={}));function hGt(){const e=BO(!0),t=e.run(()=>Le({}));let r=[],n=[];const i=wi({install(s){tN(i),i._a=s,s.provide(b2e,i),s.config.globalProperties.$pinia=i,n.forEach(o=>r.push(o)),n=[]},use(s){return!this._a&&!cGt?n.push(s):r.push(s),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return i}const w2e=()=>{};function dre(e,t,r,n=w2e){e.push(t);const i=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),n())};return!r&&pq()&&_we(i),i}function W1(e,...t){e.slice().forEach(r=>{r(...t)})}const pGt=e=>e();function wU(e,t){e instanceof Map&&t instanceof Map&&t.forEach((r,n)=>e.set(n,r)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];bU(i)&&bU(n)&&e.hasOwnProperty(r)&&!wr(n)&&!Wl(n)?e[r]=wU(i,n):e[r]=n}return e}const dGt=Symbol();function fGt(e){return!bU(e)||!e.hasOwnProperty(dGt)}const{assign:Df}=Object;function mGt(e){return!!(wr(e)&&e.effect)}function yGt(e,t,r,n){const{state:i,actions:s,getters:o}=t,a=r.state.value[e];let l;function u(){!a&&g2e.NODE_ENV==="production"&&(r.state.value[e]=i?i():{});const c=wq(r.state.value[e]);return Df(c,s,Object.keys(o||{}).reduce((h,d)=>(h[d]=wi(cr(()=>{tN(r);const m=r._s.get(e);return o[d].call(m,m)})),h),{}))}return l=_2e(e,u,t,r,n,!0),l}function _2e(e,t,r={},n,i,s){let o;const a=Df({actions:{}},r),l={deep:!0};let u,c,h=[],d=[],m;const y=n.state.value[e];!s&&!y&&g2e.NODE_ENV==="production"&&(n.state.value[e]={}),Le({});let g;function b(M){let C;u=c=!1,typeof M=="function"?(M(n.state.value[e]),C={type:eE.patchFunction,storeId:e,events:m}):(wU(n.state.value[e],M),C={type:eE.patchObject,payload:M,storeId:e,events:m});const k=g=Symbol();xc().then(()=>{g===k&&(u=!0)}),c=!0,W1(h,C,n.state.value[e])}const S=s?function(){const{state:M}=r,C=M?M():{};this.$patch(k=>{Df(k,C)})}:w2e;function E(){o.stop(),h=[],d=[],n._s.delete(e)}function x(M,C){return function(){tN(n);const k=Array.from(arguments),N=[],F=[];function P(v){N.push(v)}function B(v){F.push(v)}W1(d,{args:k,name:M,store:T,after:P,onError:B});let O;try{O=C.apply(this&&this.$id===e?this:T,k)}catch(v){throw W1(F,v),v}return O instanceof Promise?O.then(v=>(W1(N,v),v)).catch(v=>(W1(F,v),Promise.reject(v))):(W1(N,O),O)}}const w={_p:n,$id:e,$onAction:dre.bind(null,d),$patch:b,$reset:S,$subscribe(M,C={}){const k=dre(h,M,C.detached,()=>N()),N=o.run(()=>_s(()=>n.state.value[e],F=>{(C.flush==="sync"?c:u)&&M({storeId:e,type:eE.direct,events:m},F)},Df({},l,C)));return k},$dispose:E},T=Ts(w);n._s.set(e,T);const I=(n._a&&n._a.runWithContext||pGt)(()=>n._e.run(()=>(o=BO()).run(t)));for(const M in I){const C=I[M];if(wr(C)&&!mGt(C)||Wl(C))s||(y&&fGt(C)&&(wr(C)?C.value=y[M]:wU(C,y[M])),n.state.value[e][M]=C);else if(typeof C=="function"){const k=x(M,C);I[M]=k,a.actions[M]=C}}return Df(T,I),Df(Xt(T),I),Object.defineProperty(T,"$state",{get:()=>n.state.value[e],set:M=>{b(C=>{Df(C,M)})}}),n._p.forEach(M=>{Df(T,o.run(()=>M({store:T,app:n._a,pinia:n,options:a})))}),y&&s&&r.hydrate&&r.hydrate(T.$state,y),u=!0,c=!0,T}function Yn(e,t,r){let n,i;const s=typeof t=="function";typeof e=="string"?(n=e,i=s?r:t):(i=e,n=e.id);function o(a,l){const u=d_e();return a=a||(u?Ki(b2e,null):null),a&&tN(a),a=v2e,a._s.has(n)||(s?_2e(n,t,i,a):yGt(n,i,a)),a._s.get(n)}return o.$id=n,o}const pT=Yn("appbar",()=>{const e=Le({}),t=Le([]),r=Le([]),n=cr(()=>t.value.map(o=>o.map(a=>e.value[a]).filter(a=>{if(typeof a=="string"||a.componentId)return!0})).filter(o=>o.length>0));function i(o){r.value.includes(o)||r.value.push(o)}function s(o){const a=r.value.indexOf(o);a!==-1&&r.value.splice(a,1),o in e.value&&delete e.value[o],t.value.forEach(l=>{const u=l.indexOf(o);u!==-1&&l.splice(u,1)})}return{items:e,order:t,temporary:r,visible:n,addTempButton:i,removeButton:s}}),QC=Yn("grid",()=>{const e=Le({}),t=Le(),r=Le();function n(a){e.value={...e.value,[a.id]:a}}function i(a){e.value[a]!==void 0&&delete e.value[a]}function s(a){return Object.keys(e.value).find(l=>e.value[l].layerIds.includes(a))}function o(a,l){e.value[a].layerIds=e.value[a].layerIds.filter(u=>u!==l)}return{grids:e,panel:t,currentId:r,addGrid:n,removeGrid:i,getGridId:s,removeLayer:o}});function fm(e,t,r,n){var i,s=!1,o=0;function a(){i&&clearTimeout(i)}function l(){a(),s=!0}typeof t!="boolean"&&(n=r,r=t,t=void 0);function u(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];var m=this,y=Date.now()-o;if(s)return;function g(){o=Date.now(),r.apply(m,h)}function b(){i=void 0}n&&!i&&g(),a(),n===void 0&&y>e?g():t!==!0&&(i=setTimeout(n?b:g,n===void 0?e-y:e))}return u.cancel=l,u}function dT(e,t,r){return r===void 0?fm(e,t,!1):fm(e,r,t!==!1)}const mm=Yn("map-caption",()=>{const e=Le({text:{},logo:{}}),t=Le({}),r=Le({}),n=Le({});function i(o){o!==void 0?t.value.isImperialScale=o:t.value.isImperialScale=!t.value.isImperialScale}function s(o){e.value.text.value=o.text.value,e.value.text.disabled=o.text.disabled,e.value.logo.altText=o.logo.altText,e.value.logo.link=o.logo.link,e.value.logo.value=o.logo.value,e.value.logo.disabled=o.logo.disabled}return{attribution:e,scale:t,coords:r,langtoggle:n,toggleScale:i,setAttribution:s}}),iD=(e,t)=>{const r=[...e];for(;r.length>0;){const n=r.shift();if(t(n))return n;n&&r.push(...n.sublayers)}},Ku=Yn("layer",()=>{const e=Le([]),t=Le([]),r=Le([]);function n(h){return iD(e.value,d=>d?.uid===h)}function i(h){return iD(e.value,d=>d?.id===h)}function s(h){return iD(e.value,d=>d!==void 0&&(d.id===h||d.uid===h))}function o(h){t.value=[...t.value,h]}function a(h,d=void 0){e.value=[...e.value,h],h.mapLayer&&((d===void 0||d<0)&&(console.error("Map layer added to store with invalid index!"),d=r.value.length),r.value.splice(d,0,h.id),r.value=[...r.value])}function l(h,d){if(!h.mapLayer){console.error("Data layer passed to layer store reorder");return}if(d<0){console.error("Negative index passed to layer store reorder");return}d>=r.value.length&&(d=r.value.length-1);const m=r.value.findIndex(y=>y===h.id);m!==-1&&m!==d&&(r.value.splice(m,1),r.value.splice(d,0,h.id),r.value=[...r.value])}function u(h){const d=e.value.filter(m=>m.id!==h.id||m.uid!==h.uid);if(e.value=d,h.mapLayer){const m=r.value.filter(y=>y!==h.id);r.value=m}}function c(h){const d=t.value.filter(m=>m.id!==h);t.value=d}return{layers:e,mapOrder:r,layerConfigs:t,getLayerByUid:n,getLayerById:i,getLayerByAny:s,addLayerConfig:o,addLayer:a,reorderLayer:l,removeLayer:u,removeLayerConfig:c}}),Wo=Yn("config",()=>{const e=Le({map:{lodSets:[],extentSets:[],tileSchemas:[],basemaps:[],initialBasemapId:""},fixtures:{},layers:[]}),t=Le([]),r=Le(),n=Le({}),i=Le({});function s(l){if(n.value[i.value[l]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return n.value[i.value[l]]}function o(l){const u={...e.value,...l};if(e.value=u,Array.isArray(e.value.layers)){const c=Ku();c.layerConfigs=[...c.layerConfigs,e.value.layers]}}function a(l){const u=l.configLangs,c=l.config,h=l.allLangs;u!==void 0&&u.length>0&&u.forEach(d=>{n.value[d]=c,i.value[d]=d}),h!==void 0&&h.length>0&&h.forEach(d=>{i.value[d]=Object.keys(n.value)[0]})}return{config:e,startingFixtures:t,activeBasemapConfig:r,registeredConfigs:n,registeredLangs:i,getActiveConfig:s,newConfig:o,registerConfig:a}}),zq=Yn("details",()=>{const e=Le([]),t=Le({}),r=Le({}),n=Le(),i=Le(0),s=Le(0),o=Le(!0),a=Le();function l(c){const h=e.value.findIndex(d=>d.uid===c.uid);h!==-1&&e.value.splice(h,1)}function u(c){t.value={...t.value,[c.id]:c}}return{payload:e,properties:t,defaultTemplates:r,currentFeatureId:n,activeGreedy:i,lastHilight:s,hilightToggle:o,origin:a,removeLayer:l,addConfigProperty:u}}),Dl=Yn("fixture",()=>{const e=Le({}),t=Le({});function r(o){return o.map(a=>t.value[a].getPromise())}function n(o){if(e.value={...e.value,[o.id]:wi(o)},o.id in t.value)t.value[o.id].resolveMe(wi(o));else{const a=new bi;a.resolveMe(wi(o)),t.value={...t.value,[o.id]:a}}typeof o.added=="function"&&o.added()}function i(o){delete e.value[o.id],e.value={...e.value},delete t.value[o.id],t.value={...t.value},typeof o.removed=="function"&&o.removed()}function s(o){t.value={...t.value,[o]:new bi}}return{items:e,loadPromises:t,getLoadPromises:r,addFixture:n,removeFixture:i,addLoadPromise:s}});var St=(e=>(e.APPBAR_BUTTON_CLICK="appbar/click",e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_TOGGLE="details/toggle",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LANG_CHANGE="lang/change",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",e.LAYER_LAYERSTATECHANGE="layer/layerstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_FOCUS="map/focus",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSELEAVE="map/mouseleave",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_TOGGLE="metadata/toggle",e.PANEL_CLOSED="panel/closed",e.PANEL_MINIMIZED="panel/minimized",e.PANEL_OPENED="panel/opened",e.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",e.REORDER_TOGGLE="reorder/toggle",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_TOGGLE="wizard/toggle",e))(St||{}),_U=(e=>(e.CONFIG_CHANGE_UPDATES_MAP_ATTRIBS="ramp_config_change_updates_map_attribs",e.LAYER_ERROR_UPDATES_LEGEND="ramp_layer_error_updates_legend",e.LAYER_REGISTER_BINDS_LEGEND="ramp_layer_register_binds_legend",e.LAYER_RELOAD_END_BINDS_LEGEND="ramp_layer_reload_end_binds_legend",e.LAYER_RELOAD_START_UPDATES_LEGEND="ramp_layer_reload_start_updates_legend",e.LAYER_REMOVE_UPDATES_DETAILS="ramp_layer_remove_updates_details",e.LAYER_REMOVE_CHECKS_GRID="ramp_layer_remove_checks_grid",e.LAYER_REMOVE_UPDATES_LEGEND="ramp_layer_remove_updates_legend",e.LAYER_USERADD_UPDATES_LEGEND="ramp_layer_useradd_updates_legend",e.MAP_BASEMAP_CHECKS_TILE_PROJ="ramp_map_basemap_checks_tile_proj",e.MAP_BASEMAP_UPDATES_MAP_ATTRIBS="ramp_map_basemap_updates_map_attribs",e.MAP_BLUR_UPDATES_KEY_HANDLER="ramp_map_blur_updates_key_handler",e.MAP_CLICK_RUNS_IDENTIFY="ramp_map_click_runs_identify",e.MAP_CREATED_INITIALIZES_FIXTURES="ramp_map_created_initializes_fixtures",e.MAP_CREATED_UPDATES_MAP_ATTRIBS="ramp_map_created_updates_map_attribs",e.MAP_EXTENT_UPDATES_MAPTIP="ramp_map_extent_updates_maptip",e.MAP_GRAPHICHIT_CREATES_MAPTIP="ramp_map_graphichit_creates_maptip",e.MAP_IDENTIFY_OPENS_IDENTIFY_RESULTS="ramp_map_identify_opens_identify_results",e.MAP_KEYDOWN_UPDATES_COORDS="ramp_map_keydown_updates_coords",e.MAP_KEYDOWN_UPDATES_KEY_HANDLER="ramp_map_keydown_updates_key_handler",e.MAP_KEYUP_UPDATES_KEY_HANDLER="ramp_map_keyup_updates_key_handler",e.MAP_MOUSE_UPDATES_COORDS="ramp_map_mouse_updates_coords",e.MAP_MOUSE_UPDATES_MAPTIP="ramp_map_mouse_updates_maptip",e.MAP_MOUSELEAVE_REMOVES_MAPTIP="ramp_map_mouseleave_removes_maptip",e.MAP_RESIZE_UPDATES_SCALEBAR="ramp_map_resize_updates_scalebar",e.MAP_SCALE_UPDATES_SCALEBAR="ramp_map_scale_updates_scalebar",e.PANEL_CLOSE_UPDATES_APPBAR="ramp_panel_close_updates_appbar",e.PANEL_OPEN_UPDATES_APPBAR="ramp_panel_open_updates_appbar",e.TOGGLE_DETAILS="ramp_toggle_details",e.TOGGLE_GRID="ramp_toggle_grid",e.TOGGLE_HELP="ramp_toggle_help",e.TOGGLE_METADATA="ramp_toggle_metadata",e.TOGGLE_REORDER="ramp_toggle_reorder",e.TOGGLE_SETTINGS="ramp_toggle_settings",e.TOGGLE_WIZARD="ramp_toggle_wizard",e))(_U||{});class gGt{eventName;handlerName;handlerFunc;constructor(t,r,n){this.eventName=t,this.handlerName=r,this.handlerFunc=n}}class vGt extends Si{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new cjt.TinyEmitter,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(St).filter(r=>typeof r=="string"&&r.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(r=>r.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(r=>{this._nameRegister.indexOf(r)===-1&&this._nameRegister.push(r)})}eventNames(){return this._nameRegister.slice()}on(t,r,n=""){if(this.findHandler(n))throw new Error("Duplicate handler name registration: "+n);n||(n=this.handlerNamer(t));const i=new gGt(t,n,r);return this._eventRegister.push(i),this._eventBus.on(t,r),n}off(t){const r=this.findHandler(t);r&&(this._eventRegister.splice(this._eventRegister.indexOf(r),1),this._eventBus.off(r.eventName,r.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(r=>this.off(r))}removeDefaultEvents(){Object.values(_U).forEach(t=>{this.off(t)})}emit(t,...r){this._eventBus.emit(t,...r)}once(t,r,n=""){n||(n=this.handlerNamer(t));const i=(...s)=>{r(...s),this.off(n)};return this.on(t,i,n)}activeHandlers(t=""){return t===""?this._eventRegister.map(r=>r.handlerName):this._eventRegister.filter(r=>r.eventName===t).map(r=>r.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=Object.values(_U)),t.map(r=>this.defaultHandlerFactory(r))}defaultHandlerFactory(t){let r;switch(t){case"ramp_config_change_updates_map_attribs":r=n=>{const i=n.map.basemaps.find(s=>s.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(i?.attribution)},this.$iApi.event.on("config/configchanged",r,t);break;case"ramp_layer_error_updates_legend":r=n=>{if(n.layer.layerState===Hn.ERROR){const i=this.$iApi.fixture.get("legend");i&&i.updateLegend(n.layer)}},this.$iApi.event.on("layer/layerstatechange",r,t);break;case"ramp_layer_register_binds_legend":r=n=>{const i=this.$iApi.fixture.get("legend");i&&i.updateLegend(n)},this.$iApi.event.on("layer/registered",r,t);break;case"ramp_layer_reload_end_binds_legend":r=n=>{const i=this.$iApi.fixture.get("legend");i&&i.updateLegend(n)},this.$iApi.event.on("layer/reloadend",r,t);break;case"ramp_layer_reload_start_updates_legend":r=n=>{if(!n.isSublayer){const i=this.$iApi.fixture.get("legend");i&&i.reloadLayerItem(n.uid)}},this.$iApi.event.on("layer/reloadstart",r,t);break;case"ramp_layer_remove_checks_grid":r=n=>{if(this.$iApi.fixture.get("grid")){const i=QC(this.$vApp.$pinia),s=i.getGridId(n.id);if(s===void 0)return;if(i.removeLayer(s,n.id),i.grids[s].layerIds.length===0){i.removeGrid(s);const o=i.currentId;if(s===o){const a=this.$iApi.panel.get("grid");this.$iApi.panel.close(a),i.currentId=void 0}}}},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_details":r=n=>{const i=zq(this.$vApp.$pinia);this.$iApi.fixture.get("details")&&i.removeLayer(n)},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_legend":r=n=>{const i=this.$iApi.fixture.get("legend");i&&(i.removeLayerItem(n),this.$iApi.updateAlert(this.$iApi.$i18n.t("legend.alert.layerRemoved",{name:n.name})))},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_useradd_updates_legend":r=n=>{const i=this.$iApi.fixture.get("legend");i&&i.addLayerItem(n)},this.$iApi.event.on("user/layeradded",r,t);break;case"ramp_map_basemap_checks_tile_proj":r=n=>{n.schemaChanged&&this.$iApi.geo.layer.allLayers().filter(i=>i.layerType===Ct.TILE).forEach(i=>{i.checkProj()})},this.$iApi.event.on("map/basemapchanged",r,t);break;case"ramp_map_basemap_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(Wo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.event.on("map/basemapchanged",r,t);break;case"ramp_map_blur_updates_key_handler":r=()=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",r,t);break;case"ramp_map_click_runs_identify":r=n=>{n.button===0&&this.$iApi.geo.map.runIdentify(n)},this.on("map/click",r,t);break;case"ramp_map_created_initializes_fixtures":r=()=>{const n=Dl(this.$vApp.$pinia).items;Object.keys(n).forEach(i=>{n[i].initialized?.()})},this.$iApi.geo.map.created&&r(),this.$iApi.event.on("map/created",r,t);break;case"ramp_map_created_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(Wo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.geo.map.created&&r(),this.$iApi.event.on("map/created",r,t);break;case"ramp_map_extent_updates_maptip":r=()=>{if(this.$iApi.geo.map.keysActive){const n=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(n)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",fm(50,!0,()=>r()),t);break;case"ramp_map_graphichit_creates_maptip":r=n=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(n)},this.$iApi.event.on("map/graphichit",r,t);break;case"ramp_map_identify_opens_identify_results":r=n=>{const i=this.$iApi.fixture.get("details");i&&i.openDetails(n.results)},this.on("map/identify",r,t);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",fm(50,()=>{const n=mm(this.$vApp.$pinia);n.coords?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(i=>{n.coords={formattedString:i}})}),t);break;case"ramp_map_keydown_updates_key_handler":r=n=>{this.$iApi.geo.map.mapKeyDown(n)},this.$iApi.event.on("map/keydown",r,t);break;case"ramp_map_keyup_updates_key_handler":r=n=>{this.$iApi.geo.map.mapKeyUp(n)},this.$iApi.event.on("map/keyup",r,t);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",fm(50,n=>{const i=mm(this.$vApp.$pinia);i.coords?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(n)).then(s=>{i.coords={formattedString:s}})}),t);break;case"ramp_map_mouse_updates_maptip":r=n=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:n.screenX,screenY:n.screenY})},this.$iApi.event.on("map/mousemove",fm(50,n=>r(n)),t);break;case"ramp_map_mouseleave_removes_maptip":r=()=>{this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/mouseleave",r);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",dT(100,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",dT(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_panel_close_updates_appbar":r=n=>{const i=pT(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&!i.order.flat().find(s=>s===n.id)&&i.removeButton(n.id)},this.on("panel/closed",r,t);break;case"ramp_panel_open_updates_appbar":r=n=>{const i=pT(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&(!n.teleport||n.teleport?.showAppbarButton)&&!i.order.flat().find(s=>s===n.id)&&i.addTempButton(n.id)},this.on("panel/opened",r,t);break;case"ramp_toggle_details":r=(n,i)=>{const s=this.$iApi.fixture.get("details");s&&s.toggleFeature(n,i)},this.$iApi.event.on("details/toggle",r,t);break;case"ramp_toggle_grid":r=(n,i)=>{const s=this.$iApi.fixture.get("grid");s&&s.toggleGrid(n.id,i)},this.$iApi.event.on("grid/toggle",r,t);break;case"ramp_toggle_help":r=n=>{const i=this.$iApi.fixture.get("help");i&&i.toggleHelp(n)},this.$iApi.event.on("help/toggle",r,t);break;case"ramp_toggle_metadata":r=(n,i)=>{const s=this.$iApi.fixture.get("metadata");s&&s.toggleMetadata(n,i)},this.$iApi.event.on("metadata/toggle",r,t);break;case"ramp_toggle_reorder":r=n=>{const i=this.$iApi.fixture.get("layer-reorder");i&&i.toggleLayerReorder(n)},this.$iApi.event.on("reorder/toggle",r,t);break;case"ramp_toggle_settings":r=(n,i)=>{const s=this.$iApi.fixture.get("settings");s&&s.toggleSettings(n,i)},this.$iApi.event.on("settings/toggle",r,t);break;case"ramp_toggle_wizard":r=n=>{const i=this.$iApi.fixture.get("wizard");i&&i.toggleWizard(n)},this.$iApi.event.on("wizard/toggle",r,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}const KC=typeof window<"u",a0=(e,t=!1)=>t?Symbol.for(e):Symbol(e),bGt=(e,t,r)=>wGt({l:e,k:t,s:r}),wGt=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),vi=e=>typeof e=="number"&&isFinite(e),_Gt=e=>S2e(e)==="[object Date]",zm=e=>S2e(e)==="[object RegExp]",rN=e=>sr(e)&&Object.keys(e).length===0,Vs=Object.assign,xGt=Object.create,Yr=(e=null)=>xGt(e);let fre;const Xp=()=>fre||(fre=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Yr());function mre(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const SGt=Object.prototype.hasOwnProperty;function ec(e,t){return SGt.call(e,t)}const In=Array.isArray,dn=e=>typeof e=="function",lt=e=>typeof e=="string",fr=e=>typeof e=="boolean",Cr=e=>e!==null&&typeof e=="object",EGt=e=>Cr(e)&&dn(e.then)&&dn(e.catch),x2e=Object.prototype.toString,S2e=e=>x2e.call(e),sr=e=>{if(!Cr(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},TGt=e=>e==null?"":In(e)||sr(e)&&e.toString===x2e?JSON.stringify(e,null,2):String(e);function IGt(e,t=""){return e.reduce((r,n,i)=>i===0?r+n:r+t+n,"")}function nN(e){let t=e;return()=>++t}function AGt(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const LA=e=>!Cr(e)||In(e);function q4(e,t){if(LA(e)||LA(t))throw new Error("Invalid value");const r=[{src:e,des:t}];for(;r.length;){const{src:n,des:i}=r.pop();Object.keys(n).forEach(s=>{s!=="__proto__"&&(Cr(n[s])&&!Cr(i[s])&&(i[s]=Array.isArray(n[s])?[]:Yr()),LA(i[s])||LA(n[s])?i[s]=n[s]:r.push({src:n[s],des:i[s]}))})}}function MGt(e,t,r){return{line:e,column:t,offset:r}}function ek(e,t,r){return{start:e,end:t}}const CGt=/\{([0-9a-zA-Z]+)\}/g;function E2e(e,...t){return t.length===1&&kGt(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(CGt,(r,n)=>t.hasOwnProperty(n)?t[n]:"")}const T2e=Object.assign,yre=e=>typeof e=="string",kGt=e=>e!==null&&typeof e=="object";function I2e(e,t=""){return e.reduce((r,n,i)=>i===0?r+n:r+t+n,"")}const $q={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},RGt={[$q.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function OGt(e,t,...r){const n=E2e(RGt[e],...r||[]),i={message:String(n),code:e};return t&&(i.location=t),i}const Zt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},NGt={[Zt.EXPECTED_TOKEN]:"Expected token: '{0}'",[Zt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Zt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Zt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Zt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Zt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Zt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Zt.EMPTY_PLACEHOLDER]:"Empty placeholder",[Zt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Zt.INVALID_LINKED_FORMAT]:"Invalid linked format",[Zt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Zt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Zt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Zt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Zt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Zt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function B_(e,t,r={}){const{domain:n,messages:i,args:s}=r,o=E2e((i||NGt)[e]||"",...s||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=n,a}function LGt(e){throw e}const Yh=" ",PGt="\r",ba=`
`,DGt="\u2028",FGt="\u2029";function jGt(e){const t=e;let r=0,n=1,i=1,s=0;const o=M=>t[M]===PGt&&t[M+1]===ba,a=M=>t[M]===ba,l=M=>t[M]===FGt,u=M=>t[M]===DGt,c=M=>o(M)||a(M)||l(M)||u(M),h=()=>r,d=()=>n,m=()=>i,y=()=>s,g=M=>o(M)||l(M)||u(M)?ba:t[M],b=()=>g(r),S=()=>g(r+s);function E(){return s=0,c(r)&&(n++,i=0),o(r)&&r++,r++,i++,t[r]}function x(){return o(r+s)&&s++,s++,t[r+s]}function w(){r=0,n=1,i=1,s=0}function T(M=0){s=M}function I(){const M=r+s;for(;M!==r;)E();s=0}return{index:h,line:d,column:m,peekOffset:y,charAt:g,currentChar:b,currentPeek:S,next:E,peek:x,reset:w,resetPeek:T,skipToPeek:I}}const rf=void 0,gre="'",UGt="tokenizer";function BGt(e,t={}){const r=t.location!==!1,n=jGt(e),i=()=>n.index(),s=()=>MGt(n.line(),n.column(),n.index()),o=s(),a=i(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=t;function h(j,V,$,...J){const X=u();if(V.column+=$,V.offset+=$,c){const te=r?ek(X.startLoc,V):null,le=B_(j,te,{domain:UGt,args:J});c(le)}}function d(j,V,$){j.endLoc=s(),j.currentType=V;const J={type:V};return r&&(J.loc=ek(j.startLoc,j.endLoc)),$!=null&&(J.value=$),J}const m=j=>d(j,14);function y(j,V){return j.currentChar()===V?(j.next(),V):(h(Zt.EXPECTED_TOKEN,s(),0,V),"")}function g(j){let V="";for(;j.currentPeek()===Yh||j.currentPeek()===ba;)V+=j.currentPeek(),j.peek();return V}function b(j){const V=g(j);return j.skipToPeek(),V}function S(j){if(j===rf)return!1;const V=j.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V===95}function E(j){if(j===rf)return!1;const V=j.charCodeAt(0);return V>=48&&V<=57}function x(j,V){const{currentType:$}=V;if($!==2)return!1;g(j);const J=S(j.currentPeek());return j.resetPeek(),J}function w(j,V){const{currentType:$}=V;if($!==2)return!1;g(j);const J=j.currentPeek()==="-"?j.peek():j.currentPeek(),X=E(J);return j.resetPeek(),X}function T(j,V){const{currentType:$}=V;if($!==2)return!1;g(j);const J=j.currentPeek()===gre;return j.resetPeek(),J}function I(j,V){const{currentType:$}=V;if($!==8)return!1;g(j);const J=j.currentPeek()===".";return j.resetPeek(),J}function M(j,V){const{currentType:$}=V;if($!==9)return!1;g(j);const J=S(j.currentPeek());return j.resetPeek(),J}function C(j,V){const{currentType:$}=V;if(!($===8||$===12))return!1;g(j);const J=j.currentPeek()===":";return j.resetPeek(),J}function k(j,V){const{currentType:$}=V;if($!==10)return!1;const J=()=>{const te=j.currentPeek();return te==="{"?S(j.peek()):te==="@"||te==="%"||te==="|"||te===":"||te==="."||te===Yh||!te?!1:te===ba?(j.peek(),J()):P(j,!1)},X=J();return j.resetPeek(),X}function N(j){g(j);const V=j.currentPeek()==="|";return j.resetPeek(),V}function F(j){const V=g(j),$=j.currentPeek()==="%"&&j.peek()==="{";return j.resetPeek(),{isModulo:$,hasSpace:V.length>0}}function P(j,V=!0){const $=(X=!1,te="",le=!1)=>{const ve=j.currentPeek();return ve==="{"?te==="%"?!1:X:ve==="@"||!ve?te==="%"?!0:X:ve==="%"?(j.peek(),$(X,"%",!0)):ve==="|"?te==="%"||le?!0:!(te===Yh||te===ba):ve===Yh?(j.peek(),$(!0,Yh,le)):ve===ba?(j.peek(),$(!0,ba,le)):!0},J=$();return V&&j.resetPeek(),J}function B(j,V){const $=j.currentChar();return $===rf?rf:V($)?(j.next(),$):null}function O(j){const V=j.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36}function v(j){return B(j,O)}function A(j){const V=j.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36||V===45}function R(j){return B(j,A)}function U(j){const V=j.charCodeAt(0);return V>=48&&V<=57}function q(j){return B(j,U)}function Q(j){const V=j.charCodeAt(0);return V>=48&&V<=57||V>=65&&V<=70||V>=97&&V<=102}function ee(j){return B(j,Q)}function Y(j){let V="",$="";for(;V=q(j);)$+=V;return $}function ue(j){b(j);const V=j.currentChar();return V!=="%"&&h(Zt.EXPECTED_TOKEN,s(),0,V),j.next(),"%"}function de(j){let V="";for(;;){const $=j.currentChar();if($==="{"||$==="}"||$==="@"||$==="|"||!$)break;if($==="%")if(P(j))V+=$,j.next();else break;else if($===Yh||$===ba)if(P(j))V+=$,j.next();else{if(N(j))break;V+=$,j.next()}else V+=$,j.next()}return V}function ce(j){b(j);let V="",$="";for(;V=R(j);)$+=V;return j.currentChar()===rf&&h(Zt.UNTERMINATED_CLOSING_BRACE,s(),0),$}function me(j){b(j);let V="";return j.currentChar()==="-"?(j.next(),V+=`-${Y(j)}`):V+=Y(j),j.currentChar()===rf&&h(Zt.UNTERMINATED_CLOSING_BRACE,s(),0),V}function Se(j){return j!==gre&&j!==ba}function Oe(j){b(j),y(j,"'");let V="",$="";for(;V=B(j,Se);)V==="\\"?$+=ye(j):$+=V;const J=j.currentChar();return J===ba||J===rf?(h(Zt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),J===ba&&(j.next(),y(j,"'")),$):(y(j,"'"),$)}function ye(j){const V=j.currentChar();switch(V){case"\\":case"'":return j.next(),`\\${V}`;case"u":return Fe(j,V,4);case"U":return Fe(j,V,6);default:return h(Zt.UNKNOWN_ESCAPE_SEQUENCE,s(),0,V),""}}function Fe(j,V,$){y(j,V);let J="";for(let X=0;X<$;X++){const te=ee(j);if(!te){h(Zt.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${V}${J}${j.currentChar()}`);break}J+=te}return`\\${V}${J}`}function ze(j){return j!=="{"&&j!=="}"&&j!==Yh&&j!==ba}function dt(j){b(j);let V="",$="";for(;V=B(j,ze);)$+=V;return $}function re(j){let V="",$="";for(;V=v(j);)$+=V;return $}function D(j){const V=$=>{const J=j.currentChar();return J==="{"||J==="%"||J==="@"||J==="|"||J==="("||J===")"||!J||J===Yh?$:($+=J,j.next(),V($))};return V("")}function K(j){b(j);const V=y(j,"|");return b(j),V}function H(j,V){let $=null;switch(j.currentChar()){case"{":return V.braceNest>=1&&h(Zt.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),j.next(),$=d(V,2,"{"),b(j),V.braceNest++,$;case"}":return V.braceNest>0&&V.currentType===2&&h(Zt.EMPTY_PLACEHOLDER,s(),0),j.next(),$=d(V,3,"}"),V.braceNest--,V.braceNest>0&&b(j),V.inLinked&&V.braceNest===0&&(V.inLinked=!1),$;case"@":return V.braceNest>0&&h(Zt.UNTERMINATED_CLOSING_BRACE,s(),0),$=z(j,V)||m(V),V.braceNest=0,$;default:{let J=!0,X=!0,te=!0;if(N(j))return V.braceNest>0&&h(Zt.UNTERMINATED_CLOSING_BRACE,s(),0),$=d(V,1,K(j)),V.braceNest=0,V.inLinked=!1,$;if(V.braceNest>0&&(V.currentType===5||V.currentType===6||V.currentType===7))return h(Zt.UNTERMINATED_CLOSING_BRACE,s(),0),V.braceNest=0,L(j,V);if(J=x(j,V))return $=d(V,5,ce(j)),b(j),$;if(X=w(j,V))return $=d(V,6,me(j)),b(j),$;if(te=T(j,V))return $=d(V,7,Oe(j)),b(j),$;if(!J&&!X&&!te)return $=d(V,13,dt(j)),h(Zt.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,$.value),b(j),$;break}}return $}function z(j,V){const{currentType:$}=V;let J=null;const X=j.currentChar();switch(($===8||$===9||$===12||$===10)&&(X===ba||X===Yh)&&h(Zt.INVALID_LINKED_FORMAT,s(),0),X){case"@":return j.next(),J=d(V,8,"@"),V.inLinked=!0,J;case".":return b(j),j.next(),d(V,9,".");case":":return b(j),j.next(),d(V,10,":");default:return N(j)?(J=d(V,1,K(j)),V.braceNest=0,V.inLinked=!1,J):I(j,V)||C(j,V)?(b(j),z(j,V)):M(j,V)?(b(j),d(V,12,re(j))):k(j,V)?(b(j),X==="{"?H(j,V)||J:d(V,11,D(j))):($===8&&h(Zt.INVALID_LINKED_FORMAT,s(),0),V.braceNest=0,V.inLinked=!1,L(j,V))}}function L(j,V){let $={type:14};if(V.braceNest>0)return H(j,V)||m(V);if(V.inLinked)return z(j,V)||m(V);switch(j.currentChar()){case"{":return H(j,V)||m(V);case"}":return h(Zt.UNBALANCED_CLOSING_BRACE,s(),0),j.next(),d(V,3,"}");case"@":return z(j,V)||m(V);default:{if(N(j))return $=d(V,1,K(j)),V.braceNest=0,V.inLinked=!1,$;const{isModulo:J,hasSpace:X}=F(j);if(J)return X?d(V,0,de(j)):d(V,4,ue(j));if(P(j))return d(V,0,de(j));break}}return $}function G(){const{currentType:j,offset:V,startLoc:$,endLoc:J}=l;return l.lastType=j,l.lastOffset=V,l.lastStartLoc=$,l.lastEndLoc=J,l.offset=i(),l.startLoc=s(),n.currentChar()===rf?d(l,14):L(n,l)}return{nextToken:G,currentOffset:i,currentPosition:s,context:u}}const VGt="parser",GGt=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function zGt(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(t||r,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function $Gt(e={}){const t=e.location!==!1,{onError:r,onWarn:n}=e;function i(x,w,T,I,...M){const C=x.currentPosition();if(C.offset+=I,C.column+=I,r){const k=t?ek(T,C):null,N=B_(w,k,{domain:VGt,args:M});r(N)}}function s(x,w,T,I,...M){const C=x.currentPosition();if(C.offset+=I,C.column+=I,n){const k=t?ek(T,C):null;n(OGt(w,k,M))}}function o(x,w,T){const I={type:x};return t&&(I.start=w,I.end=w,I.loc={start:T,end:T}),I}function a(x,w,T,I){t&&(x.end=w,x.loc&&(x.loc.end=T))}function l(x,w){const T=x.context(),I=o(3,T.offset,T.startLoc);return I.value=w,a(I,x.currentOffset(),x.currentPosition()),I}function u(x,w){const T=x.context(),{lastOffset:I,lastStartLoc:M}=T,C=o(5,I,M);return C.index=parseInt(w,10),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function c(x,w,T){const I=x.context(),{lastOffset:M,lastStartLoc:C}=I,k=o(4,M,C);return k.key=w,T===!0&&(k.modulo=!0),x.nextToken(),a(k,x.currentOffset(),x.currentPosition()),k}function h(x,w){const T=x.context(),{lastOffset:I,lastStartLoc:M}=T,C=o(9,I,M);return C.value=w.replace(GGt,zGt),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function d(x){const w=x.nextToken(),T=x.context(),{lastOffset:I,lastStartLoc:M}=T,C=o(8,I,M);return w.type!==12?(i(x,Zt.UNEXPECTED_EMPTY_LINKED_MODIFIER,T.lastStartLoc,0),C.value="",a(C,I,M),{nextConsumeToken:w,node:C}):(w.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,vu(w)),C.value=w.value||"",a(C,x.currentOffset(),x.currentPosition()),{node:C})}function m(x,w){const T=x.context(),I=o(7,T.offset,T.startLoc);return I.value=w,a(I,x.currentOffset(),x.currentPosition()),I}function y(x){const w=x.context(),T=o(6,w.offset,w.startLoc);let I=x.nextToken();if(I.type===9){const M=d(x);T.modifier=M.node,I=M.nextConsumeToken||x.nextToken()}switch(I.type!==10&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(I)),I=x.nextToken(),I.type===2&&(I=x.nextToken()),I.type){case 11:I.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(I)),T.key=m(x,I.value||"");break;case 5:I.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(I)),T.key=c(x,I.value||"");break;case 6:I.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(I)),T.key=u(x,I.value||"");break;case 7:I.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(I)),T.key=h(x,I.value||"");break;default:{i(x,Zt.UNEXPECTED_EMPTY_LINKED_KEY,w.lastStartLoc,0);const M=x.context(),C=o(7,M.offset,M.startLoc);return C.value="",a(C,M.offset,M.startLoc),T.key=C,a(T,M.offset,M.startLoc),{nextConsumeToken:I,node:T}}}return a(T,x.currentOffset(),x.currentPosition()),{node:T}}function g(x){const w=x.context(),T=w.currentType===1?x.currentOffset():w.offset,I=w.currentType===1?w.endLoc:w.startLoc,M=o(2,T,I);M.items=[];let C=null,k=null;do{const P=C||x.nextToken();switch(C=null,P.type){case 0:P.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(P)),M.items.push(l(x,P.value||""));break;case 6:P.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(P)),M.items.push(u(x,P.value||""));break;case 4:k=!0;break;case 5:P.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(P)),M.items.push(c(x,P.value||"",!!k)),k&&(s(x,$q.USE_MODULO_SYNTAX,w.lastStartLoc,0,vu(P)),k=null);break;case 7:P.value==null&&i(x,Zt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,vu(P)),M.items.push(h(x,P.value||""));break;case 8:{const B=y(x);M.items.push(B.node),C=B.nextConsumeToken||null;break}}}while(w.currentType!==14&&w.currentType!==1);const N=w.currentType===1?w.lastOffset:x.currentOffset(),F=w.currentType===1?w.lastEndLoc:x.currentPosition();return a(M,N,F),M}function b(x,w,T,I){const M=x.context();let C=I.items.length===0;const k=o(1,w,T);k.cases=[],k.cases.push(I);do{const N=g(x);C||(C=N.items.length===0),k.cases.push(N)}while(M.currentType!==14);return C&&i(x,Zt.MUST_HAVE_MESSAGES_IN_PLURAL,T,0),a(k,x.currentOffset(),x.currentPosition()),k}function S(x){const w=x.context(),{offset:T,startLoc:I}=w,M=g(x);return w.currentType===14?M:b(x,T,I,M)}function E(x){const w=BGt(x,T2e({},e)),T=w.context(),I=o(0,T.offset,T.startLoc);return t&&I.loc&&(I.loc.source=x),I.body=S(w),e.onCacheKey&&(I.cacheKey=e.onCacheKey(x)),T.currentType!==14&&i(w,Zt.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,x[T.offset]||""),a(I,w.currentOffset(),w.currentPosition()),I}return{parse:E}}function vu(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function qGt(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:n=>(r.helpers.add(n),n)}}function vre(e,t){for(let r=0;r<e.length;r++)qq(e[r],t)}function qq(e,t){switch(e.type){case 1:vre(e.cases,t),t.helper("plural");break;case 2:vre(e.items,t);break;case 6:{qq(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function HGt(e,t={}){const r=qGt(e);r.helper("normalize"),e.body&&qq(e.body,r);const n=r.context();e.helpers=Array.from(n.helpers)}function WGt(e){const t=e.body;return t.type===2?bre(t):t.cases.forEach(r=>bre(r)),e}function bre(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let r=0;r<e.items.length;r++){const n=e.items[r];if(!(n.type===3||n.type===9)||n.value==null)break;t.push(n.value)}if(t.length===e.items.length){e.static=I2e(t);for(let r=0;r<e.items.length;r++){const n=e.items[r];(n.type===3||n.type===9)&&delete n.value}}}}const ZGt="minifier";function Jv(e){switch(e.t=e.type,e.type){case 0:{const t=e;Jv(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,r=t.cases;for(let n=0;n<r.length;n++)Jv(r[n]);t.c=r,delete t.cases;break}case 2:{const t=e,r=t.items;for(let n=0;n<r.length;n++)Jv(r[n]);t.i=r,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;Jv(t.key),t.k=t.key,delete t.key,t.modifier&&(Jv(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw B_(Zt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ZGt,args:[e.type]})}delete e.type}const JGt="parser";function YGt(e,t){const{sourceMap:r,filename:n,breakLineCode:i,needIndent:s}=t,o=t.location!==!1,a={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0};o&&e.loc&&(a.source=e.loc.source);const l=()=>a;function u(y,g){a.code+=y}function c(y,g=!0){const b=g?i:"";u(s?b+"  ".repeat(y):b)}function h(y=!0){const g=++a.indentLevel;y&&c(g)}function d(y=!0){const g=--a.indentLevel;y&&c(g)}function m(){c(a.indentLevel)}return{context:l,push:u,indent:h,deindent:d,newline:m,helper:y=>`_${y}`,needIndent:()=>a.needIndent}}function XGt(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),Lw(e,t.key),t.modifier?(e.push(", "),Lw(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function QGt(e,t){const{helper:r,needIndent:n}=e;e.push(`${r("normalize")}([`),e.indent(n());const i=t.items.length;for(let s=0;s<i&&(Lw(e,t.items[s]),s!==i-1);s++)e.push(", ");e.deindent(n()),e.push("])")}function KGt(e,t){const{helper:r,needIndent:n}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(n());const i=t.cases.length;for(let s=0;s<i&&(Lw(e,t.cases[s]),s!==i-1);s++)e.push(", ");e.deindent(n()),e.push("])")}}function ezt(e,t){t.body?Lw(e,t.body):e.push("null")}function Lw(e,t){const{helper:r}=e;switch(t.type){case 0:ezt(e,t);break;case 1:KGt(e,t);break;case 2:QGt(e,t);break;case 6:XGt(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw B_(Zt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:JGt,args:[t.type]})}}const tzt=(e,t={})=>{const r=yre(t.mode)?t.mode:"normal",n=yre(t.filename)?t.filename:"message.intl",i=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,o=t.needIndent?t.needIndent:r!=="arrow",a=e.helpers||[],l=YGt(e,{mode:r,filename:n,sourceMap:i,breakLineCode:s,needIndent:o});l.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${I2e(a.map(h=>`${h}: _${h}`),", ")} } = ctx`),l.newline()),l.push("return "),Lw(l,e),l.deindent(o),l.push("}"),delete e.helpers;const{code:u,map:c}=l.context();return{ast:e,code:u,map:c?c.toJSON():void 0}};function rzt(e,t={}){const r=T2e({},t),n=!!r.jit,i=!!r.minify,s=r.optimize==null?!0:r.optimize,o=$Gt(r).parse(e);return n?(s&&WGt(o),i&&Jv(o),{ast:o,code:""}):(HGt(o,r),tzt(o,r))}var nzt={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_always_auth:"",npm_config_user_agent:"npm/10.9.0 node/v22.12.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",NODE_AUTH_TOKEN:"XXXXX-XXXXX-XXXXX-XXXXX",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ramp4-pcar4",npm_package_engines_node:"=22.12.0",GRADLE_HOME:"/usr/share/gradle-8.11.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"57148724",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_local_prefix:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",SYSTEMD_EXEC_PID:"833",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241215.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.10/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.4/x64",JOURNAL_STREAM:"8:6481",GITHUB_WORKFLOW:"Build demo site and deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/22.12.0/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",npm_config_npm_version:"10.9.0",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"12419971258",STATS_VMFE:"true",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"tag",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ramp4-pcar4/ramp4-pcar4/.github/workflows/demo-build.yml@refs/tags/v4.10.0",ACTIONS_ID_TOKEN_REQUEST_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikh5cTROQVRBanNucUM3bWRydEFoaHJDUjJfUSJ9.eyJuYW1laWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJzY3AiOiJBY3Rpb25zLkdlbmVyaWNSZWFkOjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCBBY3Rpb25zLlJlc3VsdHM6ZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5OmNhMzk1MDg1LTA0MGEtNTI2Yi0yY2U4LWJkYzg1ZjY5Mjc3NCBBY3Rpb25zLlVwbG9hZEFydGlmYWN0czowMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAvMTpCdWlsZC9CdWlsZC8xMTc5NyBEaXN0cmlidXRlZFRhc2suR2VuZXJhdGVJZFRva2VuOmUzM2ZiMWRkLTkyMjItNDJiYS1iNzk0LWI0ODRmZDMzZjg0OTpjYTM5NTA4NS0wNDBhLTUyNmItMmNlOC1iZGM4NWY2OTI3NzQgTG9jYXRpb25TZXJ2aWNlLkNvbm5lY3QgUmVhZEFuZFVwZGF0ZUJ1aWxkQnlVcmk6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwLzE6QnVpbGQvQnVpbGQvMTE3OTciLCJJZGVudGl0eVR5cGVDbGFpbSI6IlN5c3RlbTpTZXJ2aWNlSWRlbnRpdHkiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiJERERERERERC1ERERELUREREQtRERERC1EREREREREREREREQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3ByaW1hcnlzaWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJhdWkiOiIxZmE4NDE2ZS05OTQzLTRlMWEtYjY4MS1hODAxOGQxOGIzNzQiLCJzaWQiOiJhMDllZjkzMi04YjkxLTQyNGEtOWZhOC1lODZkM2FiODhlNDEiLCJhYyI6Ilt7XCJTY29wZVwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcIlBlcm1pc3Npb25cIjozfSx7XCJTY29wZVwiOlwicmVmcy9oZWFkcy9tYWluXCIsXCJQZXJtaXNzaW9uXCI6MX1dIiwiYWNzbCI6IjEwIiwib2lkY19leHRyYSI6IntcInJlZlwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcInNoYVwiOlwiMWYzMmY1YzRkZWRhZDdhYzM1YTc4OTVlN2Y3NDBkOWU0ODM1OTkwM1wiLFwicmVwb3NpdG9yeVwiOlwicmFtcDQtcGNhcjQvcmFtcDQtcGNhcjRcIixcInJlcG9zaXRvcnlfb3duZXJcIjpcInJhbXA0LXBjYXI0XCIsXCJyZXBvc2l0b3J5X293bmVyX2lkXCI6XCI1NzE0ODcyNFwiLFwicnVuX2lkXCI6XCIxMjQxOTk3MTI1OFwiLFwicnVuX251bWJlclwiOlwiMTMxXCIsXCJydW5fYXR0ZW1wdFwiOlwiMVwiLFwicmVwb3NpdG9yeV92aXNpYmlsaXR5XCI6XCJwdWJsaWNcIixcInJlcG9zaXRvcnlfaWRcIjpcIjIxODM1NjA1N1wiLFwiYWN0b3JfaWRcIjpcIjc1ODUyNDVcIixcImFjdG9yXCI6XCJqYW1lcy1yYWVcIixcIndvcmtmbG93XCI6XCJCdWlsZCBkZW1vIHNpdGUgYW5kIGRlcGxveSB0byBHaXRIdWIgUGFnZXNcIixcImhlYWRfcmVmXCI6XCJcIixcImJhc2VfcmVmXCI6XCJcIixcImV2ZW50X25hbWVcIjpcInB1c2hcIixcInJlZl9wcm90ZWN0ZWRcIjpcImZhbHNlXCIsXCJyZWZfdHlwZVwiOlwidGFnXCIsXCJ3b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJ3b3JrZmxvd19zaGFcIjpcIjFmMzJmNWM0ZGVkYWQ3YWMzNWE3ODk1ZTdmNzQwZDllNDgzNTk5MDNcIixcImVudmlyb25tZW50XCI6XCJnaXRodWItcGFnZXNcIixcImVudmlyb25tZW50X25vZGVfaWRcIjpcIkVOX2t3RE9EUVBaV2M0ZUV4MlpcIixcImpvYl93b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJqb2Jfd29ya2Zsb3dfc2hhXCI6XCIxZjMyZjVjNGRlZGFkN2FjMzVhNzg5NWU3Zjc0MGQ5ZTQ4MzU5OTAzXCIsXCJydW5uZXJfZW52aXJvbm1lbnRcIjpcImdpdGh1Yi1ob3N0ZWRcIn0iLCJvaWRjX3N1YiI6InJlcG86cmFtcDQtcGNhcjQvcmFtcDQtcGNhcjQ6ZW52aXJvbm1lbnQ6Z2l0aHViLXBhZ2VzIiwib3JjaGlkIjoiZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5LmJ1aWxkLl9fZGVmYXVsdCIsImlzcyI6InZzdG9rZW4uYWN0aW9ucy5naXRodWJ1c2VyY29udGVudC5jb20iLCJhdWQiOiJ2c3Rva2VuLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tfHZzbzpkYzhlN2U0ZC00ZDQ1LTQ4ZDAtYmY4YS02YmQ0YzZjMjQ2MDciLCJuYmYiOjE3MzQ2MzgxODcsImV4cCI6MTczNDY2MDk4N30.RARk5esxipY8hoZlRACe-X_yM76TNaGPNYLTOeo3QHil127k0ynntWTAIhvG4AnWGYhGaYy4r4nNazwMI7YVAcri6W6w4txoRtMEUdA20vrF04HAvi2LIMPtdLXXW03zl6hIVd22jIGJI6t6hor6a8dQKa5uN4XR_tcXzEI8Vhv3S4R4fOIPJthxGXdW5oC06Arc0YSPRDRDTk-Lb4qXWQVoaQ4oHaRZGaA0xHNITcKkzLN9AHvPFnzaIyK4iQ8Zr_0B2I-Tyor7AAKyCfvKVt980mzK76axB0fid1T0ATLZNg8nftwlvB-y9u-KqFPIf8iOeoMrMNQVV9FHigeU7w",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/22.12.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_f84c0023-8fe3-4772-972b-468f8650057c",INVOCATION_ID:"b4280ab4ab86413d99aedf730c4ee39c",NPM_CONFIG_USERCONFIG:"/home/runner/work/_temp/.npmrc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",npm_package_name:"ramp-pcar",GITHUB_ACTION:"__run_4",GITHUB_RUN_NUMBER:"131",GITHUB_TRIGGERING_ACTOR:"james-rae",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 2",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"v4.10.0",GITHUB_REPOSITORY:"ramp4-pcar4/ramp4-pcar4",STATS_D_D:"true",npm_lifecycle_script:"vite build --mode esDynamic",npm_config_loglevel:"silent",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"218356057",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"4.10.0",npm_lifecycle_event:"build:esDynamic",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",GITHUB_REF:"refs/tags/v4.10.0",GITHUB_ACTOR:"james-rae",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/22.12.0/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",GITHUB_ACTOR_ID:"7585245",RUNNER_WORKSPACE:"/home/runner/work/ramp4-pcar4",npm_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",ACTIONS_ID_TOKEN_REQUEST_URL:"https://pipelinesghubeus2.actions.githubusercontent.com/CYYZq0bGEiBG5XjoYFUt7ZUW3UppKtccmRBdNq2vSmlX4E20ap/00000000-0000-0000-0000-000000000000/_apis/distributedtask/hubs/Actions/plans/e33fb1dd-9222-42ba-b794-b484fd33f849/jobs/ca395085-040a-526b-2ce8-bdc85f692774/idtoken?api-version=2.0",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",npm_config_global_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",INIT_CWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",EDITOR:"vi",NODE_ENV:"production"};function izt(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Xp().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Xp().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Xp().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Ff=[];Ff[0]={w:[0],i:[3,0],"[":[4],o:[7]},Ff[1]={w:[1],".":[2],"[":[4],o:[7]},Ff[2]={w:[2],i:[3,0],0:[3,0]},Ff[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Ff[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Ff[5]={"'":[4,0],o:8,l:[5,0]},Ff[6]={'"':[4,0],o:8,l:[6,0]};const szt=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function ozt(e){return szt.test(e)}function azt(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function lzt(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function uzt(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:ozt(t)?azt(t):"*"+t}function czt(e){const t=[];let r=-1,n=0,i=0,s,o,a,l,u,c,h;const d=[];d[0]=()=>{o===void 0?o=a:o+=a},d[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},d[2]=()=>{d[0](),i++},d[3]=()=>{if(i>0)i--,n=4,d[0]();else{if(i=0,o===void 0||(o=uzt(o),o===!1))return!1;d[1]()}};function m(){const y=e[r+1];if(n===5&&y==="'"||n===6&&y==='"')return r++,a="\\"+y,d[0](),!0}for(;n!==null;)if(r++,s=e[r],!(s==="\\"&&m())){if(l=lzt(s),h=Ff[n],u=h[l]||h.l||8,u===8||(n=u[0],u[1]!==void 0&&(c=d[u[1]],c&&(a=s,c()===!1))))return;if(n===7)return t}}const wre=new Map;function hzt(e,t){return Cr(e)?e[t]:null}function pzt(e,t){if(!Cr(e))return null;let r=wre.get(t);if(r||(r=czt(t),r&&wre.set(t,r)),!r)return null;const n=r.length;let i=e,s=0;for(;s<n;){const o=i[r[s]];if(o===void 0||dn(i))return null;i=o,s++}return i}const dzt=e=>e,fzt=e=>"",mzt="text",yzt=e=>e.length===0?"":IGt(e),gzt=TGt;function _re(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function vzt(e){const t=vi(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(vi(e.named.count)||vi(e.named.n))?vi(e.named.count)?e.named.count:vi(e.named.n)?e.named.n:t:t}function bzt(e,t){t.count||(t.count=e),t.n||(t.n=e)}function wzt(e={}){const t=e.locale,r=vzt(e),n=Cr(e.pluralRules)&&lt(t)&&dn(e.pluralRules[t])?e.pluralRules[t]:_re,i=Cr(e.pluralRules)&&lt(t)&&dn(e.pluralRules[t])?_re:void 0,s=b=>b[n(r,b.length,i)],o=e.list||[],a=b=>o[b],l=e.named||Yr();vi(e.pluralIndex)&&bzt(r,l);const u=b=>l[b];function c(b){return(dn(e.messages)?e.messages(b):Cr(e.messages)?e.messages[b]:!1)||(e.parent?e.parent.message(b):fzt)}const h=b=>e.modifiers?e.modifiers[b]:dzt,d=sr(e.processor)&&dn(e.processor.normalize)?e.processor.normalize:yzt,m=sr(e.processor)&&dn(e.processor.interpolate)?e.processor.interpolate:gzt,y=sr(e.processor)&&lt(e.processor.type)?e.processor.type:mzt,g={list:a,named:u,plural:s,linked:(b,...S)=>{const[E,x]=S;let w="text",T="";S.length===1?Cr(E)?(T=E.modifier||T,w=E.type||w):lt(E)&&(T=E||T):S.length===2&&(lt(E)&&(T=E||T),lt(x)&&(w=x||w));const I=c(b)(g),M=w==="vnode"&&In(I)&&T?I[0]:I;return T?h(T)(M,w):M},message:c,type:y,interpolate:m,normalize:d,values:Vs(Yr(),o,l)};return g}let fT=null;function _zt(e){fT=e}function xzt(e,t,r){fT&&fT.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:r})}const Szt=Ezt("function:translate");function Ezt(e){return t=>fT&&fT.emit(e,t)}const A2e=$q.__EXTEND_POINT__,C0=nN(A2e),Tzt={NOT_FOUND_KEY:A2e,FALLBACK_TO_TRANSLATE:C0(),CANNOT_FORMAT_NUMBER:C0(),FALLBACK_TO_NUMBER_FORMAT:C0(),CANNOT_FORMAT_DATE:C0(),FALLBACK_TO_DATE_FORMAT:C0(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:C0(),__EXTEND_POINT__:C0()},M2e=Zt.__EXTEND_POINT__,k0=nN(M2e),tc={INVALID_ARGUMENT:M2e,INVALID_DATE_ARGUMENT:k0(),INVALID_ISO_DATE_ARGUMENT:k0(),NOT_SUPPORT_NON_STRING_MESSAGE:k0(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:k0(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:k0(),NOT_SUPPORT_LOCALE_TYPE:k0(),__EXTEND_POINT__:k0()};function ph(e){return B_(e,null,void 0)}function Hq(e,t){return t.locale!=null?xre(t.locale):xre(e.locale)}let sD;function xre(e){if(lt(e))return e;if(dn(e)){if(e.resolvedOnce&&sD!=null)return sD;if(e.constructor.name==="Function"){const t=e();if(EGt(t))throw ph(tc.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return sD=t}else throw ph(tc.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw ph(tc.NOT_SUPPORT_LOCALE_TYPE)}function Izt(e,t,r){return[...new Set([r,...In(t)?t:Cr(t)?Object.keys(t):lt(t)?[t]:[r]])]}function C2e(e,t,r){const n=lt(r)?r:Pw,i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let s=i.__localeChainCache.get(n);if(!s){s=[];let o=[r];for(;In(o);)o=Sre(s,o,t);const a=In(t)||!sr(t)?t:t.default?t.default:null;o=lt(a)?[a]:a,In(o)&&Sre(s,o,!1),i.__localeChainCache.set(n,s)}return s}function Sre(e,t,r){let n=!0;for(let i=0;i<t.length&&fr(n);i++){const s=t[i];lt(s)&&(n=Azt(e,t[i],r))}return n}function Azt(e,t,r){let n;const i=t.split("-");do{const s=i.join("-");n=Mzt(e,s,r),i.splice(-1,1)}while(i.length&&n===!0);return n}function Mzt(e,t,r){let n=!1;if(!e.includes(t)&&(n=!0,t)){n=t[t.length-1]!=="!";const i=t.replace(/!/g,"");e.push(i),(In(r)||sr(r))&&r[i]&&(n=r[i])}return n}const Czt="9.14.2",iN=-1,Pw="en-US",Ere="",Tre=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function kzt(){return{upper:(e,t)=>t==="text"&&lt(e)?e.toUpperCase():t==="vnode"&&Cr(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&lt(e)?e.toLowerCase():t==="vnode"&&Cr(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&lt(e)?Tre(e):t==="vnode"&&Cr(e)&&"__v_isVNode"in e?Tre(e.children):e}}let k2e;function Ire(e){k2e=e}let R2e;function Rzt(e){R2e=e}let O2e;function Ozt(e){O2e=e}let N2e=null;const Are=e=>{N2e=e},Nzt=()=>N2e;let Mre=0;function Lzt(e={}){const t=dn(e.onWarn)?e.onWarn:AGt,r=lt(e.version)?e.version:Czt,n=lt(e.locale)||dn(e.locale)?e.locale:Pw,i=dn(n)?Pw:n,s=In(e.fallbackLocale)||sr(e.fallbackLocale)||lt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:i,o=sr(e.messages)?e.messages:oD(i),a=sr(e.datetimeFormats)?e.datetimeFormats:oD(i),l=sr(e.numberFormats)?e.numberFormats:oD(i),u=Vs(Yr(),e.modifiers,kzt()),c=e.pluralRules||Yr(),h=dn(e.missing)?e.missing:null,d=fr(e.missingWarn)||zm(e.missingWarn)?e.missingWarn:!0,m=fr(e.fallbackWarn)||zm(e.fallbackWarn)?e.fallbackWarn:!0,y=!!e.fallbackFormat,g=!!e.unresolving,b=dn(e.postTranslation)?e.postTranslation:null,S=sr(e.processor)?e.processor:null,E=fr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter,w=dn(e.messageCompiler)?e.messageCompiler:k2e,T=dn(e.messageResolver)?e.messageResolver:R2e||hzt,I=dn(e.localeFallbacker)?e.localeFallbacker:O2e||Izt,M=Cr(e.fallbackContext)?e.fallbackContext:void 0,C=e,k=Cr(C.__datetimeFormatters)?C.__datetimeFormatters:new Map,N=Cr(C.__numberFormatters)?C.__numberFormatters:new Map,F=Cr(C.__meta)?C.__meta:{};Mre++;const P={version:r,cid:Mre,locale:n,fallbackLocale:s,messages:o,modifiers:u,pluralRules:c,missing:h,missingWarn:d,fallbackWarn:m,fallbackFormat:y,unresolving:g,postTranslation:b,processor:S,warnHtmlMessage:E,escapeParameter:x,messageCompiler:w,messageResolver:T,localeFallbacker:I,fallbackContext:M,onWarn:t,__meta:F};return P.datetimeFormats=a,P.numberFormats=l,P.__datetimeFormatters=k,P.__numberFormatters=N,__INTLIFY_PROD_DEVTOOLS__&&xzt(P,r,F),P}const oD=e=>({[e]:Yr()});function Wq(e,t,r,n,i){const{missing:s,onWarn:o}=e;if(s!==null){const a=s(e,r,t,i);return lt(a)?a:t}else return t}function S2(e,t,r){const n=e;n.__localeChainCache=new Map,e.localeFallbacker(e,r,t)}function Pzt(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function Dzt(e,t){const r=t.indexOf(e);if(r===-1)return!1;for(let n=r+1;n<t.length;n++)if(Pzt(e,t[n]))return!0;return!1}function aD(e){return t=>Fzt(t,e)}function Fzt(e,t){const r=Uzt(t);if(r==null)throw mT(0);if(Zq(r)===1){const n=Vzt(r);return e.plural(n.reduce((i,s)=>[...i,Cre(e,s)],[]))}else return Cre(e,r)}const jzt=["b","body"];function Uzt(e){return l0(e,jzt)}const Bzt=["c","cases"];function Vzt(e){return l0(e,Bzt,[])}function Cre(e,t){const r=zzt(t);if(r!=null)return e.type==="text"?r:e.normalize([r]);{const n=qzt(t).reduce((i,s)=>[...i,xU(e,s)],[]);return e.normalize(n)}}const Gzt=["s","static"];function zzt(e){return l0(e,Gzt)}const $zt=["i","items"];function qzt(e){return l0(e,$zt,[])}function xU(e,t){const r=Zq(t);switch(r){case 3:return PA(t,r);case 9:return PA(t,r);case 4:{const n=t;if(ec(n,"k")&&n.k)return e.interpolate(e.named(n.k));if(ec(n,"key")&&n.key)return e.interpolate(e.named(n.key));throw mT(r)}case 5:{const n=t;if(ec(n,"i")&&vi(n.i))return e.interpolate(e.list(n.i));if(ec(n,"index")&&vi(n.index))return e.interpolate(e.list(n.index));throw mT(r)}case 6:{const n=t,i=Jzt(n),s=Xzt(n);return e.linked(xU(e,s),i?xU(e,i):void 0,e.type)}case 7:return PA(t,r);case 8:return PA(t,r);default:throw new Error(`unhandled node on format message part: ${r}`)}}const Hzt=["t","type"];function Zq(e){return l0(e,Hzt)}const Wzt=["v","value"];function PA(e,t){const r=l0(e,Wzt);if(r)return r;throw mT(t)}const Zzt=["m","modifier"];function Jzt(e){return l0(e,Zzt)}const Yzt=["k","key"];function Xzt(e){const t=l0(e,Yzt);if(t)return t;throw mT(6)}function l0(e,t,r){for(let n=0;n<t.length;n++){const i=t[n];if(ec(e,i)&&e[i]!=null)return e[i]}return r}function mT(e){return new Error(`unhandled node type: ${e}`)}const L2e=e=>e;let db=Yr();function Dw(e){return Cr(e)&&Zq(e)===0&&(ec(e,"b")||ec(e,"body"))}function P2e(e,t={}){let r=!1;const n=t.onError||LGt;return t.onError=i=>{r=!0,n(i)},{...rzt(e,t),detectError:r}}const Qzt=(e,t)=>{if(!lt(e))throw ph(tc.NOT_SUPPORT_NON_STRING_MESSAGE);{fr(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||L2e)(e),n=db[r];if(n)return n;const{code:i,detectError:s}=P2e(e,t),o=new Function(`return ${i}`)();return s?o:db[r]=o}};function Kzt(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&lt(e)){fr(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||L2e)(e),n=db[r];if(n)return n;const{ast:i,detectError:s}=P2e(e,{...t,location:nzt.NODE_ENV!=="production",jit:!0}),o=aD(i);return s?o:db[r]=o}else{const r=e.cacheKey;return r?db[r]||(db[r]=aD(e)):aD(e)}}const kre=()=>"",qu=e=>dn(e);function Rre(e,...t){const{fallbackFormat:r,postTranslation:n,unresolving:i,messageCompiler:s,fallbackLocale:o,messages:a}=e,[l,u]=SU(...t),c=fr(u.missingWarn)?u.missingWarn:e.missingWarn,h=fr(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,d=fr(u.escapeParameter)?u.escapeParameter:e.escapeParameter,m=!!u.resolvedMessage,y=lt(u.default)||fr(u.default)?fr(u.default)?s?l:()=>l:u.default:r?s?l:()=>l:"",g=r||y!=="",b=Hq(e,u);d&&e$t(u);let[S,E,x]=m?[l,b,a[b]||Yr()]:D2e(e,l,b,o,h,c),w=S,T=l;if(!m&&!(lt(w)||Dw(w)||qu(w))&&g&&(w=y,T=w),!m&&(!(lt(w)||Dw(w)||qu(w))||!lt(E)))return i?iN:l;let I=!1;const M=()=>{I=!0},C=qu(w)?w:F2e(e,l,E,w,T,M);if(I)return w;const k=n$t(e,E,x,u),N=wzt(k),F=t$t(e,C,N),P=n?n(F,l):F;if(__INTLIFY_PROD_DEVTOOLS__){const B={timestamp:Date.now(),key:lt(l)?l:qu(w)?w.key:"",locale:E||(qu(w)?w.locale:""),format:lt(w)?w:qu(w)?w.source:"",message:P};B.meta=Vs({},e.__meta,{}),Szt(B)}return P}function e$t(e){In(e.list)?e.list=e.list.map(t=>lt(t)?mre(t):t):Cr(e.named)&&Object.keys(e.named).forEach(t=>{lt(e.named[t])&&(e.named[t]=mre(e.named[t]))})}function D2e(e,t,r,n,i,s){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=e,c=u(e,n,r);let h=Yr(),d,m=null;const y="translate";for(let g=0;g<c.length&&(d=c[g],h=o[d]||Yr(),(m=l(h,t))===null&&(m=h[t]),!(lt(m)||Dw(m)||qu(m)));g++)if(!Dzt(d,c)){const b=Wq(e,t,d,s,y);b!==t&&(m=b)}return[m,d,h]}function F2e(e,t,r,n,i,s){const{messageCompiler:o,warnHtmlMessage:a}=e;if(qu(n)){const u=n;return u.locale=u.locale||r,u.key=u.key||t,u}if(o==null){const u=()=>n;return u.locale=r,u.key=t,u}const l=o(n,r$t(e,r,i,n,a,s));return l.locale=r,l.key=t,l.source=n,l}function t$t(e,t,r){return t(r)}function SU(...e){const[t,r,n]=e,i=Yr();if(!lt(t)&&!vi(t)&&!qu(t)&&!Dw(t))throw ph(tc.INVALID_ARGUMENT);const s=vi(t)?String(t):t;return vi(r)?i.plural=r:lt(r)?i.default=r:sr(r)&&!rN(r)?i.named=r:In(r)&&(i.list=r),vi(n)?i.plural=n:lt(n)?i.default=n:sr(n)&&Vs(i,n),[s,i]}function r$t(e,t,r,n,i,s){return{locale:t,key:r,warnHtmlMessage:i,onError:o=>{throw s&&s(o),o},onCacheKey:o=>bGt(t,r,o)}}function n$t(e,t,r,n){const{modifiers:i,pluralRules:s,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=e,h={locale:t,modifiers:i,pluralRules:s,messages:d=>{let m=o(r,d);if(m==null&&c){const[,,y]=D2e(c,d,t,a,l,u);m=o(y,d)}if(lt(m)||Dw(m)){let y=!1;const g=F2e(e,d,t,m,d,()=>{y=!0});return y?kre:g}else return qu(m)?m:kre}};return e.processor&&(h.processor=e.processor),n.list&&(h.list=n.list),n.named&&(h.named=n.named),vi(n.plural)&&(h.pluralIndex=n.plural),h}function Ore(e,...t){const{datetimeFormats:r,unresolving:n,fallbackLocale:i,onWarn:s,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[l,u,c,h]=EU(...t),d=fr(c.missingWarn)?c.missingWarn:e.missingWarn;fr(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,y=Hq(e,c),g=o(e,i,y);if(!lt(l)||l==="")return new Intl.DateTimeFormat(y,h).format(u);let b={},S,E=null;const x="datetime format";for(let I=0;I<g.length&&(S=g[I],b=r[S]||{},E=b[l],!sr(E));I++)Wq(e,l,S,d,x);if(!sr(E)||!lt(S))return n?iN:l;let w=`${S}__${l}`;rN(h)||(w=`${w}__${JSON.stringify(h)}`);let T=a.get(w);return T||(T=new Intl.DateTimeFormat(S,Vs({},E,h)),a.set(w,T)),m?T.formatToParts(u):T.format(u)}const j2e=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function EU(...e){const[t,r,n,i]=e,s=Yr();let o=Yr(),a;if(lt(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw ph(tc.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw ph(tc.INVALID_ISO_DATE_ARGUMENT)}}else if(_Gt(t)){if(isNaN(t.getTime()))throw ph(tc.INVALID_DATE_ARGUMENT);a=t}else if(vi(t))a=t;else throw ph(tc.INVALID_ARGUMENT);return lt(r)?s.key=r:sr(r)&&Object.keys(r).forEach(l=>{j2e.includes(l)?o[l]=r[l]:s[l]=r[l]}),lt(n)?s.locale=n:sr(n)&&(o=n),sr(i)&&(o=i),[s.key||"",a,s,o]}function Nre(e,t,r){const n=e;for(const i in r){const s=`${t}__${i}`;n.__datetimeFormatters.has(s)&&n.__datetimeFormatters.delete(s)}}function Lre(e,...t){const{numberFormats:r,unresolving:n,fallbackLocale:i,onWarn:s,localeFallbacker:o}=e,{__numberFormatters:a}=e,[l,u,c,h]=TU(...t),d=fr(c.missingWarn)?c.missingWarn:e.missingWarn;fr(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,y=Hq(e,c),g=o(e,i,y);if(!lt(l)||l==="")return new Intl.NumberFormat(y,h).format(u);let b={},S,E=null;const x="number format";for(let I=0;I<g.length&&(S=g[I],b=r[S]||{},E=b[l],!sr(E));I++)Wq(e,l,S,d,x);if(!sr(E)||!lt(S))return n?iN:l;let w=`${S}__${l}`;rN(h)||(w=`${w}__${JSON.stringify(h)}`);let T=a.get(w);return T||(T=new Intl.NumberFormat(S,Vs({},E,h)),a.set(w,T)),m?T.formatToParts(u):T.format(u)}const U2e=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function TU(...e){const[t,r,n,i]=e,s=Yr();let o=Yr();if(!vi(t))throw ph(tc.INVALID_ARGUMENT);const a=t;return lt(r)?s.key=r:sr(r)&&Object.keys(r).forEach(l=>{U2e.includes(l)?o[l]=r[l]:s[l]=r[l]}),lt(n)?s.locale=n:sr(n)&&(o=n),sr(i)&&(o=i),[s.key||"",a,s,o]}function Pre(e,t,r){const n=e;for(const i in r){const s=`${t}__${i}`;n.__numberFormatters.has(s)&&n.__numberFormatters.delete(s)}}izt();var i$t={GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",STATS_TRP:"true",DEPLOYMENT_BASEPATH:"/opt/runner",DOTNET_NOLOGO:"1",USER:"runner",npm_config_always_auth:"",npm_config_user_agent:"npm/10.9.0 node/v22.12.0 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",NODE_AUTH_TOKEN:"XXXXX-XXXXX-XXXXX-XXXXX",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",OLDPWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"ramp4-pcar4",npm_package_engines_node:"=22.12.0",GRADLE_HOME:"/usr/share/gradle-8.11.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",STATS_RDCL:"true",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"57148724",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_local_prefix:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",SYSTEMD_EXEC_PID:"833",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",GOROOT_1_21_X64:"/opt/hostedtoolcache/go/1.21.13/x64",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20241215.1.0",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.10/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",RUNNER_USER:"runner",STATS_V3PS:"true",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.4/x64",JOURNAL_STREAM:"8:6481",GITHUB_WORKFLOW:"Build demo site and deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/22.12.0/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",npm_config_npm_version:"10.9.0",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/runner-provisioner.service/memory.pressure",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",STATS_D:"true",GITHUB_RUN_ID:"12419971258",STATS_VMFE:"true",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"tag",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"ramp4-pcar4/ramp4-pcar4/.github/workflows/demo-build.yml@refs/tags/v4.10.0",ACTIONS_ID_TOKEN_REQUEST_TOKEN:"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ikh5cTROQVRBanNucUM3bWRydEFoaHJDUjJfUSJ9.eyJuYW1laWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJzY3AiOiJBY3Rpb25zLkdlbmVyaWNSZWFkOjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCBBY3Rpb25zLlJlc3VsdHM6ZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5OmNhMzk1MDg1LTA0MGEtNTI2Yi0yY2U4LWJkYzg1ZjY5Mjc3NCBBY3Rpb25zLlVwbG9hZEFydGlmYWN0czowMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAvMTpCdWlsZC9CdWlsZC8xMTc5NyBEaXN0cmlidXRlZFRhc2suR2VuZXJhdGVJZFRva2VuOmUzM2ZiMWRkLTkyMjItNDJiYS1iNzk0LWI0ODRmZDMzZjg0OTpjYTM5NTA4NS0wNDBhLTUyNmItMmNlOC1iZGM4NWY2OTI3NzQgTG9jYXRpb25TZXJ2aWNlLkNvbm5lY3QgUmVhZEFuZFVwZGF0ZUJ1aWxkQnlVcmk6MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwLzE6QnVpbGQvQnVpbGQvMTE3OTciLCJJZGVudGl0eVR5cGVDbGFpbSI6IlN5c3RlbTpTZXJ2aWNlSWRlbnRpdHkiLCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9zaWQiOiJERERERERERC1ERERELUREREQtRERERC1EREREREREREREREQiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3ByaW1hcnlzaWQiOiJkZGRkZGRkZC1kZGRkLWRkZGQtZGRkZC1kZGRkZGRkZGRkZGQiLCJhdWkiOiIxZmE4NDE2ZS05OTQzLTRlMWEtYjY4MS1hODAxOGQxOGIzNzQiLCJzaWQiOiJhMDllZjkzMi04YjkxLTQyNGEtOWZhOC1lODZkM2FiODhlNDEiLCJhYyI6Ilt7XCJTY29wZVwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcIlBlcm1pc3Npb25cIjozfSx7XCJTY29wZVwiOlwicmVmcy9oZWFkcy9tYWluXCIsXCJQZXJtaXNzaW9uXCI6MX1dIiwiYWNzbCI6IjEwIiwib2lkY19leHRyYSI6IntcInJlZlwiOlwicmVmcy90YWdzL3Y0LjEwLjBcIixcInNoYVwiOlwiMWYzMmY1YzRkZWRhZDdhYzM1YTc4OTVlN2Y3NDBkOWU0ODM1OTkwM1wiLFwicmVwb3NpdG9yeVwiOlwicmFtcDQtcGNhcjQvcmFtcDQtcGNhcjRcIixcInJlcG9zaXRvcnlfb3duZXJcIjpcInJhbXA0LXBjYXI0XCIsXCJyZXBvc2l0b3J5X293bmVyX2lkXCI6XCI1NzE0ODcyNFwiLFwicnVuX2lkXCI6XCIxMjQxOTk3MTI1OFwiLFwicnVuX251bWJlclwiOlwiMTMxXCIsXCJydW5fYXR0ZW1wdFwiOlwiMVwiLFwicmVwb3NpdG9yeV92aXNpYmlsaXR5XCI6XCJwdWJsaWNcIixcInJlcG9zaXRvcnlfaWRcIjpcIjIxODM1NjA1N1wiLFwiYWN0b3JfaWRcIjpcIjc1ODUyNDVcIixcImFjdG9yXCI6XCJqYW1lcy1yYWVcIixcIndvcmtmbG93XCI6XCJCdWlsZCBkZW1vIHNpdGUgYW5kIGRlcGxveSB0byBHaXRIdWIgUGFnZXNcIixcImhlYWRfcmVmXCI6XCJcIixcImJhc2VfcmVmXCI6XCJcIixcImV2ZW50X25hbWVcIjpcInB1c2hcIixcInJlZl9wcm90ZWN0ZWRcIjpcImZhbHNlXCIsXCJyZWZfdHlwZVwiOlwidGFnXCIsXCJ3b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJ3b3JrZmxvd19zaGFcIjpcIjFmMzJmNWM0ZGVkYWQ3YWMzNWE3ODk1ZTdmNzQwZDllNDgzNTk5MDNcIixcImVudmlyb25tZW50XCI6XCJnaXRodWItcGFnZXNcIixcImVudmlyb25tZW50X25vZGVfaWRcIjpcIkVOX2t3RE9EUVBaV2M0ZUV4MlpcIixcImpvYl93b3JrZmxvd19yZWZcIjpcInJhbXA0LXBjYXI0L3JhbXA0LXBjYXI0Ly5naXRodWIvd29ya2Zsb3dzL2RlbW8tYnVpbGQueW1sQHJlZnMvdGFncy92NC4xMC4wXCIsXCJqb2Jfd29ya2Zsb3dfc2hhXCI6XCIxZjMyZjVjNGRlZGFkN2FjMzVhNzg5NWU3Zjc0MGQ5ZTQ4MzU5OTAzXCIsXCJydW5uZXJfZW52aXJvbm1lbnRcIjpcImdpdGh1Yi1ob3N0ZWRcIn0iLCJvaWRjX3N1YiI6InJlcG86cmFtcDQtcGNhcjQvcmFtcDQtcGNhcjQ6ZW52aXJvbm1lbnQ6Z2l0aHViLXBhZ2VzIiwib3JjaGlkIjoiZTMzZmIxZGQtOTIyMi00MmJhLWI3OTQtYjQ4NGZkMzNmODQ5LmJ1aWxkLl9fZGVmYXVsdCIsImlzcyI6InZzdG9rZW4uYWN0aW9ucy5naXRodWJ1c2VyY29udGVudC5jb20iLCJhdWQiOiJ2c3Rva2VuLmFjdGlvbnMuZ2l0aHVidXNlcmNvbnRlbnQuY29tfHZzbzpkYzhlN2U0ZC00ZDQ1LTQ4ZDAtYmY4YS02YmQ0YzZjMjQ2MDciLCJuYmYiOjE3MzQ2MzgxODcsImV4cCI6MTczNDY2MDk4N30.RARk5esxipY8hoZlRACe-X_yM76TNaGPNYLTOeo3QHil127k0ynntWTAIhvG4AnWGYhGaYy4r4nNazwMI7YVAcri6W6w4txoRtMEUdA20vrF04HAvi2LIMPtdLXXW03zl6hIVd22jIGJI6t6hor6a8dQKa5uN4XR_tcXzEI8Vhv3S4R4fOIPJthxGXdW5oC06Arc0YSPRDRDTk-Lb4qXWQVoaQ4oHaRZGaA0xHNITcKkzLN9AHvPFnzaIyK4iQ8Zr_0B2I-Tyor7AAKyCfvKVt980mzK76axB0fid1T0ATLZNg8nftwlvB-y9u-KqFPIf8iOeoMrMNQVV9FHigeU7w",PERFLOG_LOCATION_SETTING:"RUNNER_PERFLOG",GITHUB_ACTION_REPOSITORY:"",npm_config_node_gyp:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp/node_modules/.bin:/home/runner/work/ramp4-pcar4/ramp4-pcar4/node_modules/.bin:/home/runner/work/ramp4-pcar4/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/opt/hostedtoolcache/node/22.12.0/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_f84c0023-8fe3-4772-972b-468f8650057c",INVOCATION_ID:"b4280ab4ab86413d99aedf730c4ee39c",NPM_CONFIG_USERCONFIG:"/home/runner/work/_temp/.npmrc",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/22.12.0/x64/bin/node",npm_package_name:"ramp-pcar",GITHUB_ACTION:"__run_4",GITHUB_RUN_NUMBER:"131",GITHUB_TRIGGERING_ACTOR:"james-rae",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 2",XDG_CONFIG_HOME:"/home/runner/.config",STATS_VMD:"true",GITHUB_REF_NAME:"v4.10.0",GITHUB_REPOSITORY:"ramp4-pcar4/ramp4-pcar4",STATS_D_D:"true",npm_lifecycle_script:"vite build --mode esDynamic",npm_config_loglevel:"silent",STATS_UE:"true",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",GITHUB_REPOSITORY_ID:"218356057",GITHUB_ACTIONS:"true",STATS_PIP:"false",npm_package_version:"4.10.0",npm_lifecycle_event:"build:esDynamic",GITHUB_REF_PROTECTED:"false",GITHUB_WORKSPACE:"/home/runner/work/ramp4-pcar4/ramp4-pcar4",ACCEPT_EULA:"Y",GITHUB_JOB:"build",RUNNER_PERFLOG:"/home/runner/perflog",GITHUB_SHA:"1f32f5c4dedad7ac35a7895e7f740d9e48359903",GITHUB_RUN_ATTEMPT:"1",STATS_D_TC:"true",GITHUB_REF:"refs/tags/v4.10.0",GITHUB_ACTOR:"james-rae",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/22.12.0/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",GITHUB_ACTOR_ID:"7585245",RUNNER_WORKSPACE:"/home/runner/work/ramp4-pcar4",npm_execpath:"/opt/hostedtoolcache/node/22.12.0/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"push",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",ACTIONS_ID_TOKEN_REQUEST_URL:"https://pipelinesghubeus2.actions.githubusercontent.com/CYYZq0bGEiBG5XjoYFUt7ZUW3UppKtccmRBdNq2vSmlX4E20ap/00000000-0000-0000-0000-000000000000/_apis/distributedtask/hubs/Actions/plans/e33fb1dd-9222-42ba-b794-b484fd33f849/jobs/ca395085-040a-526b-2ce8-bdc85f692774/idtoken?api-version=2.0",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",npm_config_global_prefix:"/opt/hostedtoolcache/node/22.12.0/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",STATS_EXT:"true",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.2.12479018",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",STATS_EXTP:"https://provjobdprod.z13.web.core.windows.net/settings/provjobdsettings-latest/provjobd.data",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.2.12479018",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_9bd0f9f7-f7ed-4fa4-9da2-a24fd182d25d",INIT_CWD:"/home/runner/work/ramp4-pcar4/ramp4-pcar4/ramp",EDITOR:"vi",NODE_ENV:"production"};const s$t="9.14.2";function o$t(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Xp().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Xp().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Xp().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Xp().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Xp().__INTLIFY_PROD_DEVTOOLS__=!1)}const a$t=Tzt.__EXTEND_POINT__,Xh=nN(a$t);Xh(),Xh(),Xh(),Xh(),Xh(),Xh(),Xh(),Xh(),Xh();const B2e=tc.__EXTEND_POINT__,la=nN(B2e),es={UNEXPECTED_RETURN_TYPE:B2e,INVALID_ARGUMENT:la(),MUST_BE_CALL_SETUP_TOP:la(),NOT_INSTALLED:la(),NOT_AVAILABLE_IN_LEGACY_MODE:la(),REQUIRED_VALUE:la(),INVALID_VALUE:la(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:la(),NOT_INSTALLED_WITH_PROVIDE:la(),UNEXPECTED_ERROR:la(),NOT_COMPATIBLE_LEGACY_VUE_I18N:la(),BRIDGE_SUPPORT_VUE_2_ONLY:la(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:la(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:la(),__EXTEND_POINT__:la()};function xs(e,...t){return B_(e,null,void 0)}const IU=a0("__translateVNode"),AU=a0("__datetimeParts"),MU=a0("__numberParts"),V2e=a0("__setPluralRules"),G2e=a0("__injectWithOption"),CU=a0("__dispose");function yT(e){if(!Cr(e))return e;for(const t in e)if(ec(e,t))if(!t.includes("."))Cr(e[t])&&yT(e[t]);else{const r=t.split("."),n=r.length-1;let i=e,s=!1;for(let o=0;o<n;o++){if(r[o]in i||(i[r[o]]=Yr()),!Cr(i[r[o]])){s=!0;break}i=i[r[o]]}s||(i[r[n]]=e[t],delete e[t]),Cr(i[r[n]])&&yT(i[r[n]])}return e}function sN(e,t){const{messages:r,__i18n:n,messageResolver:i,flatJson:s}=t,o=sr(r)?r:In(n)?Yr():{[e]:Yr()};if(In(n)&&n.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||Yr(),q4(u,o[l])):q4(u,o)}else lt(a)&&q4(JSON.parse(a),o)}),i==null&&s)for(const a in o)ec(o,a)&&yT(o[a]);return o}function l$t(e){return e.type}function z2e(e,t,r){let n=Cr(t.messages)?t.messages:Yr();"__i18nGlobal"in r&&(n=sN(e.locale.value,{messages:n,__i18n:r.__i18nGlobal}));const i=Object.keys(n);i.length&&i.forEach(s=>{e.mergeLocaleMessage(s,n[s])});{if(Cr(t.datetimeFormats)){const s=Object.keys(t.datetimeFormats);s.length&&s.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(Cr(t.numberFormats)){const s=Object.keys(t.numberFormats);s.length&&s.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function Dre(e){return ar(cd,null,e,0)}const Fre=()=>[],u$t=()=>!1;let jre=0;function Ure(e){return(t,r,n,i)=>e(r,n,rs()||void 0,i)}function Jq(e={},t){const{__root:r,__injectWithOption:n}=e,i=r===void 0,s=e.flatJson,o=KC?Le:j3,a=!!e.translateExistCompatible;let l=fr(e.inheritLocale)?e.inheritLocale:!0;const u=o(r&&l?r.locale.value:lt(e.locale)?e.locale:Pw),c=o(r&&l?r.fallbackLocale.value:lt(e.fallbackLocale)||In(e.fallbackLocale)||sr(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:u.value),h=o(sN(u.value,e)),d=o(sr(e.datetimeFormats)?e.datetimeFormats:{[u.value]:{}}),m=o(sr(e.numberFormats)?e.numberFormats:{[u.value]:{}});let y=r?r.missingWarn:fr(e.missingWarn)||zm(e.missingWarn)?e.missingWarn:!0,g=r?r.fallbackWarn:fr(e.fallbackWarn)||zm(e.fallbackWarn)?e.fallbackWarn:!0,b=r?r.fallbackRoot:fr(e.fallbackRoot)?e.fallbackRoot:!0,S=!!e.fallbackFormat,E=dn(e.missing)?e.missing:null,x=dn(e.missing)?Ure(e.missing):null,w=dn(e.postTranslation)?e.postTranslation:null,T=r?r.warnHtmlMessage:fr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,I=!!e.escapeParameter;const M=r?r.modifiers:sr(e.modifiers)?e.modifiers:{};let C=e.pluralRules||r&&r.pluralRules,k;k=(()=>{i&&Are(null);const X={version:s$t,locale:u.value,fallbackLocale:c.value,messages:h.value,modifiers:M,pluralRules:C,missing:x===null?void 0:x,missingWarn:y,fallbackWarn:g,fallbackFormat:S,unresolving:!0,postTranslation:w===null?void 0:w,warnHtmlMessage:T,escapeParameter:I,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};X.datetimeFormats=d.value,X.numberFormats=m.value,X.__datetimeFormatters=sr(k)?k.__datetimeFormatters:void 0,X.__numberFormatters=sr(k)?k.__numberFormatters:void 0;const te=Lzt(X);return i&&Are(te),te})(),S2(k,u.value,c.value);function N(){return[u.value,c.value,h.value,d.value,m.value]}const F=cr({get:()=>u.value,set:X=>{u.value=X,k.locale=u.value}}),P=cr({get:()=>c.value,set:X=>{c.value=X,k.fallbackLocale=c.value,S2(k,u.value,X)}}),B=cr(()=>h.value),O=cr(()=>d.value),v=cr(()=>m.value);function A(){return dn(w)?w:null}function R(X){w=X,k.postTranslation=X}function U(){return E}function q(X){X!==null&&(x=Ure(X)),E=X,k.missing=x}const Q=(X,te,le,ve,ke,je)=>{N();let yt;try{i$t.NODE_ENV!=="production"||__INTLIFY_PROD_DEVTOOLS__,i||(k.fallbackContext=r?Nzt():void 0),yt=X(k)}finally{__INTLIFY_PROD_DEVTOOLS__,i||(k.fallbackContext=void 0)}if(le!=="translate exists"&&vi(yt)&&yt===iN||le==="translate exists"&&!yt){const[ft,Ot]=te();return r&&b?ve(r):ke(ft)}else{if(je(yt))return yt;throw xs(es.UNEXPECTED_RETURN_TYPE)}};function ee(...X){return Q(te=>Reflect.apply(Rre,null,[te,...X]),()=>SU(...X),"translate",te=>Reflect.apply(te.t,te,[...X]),te=>te,te=>lt(te))}function Y(...X){const[te,le,ve]=X;if(ve&&!Cr(ve))throw xs(es.INVALID_ARGUMENT);return ee(te,le,Vs({resolvedMessage:!0},ve||{}))}function ue(...X){return Q(te=>Reflect.apply(Ore,null,[te,...X]),()=>EU(...X),"datetime format",te=>Reflect.apply(te.d,te,[...X]),()=>Ere,te=>lt(te))}function de(...X){return Q(te=>Reflect.apply(Lre,null,[te,...X]),()=>TU(...X),"number format",te=>Reflect.apply(te.n,te,[...X]),()=>Ere,te=>lt(te))}function ce(X){return X.map(te=>lt(te)||vi(te)||fr(te)?Dre(String(te)):te)}const me={normalize:ce,interpolate:X=>X,type:"vnode"};function Se(...X){return Q(te=>{let le;const ve=te;try{ve.processor=me,le=Reflect.apply(Rre,null,[ve,...X])}finally{ve.processor=null}return le},()=>SU(...X),"translate",te=>te[IU](...X),te=>[Dre(te)],te=>In(te))}function Oe(...X){return Q(te=>Reflect.apply(Lre,null,[te,...X]),()=>TU(...X),"number format",te=>te[MU](...X),Fre,te=>lt(te)||In(te))}function ye(...X){return Q(te=>Reflect.apply(Ore,null,[te,...X]),()=>EU(...X),"datetime format",te=>te[AU](...X),Fre,te=>lt(te)||In(te))}function Fe(X){C=X,k.pluralRules=C}function ze(X,te){return Q(()=>{if(!X)return!1;const le=lt(te)?te:u.value,ve=D(le),ke=k.messageResolver(ve,X);return a?ke!=null:Dw(ke)||qu(ke)||lt(ke)},()=>[X],"translate exists",le=>Reflect.apply(le.te,le,[X,te]),u$t,le=>fr(le))}function dt(X){let te=null;const le=C2e(k,c.value,u.value);for(let ve=0;ve<le.length;ve++){const ke=h.value[le[ve]]||{},je=k.messageResolver(ke,X);if(je!=null){te=je;break}}return te}function re(X){return dt(X)??(r?r.tm(X)||{}:{})}function D(X){return h.value[X]||{}}function K(X,te){if(s){const le={[X]:te};for(const ve in le)ec(le,ve)&&yT(le[ve]);te=le[X]}h.value[X]=te,k.messages=h.value}function H(X,te){h.value[X]=h.value[X]||{};const le={[X]:te};if(s)for(const ve in le)ec(le,ve)&&yT(le[ve]);te=le[X],q4(te,h.value[X]),k.messages=h.value}function z(X){return d.value[X]||{}}function L(X,te){d.value[X]=te,k.datetimeFormats=d.value,Nre(k,X,te)}function G(X,te){d.value[X]=Vs(d.value[X]||{},te),k.datetimeFormats=d.value,Nre(k,X,te)}function j(X){return m.value[X]||{}}function V(X,te){m.value[X]=te,k.numberFormats=m.value,Pre(k,X,te)}function $(X,te){m.value[X]=Vs(m.value[X]||{},te),k.numberFormats=m.value,Pre(k,X,te)}jre++,r&&KC&&(_s(r.locale,X=>{l&&(u.value=X,k.locale=X,S2(k,u.value,c.value))}),_s(r.fallbackLocale,X=>{l&&(c.value=X,k.fallbackLocale=X,S2(k,u.value,c.value))}));const J={id:jre,locale:F,fallbackLocale:P,get inheritLocale(){return l},set inheritLocale(X){l=X,X&&r&&(u.value=r.locale.value,c.value=r.fallbackLocale.value,S2(k,u.value,c.value))},get availableLocales(){return Object.keys(h.value).sort()},messages:B,get modifiers(){return M},get pluralRules(){return C||{}},get isGlobal(){return i},get missingWarn(){return y},set missingWarn(X){y=X,k.missingWarn=y},get fallbackWarn(){return g},set fallbackWarn(X){g=X,k.fallbackWarn=g},get fallbackRoot(){return b},set fallbackRoot(X){b=X},get fallbackFormat(){return S},set fallbackFormat(X){S=X,k.fallbackFormat=S},get warnHtmlMessage(){return T},set warnHtmlMessage(X){T=X,k.warnHtmlMessage=X},get escapeParameter(){return I},set escapeParameter(X){I=X,k.escapeParameter=X},t:ee,getLocaleMessage:D,setLocaleMessage:K,mergeLocaleMessage:H,getPostTranslationHandler:A,setPostTranslationHandler:R,getMissingHandler:U,setMissingHandler:q,[V2e]:Fe};return J.datetimeFormats=O,J.numberFormats=v,J.rt=Y,J.te=ze,J.tm=re,J.d=ue,J.n=de,J.getDateTimeFormat=z,J.setDateTimeFormat=L,J.mergeDateTimeFormat=G,J.getNumberFormat=j,J.setNumberFormat=V,J.mergeNumberFormat=$,J[G2e]=n,J[IU]=Se,J[AU]=ye,J[MU]=Oe,J}function c$t(e){const t=lt(e.locale)?e.locale:Pw,r=lt(e.fallbackLocale)||In(e.fallbackLocale)||sr(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,n=dn(e.missing)?e.missing:void 0,i=fr(e.silentTranslationWarn)||zm(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=fr(e.silentFallbackWarn)||zm(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=fr(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=sr(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,c=dn(e.postTranslation)?e.postTranslation:void 0,h=lt(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,d=!!e.escapeParameterHtml,m=fr(e.sync)?e.sync:!0;let y=e.messages;if(sr(e.sharedMessages)){const I=e.sharedMessages;y=Object.keys(I).reduce((M,C)=>{const k=M[C]||(M[C]={});return Vs(k,I[C]),M},y||{})}const{__i18n:g,__root:b,__injectWithOption:S}=e,E=e.datetimeFormats,x=e.numberFormats,w=e.flatJson,T=e.translateExistCompatible;return{locale:t,fallbackLocale:r,messages:y,flatJson:w,datetimeFormats:E,numberFormats:x,missing:n,missingWarn:i,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:h,escapeParameter:d,messageResolver:e.messageResolver,inheritLocale:m,translateExistCompatible:T,__i18n:g,__root:b,__injectWithOption:S}}function kU(e={},t){{const r=Jq(c$t(e)),{__extender:n}=e,i={id:r.id,get locale(){return r.locale.value},set locale(s){r.locale.value=s},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(s){r.fallbackLocale.value=s},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(s){},get missing(){return r.getMissingHandler()},set missing(s){r.setMissingHandler(s)},get silentTranslationWarn(){return fr(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(s){r.missingWarn=fr(s)?!s:s},get silentFallbackWarn(){return fr(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(s){r.fallbackWarn=fr(s)?!s:s},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(s){r.fallbackFormat=s},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(s){r.setPostTranslationHandler(s)},get sync(){return r.inheritLocale},set sync(s){r.inheritLocale=s},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(s){r.warnHtmlMessage=s!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(s){r.escapeParameter=s},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(s){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...s){const[o,a,l]=s,u={};let c=null,h=null;if(!lt(o))throw xs(es.INVALID_ARGUMENT);const d=o;return lt(a)?u.locale=a:In(a)?c=a:sr(a)&&(h=a),In(l)?c=l:sr(l)&&(h=l),Reflect.apply(r.t,r,[d,c||h||{},u])},rt(...s){return Reflect.apply(r.rt,r,[...s])},tc(...s){const[o,a,l]=s,u={plural:1};let c=null,h=null;if(!lt(o))throw xs(es.INVALID_ARGUMENT);const d=o;return lt(a)?u.locale=a:vi(a)?u.plural=a:In(a)?c=a:sr(a)&&(h=a),lt(l)?u.locale=l:In(l)?c=l:sr(l)&&(h=l),Reflect.apply(r.t,r,[d,c||h||{},u])},te(s,o){return r.te(s,o)},tm(s){return r.tm(s)},getLocaleMessage(s){return r.getLocaleMessage(s)},setLocaleMessage(s,o){r.setLocaleMessage(s,o)},mergeLocaleMessage(s,o){r.mergeLocaleMessage(s,o)},d(...s){return Reflect.apply(r.d,r,[...s])},getDateTimeFormat(s){return r.getDateTimeFormat(s)},setDateTimeFormat(s,o){r.setDateTimeFormat(s,o)},mergeDateTimeFormat(s,o){r.mergeDateTimeFormat(s,o)},n(...s){return Reflect.apply(r.n,r,[...s])},getNumberFormat(s){return r.getNumberFormat(s)},setNumberFormat(s,o){r.setNumberFormat(s,o)},mergeNumberFormat(s,o){r.mergeNumberFormat(s,o)},getChoiceIndex(s,o){return-1}};return i.__extender=n,i}}const Yq={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function h$t({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,n)=>[...r,...n.type===Zr?n.children:[n]],[]):t.reduce((r,n)=>{const i=e[n];return i&&(r[n]=i()),r},Yr())}function $2e(e){return Zr}const p$t=mr({name:"i18n-t",props:Vs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>vi(e)||!isNaN(e)}},Yq),setup(e,t){const{slots:r,attrs:n}=t,i=e.i18n||Cn({useScope:e.scope,__useComponent:!0});return()=>{const s=Object.keys(r).filter(h=>h!=="_"),o=Yr();e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=lt(e.plural)?+e.plural:e.plural);const a=h$t(t,s),l=i[IU](e.keypath,a,o),u=Vs(Yr(),n),c=lt(e.tag)||Cr(e.tag)?e.tag:$2e();return Vl(c,u,l)}}}),Bre=p$t;function d$t(e){return In(e)&&!lt(e[0])}function q2e(e,t,r,n){const{slots:i,attrs:s}=t;return()=>{const o={part:!0};let a=Yr();e.locale&&(o.locale=e.locale),lt(e.format)?o.key=e.format:Cr(e.format)&&(lt(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((d,m)=>r.includes(m)?Vs(Yr(),d,{[m]:e.format[m]}):d,Yr()));const l=n(e.value,o,a);let u=[o.key];In(l)?u=l.map((d,m)=>{const y=i[d.type],g=y?y({[d.type]:d.value,index:m,parts:l}):[d.value];return d$t(g)&&(g[0].key=`${d.type}-${m}`),g}):lt(l)&&(u=[l]);const c=Vs(Yr(),s),h=lt(e.tag)||Cr(e.tag)?e.tag:$2e();return Vl(h,c,u)}}const f$t=mr({name:"i18n-n",props:Vs({value:{type:Number,required:!0},format:{type:[String,Object]}},Yq),setup(e,t){const r=e.i18n||Cn({useScope:e.scope,__useComponent:!0});return q2e(e,t,U2e,(...n)=>r[MU](...n))}}),Vre=f$t,m$t=mr({name:"i18n-d",props:Vs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Yq),setup(e,t){const r=e.i18n||Cn({useScope:e.scope,__useComponent:!0});return q2e(e,t,j2e,(...n)=>r[AU](...n))}}),Gre=m$t;function y$t(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const n=r.__getInstance(t);return n!=null?n.__composer:e.global.__composer}}function g$t(e){const t=r=>{const{instance:n,modifiers:i,value:s}=r;if(!n||!n.$)throw xs(es.UNEXPECTED_ERROR);const o=y$t(e,n.$),a=zre(s);return[Reflect.apply(o.t,o,[...$re(a)]),o]};return{created:(r,n)=>{const[i,s]=t(n);KC&&e.global===s&&(r.__i18nWatcher=_s(s.locale,()=>{n.instance&&n.instance.$forceUpdate()})),r.__composer=s,r.textContent=i},unmounted:r=>{KC&&r.__i18nWatcher&&(r.__i18nWatcher(),r.__i18nWatcher=void 0,delete r.__i18nWatcher),r.__composer&&(r.__composer=void 0,delete r.__composer)},beforeUpdate:(r,{value:n})=>{if(r.__composer){const i=r.__composer,s=zre(n);r.textContent=Reflect.apply(i.t,i,[...$re(s)])}},getSSRProps:r=>{const[n]=t(r);return{textContent:n}}}}function zre(e){if(lt(e))return{path:e};if(sr(e)){if(!("path"in e))throw xs(es.REQUIRED_VALUE,"path");return e}else throw xs(es.INVALID_VALUE)}function $re(e){const{path:t,locale:r,args:n,choice:i,plural:s}=e,o={},a=n||{};return lt(r)&&(o.locale=r),vi(i)&&(o.plural=i),vi(s)&&(o.plural=s),[t,a,o]}function v$t(e,t,...r){const n=sr(r[0])?r[0]:{},i=!!n.useI18nComponentName;(!fr(n.globalInstall)||n.globalInstall)&&([i?"i18n":Bre.name,"I18nT"].forEach(s=>e.component(s,Bre)),[Vre.name,"I18nN"].forEach(s=>e.component(s,Vre)),[Gre.name,"I18nD"].forEach(s=>e.component(s,Gre))),e.directive("t",g$t(t))}function b$t(e,t,r){return{beforeCreate(){const n=rs();if(!n)throw xs(es.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const s=i.i18n;if(i.__i18n&&(s.__i18n=i.__i18n),s.__root=t,this===this.$root)this.$i18n=qre(e,s);else{s.__injectWithOption=!0,s.__extender=r.__vueI18nExtend,this.$i18n=kU(s);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(i.__i18n)if(this===this.$root)this.$i18n=qre(e,i);else{this.$i18n=kU({__i18n:i.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:t});const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}else this.$i18n=e;i.__i18nGlobal&&z2e(t,i,i),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s),r.__setInstance(n,this.$i18n)},mounted(){},unmounted(){const n=rs();if(!n)throw xs(es.UNEXPECTED_ERROR);const i=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,i.__disposer&&(i.__disposer(),delete i.__disposer,delete i.__extender),r.__deleteInstance(n),delete this.$i18n}}}function qre(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[V2e](t.pluralizationRules||e.pluralizationRules);const r=sN(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(n=>e.mergeLocaleMessage(n,r[n])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(n=>e.mergeDateTimeFormat(n,t.datetimeFormats[n])),t.numberFormats&&Object.keys(t.numberFormats).forEach(n=>e.mergeNumberFormat(n,t.numberFormats[n])),e}const w$t=a0("global-vue-i18n");function _$t(e={},t){const r=__VUE_I18N_LEGACY_API__&&fr(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,n=fr(e.globalInjection)?e.globalInjection:!0,i=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,s=new Map,[o,a]=x$t(e,r),l=a0("");function u(d){return s.get(d)||null}function c(d,m){s.set(d,m)}function h(d){s.delete(d)}{const d={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return i},async install(m,...y){if(m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,d),sr(y[0])){const S=y[0];d.__composerExtend=S.__composerExtend,d.__vueI18nExtend=S.__vueI18nExtend}let g=null;!r&&n&&(g=R$t(m,d.global)),__VUE_I18N_FULL_INSTALL__&&v$t(m,d,...y),__VUE_I18N_LEGACY_API__&&r&&m.mixin(b$t(a,a.__composer,d));const b=m.unmount;m.unmount=()=>{g&&g(),d.dispose(),b()}},get global(){return a},dispose(){o.stop()},__instances:s,__getInstance:u,__setInstance:c,__deleteInstance:h};return d}}function Cn(e={}){const t=rs();if(t==null)throw xs(es.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw xs(es.NOT_INSTALLED);const r=S$t(t),n=T$t(r),i=l$t(t),s=E$t(e,i);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw xs(es.NOT_AVAILABLE_IN_LEGACY_MODE);return C$t(t,s,n,e)}if(s==="global")return z2e(n,e,i),n;if(s==="parent"){let l=I$t(r,t,e.__useComponent);return l==null&&(l=n),l}const o=r;let a=o.__getInstance(t);if(a==null){const l=Vs({},e);"__i18n"in i&&(l.__i18n=i.__i18n),n&&(l.__root=n),a=Jq(l),o.__composerExtend&&(a[CU]=o.__composerExtend(a)),M$t(o,t,a),o.__setInstance(t,a)}return a}function x$t(e,t,r){const n=BO();{const i=__VUE_I18N_LEGACY_API__&&t?n.run(()=>kU(e)):n.run(()=>Jq(e));if(i==null)throw xs(es.UNEXPECTED_ERROR);return[n,i]}}function S$t(e){{const t=Ki(e.isCE?w$t:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw xs(e.isCE?es.NOT_INSTALLED_WITH_PROVIDE:es.UNEXPECTED_ERROR);return t}}function E$t(e,t){return rN(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function T$t(e){return e.mode==="composition"?e.global:e.global.__composer}function I$t(e,t,r=!1){let n=null;const i=t.root;let s=A$t(t,r);for(;s!=null;){const o=e;if(e.mode==="composition")n=o.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(s);a!=null&&(n=a.__composer,r&&n&&!n[G2e]&&(n=null))}if(n!=null||i===s)break;s=s.parent}return n}function A$t(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function M$t(e,t,r){qs(()=>{},t),U_(()=>{const n=r;e.__deleteInstance(t);const i=n[CU];i&&(i(),delete n[CU])},t)}function C$t(e,t,r,n={}){const i=t==="local",s=j3(null);if(i&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw xs(es.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=fr(n.inheritLocale)?n.inheritLocale:!lt(n.locale),a=Le(!i||o?r.locale.value:lt(n.locale)?n.locale:Pw),l=Le(!i||o?r.fallbackLocale.value:lt(n.fallbackLocale)||In(n.fallbackLocale)||sr(n.fallbackLocale)||n.fallbackLocale===!1?n.fallbackLocale:a.value),u=Le(sN(a.value,n)),c=Le(sr(n.datetimeFormats)?n.datetimeFormats:{[a.value]:{}}),h=Le(sr(n.numberFormats)?n.numberFormats:{[a.value]:{}}),d=i?r.missingWarn:fr(n.missingWarn)||zm(n.missingWarn)?n.missingWarn:!0,m=i?r.fallbackWarn:fr(n.fallbackWarn)||zm(n.fallbackWarn)?n.fallbackWarn:!0,y=i?r.fallbackRoot:fr(n.fallbackRoot)?n.fallbackRoot:!0,g=!!n.fallbackFormat,b=dn(n.missing)?n.missing:null,S=dn(n.postTranslation)?n.postTranslation:null,E=i?r.warnHtmlMessage:fr(n.warnHtmlMessage)?n.warnHtmlMessage:!0,x=!!n.escapeParameter,w=i?r.modifiers:sr(n.modifiers)?n.modifiers:{},T=n.pluralRules||i&&r.pluralRules;function I(){return[a.value,l.value,u.value,c.value,h.value]}const M=cr({get:()=>s.value?s.value.locale.value:a.value,set:D=>{s.value&&(s.value.locale.value=D),a.value=D}}),C=cr({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:D=>{s.value&&(s.value.fallbackLocale.value=D),l.value=D}}),k=cr(()=>s.value?s.value.messages.value:u.value),N=cr(()=>c.value),F=cr(()=>h.value);function P(){return s.value?s.value.getPostTranslationHandler():S}function B(D){s.value&&s.value.setPostTranslationHandler(D)}function O(){return s.value?s.value.getMissingHandler():b}function v(D){s.value&&s.value.setMissingHandler(D)}function A(D){return I(),D()}function R(...D){return s.value?A(()=>Reflect.apply(s.value.t,null,[...D])):A(()=>"")}function U(...D){return s.value?Reflect.apply(s.value.rt,null,[...D]):""}function q(...D){return s.value?A(()=>Reflect.apply(s.value.d,null,[...D])):A(()=>"")}function Q(...D){return s.value?A(()=>Reflect.apply(s.value.n,null,[...D])):A(()=>"")}function ee(D){return s.value?s.value.tm(D):{}}function Y(D,K){return s.value?s.value.te(D,K):!1}function ue(D){return s.value?s.value.getLocaleMessage(D):{}}function de(D,K){s.value&&(s.value.setLocaleMessage(D,K),u.value[D]=K)}function ce(D,K){s.value&&s.value.mergeLocaleMessage(D,K)}function me(D){return s.value?s.value.getDateTimeFormat(D):{}}function Se(D,K){s.value&&(s.value.setDateTimeFormat(D,K),c.value[D]=K)}function Oe(D,K){s.value&&s.value.mergeDateTimeFormat(D,K)}function ye(D){return s.value?s.value.getNumberFormat(D):{}}function Fe(D,K){s.value&&(s.value.setNumberFormat(D,K),h.value[D]=K)}function ze(D,K){s.value&&s.value.mergeNumberFormat(D,K)}const dt={get id(){return s.value?s.value.id:-1},locale:M,fallbackLocale:C,messages:k,datetimeFormats:N,numberFormats:F,get inheritLocale(){return s.value?s.value.inheritLocale:o},set inheritLocale(D){s.value&&(s.value.inheritLocale=D)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(u.value)},get modifiers(){return s.value?s.value.modifiers:w},get pluralRules(){return s.value?s.value.pluralRules:T},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:d},set missingWarn(D){s.value&&(s.value.missingWarn=D)},get fallbackWarn(){return s.value?s.value.fallbackWarn:m},set fallbackWarn(D){s.value&&(s.value.missingWarn=D)},get fallbackRoot(){return s.value?s.value.fallbackRoot:y},set fallbackRoot(D){s.value&&(s.value.fallbackRoot=D)},get fallbackFormat(){return s.value?s.value.fallbackFormat:g},set fallbackFormat(D){s.value&&(s.value.fallbackFormat=D)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:E},set warnHtmlMessage(D){s.value&&(s.value.warnHtmlMessage=D)},get escapeParameter(){return s.value?s.value.escapeParameter:x},set escapeParameter(D){s.value&&(s.value.escapeParameter=D)},t:R,getPostTranslationHandler:P,setPostTranslationHandler:B,getMissingHandler:O,setMissingHandler:v,rt:U,d:q,n:Q,tm:ee,te:Y,getLocaleMessage:ue,setLocaleMessage:de,mergeLocaleMessage:ce,getDateTimeFormat:me,setDateTimeFormat:Se,mergeDateTimeFormat:Oe,getNumberFormat:ye,setNumberFormat:Fe,mergeNumberFormat:ze};function re(D){D.locale.value=a.value,D.fallbackLocale.value=l.value,Object.keys(u.value).forEach(K=>{D.mergeLocaleMessage(K,u.value[K])}),Object.keys(c.value).forEach(K=>{D.mergeDateTimeFormat(K,c.value[K])}),Object.keys(h.value).forEach(K=>{D.mergeNumberFormat(K,h.value[K])}),D.escapeParameter=x,D.fallbackFormat=g,D.fallbackRoot=y,D.fallbackWarn=m,D.missingWarn=d,D.warnHtmlMessage=E}return B3(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw xs(es.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const D=s.value=e.proxy.$i18n.__composer;t==="global"?(a.value=D.locale.value,l.value=D.fallbackLocale.value,u.value=D.messages.value,c.value=D.datetimeFormats.value,h.value=D.numberFormats.value):i&&re(D)}),dt}const k$t=["locale","fallbackLocale","availableLocales"],Hre=["t","rt","d","n","tm","te"];function R$t(e,t){const r=Object.create(null);return k$t.forEach(n=>{const i=Object.getOwnPropertyDescriptor(t,n);if(!i)throw xs(es.UNEXPECTED_ERROR);const s=wr(i.value)?{get(){return i.value.value},set(o){i.value.value=o}}:{get(){return i.get&&i.get()}};Object.defineProperty(r,n,s)}),e.config.globalProperties.$i18n=r,Hre.forEach(n=>{const i=Object.getOwnPropertyDescriptor(t,n);if(!i||!i.value)throw xs(es.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${n}`,i)}),()=>{delete e.config.globalProperties.$i18n,Hre.forEach(n=>{delete e.config.globalProperties[`$${n}`]})}}if(o$t(),__INTLIFY_JIT_COMPILATION__?Ire(Kzt):Ire(Qzt),Rzt(pzt),Ozt(C2e),__INTLIFY_PROD_DEVTOOLS__){const e=Xp();e.__INTLIFY__=!0,_zt(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const O$t={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Switch to metric map scale","map.toggleScaleToImperial":"Switch to imperial map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Franais","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Press enter or space to access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.controls.items":"Use the arrow keys to navigate the items","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw","layer.mismatch":"{name} cannot be displayed in the current projection","layer.filtersdisabled":"Filters have been disabled for {name}","layer.filterwarning":"You are attempting to use a grid that contains unmodifiable layers. Filtering will be partially disabled.","layer.noexportmap":"{name} was attempted to be added as a Map Image Layer but Map Export is not enabled for the service","caption.attributionDefaultText":"Powered by ESRI","caption.attributionLogoAltText":"ESRI logo","caption.attributionLink":"https://www.esri.com/","select.items":" Use Arrow-up/down to select a value. Use Alt+Shift+Arrow-up/down to toggle the select menu"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"franais","lang-native":"Franais","ramp.about.open":"Ouvrir  propos de PCAR","ramp.about":" propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous dplacer entre les sections de l'application.","keyboardInstructions.lists":"Lorsqu'un lment de la liste est slectionn, vous pouvez appuyer sur  Espace  ou  Entre  pour cliquer sur l'lment. Vous pouvez galement vous dplacer au sein de l'lment de la liste au moyen de la touche  Tab .","keyboardInstructions.map":"Lorsque la carte est slectionne, utilisez le pav curseur pour vous dplacer et appuyez sur  Entre   pour slectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Passer  l'chelle mtrique","map.toggleScaleToImperial":"Passer  l'chelle impriale","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Franais","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fentre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"Dvelopper","notifications.controls.collapse":"Rduire","notifications.controls.clearAll":"Effacer tout","panels.access":"Appuyez sur Entre ou sur la barre d'espacement pour accder au panneau","panels.controls.close":"Fermer","panels.controls.pin":"pingler","panels.controls.unpin":"Dspingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"Rduire","panels.controls.expand":"Dvelopper","panels.controls.collapse":"Rduire","panels.controls.moveRight":"Aller  droite","panels.controls.moveLeft":"Aller  gauche","panels.controls.items":"Utilisez les touches flches pour naviguer entre les lments","panels.alert.open":"Fentre {name} ouverte","panels.alert.close":"Fentre {name} ferme","panels.alert.minimize":"Fentre {name} rduite","layer.error":"chec du chargement de {id}","layer.longload":"Le chargement de {id} met plus de temps que prvu","layer.longdraw":"{id} prend plus de temps que prvu  extraire","layer.mismatch":"{id} ne peut pas s'afficher dans la projection actuelle","layer.filtersdisabled":"Les filtres ont t dsactivs pour {name}","layer.filterwarning":"Vous essayez d'utiliser une grille qui contient des couches non modifiables. Le filtrage sera partiellement dsactiv.","layer.noexportmap":"La tentative dajouter {name} comme couche dimagerie cartographique a choue car elle na pu tre activ pour ce service","caption.attributionDefaultText":"Propuls par ESRI","caption.attributionLogoAltText":"Logo ESRI","caption.attributionLink":"https://www.esri.com/fr-fr/home","select.items":"Utilisez Flche haut/bas pour slectionner une valeur. Utilisez Alt+Shift+Flche haut/bas pour basculer le menu de slection"}},Wre="en",N$t={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function L$t(){return _$t({legacy:!1,locale:document.documentElement.getAttribute("lang")||Wre,fallbackLocale:Wre,globalInjection:!0,messages:O$t,numberFormats:N$t})}var Zre={exports:{}},Jre;function P$t(){return Jre||(Jre=1,function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},r=e.exports,n=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,c={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)c[a[0][l]]=o[l];return c}return!1}(),i={change:n.fullscreenchange,error:n.fullscreenerror},s={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var c=o[n.requestFullscreen]();c instanceof Promise&&c.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[n.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=i[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=i[o];l&&t.removeEventListener(l,a,!1)},raw:n};if(!n){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(s,{isFullscreen:{get:function(){return!!t[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!t[n.fullscreenEnabled]}}}),r?e.exports=s:window.screenfull=s})()}(Zre)),Zre.exports}var D$t=P$t();const Mc=D_(D$t);var H4={exports:{}};H4.exports;var Yre;function F$t(){return Yre||(Yre=1,function(e,t){var r=200,n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",h="[object GeneratorFunction]",d="[object Map]",m="[object Number]",y="[object Object]",g="[object Promise]",b="[object RegExp]",S="[object Set]",E="[object String]",x="[object Symbol]",w="[object WeakMap]",T="[object ArrayBuffer]",I="[object DataView]",M="[object Float32Array]",C="[object Float64Array]",k="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",P="[object Uint8Array]",B="[object Uint8ClampedArray]",O="[object Uint16Array]",v="[object Uint32Array]",A=/[\\^$.*+?()[\]{}|]/g,R=/\w*$/,U=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,Q={};Q[s]=Q[o]=Q[T]=Q[I]=Q[a]=Q[l]=Q[M]=Q[C]=Q[k]=Q[N]=Q[F]=Q[d]=Q[m]=Q[y]=Q[b]=Q[S]=Q[E]=Q[x]=Q[P]=Q[B]=Q[O]=Q[v]=!0,Q[u]=Q[c]=Q[w]=!1;var ee=typeof iS=="object"&&iS&&iS.Object===Object&&iS,Y=typeof self=="object"&&self&&self.Object===Object&&self,ue=ee||Y||Function("return this")(),de=t&&!t.nodeType&&t,ce=de&&!0&&e&&!e.nodeType&&e,me=ce&&ce.exports===de;function Se(ne,Ae){return ne.set(Ae[0],Ae[1]),ne}function Oe(ne,Ae){return ne.add(Ae),ne}function ye(ne,Ae){for(var Be=-1,At=ne?ne.length:0;++Be<At&&Ae(ne[Be],Be,ne)!==!1;);return ne}function Fe(ne,Ae){for(var Be=-1,At=Ae.length,Ms=ne.length;++Be<At;)ne[Ms+Be]=Ae[Be];return ne}function ze(ne,Ae,Be,At){for(var Ms=-1,sa=ne?ne.length:0;++Ms<sa;)Be=Ae(Be,ne[Ms],Ms,ne);return Be}function dt(ne,Ae){for(var Be=-1,At=Array(ne);++Be<ne;)At[Be]=Ae(Be);return At}function re(ne,Ae){return ne?.[Ae]}function D(ne){var Ae=!1;if(ne!=null&&typeof ne.toString!="function")try{Ae=!!(ne+"")}catch{}return Ae}function K(ne){var Ae=-1,Be=Array(ne.size);return ne.forEach(function(At,Ms){Be[++Ae]=[Ms,At]}),Be}function H(ne,Ae){return function(Be){return ne(Ae(Be))}}function z(ne){var Ae=-1,Be=Array(ne.size);return ne.forEach(function(At){Be[++Ae]=At}),Be}var L=Array.prototype,G=Function.prototype,j=Object.prototype,V=ue["__core-js_shared__"],$=function(){var ne=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),J=G.toString,X=j.hasOwnProperty,te=j.toString,le=RegExp("^"+J.call(X).replace(A,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=me?ue.Buffer:void 0,ke=ue.Symbol,je=ue.Uint8Array,yt=H(Object.getPrototypeOf,Object),ft=Object.create,Ot=j.propertyIsEnumerable,ct=L.splice,Te=Object.getOwnPropertySymbols,ht=ve?ve.isBuffer:void 0,nt=H(Object.keys,Object),$t=C1(ue,"DataView"),Wt=C1(ue,"Map"),vn=C1(ue,"Promise"),Xn=C1(ue,"Set"),ss=C1(ue,"WeakMap"),Ei=C1(Object,"create"),os=f0($t),za=f0(Wt),oe=f0(vn),ge=f0(Xn),_e=f0(ss),Ve=ke?ke.prototype:void 0,he=Ve?Ve.valueOf:void 0;function Ue(ne){var Ae=-1,Be=ne?ne.length:0;for(this.clear();++Ae<Be;){var At=ne[Ae];this.set(At[0],At[1])}}function xt(){this.__data__=Ei?Ei(null):{}}function rt(ne){return this.has(ne)&&delete this.__data__[ne]}function vr(ne){var Ae=this.__data__;if(Ei){var Be=Ae[ne];return Be===n?void 0:Be}return X.call(Ae,ne)?Ae[ne]:void 0}function Je(ne){var Ae=this.__data__;return Ei?Ae[ne]!==void 0:X.call(Ae,ne)}function Dr(ne,Ae){var Be=this.__data__;return Be[ne]=Ei&&Ae===void 0?n:Ae,this}Ue.prototype.clear=xt,Ue.prototype.delete=rt,Ue.prototype.get=vr,Ue.prototype.has=Je,Ue.prototype.set=Dr;function Gt(ne){var Ae=-1,Be=ne?ne.length:0;for(this.clear();++Ae<Be;){var At=ne[Ae];this.set(At[0],At[1])}}function dr(){this.__data__=[]}function kn(ne){var Ae=this.__data__,Be=M1(Ae,ne);if(Be<0)return!1;var At=Ae.length-1;return Be==At?Ae.pop():ct.call(Ae,Be,1),!0}function Hr(ne){var Ae=this.__data__,Be=M1(Ae,ne);return Be<0?void 0:Ae[Be][1]}function jn(ne){return M1(this.__data__,ne)>-1}function Qn(ne,Ae){var Be=this.__data__,At=M1(Be,ne);return At<0?Be.push([ne,Ae]):Be[At][1]=Ae,this}Gt.prototype.clear=dr,Gt.prototype.delete=kn,Gt.prototype.get=Hr,Gt.prototype.has=jn,Gt.prototype.set=Qn;function Nt(ne){var Ae=-1,Be=ne?ne.length:0;for(this.clear();++Ae<Be;){var At=ne[Ae];this.set(At[0],At[1])}}function h0(){this.__data__={hash:new Ue,map:new(Wt||Gt),string:new Ue}}function Vd(ne){return Q3(this,ne).delete(ne)}function A1(ne){return Q3(this,ne).get(ne)}function p0(ne){return Q3(this,ne).has(ne)}function Gd(ne,Ae){return Q3(this,ne).set(ne,Ae),this}Nt.prototype.clear=h0,Nt.prototype.delete=Vd,Nt.prototype.get=A1,Nt.prototype.has=p0,Nt.prototype.set=Gd;function hu(ne){this.__data__=new Gt(ne)}function V_(){this.__data__=new Gt}function Ti(ne){return this.__data__.delete(ne)}function _N(ne){return this.__data__.get(ne)}function Y3(ne){return this.__data__.has(ne)}function xN(ne,Ae){var Be=this.__data__;if(Be instanceof Gt){var At=Be.__data__;if(!Wt||At.length<r-1)return At.push([ne,Ae]),this;Be=this.__data__=new Nt(At)}return Be.set(ne,Ae),this}hu.prototype.clear=V_,hu.prototype.delete=Ti,hu.prototype.get=_N,hu.prototype.has=Y3,hu.prototype.set=xN;function SN(ne,Ae){var Be=AN(ne)||oEe(ne)?dt(ne.length,String):[],At=Be.length,Ms=!!At;for(var sa in ne)X.call(ne,sa)&&!(Ms&&(sa=="length"||rEe(sa,At)))&&Be.push(sa);return Be}function X3(ne,Ae,Be){var At=ne[Ae];(!(X.call(ne,Ae)&&GH(At,Be))||Be===void 0&&!(Ae in ne))&&(ne[Ae]=Be)}function M1(ne,Ae){for(var Be=ne.length;Be--;)if(GH(ne[Be][0],Ae))return Be;return-1}function EN(ne,Ae){return ne&&UH(Ae,MN(Ae),ne)}function Hs(ne,Ae,Be,At,Ms,sa,Gh){var oa;if(At&&(oa=sa?At(ne,Ms,sa,Gh):At(ne)),oa!==void 0)return oa;if(!K3(ne))return ne;var qH=AN(ne);if(qH){if(oa=KSe(ne),!Ae)return YSe(ne,oa)}else{var k1=d0(ne),HH=k1==c||k1==h;if(lEe(ne))return qt(ne,Ae);if(k1==y||k1==s||HH&&!sa){if(D(ne))return sa?ne:{};if(oa=eEe(HH?{}:ne),!Ae)return XSe(ne,EN(oa,ne))}else{if(!Q[k1])return sa?ne:{};oa=tEe(ne,k1,Hs,Ae)}}Gh||(Gh=new hu);var WH=Gh.get(ne);if(WH)return WH;if(Gh.set(ne,oa),!qH)var ZH=Be?QSe(ne):MN(ne);return ye(ZH||ne,function(CN,eI){ZH&&(eI=CN,CN=ne[eI]),X3(oa,eI,Hs(CN,Ae,Be,At,eI,ne,Gh))}),oa}function TN(ne){return K3(ne)?ft(ne):{}}function IN(ne,Ae,Be){var At=Ae(ne);return AN(ne)?At:Fe(At,Be(ne))}function ae(ne){return te.call(ne)}function De(ne){if(!K3(ne)||iEe(ne))return!1;var Ae=$H(ne)||D(ne)?le:U;return Ae.test(f0(ne))}function He(ne){if(!VH(ne))return nt(ne);var Ae=[];for(var Be in Object(ne))X.call(ne,Be)&&Be!="constructor"&&Ae.push(Be);return Ae}function qt(ne,Ae){if(Ae)return ne.slice();var Be=new ne.constructor(ne.length);return ne.copy(Be),Be}function kr(ne){var Ae=new ne.constructor(ne.byteLength);return new je(Ae).set(new je(ne)),Ae}function Rn(ne,Ae){var Be=Ae?kr(ne.buffer):ne.buffer;return new ne.constructor(Be,ne.byteOffset,ne.byteLength)}function ci(ne,Ae,Be){var At=Ae?Be(K(ne),!0):K(ne);return ze(At,Se,new ne.constructor)}function Ws(ne){var Ae=new ne.constructor(ne.source,R.exec(ne));return Ae.lastIndex=ne.lastIndex,Ae}function WSe(ne,Ae,Be){var At=Ae?Be(z(ne),!0):z(ne);return ze(At,Oe,new ne.constructor)}function ZSe(ne){return he?Object(he.call(ne)):{}}function JSe(ne,Ae){var Be=Ae?kr(ne.buffer):ne.buffer;return new ne.constructor(Be,ne.byteOffset,ne.length)}function YSe(ne,Ae){var Be=-1,At=ne.length;for(Ae||(Ae=Array(At));++Be<At;)Ae[Be]=ne[Be];return Ae}function UH(ne,Ae,Be,At){Be||(Be={});for(var Ms=-1,sa=Ae.length;++Ms<sa;){var Gh=Ae[Ms],oa=void 0;X3(Be,Gh,oa===void 0?ne[Gh]:oa)}return Be}function XSe(ne,Ae){return UH(ne,BH(ne),Ae)}function QSe(ne){return IN(ne,MN,BH)}function Q3(ne,Ae){var Be=ne.__data__;return nEe(Ae)?Be[typeof Ae=="string"?"string":"hash"]:Be.map}function C1(ne,Ae){var Be=re(ne,Ae);return De(Be)?Be:void 0}var BH=Te?H(Te,Object):hEe,d0=ae;($t&&d0(new $t(new ArrayBuffer(1)))!=I||Wt&&d0(new Wt)!=d||vn&&d0(vn.resolve())!=g||Xn&&d0(new Xn)!=S||ss&&d0(new ss)!=w)&&(d0=function(ne){var Ae=te.call(ne),Be=Ae==y?ne.constructor:void 0,At=Be?f0(Be):void 0;if(At)switch(At){case os:return I;case za:return d;case oe:return g;case ge:return S;case _e:return w}return Ae});function KSe(ne){var Ae=ne.length,Be=ne.constructor(Ae);return Ae&&typeof ne[0]=="string"&&X.call(ne,"index")&&(Be.index=ne.index,Be.input=ne.input),Be}function eEe(ne){return typeof ne.constructor=="function"&&!VH(ne)?TN(yt(ne)):{}}function tEe(ne,Ae,Be,At){var Ms=ne.constructor;switch(Ae){case T:return kr(ne);case a:case l:return new Ms(+ne);case I:return Rn(ne,At);case M:case C:case k:case N:case F:case P:case B:case O:case v:return JSe(ne,At);case d:return ci(ne,At,Be);case m:case E:return new Ms(ne);case b:return Ws(ne);case S:return WSe(ne,At,Be);case x:return ZSe(ne)}}function rEe(ne,Ae){return Ae=Ae??i,!!Ae&&(typeof ne=="number"||q.test(ne))&&ne>-1&&ne%1==0&&ne<Ae}function nEe(ne){var Ae=typeof ne;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?ne!=="__proto__":ne===null}function iEe(ne){return!!$&&$ in ne}function VH(ne){var Ae=ne&&ne.constructor,Be=typeof Ae=="function"&&Ae.prototype||j;return ne===Be}function f0(ne){if(ne!=null){try{return J.call(ne)}catch{}try{return ne+""}catch{}}return""}function sEe(ne){return Hs(ne,!0,!0)}function GH(ne,Ae){return ne===Ae||ne!==ne&&Ae!==Ae}function oEe(ne){return aEe(ne)&&X.call(ne,"callee")&&(!Ot.call(ne,"callee")||te.call(ne)==s)}var AN=Array.isArray;function zH(ne){return ne!=null&&uEe(ne.length)&&!$H(ne)}function aEe(ne){return cEe(ne)&&zH(ne)}var lEe=ht||pEe;function $H(ne){var Ae=K3(ne)?te.call(ne):"";return Ae==c||Ae==h}function uEe(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=i}function K3(ne){var Ae=typeof ne;return!!ne&&(Ae=="object"||Ae=="function")}function cEe(ne){return!!ne&&typeof ne=="object"}function MN(ne){return zH(ne)?SN(ne):He(ne)}function hEe(){return[]}function pEe(){return!1}e.exports=sEe}(H4,H4.exports)),H4.exports}var j$t=F$t();const Xre=D_(j$t),tk=Yn("maptip",()=>{const e=Le(void 0),t=Le(void 0),r=Le("");function n(o){e.value=o}function i(o){t.value=o}function s(o){r.value=o}return{maptipInstance:e,maptipPoint:t,content:r,setMaptipInstance:n,setMaptipPoint:i,setMaptipContent:s}}),U$t=mr({__name:"esri-map",setup(e){const t=tk(),r=Ki("iApi"),n=cr(()=>t.maptipPoint),i=cr(()=>t.maptipInstance),s=cr(()=>t.content),o=Ts([]);o.push(_s(n,()=>{if(n.value){let l,u;const c=r.geo.map.getPixelWidth()/2,h=0,d=r.geo.map.mapPointToScreenPoint(n.value);l=d.screenX-c,u=h-d.screenY,i.value.setProps({offset:[l,u]}),s.value&&s.value!==""&&i.value.show()}else i.value.hide()})),o.push(_s(s,l=>{l&&l!==""&&n?(i.value.setContent(l),i.value.show()):i.value.hide()})),Sc(()=>{o.forEach(l=>l())});const a=()=>{r.geo.map.setMouseFocus()};return(l,u)=>{const c=qr("tippy");return $r((qe(),pt("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:a,onKeydown:u[0]||(u[0]=Gq($3(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[c,{allowHTML:!0,zIndex:150,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}}});var H2e={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Xq={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},B$t=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],rk={CSS:{},springs:{}};function dh(e,t,r){return Math.min(Math.max(e,t),r)}function tE(e,t){return e.indexOf(t)>-1}function lD(e,t){return e.apply(null,t)}var Dt={arr:function(e){return Array.isArray(e)},obj:function(e){return tE(Object.prototype.toString.call(e),"Object")},pth:function(e){return Dt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Dt.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return Dt.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Dt.hex(e)||Dt.rgb(e)||Dt.hsl(e)},key:function(e){return!H2e.hasOwnProperty(e)&&!Xq.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function W2e(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Z2e(e,t){var r=W2e(e),n=dh(Dt.und(r[0])?1:r[0],.1,100),i=dh(Dt.und(r[1])?100:r[1],.1,100),s=dh(Dt.und(r[2])?10:r[2],.1,100),o=dh(Dt.und(r[3])?0:r[3],.1,100),a=Math.sqrt(i/n),l=s/(2*Math.sqrt(i*n)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,h=l<1?(l*a+-o)/u:-o+a;function d(y){var g=t?t*y/1e3:y;return l<1?g=Math.exp(-g*l*a)*(c*Math.cos(u*g)+h*Math.sin(u*g)):g=(c+h*g)*Math.exp(-g*a),y===0||y===1?y:1-g}function m(){var y=rk.springs[e];if(y)return y;for(var g=1/6,b=0,S=0;;)if(b+=g,d(b)===1){if(S++,S>=16)break}else S=0;var E=b*g*1e3;return rk.springs[e]=E,E}return t?d:m}function V$t(e){return e===void 0&&(e=10),function(t){return Math.ceil(dh(t,1e-6,1)*e)*(1/e)}}var G$t=function(){var e=11,t=1/(e-1);function r(c,h){return 1-3*h+3*c}function n(c,h){return 3*h-6*c}function i(c){return 3*c}function s(c,h,d){return((r(h,d)*c+n(h,d))*c+i(h))*c}function o(c,h,d){return 3*r(h,d)*c*c+2*n(h,d)*c+i(h)}function a(c,h,d,m,y){var g,b,S=0;do b=h+(d-h)/2,g=s(b,m,y)-c,g>0?d=b:h=b;while(Math.abs(g)>1e-7&&++S<10);return b}function l(c,h,d,m){for(var y=0;y<4;++y){var g=o(h,d,m);if(g===0)return h;var b=s(h,d,m)-c;h-=b/g}return h}function u(c,h,d,m){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var y=new Float32Array(e);if(c!==h||d!==m)for(var g=0;g<e;++g)y[g]=s(g*t,c,d);function b(S){for(var E=0,x=1,w=e-1;x!==w&&y[x]<=S;++x)E+=t;--x;var T=(S-y[x])/(y[x+1]-y[x]),I=E+T*t,M=o(I,c,d);return M>=.001?l(S,I,c,d):M===0?I:a(S,E,E+t,c,d)}return function(S){return c===h&&d===m||S===0||S===1?S:s(b(S),h,m)}}return u}(),J2e=function(){var e={linear:function(){return function(n){return n}}},t={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var i,s=4;n<((i=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((i*3-2)/22-n,2)}},Elastic:function(n,i){n===void 0&&(n=1),i===void 0&&(i=.5);var s=dh(n,1,10),o=dh(i,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(n,i){t[n]=function(){return function(s){return Math.pow(s,i+2)}}}),Object.keys(t).forEach(function(n){var i=t[n];e["easeIn"+n]=i,e["easeOut"+n]=function(s,o){return function(a){return 1-i(s,o)(1-a)}},e["easeInOut"+n]=function(s,o){return function(a){return a<.5?i(s,o)(a*2)/2:1-i(s,o)(a*-2+2)/2}},e["easeOutIn"+n]=function(s,o){return function(a){return a<.5?(1-i(s,o)(1-a*2))/2:(i(s,o)(a*2-1)+1)/2}}}),e}();function Qq(e,t){if(Dt.fnc(e))return e;var r=e.split("(")[0],n=J2e[r],i=W2e(e);switch(r){case"spring":return Z2e(e,t);case"cubicBezier":return lD(G$t,i);case"steps":return lD(V$t,i);default:return lD(n,i)}}function Y2e(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function oN(e,t){for(var r=e.length,n=arguments.length>=2?arguments[1]:void 0,i=[],s=0;s<r;s++)if(s in e){var o=e[s];t.call(n,o,s,e)&&i.push(o)}return i}function aN(e){return e.reduce(function(t,r){return t.concat(Dt.arr(r)?aN(r):r)},[])}function Qre(e){return Dt.arr(e)?e:(Dt.str(e)&&(e=Y2e(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Kq(e,t){return e.some(function(r){return r===t})}function eH(e){var t={};for(var r in e)t[r]=e[r];return t}function RU(e,t){var r=eH(e);for(var n in e)r[n]=t.hasOwnProperty(n)?t[n]:e[n];return r}function lN(e,t){var r=eH(e);for(var n in t)r[n]=Dt.und(e[n])?t[n]:e[n];return r}function z$t(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function $$t(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(a,l,u,c){return l+l+u+u+c+c}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),i=parseInt(n[1],16),s=parseInt(n[2],16),o=parseInt(n[3],16);return"rgba("+i+","+s+","+o+",1)"}function q$t(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,n=parseInt(t[2],10)/100,i=parseInt(t[3],10)/100,s=t[4]||1;function o(d,m,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+(m-d)*6*y:y<1/2?m:y<2/3?d+(m-d)*(2/3-y)*6:d}var a,l,u;if(n==0)a=l=u=i;else{var c=i<.5?i*(1+n):i+n-i*n,h=2*i-c;a=o(h,c,r+1/3),l=o(h,c,r),u=o(h,c,r-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+s+")"}function H$t(e){if(Dt.rgb(e))return z$t(e);if(Dt.hex(e))return $$t(e);if(Dt.hsl(e))return q$t(e)}function hd(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function W$t(e){if(tE(e,"translate")||e==="perspective")return"px";if(tE(e,"rotate")||tE(e,"skew"))return"deg"}function OU(e,t){return Dt.fnc(e)?e(t.target,t.id,t.total):e}function fh(e,t){return e.getAttribute(t)}function tH(e,t,r){var n=hd(t);if(Kq([r,"deg","rad","turn"],n))return t;var i=rk.CSS[t+r];if(!Dt.und(i))return i;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+r;var l=s/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return rk.CSS[t+r]=u,u}function X2e(e,t,r){if(t in e.style){var n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e).getPropertyValue(n)||"0";return r?tH(e,i,r):i}}function rH(e,t){if(Dt.dom(e)&&!Dt.inp(e)&&(!Dt.nil(fh(e,t))||Dt.svg(e)&&e[t]))return"attribute";if(Dt.dom(e)&&Kq(B$t,t))return"transform";if(Dt.dom(e)&&t!=="transform"&&X2e(e,t))return"css";if(e[t]!=null)return"object"}function Q2e(e){if(Dt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,n=new Map,i;i=r.exec(t);)n.set(i[1],i[2]);return n}}function Z$t(e,t,r,n){var i=tE(t,"scale")?1:0+W$t(t),s=Q2e(e).get(t)||i;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),n?tH(e,s,n):s}function nH(e,t,r,n){switch(rH(e,t)){case"transform":return Z$t(e,t,n,r);case"css":return X2e(e,t,r);case"attribute":return fh(e,t);default:return e[t]||0}}function iH(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=hd(e)||0,i=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return i+s+n;case"-":return i-s+n;case"*":return i*s+n}}function K2e(e,t){if(Dt.col(e))return H$t(e);if(/\s/g.test(e))return e;var r=hd(e),n=r?e.substr(0,e.length-r.length):e;return t?n+t:n}function sH(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function J$t(e){return Math.PI*2*fh(e,"r")}function Y$t(e){return fh(e,"width")*2+fh(e,"height")*2}function X$t(e){return sH({x:fh(e,"x1"),y:fh(e,"y1")},{x:fh(e,"x2"),y:fh(e,"y2")})}function exe(e){for(var t=e.points,r=0,n,i=0;i<t.numberOfItems;i++){var s=t.getItem(i);i>0&&(r+=sH(n,s)),n=s}return r}function Q$t(e){var t=e.points;return exe(e)+sH(t.getItem(t.numberOfItems-1),t.getItem(0))}function txe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return J$t(e);case"rect":return Y$t(e);case"line":return X$t(e);case"polyline":return exe(e);case"polygon":return Q$t(e)}}function K$t(e){var t=txe(e);return e.setAttribute("stroke-dasharray",t),t}function eqt(e){for(var t=e.parentNode;Dt.svg(t)&&Dt.svg(t.parentNode);)t=t.parentNode;return t}function rxe(e,t){var r=t||{},n=r.el||eqt(e),i=n.getBoundingClientRect(),s=fh(n,"viewBox"),o=i.width,a=i.height,l=r.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:n,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function tqt(e,t){var r=Dt.str(e)?Y2e(e)[0]:e,n=t||100;return function(i){return{property:i,el:r,svg:rxe(r),totalLength:txe(r)*(n/100)}}}function rqt(e,t,r){function n(c){c===void 0&&(c=0);var h=t+c>=1?t+c:0;return e.el.getPointAtLength(h)}var i=rxe(e.el,e.svg),s=n(),o=n(-1),a=n(1),l=r?1:i.w/i.vW,u=r?1:i.h/i.vH;switch(e.property){case"x":return(s.x-i.x)*l;case"y":return(s.y-i.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function Kre(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=K2e(Dt.pth(e)?e.totalLength:e,t)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:Dt.str(e)||t?n.split(r):[]}}function oH(e){var t=e?aN(Dt.arr(e)?e.map(Qre):Qre(e)):[];return oN(t,function(r,n,i){return i.indexOf(r)===n})}function nxe(e){var t=oH(e);return t.map(function(r,n){return{target:r,id:n,total:t.length,transforms:{list:Q2e(r)}}})}function nqt(e,t){var r=eH(t);if(/^spring/.test(r.easing)&&(r.duration=Z2e(r.easing)),Dt.arr(e)){var n=e.length,i=n===2&&!Dt.obj(e[0]);i?e={value:e}:Dt.fnc(t.duration)||(r.duration=t.duration/n)}var s=Dt.arr(e)?e:[e];return s.map(function(o,a){var l=Dt.obj(o)&&!Dt.pth(o)?o:{value:o};return Dt.und(l.delay)&&(l.delay=a?0:t.delay),Dt.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return lN(o,r)})}function iqt(e){for(var t=oN(aN(e.map(function(s){return Object.keys(s)})),function(s){return Dt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),r={},n=function(s){var o=t[s];r[o]=e.map(function(a){var l={};for(var u in a)Dt.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},i=0;i<t.length;i++)n(i);return r}function sqt(e,t){var r=[],n=t.keyframes;n&&(t=lN(iqt(n),t));for(var i in t)Dt.key(i)&&r.push({name:i,tweens:nqt(t[i],e)});return r}function oqt(e,t){var r={};for(var n in e){var i=OU(e[n],t);Dt.arr(i)&&(i=i.map(function(s){return OU(s,t)}),i.length===1&&(i=i[0])),r[n]=i}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function aqt(e,t){var r;return e.tweens.map(function(n){var i=oqt(n,t),s=i.value,o=Dt.arr(s)?s[1]:s,a=hd(o),l=nH(t.target,e.name,a,t),u=r?r.to.original:l,c=Dt.arr(s)?s[0]:u,h=hd(c)||hd(l),d=a||h;return Dt.und(o)&&(o=u),i.from=Kre(c,d),i.to=Kre(iH(o,c),d),i.start=r?r.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=Qq(i.easing,i.duration),i.isPath=Dt.pth(s),i.isPathTargetInsideSVG=i.isPath&&Dt.svg(t.target),i.isColor=Dt.col(i.from.original),i.isColor&&(i.round=1),r=i,i})}var ixe={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){if(n.list.set(t,r),t===n.last||i){var s="";n.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function sxe(e,t){var r=nxe(e);r.forEach(function(n){for(var i in t){var s=OU(t[i],n),o=n.target,a=hd(s),l=nH(o,i,a,n),u=a||hd(l),c=iH(K2e(s,u),l),h=rH(o,i);ixe[h](o,i,c,n.transforms,!0)}})}function lqt(e,t){var r=rH(e.target,t.name);if(r){var n=aqt(t,e),i=n[n.length-1];return{type:r,property:t.name,animatable:e,tweens:n,duration:i.end,delay:n[0].delay,endDelay:i.endDelay}}}function uqt(e,t){return oN(aN(e.map(function(r){return t.map(function(n){return lqt(r,n)})})),function(r){return!Dt.und(r)})}function oxe(e,t){var r=e.length,n=function(s){return s.timelineOffset?s.timelineOffset:0},i={};return i.duration=r?Math.max.apply(Math,e.map(function(s){return n(s)+s.duration})):t.duration,i.delay=r?Math.min.apply(Math,e.map(function(s){return n(s)+s.delay})):t.delay,i.endDelay=r?i.duration-Math.max.apply(Math,e.map(function(s){return n(s)+s.duration-s.endDelay})):t.endDelay,i}var ene=0;function cqt(e){var t=RU(H2e,e),r=RU(Xq,e),n=sqt(r,e),i=nxe(e.targets),s=uqt(i,n),o=oxe(s,r),a=ene;return ene++,lN(t,{id:a,children:[],animatables:i,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Ju=[],axe=function(){var e;function t(){!e&&(!tne()||!$n.suspendWhenDocumentHidden)&&Ju.length>0&&(e=requestAnimationFrame(r))}function r(i){for(var s=Ju.length,o=0;o<s;){var a=Ju[o];a.paused?(Ju.splice(o,1),s--):(a.tick(i),o++)}e=o>0?requestAnimationFrame(r):void 0}function n(){$n.suspendWhenDocumentHidden&&(tne()?e=cancelAnimationFrame(e):(Ju.forEach(function(i){return i._onDocumentVisibility()}),axe()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),t}();function tne(){return!!document&&document.hidden}function $n(e){e===void 0&&(e={});var t=0,r=0,n=0,i,s=0,o=null;function a(E){var x=window.Promise&&new Promise(function(w){return o=w});return E.finished=x,x}var l=cqt(e);a(l);function u(){var E=l.direction;E!=="alternate"&&(l.direction=E!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,i.forEach(function(x){return x.reversed=l.reversed})}function c(E){return l.reversed?l.duration-E:E}function h(){t=0,r=c(l.currentTime)*(1/$n.speed)}function d(E,x){x&&x.seek(E-x.timelineOffset)}function m(E){if(l.reversePlayback)for(var x=s;x--;)d(E,i[x]);else for(var w=0;w<s;w++)d(E,i[w])}function y(E){for(var x=0,w=l.animations,T=w.length;x<T;){var I=w[x],M=I.animatable,C=I.tweens,k=C.length-1,N=C[k];k&&(N=oN(C,function(me){return E<me.end})[0]||N);for(var F=dh(E-N.start-N.delay,0,N.duration)/N.duration,P=isNaN(F)?1:N.easing(F),B=N.to.strings,O=N.round,v=[],A=N.to.numbers.length,R=void 0,U=0;U<A;U++){var q=void 0,Q=N.to.numbers[U],ee=N.from.numbers[U]||0;N.isPath?q=rqt(N.value,P*Q,N.isPathTargetInsideSVG):q=ee+P*(Q-ee),O&&(N.isColor&&U>2||(q=Math.round(q*O)/O)),v.push(q)}var Y=B.length;if(!Y)R=v[0];else{R=B[0];for(var ue=0;ue<Y;ue++){B[ue];var de=B[ue+1],ce=v[ue];isNaN(ce)||(de?R+=ce+de:R+=ce+" ")}}ixe[I.type](M.target,I.property,R,M.transforms),I.currentValue=R,x++}}function g(E){l[E]&&!l.passThrough&&l[E](l)}function b(){l.remaining&&l.remaining!==!0&&l.remaining--}function S(E){var x=l.duration,w=l.delay,T=x-l.endDelay,I=c(E);l.progress=dh(I/x*100,0,100),l.reversePlayback=I<l.currentTime,i&&m(I),!l.began&&l.currentTime>0&&(l.began=!0,g("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,g("loopBegin")),I<=w&&l.currentTime!==0&&y(0),(I>=T&&l.currentTime!==x||!x)&&y(x),I>w&&I<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,g("changeBegin")),g("change"),y(I)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,g("changeComplete")),l.currentTime=dh(I,0,x),l.began&&g("update"),E>=x&&(r=0,b(),l.remaining?(t=n,g("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,g("loopComplete"),g("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var E=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=E==="reverse",l.remaining=l.loop,i=l.children,s=i.length;for(var x=s;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||E==="alternate"&&l.loop===1)&&l.remaining++,y(l.reversed?l.duration:0)},l._onDocumentVisibility=h,l.set=function(E,x){return sxe(E,x),l},l.tick=function(E){n=E,t||(t=n),S((n+(r-t))*$n.speed)},l.seek=function(E){S(c(E))},l.pause=function(){l.paused=!0,h()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Ju.push(l),h(),axe())},l.reverse=function(){u(),l.completed=!l.reversed,h()},l.restart=function(){l.reset(),l.play()},l.remove=function(E){var x=oH(E);lxe(x,l)},l.reset(),l.autoplay&&l.play(),l}function rne(e,t){for(var r=t.length;r--;)Kq(e,t[r].animatable.target)&&t.splice(r,1)}function lxe(e,t){var r=t.animations,n=t.children;rne(e,r);for(var i=n.length;i--;){var s=n[i],o=s.animations;rne(e,o),!o.length&&!s.children.length&&n.splice(i,1)}!r.length&&!n.length&&t.pause()}function hqt(e){for(var t=oH(e),r=Ju.length;r--;){var n=Ju[r];lxe(t,n)}}function pqt(e,t){t===void 0&&(t={});var r=t.direction||"normal",n=t.easing?Qq(t.easing):null,i=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",c=Dt.arr(e),h=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,m=hd(c?e[1]:e)||0,y=t.start||0+(c?h:0),g=[],b=0;return function(S,E,x){if(a&&(o=0),l&&(o=(x-1)/2),u&&(o=x-1),!g.length){for(var w=0;w<x;w++){if(!i)g.push(Math.abs(o-w));else{var T=l?(i[0]-1)/2:o%i[0],I=l?(i[1]-1)/2:Math.floor(o/i[0]),M=w%i[0],C=Math.floor(w/i[0]),k=T-M,N=I-C,F=Math.sqrt(k*k+N*N);s==="x"&&(F=-k),s==="y"&&(F=-N),g.push(F)}b=Math.max.apply(Math,g)}n&&(g=g.map(function(B){return n(B/b)*b})),r==="reverse"&&(g=g.map(function(B){return s?B<0?B*-1:-B:Math.abs(b-B)}))}var P=c?(d-h)/b:h;return y+P*(Math.round(g[E]*100)/100)+m}}function dqt(e){e===void 0&&(e={});var t=$n(e);return t.duration=0,t.add=function(r,n){var i=Ju.indexOf(t),s=t.children;i>-1&&Ju.splice(i,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=lN(r,RU(Xq,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Dt.und(n)?u:iH(n,u),o(t),t.seek(l.timelineOffset);var c=$n(l);o(c),s.push(c);var h=oxe(s,e);return t.delay=h.delay,t.endDelay=h.endDelay,t.duration=h.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}$n.version="3.2.1",$n.speed=1,$n.suspendWhenDocumentHidden=!0,$n.running=Ju,$n.remove=hqt,$n.get=nH,$n.set=sxe,$n.convertPx=tH,$n.path=tqt,$n.setDashoffset=K$t,$n.stagger=pqt,$n.timeline=dqt,$n.easing=Qq,$n.penner=J2e,$n.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};class uxe{resizeObserver;constructor(t){this.resizeObserver="ResizeObserver"in self?new ResizeObserver(function(r){const n={xs:200,sm:576,md:768,lg:960};r.forEach(function(i){const s=i.target.dataset.breakpoints?JSON.parse(i.target.dataset.breakpoints):t??n;Object.keys(s).forEach(function(o){const a=s[o];i.contentRect.width>=a?i.target.classList.add(o):i.target.classList.remove(o)})})}):void 0}observe(t){this.resizeObserver?.observe(t)}}const fqt=["data-cy"],cxe=mr({__name:"panel-container",props:{panel:{type:Object,required:!0}},setup(e){const t=Le(null),r=e,n=Le(!1);qs(()=>{r.panel.teleport&&new uxe({xs:0,sm:461,...r.panel.teleport.breakpoints}).observe(t.value)});const i=(l,u,c)=>{if(n.value)return u();$n({targets:l,opacity:{value:c,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:u})},s=(l,u)=>{i(l,u,[0,1])},o=l=>{l.classList.contains("screen-spinner")||(n.value=r.panel.isScreenLoaded(r.panel.route.screen),t.value.querySelectorAll("[focus-item").forEach(u=>u.classList.remove("default-focus-style")))},a=(l,u)=>{i(l,u,[0,1])};return(l,u)=>{const c=qr("focus-container");return qe(),pt("div",{class:Jn(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:Fd(e.panel.style),"data-cy":e.panel.id,ref_key:"componentEl",ref:t},[ar(QO,{onBeforeLeave:o,onLeave:a,onEnter:s},{default:xi(()=>[$r((qe(),fn(Cq(e.panel.route.screen),XO({class:"h-full"},e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[c]])]),_:1})],14,fqt)}}}),$m=Yn("panel",()=>{const e=Le(void 0),t=Le(void 0),r=Le(0),n=Le(0),i=Le(!1),s=Le(!0),o=Le({}),a=Le({}),l=Le([]),u=Le([]),c=Le([]),h=cr(()=>n.value);function d(F){return F==="xs"&&c.value.length>0?[c.value.slice().pop()]:c.value}function m(F){const P=[];return F.forEach(B=>{B in a.value&&P.push(a.value[B].getPromise())}),P}function y(F){I(F),w(),t.value=void 0}function g(F){M(F),w()}function b(F,P){C(F,P),w()}function S(F){k(F),w()}function E(F){r.value=F,w()}function x(F){i.value=F}function w(){let F=r.value;const P=[],B=350,O=12,v=600;for(let A=l.value.length-1;A>=0;A--){const R=l.value[A];let U=R.width||B;if(i.value?U=F:U+=O,R.id==="grid"&&(U=Math.max(Math.min(U,F),v)),(F>=U&&!i.value||P.length===0)&&(F-=U,P.unshift(R)),R.id==="grid"&&F<v)break}if(e.value&&!P.includes(e.value)&&!i.value){let A;for(let Q=0;Q<P.length-1&&F<(e.value.width||B)+O;Q++)A=P.shift(),F+=A.width||B;F>=(e.value.width||B)?P.unshift(e.value):t.value||(A=P.shift(),P.unshift(e.value));const R=l.value.indexOf(e.value),U=l.value.indexOf(A),q=l.value.slice();U>-1&&(q.splice(R,1),q.splice(U,0,e.value)),l.value=q}n.value=F,c.value=P}function T(F){if(o.value={...o.value,[F.id]:F},F.id in a.value)a.value[F.id].resolveMe(F);else{const P=new bi;P.resolveMe(F),a.value={...a.value,[F.id]:P}}}function I(F){F.teleport?u.value=[...u.value,F]:(l.value=[...l.value,F],t.value=F)}function M(F){if(F.teleport){const P=u.value.indexOf(F);P!==-1&&(u.value=[...u.value.slice(0,P),...u.value.slice(P+1)])}else{const P=l.value.indexOf(F);P!==-1&&(l.value=[...l.value.slice(0,P),...l.value.slice(P+1)])}}function C(F,P){const B=l.value.indexOf(F),O=P==="right"?1:-1;c.value.includes(l.value[B+O])&&([l.value[B],l.value[B+O]]=[l.value[B+O],l.value[B]])}function k(F){o.value[F.id]!==void 0&&delete o.value[F.id],a.value[F.id]!==void 0&&delete a.value[F.id];const P=c.value.indexOf(F);P!==-1&&(c.value=[...c.value.slice(0,P),...c.value.slice(P+1)]),e.value&&e.value.id==F.id&&(e.value=void 0)}function N(F){a.value={...a.value,[F]:new bi}}return{items:o,regPromises:a,orderedItems:l,pinned:e,priority:t,visible:c,stackWidth:r,remWidth:n,mobileView:i,reorderable:s,teleported:u,getRemainingWidth:h,getVisible:d,getRegPromises:m,openPanel:y,closePanel:g,movePanel:b,removePanel:S,setStackWidth:E,setMobileView:x,updateVisible:w,registerPanel:T,addRegPromise:N}}),mqt=mr({__name:"panel-stack",setup(e){const t=$m(),r=Ki("iApi"),n=Le(),i=cr(()=>t.mobileView);qs(()=>{new ResizeObserver(u=>{const c=!(r?.$vApp.$root?.$refs["app-size"]).classList.contains("sm");i.value!==c&&(t.mobileView=c,r?.event.emit(St.RAMP_MOBILEVIEW_CHANGE,c)),t.setStackWidth(u[0].contentRect.width)}).observe(n.value?.$el)});const s=u=>t.getVisible(u),o=(u,c)=>{l(u,c,[[6,0],[0,1]])},a=(u,c)=>{const[h,d]=[u.children[0].getBoundingClientRect(),u.parentElement.getBoundingClientRect()];u.style.width=`${h.width}px`,u.style.height=`${h.height}px`,u.style.left=`${h.left-d.left}px`,u.style.position="absolute",l(u,c,[[0,-6],[1,0]])},l=(u,c,h)=>{$n({targets:u,duration:300,translateY:{value:h[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:h[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:c})};return(u,c)=>(qe(),fn(jq,{onEnter:o,onLeave:a,name:"panel-container",tag:"div",ref_key:"el",ref:n},{default:xi(()=>[(qe(!0),pt(Zr,null,o0(s(Tt(r).screenSize),h=>(qe(),fn(cxe,{key:`${h.id}`,panel:h},null,8,["panel"]))),128))]),_:1},512))}}),Vh=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},yqt=Vh(mqt,[["__scopeId","data-v-11f38702"]]);var Pa="top",ou="bottom",au="right",Da="left",aH="auto",q3=[Pa,ou,au,Da],Fw="start",gT="end",gqt="clippingParents",hxe="viewport",E2="popper",vqt="reference",nne=q3.reduce(function(e,t){return e.concat([t+"-"+Fw,t+"-"+gT])},[]),pxe=[].concat(q3,[aH]).reduce(function(e,t){return e.concat([t,t+"-"+Fw,t+"-"+gT])},[]),bqt="beforeRead",wqt="read",_qt="afterRead",xqt="beforeMain",Sqt="main",Eqt="afterMain",Tqt="beforeWrite",Iqt="write",Aqt="afterWrite",Mqt=[bqt,wqt,_qt,xqt,Sqt,Eqt,Tqt,Iqt,Aqt];function Nh(e){return e?(e.nodeName||"").toLowerCase():null}function fl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Yg(e){var t=fl(e).Element;return e instanceof t||e instanceof Element}function Jl(e){var t=fl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function lH(e){if(typeof ShadowRoot>"u")return!1;var t=fl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Cqt(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},s=t.elements[r];!Jl(s)||!Nh(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function kqt(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!Jl(i)||!Nh(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Rqt={name:"applyStyles",enabled:!0,phase:"write",fn:Cqt,effect:kqt,requires:["computeStyles"]};function Sh(e){return e.split("-")[0]}var _g=Math.max,nk=Math.min,jw=Math.round;function NU(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function dxe(){return!/^((?!chrome|android).)*safari/i.test(NU())}function Uw(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,s=1;t&&Jl(e)&&(i=e.offsetWidth>0&&jw(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&jw(n.height)/e.offsetHeight||1);var o=Yg(e)?fl(e):window,a=o.visualViewport,l=!dxe()&&r,u=(n.left+(l&&a?a.offsetLeft:0))/i,c=(n.top+(l&&a?a.offsetTop:0))/s,h=n.width/i,d=n.height/s;return{width:h,height:d,top:c,right:u+h,bottom:c+d,left:u,x:u,y:c}}function uH(e){var t=Uw(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function fxe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&lH(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Ed(e){return fl(e).getComputedStyle(e)}function Oqt(e){return["table","td","th"].indexOf(Nh(e))>=0}function u0(e){return((Yg(e)?e.ownerDocument:e.document)||window.document).documentElement}function uN(e){return Nh(e)==="html"?e:e.assignedSlot||e.parentNode||(lH(e)?e.host:null)||u0(e)}function ine(e){return!Jl(e)||Ed(e).position==="fixed"?null:e.offsetParent}function Nqt(e){var t=/firefox/i.test(NU()),r=/Trident/i.test(NU());if(r&&Jl(e)){var n=Ed(e);if(n.position==="fixed")return null}var i=uN(e);for(lH(i)&&(i=i.host);Jl(i)&&["html","body"].indexOf(Nh(i))<0;){var s=Ed(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function H3(e){for(var t=fl(e),r=ine(e);r&&Oqt(r)&&Ed(r).position==="static";)r=ine(r);return r&&(Nh(r)==="html"||Nh(r)==="body"&&Ed(r).position==="static")?t:r||Nqt(e)||t}function cH(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function rE(e,t,r){return _g(e,nk(t,r))}function Lqt(e,t,r){var n=rE(e,t,r);return n>r?r:n}function mxe(){return{top:0,right:0,bottom:0,left:0}}function yxe(e){return Object.assign({},mxe(),e)}function gxe(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Pqt=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,yxe(typeof e!="number"?e:gxe(e,q3))};function Dqt(e){var t,r=e.state,n=e.name,i=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Sh(r.placement),l=cH(a),u=[Da,au].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var h=Pqt(i.padding,r),d=uH(s),m=l==="y"?Pa:Da,y=l==="y"?ou:au,g=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],b=o[l]-r.rects.reference[l],S=H3(s),E=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=g/2-b/2,w=h[m],T=E-d[c]-h[y],I=E/2-d[c]/2+x,M=rE(w,I,T),C=l;r.modifiersData[n]=(t={},t[C]=M,t.centerOffset=M-I,t)}}function Fqt(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||fxe(t.elements.popper,i)&&(t.elements.arrow=i))}const jqt={name:"arrow",enabled:!0,phase:"main",fn:Dqt,effect:Fqt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Bw(e){return e.split("-")[1]}var Uqt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bqt(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:jw(r*i)/i||0,y:jw(n*i)/i||0}}function sne(e){var t,r=e.popper,n=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,d=o.x,m=d===void 0?0:d,y=o.y,g=y===void 0?0:y,b=typeof c=="function"?c({x:m,y:g}):{x:m,y:g};m=b.x,g=b.y;var S=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),x=Da,w=Pa,T=window;if(u){var I=H3(r),M="clientHeight",C="clientWidth";if(I===fl(r)&&(I=u0(r),Ed(I).position!=="static"&&a==="absolute"&&(M="scrollHeight",C="scrollWidth")),I=I,i===Pa||(i===Da||i===au)&&s===gT){w=ou;var k=h&&I===T&&T.visualViewport?T.visualViewport.height:I[M];g-=k-n.height,g*=l?1:-1}if(i===Da||(i===Pa||i===ou)&&s===gT){x=au;var N=h&&I===T&&T.visualViewport?T.visualViewport.width:I[C];m-=N-n.width,m*=l?1:-1}}var F=Object.assign({position:a},u&&Uqt),P=c===!0?Bqt({x:m,y:g},fl(r)):{x:m,y:g};if(m=P.x,g=P.y,l){var B;return Object.assign({},F,(B={},B[w]=E?"0":"",B[x]=S?"0":"",B.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",B))}return Object.assign({},F,(t={},t[w]=E?g+"px":"",t[x]=S?m+"px":"",t.transform="",t))}function Vqt(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Sh(t.placement),variation:Bw(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,sne(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,sne(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Gqt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vqt,data:{}};var DA={passive:!0};function zqt(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,s=i===void 0?!0:i,o=n.resize,a=o===void 0?!0:o,l=fl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",r.update,DA)}),a&&l.addEventListener("resize",r.update,DA),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",r.update,DA)}),a&&l.removeEventListener("resize",r.update,DA)}}const $qt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:zqt,data:{}};var qqt={left:"right",right:"left",bottom:"top",top:"bottom"};function W4(e){return e.replace(/left|right|bottom|top/g,function(t){return qqt[t]})}var Hqt={start:"end",end:"start"};function one(e){return e.replace(/start|end/g,function(t){return Hqt[t]})}function hH(e){var t=fl(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function pH(e){return Uw(u0(e)).left+hH(e).scrollLeft}function Wqt(e,t){var r=fl(e),n=u0(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=dxe();(u||!u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+pH(e),y:l}}function Zqt(e){var t,r=u0(e),n=hH(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=_g(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=_g(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+pH(e),l=-n.scrollTop;return Ed(i||r).direction==="rtl"&&(a+=_g(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function dH(e){var t=Ed(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function vxe(e){return["html","body","#document"].indexOf(Nh(e))>=0?e.ownerDocument.body:Jl(e)&&dH(e)?e:vxe(uN(e))}function nE(e,t){var r;t===void 0&&(t=[]);var n=vxe(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),s=fl(n),o=i?[s].concat(s.visualViewport||[],dH(n)?n:[]):n,a=t.concat(o);return i?a:a.concat(nE(uN(o)))}function LU(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Jqt(e,t){var r=Uw(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function ane(e,t,r){return t===hxe?LU(Wqt(e,r)):Yg(t)?Jqt(t,r):LU(Zqt(u0(e)))}function Yqt(e){var t=nE(uN(e)),r=["absolute","fixed"].indexOf(Ed(e).position)>=0,n=r&&Jl(e)?H3(e):e;return Yg(n)?t.filter(function(i){return Yg(i)&&fxe(i,n)&&Nh(i)!=="body"}):[]}function Xqt(e,t,r,n){var i=t==="clippingParents"?Yqt(e):[].concat(t),s=[].concat(i,[r]),o=s[0],a=s.reduce(function(l,u){var c=ane(e,u,n);return l.top=_g(c.top,l.top),l.right=nk(c.right,l.right),l.bottom=nk(c.bottom,l.bottom),l.left=_g(c.left,l.left),l},ane(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function bxe(e){var t=e.reference,r=e.element,n=e.placement,i=n?Sh(n):null,s=n?Bw(n):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(i){case Pa:l={x:o,y:t.y-r.height};break;case ou:l={x:o,y:t.y+t.height};break;case au:l={x:t.x+t.width,y:a};break;case Da:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=i?cH(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Fw:l[u]=l[u]-(t[c]/2-r[c]/2);break;case gT:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function Xg(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,s=r.strategy,o=s===void 0?e.strategy:s,a=r.boundary,l=a===void 0?gqt:a,u=r.rootBoundary,c=u===void 0?hxe:u,h=r.elementContext,d=h===void 0?E2:h,m=r.altBoundary,y=m===void 0?!1:m,g=r.padding,b=g===void 0?0:g,S=yxe(typeof b!="number"?b:gxe(b,q3)),E=d===E2?vqt:E2,x=e.rects.popper,w=e.elements[y?E:d],T=Xqt(Yg(w)?w:w.contextElement||u0(e.elements.popper),l,c,o),I=Uw(e.elements.reference),M=bxe({reference:I,element:x,strategy:"absolute",placement:i}),C=LU(Object.assign({},x,M)),k=d===E2?C:I,N={top:T.top-k.top+S.top,bottom:k.bottom-T.bottom+S.bottom,left:T.left-k.left+S.left,right:k.right-T.right+S.right},F=e.modifiersData.offset;if(d===E2&&F){var P=F[i];Object.keys(N).forEach(function(B){var O=[au,ou].indexOf(B)>=0?1:-1,v=[Pa,ou].indexOf(B)>=0?"y":"x";N[B]+=P[v]*O})}return N}function Qqt(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?pxe:l,c=Bw(n),h=c?a?nne:nne.filter(function(y){return Bw(y)===c}):q3,d=h.filter(function(y){return u.indexOf(y)>=0});d.length===0&&(d=h);var m=d.reduce(function(y,g){return y[g]=Xg(e,{placement:g,boundary:i,rootBoundary:s,padding:o})[Sh(g)],y},{});return Object.keys(m).sort(function(y,g){return m[y]-m[g]})}function Kqt(e){if(Sh(e)===aH)return[];var t=W4(e);return[one(e),t,one(t)]}function eHt(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,h=r.rootBoundary,d=r.altBoundary,m=r.flipVariations,y=m===void 0?!0:m,g=r.allowedAutoPlacements,b=t.options.placement,S=Sh(b),E=S===b,x=l||(E||!y?[W4(b)]:Kqt(b)),w=[b].concat(x).reduce(function(de,ce){return de.concat(Sh(ce)===aH?Qqt(t,{placement:ce,boundary:c,rootBoundary:h,padding:u,flipVariations:y,allowedAutoPlacements:g}):ce)},[]),T=t.rects.reference,I=t.rects.popper,M=new Map,C=!0,k=w[0],N=0;N<w.length;N++){var F=w[N],P=Sh(F),B=Bw(F)===Fw,O=[Pa,ou].indexOf(P)>=0,v=O?"width":"height",A=Xg(t,{placement:F,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),R=O?B?au:Da:B?ou:Pa;T[v]>I[v]&&(R=W4(R));var U=W4(R),q=[];if(s&&q.push(A[P]<=0),a&&q.push(A[R]<=0,A[U]<=0),q.every(function(de){return de})){k=F,C=!1;break}M.set(F,q)}if(C)for(var Q=y?3:1,ee=function(de){var ce=w.find(function(me){var Se=M.get(me);if(Se)return Se.slice(0,de).every(function(Oe){return Oe})});if(ce)return k=ce,"break"},Y=Q;Y>0;Y--){var ue=ee(Y);if(ue==="break")break}t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}}const tHt={name:"flip",enabled:!0,phase:"main",fn:eHt,requiresIfExists:["offset"],data:{_skip:!1}};function lne(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function une(e){return[Pa,au,ou,Da].some(function(t){return e[t]>=0})}function rHt(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=Xg(t,{elementContext:"reference"}),a=Xg(t,{altBoundary:!0}),l=lne(o,n),u=lne(a,i,s),c=une(l),h=une(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const nHt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rHt};function iHt(e,t,r){var n=Sh(e),i=[Da,Pa].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Da,au].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function sHt(e){var t=e.state,r=e.options,n=e.name,i=r.offset,s=i===void 0?[0,0]:i,o=pxe.reduce(function(c,h){return c[h]=iHt(h,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}const oHt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:sHt};function aHt(e){var t=e.state,r=e.name;t.modifiersData[r]=bxe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const lHt={name:"popperOffsets",enabled:!0,phase:"read",fn:aHt,data:{}};function uHt(e){return e==="x"?"y":"x"}function cHt(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,h=r.padding,d=r.tether,m=d===void 0?!0:d,y=r.tetherOffset,g=y===void 0?0:y,b=Xg(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),S=Sh(t.placement),E=Bw(t.placement),x=!E,w=cH(S),T=uHt(w),I=t.modifiersData.popperOffsets,M=t.rects.reference,C=t.rects.popper,k=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,N=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(I){if(s){var B,O=w==="y"?Pa:Da,v=w==="y"?ou:au,A=w==="y"?"height":"width",R=I[w],U=R+b[O],q=R-b[v],Q=m?-C[A]/2:0,ee=E===Fw?M[A]:C[A],Y=E===Fw?-C[A]:-M[A],ue=t.elements.arrow,de=m&&ue?uH(ue):{width:0,height:0},ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:mxe(),me=ce[O],Se=ce[v],Oe=rE(0,M[A],de[A]),ye=x?M[A]/2-Q-Oe-me-N.mainAxis:ee-Oe-me-N.mainAxis,Fe=x?-M[A]/2+Q+Oe+Se+N.mainAxis:Y+Oe+Se+N.mainAxis,ze=t.elements.arrow&&H3(t.elements.arrow),dt=ze?w==="y"?ze.clientTop||0:ze.clientLeft||0:0,re=(B=F?.[w])!=null?B:0,D=R+ye-re-dt,K=R+Fe-re,H=rE(m?nk(U,D):U,R,m?_g(q,K):q);I[w]=H,P[w]=H-R}if(a){var z,L=w==="x"?Pa:Da,G=w==="x"?ou:au,j=I[T],V=T==="y"?"height":"width",$=j+b[L],J=j-b[G],X=[Pa,Da].indexOf(S)!==-1,te=(z=F?.[T])!=null?z:0,le=X?$:j-M[V]-C[V]-te+N.altAxis,ve=X?j+M[V]+C[V]-te-N.altAxis:J,ke=m&&X?Lqt(le,j,ve):rE(m?le:$,j,m?ve:J);I[T]=ke,P[T]=ke-j}t.modifiersData[n]=P}}const hHt={name:"preventOverflow",enabled:!0,phase:"main",fn:cHt,requiresIfExists:["offset"]};function pHt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function dHt(e){return e===fl(e)||!Jl(e)?hH(e):pHt(e)}function fHt(e){var t=e.getBoundingClientRect(),r=jw(t.width)/e.offsetWidth||1,n=jw(t.height)/e.offsetHeight||1;return r!==1||n!==1}function mHt(e,t,r){r===void 0&&(r=!1);var n=Jl(t),i=Jl(t)&&fHt(t),s=u0(t),o=Uw(e,i,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((Nh(t)!=="body"||dH(s))&&(a=dHt(t)),Jl(t)?(l=Uw(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=pH(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function yHt(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function i(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&i(l)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||i(s)}),n}function gHt(e){var t=yHt(e);return Mqt.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function vHt(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function bHt(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var cne={placement:"bottom",modifiers:[],strategy:"absolute"};function hne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function wHt(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,s=i===void 0?cne:i;return function(o,a,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},cne,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},c=[],h=!1,d={state:u,setOptions:function(g){var b=typeof g=="function"?g(u.options):g;y(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:Yg(o)?nE(o):o.contextElement?nE(o.contextElement):[],popper:nE(a)};var S=gHt(bHt([].concat(n,u.options.modifiers)));return u.orderedModifiers=S.filter(function(E){return E.enabled}),m(),d.update()},forceUpdate:function(){if(!h){var g=u.elements,b=g.reference,S=g.popper;if(hne(b,S)){u.rects={reference:mHt(b,H3(S),u.options.strategy==="fixed"),popper:uH(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var x=u.orderedModifiers[E],w=x.fn,T=x.options,I=T===void 0?{}:T,M=x.name;typeof w=="function"&&(u=w({state:u,options:I,name:M,instance:d})||u)}}}},update:vHt(function(){return new Promise(function(g){d.forceUpdate(),g(u)})}),destroy:function(){y(),h=!0}};if(!hne(o,a))return d;d.setOptions(l).then(function(g){!h&&l.onFirstUpdate&&l.onFirstUpdate(g)});function m(){u.orderedModifiers.forEach(function(g){var b=g.name,S=g.options,E=S===void 0?{}:S,x=g.effect;if(typeof x=="function"){var w=x({state:u,name:b,instance:d,options:E}),T=function(){};c.push(w||T)}})}function y(){c.forEach(function(g){return g()}),c=[]}return d}}var _Ht=[$qt,lHt,Gqt,Rqt,oHt,tHt,hHt,jqt,nHt],wxe=wHt({defaultModifiers:_Ht});const xHt=["content","aria-label"],fH=mr({__name:"dropdown-menu",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default(){return{}}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipPlacementAlt:{type:String,default:"top"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0},ariaLabel:{type:String}},setup(e){const t=Le(!1),r=Le(null),n=Ts([]),i=Le(),s=Le(),o=Le(),a=e;n.push(_s(t,()=>{r.value.update()}));const l=()=>{t.value=!t.value,o.value._tippy.hide()},u=()=>{o.value._tippy.setProps({placement:t.value?a.tooltipPlacementAlt:a.tooltipPlacement}),o.value._tippy.show()},c=()=>{o.value._tippy.hide()};return qs(()=>{window.addEventListener("click",h=>{(!i.value||!i.value.contains(h.target))&&(t.value=!1)},{capture:!0}),window.addEventListener("blur",()=>{t.value=!1}),window.addEventListener("focusin",h=>{(!i.value||!i.value.contains(h.target))&&(t.value=!1)}),o.value.addEventListener("focus",u),o.value.addEventListener("blur",c),o.value.addEventListener("mouseover",u),o.value.addEventListener("mouseleave",c),xc(()=>{const h={name:"overflowScroll",enabled:!0,phase:"main",fn({state:d}){const{bottom:m}=Xg(d);m>0?(d.styles.popper.overflowY=m>100?"auto":void 0,d.styles.popper.overflowX="hidden",d.styles.popper.height=`${d.rects.popper.height-m-8}px`):d.styles.popper.height="auto"}};o.value&&s.value&&(r.value=wxe(o.value,s.value,{placement:a.position||"bottom",modifiers:[h,{name:"offset",options:{offset:[0,5]}}],...a.popperOptions}))})}),Sc(()=>{n.forEach(h=>h()),window.removeEventListener("click",h=>{(!i.value||!i.value.contains(h.target))&&(t.value=!1)},{capture:!0}),window.removeEventListener("blur",()=>{t.value=!1}),window.removeEventListener("focusin",h=>{(!i.value||!i.value.contains(h.target))&&(t.value=!1)}),o.value.removeEventListener("focus",u),o.value.removeEventListener("blur",c),o.value.removeEventListener("mouseover",u),o.value.removeEventListener("mouseleave",c),t.value=!1}),(h,d)=>{const m=qr("tippy");return qe(),pt("div",{ref_key:"el",ref:i},[$r((qe(),pt("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:l,content:e.tooltip,"aria-label":e.ariaLabel?String(e.ariaLabel):String(e.tooltip),ref_key:"dropdownTrigger",ref:o},[Qu(h.$slots,"header")],8,xHt)),[[m,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent",trigger:"manual"}]]),$r(Ge("div",{onClick:d[0]||(d[0]=y=>r.value.update()),class:Jn(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref_key:"dropdown",ref:s},[Qu(h.$slots,"default",{close:()=>t.value=!t.value})],2),[[KO,t.value]])],512)}}}),cc=Yn("notification",()=>{const e=Le([]),t=Le({}),r=cr(()=>e.value.length>=99?99:e.value.length);function n(u){e.value=[u,...e.value]}function i(u){if(e.value.includes(u)){const c=e.value.indexOf(u);u instanceof _xe&&l(u),c>-1&&e.value.splice(c,1)}}function s(u){t.value[u.id]=u}function o(u,c){t.value[u]&&(t.value[u].messageList.push(c),e.value.includes(t.value[u])||(e.value=[t.value[u],...e.value]))}function a(){Object.values(t.value).forEach(u=>l(u)),e.value=[]}function l(u){const c=e.value.indexOf(u);c>-1&&e.value.splice(c,1),u.messageList=[]}return{notificationStack:e,groups:t,notificationNumber:r,showNotification:n,removeNotification:i,registerGroup:s,addToGroup:o,clearAll:a}}),SHt={class:"h-full flex flex-col"},EHt={class:"w-full flex mb-6"},THt=["content","aria-label"],IHt=mr({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const t=cc(),{t:r}=Cn(),n=cr(()=>t.notificationNumber),i=()=>t.clearAll();return(s,o)=>{const a=di("panel-screen"),l=qr("tippy");return qe(),fn(a,{panel:e.panel},{header:xi(()=>[xh(on(Tt(r)("notifications.title")),1)]),content:xi(()=>[Ge("div",SHt,[Ge("div",EHt,[$r((qe(),pt("button",{type:"button",onClick:i,class:Jn(["p-4 ml-auto",[n.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:Tt(r)("notifications.controls.clearAll"),"aria-label":Tt(r)("notifications.controls.clearAll")},o[0]||(o[0]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ge("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Ge("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Ge("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Ge("path",{d:"M22 22l-5 -5"}),Ge("path",{d:"M17 22l5 -5"})],-1)]),10,THt)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),ar(xxe,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}}});var Fa=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(Fa||{});class AHt extends Si{notificationStore;constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":wi(IHt)},alertName:"notifications.title"}}),this.notificationStore=cc(this.$vApp.$pinia)}show(t,r){this.notificationStore.showNotification({type:t,message:r})}addGroup(t,r,n){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const i=new _xe(this.$iApi,t,r,n);return this.notificationStore.registerGroup(i),i}getGroup(t){return this.notificationStore.groups[t]}}class _xe extends Si{notificationStore=cc(this.$vApp.$pinia);id;message;type;messageList=[];constructor(t,r,n,i){super(t),this.id=r,this.type=n,this.message=i}show(t){this.notificationStore.addToGroup(this.id,t)}}const MHt=["content"],CHt={class:"flex items-center text-left"},kHt={class:"select-text cursor-text"},RHt=["content"],OHt={key:0,class:"text-left"},NHt=mr({__name:"notification-item",props:{notification:{type:Object,required:!0}},setup(e){const t=cc(),{t:r}=Cn(),n=e,i=Le(!1),s=Ts({[Fa.WARNING]:"",[Fa.INFO]:"",[Fa.ERROR]:""}),o=l=>{t.removeNotification(l)},a=()=>{if(!n.notification.messageList)return!1};return(l,u)=>{const c=qr("tippy");return $r((qe(),pt("li",{class:Jn(["flex-col default-focus-style p-4",e.notification.messageList?"cursor-pointer":""]),content:Tt(r)(i.value?"notifications.controls.collapse":"notifications.controls.expand"),onClick:u[1]||(u[1]=h=>i.value=!i.value)},[Ge("div",CHt,[Ge("span",null,[xh(on(s[e.notification.type])+" ",1),Ge("span",kHt,on(e.notification.message),1)]),u[4]||(u[4]=Ge("span",{class:"flex-grow"},null,-1)),e.notification.messageList?(qe(),pt("div",{key:0,class:Jn(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":i.value}])},u[2]||(u[2]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[Ge("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)):En("",!0),$r((qe(),pt("button",{type:"button",onClick:u[0]||(u[0]=$3(h=>o(e.notification),["stop"])),class:"mx-4 p-4 text-gray-500 hover:text-black",content:Tt(r)("notifications.controls.dismiss")},u[3]||(u[3]=[Ge("svg",{class:"fill-current",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105.16 122.88","fill-rule":"evenodd"},[Ge("path",{d:"M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z"})],-1)]),8,RHt)),[[c,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&i.value?(qe(),pt("div",OHt,[(qe(!0),pt(Zr,null,o0(e.notification.messageList,(h,d)=>(qe(),pt("p",{key:e.notification.id+h+d},on(h),1))),128))])):En("",!0)],10,MHt)),[[c,{onShow:a,theme:"ramp4",animation:"scale"}]])}}}),LHt=["content"],PHt={key:0,class:"w-full border-b border-black"},DHt={key:1,class:"flex flex-col items-center h-full"},xxe=mr({__name:"notification-list",setup(e){const t=cc(),{t:r}=Cn(),n=Le(),i=()=>{n.value._tippy.hide()},s=a=>{a.key==="Tab"&&n.value?.matches(":focus")&&n.value._tippy.show()};qs(()=>{n.value?.addEventListener("blur",i),n.value?.addEventListener("keyup",s)}),Sc(()=>{n.value?.removeEventListener("blur",i),n.value?.removeEventListener("keyup",s)});const o=cr(()=>t.notificationStack);return(a,l)=>{const u=qr("focus-item"),c=qr("focus-list"),h=qr("tippy");return qe(),pt("div",null,[o.value.length>0?$r((qe(),pt("ul",{key:0,content:Tt(r)("panels.controls.items"),ref_key:"el",ref:n},[(qe(!0),pt(Zr,null,o0(o.value,(d,m)=>(qe(),pt(Zr,{key:d.message+m},[m>0?(qe(),pt("div",PHt)):En("",!0),$r(ar(NHt,{class:Jn([d.type]),notification:d},null,8,["class","notification"]),[[u]])],64))),128))],8,LHt)),[[c],[h,{trigger:"manual",placement:"top-start",touch:!1}]]):(qe(),pt("div",DHt,[l[0]||(l[0]=Ge("span",{class:"flex-grow"},null,-1)),l[1]||(l[1]=Ge("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[Ge("path",{d:"M0 0h24v24H0z",fill:"none"}),Ge("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1)),Ge("span",null,on(Tt(r)("notifications.empty")),1),l[2]||(l[2]=Ge("span",{style:{"flex-grow":"6"}},null,-1))]))])}}}),FHt={class:"flex items-center hover:text-white"},jHt=["aria-label"],UHt={key:0,class:"number rounded-full w-18 text-white"},BHt={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},VHt={class:"pb-8 border-b border-gray-600"},GHt={class:"absolute flex right-3 top-3"},zHt=["content","aria-label"],$Ht=mr({__name:"caption-button",setup(e){const t=cc(),{t:r}=Cn(),n=cr(()=>t.notificationNumber),i=()=>t.clearAll();return(s,o)=>{const a=di("close"),l=qr("tippy");return qe(),fn(fH,{position:"top-start",tooltip:Tt(r)("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:xi(()=>[Ge("div",FHt,[(qe(),pt("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":Tt(r)("notifications.open")},o[0]||(o[0]=[Ge("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)]),8,jHt)),n.value&&n.value>0?(qe(),pt("span",UHt,on(n.value),1)):En("",!0)])]),default:xi(u=>[Ge("div",BHt,[Ge("div",null,[Ge("h4",VHt,on(Tt(r)("notifications.title")),1),Ge("div",GHt,[$r((qe(),pt("button",{type:"button",onClick:i,class:Jn(["p-4 mr-6",[n.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:Tt(r)("notifications.controls.clearAll"),"aria-label":Tt(r)("notifications.controls.clearAll")},o[1]||(o[1]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Ge("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Ge("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Ge("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Ge("path",{d:"M22 22l-5 -5"}),Ge("path",{d:"M17 22l5 -5"})],-1)]),10,zHt)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),ar(a,{onClick:u.close},null,8,["onClick"])])]),ar(xxe,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}}}),qHt=Vh($Ht,[["__scopeId","data-v-3623a7d2"]]),HHt={class:"flex hover:text-white"},WHt=["aria-label"],ZHt={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},JHt={class:"pb-8 border-b border-gray-600 mb-10"},YHt={class:"absolute right-5 top-5"},XHt={class:"select-text"},QHt={class:"font-bold cursor-text"},KHt={class:"text-sm cursor-text"},eWt={class:"text-sm cursor-text"},tWt=mr({__name:"about-ramp-dropdown",props:{position:{type:String,default:"top-start"}},setup(e){const{t}=Cn(),r=cr(()=>`${Kv.major}.${Kv.minor}.${Kv.patch}`),n=cr(()=>Kv.hash.slice(0,9)),i=cr(()=>{let s=new Date(Kv.timestamp);if(isNaN(s))return"dev mode, no date";{const o=a=>a<10?"0"+a.toString():a.toString();return`${s.getFullYear()}-${s.getMonth()+1}-${s.getDate()} ${s.getHours()}:${o(s.getMinutes())}:${o(s.getSeconds())}`}});return(s,o)=>{const a=di("close"),l=di("dropdown-menu"),u=qr("focus-item");return $r((qe(),fn(l,{class:"pointer-events-auto sm:flex",position:e.position,tooltip:Tt(t)("ramp.about"),tooltipPlacement:e.position},{header:xi(()=>[Ge("div",HHt,[(qe(),pt("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":Tt(t)("ramp.about.open")},o[0]||(o[0]=[Ge("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)]),8,WHt))])]),default:xi(c=>[Ge("div",ZHt,[Ge("div",null,[Ge("h4",JHt,on(Tt(t)("ramp.about")),1),Ge("div",YHt,[ar(a,{onClick:c.close},null,8,["onClick"])]),Ge("div",XHt,[Ge("div",null,[Ge("span",QHt,on(r.value),1),Ge("span",KHt," ["+on(n.value)+"] ",1)]),Ge("div",null,[Ge("span",eWt,on(i.value),1)]),o[1]||(o[1]=Ge("div",{class:"mt-5"},[Ge("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[Ge("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),xh(" ramp4-pcar4 ")])],-1))])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[u]])}}}),Sxe=Vh(tWt,[["__scopeId","data-v-dd0345a4"]]),rWt={class:"map-caption absolute bottom-0 h-29 sm:h-38 flex justify-end pointer-events-auto cursor-default select-none text-gray-200 bg-black-75 left-0 right-0 py-2 sm:py-6"},nWt={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},iWt=["href","aria-label"],sWt=["src","alt"],oWt={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},aWt={class:"flex min-w-fit justify-end"},lWt={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},uWt=["aria-pressed","aria-label","content"],cWt={class:"relative top-1 text-sm sm:text-base"},hWt={class:"text-gray-200 hover:text-white text-sm sm:text-base pb-5"},pWt=["onClick"],dWt={key:0,class:"sr-only"},fWt=mr({__name:"map-caption",setup(e){const t=mm(),r=Wo(),{t:n}=Cn(),i=Ki("iApi"),s=cr(()=>t.scale),o=cr(()=>t.attribution),a=cr(()=>t.coords),l=cr(()=>t.langtoggle),u=cr(()=>r.config.map),c=Le([]),h=Ts([]);h.push(_s(u,g=>{g&&i.geo.map.caption.createCaption(u.value?.caption)})),Sc(()=>{h.forEach(g=>g())}),j_(()=>{xc(()=>{i.$i18n.locale.value&&c.value.length==0&&(c.value=i.$i18n.availableLocales)})});const d=g=>{i.$i18n.locale.value!=g&&i.setLanguage(g)},m=()=>{t.toggleScale(),i.geo.map.caption.updateScale()},y=(g=!1)=>n(g?"map.toggleScaleToMetric":"map.toggleScaleToImperial");return(g,b)=>{const S=di("dropdown-menu"),E=qr("truncate"),x=qr("tippy");return qe(),pt("div",rWt,[ar(Sxe,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),ar(qHt,{class:"sm:block display-none"}),o.value?.logo.disabled?En("",!0):(qe(),pt("span",nWt,[Ge("a",{class:"pointer-events-auto cursor-pointer",href:o.value?.logo.link,target:"_blank","aria-label":o.value?.logo.altText},[Ge("img",{class:"object-contain h-18 sm:h-26",src:o.value?.logo.value,alt:o.value?.logo.altText},null,8,sWt)],8,iWt)])),o.value?.text.disabled?En("",!0):$r((qe(),pt("span",oWt,[xh(on(o.value?.text.value),1)])),[[E,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),b[0]||(b[0]=Ge("span",{class:"flex-grow w-15"},null,-1)),Ge("div",aWt,[a.value?.disabled?En("",!0):$r((qe(),pt("div",lWt,[xh(on(a.value?.formattedString),1)])),[[E,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),s.value?.disabled?En("",!0):$r((qe(),pt("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:m,"aria-pressed":s.value?.isImperialScale,"aria-label":`
                    ${s.value?.label} - ${y(s.value?.isImperialScale)}
                `,content:y(s.value?.isImperialScale)},[Ge("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:Fd({width:s.value?.width})},null,4),Ge("span",cWt,on(s.value?.label),1)],8,uWt)),[[x,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),l.value?.disabled?En("",!0):(qe(),fn(S,{key:2,class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",tooltip:Tt(n)("map.changeLanguage"),ariaLabel:`${Tt(n)("map.language.short")} - ${Tt(n)("map.changeLanguage")}`,tooltipPlacement:"top-start",tooltipPlacementAlt:"left-end"},{header:xi(()=>[Ge("span",hWt,on(Tt(n)("map.language.short")),1)]),default:xi(()=>[(qe(!0),pt(Zr,null,o0(c.value,(w,T)=>(qe(),pt("a",{key:`${w}-${T}`,class:Jn(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":w===Tt(i).$i18n.locale.value}]),href:"javascript:;",onClick:I=>d(w)},[xh(on(Tt(n)("map.language."+w))+" ",1),w===Tt(i).$i18n.locale.value?(qe(),pt("span",dWt,on(Tt(n)("map.language.curr")),1)):En("",!0)],10,pWt))),128))]),_:1},8,["tooltip","ariaLabel"]))])])}}}),mWt=["content","aria-label"],yWt={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"},gWt=mr({__name:"floating-button",setup(e){const t=cc(),r=Ki("iApi"),{t:n}=Cn(),i=cr(()=>t.notificationNumber);return(s,o)=>{const a=qr("tippy");return $r((qe(),pt("button",{type:"button",onClick:o[0]||(o[0]=l=>Tt(r).panel.get("notifications").open()),class:"pointer-events-auto items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:Tt(n)("notifications.title"),"aria-label":Tt(n)("notifications.title")},[o[1]||(o[1]=Ge("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Ge("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),i.value&&i.value>0?(qe(),pt("span",yWt,on(i.value),1)):En("",!0)],8,mWt)),[[a]])}}}),vWt=Vh(gWt,[["__scopeId","data-v-a451db5c"]]),bWt={class:"flex items-center mb-20"},wWt={class:"text-xl"},_Wt=mr({__name:"keyboard-instructions",setup(e){const t=Ki("iApi"),{t:r}=Cn(),n=Le(!1),i=Le(["app","lists","map"]),s=Le([]),o=Le(null),a=Le(null);qs(()=>{s.value.push(t.event.on("openKeyboardInstructions",()=>{n.value=!0,xc(()=>{o.value.focus()})}))}),Sc(()=>{s.value.forEach(u=>t?.event.off(u))});const l=u=>{u.key==="Tab"?u.shiftKey&&u.target===o.value?(u.preventDefault(),a.value.focus()):!u.shiftKey&&u.target===a.value&&(u.preventDefault(),o.value.focus()):u.key==="Escape"&&(u.preventDefault(),n.value=!1)};return(u,c)=>{const h=di("close");return n.value?(qe(),pt("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:c[3]||(c[3]=d=>n.value=!1),onKeydown:l},[Ge("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:c[2]||(c[2]=$3(()=>{},["stop","prevent"])),tabindex:"0",ref_key:"firstEl",ref:o},[Ge("div",bWt,[Ge("h2",wWt,on(Tt(r)("keyboardInstructions.title")),1),ar(h,{class:"ml-auto",onClick:c[0]||(c[0]=d=>n.value=!1)})]),(qe(!0),pt(Zr,null,o0(i.value,d=>(qe(),pt("p",{class:"whitespace-pre-line pb-10",key:d},on(Tt(r)(`keyboardInstructions.${d}`)),1))),128)),Ge("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:c[1]||(c[1]=d=>n.value=!1),ref_key:"lastEl",ref:a},on(Tt(r)("keyboardInstructions.OK")),513)],512)],32)):En("",!0)}}}),Yv=Yn("instance",()=>({started:Le(!1)})),xWt={class:"h-full relative"},SWt={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},EWt={class:"absolute top-8 w-full flex justify-center"},TWt={key:1,class:"w-full h-full"},IWt=mr({__name:"shell",setup(e){const t=Ki("iApi"),r=Yv(),n=Dl(),i=$m(),{t:s}=Cn(),o=cr(()=>n.items.appbar),a=()=>{t?.event.emit("openKeyboardInstructions")},l=()=>i.teleported;return(u,c)=>(qe(),pt("div",xWt,[Ge("div",SWt,[c[0]||(c[0]=Ge("div",{class:"sr-only screen-reader-alert"},null,-1)),Ge("div",EWt,[Ge("button",{type:"button",class:"bg-white hidden-until-focus z-50 shadow-md px-10",onClick:a},on(Tt(s)("keyboardInstructions.open")),1)]),ar(_Wt),ar(yqt,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),o.value?En("",!0):(qe(),fn(vWt,{key:0})),ar(fWt,{class:"z-30"})]),Tt(r).started?(qe(),fn(U$t,{key:0})):(qe(),pt("div",TWt,c[1]||(c[1]=[Ge("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)]))),(qe(!0),pt(Zr,null,o0(l(),h=>(qe(),fn(Ywe,{to:h.teleport?.target,key:h.id},[(qe(),fn(cxe,{key:`${h.id}`,panel:h},null,8,["panel"]))],8,["to"]))),128))]))}}),AWt=Vh(IWt,[["__scopeId","data-v-6c131943"]]);var ja="top",lu="bottom",uu="right",Ua="left",mH="auto",W3=[ja,lu,uu,Ua],Vw="start",vT="end",MWt="clippingParents",Exe="viewport",T2="popper",CWt="reference",pne=W3.reduce(function(e,t){return e.concat([t+"-"+Vw,t+"-"+vT])},[]),Txe=[].concat(W3,[mH]).reduce(function(e,t){return e.concat([t,t+"-"+Vw,t+"-"+vT])},[]),kWt="beforeRead",RWt="read",OWt="afterRead",NWt="beforeMain",LWt="main",PWt="afterMain",DWt="beforeWrite",FWt="write",jWt="afterWrite",UWt=[kWt,RWt,OWt,NWt,LWt,PWt,DWt,FWt,jWt];function Lh(e){return e?(e.nodeName||"").toLowerCase():null}function Ec(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Gw(e){var t=Ec(e).Element;return e instanceof t||e instanceof Element}function Yl(e){var t=Ec(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ixe(e){if(typeof ShadowRoot>"u")return!1;var t=Ec(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function BWt(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},s=t.elements[r];!Yl(s)||!Lh(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function VWt(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!Yl(i)||!Lh(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}var Axe={name:"applyStyles",enabled:!0,phase:"write",fn:BWt,effect:VWt,requires:["computeStyles"]};function Eh(e){return e.split("-")[0]}var xg=Math.max,ik=Math.min,zw=Math.round;function $w(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),n=1,i=1;if(Yl(e)&&t){var s=e.offsetHeight,o=e.offsetWidth;o>0&&(n=zw(r.width)/o||1),s>0&&(i=zw(r.height)/s||1)}return{width:r.width/n,height:r.height/i,top:r.top/i,right:r.right/n,bottom:r.bottom/i,left:r.left/n,x:r.left/n,y:r.top/i}}function yH(e){var t=$w(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Mxe(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ixe(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Ph(e){return Ec(e).getComputedStyle(e)}function GWt(e){return["table","td","th"].indexOf(Lh(e))>=0}function c0(e){return((Gw(e)?e.ownerDocument:e.document)||window.document).documentElement}function cN(e){return Lh(e)==="html"?e:e.assignedSlot||e.parentNode||(Ixe(e)?e.host:null)||c0(e)}function dne(e){return!Yl(e)||Ph(e).position==="fixed"?null:e.offsetParent}function zWt(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Yl(e)){var n=Ph(e);if(n.position==="fixed")return null}for(var i=cN(e);Yl(i)&&["html","body"].indexOf(Lh(i))<0;){var s=Ph(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Z3(e){for(var t=Ec(e),r=dne(e);r&&GWt(r)&&Ph(r).position==="static";)r=dne(r);return r&&(Lh(r)==="html"||Lh(r)==="body"&&Ph(r).position==="static")?t:r||zWt(e)||t}function gH(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function iE(e,t,r){return xg(e,ik(t,r))}function $Wt(e,t,r){var n=iE(e,t,r);return n>r?r:n}function Cxe(){return{top:0,right:0,bottom:0,left:0}}function kxe(e){return Object.assign({},Cxe(),e)}function Rxe(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var qWt=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,kxe(typeof e!="number"?e:Rxe(e,W3))};function HWt(e){var t,r=e.state,n=e.name,i=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Eh(r.placement),l=gH(a),u=[Ua,uu].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var h=qWt(i.padding,r),d=yH(s),m=l==="y"?ja:Ua,y=l==="y"?lu:uu,g=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],b=o[l]-r.rects.reference[l],S=Z3(s),E=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=g/2-b/2,w=h[m],T=E-d[c]-h[y],I=E/2-d[c]/2+x,M=iE(w,I,T),C=l;r.modifiersData[n]=(t={},t[C]=M,t.centerOffset=M-I,t)}}function WWt(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Mxe(t.elements.popper,i)&&(t.elements.arrow=i))}var ZWt={name:"arrow",enabled:!0,phase:"main",fn:HWt,effect:WWt,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qw(e){return e.split("-")[1]}var JWt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function YWt(e){var t=e.x,r=e.y,n=window,i=n.devicePixelRatio||1;return{x:zw(t*i)/i||0,y:zw(r*i)/i||0}}function fne(e){var t,r=e.popper,n=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,d=c===!0?YWt(o):typeof c=="function"?c(o):o,m=d.x,y=m===void 0?0:m,g=d.y,b=g===void 0?0:g,S=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),x=Ua,w=ja,T=window;if(u){var I=Z3(r),M="clientHeight",C="clientWidth";if(I===Ec(r)&&(I=c0(r),Ph(I).position!=="static"&&a==="absolute"&&(M="scrollHeight",C="scrollWidth")),I=I,i===ja||(i===Ua||i===uu)&&s===vT){w=lu;var k=h&&T.visualViewport?T.visualViewport.height:I[M];b-=k-n.height,b*=l?1:-1}if(i===Ua||(i===ja||i===lu)&&s===vT){x=uu;var N=h&&T.visualViewport?T.visualViewport.width:I[C];y-=N-n.width,y*=l?1:-1}}var F=Object.assign({position:a},u&&JWt);if(l){var P;return Object.assign({},F,(P={},P[w]=E?"0":"",P[x]=S?"0":"",P.transform=(T.devicePixelRatio||1)<=1?"translate("+y+"px, "+b+"px)":"translate3d("+y+"px, "+b+"px, 0)",P))}return Object.assign({},F,(t={},t[w]=E?b+"px":"",t[x]=S?y+"px":"",t.transform="",t))}function XWt(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Eh(t.placement),variation:qw(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,fne(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,fne(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var QWt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:XWt,data:{}},FA={passive:!0};function KWt(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,s=i===void 0?!0:i,o=n.resize,a=o===void 0?!0:o,l=Ec(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",r.update,FA)}),a&&l.addEventListener("resize",r.update,FA),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",r.update,FA)}),a&&l.removeEventListener("resize",r.update,FA)}}var eZt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:KWt,data:{}},tZt={left:"right",right:"left",bottom:"top",top:"bottom"};function Z4(e){return e.replace(/left|right|bottom|top/g,function(t){return tZt[t]})}var rZt={start:"end",end:"start"};function mne(e){return e.replace(/start|end/g,function(t){return rZt[t]})}function vH(e){var t=Ec(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function bH(e){return $w(c0(e)).left+vH(e).scrollLeft}function nZt(e){var t=Ec(e),r=c0(e),n=t.visualViewport,i=r.clientWidth,s=r.clientHeight,o=0,a=0;return n&&(i=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,a=n.offsetTop)),{width:i,height:s,x:o+bH(e),y:a}}function iZt(e){var t,r=c0(e),n=vH(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=xg(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=xg(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+bH(e),l=-n.scrollTop;return Ph(i||r).direction==="rtl"&&(a+=xg(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function wH(e){var t=Ph(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function Oxe(e){return["html","body","#document"].indexOf(Lh(e))>=0?e.ownerDocument.body:Yl(e)&&wH(e)?e:Oxe(cN(e))}function sE(e,t){var r;t===void 0&&(t=[]);var n=Oxe(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),s=Ec(n),o=i?[s].concat(s.visualViewport||[],wH(n)?n:[]):n,a=t.concat(o);return i?a:a.concat(sE(cN(o)))}function PU(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function sZt(e){var t=$w(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function yne(e,t){return t===Exe?PU(nZt(e)):Gw(t)?sZt(t):PU(iZt(c0(e)))}function oZt(e){var t=sE(cN(e)),r=["absolute","fixed"].indexOf(Ph(e).position)>=0,n=r&&Yl(e)?Z3(e):e;return Gw(n)?t.filter(function(i){return Gw(i)&&Mxe(i,n)&&Lh(i)!=="body"&&(r?Ph(i).position!=="static":!0)}):[]}function aZt(e,t,r){var n=t==="clippingParents"?oZt(e):[].concat(t),i=[].concat(n,[r]),s=i[0],o=i.reduce(function(a,l){var u=yne(e,l);return a.top=xg(u.top,a.top),a.right=ik(u.right,a.right),a.bottom=ik(u.bottom,a.bottom),a.left=xg(u.left,a.left),a},yne(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Nxe(e){var t=e.reference,r=e.element,n=e.placement,i=n?Eh(n):null,s=n?qw(n):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(i){case ja:l={x:o,y:t.y-r.height};break;case lu:l={x:o,y:t.y+t.height};break;case uu:l={x:t.x+t.width,y:a};break;case Ua:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=i?gH(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Vw:l[u]=l[u]-(t[c]/2-r[c]/2);break;case vT:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function bT(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,s=r.boundary,o=s===void 0?MWt:s,a=r.rootBoundary,l=a===void 0?Exe:a,u=r.elementContext,c=u===void 0?T2:u,h=r.altBoundary,d=h===void 0?!1:h,m=r.padding,y=m===void 0?0:m,g=kxe(typeof y!="number"?y:Rxe(y,W3)),b=c===T2?CWt:T2,S=e.rects.popper,E=e.elements[d?b:c],x=aZt(Gw(E)?E:E.contextElement||c0(e.elements.popper),o,l),w=$w(e.elements.reference),T=Nxe({reference:w,element:S,strategy:"absolute",placement:i}),I=PU(Object.assign({},S,T)),M=c===T2?I:w,C={top:x.top-M.top+g.top,bottom:M.bottom-x.bottom+g.bottom,left:x.left-M.left+g.left,right:M.right-x.right+g.right},k=e.modifiersData.offset;if(c===T2&&k){var N=k[i];Object.keys(C).forEach(function(F){var P=[uu,lu].indexOf(F)>=0?1:-1,B=[ja,lu].indexOf(F)>=0?"y":"x";C[F]+=N[B]*P})}return C}function lZt(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Txe:l,c=qw(n),h=c?a?pne:pne.filter(function(y){return qw(y)===c}):W3,d=h.filter(function(y){return u.indexOf(y)>=0});d.length===0&&(d=h);var m=d.reduce(function(y,g){return y[g]=bT(e,{placement:g,boundary:i,rootBoundary:s,padding:o})[Eh(g)],y},{});return Object.keys(m).sort(function(y,g){return m[y]-m[g]})}function uZt(e){if(Eh(e)===mH)return[];var t=Z4(e);return[mne(e),t,mne(t)]}function cZt(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,h=r.rootBoundary,d=r.altBoundary,m=r.flipVariations,y=m===void 0?!0:m,g=r.allowedAutoPlacements,b=t.options.placement,S=Eh(b),E=S===b,x=l||(E||!y?[Z4(b)]:uZt(b)),w=[b].concat(x).reduce(function(de,ce){return de.concat(Eh(ce)===mH?lZt(t,{placement:ce,boundary:c,rootBoundary:h,padding:u,flipVariations:y,allowedAutoPlacements:g}):ce)},[]),T=t.rects.reference,I=t.rects.popper,M=new Map,C=!0,k=w[0],N=0;N<w.length;N++){var F=w[N],P=Eh(F),B=qw(F)===Vw,O=[ja,lu].indexOf(P)>=0,v=O?"width":"height",A=bT(t,{placement:F,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),R=O?B?uu:Ua:B?lu:ja;T[v]>I[v]&&(R=Z4(R));var U=Z4(R),q=[];if(s&&q.push(A[P]<=0),a&&q.push(A[R]<=0,A[U]<=0),q.every(function(de){return de})){k=F,C=!1;break}M.set(F,q)}if(C)for(var Q=y?3:1,ee=function(de){var ce=w.find(function(me){var Se=M.get(me);if(Se)return Se.slice(0,de).every(function(Oe){return Oe})});if(ce)return k=ce,"break"},Y=Q;Y>0;Y--){var ue=ee(Y);if(ue==="break")break}t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}}var hZt={name:"flip",enabled:!0,phase:"main",fn:cZt,requiresIfExists:["offset"],data:{_skip:!1}};function gne(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function vne(e){return[ja,uu,lu,Ua].some(function(t){return e[t]>=0})}function pZt(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=bT(t,{elementContext:"reference"}),a=bT(t,{altBoundary:!0}),l=gne(o,n),u=gne(a,i,s),c=vne(l),h=vne(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}var dZt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:pZt};function fZt(e,t,r){var n=Eh(e),i=[Ua,ja].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Ua,uu].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function mZt(e){var t=e.state,r=e.options,n=e.name,i=r.offset,s=i===void 0?[0,0]:i,o=Txe.reduce(function(c,h){return c[h]=fZt(h,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}var yZt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mZt};function gZt(e){var t=e.state,r=e.name;t.modifiersData[r]=Nxe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var vZt={name:"popperOffsets",enabled:!0,phase:"read",fn:gZt,data:{}};function bZt(e){return e==="x"?"y":"x"}function wZt(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,h=r.padding,d=r.tether,m=d===void 0?!0:d,y=r.tetherOffset,g=y===void 0?0:y,b=bT(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),S=Eh(t.placement),E=qw(t.placement),x=!E,w=gH(S),T=bZt(w),I=t.modifiersData.popperOffsets,M=t.rects.reference,C=t.rects.popper,k=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,N=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),F=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(I){if(s){var B,O=w==="y"?ja:Ua,v=w==="y"?lu:uu,A=w==="y"?"height":"width",R=I[w],U=R+b[O],q=R-b[v],Q=m?-C[A]/2:0,ee=E===Vw?M[A]:C[A],Y=E===Vw?-C[A]:-M[A],ue=t.elements.arrow,de=m&&ue?yH(ue):{width:0,height:0},ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Cxe(),me=ce[O],Se=ce[v],Oe=iE(0,M[A],de[A]),ye=x?M[A]/2-Q-Oe-me-N.mainAxis:ee-Oe-me-N.mainAxis,Fe=x?-M[A]/2+Q+Oe+Se+N.mainAxis:Y+Oe+Se+N.mainAxis,ze=t.elements.arrow&&Z3(t.elements.arrow),dt=ze?w==="y"?ze.clientTop||0:ze.clientLeft||0:0,re=(B=F?.[w])!=null?B:0,D=R+ye-re-dt,K=R+Fe-re,H=iE(m?ik(U,D):U,R,m?xg(q,K):q);I[w]=H,P[w]=H-R}if(a){var z,L=w==="x"?ja:Ua,G=w==="x"?lu:uu,j=I[T],V=T==="y"?"height":"width",$=j+b[L],J=j-b[G],X=[ja,Ua].indexOf(S)!==-1,te=(z=F?.[T])!=null?z:0,le=X?$:j-M[V]-C[V]-te+N.altAxis,ve=X?j+M[V]+C[V]-te-N.altAxis:J,ke=m&&X?$Wt(le,j,ve):iE(m?le:$,j,m?ve:J);I[T]=ke,P[T]=ke-j}t.modifiersData[n]=P}}var _Zt={name:"preventOverflow",enabled:!0,phase:"main",fn:wZt,requiresIfExists:["offset"]};function xZt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function SZt(e){return e===Ec(e)||!Yl(e)?vH(e):xZt(e)}function EZt(e){var t=e.getBoundingClientRect(),r=zw(t.width)/e.offsetWidth||1,n=zw(t.height)/e.offsetHeight||1;return r!==1||n!==1}function TZt(e,t,r){r===void 0&&(r=!1);var n=Yl(t),i=Yl(t)&&EZt(t),s=c0(t),o=$w(e,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((Lh(t)!=="body"||wH(s))&&(a=SZt(t)),Yl(t)?(l=$w(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=bH(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function IZt(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function i(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&i(l)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||i(s)}),n}function AZt(e){var t=IZt(e);return UWt.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function MZt(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function CZt(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var bne={placement:"bottom",modifiers:[],strategy:"absolute"};function wne(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function kZt(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,s=i===void 0?bne:i;return function(o,a,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},bne,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},c=[],h=!1,d={state:u,setOptions:function(g){var b=typeof g=="function"?g(u.options):g;y(),u.options=Object.assign({},s,u.options,b),u.scrollParents={reference:Gw(o)?sE(o):o.contextElement?sE(o.contextElement):[],popper:sE(a)};var S=AZt(CZt([].concat(n,u.options.modifiers)));return u.orderedModifiers=S.filter(function(E){return E.enabled}),m(),d.update()},forceUpdate:function(){if(!h){var g=u.elements,b=g.reference,S=g.popper;if(wne(b,S)){u.rects={reference:TZt(b,Z3(S),u.options.strategy==="fixed"),popper:yH(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(C){return u.modifiersData[C.name]=Object.assign({},C.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var x=u.orderedModifiers[E],w=x.fn,T=x.options,I=T===void 0?{}:T,M=x.name;typeof w=="function"&&(u=w({state:u,options:I,name:M,instance:d})||u)}}}},update:MZt(function(){return new Promise(function(g){d.forceUpdate(),g(u)})}),destroy:function(){y(),h=!0}};if(!wne(o,a))return d;d.setOptions(l).then(function(g){!h&&l.onFirstUpdate&&l.onFirstUpdate(g)});function m(){u.orderedModifiers.forEach(function(g){var b=g.name,S=g.options,E=S===void 0?{}:S,x=g.effect;if(typeof x=="function"){var w=x({state:u,name:b,instance:d,options:E}),T=function(){};c.push(w||T)}})}function y(){c.forEach(function(g){return g()}),c=[]}return d}}var RZt=[eZt,vZt,QWt,Axe,yZt,hZt,_Zt,ZWt,dZt],OZt=kZt({defaultModifiers:RZt}),NZt="tippy-box",Lxe="tippy-content",Pxe="tippy-backdrop",Dxe="tippy-arrow",Fxe="tippy-svg-arrow",ky={passive:!0,capture:!0},jxe=function(){return document.body};function uD(e,t,r){if(Array.isArray(e)){var n=e[t];return n??(Array.isArray(r)?r[t]:r)}return e}function _H(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Uxe(e,t){return typeof e=="function"?e.apply(void 0,t):e}function _ne(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function LZt(e,t){var r=Object.assign({},e);return t.forEach(function(n){delete r[n]}),r}function PZt(e){return e.split(/\s+/).filter(Boolean)}function Uy(e){return[].concat(e)}function xne(e,t){e.indexOf(t)===-1&&e.push(t)}function DZt(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Bxe(e){return e.split("-")[0]}function Hw(e){return[].slice.call(e)}function Sne(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function Sg(){return document.createElement("div")}function hN(e){return["Element","Fragment"].some(function(t){return _H(e,t)})}function FZt(e){return _H(e,"NodeList")}function xH(e){return _H(e,"MouseEvent")}function jZt(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function UZt(e){return hN(e)?[e]:FZt(e)?Hw(e):Array.isArray(e)?e:Hw(document.querySelectorAll(e))}function cD(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function wT(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Vxe(e){var t,r=Uy(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function BZt(e,t){var r=t.clientX,n=t.clientY;return e.every(function(i){var s=i.popperRect,o=i.popperState,a=i.props,l=a.interactiveBorder,u=Bxe(o.placement),c=o.modifiersData.offset;if(!c)return!0;var h=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,y=u==="left"?c.right.x:0,g=s.top-n+h>l,b=n-s.bottom-d>l,S=s.left-r+m>l,E=r-s.right-y>l;return g||b||S||E})}function hD(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[n](i,r)})}function Ene(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var ah={isTouch:!1},Tne=0;function VZt(){ah.isTouch||(ah.isTouch=!0,window.performance&&document.addEventListener("mousemove",Gxe))}function Gxe(){var e=performance.now();e-Tne<20&&(ah.isTouch=!1,document.removeEventListener("mousemove",Gxe)),Tne=e}function GZt(){var e=document.activeElement;if(jZt(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function zZt(){document.addEventListener("touchstart",VZt,ky),window.addEventListener("blur",GZt)}var $Zt=typeof window<"u"&&typeof document<"u",qZt=$Zt?!!window.msCrypto:!1,HZt={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},WZt={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},rc=Object.assign({appendTo:jxe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},HZt,WZt),ZZt=Object.keys(rc),JZt=function(e){var t=Object.keys(e);t.forEach(function(r){rc[r]=e[r]})};function zxe(e){var t=e.plugins||[],r=t.reduce(function(n,i){var s=i.name,o=i.defaultValue;if(s){var a;n[s]=e[s]!==void 0?e[s]:(a=rc[s])!=null?a:o}return n},{});return Object.assign({},e,r)}function YZt(e,t){var r=t?Object.keys(zxe(Object.assign({},rc,{plugins:t}))):ZZt,n=r.reduce(function(i,s){var o=(e.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return n}function Ine(e,t){var r=Object.assign({},t,{content:Uxe(t.content,[e])},t.ignoreAttributes?{}:YZt(e,t.plugins));return r.aria=Object.assign({},rc.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var XZt=function(){return"innerHTML"};function DU(e,t){e[XZt()]=t}function Ane(e){var t=Sg();return e===!0?t.className=Dxe:(t.className=Fxe,hN(e)?t.appendChild(e):DU(t,e)),t}function Mne(e,t){hN(t.content)?(DU(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?DU(e,t.content):e.textContent=t.content)}function sk(e){var t=e.firstElementChild,r=Hw(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(Lxe)}),arrow:r.find(function(n){return n.classList.contains(Dxe)||n.classList.contains(Fxe)}),backdrop:r.find(function(n){return n.classList.contains(Pxe)})}}function $xe(e){var t=Sg(),r=Sg();r.className=NZt,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=Sg();n.className=Lxe,n.setAttribute("data-state","hidden"),Mne(n,e.props),t.appendChild(r),r.appendChild(n),i(e.props,e.props);function i(s,o){var a=sk(t),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Mne(u,e.props),o.arrow?c?s.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(Ane(o.arrow))):l.appendChild(Ane(o.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:i}}$xe.$$tippy=!0;var QZt=1,jA=[],pD=[];function KZt(e,t){var r=Ine(e,Object.assign({},rc,zxe(Sne(t)))),n,i,s,o=!1,a=!1,l=!1,u=!1,c,h,d,m=[],y=_ne(D,r.interactiveDebounce),g,b=QZt++,S=null,E=DZt(r.plugins),x={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:b,reference:e,popper:Sg(),popperInstance:S,props:r,state:x,plugins:E,clearDelayTimeouts:le,setProps:ve,setContent:ke,show:je,hide:yt,hideWithInteractivity:ft,enable:X,disable:te,unmount:Ot,destroy:ct};if(!r.render)return w;var T=r.render(w),I=T.popper,M=T.onUpdate;I.setAttribute("data-tippy-root",""),I.id="tippy-"+w.id,w.popper=I,e._tippy=w,I._tippy=w;var C=E.map(function(Te){return Te.fn(w)}),k=e.hasAttribute("aria-expanded");return ze(),Q(),R(),U("onCreate",[w]),r.showOnCreate&&$(),I.addEventListener("mouseenter",function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()}),I.addEventListener("mouseleave",function(){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&O().addEventListener("mousemove",y)}),w;function N(){var Te=w.props.touch;return Array.isArray(Te)?Te:[Te,0]}function F(){return N()[0]==="hold"}function P(){var Te;return!!((Te=w.props.render)!=null&&Te.$$tippy)}function B(){return g||e}function O(){var Te=B().parentNode;return Te?Vxe(Te):document}function v(){return sk(I)}function A(Te){return w.state.isMounted&&!w.state.isVisible||ah.isTouch||c&&c.type==="focus"?0:uD(w.props.delay,Te?0:1,rc.delay)}function R(Te){Te===void 0&&(Te=!1),I.style.pointerEvents=w.props.interactive&&!Te?"":"none",I.style.zIndex=""+w.props.zIndex}function U(Te,ht,nt){if(nt===void 0&&(nt=!0),C.forEach(function(Wt){Wt[Te]&&Wt[Te].apply(Wt,ht)}),nt){var $t;($t=w.props)[Te].apply($t,ht)}}function q(){var Te=w.props.aria;if(Te.content){var ht="aria-"+Te.content,nt=I.id,$t=Uy(w.props.triggerTarget||e);$t.forEach(function(Wt){var vn=Wt.getAttribute(ht);if(w.state.isVisible)Wt.setAttribute(ht,vn?vn+" "+nt:nt);else{var Xn=vn&&vn.replace(nt,"").trim();Xn?Wt.setAttribute(ht,Xn):Wt.removeAttribute(ht)}})}}function Q(){if(!(k||!w.props.aria.expanded)){var Te=Uy(w.props.triggerTarget||e);Te.forEach(function(ht){w.props.interactive?ht.setAttribute("aria-expanded",w.state.isVisible&&ht===B()?"true":"false"):ht.removeAttribute("aria-expanded")})}}function ee(){O().removeEventListener("mousemove",y),jA=jA.filter(function(Te){return Te!==y})}function Y(Te){if(!(ah.isTouch&&(l||Te.type==="mousedown"))){var ht=Te.composedPath&&Te.composedPath()[0]||Te.target;if(!(w.props.interactive&&Ene(I,ht))){if(Uy(w.props.triggerTarget||e).some(function(nt){return Ene(nt,ht)})){if(ah.isTouch||w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else U("onClickOutside",[w,Te]);w.props.hideOnClick===!0&&(w.clearDelayTimeouts(),w.hide(),a=!0,setTimeout(function(){a=!1}),w.state.isMounted||me())}}}function ue(){l=!0}function de(){l=!1}function ce(){var Te=O();Te.addEventListener("mousedown",Y,!0),Te.addEventListener("touchend",Y,ky),Te.addEventListener("touchstart",de,ky),Te.addEventListener("touchmove",ue,ky)}function me(){var Te=O();Te.removeEventListener("mousedown",Y,!0),Te.removeEventListener("touchend",Y,ky),Te.removeEventListener("touchstart",de,ky),Te.removeEventListener("touchmove",ue,ky)}function Se(Te,ht){ye(Te,function(){!w.state.isVisible&&I.parentNode&&I.parentNode.contains(I)&&ht()})}function Oe(Te,ht){ye(Te,ht)}function ye(Te,ht){var nt=v().box;function $t(Wt){Wt.target===nt&&(hD(nt,"remove",$t),ht())}if(Te===0)return ht();hD(nt,"remove",h),hD(nt,"add",$t),h=$t}function Fe(Te,ht,nt){nt===void 0&&(nt=!1);var $t=Uy(w.props.triggerTarget||e);$t.forEach(function(Wt){Wt.addEventListener(Te,ht,nt),m.push({node:Wt,eventType:Te,handler:ht,options:nt})})}function ze(){F()&&(Fe("touchstart",re,{passive:!0}),Fe("touchend",K,{passive:!0})),PZt(w.props.trigger).forEach(function(Te){if(Te!=="manual")switch(Fe(Te,re),Te){case"mouseenter":Fe("mouseleave",K);break;case"focus":Fe(qZt?"focusout":"blur",H);break;case"focusin":Fe("focusout",H);break}})}function dt(){m.forEach(function(Te){var ht=Te.node,nt=Te.eventType,$t=Te.handler,Wt=Te.options;ht.removeEventListener(nt,$t,Wt)}),m=[]}function re(Te){var ht,nt=!1;if(!(!w.state.isEnabled||z(Te)||a)){var $t=((ht=c)==null?void 0:ht.type)==="focus";c=Te,g=Te.currentTarget,Q(),!w.state.isVisible&&xH(Te)&&jA.forEach(function(Wt){return Wt(Te)}),Te.type==="click"&&(w.props.trigger.indexOf("mouseenter")<0||o)&&w.props.hideOnClick!==!1&&w.state.isVisible?nt=!0:$(Te),Te.type==="click"&&(o=!nt),nt&&!$t&&J(Te)}}function D(Te){var ht=Te.target,nt=B().contains(ht)||I.contains(ht);if(!(Te.type==="mousemove"&&nt)){var $t=V().concat(I).map(function(Wt){var vn,Xn=Wt._tippy,ss=(vn=Xn.popperInstance)==null?void 0:vn.state;return ss?{popperRect:Wt.getBoundingClientRect(),popperState:ss,props:r}:null}).filter(Boolean);BZt($t,Te)&&(ee(),J(Te))}}function K(Te){var ht=z(Te)||w.props.trigger.indexOf("click")>=0&&o;if(!ht){if(w.props.interactive){w.hideWithInteractivity(Te);return}J(Te)}}function H(Te){w.props.trigger.indexOf("focusin")<0&&Te.target!==B()||w.props.interactive&&Te.relatedTarget&&I.contains(Te.relatedTarget)||J(Te)}function z(Te){return ah.isTouch?F()!==Te.type.indexOf("touch")>=0:!1}function L(){G();var Te=w.props,ht=Te.popperOptions,nt=Te.placement,$t=Te.offset,Wt=Te.getReferenceClientRect,vn=Te.moveTransition,Xn=P()?sk(I).arrow:null,ss=Wt?{getBoundingClientRect:Wt,contextElement:Wt.contextElement||B()}:e,Ei={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(za){var oe=za.state;if(P()){var ge=v(),_e=ge.box;["placement","reference-hidden","escaped"].forEach(function(Ve){Ve==="placement"?_e.setAttribute("data-placement",oe.placement):oe.attributes.popper["data-popper-"+Ve]?_e.setAttribute("data-"+Ve,""):_e.removeAttribute("data-"+Ve)}),oe.attributes.popper={}}}},os=[{name:"offset",options:{offset:$t}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!vn}},Ei];P()&&Xn&&os.push({name:"arrow",options:{element:Xn,padding:3}}),os.push.apply(os,ht?.modifiers||[]),w.popperInstance=OZt(ss,I,Object.assign({},ht,{placement:nt,onFirstUpdate:d,modifiers:os}))}function G(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function j(){var Te=w.props.appendTo,ht,nt=B();w.props.interactive&&Te===jxe||Te==="parent"?ht=nt.parentNode:ht=Uxe(Te,[nt]),ht.contains(I)||ht.appendChild(I),w.state.isMounted=!0,L()}function V(){return Hw(I.querySelectorAll("[data-tippy-root]"))}function $(Te){w.clearDelayTimeouts(),Te&&U("onTrigger",[w,Te]),ce();var ht=A(!0),nt=N(),$t=nt[0],Wt=nt[1];ah.isTouch&&$t==="hold"&&Wt&&(ht=Wt),ht?n=setTimeout(function(){w.show()},ht):w.show()}function J(Te){if(w.clearDelayTimeouts(),U("onUntrigger",[w,Te]),!w.state.isVisible){me();return}if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Te.type)>=0&&o)){var ht=A(!1);ht?i=setTimeout(function(){w.state.isVisible&&w.hide()},ht):s=requestAnimationFrame(function(){w.hide()})}}function X(){w.state.isEnabled=!0}function te(){w.hide(),w.state.isEnabled=!1}function le(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(s)}function ve(Te){if(!w.state.isDestroyed){U("onBeforeUpdate",[w,Te]),dt();var ht=w.props,nt=Ine(e,Object.assign({},ht,Sne(Te),{ignoreAttributes:!0}));w.props=nt,ze(),ht.interactiveDebounce!==nt.interactiveDebounce&&(ee(),y=_ne(D,nt.interactiveDebounce)),ht.triggerTarget&&!nt.triggerTarget?Uy(ht.triggerTarget).forEach(function($t){$t.removeAttribute("aria-expanded")}):nt.triggerTarget&&e.removeAttribute("aria-expanded"),Q(),R(),M&&M(ht,nt),w.popperInstance&&(L(),V().forEach(function($t){requestAnimationFrame($t._tippy.popperInstance.forceUpdate)})),U("onAfterUpdate",[w,Te])}}function ke(Te){w.setProps({content:Te})}function je(){var Te=w.state.isVisible,ht=w.state.isDestroyed,nt=!w.state.isEnabled,$t=ah.isTouch&&!w.props.touch,Wt=uD(w.props.duration,0,rc.duration);if(!(Te||ht||nt||$t)&&!B().hasAttribute("disabled")&&(U("onShow",[w],!1),w.props.onShow(w)!==!1)){if(w.state.isVisible=!0,P()&&(I.style.visibility="visible"),R(),ce(),w.state.isMounted||(I.style.transition="none"),P()){var vn=v(),Xn=vn.box,ss=vn.content;cD([Xn,ss],0)}d=function(){var Ei;if(!(!w.state.isVisible||u)){if(u=!0,I.offsetHeight,I.style.transition=w.props.moveTransition,P()&&w.props.animation){var os=v(),za=os.box,oe=os.content;cD([za,oe],Wt),wT([za,oe],"visible")}q(),Q(),xne(pD,w),(Ei=w.popperInstance)==null||Ei.forceUpdate(),U("onMount",[w]),w.props.animation&&P()&&Oe(Wt,function(){w.state.isShown=!0,U("onShown",[w])})}},j()}}function yt(){var Te=!w.state.isVisible,ht=w.state.isDestroyed,nt=!w.state.isEnabled,$t=uD(w.props.duration,1,rc.duration);if(!(Te||ht||nt)&&(U("onHide",[w],!1),w.props.onHide(w)!==!1)){if(w.state.isVisible=!1,w.state.isShown=!1,u=!1,o=!1,P()&&(I.style.visibility="hidden"),ee(),me(),R(!0),P()){var Wt=v(),vn=Wt.box,Xn=Wt.content;w.props.animation&&(cD([vn,Xn],$t),wT([vn,Xn],"hidden"))}q(),Q(),w.props.animation?P()&&Se($t,w.unmount):w.unmount()}}function ft(Te){O().addEventListener("mousemove",y),xne(jA,y),y(Te)}function Ot(){w.state.isVisible&&w.hide(),w.state.isMounted&&(G(),V().forEach(function(Te){Te._tippy.unmount()}),I.parentNode&&I.parentNode.removeChild(I),pD=pD.filter(function(Te){return Te!==w}),w.state.isMounted=!1,U("onHidden",[w]))}function ct(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),dt(),delete e._tippy,w.state.isDestroyed=!0,U("onDestroy",[w]))}}function Rt(e,t){t===void 0&&(t={});var r=rc.plugins.concat(t.plugins||[]);zZt();var n=Object.assign({},t,{plugins:r}),i=UZt(e),s=i.reduce(function(o,a){var l=a&&KZt(a,n);return l&&o.push(l),o},[]);return hN(e)?s[0]:s}Rt.defaultProps=rc,Rt.setDefaultProps=JZt,Rt.currentInput=ah;var eJt=Object.assign({},Axe,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}}),tJt=function(e,t){var r;t===void 0&&(t={});var n=e,i=[],s=[],o,a=t.overrides,l=[],u=!1;function c(){s=n.map(function(x){return Uy(x.props.triggerTarget||x.reference)}).reduce(function(x,w){return x.concat(w)},[])}function h(){i=n.map(function(x){return x.reference})}function d(x){n.forEach(function(w){x?w.enable():w.disable()})}function m(x){return n.map(function(w){var T=w.setProps;return w.setProps=function(I){T(I),w.reference===o&&x.setProps(I)},function(){w.setProps=T}})}function y(x,w){var T=s.indexOf(w);if(w!==o){o=w;var I=(a||[]).concat("content").reduce(function(M,C){return M[C]=n[T].props[C],M},{});x.setProps(Object.assign({},I,{getReferenceClientRect:typeof I.getReferenceClientRect=="function"?I.getReferenceClientRect:function(){var M;return(M=i[T])==null?void 0:M.getBoundingClientRect()}}))}}d(!1),h(),c();var g={fn:function(){return{onDestroy:function(){d(!0)},onHidden:function(){o=null},onClickOutside:function(x){x.props.showOnCreate&&!u&&(u=!0,o=null)},onShow:function(x){x.props.showOnCreate&&!u&&(u=!0,y(x,i[0]))},onTrigger:function(x,w){y(x,w.currentTarget)}}}},b=Rt(Sg(),Object.assign({},LZt(t,["overrides"]),{plugins:[g].concat(t.plugins||[]),triggerTarget:s,popperOptions:Object.assign({},t.popperOptions,{modifiers:[].concat(((r=t.popperOptions)==null?void 0:r.modifiers)||[],[eJt])})})),S=b.show;b.show=function(x){if(S(),!o&&x==null)return y(b,i[0]);if(!(o&&x==null)){if(typeof x=="number")return i[x]&&y(b,i[x]);if(n.indexOf(x)>=0){var w=x.reference;return y(b,w)}if(i.indexOf(x)>=0)return y(b,x)}},b.showNext=function(){var x=i[0];if(!o)return b.show(0);var w=i.indexOf(o);b.show(i[w+1]||x)},b.showPrevious=function(){var x=i[i.length-1];if(!o)return b.show(x);var w=i.indexOf(o),T=i[w-1]||x;b.show(T)};var E=b.setProps;return b.setProps=function(x){a=x.overrides||a,E(x)},b.setInstances=function(x){d(!0),l.forEach(function(w){return w()}),n=x,d(!1),h(),c(),l=m(b),b.setProps({triggerTarget:s})},l=m(b),b},rJt={name:"animateFill",defaultValue:!1,fn:function(e){var t;if(!((t=e.props.render)!=null&&t.$$tippy))return{};var r=sk(e.popper),n=r.box,i=r.content,s=e.props.animateFill?nJt():null;return{onCreate:function(){s&&(n.insertBefore(s,n.firstElementChild),n.setAttribute("data-animatefill",""),n.style.overflow="hidden",e.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(s){var o=n.style.transitionDuration,a=Number(o.replace("ms",""));i.style.transitionDelay=Math.round(a/10)+"ms",s.style.transitionDuration=o,wT([s],"visible")}},onShow:function(){s&&(s.style.transitionDuration="0ms")},onHide:function(){s&&wT([s],"hidden")}}}};function nJt(){var e=Sg();return e.className=Pxe,wT([e],"hidden"),e}var FU={clientX:0,clientY:0},UA=[];function qxe(e){var t=e.clientX,r=e.clientY;FU={clientX:t,clientY:r}}function iJt(e){e.addEventListener("mousemove",qxe)}function sJt(e){e.removeEventListener("mousemove",qxe)}var oJt={name:"followCursor",defaultValue:!1,fn:function(e){var t=e.reference,r=Vxe(e.props.triggerTarget||t),n=!1,i=!1,s=!0,o=e.props;function a(){return e.props.followCursor==="initial"&&e.state.isVisible}function l(){r.addEventListener("mousemove",h)}function u(){r.removeEventListener("mousemove",h)}function c(){n=!0,e.setProps({getReferenceClientRect:null}),n=!1}function h(y){var g=y.target?t.contains(y.target):!0,b=e.props.followCursor,S=y.clientX,E=y.clientY,x=t.getBoundingClientRect(),w=S-x.left,T=E-x.top;(g||!e.props.interactive)&&e.setProps({getReferenceClientRect:function(){var I=t.getBoundingClientRect(),M=S,C=E;b==="initial"&&(M=I.left+w,C=I.top+T);var k=b==="horizontal"?I.top:C,N=b==="vertical"?I.right:M,F=b==="horizontal"?I.bottom:C,P=b==="vertical"?I.left:M;return{width:N-P,height:F-k,top:k,right:N,bottom:F,left:P}}})}function d(){e.props.followCursor&&(UA.push({instance:e,doc:r}),iJt(r))}function m(){UA=UA.filter(function(y){return y.instance!==e}),UA.filter(function(y){return y.doc===r}).length===0&&sJt(r)}return{onCreate:d,onDestroy:m,onBeforeUpdate:function(){o=e.props},onAfterUpdate:function(y,g){var b=g.followCursor;n||b!==void 0&&o.followCursor!==b&&(m(),b?(d(),e.state.isMounted&&!i&&!a()&&l()):(u(),c()))},onMount:function(){e.props.followCursor&&!i&&(s&&(h(FU),s=!1),a()||l())},onTrigger:function(y,g){xH(g)&&(FU={clientX:g.clientX,clientY:g.clientY}),i=g.type==="focus"},onHidden:function(){e.props.followCursor&&(c(),u(),s=!0)}}}};function aJt(e,t){var r;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((r=e.popperOptions)==null?void 0:r.modifiers)||[]).filter(function(n){var i=n.name;return i!==t.name}),[t])})}}var lJt={name:"inlinePositioning",defaultValue:!1,fn:function(e){var t=e.reference;function r(){return!!e.props.inlinePositioning}var n,i=-1,s=!1,o=[],a={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(h){var d=h.state;r()&&(o.indexOf(d.placement)!==-1&&(o=[]),n!==d.placement&&o.indexOf(d.placement)===-1&&(o.push(d.placement),e.setProps({getReferenceClientRect:function(){return l(d.placement)}})),n=d.placement)}};function l(h){return uJt(Bxe(h),t.getBoundingClientRect(),Hw(t.getClientRects()),i)}function u(h){s=!0,e.setProps(h),s=!1}function c(){s||u(aJt(e.props,a))}return{onCreate:c,onAfterUpdate:c,onTrigger:function(h,d){if(xH(d)){var m=Hw(e.reference.getClientRects()),y=m.find(function(b){return b.left-2<=d.clientX&&b.right+2>=d.clientX&&b.top-2<=d.clientY&&b.bottom+2>=d.clientY}),g=m.indexOf(y);i=g>-1?g:i}},onHidden:function(){i=-1}}}};function uJt(e,t,r,n){if(r.length<2||e===null)return t;if(r.length===2&&n>=0&&r[0].left>r[1].right)return r[n]||t;switch(e){case"top":case"bottom":{var i=r[0],s=r[r.length-1],o=e==="top",a=i.top,l=s.bottom,u=o?i.left:s.left,c=o?i.right:s.right,h=c-u,d=l-a;return{top:a,bottom:l,left:u,right:c,width:h,height:d}}case"left":case"right":{var m=Math.min.apply(Math,r.map(function(I){return I.left})),y=Math.max.apply(Math,r.map(function(I){return I.right})),g=r.filter(function(I){return e==="left"?I.left===m:I.right===y}),b=g[0].top,S=g[g.length-1].bottom,E=m,x=y,w=x-E,T=S-b;return{top:b,bottom:S,left:E,right:x,width:w,height:T}}default:return t}}var cJt={name:"sticky",defaultValue:!1,fn:function(e){var t=e.reference,r=e.popper;function n(){return e.popperInstance?e.popperInstance.state.elements.reference:t}function i(l){return e.props.sticky===!0||e.props.sticky===l}var s=null,o=null;function a(){var l=i("reference")?n().getBoundingClientRect():null,u=i("popper")?r.getBoundingClientRect():null;(l&&Cne(s,l)||u&&Cne(o,u))&&e.popperInstance&&e.popperInstance.update(),s=l,o=u,e.state.isMounted&&requestAnimationFrame(a)}return{onMount:function(){e.props.sticky&&a()}}}};function Cne(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}Rt.setDefaultProps({render:$xe}),Rt.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function SH(e,t={},r={mount:!0,appName:"Tippy"}){r=Object.assign({mount:!0,appName:"Tippy"},r);const n=rs(),i=Le(),s=Le({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1}),o=j3();let a=null;const l=()=>a||(a=document.createDocumentFragment(),a),u=M=>{let C,k=wr(M)?M.value:M;return Rh(k)?(o.value||(o.value=Jg({name:r.appName,setup:()=>()=>wr(M)?M.value:M}),n&&Object.assign(o.value._context,n.appContext),o.value.mount(l())),C=()=>l()):typeof k=="object"?(o.value||(o.value=Jg({name:r.appName,setup:()=>()=>Vl(wr(M)?M.value:M)}),n&&Object.assign(o.value._context,n.appContext),o.value.mount(l())),C=()=>l()):C=k,C},c=M=>{let C={};return wr(M)?C=M.value||{}:Wl(M)?C={...M}:C={...M},C.content&&(C.content=u(C.content)),C.triggerTarget&&(C.triggerTarget=wr(C.triggerTarget)?C.triggerTarget.value:C.triggerTarget),(!C.plugins||!Array.isArray(C.plugins))&&(C.plugins=[]),C.plugins=C.plugins.filter(k=>k.name!=="vueTippyReactiveState"),C.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){s.value.isEnabled=!0},onMount(){s.value.isMounted=!0},onShow(){s.value.isMounted=!0,s.value.isVisible=!0},onShown(){s.value.isShown=!0},onHide(){s.value.isMounted=!1,s.value.isVisible=!1},onHidden(){s.value.isShown=!1},onUnmounted(){s.value.isMounted=!1},onDestroy(){s.value.isDestroyed=!0}})}),C},h=()=>{i.value&&i.value.setProps(c(t))},d=()=>{!i.value||!t.content||i.value.setContent(u(t.content))},m=M=>{var C;(C=i.value)===null||C===void 0||C.setContent(u(M))},y=M=>{var C;(C=i.value)===null||C===void 0||C.setProps(c(M))},g=()=>{var M;i.value&&(i.value.destroy(),i.value=void 0),a=null,(M=o.value)===null||M===void 0||M.unmount(),o.value=void 0},b=()=>{var M;(M=i.value)===null||M===void 0||M.show()},S=()=>{var M;(M=i.value)===null||M===void 0||M.hide()},E=()=>{var M;(M=i.value)===null||M===void 0||M.disable(),s.value.isEnabled=!1},x=()=>{var M;(M=i.value)===null||M===void 0||M.enable(),s.value.isEnabled=!0},w=()=>{var M;(M=i.value)===null||M===void 0||M.unmount()},T=()=>{if(!e)return;let M=wr(e)?e.value:e;typeof M=="function"&&(M=M()),M&&(i.value=Rt(M,c(t)),M.$tippy=I)},I={tippy:i,refresh:h,refreshContent:d,setContent:m,setProps:y,destroy:g,hide:S,show:b,disable:E,enable:x,unmount:w,mount:T,state:s};return r.mount&&(n?n.isMounted?T():qs(T):T()),n&&U_(()=>{g()}),wr(t)||Wl(t)?_s(t,h,{immediate:!1}):wr(t.content)&&_s(t.content,d,{immediate:!1}),I}function hJt(e,t){const r=Le();return qs(()=>{const n=(Array.isArray(e)?e.map(i=>i.value):typeof e=="function"?e():e.value).map(i=>i instanceof Element?i._tippy:i).filter(Boolean);r.value=tJt(n,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:r}}function pJt(e){return typeof e=="function"?e():Tt(e)}function dJt(e){var t,r;const n=pJt(e);return(r=(t=n)===null||t===void 0?void 0:t.$el)!==null&&r!==void 0?r:n}const fJt=mr({props:{to:{type:[String,Function]},tag:{type:[String,Object],default:"span"},contentTag:{type:[String,Object],default:"span"},contentClass:{type:String,default:null},appendTo:{default:()=>Rt.defaultProps.appendTo},aria:{default:()=>Rt.defaultProps.aria},delay:{default:()=>Rt.defaultProps.delay},duration:{default:()=>Rt.defaultProps.duration},getReferenceClientRect:{default:()=>Rt.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>Rt.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>Rt.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>Rt.defaultProps.interactive},interactiveBorder:{default:()=>Rt.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>Rt.defaultProps.interactiveDebounce},moveTransition:{default:()=>Rt.defaultProps.moveTransition},offset:{default:()=>Rt.defaultProps.offset},onAfterUpdate:{default:()=>Rt.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>Rt.defaultProps.onBeforeUpdate},onCreate:{default:()=>Rt.defaultProps.onCreate},onDestroy:{default:()=>Rt.defaultProps.onDestroy},onHidden:{default:()=>Rt.defaultProps.onHidden},onHide:{default:()=>Rt.defaultProps.onHide},onMount:{default:()=>Rt.defaultProps.onMount},onShow:{default:()=>Rt.defaultProps.onShow},onShown:{default:()=>Rt.defaultProps.onShown},onTrigger:{default:()=>Rt.defaultProps.onTrigger},onUntrigger:{default:()=>Rt.defaultProps.onUntrigger},onClickOutside:{default:()=>Rt.defaultProps.onClickOutside},placement:{default:()=>Rt.defaultProps.placement},plugins:{default:()=>Rt.defaultProps.plugins},popperOptions:{default:()=>Rt.defaultProps.popperOptions},render:{default:()=>Rt.defaultProps.render},showOnCreate:{type:Boolean,default:()=>Rt.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>Rt.defaultProps.touch},trigger:{default:()=>Rt.defaultProps.trigger},triggerTarget:{default:()=>Rt.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>Rt.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>Rt.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>Rt.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>Rt.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>Rt.defaultProps.allowHTML},animation:{default:()=>Rt.defaultProps.animation},arrow:{default:()=>Rt.defaultProps.arrow},content:{default:()=>Rt.defaultProps.content},inertia:{default:()=>Rt.defaultProps.inertia},maxWidth:{default:()=>Rt.defaultProps.maxWidth},role:{default:()=>Rt.defaultProps.role},theme:{default:()=>Rt.defaultProps.theme},zIndex:{default:()=>Rt.defaultProps.zIndex}},emits:["state"],setup(e,{slots:t,emit:r,expose:n}){const i=Le(),s=Le(),o=Le(),a=Le(!1),l=()=>{let m={...e};for(const y of["to","tag","contentTag","contentClass"])m.hasOwnProperty(y)&&delete m[y];return m};let u=()=>dJt(i);e.to&&(typeof Element<"u"&&e.to instanceof Element?u=()=>e.to:e.to==="parent"?u=()=>{let m=i.value;return m||(m=i.value=s.value.parentElement),m}:(typeof e.to=="string"||e.to instanceof String)&&(u=()=>document.querySelector(e.to)));const c=SH(u,l());let h=t.content;!h&&e.to==="parent"&&(h=t.default),qs(()=>{a.value=!0,xc(()=>{h&&c.setContent(()=>o.value)})}),_s(c.state,()=>{r("state",Tt(c.state))},{immediate:!0,deep:!0}),_s(()=>e,()=>{c.setProps(l()),h&&c.setContent(()=>o.value)},{deep:!0});let d=Ts({elem:i,contentElem:o,mounted:a,...c});return n(d),()=>{const m=(e.contentTag,e.contentTag),y=h?Vl(m,{ref:o,style:{display:a.value?"inherit":"none"},class:e.contentClass},h(d)):null;if(e.to==="parent"){const S=[];if(!i.value){const E=Vl("span",{ref:s,"data-v-tippy":"",style:{display:"none"}});S.push(E)}return y&&S.push(y),S}const g=t.default?t.default(d):[];if(!e.tag){const S=Vl(g[0],{ref:i,"data-v-tippy":""});return y?[S,y]:S}const b=(e.tag,e.tag);return Vl(b,{ref:i,"data-v-tippy":""},y?[g,y]:g)}}}),mJt=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let jU={};Object.keys(Rt.defaultProps).forEach(e=>{mJt.includes(e)?jU[e]={type:Boolean,default:function(){return Rt.defaultProps[e]}}:jU[e]={default:function(){return Rt.defaultProps[e]}}});const yJt=mr({props:jU,setup(e){const t=Le([]),{singleton:r}=hJt(t,e);return{instances:t,singleton:r}},mounted(){var e;const t=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(t).map(r=>r._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return Vl(()=>e)}}),gJt={mounted(e,t,r){const n=typeof t.value=="string"?{content:t.value}:t.value||{},i=Object.keys(t.modifiers||{}),s=i.find(a=>a!=="arrow"),o=i.findIndex(a=>a==="arrow")!==-1;s&&(n.placement=n.placement||s),o&&(n.arrow=n.arrow!==void 0?n.arrow:!0),r.props&&r.props.onTippyShow&&(n.onShow=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),r.props&&r.props.onTippyShown&&(n.onShown=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),r.props&&r.props.onTippyHidden&&(n.onHidden=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),r.props&&r.props.onTippyHide&&(n.onHide=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),r.props&&r.props.onTippyMount&&(n.onMount=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!n.content&&(n.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!n.content&&(n.content=e.getAttribute("content")),SH(e,n)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const r=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(r||{}):e._tippy&&e._tippy.setProps(r||{})}},vJt={install(e,t={}){Rt.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",gJt),e.component(t.component||"tippy",fJt),e.component(t.componentSingleton||"tippy-singleton",yJt)}},Hxe=Rt.setDefaultProps;Hxe({ignoreAttributes:!0,plugins:[cJt,lJt,oJt,rJt]});const bJt=mr({name:"App",components:{Shell:AWt},setup(){const e=rs();qs(()=>{new uxe().observe(e?.proxy?.$refs["app-size"]),Hxe({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:()=>document.fullscreenElement||document.body})})}}),wJt=["lang"],_Jt={class:"h-full",ref:"app-size"};function xJt(e,t,r,n,i,s){const o=di("shell");return qe(),pt("div",{class:"ramp-app ramp-styles animation-enabled",lang:e.$i18n.locale},[Ge("div",_Jt,[ar(o)],512)],8,wJt)}const SJt=Vh(bJt,[["render",xJt]]),lh="focus-list",R0="focus-item",EJt="focus-icon",TJt="focus-container",Xb=`[${lh}],[${TJt}]`,BA="truncate-text",VA="show-truncate",fb="focused",UU=`button,input,select,a,textarea,[contenteditable],[${lh}],[${EJt}],[tabIndex]`,IJt={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(lh,!0),new AJt(e,t.value)},updated(e){Wxe(e)}};function Wxe(e){e.querySelectorAll(UU).forEach(t=>{if(t.closest(Xb)===e||t.closest(Xb)===t&&t.parentElement.closest(Xb)===e)if(t.closest(`[${lh}],.${fb}`).classList.contains(fb))t.setAttribute("tabindex","0");else{t.setAttribute("tabindex","-1");return}})}class AJt{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(t,r){this.element=t,this.highlightedItem=this.element,this.isHorizontal=r==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const n=this;t.addEventListener("keydown",function(i){n.onKeydown(i)}),t.addEventListener("focus",function(){n.onFocus()}),t.addEventListener("blur",function(){n.onBlur()}),t.addEventListener("mousedown",function(){n.onMousedown()}),t.addEventListener("touchstart",function(){n.onTouchstart()}),document.addEventListener("click",function(i){t.contains(i.target)?n.onClick(i):n.defocusItem(n.highlightedItem)})}setTabIndex(t,r=this.element){r.querySelectorAll(UU).forEach(n=>{(t===-1||n.closest(Xb)===this.element||n.closest(Xb)===n&&n.parentElement.closest(Xb)===this.element||n.closest(`[${lh}],.${fb}`).classList.contains(fb))&&n.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(fb),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(R0)===VA&&t.querySelector(`[${BA}]`)?._tippy?.hide()}focusItem(t){t.classList.add(fb),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&!this.isTapped&&t._tippy.show(),t.getAttribute(R0)===VA&&t.querySelector(`[${BA}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,r=!1){if(this.defocusItem(this.highlightedItem),r)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const n=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[n-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const n=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[n+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const r=this,n=Array.prototype.filter.call(this.element.querySelectorAll(`[${R0}]`),i=>i.closest(`[${lh}]`)===r.element&&!!i.offsetParent);if(n.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(n,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(n);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(n,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(n);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break;case"Tab":this.highlightedItem!==this.element&&(this.highlightedItem.querySelectorAll(UU).length===0&&this.defocusItem(this.highlightedItem),t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus()))}}onClick(t){this.defocusItem(this.highlightedItem);let r=t.target;if(!r.hasAttribute(lh))for(;r.parentElement.closest(`[${lh}]`)!==this.element;)r=r.parentElement.closest(`[${lh}]`);this.highlightedItem=r.closest(`[${R0}]`)||r.closest(`[${lh}]`)||this.highlightedItem,r.hasAttribute(`${R0}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(R0)===VA&&this.highlightedItem.querySelector(`[${BA}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element?this.highlightedItem!==this.element&&this.focusItem(this.highlightedItem):this.setAriaActiveDescendant(this.highlightedItem),Wxe(this.element),this.highlightedItem&&this.highlightedItem!==this.element&&this.highlightedItem.setAttribute("tabindex","-1")}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(R0)===VA&&this.highlightedItem.querySelector(`[${BA}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const kne="focus-item",MJt={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",CJt()),t.value?e.setAttribute(kne,t.value):e.toggleAttribute(kne,!0)}};function CJt(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const EH="focus-container",Zxe="focus-list",kJt="focus-icon",dD=`[${Zxe}],[${EH}]`,Rne=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${Zxe}],[${EH}],[${kJt}],[tabIndex]`;let fD=[];const RJt={mounted(e){[...document.querySelectorAll(".inner-shell")].some(t=>t.contains(e))&&fD.push(new OJt(e))},beforeUnmount(e){fD=fD.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class OJt{element;constructor(t){this.element=t,this.element.toggleAttribute(EH,!0),this.element.tabIndex=0,setTimeout(()=>this.disableTabbing(),600);const r=this;this.element.addEventListener("keypress",function(n){r.onKeypress(n)}),this.element.addEventListener("click",function(){r.onClick()}),this.element.addEventListener("focusout",function(n){r.onFocusOut(n)}),this.element.addEventListener("focus",function(){r.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(r){t.onKeypress(r)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(r){t.onFocusOut(r)}),this.element.removeEventListener("focus",function(){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&this.enableTabbing().focus()}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(Rne),()=>!0).forEach(t=>{t.tabIndex=-1})}enableTabbing(){let t;return Array.prototype.map.call(this.element.querySelectorAll(Rne),r=>{(r.closest(dD)===this.element||r.closest(dD)===r&&r.parentElement.closest(dD)===this.element)&&r.offsetParent&&(r.tabIndex=0,t===void 0&&(t=r))}),t}}const NJt="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mgensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",LJt="121342632165322333335356545565555243543542246363257457433_355524444661154543332344423364211133222221212112_52232222232212222223222241112222224322321222",Ww=(e,t)=>{for(const r in t)e[r]=t[r];return e},BU="numeric",VU="ascii",GU="alpha",J4="asciinumeric",GA="alphanumeric",zU="domain",Jxe="emoji",PJt="scheme",DJt="slashscheme",One="whitespace";function FJt(e,t){return e in t||(t[e]=[]),t[e]}function Qy(e,t,r){t[BU]&&(t[J4]=!0,t[GA]=!0),t[VU]&&(t[J4]=!0,t[GU]=!0),t[J4]&&(t[GA]=!0),t[GU]&&(t[GA]=!0),t[GA]&&(t[zU]=!0),t[Jxe]&&(t[zU]=!0);for(const n in t){const i=FJt(n,r);i.indexOf(e)<0&&i.push(e)}}function jJt(e,t){const r={};for(const n in t)t[n].indexOf(e)>=0&&(r[n]=!0);return r}function ol(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}ol.groups={},ol.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let n=0;n<t.jr.length;n++){const i=t.jr[n][0],s=t.jr[n][1];if(s&&i.test(e))return s}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,r,n){for(let i=0;i<e.length;i++)this.tt(e[i],t,r,n)},tr(e,t,r,n){n=n||ol.groups;let i;return t&&t.j?i=t:(i=new ol(t),r&&n&&Qy(t,r,n)),this.jr.push([e,i]),i},ts(e,t,r,n){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,r,n)},tt(e,t,r,n){n=n||ol.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,a=i.go(e);if(a?(o=new ol,Ww(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new ol,s){if(n)if(o.t&&typeof o.t=="string"){const l=Ww(jJt(o.t,n),r);Qy(s,l,n)}else r&&Qy(s,r,n);o.t=s}return i.j[e]=o,o}};const Lt=(e,t,r,n,i)=>e.ta(t,r,n,i),_l=(e,t,r,n,i)=>e.tr(t,r,n,i),Nne=(e,t,r,n,i)=>e.ts(t,r,n,i),Qe=(e,t,r,n,i)=>e.tt(t,r,n,i),Cp="WORD",$U="UWORD",_T="LOCALHOST",qU="TLD",HU="UTLD",Y4="SCHEME",Xv="SLASH_SCHEME",ok="NUM",Yxe="WS",TH="NL",mb="OPENBRACE",oE="OPENBRACKET",aE="OPENANGLEBRACKET",lE="OPENPAREN",By="CLOSEBRACE",yb="CLOSEBRACKET",gb="CLOSEANGLEBRACKET",Vy="CLOSEPAREN",ak="AMPERSAND",lk="APOSTROPHE",uk="ASTERISK",Qf="AT",ck="BACKSLASH",hk="BACKTICK",pk="CARET",im="COLON",IH="COMMA",dk="DOLLAR",Kc="DOT",fk="EQUALS",AH="EXCLAMATION",eh="HYPHEN",mk="PERCENT",yk="PIPE",gk="PLUS",vk="POUND",bk="QUERY",MH="QUOTE",CH="SEMI",Fp="SLASH",uE="TILDE",wk="UNDERSCORE",Xxe="EMOJI",_k="SYM";var Qxe=Object.freeze({__proto__:null,WORD:Cp,UWORD:$U,LOCALHOST:_T,TLD:qU,UTLD:HU,SCHEME:Y4,SLASH_SCHEME:Xv,NUM:ok,WS:Yxe,NL:TH,OPENBRACE:mb,OPENBRACKET:oE,OPENANGLEBRACKET:aE,OPENPAREN:lE,CLOSEBRACE:By,CLOSEBRACKET:yb,CLOSEANGLEBRACKET:gb,CLOSEPAREN:Vy,AMPERSAND:ak,APOSTROPHE:lk,ASTERISK:uk,AT:Qf,BACKSLASH:ck,BACKTICK:hk,CARET:pk,COLON:im,COMMA:IH,DOLLAR:dk,DOT:Kc,EQUALS:fk,EXCLAMATION:AH,HYPHEN:eh,PERCENT:mk,PIPE:yk,PLUS:gk,POUND:vk,QUERY:bk,QUOTE:MH,SEMI:CH,SLASH:Fp,TILDE:uE,UNDERSCORE:wk,EMOJI:Xxe,SYM:_k});const Z1=/[a-z]/,mD=/\p{L}/u,yD=/\p{Emoji}/u,gD=/\d/,Lne=/\s/,Pne=`
`,UJt="",BJt="";let zA=null,$A=null;function VJt(e){e===void 0&&(e=[]);const t={};ol.groups=t;const r=new ol;zA==null&&(zA=Dne(NJt)),$A==null&&($A=Dne(LJt)),Qe(r,"'",lk),Qe(r,"{",mb),Qe(r,"[",oE),Qe(r,"<",aE),Qe(r,"(",lE),Qe(r,"}",By),Qe(r,"]",yb),Qe(r,">",gb),Qe(r,")",Vy),Qe(r,"&",ak),Qe(r,"*",uk),Qe(r,"@",Qf),Qe(r,"`",hk),Qe(r,"^",pk),Qe(r,":",im),Qe(r,",",IH),Qe(r,"$",dk),Qe(r,".",Kc),Qe(r,"=",fk),Qe(r,"!",AH),Qe(r,"-",eh),Qe(r,"%",mk),Qe(r,"|",yk),Qe(r,"+",gk),Qe(r,"#",vk),Qe(r,"?",bk),Qe(r,'"',MH),Qe(r,"/",Fp),Qe(r,";",CH),Qe(r,"~",uE),Qe(r,"_",wk),Qe(r,"\\",ck);const n=_l(r,gD,ok,{[BU]:!0});_l(n,gD,n);const i=_l(r,Z1,Cp,{[VU]:!0});_l(i,Z1,i);const s=_l(r,mD,$U,{[GU]:!0});_l(s,Z1),_l(s,mD,s);const o=_l(r,Lne,Yxe,{[One]:!0});Qe(r,Pne,TH,{[One]:!0}),Qe(o,Pne),_l(o,Lne,o);const a=_l(r,yD,Xxe,{[Jxe]:!0});_l(a,yD,a),Qe(a,UJt,a);const l=Qe(a,BJt);_l(l,yD,a);const u=[[Z1,i]],c=[[Z1,null],[mD,s]];for(let h=0;h<zA.length;h++)nf(r,zA[h],qU,Cp,u);for(let h=0;h<$A.length;h++)nf(r,$A[h],HU,$U,c);Qy(qU,{tld:!0,ascii:!0},t),Qy(HU,{utld:!0,alpha:!0},t),nf(r,"file",Y4,Cp,u),nf(r,"mailto",Y4,Cp,u),nf(r,"http",Xv,Cp,u),nf(r,"https",Xv,Cp,u),nf(r,"ftp",Xv,Cp,u),nf(r,"ftps",Xv,Cp,u),Qy(Y4,{scheme:!0,ascii:!0},t),Qy(Xv,{slashscheme:!0,ascii:!0},t),e=e.sort((h,d)=>h[0]>d[0]?1:-1);for(let h=0;h<e.length;h++){const d=e[h][0],m=e[h][1]?{[PJt]:!0}:{[DJt]:!0};d.indexOf("-")>=0?m[zU]=!0:Z1.test(d)?gD.test(d)?m[J4]=!0:m[VU]=!0:m[BU]=!0,Nne(r,d,d,m)}return Nne(r,"localhost",_T,{ascii:!0}),r.jd=new ol(_k),{start:r,tokens:Ww({groups:t},Qxe)}}function GJt(e,t){const r=zJt(t.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,i=[];let s=0,o=0;for(;o<n;){let a=e,l=null,u=0,c=null,h=-1,d=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(h=0,d=0,c=a):h>=0&&(h+=r[o].length,d++),u+=r[o].length,s+=r[o].length,o++;s-=h,o-=d,u-=h,i.push({t:c.t,v:t.slice(s-u,s),s:s-u,e:s})}return i}function zJt(e){const t=[],r=e.length;let n=0;for(;n<r;){let i=e.charCodeAt(n),s,o=i<55296||i>56319||n+1===r||(s=e.charCodeAt(n+1))<56320||s>57343?e[n]:e.slice(n,n+2);t.push(o),n+=o.length}return t}function nf(e,t,r,n,i){let s;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?s=e.j[l]:(s=new ol(n),s.jr=i.slice(),e.j[l]=s),e=s}return s=new ol(r),s.jr=i.slice(),e.j[t[o-1]]=s,s}function Dne(e){const t=[],r=[];let n=0,i="0123456789";for(;n<e.length;){let s=0;for(;i.indexOf(e[n+s])>=0;)s++;if(s>0){t.push(r.join(""));let o=parseInt(e.substring(n,n+s),10);for(;o>0;o--)r.pop();n+=s}else e[n]==="_"?(t.push(r.join("")),n++):(r.push(e[n]),n++)}return t}const xT={defaultProtocol:"http",events:null,format:Fne,formatHref:Fne,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function kH(e,t){t===void 0&&(t=null);let r=Ww({},xT);e&&(r=Ww(r,e instanceof kH?e.o:e));const n=r.ignoreTags,i=[];for(let s=0;s<n.length;s++)i.push(n[s].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=i}kH.prototype={o:xT,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const n=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=r.t in i?i[r.t]:xT[e],typeof i=="function"&&n&&(i=i(t,r))):typeof i=="function"&&n&&(i=i(t,r.t,r)),i)},getObj(e,t,r){let n=this.o[e];return typeof n=="function"&&t!=null&&(n=n(t,r.t,r)),n},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Fne(e){return e}function Kxe(e,t){this.t="token",this.v=e,this.tk=t}Kxe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),n=e.get("format",t,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=xT.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toFormattedHref(e),n=e.get("tagName",r,t),i=this.toFormattedString(e),s={},o=e.get("className",r,t),a=e.get("target",r,t),l=e.get("rel",r,t),u=e.getObj("attributes",r,t),c=e.getObj("events",r,t);return s.href=r,o&&(s.class=o),a&&(s.target=a),l&&(s.rel=l),u&&Ww(s,u),{tagName:n,attributes:s,content:i,eventListeners:c}}};function pN(e,t){class r extends Kxe{constructor(i,s){super(i,s),this.t=e}}for(const n in t)r.prototype[n]=t[n];return r.t=e,r}const jne=pN("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Une=pN("text"),$Jt=pN("nl"),O0=pN("url",{isLink:!0,toHref(e){return e===void 0&&(e=xT.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==_T&&e[1].t===im}}),ls=e=>new ol(e);function qJt(e){let{groups:t}=e;const r=t.domain.concat([ak,uk,Qf,ck,hk,pk,dk,fk,eh,ok,mk,yk,gk,vk,Fp,_k,uE,wk]),n=[lk,gb,By,yb,Vy,im,IH,Kc,AH,aE,mb,oE,lE,bk,MH,CH],i=[ak,lk,uk,ck,hk,pk,By,dk,fk,eh,ok,mb,mk,yk,gk,vk,bk,Fp,_k,uE,wk],s=ls(),o=Qe(s,uE);Lt(o,i,o),Lt(o,t.domain,o);const a=ls(),l=ls(),u=ls();Lt(s,t.domain,a),Lt(s,t.scheme,l),Lt(s,t.slashscheme,u),Lt(a,i,o),Lt(a,t.domain,a);const c=Qe(a,Qf);Qe(o,Qf,c),Qe(l,Qf,c),Qe(u,Qf,c);const h=Qe(o,Kc);Lt(h,i,o),Lt(h,t.domain,o);const d=ls();Lt(c,t.domain,d),Lt(d,t.domain,d);const m=Qe(d,Kc);Lt(m,t.domain,d);const y=ls(jne);Lt(m,t.tld,y),Lt(m,t.utld,y),Qe(c,_T,y);const g=Qe(d,eh);Lt(g,t.domain,d),Lt(y,t.domain,d),Qe(y,Kc,m),Qe(y,eh,g);const b=Qe(y,im);Lt(b,t.numeric,jne);const S=Qe(a,eh),E=Qe(a,Kc);Lt(S,t.domain,a),Lt(E,i,o),Lt(E,t.domain,a);const x=ls(O0);Lt(E,t.tld,x),Lt(E,t.utld,x),Lt(x,t.domain,a),Lt(x,i,o),Qe(x,Kc,E),Qe(x,eh,S),Qe(x,Qf,c);const w=Qe(x,im),T=ls(O0);Lt(w,t.numeric,T);const I=ls(O0),M=ls();Lt(I,r,I),Lt(I,n,M),Lt(M,r,I),Lt(M,n,M),Qe(x,Fp,I),Qe(T,Fp,I);const C=Qe(l,im),k=Qe(u,im),N=Qe(k,Fp);Qe(N,Fp,C),Lt(l,t.domain,a),Qe(l,Kc,E),Qe(l,eh,S),Lt(u,t.domain,a),Qe(u,Kc,E),Qe(u,eh,S),Lt(C,t.domain,I),Qe(C,Fp,I);const F=Qe(I,mb),P=Qe(I,oE),B=Qe(I,aE),O=Qe(I,lE);Qe(M,mb,F),Qe(M,oE,P),Qe(M,aE,B),Qe(M,lE,O),Qe(F,By,I),Qe(P,yb,I),Qe(B,gb,I),Qe(O,Vy,I),Qe(F,By,I);const v=ls(O0),A=ls(O0),R=ls(O0),U=ls(O0);Lt(F,r,v),Lt(P,r,A),Lt(B,r,R),Lt(O,r,U);const q=ls(),Q=ls(),ee=ls(),Y=ls();return Lt(F,n),Lt(P,n),Lt(B,n),Lt(O,n),Lt(v,r,v),Lt(A,r,A),Lt(R,r,R),Lt(U,r,U),Lt(v,n,v),Lt(A,n,A),Lt(R,n,R),Lt(U,n,U),Lt(q,r,q),Lt(Q,r,A),Lt(ee,r,R),Lt(Y,r,U),Lt(q,n,q),Lt(Q,n,Q),Lt(ee,n,ee),Lt(Y,n,Y),Qe(A,yb,I),Qe(R,gb,I),Qe(U,Vy,I),Qe(v,By,I),Qe(Q,yb,I),Qe(ee,gb,I),Qe(Y,Vy,I),Qe(q,Vy,I),Qe(s,_T,x),Qe(s,TH,$Jt),{start:s,tokens:Qxe}}function HJt(e,t,r){let n=r.length,i=0,s=[],o=[];for(;i<n;){let a=e,l=null,u=null,c=0,h=null,d=-1;for(;i<n&&!(l=a.go(r[i].t));)o.push(r[i++]);for(;i<n&&(u=l||a.go(r[i].t));)l=null,a=u,a.accepts()?(d=0,h=a):d>=0&&d++,i++,c++;if(d<0)i-=c,i<n&&(o.push(r[i]),i++);else{o.length>0&&(s.push(vD(Une,t,o)),o=[]),i-=d,c-=d;const m=h.t,y=r.slice(i-c,i);s.push(vD(m,t,y))}}return o.length>0&&s.push(vD(Une,t,o)),s}function vD(e,t,r){const n=r[0].s,i=r[r.length-1].e,s=t.slice(n,i);return new e(s,r)}const Vo={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function WJt(){Vo.scanner=VJt(Vo.customSchemes);for(let e=0;e<Vo.tokenQueue.length;e++)Vo.tokenQueue[e][1]({scanner:Vo.scanner});Vo.parser=qJt(Vo.scanner.tokens);for(let e=0;e<Vo.pluginQueue.length;e++)Vo.pluginQueue[e][1]({scanner:Vo.scanner,parser:Vo.parser});Vo.initialized=!0}function ZJt(e){return Vo.initialized||WJt(),HJt(Vo.parser.start,e,GJt(Vo.scanner.start,e))}var JJt={amp:"&",gt:">",lt:"<",nbsp:"",quot:'"'},YJt=/^#[xX]([A-Fa-f0-9]+)$/,XJt=/^#([0-9]+)$/,QJt=/^([A-Za-z0-9]+)$/,KJt=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var r=t.match(YJt);if(r)return String.fromCharCode(parseInt(r[1],16));if(r=t.match(XJt),r)return String.fromCharCode(parseInt(r[1],10));if(r=t.match(QJt),r)return this.named[r[1]]||"&"+r[1]+";"}},e}(),eYt=/[\t\n\f ]/,tYt=/[A-Za-z]/,rYt=/\r\n?/g;function Qs(e){return eYt.test(e)}function Bne(e){return tYt.test(e)}function nYt(e){return e.replace(rYt,`
`)}var iYt=function(){function e(t,r,n){n===void 0&&(n="precompile"),this.delegate=t,this.entityParser=r,this.mode=n,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var i=this.peek();if(i==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&i===`
`){var s=this.tagNameBuffer.toLowerCase();(s==="pre"||s==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var i=this.peek(),s=this.tagNameBuffer;i==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):i==="&"&&s!=="script"&&s!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(i))},tagOpen:function(){var i=this.consume();i==="!"?this.transitionTo("markupDeclarationOpen"):i==="/"?this.transitionTo("endTagOpen"):(i==="@"||i===":"||Bne(i))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(i))},markupDeclarationOpen:function(){var i=this.consume();if(i==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var s=i.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();s==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var i=this.consume();Qs(i)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var i=this.consume();Qs(i)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(i.toLowerCase()))},doctypeName:function(){var i=this.consume();Qs(i)?this.transitionTo("afterDoctypeName"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(i.toLowerCase())},afterDoctypeName:function(){var i=this.consume();if(!Qs(i))if(i===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var s=i.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),o=s.toUpperCase()==="PUBLIC",a=s.toUpperCase()==="SYSTEM";(o||a)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),o?this.transitionTo("afterDoctypePublicKeyword"):a&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var i=this.peek();Qs(i)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):i==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):i==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):i===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var i=this.consume();i==='"'?this.transitionTo("afterDoctypePublicIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(i)},doctypePublicIdentifierSingleQuoted:function(){var i=this.consume();i==="'"?this.transitionTo("afterDoctypePublicIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(i)},afterDoctypePublicIdentifier:function(){var i=this.consume();Qs(i)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):i==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):i==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var i=this.consume();Qs(i)||(i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):i==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):i==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var i=this.consume();i==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(i)},doctypeSystemIdentifierSingleQuoted:function(){var i=this.consume();i==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(i)},afterDoctypeSystemIdentifier:function(){var i=this.consume();Qs(i)||i===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var i=this.consume();i==="-"?this.transitionTo("commentStartDash"):i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(i),this.transitionTo("comment"))},commentStartDash:function(){var i=this.consume();i==="-"?this.transitionTo("commentEnd"):i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var i=this.consume();i==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(i)},commentEndDash:function(){var i=this.consume();i==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+i),this.transitionTo("comment"))},commentEnd:function(){var i=this.consume();i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+i),this.transitionTo("comment"))},tagName:function(){var i=this.consume();Qs(i)?this.transitionTo("beforeAttributeName"):i==="/"?this.transitionTo("selfClosingStartTag"):i===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(i)},endTagName:function(){var i=this.consume();Qs(i)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):i==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):i===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(i)},beforeAttributeName:function(){var i=this.peek();if(Qs(i)){this.consume();return}else i==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):i===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):i==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(i)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var i=this.peek();Qs(i)?(this.transitionTo("afterAttributeName"),this.consume()):i==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):i==='"'||i==="'"||i==="<"?(this.delegate.reportSyntaxError(i+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(i)):(this.consume(),this.delegate.appendToAttributeName(i))},afterAttributeName:function(){var i=this.peek();if(Qs(i)){this.consume();return}else i==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(i))},beforeAttributeValue:function(){var i=this.peek();Qs(i)?this.consume():i==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):i==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(i))},attributeValueDoubleQuoted:function(){var i=this.consume();i==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):i==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(i)},attributeValueSingleQuoted:function(){var i=this.consume();i==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):i==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(i)},attributeValueUnquoted:function(){var i=this.peek();Qs(i)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):i==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):i===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(i))},afterAttributeValueQuoted:function(){var i=this.peek();Qs(i)?(this.consume(),this.transitionTo("beforeAttributeName")):i==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):i===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var i=this.peek();i===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var i=this.consume();(i==="@"||i===":"||Bne(i))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(i))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=nYt(t);this.index<this.input.length;){var r=this.states[this.state];if(r!==void 0)r.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var r=this.input.slice(this.index,t),n=this.entityParser.parse(r);if(n){for(var i=r.length;i;)this.consume(),i--;return this.consume(),n}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),sYt=function(){function e(t,r){r===void 0&&(r={}),this.options=r,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new iYt(this,t,r.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var r=0;r<arguments.length;r++)if(t.type===arguments[r])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var r=this.current("Doctype");r.publicIdentifier===void 0?r.publicIdentifier=t:r.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var r=this.current("Doctype");r.systemIdentifier===void 0?r.systemIdentifier=t:r.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function oYt(e,t){var r=new sYt(new KJt(JJt),t);return r.tokenize(e)}const eSe="LinkifyResult",xk="StartTag",tSe="EndTag",WU="Chars",aYt="Comment",lYt="Doctype";function rSe(e,t){t===void 0&&(t={});const r=oYt(e),n=[],i=[],s=new kH(t,hYt);for(let o=0;o<r.length;o++){const a=r[o];if(a.type===xk){n.push(a);const l=a.tagName.toUpperCase();if(!(l==="A"||s.ignoreTags.indexOf(l)>=0))continue;let u=n.length;cYt(l,r,++o,n),o+=n.length-u-1}else if(a.type!==WU)n.push(a);else{const l=uYt(a.chars,s);n.push.apply(n,l)}}for(let o=0;o<n.length;o++){const a=n[o];switch(a.type){case eSe:i.push(a.rendered);break;case xk:{let l="<"+a.tagName;a.attributes.length>0&&(l+=" "+dYt(a.attributes).join(" ")),a.selfClosing&&(l+=" /"),l+=">",i.push(l);break}case tSe:i.push(`</${a.tagName}>`);break;case WU:i.push(ZU(a.chars));break;case aYt:i.push(`<!--${ZU(a.chars)}-->`);break;case lYt:{let l=`<!DOCTYPE ${a.name}`;a.publicIdentifier&&(l+=` PUBLIC "${a.publicIdentifier}"`),a.systemIdentifier&&(l+=` "${a.systemIdentifier}"`),l+=">",i.push(l);break}}}return i.join("")}function uYt(e,t){const r=ZJt(e),n=[];for(let i=0;i<r.length;i++){const s=r[i];s.t==="nl"&&t.get("nl2br")?n.push({type:xk,tagName:"br",attributes:[],selfClosing:!0}):!s.isLink||!t.check(s)?n.push({type:WU,chars:s.toString()}):n.push({type:eSe,rendered:t.render(s)})}return n}function cYt(e,t,r,n){let i=1;for(;r<t.length&&i>0;){let s=t[r];s.type===xk&&s.tagName.toUpperCase()===e?i++:s.type===tSe&&s.tagName.toUpperCase()===e&&i--,n.push(s),r++}return n}function hYt(e){let{tagName:t,attributes:r,content:n}=e;return`<${t} ${pYt(r)}>${ZU(n)}</${t}>`}function ZU(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nSe(e){return e.replace(/"/g,"&quot;")}function pYt(e){const t=[];for(const r in e){const n=e[r]+"";t.push(`${r}="${nSe(n)}"`)}return t.join(" ")}function dYt(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r][0],i=e[r][1]+"";t.push(`${n}="${nSe(i)}"`)}return t}const fYt="truncate-text",mYt="truncate-trigger",yYt={beforeMount(e,t){!e.classList.contains("truncate")&&!t.value?.noTruncateClass&&e.classList.add("truncate"),e.toggleAttribute(fYt,!0)},mounted(e,t){let r;t.value&&t.value.externalTrigger&&(r=e.closest(`[${mYt}]`)),SH(e,{content:Vne(e.textContent),onShow:gYt,allowHTML:!0,placement:"bottom-start",maxWidth:320,triggerTarget:r,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(Vne(e.textContent)),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function gYt(e){if(!(e.reference.clientWidth<e.reference.scrollWidth||e.reference.clientHeight<e.reference.scrollHeight))return!1}function Vne(e){if(e===null)return"";let t=rSe(e,{target:"_blank",validate:{url:r=>/^https?:\/\//.test(r)}});return t=`<div style='word-break: break-word;'>${t}</div>`,t}const vYt=["content"],bYt={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden"},wYt={class:"flex-grow text-lg py-16 pl-8 min-w-0",tabIndex:"0"},_Yt={key:1},xYt={key:0,class:"flex"},SYt=["innerHTML"],EYt={key:2,class:"px-8 py-16 border-t border-gray-400 default-focus-style"},TYt=mr({__name:"panel-screen",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0},screenId:{type:String,required:!1}},setup(e,{expose:t}){const{t:r}=Cn(),n=$m(),i=pT(),s=Ki("iApi"),o=VC("el"),a=VC("contentEl"),l=Le();t({el:o});const u=e,c=cr(()=>s?.fixture.get("appbar")?i.temporary:[]),h=cr(()=>n.mobileView),d=cr(()=>n.reorderable),m=S=>S.scrollHeight>S.clientHeight,y=()=>!h.value&&!u.panel.teleport,g=S=>{u.panel.move(S),S==="left"&&xc(()=>{(o.value?.querySelector(".move-left")).focus()})},b=cr(()=>u.screenId?u.panel.screens[u.screenId][s?.$i18n.locale.value??"en"]:null);return qs(()=>{o.value?.addEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.addEventListener("keyup",S=>{S.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()}),l.value=new ResizeObserver(()=>{m(a.value)?a.value?.setAttribute("tabIndex","0"):a.value?.removeAttribute("tabIndex")}),l.value.observe(a.value)}),Sc(()=>{o.value?.removeEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.removeEventListener("keyup",S=>{S.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()}),l.value.disconnect()}),(S,E)=>{const x=di("back"),w=di("panel-options-menu"),T=di("left"),I=di("right"),M=di("pin"),C=di("expand"),k=di("minimize"),N=di("close"),F=qr("truncate"),P=qr("focus-item"),B=qr("tippy");return $r((qe(),pt("div",{class:"h-full flex flex-col items-stretch",content:`<div style='word-break: break-word;'>${Tt(r)(e.panel.alertName)+". "+Tt(r)("panels.access")}</div>`,ref_key:"el",ref:o},[e.header?(qe(),pt("header",bYt,[ar(x,{class:Jn(e.panel.teleport?"display-none":"block sm:display-none"),onClick:E[0]||(E[0]=O=>e.panel.close())},null,8,["class"]),$r((qe(),pt("h2",wYt,[S.$slots.header?Qu(S.$slots,"header",{key:0}):(qe(),pt("div",_Yt,on(Tt(r)(e.panel.alertName)),1))])),[[F]]),S.$slots.controls?(qe(),fn(w,{key:0},{default:xi(()=>[Qu(S.$slots,"controls")]),_:3})):En("",!0),Ge("div",{class:Jn(e.panel.teleport?"flex":"display-none sm:flex")},[e.panel.teleport?En("",!0):(qe(),pt("div",xYt,[d.value?(qe(),fn(T,{key:0,onClick:E[1]||(E[1]=O=>g("left")),active:!e.panel.isLeftMostPanel},null,8,["active"])):En("",!0),d.value?(qe(),fn(I,{key:1,onClick:E[2]||(E[2]=O=>g("right")),active:!e.panel.isRightMostPanel},null,8,["active"])):En("",!0),ar(M,{onClick:E[3]||(E[3]=O=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(qe(),fn(C,{key:2,onClick:E[4]||(E[4]=O=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):En("",!0)])),e.panel.button&&c.value?.includes(e.panel.id)?(qe(),fn(k,{key:1,onClick:E[5]||(E[5]=O=>e.panel.minimize())})):En("",!0),ar(N,{onClick:E[6]||(E[6]=O=>e.panel.close())})],2)])):En("",!0),e.content?(qe(),pt("div",{key:1,class:"p-8 flex-grow overflow-y-auto",ref_key:"contentEl",ref:a},[S.$slots.content?Qu(S.$slots,"content",{key:0}):b.value?(qe(),pt("div",{key:1,innerHTML:b.value.innerHTML},null,8,SYt)):En("",!0)],512)):En("",!0),e.footer?$r((qe(),pt("div",EYt,[Qu(S.$slots,"footer")])),[[P]]):En("",!0)],8,vYt)),[[B,{trigger:"manual",touch:!1,onShow:y,allowHTML:!0,maxWidth:e.panel.style["flex-basis"]??350,popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}}),IYt={class:"relative"},AYt=["content","aria-label"],MYt=["transform"],CYt=mr({__name:"pin",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",IYt,[$r((qe(),pt("button",{type:"button",class:Jn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:Tt(t)(e.active?"panels.controls.unpin":"panels.controls.pin"),"aria-label":Tt(t)(e.active?"panels.controls.unpin":"panels.controls.pin")},[(qe(),pt("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},n[0]||(n[0]=[Ge("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1)]),8,MYt))],10,AYt)),[[i,{placement:"bottom",hideOnClick:!1}]])])}}}),kYt={class:"relative"},RYt=["content","aria-label"],OYt=mr({__name:"close",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",kYt,[$r((qe(),pt("button",{type:"button",class:Jn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:Tt(t)("panels.controls.close"),"aria-label":Tt(t)("panels.controls.close")},n[0]||(n[0]=[Ge("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[Ge("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)]),10,RYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),NYt={class:"relative"},LYt=["content","aria-label"],PYt=mr({__name:"back",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",NYt,[$r((qe(),pt("button",{type:"button",class:Jn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:Tt(t)("panels.controls.back"),"aria-label":Tt(t)("panels.controls.back")},n[0]||(n[0]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[Ge("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1)]),10,LYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),DYt={class:"w-32 h-32"},FYt=["content"],jYt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},UYt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},BYt=mr({__name:"expand",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",DYt,[$r((qe(),pt("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:Tt(t)(`panels.controls.${e.active?"collapse":"expand"}`)},[e.active?(qe(),pt("svg",UYt,n[1]||(n[1]=[Ge("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ge("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ge("path",{d:"M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"},null,-1),Ge("path",{d:"M4 12h16v2H4z"},null,-1)]))):(qe(),pt("svg",jYt,n[0]||(n[0]=[Ge("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ge("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ge("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1)])))],8,FYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}}}),VYt={class:"relative"},GYt=["content","aria-label"],zYt=mr({__name:"minimize",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",VYt,[$r((qe(),pt("button",{type:"button",class:Jn(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:Tt(t)("panels.controls.minimize"),"aria-label":Tt(t)("panels.controls.minimize")},n[0]||(n[0]=[Ge("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Ge("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Ge("path",{d:"M6 19h12v2H6z"})],-1)]),10,GYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),$Yt={class:"relative"},qYt=["content","aria-label"],HYt=mr({__name:"right",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",$Yt,[$r((qe(),pt("button",{type:"button",class:Jn(["p-8",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:Tt(t)("panels.controls.moveRight"),"aria-label":Tt(t)("panels.controls.moveRight")},n[0]||(n[0]=[Ge("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Ge("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"})],-1)]),10,qYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),WYt={class:"relative"},ZYt=["content","aria-label"],JYt=mr({__name:"left",props:{active:Boolean},setup(e){const{t}=Cn();return(r,n)=>{const i=qr("tippy");return qe(),pt("div",WYt,[$r((qe(),pt("button",{type:"button",class:Jn(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:Tt(t)("panels.controls.moveLeft"),"aria-label":Tt(t)("panels.controls.moveLeft")},n[0]||(n[0]=[Ge("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Ge("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"})],-1)]),10,ZYt)),[[i,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),YYt=mr({__name:"panel-options-menu",setup(e){const{t}=Cn();return(r,n)=>(qe(),fn(fH,{class:"flex",tooltip:Tt(t)("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:xi(()=>n[0]||(n[0]=[Ge("div",{class:"p-6"},[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[Ge("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)])),default:xi(()=>[Qu(r.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"]))}}),XYt=Vh(YYt,[["__scopeId","data-v-51e22a4a"]]),QYt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},KYt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},eXt=mr({__name:"fullscreen-nav",setup(e){const{t}=Cn(),r=Ki("iApi"),n=()=>{r.toggleFullscreen()};return(i,s)=>{const o=di("mapnav-button");return qe(),fn(o,{onClickFunction:n,tooltip:Tt(t)("mapnav.fullscreen")},{default:xi(()=>[Tt(r).isFullscreen?(qe(),pt("svg",QYt,s[0]||(s[0]=[Ge("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ge("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)]))):(qe(),pt("svg",KYt,s[1]||(s[1]=[Ge("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ge("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])))]),_:1},8,["tooltip"])}}}),tXt=mr({__name:"geolocator-nav",setup(e){const{t}=Cn(),r=Ki("iApi");let n=Ts([]);const i=async()=>{if(n.length)s(n);else{const a=await o({maximumAge:1/0,timeout:5e3}).catch(l=>{l.code===GeolocationPositionError.PERMISSION_DENIED?r.notify.show(Fa.ERROR,t("mapnav.geolocator.error.permission")):r.notify.show(Fa.ERROR,t("mapnav.geolocator.error.internal"))});a&&(n=[a.coords.longitude,a.coords.latitude],s(n))}},s=a=>{let l=new Io("geolocation",a,Yt.latLongSR(),!0);r.geo.map.zoomMapTo(l)},o=a=>new Promise((l,u)=>navigator.geolocation.getCurrentPosition(l,u,a));return(a,l)=>{const u=di("mapnav-button");return qe(),fn(u,{onClickFunction:i,tooltip:Tt(t)("mapnav.geolocator")},{default:xi(()=>l[0]||(l[0]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Ge("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1)])),_:1},8,["tooltip"])}}}),rXt=mr({__name:"home-nav",setup(e){const{t}=Cn(),r=Ki("iApi"),n=()=>{const i=r.geo.map.getExtentSet();r.geo.map.zoomMapTo(i.fullExtent)};return(i,s)=>{const o=di("mapnav-button");return qe(),fn(o,{onClickFunction:n,tooltip:Tt(t)("mapnav.home")},{default:xi(()=>s[0]||(s[0]=[Ge("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Ge("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),Ge("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["tooltip"])}}}),nXt={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},iXt=["content","aria-label"],sXt=mr({__name:"button",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){return(t,r)=>{const n=qr("focus-item"),i=qr("tippy");return qe(),pt("div",nXt,[$r((qe(),pt("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:r[0]||(r[0]=s=>e.onClickFunction()),content:e.tooltip,"aria-label":typeof e.tooltip=="string"?e.tooltip:""},[Qu(t.$slots,"default")],8,iXt)),[[n],[i,{placement:"left"}]])])}}}),oXt={class:"relative",tabindex:"-1"},aXt=["aria-label","content"],lXt=mr({__name:"button",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){const t=Ki("iApi"),r=e,n=()=>t?.event.emit(St.APPBAR_BUTTON_CLICK,r.id);return(i,s)=>{const o=qr("focus-item"),a=qr("tippy");return qe(),pt("div",oXt,[$r((qe(),pt("button",{type:"button",class:"py-6 w-full h-full",onClick:s[0]||(s[0]=()=>{e.onClickFunction(),n()}),"aria-label":String(e.tooltip),content:`<div style='word-break: break-word;'>${e.tooltip}</div>`},[Qu(i.$slots,"default",{},void 0,!0)],8,aXt)),[[o],[a,{allowHTML:!0,placement:"right"}]])])}}}),uXt=Vh(lXt,[["__scopeId","data-v-457cd2d4"]]),iSe=Yn("areas-of-interest",()=>({areas:Le([])})),sSe=Yn("export",()=>{const e=Le({title:!0,map:!0,mapElements:!0,legend:!0,footnote:!0,timestamp:!0}),t=Le("");function r(n){if(e.value[n.name]!==void 0){const i=e.value[n.name];e.value[n.name]=n.selected!==void 0?n.selected:!i}}return{componentSelectedState:e,fileName:t,toggleSelected:r}}),oSe=Yn("extentguard",()=>{const e=Le(!1);function t(l){e.value=l}const r=Le(!1);function n(l){r.value=l}const i=Le(!1);function s(l){i.value=l}const o=Le([]);function a(l){o.value=l}return{active:e,setActive:t,enforcing:r,setEnforcing:n,alwaysOn:i,setAlwaysOn:s,extentSetIds:o,setExtentSetIds:a}}),J3=function e(t){function r(i,s,o){var a,l={};if(Array.isArray(i))return i.concat(s);for(a in i)l[o?a.toLowerCase():a]=i[a];for(a in s){var u=o?a.toLowerCase():a,c=s[a];l[u]=u in l&&typeof c=="object"?r(l[u],c,u=="headers"):c}return l}function n(i,s,o,a,l){var u=typeof i!="string"?(s=i).url:i,c={config:s},h=r(t,s),d={};a=a||h.data,(h.transformRequest||[]).map(function(m){a=m(a,h.headers)||a}),h.auth&&(d.authorization=h.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),d["content-type"]="application/json");try{d[h.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+h.xsrfCookieName+"=([^;]*)"))[2])}catch{}return h.baseURL&&(u=u.replace(/^(?!.*\/\/)\/?/,h.baseURL+"/")),h.params&&(u+=(~u.indexOf("?")?"&":"?")+(h.paramsSerializer?h.paramsSerializer(h.params):new URLSearchParams(h.params))),(h.fetch||fetch)(u,{method:(o||h.method||"get").toUpperCase(),body:a,headers:r(h.headers,d,!0),credentials:h.withCredentials?"include":l}).then(function(m){for(var y in m)typeof m[y]!="function"&&(c[y]=m[y]);return h.responseType=="stream"?(c.data=m.body,c):m[h.responseType||"text"]().then(function(g){c.data=g,c.data=JSON.parse(g)}).catch(Object).then(function(){return(h.validateStatus?h.validateStatus(m.status):m.ok)?c:Promise.reject(c)})})}return t=t||{},n.request=n,n.get=function(i,s){return n(i,s,"get")},n.delete=function(i,s){return n(i,s,"delete")},n.head=function(i,s){return n(i,s,"head")},n.options=function(i,s){return n(i,s,"options")},n.post=function(i,s,o){return n(i,o,"post",s)},n.put=function(i,s,o){return n(i,o,"put",s)},n.patch=function(i,s,o){return n(i,o,"patch",s)},n.all=Promise.all.bind(Promise),n.spread=function(i){return i.apply.bind(i,i)},n.CancelToken=typeof AbortController=="function"?AbortController:Object,n.defaults=t,n.create=e,n}(),cXt={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60},bD={en:{},fr:{}};class hXt{list={};listFetched=!1;constructor(t,r){J3.get(r).then(n=>{n.data.definitions.forEach(i=>bD[t][i.code]=i.description),Object.keys(bD[t]).forEach(i=>{this.list[i]=bD[t][i]}),this.listFetched=!0})}fsaToProvinces(t){const r={};let n=cXt[t.substring(0,1).toUpperCase()];return typeof n=="number"&&(n=[n]),n.forEach(i=>{r[i]=this.list[i]}),r}}function pXt(e,t){return new hXt(e,t)}const qA={en:{ADDRESS:"Street Address",FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale"},fr:{ADDRESS:"Adresse Municipale",FSA:"Rgion De Tri D'Acheminement",NTS:"Systme National De Rfrence Cartographique",COORD:"Latitude/Longitude",SCALE:"chelle"}};class dXt{allTypes={};validTypes={};filterComplete=!1;typesFetched=!1;constructor(t,r){J3.get(r).then(n=>{n.data.definitions.forEach(i=>{qA[t][i.code]=i.term.split(`${i.code}-`)[1]}),Object.keys(qA[t]).forEach(i=>{this.allTypes[i]=qA[t][i],this.validTypes[i]=qA[t][i]}),this.typesFetched=!0})}filterValidTypes(t){if(this.filterComplete)return this.validTypes;if(t=typeof t=="string"?[t]:t,t&&t.length>0)for(const r of t)delete this.validTypes[r];return this.filterComplete=!0,this.validTypes}}function fXt(e,t){return new dXt(e,t)}function mXt(e,t){const r=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/,n=/^\d{2,3}[A-P]/,i=/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/;if(r.test(t)&&!e.disabledSearchTypes.includes("LAT/LNG")){const s=t.slice(0,-1);return new yXt(e,s)}else return i.test(t)&&!e.disabledSearchTypes.includes("FSA")?new gXt(e,t):n.test(t)&&!e.disabledSearchTypes.includes("NTS")?new vXt(e,t.substring(0,6).toUpperCase()):new bXt(e,t)}class dN{config;query;failedServs=[];results=[];onComplete;latLongResult;featureResults=[];resultType="geoname";constructor(t,r){this.query=r,this.config=t}search(){return this.jsonRequest(this.getUrl()).then(t=>this.normalizeNameItems(t.items)).catch(()=>(console.error("Geoname service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}getUrl(t,r,n,i){let s="";return t?s=this.config.geoLocateUrl+"?q="+this.query:(n&&i?s=`${this.config.geoNameUrl}?lat=${n}&lon=${i}&num=${this.config.maxResults}`:s=`${this.config.geoNameUrl}?q=${this.query}&num=${this.config.maxResults}`,this.config.categories.length>0&&(s+=`&concise=${this.config.categories.join(",")}`),this.config.officialOnly&&(s+="&category=O")),s}normalizeNameItems(t){return t.filter(r=>this.config.types.validTypes[r.concise.code]).map(r=>({name:r.name,location:r.location,province:this.config.provinces.list[r.province.code],type:this.config.types.allTypes[r.concise.code],LatLon:{lat:r.latitude,lon:r.longitude},bbox:r.bbox,order:this.config.sortOrder.indexOf(r.concise.code)>=0?this.config.sortOrder.indexOf(r.concise.code):this.config.sortOrder.length}))}jsonRequest(t){return new Promise((r,n)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="json",i.onload=()=>{if(i.status===200){const s=typeof i.response=="string"?JSON.parse(i.response):i.response;r(s)}else n("Could not load results from remote service.")},i.send()})}locateByQuery(){return this.jsonRequest(this.getUrl(!0,void 0))}nameByLatLon(t,r,n){return this.jsonRequest(this.getUrl(!1,n,t,r)).then(i=>this.normalizeNameItems(i.items)).catch(()=>(console.error("LatLon service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}}class yXt extends dN{constructor(t,r){super(t,r),this.resultType="latlong";const n=r.split(/[\s|,|;|]/).filter(o=>!isNaN(o)&&o!=="").map(o=>parseFloat(o)),i=.015,s=[n[1]-i,n[0]-i,n[1]+i,n[0]+i];this.latLongResult={name:`${n[0]},${n[1]}`,location:{latitude:n[0],longitude:n[1]},type:"Latitude/Longitude",position:[n[1],n[0]],bbox:s},this.onComplete=new Promise((o,a)=>{this.nameByLatLon(n[0],n[1]).then(l=>{l?(this.results=l,o(this)):a("Given lat lon coordinates cannot be found")})})}}class gXt extends dN{constructor(t,r){r=r.substring(0,3).toUpperCase(),super(t,r),this.resultType="fsa",this.onComplete=new Promise(n=>{this.formatLocationResult().then(i=>{i?(this.featureResults.push(i),this.nameByLatLon(i.LatLon.lat,i.LatLon.lon,Object.keys(i._provinces).map(s=>parseInt(s))).then(s=>{this.results=s,n(this)})):(console.log("FSA code given cannot be found."),n(this))})})}formatLocationResult(){return this.locateByQuery().then(t=>{if(t.length===1&&this.query){const r=this.config.provinces.fsaToProvinces(this.query);return{fsa:this.query,code:"FSA",desc:this.config.types.allTypes.FSA,province:Object.keys(r).map(n=>r[n]).join(","),_provinces:r,LatLon:{lat:t[0].geometry.coordinates[1],lon:t[0].geometry.coordinates[0]}}}}).catch(()=>{console.error("FSA service failed"),this.failedServs.push("geolocation")})}}class vXt extends dN{unitName;unit;mapSheets=[];constructor(t,r){super(t,r),this.resultType="nts",r=isNaN(parseInt(r[2]))?"0"+r:r,this.unitName=r,this.onComplete=new Promise(n=>{this.locateByQuery().then(i=>{if(i.length>0&&this.query){const s=this.locateToResult(i);this.unit=s[0],this.mapSheets=s,this.featureResults.push(this.unit),this.nameByLatLon(this.unit.LatLon.lat,this.unit.LatLon.lon).then(o=>{this.results=o,n(this)})}else console.log("Given NTS code not found"),n(this)}).catch(()=>{console.error("NTS service failed"),this.failedServs.push("geolocation"),n(this)})})}locateToResult(t){return t.map(r=>{const n=r.title.split(" ");return{nts:n.shift()||"",location:n.join(" "),code:"NTS",desc:this.config.types.allTypes.NTS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]},bbox:r.bbox}})}equals(t){return this.unitName===t.unitName}}class bXt extends dN{constructor(t,r){r=encodeURIComponent(r.trim()),super(t,r),this.resultType="address",this.onComplete=new Promise(n=>{this.locateByQuery().then(i=>{this.featureResults=this.locateToResult(i),this.search().then(s=>{this.results=s,n(this)})}).catch(()=>{this.failedServs.push("geolocation"),console.error("Address service failed"),this.search().then(i=>{this.results=i,n(this)})})})}locateToResult(t){return this.config.categories.length>0&&!this.config.categories.includes("ADDR")?[]:t.filter(r=>r.type?.includes("Street")).map(r=>{const[n,i,s]=r.title.split(", ");return{name:n,city:i.split(" Of ").pop(),province:s,desc:this.config.types.allTypes.ADDRESS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]}}})}}const Gne="https://geogratis.gc.ca/services/geolocation/@{language}/locate",zne="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",$ne="https://geogratis.gc.ca/services/geoname/@{language}/codes/province.json",qne="https://geogratis.gc.ca/services/geoname/@{language}/codes/concise.json",wXt={10:"NL",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB",59:"BC",60:"YU",61:"NT",62:"NU",72:"UF",73:"IW"};class Hne{config;constructor(t,r){let n,i,s,o;const a=r?.serviceUrls;a?(n=a.geoLocation?a.geoLocation:Gne,i=a.geoNames?a.geoNames:zne,s=a.geoProvince?a.geoProvince:$ne,o=a.geoTypes?a.geoTypes:qne):(n=Gne,i=zne,s=$ne,o=qne),n=n.replace("@{language}",t),i=i.replace("@{language}",t),s=s.replace("@{language}",t),o=o.replace("@{language}",t);const l=r?.settings;let u,c,h,d,m;l?(u=l.categories?l.categories:[],c=l.sortOrder?l.sortOrder:[],h=l.disabledSearchTypes?l.disabledSearchTypes:[],d=l.maxResults>0?l.maxResults:100,m=!!l.officialOnly):(u=[],c=[],h=[],d=100,m=!1),this.config={language:t,geoNameUrl:i,geoLocateUrl:n,types:fXt(t,o),provinces:pXt(t,s),categories:u,sortOrder:c,disabledSearchTypes:h,maxResults:d,officialOnly:m},this.config.types.filterValidTypes(r?.excludeTypes),this._provinceList=[],this._typeList=[],this._excludedTypes=r?.excludeTypes||[]}get provinceList(){return this._provinceList}get typeList(){return this._typeList}set provinceList(t){this._provinceList=t}set typeList(t){this._typeList=t}levenshteinDistance(t,r){r=r.toLowerCase().trim();const n=decodeURI(t.query.toLowerCase().replace("*","")),i=[];for(let s=0;s<=r.length;s++){i[s]=[s];for(let o=1;o<=n.length;o++)i[s][o]=s===0?o:Math.min(i[s][o-1]+1,i[s-1][o]+.2,i[s-1][o-1]+(n[o-1]===r[s-1]?0:1))}return i[r.length][n.length]}findProvinceObj(t){return this.provinceList.find(r=>r.name===t)}query(t){return mXt(this.config,t.toUpperCase()).onComplete.then(r=>{let n=[];r.featureResults.length>0?r.resultType==="fsa"?n=r.featureResults.map(s=>({name:s.fsa,bbox:[s.LatLon.lon+.02,s.LatLon.lat-.02,s.LatLon.lon-.02,s.LatLon.lat+.02],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:-1})):r.resultType==="nts"?n=r.featureResults.map(s=>({name:s.nts,bbox:s.bbox??[s.LatLon.lon+.02,s.LatLon.lat-.02,s.LatLon.lon-.02,s.LatLon.lat+.02],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.location,latitude:s.LatLon.lat,longitude:s.LatLon.lon},order:-1})):r.resultType==="address"&&(n=r.featureResults.map(s=>({name:s.name,bbox:[s.LatLon.lon+.002,s.LatLon.lat-.002,s.LatLon.lon-.002,s.LatLon.lat+.002],type:s.desc,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.city,latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:this.config.sortOrder.indexOf("ADDR")>=0?this.config.sortOrder.indexOf("ADDR"):this.config.sortOrder.length})),this.config.sortOrder.length>0&&(n=n.sort((s,o)=>this.levenshteinDistance(r,s.name)>this.levenshteinDistance(r,o.name)?1:-1))):r.resultType==="latlong"&&(n=[r.latLongResult],n[0].order=-1);const i=r.results.map(s=>({name:s.name,bbox:s.bbox,type:s.type,position:[s.LatLon.lon,s.LatLon.lat],location:{city:s.location,latitude:s.LatLon.lat,longitude:s.LatLon.lon,province:this.findProvinceObj(s.province)},order:s.order}));return{results:n.concat(i).slice(0,this.config.maxResults).sort((s,o)=>this.config.sortOrder.length>0?s.order>o.order?1:-1:this.levenshteinDistance(r,s.name)>this.levenshteinDistance(r,o.name)?1:-1),failedServs:r.failedServs}})}fetchProvinces(){return new Promise(t=>{const r=setInterval(()=>{if(this.config.provinces.listFetched){clearInterval(r);const n=[],i={code:-1,abbr:"...",name:"..."};n.push(i);const s=this.config.provinces.list;for(const o in s)n.push({code:o,abbr:wXt[o],name:s[o]});this.provinceList=n,t(this.provinceList)}})})}fetchTypes(){return new Promise(t=>{const r=setInterval(()=>{if(this.config.types.typesFetched){clearInterval(r);const n=[],i={code:-1,name:"..."};n.push(i);const s=this.config.types.allTypes;for(const o in s)this._excludedTypes.includes(o)||n.push({code:o,name:s[o]});this.typeList=n,t(this.typeList)}},250)})}}function Wne(e,t,r){return e&&t.extent&&(r=r.filter(n=>n.bbox[0]<=t.extent.xmax&&n.bbox[1]<=t.extent.ymax&&n.bbox[2]>=t.extent.xmin&&n.bbox[3]>=t.extent.ymin)),t.province&&t.province!=="..."&&(r=r.filter(n=>n.location.province?.name&&n.location.province.name===t.province)),t.type&&t.type!=="..."&&(r=r.filter(n=>n.type===t.type)),r}const aSe=Yn("geosearch",()=>{const e=Le(new Hne("en",void 0)),t=Le({type:"",province:"",extent:void 0}),r=Le(!1),n=Le(""),i=Le(""),s=Le(""),o=Le([]),a=Le([]),l=Le(!1),u=Le([]),c=cr(()=>new Promise(x=>{e.value.fetchProvinces().then(w=>{w.sort((T,I)=>T.name>I.name?1:-1),x(w)})})),h=cr(()=>new Promise(x=>{e.value.fetchTypes().then(w=>{w.sort((T,I)=>T.name>I.name?1:-1),x(w)})}));function d(x,w){e.value=new Hne(x,w)}function m(x){l.value=!0;const w=n.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim();if(!w)o.value=[],a.value=[],l.value=!1;else if(w&&w!==s.value||x){const T=setInterval(()=>{e.value.config.provinces.listFetched&&e.value.config.types.typesFetched&&(clearInterval(T),e.value.query(`${w}*`).then(I=>{u.value=I.failedServs,s.value=w,a.value=I.results;const M=Wne(r.value,t.value,a.value);o.value=M||[],l.value=!1}))},250)}else{const T=Wne(r.value,t.value,a.value);o.value=T||[],l.value=!1}}function y(x){t.value.province=typeof x.province>"u"?"":x.province,m(x.forceReRun)}function g(x){t.value.type=typeof x.type>"u"?"":x.type,m(x.forceReRun)}function b(x){s.value=n.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim(),n.value=x,m()}function S(x){const w={a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:""};x=x.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),i.value=Array.from(x).map(T=>Object.keys(w).includes(T)?"["+T+w[T]+"]":T.replace(/["$!*+?^{}()|[\]\\]/g,"").replace(/[.\\]/g,"\\$&").trim()).join("")}function E(x){if(x.visible!==void 0&&(r.value=x.visible),x.extent.sr.wkid!==4326)throw new Error("an extent that was not projected to wkid 4326 was passed to the geosearch store");t.value.extent=x.extent,m()}return{GSservice:e,queryParams:t,resultsVisible:r,searchVal:n,searchRegex:i,lastSearchVal:s,searchResults:o,savedResults:a,loadingResults:l,failedServices:u,getProvinces:c,getTypes:h,initService:d,runQuery:m,setProvince:y,setType:g,setSearchTerm:b,setSearchRegex:S,setMapExtent:E}}),lSe=Yn("help",()=>({location:Le("./help/")}));var RH=(e=>(e.Visibility="visibilityButton",e.Expand="expandButton",e))(RH||{}),Sk=(e=>(e.Item="item",e.Placeholder="placeholder",e.Error="error",e))(Sk||{});class OH extends Si{_uid;_name;_type;_children=[];_parent=void 0;_loadPromise;_hidden;_expanded;_visibility;_exclusive;_controls;_disabledControls;_lastVisible;_visibleChildren;constructor(t,r,n){super(t),this._uid=Eg.sharedUtils.generateUUID(),this._name=r.name,this._type=r.type??"placeholder",this._parent=n,this._children=[],this._loadPromise=new bi,this._hidden=r.hidden??!1,this._expanded=r.expanded??!0,this._visibility=!0,this._exclusive=r.exclusive??!1,this._controls=r.controls?.slice()??["visibilityButton","expandButton"],this._disabledControls=r.disabledControls?.slice(),this._lastVisible,this._visibleChildren=[]}get uid(){return this._uid}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}get children(){return this._children}set children(t){this._children=t}get parent(){return this._parent}set parent(t){this._parent=t}get loadPromise(){return this._loadPromise.getPromise()}get hidden(){return this._hidden}get expanded(){return this._expanded}get visibility(){return this._visibility}get exclusive(){return this._exclusive}controlAvailable(t){return this._disabledControls?.includes(t)?!1:this._controls?.includes(t)}setControl(t,r){r&&this._disabledControls?.includes(t)?(this._disabledControls=this._disabledControls.filter(n=>n!==t),this._controls?.push(t)):!r&&this._controls?.includes(t)&&(this._controls=this._controls.filter(n=>n!==t),this._disabledControls?.push(t))}toggleHidden(t){this._hidden=t??!this.hidden}toggleExpanded(t){this._expanded=t??!this.expanded}toggleVisibility(t,r=!0){if(this.visibility!==t){if(this._visibility=t??!this.visibility,!this.exclusive)this.visibility?this._visibleChildren.length>0?this._visibleChildren.forEach(n=>n.toggleVisibility(!0,!1)):this.children.forEach(n=>n.toggleVisibility(!0,!1)):this.children.forEach(n=>n.toggleVisibility(!1,!1));else if(this.visibility)if(this._lastVisible&&(!(this._lastVisible instanceof jp)||this._lastVisible.layerControlAvailable(oi.Visibility)))this._lastVisible.toggleVisibility(!0);else{const n=this.children.find(i=>!(i instanceof jp)||i.layerControlAvailable(oi.Visibility));n&&n.toggleVisibility(!0)}else this._lastVisible=this.children.find(n=>n.visibility),this._lastVisible?.toggleVisibility(!1);this.parent&&r&&this.parent.checkVisibility(this)}}checkVisibilityRules(){this.parent&&!this.parent.visibility?this.toggleVisibility(!1,!1):this.parent?.exclusive&&this.parent.children.some(t=>t.visibility&&t!==this&&t.type==="item")&&this.toggleVisibility(!1,!1)}checkVisibility(t){this instanceof jp&&!this.layerControlAvailable(oi.Visibility)||(this.exclusive?t.visibility?(this.children.forEach(r=>{r.uid!==t.uid&&r.toggleVisibility(!1,!1)}),this._lastVisible=t,this._visibility=!0,this instanceof jp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this instanceof jp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1),this._lastVisible=t):this.children.some(r=>r.visibility)?(this._visibility=!0,this._visibleChildren=this.children.filter(r=>r.visibility),this instanceof jp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this._visibleChildren=[],this instanceof jp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1)),this.parent&&this.parent.checkVisibility(this))}getConfig(){const t={name:this._name,hidden:this._hidden,expanded:this._expanded,exclusive:this._exclusive,controls:this._controls,disabledControls:this._disabledControls},r=[];return this.children.forEach(n=>{r.push(n.getConfig())}),this.exclusive?t.exclusiveVisibility=r:t.children=r,t}onAdded(){}onRemoved(){this.toggleVisibility(!1)}load(){this._type="item",this._loadPromise.resolveMe(),this.checkVisibilityRules()}reload(){this._type="placeholder",this._loadPromise=new bi}error(){this._type!=="error"&&(this._type="error",this._loadPromise.getPromise().catch(()=>{}),this._loadPromise.rejectMe(),this.checkVisibilityRules())}}class jp extends OH{_layerId;_layerIdx;_layerUid="";_isSublayer=!1;_layer;_layerInitVis;_layerRedrawing=!1;_layerOffscale=!1;_treeGrown=!1;_customSymbology=!1;_coverIcon;_description;_symbologyExpanded;_origLayerControls;_origLayerDisabledControls;_layerControls;_layerDisabledControls;_maxLines;_symbologyRenderStyle;_symbologyStack;handlers=[];constructor(t,r,n){super(t,r,n),this._type=Sk.Placeholder,this._layerId=r.layerId,this._layerIdx=r.sublayerIndex,this._isSublayer=r.sublayerIndex!==void 0,this._layerControls=r.layerControls??[],this._origLayerControls=r.layerControls,this._layerDisabledControls=r.disabledLayerControls??[],this._origLayerDisabledControls=r.disabledLayerControls,this._layerRedrawing=!1,this._symbologyExpanded=r.symbologyExpanded||!1,r.coverIcon&&(this._coverIcon=r.coverIcon),r.description&&(this._description=r.description),this._symbologyRenderStyle=r.symbologyRenderStyle??"icons",this._customSymbology=!!r.symbologyStack,this._symbologyStack=r.symbologyStack?.map(i=>({uid:this.$iApi.geo.shared.generateUUID(),label:i.text,definitionClause:i.sqlQuery,imgUrl:i.image??"",drawPromise:Promise.resolve(),visibility:!0,lastVisibility:!0})),this._maxLines=r.maxLines&&[1,2,3,4,5,6].includes(r.maxLines)?r.maxLines:void 0}get parentLayerId(){return this._isSublayer?this._layerId.slice(0,this._layerId.length-`-${this._layerIdx}`.length):void 0}get layerId(){return this._layerId}get layerIdx(){return this._layerIdx}get isSublayer(){return this._isSublayer}get layerUid(){return this._layerUid}get layer(){return this._layer}set layer(t){this._layer=t,this._layerId=t.id,this._layerIdx=t.isSublayer?t.layerIdx:void 0,this._layerUid=t.uid,this._name=this._name||t.name,this._symbologyStack=this._customSymbology?this._symbologyStack:t.legend,this.updateLayerControls()}get layerOffscale(){return this._layerOffscale}set layerOffscale(t){this._layerOffscale=t}get layerRedrawing(){return this._layerRedrawing}set layerRedrawing(t){this._layerRedrawing=t}get coverIcon(){return this._coverIcon}set coverIcon(t){this._coverIcon=t}get description(){return this._description}set description(t){this._description=t}get symbologyExpanded(){return this._symbologyExpanded}get treeGrown(){return this._treeGrown}set treeGrown(t){this._treeGrown=t}get origLayerControls(){return this._origLayerControls}get origDisabledLayerControls(){return this._origLayerDisabledControls}set symbologyRenderStyle(t){this._symbologyRenderStyle=t}get symbologyRenderStyle(){return this._symbologyRenderStyle}set symbologyStack(t){this._symbologyStack=t}get symbologyStack(){return this._symbologyStack}get maxLines(){return this._maxLines}getConfig(){const t={layerId:this._layerId,sublayerIndex:this._layerIdx,layerControls:this._layerControls,disabledLayerControls:this._layerDisabledControls,symbologyExpanded:this._symbologyExpanded,coverIcon:this._coverIcon,description:this._description,maxLines:this._maxLines};return{...super.getConfig(),...t}}toggleVisibility(t,r=!0,n=!1){if(!(!this.layerControlAvailable(oi.Visibility)&&!n)&&(super.toggleVisibility(t,r),this.layer&&this.layer.layerExists)){this.layer.visibility=this.visibility;const i=this._symbologyStack.some(s=>s.lastVisbility);this._symbologyStack.forEach(s=>{i||(s.lastVisbility=!0),s.visibility=this.visibility?s.lastVisbility:!1})}}toggleSymbology(t){return this._symbologyExpanded=t??!this._symbologyExpanded,this._symbologyExpanded}setSymbologyVisibility(t,r){this._symbologyStack.some(n=>((t===void 0||n.uid===t)&&(n.visibility=r,n.lastVisbility=r),t!==void 0&&n.uid===t))}load(t){const r=t instanceof yN?t:this.$iApi.geo.layer.getLayer(this._layerId??this._layerUid);r&&(this.layer=r,this._layerRedrawing=r.mapLayer&&r.drawState!==Ia.UP_TO_DATE,r.loadPromise().then(()=>{this._layerInitVis=typeof this._layerInitVis<"u"?this._visibility:r.visibility,super.load(),this.toggleVisibility(this._layerInitVis,!0,!0),r.visibility||this.setSymbologyVisibility(void 0,!1),this.handlers.push(this.$iApi.event.on(St.LAYER_VISIBILITYCHANGE,n=>{n.layer.uid===this.layer.uid&&this._type===Sk.Item&&this.toggleVisibility(n.visibility,!0,!0)})),this.handlers.push(this.$iApi.event.on(St.LAYER_DRAWSTATECHANGE,n=>{this.layer.uid===n.layer.uid&&(n.layer.drawState===Ia.REFRESH?this.layerRedrawing=!0:setTimeout(()=>{this.layerRedrawing=n.layer.drawState===Ia.REFRESH},500))})),this._layerOffscale=this.$iApi.geo.map.created?r.isOffscale():!1,this.handlers.push(this.$iApi.event.on(St.MAP_SCALECHANGE,()=>{this.$iApi.geo.map.created&&(this._layerOffscale=this.layer?.isOffscale())}))}).catch(()=>{this.error()}))}error(){this.updateLayerControls(),super.error()}layerControlAvailable(t){return this._layerDisabledControls?.includes(t)?!1:!!this._layerControls?.includes(t)}updateLayerControls(){const t=this.$iApi.geo.layer.getLayerControls(this.layerId)??this.$iApi.geo.layer.getLayerControls(this.parentLayerId??"");this._origLayerControls||(this._layerControls=t?.controls??[]),this._origLayerDisabledControls||(this._layerDisabledControls=t?.disabledControls??[])}}var uSe=(e=>(e.Title="title",e.Text="text",e.Image="image",e.Markdown="markdown",e.Template="template",e))(uSe||{});class JU extends OH{_infoType;_content;constructor(t,r,n){super(t,r,n),this._infoType=r.infoType??"title",this._content=r.content??"",r.infoType==="template"&&this.$element.component(`${this._uid}-info-section`,{template:this._content}),(r.infoType||r.content)&&(this._controls=r.controls?.slice()??[RH.Expand]),super.load()}get infoType(){return this._infoType}get content(){return this._content}set content(t){this._content=t}getConfig(){const t={infoType:this._infoType,content:this._content};return{...super.getConfig(),...t}}}const cSe=Yn("legend",()=>{const e=Le(),t=Le([]),r=Le([]),n=Le(!0),i=Le(3);function s(l){if(l.parent===void 0)t.value.push(l.item);else{if(!(l.item instanceof JU)&&!(l.item instanceof jp)){console.error("attempted to add an unsupported legend item type");return}l.parent.children.push(l.item)}}function o(l){const u=c=>(c=c.filter(h=>(h===l&&!h.children.length&&h.onRemoved(),h!==l)),c.forEach(h=>{h.children=u(h.children)}),c=c.filter(h=>!(h instanceof JU&&!h.children.length&&h.content==="")),c);t.value=u(t.value)}function a(l){if(l.oldItem.parent===void 0){const u=t.value,c=u.indexOf(l.oldItem);c>-1&&(t.value[c]=l.newItem),t.value=u}else{const u=l.oldItem.parent.children,c=u.indexOf(l.oldItem);c>-1&&(u[c]=l.newItem),l.oldItem.parent.children=u}}return{legendConfig:e,multilineItems:n,maxLines:i,children:t,headerControls:r,addItem:s,removeItem:o,replaceItem:a}}),hSe=Yn("mapnav",()=>{const e=Le({}),t=Le([]);function r(n){n in e.value&&delete e.value[n];const i=t.value.indexOf(n);i!==-1&&t.value.splice(i,1)}return{items:e,order:t,removeItem:r}}),pSe=Yn("metadata",()=>{const e=Le(""),t=Le({type:"LineString",coordinates:[]});return{status:e,response:t}}),dSe=Yn("northarrow",()=>{const e=Le(""),t=Le("");return{arrowIcon:e,poleIcon:t}}),fSe=Yn("overviewmap",()=>{const e=Le({lodSets:[],extentSets:[],basemaps:[],tileSchemas:[],initialBasemapId:""}),t=Le({}),r=Le(!0),n=Le(1.5),i=Le("#FF0000"),s=Le(1),o=Le("#000000"),a=Le(.25);function l(u){e.value.initialBasemapId=u}return{mapConfig:e,basemaps:t,startMinimized:r,expandFactor:n,borderColour:i,borderWidth:s,areaColour:o,areaOpacity:a,updateInitialBasemap:l}}),mSe=Yn("scrollguard",()=>{const e=Le(!1);function t(r){e.value=r}return{enabled:e,setEnabled:t}});var Ns=(e=>(e[e.UPLOAD=0]="UPLOAD",e[e.FORMAT=1]="FORMAT",e[e.CONFIGURE=2]="CONFIGURE",e))(Ns||{});const ySe=Yn("wizard",()=>{const e={id:"Placeholder",layerType:Ct.UNKNOWN,url:""},t=Le(),r=Le(""),n=Le(""),i=Le(!0),s=Le(null),o=Le({config:e,configOptions:[]}),a=Le(Ns.UPLOAD);function l(u){switch(a.value){case Ns.UPLOAD:u===Ns.UPLOAD?r.value="":u===Ns.FORMAT&&(a.value=Ns.FORMAT);break;case Ns.FORMAT:u===Ns.UPLOAD?(s.value&&(r.value="",s.value=null),n.value="",a.value=Ns.UPLOAD):u===Ns.CONFIGURE&&(a.value=Ns.CONFIGURE);break;case Ns.CONFIGURE:u===Ns.UPLOAD?(r.value="",n.value="",s.value=null,i.value=!0,o.value={config:e,configOptions:[]},a.value=Ns.UPLOAD):u===Ns.FORMAT&&(o.value={config:e,configOptions:[]},i.value=!0,a.value=Ns.FORMAT);break}}return{layerSource:t,url:r,typeSelection:n,nested:i,fileData:s,layerInfo:o,currStep:a,goToStep:l}});class _Xt{fixture;panel;event;geo;notify;ui;startRequired=!1;_eventsOn=!1;$vApp;$element;$i18n;$rootEl;_isFullscreen;constructor(t,r,n){this.event=new vGt(this);const i=xXt(t,this);this.$vApp=i.app,this.$element=i.element,this.$i18n=i.i18n,this.$rootEl=i.app.$root?.$el,this.fixture=new OQt(this),this.panel=new NQt(this),this.geo=new kQt(this),this.ui={maptip:this.geo.map.maptip,exposeOids:!1,exposeMeasurements:!0,getZoomIcon:()=>"",formatNumber:()=>"",scrollToInstance:!1,suppressNumberLocalization:!1,escapeHtml:()=>"",isPlainText:()=>!0},this.notify=new AHt(this),this._isFullscreen=Mc.isEnabled&&!!this.$vApp.$root&&Mc.isFullscreen&&Mc.element===this.$vApp.$root.$el,Mc.isEnabled&&Mc.onchange(()=>{this._isFullscreen=Mc.isEnabled&&!!this.$vApp.$root&&Mc.isFullscreen&&Mc.element===this.$vApp.$root.$el}),this.initialize(!0,r,n)}initialize(t,r,n){const i=Wo(this.$vApp.$pinia),s=$m(this.$vApp.$pinia),o=tk(this.$vApp.$pinia);if(r?.configs!==void 0){const l=r.configs,u=l[this.$i18n.locale.value]??l[Object.keys(l)[0]];i.newConfig(u),i.registerConfig({config:u,configLangs:Object.keys(l),allLangs:Object.keys(this.$i18n.messages.value)});for(const y in l)i.registerConfig({config:l[y],configLangs:[y]});i.activeBasemapConfig=u.map.basemaps.find(y=>y.id===u.map.initialBasemapId);const c=setInterval(()=>{const y=this.$vApp.$el.querySelector("#esriMap");if(y&&(clearInterval(c),this.geo.map.createMap(u.map,y),y._tippy.hide(0),o.setMaptipInstance(y._tippy),u.layers&&u.layers.length>0)){let g=0;u.layers.forEach(b=>{const S=this.geo.layer.createLayer(b);this.geo.map.addLayer(S,g).catch(()=>{}),S.mapLayer&&g++})}},100);if(u.panels){if(u.panels.open&&u.panels.open.length>0){const y=u.panels.open.map(g=>g.id);this.panel.isRegistered(y).then(()=>{u.panels?.open?.forEach(g=>{this.panel.open({id:g.id,screen:g.screen}),g.pin&&this.panel.pin(g.id)})})}s.reorderable=u.panels.reorderable??!0}!u.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),u.system?.proxyUrl&&(this.geo.proxy=u.system.proxyUrl),u.system?.exposeOid&&(this.ui.exposeOids=u.system.exposeOid),u.system?.exposeMeasurements!=null&&(this.ui.exposeMeasurements=u.system.exposeMeasurements),u.system?.scrollToInstance&&(this.ui.scrollToInstance=u.system?.scrollToInstance),u.system?.suppressNumberLocalization&&(this.ui.suppressNumberLocalization=u.system?.suppressNumberLocalization);const h={magnify:'<svg class="m-auto" xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /><path d="M0 0h24v24H0V0z" fill="none" /><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></svg>',globe:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="16" height="16" viewBox="0 0 16 16" xml:space="preserve"><g transform="matrix(0.67 0 0 0.67 8 8)"><path style=" stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: #979797; fill-rule: nonzero; opacity: 1;" transform=" translate(-12, -12)" d="M 12 2 C 6.48 2 2 6.48 2 12 C 2 17.52 6.48 22 12 22 C 17.52 22 22 17.52 22 12 C 22 6.48 17.52 2 12 2 z M 11 19.93 C 7.05 19.44 4 16.08 4 12 C 4 11.38 4.08 10.79 4.21 10.21 L 9 15 L 9 16 C 9 17.1 9.9 18 11 18 L 11 19.93 z M 17.9 17.39 C 17.639999999999997 16.580000000000002 16.9 16 15.999999999999998 16 L 14.999999999999998 16 L 14.999999999999998 13 C 14.999999999999998 12.45 14.549999999999999 12 13.999999999999998 12 L 8 12 L 8 10 L 10 10 C 10.55 10 11 9.55 11 9 L 11 7 L 13 7 C 14.1 7 15 6.1 15 5 L 15 4.59 C 17.93 5.779999999999999 20 8.649999999999999 20 12 C 20 14.08 19.2 15.97 17.9 17.39 z" stroke-linecap="round" /></g></svg>'},d=u.system?.zoomIcon||"globe",m=h[d]||d;this.ui.getZoomIcon=()=>m,this.ui.formatNumber=y=>this.ui.suppressNumberLocalization?y.toString():this.$i18n.n(y,"number"),this.ui.escapeHtml=y=>{const g={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return y.replace(/[<>"']/g,b=>g[b])},this.ui.isPlainText=y=>typeof y=="string"?!this.containsValidHtml(y)&&!this.representsObject(y):!1}n||(n={});const a=Yv(this.$vApp.$pinia);n?.startRequired?(this.startRequired=!0,a.started=!1):(this.startRequired=!1,a.started=!0,this.event.emit(St.MAP_START)),t&&(n.loadDefaultFixtures!==!1||r?.startingFixtures!==void 0)?this.fixture.addDefaultFixtures(r?.startingFixtures):t||this.fixture.restore(),n.loadDefaultEvents!==!1&&!this._eventsOn&&(this.event.addDefaultEvents(),this._eventsOn=!0)}reload(t,r){const n=Yv(this.$vApp.$pinia),i=cc(this.$vApp.$pinia),s=Wo(this.$vApp.$pinia),o=Dl(this.$vApp.$pinia),a=Ku(this.$vApp.$pinia),l=QC(this.$vApp.$pinia),u=!!t;u?Object.keys(o.items).forEach(c=>{this.fixture.exists(c)&&this.fixture.remove(c)}):this.fixture.flush(),Object.keys(l.grids).forEach(c=>{l.removeGrid(c)}),n.started=!1,this.geo.map.destroyMap(),a.$reset(),r?.loadDefaultEvents===!1&&(this.event.removeDefaultEvents(),this._eventsOn=!1),t===void 0&&(t=JSON.parse(JSON.stringify({startingFixtures:s.startingFixtures,configs:s.registeredConfigs}))),i.clearAll(),this.geo.map.maptip.clear(),this.initialize(u,t,r)}component(t,r){if(r){const n=this.$element.component(t,r);return this.event.emit(St.COMPONENT,t),n}return this.$element.component(t)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const t=this.$vApp.$root.$refs["app-size"].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=Wo(this.$vApp.$pinia);return JSON.parse(JSON.stringify(t.getActiveConfig(this.language)))}useStore(t){if(!(["appbar","areas-of-interest","details","export","extentguard","geosearch","grid","help","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","wizard"].includes(t)&&!this.fixture.exists(t)))switch(t){case"appbar":return pT(this.$vApp.$pinia);case"areas-of-interest":return iSe(this.$vApp.$pinia);case"details":return zq(this.$vApp.$pinia);case"export":return sSe(this.$vApp.$pinia);case"extentguard":return oSe(this.$vApp.$pinia);case"geosearch":return aSe(this.$vApp.$pinia);case"grid":return QC(this.$vApp.$pinia);case"help":return lSe(this.$vApp.$pinia);case"legend":return cSe(this.$vApp.$pinia);case"mapnav":return hSe(this.$vApp.$pinia);case"metadata":return pSe(this.$vApp.$pinia);case"northarrow":return dSe(this.$vApp.$pinia);case"overviewmap":return fSe(this.$vApp.$pinia);case"scrollguard":return mSe(this.$vApp.$pinia);case"wizard":return ySe(this.$vApp.$pinia);case"config":return Wo(this.$vApp.$pinia);case"fixture":return Dl(this.$vApp.$pinia);case"instance":return Yv(this.$vApp.$pinia);case"layer":return Ku(this.$vApp.$pinia);case"map-caption":return mm(this.$vApp.$pinia);case"maptip":return tk(this.$vApp.$pinia);case"notification":return cc(this.$vApp.$pinia);case"panel":return $m(this.$vApp.$pinia);default:console.error(`The store ${t} does not exist.`);return}}setLanguage(t){if(this.$i18n.locale.value===t)return;const r=Wo(this.$vApp.$pinia),n=cc(this.$vApp.$pinia),i=r.registeredLangs;Object.keys(r.registeredConfigs).length===1&&n.clearAll();const s=this.$i18n.locale.value;this.$i18n.locale.value=t;const o=this.getConfig();i[s]!==i[t]&&(this.event.emit(St.CONFIG_CHANGE,o),this.reload()),this.event.emit(St.LANG_CHANGE,{oldLang:s,newLang:t})}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){Mc.isEnabled&&Mc.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}get started(){return Yv(this.$vApp.$pinia).started}updateAlert(t){const r=this.$vApp.$el.querySelector(".screen-reader-alert");r.childNodes.length>0&&(r.innerHTML="");const n=document.createElement("span");n.setAttribute("role","alert");const i=document.createTextNode(t);n.appendChild(i),r.insertBefore(n,null)}scrollToInstance(){this.ui.scrollToInstance&&this.$element._container?.scrollIntoView({behavior:"smooth"})}start(){const t=Yv(this.$vApp.$pinia);!t.started&&this.startRequired?(this.event.emit(St.MAP_START),t.started=!0):t.started&&console.warn("start has already been called")}containsValidHtml(t){return/<(\w+)([^>]*)>(.*?)<\/\1>/.test(t)}representsObject(t){return/^(?:\[\s*(?:[\s\S]*?)\s*\]|\{\s*(?:[\s\S]*?)\s*\})$/.test(t)}}function xXt(e,t){const r=hGt();r.use(({store:o})=>{const a=Xre(o.$state);o.$reset=()=>o.$patch(Xre(a))});const n=L$t(),i=Jg(SJt).use(n).use(vJt,{directive:"tippy",component:"tippy"}).use(r);i.directive("focus-container",RJt),i.directive("focus-list",IJt),i.directive("focus-item",MJt),i.directive("truncate",yYt),i.component("panel-screen",TYt),i.component("pin",CYt),i.component("close",OYt),i.component("back",PYt),i.component("expand",BYt),i.component("panel-options-menu",XYt),i.component("dropdown-menu",fH),i.component("minimize",zYt),i.component("right",HYt),i.component("left",JYt),i.component("fullscreen-nav-button",eXt),i.component("geolocator-nav-button",tXt),i.component("home-nav-button",rXt),i.component("mapnav-button",sXt),i.component("appbar-button",uXt),i.component("transition",QO),i.component("transition-group",jq),i.config.globalProperties.$iApi=t,i.config.globalProperties.$pinia=r,i.provide("iApi",t);const s=i.mount(e);return{element:i,app:s,i18n:n.global}}class gSe{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new Eb({baseLayers:t.layers.map(r=>{if(r.layerType===Ct.TILE)return new Yz({url:r.url,opacity:r.opacity});if(r.layerType===Ct.MAPIMAGE)return new Hz({url:r.url,opacity:r.opacity});if(r.layerType===Ct.OSM)return new Jz({opacity:r.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${r.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t||""}get description(){return this.config.description}set description(t){this.config.description=t||""}get altText(){return this.config.altText}set altText(t){this.config.altText=t||""}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}get backgroundColour(){return this.config.backgroundColour??"#FFFFFF"}}class vSe extends Si{esriMap;_basemapStore;created=!1;trackFirstBasemap=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new bi,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}labelsDefault={visible:void 0};createMap(t,r){this._basemapStore=t.basemaps.map(i=>{const s=new gSe(i);return s.esriBasemap.baseLayers.forEach(o=>{o.watch("loadStatus",()=>{o.loadStatus==="loaded"?this.trackFirstBasemap=!1:o.loadStatus==="failed"&&(this.$iApi.notify.show(Fa.ERROR,this.$iApi.$i18n.t("layer.error",{id:s.name})),this.trackFirstBasemap&&this.recoverBasemap(s.tileSchemaId))})}),s}),t.labelsDefault&&(this.labelsDefault.visible=t.labelsDefault.visible);const n={};this.esriMap=wi(new Iye(n)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=r,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,r){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,r)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new bi,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const r=this._basemapStore.find(n=>n.id===t);if(r)return r;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Xt(r.esriBasemap)}setBasemap(t){return this.abstractError(),!1}recoverBasemap(t){}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,r,n=!0,i=200,s="ease"){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const o=await this.geomToMapSR(t),a={target:this.$iApi.geo.geom.geomRampToEsri(o)};o.type===or.POINT&&(a.scale=r||this.pointZoomScale);const l={animate:n,duration:i,easing:s};return this.viewPromise.then(()=>this.esriView.goTo(a,l))}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?Tn.fromESRI(this.esriView.extent):(this.noMapErr(),Tn.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),YE.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Yt.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class SXt extends Si{maptipStore;constructor(t){super(t),this.maptipStore=tk(this.$vApp.$pinia)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const r=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!r){this.clear();return}const n=this.$iApi.geo.layer.getLayer(r.layerId);if(n?.geomType!=or.POLYGON&&this.#e&&this.#e.layerId===r.layerId&&this.#e.oid===r.oid&&this.#e.layerIdx===r.layerIdx)return;if(this.clear(),this.#e=r,!n){console.error(`graphic hit test returned non-existent layer id: ${r.layerId}`);return}if(!n.hovertips)return;const i=await n.getIcon(r.oid),s=await n.getGraphic(r.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(St.MAP_GRAPHICHIT,{layer:n,graphicHit:r,attributes:s.attributes,icon:i,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="line-clamp-3">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.#e=void 0,this.maptipStore.setMaptipPoint(void 0),this.maptipStore.setMaptipContent("")}getInstance(){return this.maptipStore.maptipInstance}getPoint(){return this.maptipStore.maptipPoint}setPoint(t){this.maptipStore.setMaptipPoint(t)}setContent(t){this.maptipStore.setMaptipContent(t)}}class EXt extends Si{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!t)return;const r=mm(this.$vApp.$pinia);if(r.coords.disabled=!1,r.scale.disabled=!1,r.scale.isImperialScale=!1,t.mapCoords)if(t.mapCoords.disabled)r.coords.disabled=!0;else{const n=t.mapCoords.formatter;n!==void 0&&this.setPointFormatter(n)}if(t.scaleBar)if(t.scaleBar.disabled)r.scale.disabled=!0;else{const n=t.scaleBar.imperialScale;n!==void 0&&(r.toggleScale(n),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}r.langtoggle={disabled:t?.langToggle?.disabled??!1}}updateAttribution(t){const r={disabled:!1,value:this.$iApi.$i18n.t("caption.attributionDefaultText")},n={disabled:!1,altText:this.$iApi.$i18n.t("caption.attributionLogoAltText"),link:this.$iApi.$i18n.t("caption.attributionLink"),value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"},i={text:{value:"",disabled:!1},logo:{disabled:!1,altText:"",link:"",value:""}};if(t?(t.logo?t.logo.disabled?i.logo.disabled=!0:(i.logo.altText=t.logo.altText||n.altText,i.logo.link=t.logo.link||n.link,i.logo.value=t.logo.value||n.value):(i.logo.altText=n.altText,i.logo.link=n.link,i.logo.value=n.value),t.text?t.text.disabled?i.text.disabled=!0:i.text.value=t.text.value||r.value:i.text.value=r.value,mm(this.$vApp.$pinia).setAttribution(i)):(i.logo.altText=n.altText,i.logo.link=n.link,i.logo.value=n.value,i.text.value=r.value),!t||t.text?.disabled||!t.text){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let s="";const o=5e3,a=20,l=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(u=>new Promise(c=>{let h=0;const d=o/a,m=setInterval(function(){u.loaded&&!u.loadError?(clearInterval(m),c(u)):h>d&&(clearInterval(m),c(null)),h++},a)})).toArray();Promise.all(l).then(u=>{s=u.filter(c=>c?.copyright).map(c=>c.copyright).join(" | "),i.text.value=s||i.text.value||r.value,mm(this.$vApp.$pinia).setAttribution(i)})}}updateScale(){const t=mm(this.$vApp.$pinia),r=t.scale;if(r?.disabled)return;const n=r?.isImperialScale||!1,i=this.scaleHelper().find(s=>s.isImperialScale===n)??{isImperialScale:!1,units:"error",pixels:1,distance:1};t.scale={width:`${i.pixels}px`,label:`${this.$iApi.$i18n.n(i.distance,"number")}${i.units}`,isImperialScale:n}}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,r=this.$iApi.geo.map.getResolution(),n=[],i=r*t,s=1609.34,o=3.28084,a=i>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(n.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),i>1e3){const c=r*t/(u?s:1e3),h=Math.round(c).toString().length,d=Math.pow(10,h-1);n[l].distance=Math.ceil(c/d)*d,n[l].pixels=n[l].distance*(u?s:1e3)/r}else n[l].distance=Math.ceil(u?i*o:i),n[l].pixels=i/r}return n}wrapValue(t,r,n){return((t-r)%(n-r)+(n-r))%(n-r)+r}async formatLatLongDMS(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),n=this.wrapValue(r.y,-90,90),i=this.wrapValue(r.x,-180,180),s="",o=Math.floor(Math.abs(n))*(n<0?-1:1),a=Math.floor(Math.abs((n-o)*60)),l=Math.floor((Math.abs(n)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(i))*(i<0?-1:1),c=Math.floor(Math.abs((i-u)*60)),h=Math.floor((Math.abs(i)-Math.abs(u)-c/60)*3600);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${s} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(n>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(u),"number")}${s} ${this.$iApi.$i18n.n(c,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(h,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(0>i?"west":"east"))}`}async formatLatLongDDM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),n=this.wrapValue(r.y,-90,90),i=this.wrapValue(r.x,-180,180),s="",o=Math.floor(Math.abs(n))*(n<0?-1:1),a=Math.abs((n-o)*60),l=Math.floor(Math.abs(i))*(i<0?-1:1),u=Math.abs((i-l)*60);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${s} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(n>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(l),"number")}${s} ${this.$iApi.$i18n.n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(0>i?"west":"east"))}`}async formatLatLongDD(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),n=this.wrapValue(r.y,-90,90),i=this.wrapValue(r.x,-180,180),s="",o=Math.abs(n),a=Math.abs(i);return`${this.$iApi.$i18n.n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$i18n.t("map.coordinates."+(n>0?"north":"south"))} | ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$i18n.t("map.coordinates."+(0>i?"west":"east"))}`}async formatMercator(t){const r=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$i18n.n(Math.floor(r.x),"number")} m | ${this.$iApi.$i18n.n(Math.floor(r.y),"number")} m`}async formatLambert(t){const r=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$i18n.n(Math.abs(Math.floor(r.x)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(0>r.x?"west":"east"))} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(r.y)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(r.y>0?"north":"south"))}`}async formatUTM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),n=this.wrapValue(r.y,-90,90),i=this.wrapValue(r.x,-180,180),s=Math.ceil((i+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+s),t);return`${this.$iApi.$i18n.n(s,"number",{minimumIntegerDigits:2})} ${this.$iApi.$i18n.t("map.coordinates."+(n>0?"north":"south"))} ${this.$iApi.$i18n.n(Math.floor(o.x),"number")} m${this.$iApi.$i18n.t("map.coordinates.east")} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$i18n.t("map.coordinates.north")}`}async formatBasemap(t){const r=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$i18n.n(r.x,"number")} | ${this.$iApi.$i18n.n(r.y,"number")}`}}class TXt extends vSe{maptip;caption;mapMouseThrottle;layerDefaultTimes={draw:0,load:0,fail:0};constructor(t){super(t),this.maptip=new SXt(t),this.caption=new EXt(t),this.mapMouseThrottle=0}createMap(t,r){this.setMapMouseThrottle(t.mapMouseThrottle??0),this.trackFirstBasemap=!0,super.createMap(t,r),this.layerDefaultTimes.draw=t.layerTimeDefault?.expectedDrawTime??1e4,this.layerDefaultTimes.load=t.layerTimeDefault?.expectedLoadTime??1e4,this.layerDefaultTimes.fail=t.layerTimeDefault?.maxLoadTime||9e4,this.viewPromise.then(()=>{this.$iApi.event.emit(St.MAP_CREATED)})}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayersOnMap(!1).map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(St.MAP_DESTROYED)}createMapView(t){const r=Wo(this.$vApp.$pinia).config.map;if(!r)throw new Error("Attempted to create map view without a map config");const n=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(r.initialBasemapId),i=r.tileSchemas.find(a=>a.id===n.tileSchemaId);if(!i)throw new Error(`Could not find tile schema for the given basemap id: ${n.id}`);const s=r.extentSets.find(a=>a.id===i.extentSetId);if(!s)throw new Error(`Could not find extent set with the given id: ${i.extentSetId}`);this._rampExtentSet=YE.fromConfig(s),this._rampSR=this._rampExtentSet.sr.clone();const o=r.lodSets.find(a=>a.id===i.lodSetId);if(!o)throw new Error(`Could not find lod set with the given id: ${i.lodSetId}`);this.esriView=wi(new jbe({map:this.esriMap,container:this._targetDiv,constraints:{lods:o.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1},background:{color:n.backgroundColour}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",a=>{if(a){const l=this.$iApi.geo.geom.geomEsriToRamp(a,"map_extent_event");this.$iApi.event.emit(St.MAP_EXTENTCHANGE,l),this.$iApi.event.emit(St.FILTER_CHANGE,{extent:l,filterKey:co.EXTENT})}})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",a=>{this.$iApi.event.emit(St.MAP_SCALECHANGE,a)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",a=>{this.$iApi.event.emit(St.MAP_RESIZED,{height:a.height,width:a.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",a=>{this.$iApi.event.emit(St.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",a=>{this.$iApi.event.emit(St.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",dT(100,!0,a=>{this.$iApi.event.emit(St.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",dT(100,a=>{this.$iApi.event.emit(St.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-leave",handler:this.esriView.on("pointer-leave",a=>{setTimeout(()=>{this.$iApi.event.emit(St.MAP_MOUSELEAVE,a.native)},Math.max(this.mapMouseThrottle,100)+1)})}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",a=>{this.$iApi.event.emit(St.MAP_MOUSEDOWN,a.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",a=>{this.$iApi.event.emit(St.MAP_KEYDOWN,a.native),a.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",a=>{this.$iApi.event.emit(St.MAP_KEYUP,a.native),a.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",a=>{this.$iApi.event.emit(St.MAP_FOCUS,a.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",a=>{this.$iApi.event.emit(St.MAP_BLUR,a.native)})}),this.esriView.container.addEventListener("touchmove",a=>{a.preventDefault()}),this.esriView.watch("fatalError",()=>{const a=new IntersectionObserver(l=>{l.forEach(u=>{u.isIntersecting&&(this.esriView?.tryFatalErrorRecovery(),a.disconnect())})});a.observe(this.esriView.container)}),this.esriView.when(()=>{if(this._viewPromise.resolveMe(),this.created=!0,this.applyBasemap(n),i.recoveryBasemap?.basemapId){const a=i.recoveryBasemap.timeout??8e3;a>0&&setTimeout(()=>{this.trackFirstBasemap&&this.recoverBasemap(i.id)},a)}})}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Xt(r.esriBasemap);const n=Wo(this.$vApp.$pinia);n.activeBasemapConfig=r.config}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const r=Wo(this.$vApp.$pinia),n=this.findBasemap(t),i=r.activeBasemapConfig.tileSchemaId!==n.tileSchemaId;if(i){const s=this.getExtent().center(),o=this.getScale();this._viewPromise=new bi,this.created=!1,this.$iApi.event.emit(St.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(n),this.viewPromise.then(()=>{this.$iApi.event.emit(St.MAP_REFRESH_END),this.$iApi.event.emit(St.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:i});const a=this.findClosestScale(o);this.$iApi.geo.proj.projectGeometry(this._rampSR,s).then(l=>this.zoomMapTo(l,a,!1))})}else this.applyBasemap(n),this.esriView.background=new kbe({color:new _d(n.backgroundColour).toESRI()}),this.$iApi.event.emit(St.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:i});return i}recoverBasemap(t){this.esriMap||this.noMapErr(),this.trackFirstBasemap=!1;const r=Wo(this.$vApp.$pinia).config.map;if(r){const n=r.tileSchemas.find(i=>i.id===t);if(n?.recoveryBasemap?.basemapId){const i=this.findBasemap(n.recoveryBasemap.basemapId);this.applyBasemap(i)}}}addLayer(t,r=void 0){return new Promise((n,i)=>{if(this.esriMap||(this.noMapErr(),i()),t.initiationState!==Sn.INITIATING&&t.initiationState!==Sn.INITIATED&&t.layerState!==Hn.ERROR&&t.initiate(),t.mapLayer&&r===void 0){const l=this.$iApi.geo.layer.layerOrderIds();if(t.isCosmetic)r=l.length;else{const u=this.$iApi.geo.layer.allLayers();let c=!0;for(let h=l.length-1;h>=0&&c;h--){const d=u.find(m=>m.id===l[h]);d&&!d.isCosmetic&&(r=h+1,c=!1)}c&&(r=0)}}Ku(this.$vApp.$pinia).addLayer(t,r),this.$iApi.event.emit(St.LAYER_REGISTERED,t);const s=Date.now();let o=0;const a=setInterval(()=>{o+=250,o>=t.expectedTime.fail||t.layerState===Hn.ERROR?(clearInterval(a),t.lastCancel<s&&console.error(`Failed to add layer: ${t.id}.`),i()):t.initiationState===Sn.INITIATED&&(t.esriLayer||!t.mapLayer)&&(clearInterval(a),t.mapLayer?this.insertToEsriMap(t):t.onLoad(),n())},250)})}insertToEsriMap(t){let r=0;const n=this.$iApi.geo.layer.getLayerPosition(t.id)??-1;if(n>0){const i=this.$iApi.geo.layer.layerOrderIds(),s=this.$iApi.geo.layer.allLayers();for(let o=n-1;o>-1;o--){const a=i[o],l=s.find(u=>u.id===a);if(l&&l.esriLayer){const u=this.esriMap.layers.indexOf(l.esriLayer);if(u>-1){r=u+1;break}}else l||console.error("ESRI Layer insert encountered bad state. Layer likely inserted at bottom of map.")}}n>-1&&this.esriMap?.add(t.esriLayer,r)}reorder(t,r,n=!1){if(r<0){console.error("Negative index passed to map reorder");return}if(!this.esriMap){this.noMapErr();return}if(t.isSublayer&&(t=t.parentLayer),!t.mapLayer){console.error("Attempted to reorder a data layer");return}const i=this.$iApi.geo.layer.allLayers();let s=this.$iApi.geo.layer.layerOrderIds();if(n){if(t.isCosmetic)return;if(r>0){const a=s.filter(l=>{const u=i.find(c=>c.id===l);return u?!u.isCosmetic:(console.error("Layer reorder had critical error"),!1)});r>=a.length&&(console.error("non-cosmetic reorder index was too high"),r=a.length-1),r=s.indexOf(a[r])}}else r>=s.length&&(console.error("reorder index was too high"),r=s.length-1);const o=s.indexOf(t.id);if(o!==r){if(Ku(this.$vApp.$pinia).reorderLayer(t,r),t.esriLayer&&this.esriMap.layers.indexOf(t.esriLayer)>-1){let a=0;if(r>0){s=this.$iApi.geo.layer.layerOrderIds();for(let l=r-1;l>-1;l--){const u=s[l],c=i.find(h=>h.id===u);if(c&&c.esriLayer){const h=this.esriMap.layers.indexOf(c.esriLayer);if(h>-1){const d=r<o?1:0;a=h+d;break}}else c||console.error("Layer reorder had critical error")}}this.esriMap.reorder(t.esriLayer,a)}this.$iApi.event.emit(St.MAP_REORDER,{layer:t,newIndex:r})}}removeSublayer(t){let r,n;if(typeof t=="string")r=t,n=this.$iApi.geo.layer.getLayer(r);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);r=t.uid,n=t}if(!n)throw new Error("Sublayer could not be found for removal.");n.visibility=!1,n.isRemoved=!0,this.$iApi.event.emit(St.LAYER_REMOVE,t),n.parentLayer?.sublayers.every(i=>i.isRemoved)&&this.removeLayer(n.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let r;if(t instanceof yN?r=t:r=this.$iApi.geo.layer.getLayer(t),!r)throw new Error("Layer could not be found for removal.");if(r.isSublayer){this.removeSublayer(r);return}r.supportsSublayers&&r.sublayers.forEach(i=>{i.isRemoved||this.removeSublayer(i)});const n=Ku(this.$vApp.$pinia);n.removeLayer(r),n.removeLayerConfig(r.id),r.removeEsriLayer(),r.initiationState===Sn.INITIATED&&r.terminate(),r.isRemoved=!0,this.$iApi.event.emit(St.LAYER_REMOVE,r)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const r=this.handlers.findIndex(n=>n.type==="pointer-move");if(r!==-1){const n=this.handlers[r];this.handlers.splice(r,1),n.handler.remove()}return r!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return fm(this.mapMouseThrottle,t=>{this.$iApi.event.emit(St.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const r=t.isOffScale(this.getScale());if(!r.offScale)return;const n=this.esriView.constraints.lods;if(!n)return this.zoomMapTo(this.getExtent().center(),(r.zoomIn,t.minScale));const i=r.zoomIn?n:[...n].reverse(),s=i.find(o=>r.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||i[i.length-1];return this.zoomToLevel(s.level)}findClosestScale(t){const r=this.esriView?.constraints.lods;if(!r)return t;const n=r.map(s=>Math.abs(s.scale-t)),i=n.indexOf(Math.min(...n));return r[i].scale}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?Io.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new Io("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const r=this.esriView.toScreen(t.toESRI());return{screenX:r.x,screenY:r.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){const r=this.$iApi.geo.layer.allLayersOnMap(!1).filter(u=>u.canIdentify());let n;if(t instanceof Io){const u=this.mapPointToScreenPoint(t);n={mapPoint:t,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else n=t;if(r===void 0)return{click:n,results:[]};let i=Promise.resolve([]);r.some(u=>u.identifyMode===Hi.HYBRID||u.identifyMode===Hi.SYMBOLIC)&&(i=this.esriView.hitTest({x:n.screenX,y:n.screenY}).then(u=>u.results.map(c=>({layerId:c.layer.id,layerIdx:0,oid:c.graphic.getObjectId()}))));const s={geometry:n.mapPoint,hitTest:i},o=r.filter(u=>u.supportsIdentify).map(u=>(s.tolerance=n.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(s))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:n};return this.$iApi.event.emit(St.MAP_IDENTIFY,l),l}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}const r=this.$iApi.geo.layer.allLayersOnMap(!1).filter(l=>l.supportsFeatures||l.layerType===Ct.GRAPHIC);if(r.length===0)return;const n=await this.esriView.hitTest({x:t.screenX,y:t.screenY});if(n.results.length===0)return;const i=n.results;let s,o;const a=new Set;if(i.some(l=>{if(a.has(l.layer.id))return!1;const u=r.find(c=>c.id===l.layer.id);return u?(!u.isCosmetic&&u.layerType!==Ct.GRAPHIC&&(s=u,o=l.graphic),!0):(a.add(l.layer.id),!1)}),s&&o)return{oid:o.getObjectId(),layerId:s.id,layerIdx:s.layerIdx}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(t){const r=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(n=>r.includes(n))||this.keyPan()):r.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"?this.runIdentify(this.getExtent().center()):t.key==="Tab"&&this._activeKeys.push(t.key)}mapKeyUp(t){const r=["=","-"];this._activeKeys.includes(t.key)&&!r.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(n=>r.includes(n))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),r=this.mapPointToScreenPoint(t),n=this.screenPointToMapPoint({screenX:r.screenX+5,screenY:r.screenY+5}),i=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y);let o=0,a=0,l=1;for(let c=0;c<this._activeKeys.length;++c)switch(this._activeKeys[c]){case"ArrowLeft":o-=i;break;case"ArrowRight":o+=i;break;case"ArrowUp":a+=s;break;case"ArrowDown":a-=s;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const IXt={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},AXt={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},MXt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},CXt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}},kXt={circlePoint:IXt,solidLine:AXt,outlinedPoly:MXt,boundingBoxPoly:CXt};var YU={exports:{}},RXt=YU.exports,Zne;function OXt(){return Zne||(Zne=1,function(e,t){(function(r,n){if(e.exports=n(Gbe()),typeof r.navigator=="object"){if(!r.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");r.Terraformer.ArcGIS=n(r.Terraformer)}})(RXt,function(r){var n={};function i(b){var S=0,E=0,x=[],w,T,I,M;I=b.match(/((\+|\-)[^\+\-]+)/g),M=parseInt(I[0],32);for(var C=1;C<I.length;C+=2)w=parseInt(I[C],32)+S,S=w,T=parseInt(I[C+1],32)+E,E=T,x.push([w/M,T/M]);return x}function s(b){return o(b[0],b[b.length-1])||b.push(b[0]),b}function o(b,S){for(var E=0;E<b.length;E++)if(b[E]!==S[E])return!1;return!0}function a(b){var S={};for(var E in b)b.hasOwnProperty(E)&&(S[E]=b[E]);return S}function l(b){var S=0,E=0,x=b.length,w=b[E],T;for(E;E<x-1;E++)T=b[E+1],S+=(T[0]-w[0])*(T[1]+w[1]),w=T;return S>=0}function u(b){var S=[],E=b.slice(0),x=s(E.shift().slice(0));if(x.length>=4){l(x)||x.reverse(),S.push(x);for(var w=0;w<E.length;w++){var T=s(E[w].slice(0));T.length>=4&&(l(T)&&T.reverse(),S.push(T))}}return S}function c(b){for(var S=[],E=0;E<b.length;E++)for(var x=u(b[E]),w=x.length-1;w>=0;w--){var T=x[w].slice(0);S.push(T)}return S}function h(b,S){var E=r.Tools.arraysIntersectArrays(b,S),x=r.Tools.coordinatesContainPoint(b,S[0]);return!!(!E&&x)}function d(b){for(var S=[],E=[],x,w,T,I=0;I<b.length;I++){var M=s(b[I].slice(0));if(!(M.length<4))if(l(M)){var C=[M.slice().reverse()];S.push(C)}else E.push(M.slice().reverse())}for(var k=[];E.length;){T=E.pop();var N=!1;for(x=S.length-1;x>=0;x--)if(w=S[x][0],h(w,T)){S[x].push(T),N=!0;break}N||k.push(T)}for(;k.length;){T=k.pop();var F=!1;for(x=S.length-1;x>=0;x--)if(w=S[x][0],r.Tools.arraysIntersectArrays(w,T)){S[x].push(T),F=!0;break}F||S.push([T.reverse()])}return S.length===1?{type:"Polygon",coordinates:S[0]}:{type:"MultiPolygon",coordinates:S}}function m(b,S){var E={};return S=S||{},S.idAttribute=S.idAttribute||void 0,b.spatialReference&&(b.spatialReference.wkid===3857||b.spatialReference.wkid===102100)&&(E.crs=r.MercatorCRS),typeof b.x=="number"&&typeof b.y=="number"&&(E.type="Point",E.coordinates=[b.x,b.y],(b.z||b.m)&&E.coordinates.push(b.z),b.m&&E.coordinates.push(b.m)),b.points&&(E.type="MultiPoint",E.coordinates=b.points.slice(0)),b.paths&&(b.paths.length===1?(E.type="LineString",E.coordinates=b.paths[0].slice(0)):(E.type="MultiLineString",E.coordinates=b.paths.slice(0))),b.rings&&(E=d(b.rings.slice(0))),typeof b.xmin=="number"&&typeof b.ymin=="number"&&typeof b.xmax=="number"&&typeof b.ymax=="number"&&(E.type="Polygon",E.coordinates=[[[b.xmax,b.ymax],[b.xmin,b.ymax],[b.xmin,b.ymin],[b.xmax,b.ymin],[b.xmax,b.ymax]]]),(b.compressedGeometry||b.geometry||b.attributes)&&(E.type="Feature",b.compressedGeometry&&(b.geometry={paths:[i(b.compressedGeometry)]}),E.geometry=b.geometry?m(b.geometry):null,E.properties=b.attributes?a(b.attributes):null,b.attributes&&(E.id=b.attributes[S.idAttribute]||b.attributes.OBJECTID||b.attributes.FID)),new r.Primitive(E)}function y(b,S){var E;S=S||{};var x=S.idAttribute||"OBJECTID";S.sr?E={wkid:S.sr}:b&&b.crs&&b.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?E=null:E={wkid:4326};var w={},T;switch(b.type){case"Point":w.x=b.coordinates[0],w.y=b.coordinates[1],b.coordinates[2]&&(w.z=b.coordinates[2]),b.coordinates[3]&&(w.m=b.coordinates[3]),w.spatialReference=E;break;case"MultiPoint":w.points=b.coordinates.slice(0),w.spatialReference=E;break;case"LineString":w.paths=[b.coordinates.slice(0)],w.spatialReference=E;break;case"MultiLineString":w.paths=b.coordinates.slice(0),w.spatialReference=E;break;case"Polygon":w.rings=u(b.coordinates.slice(0)),w.spatialReference=E;break;case"MultiPolygon":w.rings=c(b.coordinates.slice(0)),w.spatialReference=E;break;case"Feature":b.geometry&&(w.geometry=y(b.geometry,S)),w.attributes=b.properties?a(b.properties):{},b.id&&(w.attributes[x]=b.id);break;case"FeatureCollection":for(w=[],T=0;T<b.features.length;T++)w.push(y(b.features[T],S));break;case"GeometryCollection":for(w=[],T=0;T<b.geometries.length;T++)w.push(y(b.geometries[T],S));break}return w}function g(b){return new r.LineString(i(b))}return n.parse=m,n.convert=y,n.toGeoJSON=m,n.fromGeoJSON=y,n.parseCompressedGeometry=g,n})}(YU)),YU.exports}var NXt=OXt();const LXt=D_(NXt);function bSe(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function PXt(e,t){var r=bSe(e);return function(n,i){return t(r(n),i,e)}}function DXt(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function NH(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(u,c){var h,d,m=i(u,function(y,g){if(h)return h(y,g-1);d=y,h=c?PXt(y,c):bSe(y)});return m.columns=d,m}function i(u,c){var h={},d={},m=[],y=u.length,g=0,b=0,S,E;function x(){if(g>=y)return d;if(E)return E=!1,h;var T=g,I;if(u.charCodeAt(T)===34){for(var M=T;M++<y;)if(u.charCodeAt(M)===34){if(u.charCodeAt(M+1)!==34)break;++M}return g=M+2,I=u.charCodeAt(M+1),I===13?(E=!0,u.charCodeAt(M+2)===10&&++g):I===10&&(E=!0),u.slice(T+1,M).replace(/""/g,'"')}for(;g<y;){var C=1;if(I=u.charCodeAt(g++),I===10)E=!0;else if(I===13)E=!0,u.charCodeAt(g)===10&&(++g,++C);else if(I!==r)continue;return u.slice(T,g-C)}return u.slice(T)}for(;(S=x())!==d;){for(var w=[];S!==h&&S!==d;)w.push(S),S=x();c&&(w=c(w,b++))==null||m.push(w)}return m}function s(u,c){return c==null&&(c=DXt(u)),[c.map(l).join(e)].concat(u.map(function(h){return c.map(function(d){return l(h[d])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:n,parseRows:i,format:s,formatRows:o}}var fN=NH(","),FXt=fN.parse,jXt=fN.parseRows,UXt=fN.format,BXt=fN.formatRows,mN=NH("	"),VXt=mN.parse,GXt=mN.parseRows,zXt=mN.format,$Xt=mN.formatRows;const qXt=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:UXt,csvFormatRows:BXt,csvParse:FXt,csvParseRows:jXt,dsvFormat:NH,tsvFormat:zXt,tsvFormatRows:$Xt,tsvParse:VXt,tsvParseRows:GXt},Symbol.toStringTag,{value:"Module"})),HXt=Vbe(qXt);var N0={exports:{}},Jne;function WXt(){if(Jne)return N0.exports;Jne=1,N0.exports=e,N0.exports.pair=s,N0.exports.format=r,N0.exports.formatPair=t,N0.exports.coordToDMS=n;function e(a,l){var u=i(a,l);return u===null?null:u.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,l){var u=n(a,l);return u.whole+" "+(u.minutes?u.minutes+"' ":"")+(u.seconds?u.seconds+'" ':"")+u.dir}function n(a,l){var u={lat:["N","S"],lon:["E","W"]}[l]||"",c=u[a>=0?0:1],h=Math.abs(a),d=Math.floor(h),m=h-d,y=m*60,g=Math.floor(y),b=Math.floor((y-g)*60);return{whole:d,minutes:g,seconds:b,dir:c}}function i(a,l){if(l||(l="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var u=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,c=a.match(u);if(!c)return null;var h=c[0],d;if(c[1]&&c[5]?(d=c[1],h=h.slice(0,-1)):d=c[1]||c[5],d&&l.indexOf(d)===-1)return null;var m=c[2]?parseFloat(c[2]):0,y=c[3]?parseFloat(c[3])/60:0,g=c[4]?parseFloat(c[4])/3600:0,b=m<0?-1:1;return(d==="S"||d==="W")&&(b*=-1),{val:(Math.abs(m)+y+g)*b,dim:d,matched:h,remain:a.slice(h.length)}}function s(a,l){a=a.trim();var u=i(a,l);if(!u)return null;a=u.remain.trim();var c=i(a,l);return!c||c.remain?null:u.dim?o(u.val,c.val,u.dim):[u.val,c.val]}function o(a,l,u){if(u==="N"||u==="S")return[a,l];if(u==="W"||u==="E")return[l,a]}return N0.exports}var wD,Yne;function ZXt(){if(Yne)return wD;Yne=1;var e=HXt,t=WXt(),r=/(Lat)(itude)?/gi,n=/(L)(on|ng)(gitude)?/i;function i(b,S){var E,x,w;for(var T in b)x=T.match(S),x&&(!E||x[0].length/T.length>w)&&(w=x[0].length/T.length,E=T);return E}function s(b){return i(b,r)}function o(b){return i(b,n)}function a(b){return!!b.match(r)}function l(b){return!!b.match(n)}function u(b){return typeof b=="object"?Object.keys(b).length:0}function c(b){var S=[",",";","	","|"],E=[];return S.forEach(function(x){var w=e.dsvFormat(x).parse(b);if(w.length>=1){for(var T=u(w[0]),I=0;I<w.length;I++)if(u(w[I])!==T)return;E.push({delimiter:x,arity:Object.keys(w[0]).length})}}),E.length?E.sort(function(x,w){return w.arity-x.arity})[0].delimiter:null}function h(b){return delete b.columns,b}function d(b){var S=c(b);return S?h(e.dsvFormat(S).parse(b)):null}function m(b,S,E){E||(E=S,S={}),S.delimiter=S.delimiter||",";var x=S.latfield||"",w=S.lonfield||"",T=S.crs||"",I=[],M={type:"FeatureCollection",features:I};if(T!==""&&(M.crs={type:"name",properties:{name:T}}),S.delimiter==="auto"&&typeof b=="string"&&(S.delimiter=c(b),!S.delimiter)){E({type:"Error",message:"Could not autodetect delimiter"});return}var C=S.numericFields?S.numericFields.split(","):null,k=typeof b=="string"?e.dsvFormat(S.delimiter).parse(b,function(U){if(C)for(var q in U)C.includes(q)&&(U[q]=+U[q]);return U}):b;if(!k.length){E(null,M);return}var N=[],F;x||(x=s(k[0])),w||(w=o(k[0]));var P=!x||!w;if(P){for(F=0;F<k.length;F++)I.push({type:"Feature",properties:k[F],geometry:null});E(N.length?N:null,M);return}for(F=0;F<k.length;F++)if(k[F][w]!==void 0&&k[F][x]!==void 0){var B=k[F][w],O=k[F][x],v,A,R;R=t(B,"EW"),R&&(B=R),R=t(O,"NS"),R&&(O=R),v=parseFloat(B),A=parseFloat(O),isNaN(v)||isNaN(A)?N.push({message:"A row contained an invalid value for latitude or longitude",row:k[F],index:F}):(S.includeLatLon||(delete k[F][w],delete k[F][x]),I.push({type:"Feature",properties:k[F],geometry:{type:"Point",coordinates:[parseFloat(v),parseFloat(A)]}}))}E(N.length?N:null,M)}function y(b){for(var S=b.features,E={type:"Feature",geometry:{type:"LineString",coordinates:[]}},x=0;x<S.length;x++)E.geometry.coordinates.push(S[x].geometry.coordinates);return E.properties=S.reduce(function(w,T){for(var I in T.properties)w[I]||(w[I]=[]),w[I].push(T.properties[I]);return w},{}),{type:"FeatureCollection",features:[E]}}function g(b){for(var S=b.features,E={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},x=0;x<S.length;x++)E.geometry.coordinates[0].push(S[x].geometry.coordinates);return E.properties=S.reduce(function(w,T){for(var I in T.properties)w[I]||(w[I]=[]),w[I].push(T.properties[I]);return w},{}),{type:"FeatureCollection",features:[E]}}return wD={isLon:l,isLat:a,guessLatHeader:s,guessLonHeader:o,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:d,csv2geojson:m,toLine:y,toPolygon:g},wD}var _D=ZXt();const JXt={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function YXt(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,r=!0;for(let n=0;n<e.features.length;n++){const i=e.features[n];Object.assign(i.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in i&&typeof i.id<"u"&&(i.properties.ID_FILE=i.id,t=!1),"OBJECTID"in i.properties&&(i.properties.OBJECTID_FILE=i.properties.OBJECTID,delete i.properties.OBJECTID,r=!1),i.id=n+1}if(t)for(let n=0;n<e.features.length;n++)delete e.features[n].properties.ID_FILE;if(r)for(let n=0;n<e.features.length;n++)delete e.features[n].properties.OBJECTID_FILE}function XXt(e,t){const r=n=>n.indexOf(" ")>-1;t.fields?.forEach(n=>{if(n.name&&r(n.name)){const i=n.name;let s,o="_",a;do s=i.replace(/ /g,o),a=t.fields?.find(l=>l.name===s),a&&(o+="_");while(a);n.alias=i,n.name=s;for(let l=0;l<e.features.length;l++){const u=e.features[l];u.properties[s]=u.properties[i],delete u.properties[i]}}})}function QXt(e,t){const r=e.features[t].geometry.geometries;if(r.length===1)e.features[t].geometry={type:r[0].type,coordinates:r[0].coordinates};else{const n=r.map(i=>i.coordinates);e.features[t].geometry={type:`Multi${r[0].type}`,coordinates:n}}}function KXt(e){return e==="MultiLineString"?"LineString":e==="MultiPolygon"?"Polygon":e}class eQt extends Si{async fetchFileData(t,r){const n=await J3.get(t,{responseType:"arrayBuffer"});switch(r){case Ct.GEOJSON:case Ct.DATAJSON:return JSON.parse(this.arbToStr(n.data));case Ct.SHAPEFILE:case Ct.GEOJSONZIPPED:case Ct.FLATGEOBUF:case Ct.FLATGEOBUFZIPPED:return n.data;case Ct.CSV:case Ct.DATACSV:return this.arbToStr(n.data);default:console.error(`Unsupported file type passed to fetchFileData- '${r}'`)}}extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let r="";for(let o=0;o<t.features.length;o++){const a=t.features[o];if(a.geometry.type==="GeometryCollection"){const u=a.geometry.geometries;if(u===void 0||u.length===0)throw new Error("GeoJSON file has geometry collection with missing/incomplete geometries");const c=u[0].type;for(let h=0;h<u.length;h++)if(u[h].type!==c)throw new Error("GeoJSON file has geometry collection containing multiple geometry types");QXt(t,o)}const l=KXt(a.geometry.type);if(r==="")r=l;else if(r!==l)throw new Error("GeoJSON file contains multiple geometry types")}const n=Object.keys(t.features[0].properties).map(o=>({name:o,type:"string"}));let i=0;const s=Object.keys(t.features[0].properties);for(;i<t.features.length;){const o=t.features[i];if(o.properties&&Object.keys(o.properties).filter(a=>s.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=n.findIndex(c=>c.name===a);n[u]={name:a,type:this.inferType(l)},s.splice(s.indexOf(a),1)}}),s.length===0)break;i++}return n}extractCsvFields(t,r=","){return _D.dsv.dsvFormat(r).parseRows(t)[0].map(n=>({name:n,type:sh.STRING}))}filterCsvLatLonFields(t,r=","){const n=_D.dsv.dsvFormat(r).parseRows(t),i=n[0],s={lat:JSON.parse(JSON.stringify(i)),lon:JSON.parse(JSON.stringify(i))};for(let o=0;o<i.length;o++)for(let a=1;a<n.length;a++){const l=Number(n[a][o]),u=s.lat.indexOf(i[o]),c=s.lon.indexOf(i[o]);if((isNaN(l)||l<-90||l>90)&&u!==-1&&s.lat.splice(u,1),(isNaN(l)||l<-180||l>180)&&c!==-1&&s.lon.splice(c,1),u===-1&&c===-1)break}return s}async geoJsonToEsriJson(t,r){let n,i="",s;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:sh.OID}]};YXt(t);const a=t.features[0].geometry.type,l=JXt[a],u=JSON.parse(JSON.stringify(kXt[l]));if(r){if(r.sourceProjection&&(i=this.$iApi.geo.proj.normalizeProj(r.sourceProjection)),r.targetSR)n=r.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");r.layerId?s=r.layerId:s=this.$iApi.geo.shared.generateUUID(),r.colour&&(u.renderer.symbol.color=new _d(r.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");i||(i=Yt.parseGeoJsonCrs(t.crs)),o.renderer=Xm.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(r.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(t).filter(y=>r.fieldMetadata?.fieldInfo?.find(g=>g.name===y.name)):this.extractGeoJsonFields(t)),r.fieldMetadata?.enforceOrder&&r.fieldMetadata?.fieldInfo&&r.fieldMetadata?.fieldInfo.length>0&&(o.fields=this.$iApi.geo.attributes.orderFields(o.fields,r.fieldMetadata?.fieldInfo)),XXt(t,o);const c=this.$iApi.geo.proj.normalizeProj(n);if(r){if(r.latField){const y=o.fields.find(g=>g.name===r.latField||g.alias===r.latField);y&&(y.type=sh.DOUBLE)}if(r.lonField){const y=o.fields.find(g=>g.name===r.lonField||g.alias===r.lonField);y&&(y.type=sh.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([i,n]);const h=Yt.parseSR(n).toESRI();await this.$iApi.geo.proj.projectGeoJson(t,i,c);const d=LXt.convert(t,{sr:8888});o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a);const m=o.fields.map(y=>y.name);for(let y=0;y<d.length;y++){const g=d[y];g.geometry.spatialReference=h,g.geometry.type=o.geometryType,Object.keys(g.attributes).forEach(b=>{m.includes(b)?(Array.isArray(g.attributes[b])||typeof g.attributes[b]=="object")&&g.attributes[b]!=null&&(g.attributes[b]=JSON.stringify(g.attributes[b])):delete g.attributes[b]})}return(r.fieldMetadata?.fieldInfo&&r.fieldMetadata?.fieldInfo.length>0?r.fieldMetadata.fieldInfo.filter(y=>y.trim&&m.includes(y.name)).map(y=>y.name):[]).forEach(y=>{for(let g=0;g<d.length;g++){const b=d[g].attributes;typeof b[y]=="string"&&(b[y]=b[y].trim())}}),o.source=d,o.spatialReference=h,o.id=s,o}async csvToGeoJson(t,r){const n={latfield:"Lat",lonfield:"Long",delimiter:","};return r&&(r.latfield&&(n.latfield=r.latfield),r.lonfield&&(n.lonfield=r.lonfield),r.delimiter&&(n.delimiter=r.delimiter)),new Promise((i,s)=>{_D.csv2geojson(t,n,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),s(o)):(a.features.map(l=>{l.properties[n.lonfield]=l.geometry.coordinates[0],l.properties[n.latfield]=l.geometry.coordinates[1]}),i(a))})})}async shapefileToGeoJson(t){return(await Me(()=>import("./shp.min-_5t7-MuG-B0QJb5Xa.js"),__vite__mapDeps([246,247,1,2]),import.meta.url).then(r=>r.s)).default(t)}fgbToGeoJson(t,r){return Me(async()=>{const{geojson:n}=await import("./flatgeobuf-Dd2813h3-BUA_MfuC.js");return{geojson:n}},[],import.meta.url).then(({geojson:n})=>new Promise(i=>{let s=!1,o=null;const a=n.deserialize(new Uint8Array(t),void 0,c=>{o=c.crs,s=!0});let l=0;const u=setInterval(()=>{if(a&&s){clearInterval(u);let c;o&&(o.code&&o.code!==4326&&o.org==="EPSG"?c=new Yt(o.code):o.wkt?c=new Yt(o.wkt):console.error("Encountered FlatGeobuf with non-EPSG org: ",o)),c&&(a.crs=c.toGeoJSON()),i(a)}else l+=60,l>r&&(clearInterval(u),i({}))},60)}))}inferType(t){return typeof t=="number"?sh.DOUBLE:sh.STRING}rawDataJsonParser(t,r=!1){let n;return typeof t=="string"?n=JSON.parse(t):r?n=structuredClone(t):n=t,n}async unzipSingleFile(t){const r=await Me(()=>import("./jszip.min-BZRU6n00-DN1PYNg1.js"),__vite__mapDeps([248,247,1,2]),import.meta.url).then(s=>s.j),n=await new r.default().loadAsync(t),i=Object.keys(n.files)[0];if(i&&n.file(i))return await n.file(i).async("arraybuffer");throw new Error("Could not find file in zipfile data.")}async binaryInitHelper(t){if(t.rawData&&t.rawData instanceof ArrayBuffer)return t.rawData;if(t.url)return this.$iApi.geo.layer.files.fetchFileData(t.url,t.layerType);throw new Error(`${t.layerType} config contains no url or invalid/missing raw data`)}arbToStr(t){return new TextDecoder("utf-8").decode(new Uint8Array(t))}}const tQt=JSON.parse("[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700]");function qm(e,t){return e.then(function(r){return[null,r]}).catch(function(r){return[r,void 0]})}class rQt extends Si{async loadWfsData(t,r=-1,n=0,i=1e3,s={type:"FeatureCollection",features:[]},o=!1){let a={offset:n.toString(),limit:i.toString()};r===-1&&(a={resulttype:"hits"});const l=new XE(t).updateQuery(a),[u,c]=await qm(J3.get(l));if(!c)return console.error(`WFS data failed to load for ${t}`,u),Promise.reject(u);const h=c.data;if(r===-1)return r=c.data.numberMatched,this.loadWfsData(t,r,n,i,s,o);if(s.features=s.features.concat(h.features),h.features.length<r-n){const d=Math.min(i,r-n-h.features.length);return this.loadWfsData(l,r,h.features.length+n,d,s,o)}else return o&&s.features.length>0&&s.features[0].geometry.type===ai.POINT&&s.features.forEach(d=>{const m=d.geometry.coordinates;d.properties.rvInternalCoordX=m[0],d.properties.rvInternalCoordY=m[1]}),s}reversedAxisWKIDs(){return tQt}parseCapabilities(t){const r=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new XE(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Xe(o,{responseType:"xml"}).then(a=>a.data)},n=new Promise(o=>{r().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(r())})}),i=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,c=l.Title;let h=l.Style;const d=[],m={};return h&&(Array.isArray(h)||(h=[h]),h.forEach(y=>{const g=y.Name;if(d.push(g),y.LegendURL){const b=y.LegendURL.OnlineResource["@_xlink:href"];m[g]=b.replaceAll("&amp;","&")}})),{name:u?.toString()??null,title:c,queryable:l["@_queryable"]==="1",layers:i(l),allStyles:d,styleToURL:m,currentStyle:d[0]}})):[]},s=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return Me(()=>import("./fxp-BPfEykj3-DQYybnRw.js"),[],import.meta.url).then(o=>o.f).then(({XMLParser:o})=>n.then(a=>{if(!a)return[];const l=new XMLSerializer().serializeToString(a),u={ignoreAttributes:!1},c=new o(u).parse(l);if("ServiceExceptionReport"in c)return console.error(c.ServiceExceptionReport.ServiceException),[];const h=c.WMS_Capabilities.Capability;return{layers:i(h),queryTypes:s(h.Request.GetFeatureInfo)}}))}}class Zw{static makeRawItem(t,r){const n=Promise.resolve();return Ts({format:t,data:r,started:!0,loaded:!0,loading:n,load(){return n}})}static makeOidItem(t,r){const n=new bi,i={format:tg.ESRI,data:void 0,started:!1,loaded:!1,loading:n.getPromise(),async load(){if(!this.started){this.started=!0;const s=await r.getGraphic(t,{getAttribs:!0});this.data=s.attributes,this.loaded=!0,n.resolveMe()}return n.getPromise()}};return Ts(i)}}class nQt extends Si{files;ogc;constructor(t){super(t),this.files=new eQt(t),this.ogc=new rQt(t)}createLayer(t){let r;switch(t.layerType){case Ct.FEATURE:r=cQt;break;case Ct.MAPIMAGE:r=hQt;break;case Ct.GRAPHIC:r=xSe;break;case Ct.TILE:r=SSe;break;case Ct.WFS:r=yQt;break;case Ct.DATATABLE:r=vQt;break;case Ct.WMS:r=mQt;break;case Ct.GEOJSON:r=iQt;break;case Ct.GEOJSONZIPPED:r=aQt;break;case Ct.FLATGEOBUFZIPPED:r=uQt;break;case Ct.CSV:r=oQt;break;case Ct.DATAJSON:r=gQt;break;case Ct.IMAGERY:r=fQt;break;case Ct.SHAPEFILE:r=sQt;break;case Ct.FLATGEOBUF:r=lQt;break;case Ct.OSM:r=dQt;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new r(t,this.$iApi)}getLayer(t){return Ku(this.$vApp.$pinia).getLayerByAny(t)}getSublayer(t,r){const n=Ku(this.$vApp.$pinia).getLayerById(t);if(n&&n.supportsSublayers&&r<n.sublayers.length)return n.sublayers[r]}getLayerPosition(t){const r=this.getLayer(t);if(r&&r.mapLayer){const n=r.isSublayer?r.parentLayer.id:r.id,i=this.layerOrderIds().findIndex(s=>s===n);return i===-1?void 0:i}else return}layerOrderIds(){return Ku(this.$vApp.$pinia).mapOrder.slice(0)||[]}allLayers(){return Ku(this.$vApp.$pinia).layers||[]}allActiveLayers(){return this.allLayers().filter(t=>t.layerState!==Hn.ERROR&&t.initiationState===Sn.INITIATED)}allLayersOnMap(t=!0){let r=this.allLayers().filter(n=>n.mapLayer&&n.initiationState===Sn.INITIATED);if(t){const n=this.layerOrderIds(),i=new Map(n.map((s,o)=>[s,o]));r.sort((s,o)=>i.get(s.id)-i.get(o.id))}return r}allDataLayers(){return this.allLayers().filter(t=>!t.mapLayer&&t.initiationState===Sn.INITIATED)}allErrorLayers(){return this.allLayers().filter(t=>t.layerState===Hn.ERROR)}allInitiatingLayers(){return this.allLayers().filter(t=>t.initiationState===Sn.INITIATING)}getLayerControls(t){const r=this.getLayer(t);if(!r)return;const n=r.config.controls?.slice()??[oi.BoundaryZoom,oi.Datatable,oi.Identify,oi.Metadata,oi.Opacity,oi.Refresh,oi.Reload,oi.Remove,oi.Settings,oi.Symbology,oi.Visibility],i=[];return r.supportsFeatures||i.push(oi.Datatable),r.extent===void 0&&i.push(oi.BoundaryZoom),(r.config?.metadata||(r.isSublayer?r.parentLayer?.config?.metadata:{})||{}).url||i.push(oi.Metadata),!r.mapLayer&&!r.config.controls?.includes(oi.Settings)&&i.push(oi.Settings),i.forEach(s=>{const o=n?.indexOf(s)??-1;o!==-1&&n?.splice(o,1)}),{controls:n,disabledControls:r.config.disabledControls??[]}}async loadLayerMetadata(t){if(!t.trim())throw new Error("url missing on layer server metadata request.");const[r,n]=await qm(Xe(t,{query:{f:"json"}}));if(!n)throw console.error(`Service metadata load error: ${t}`,r),new Error(`Service metadata load error: ${t}`);if(!n.data)throw console.error(`Service metadata load error: ${t}`),new Error(`Service metadata load error: ${t}`);const i=n.data,s={geometryType:or.NONE,minScale:0,maxScale:0,canModifyLayer:!0,extent:void 0,defaultVisibility:!0,fields:[],displayField:"",objectIdField:"",renderer:void 0,currentVersion:0,name:"",dataFormat:Us.UNKNOWN,mapLayer:!0};if(s.name=i.name||"",s.currentVersion=i.currentVersion||-1,s.minScale=i.effectiveMinScale||i.minScale||0,s.maxScale=i.effectiveMaxScale||i.maxScale||0,s.extent=i.extent?Tn.fromArcServer(i.extent,"layer_extent"):void 0,s.defaultVisibility=i.defaultVisibility??!0,s.canModifyLayer=i.canModifyLayer??!0,i.type==="Feature Layer"||i.type==="Table"){if(s.dataFormat=Us.ESRI_FEATURE,s.displayField=i.displayField||"",Array.isArray(i.fields)){const o=i.fields.map(a=>xa.fromJSON(a));s.fields=o.map(a=>({name:a.name,alias:a.alias,type:a.type,length:a.length})),o.every(a=>a.type==="oid"?(s.objectIdField=a.name,!1):!0)&&(s.objectIdField=i.objectIdField||(console.error(`Encountered service with no OID defined: ${t}`),"")),i.type==="Feature Layer"?(s.geometryType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(i.geometryType),i.drawingInfo?.renderer&&(s.renderer=jg(i.drawingInfo.renderer)),i.sourceSpatialReference&&(s.sourceSR=Yt.fromConfig(i.sourceSpatialReference))):s.mapLayer=!1}}else s.dataFormat=Us.ESRI_RASTER;return s}async loadFeatureCount(t,r=""){if(!t)return console.error("A layer without a url attempted to run the server based feature count routine."),0;const n={query:{f:"json",where:r||"1=1",returnCountOnly:!0,returnGeometry:!1}},[i,s]=await qm(Xe(`${t}/query`,n));return s?s.data?Number.isInteger(s.data.count)?s.data.count:(console.error(`Funny result (${s.data.count}) during feature count: ${t}`),0):(console.error(`Unable to load feature count: ${t}`),0):(console.error(`Feature count request unsuccessful: ${t}`,i),0)}}class yN extends Si{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;mapLayer;featureCount;fields;fieldList;nameField;oidField;expectedTime;lastCancel;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;esriLayer;esriSubLayer;esriView;extent;sourceSR;canModifyLayer;canReload;url;_parentLayer;_sublayers;constructor(t,r){super(r),this.config=t,this.id="",this.uid="",this.name="error",this.layerState=Hn.NEW,this.drawState=Ia.NOT_LOADED,this.initiationState=Sn.NEW,this.layerIdx=-1,this.layerFormat=yl.UNKNOWN,this.layerType=Ct.UNKNOWN,this.dataFormat=Us.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=Hi.NONE,this.supportsFeatures=!1,this.mapLayer=!0,this.featureCount=0,this.fields=[],this.fieldList="",this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=!1,this.userAdded=!1,this.identify=!1,this.hovertips=!1,this.geomType=or.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0,fail:0},this.lastCancel=0,this.canModifyLayer=!0,this.canReload=!0,this.url=""}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}cancelLoad(){}removeEsriLayer(){}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getFieldsToTrim(){return[]}getLayerTree(){return new RC(0,"Fake tree","getLayerTree() was not implemented in layer")}getSR(){return Yt.latLongSR()}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new Ube}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(t){}get touchTolerance(){return 0}set touchTolerance(t){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(t){return[]}getAttributes(){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}downloadedAttributes(){return 0}attribLoadAborted(){return!1}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,r){return Promise.resolve(new Kl(new n0))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,r){}applySqlFilter(t=[]){}getFilterOIDs(t=[],r=void 0){return Promise.resolve(void 0)}getGraphicExtent(t){return Promise.resolve(Tn.fromParams("fake",0,0,0,0))}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}onError(t=!0){}updateLayerState(t,r=!1){}updateDrawState(t){}updateInitiationState(t){}uidToIdx(t){if(t===this.uid)return-1;{const r=this._sublayers.findIndex(n=>n?.uid===t);if(r===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return r}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let r;if(typeof t=="string"?r=this.uidToIdx(t):r=t,this._sublayers[r]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[r]}controlAvailable(t){const r=this.$iApi.geo.layer.getLayerControls(this.id);return this.$iApi.geo.shared.controlAvailable(t,r)}}class wSe extends yN{timers;origRampConfig;loadDefProm;loadPromDone;layerTree;constructor(t,r){super(t,r),this.name=t.name||"",this.geomType=or.NONE,this.dataFormat=Us.UNKNOWN,this.layerType=Ct.UNKNOWN,this.layerFormat=yl.UNKNOWN;const n=r.geo.map.layerDefaultTimes;this.expectedTime.draw=t.expectedDrawTime??n.draw,this.expectedTime.load=t.expectedLoadTime??n.load,this.expectedTime.fail=t.maxLoadTime||n.fail,this.lastCancel=0,this.timers={draw:void 0,load:void 0},this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isCosmetic=!1,this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.mapLayer=!0,this.identifyMode=Hi.NONE,this.supportsFeatures=!1,this.hovertips=!1,this.supportsSublayers=!1,this.isFile=!1,this.layerState=Hn.NEW,this.initiationState=Sn.NEW,this.drawState=Ia.NOT_LOADED,this.loadDefProm=new bi,this.url=this.origRampConfig.url,this.canReload=!!(this.url||this.origRampConfig.caching),this.loadPromDone=!1,this.layerTree=new RC(0,this.uid,this.name,!0)}updateInitiationState(t){this.initiationState=t,this.$iApi.event.emit(St.LAYER_INITIATIONSTATECHANGE,{state:t,layer:this})}updateLayerState(t,r=!1){this.layerState=t,this.$iApi.event.emit(St.LAYER_LAYERSTATECHANGE,{state:t,layer:this,userCancel:r})}updateDrawState(t){this.drawState=t,t===Ia.REFRESH?this.startTimer("draw"):t===Ia.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(St.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){this.updateInitiationState(Sn.INITIATING),this.startTimer("load");const t=s=>{this.layerState!==Hn.ERROR&&(console.error(s),this.onError())},r=Date.now(),n=setTimeout(()=>{r>this.lastCancel&&(this.lastCancel=Date.now(),t("Layer timed out during initialize. Id: "+this.id))},this.expectedTime.fail),[i]=await qm(this.onInitiate());clearTimeout(n),r>this.lastCancel&&(this.drawState!==Ia.UP_TO_DATE&&this.startTimer("draw"),i?t(`Init error on layer id: ${this.id} . ${i.message}`):this.updateInitiationState(Sn.INITIATED))}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();this.initiationState===Sn.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`)}async terminate(){this.updateInitiationState(Sn.TERMINATING),await Promise.all(this.sublayers.map(t=>t.terminate())),this.loadDefProm=new bi,this.loadPromDone=!1,this.updateLayerState(Hn.NEW),this.updateDrawState(Ia.NOT_LOADED),this.updateInitiationState(Sn.TERMINATED)}onLoad(){const t=Date.now();let r=!1;const n=setTimeout(()=>{r=!0,this.onError()},this.expectedTime.fail);try{const i=this.onLoadActions();Promise.all(i).then(()=>{clearTimeout(n),r?this.visibility=!1:(this.stopTimer("load"),t>this.lastCancel&&(this.loadPromDone&&(this.loadDefProm=new bi),this.loadDefProm.resolveMe(),this.loadPromDone=!0,this.sublayers.forEach(s=>s.onLoad()),this.updateLayerState(Hn.LOADED)))}).catch(()=>{clearTimeout(n),this.onError()})}catch(i){console.error("Encountered error on layer load: ",i),clearTimeout(n),this.onError()}}onError(t=!0){this.layerState!==Hn.ERROR&&(this.initiationState===Sn.INITIATING&&this.updateInitiationState(Sn.NEW),this.loadPromDone&&(this.loadDefProm=new bi),this.loadDefProm.rejectMe(),this.loadPromDone=!0,this.sublayers.forEach(r=>r.onError(t)),t&&this.$iApi.notify.show(Fa.ERROR,this.$iApi.$i18n.t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(Hn.ERROR,!t))}onLoadActions(){return[]}cancelLoad(){this.isLoaded||this.initiationState===Sn.NEW||this.initiationState===Sn.TERMINATING||this.initiationState===Sn.TERMINATED||(this.lastCancel=Date.now(),this.esriLayer&&this.esriLayer.loadStatus==="loading"&&this.esriLayer.cancelLoad(),this.removeEsriLayer(),this.onError(!1))}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===Hn.LOADED}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}getLayerTree(){return this.layerTree}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,r){return this.stubError(),Promise.resolve(new Kl(new n0))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,r){this.stubError()}getFilterOIDs(t=[],r=void 0){return this.stubError(),Promise.resolve(void 0)}getGraphicExtent(t){return this.stubError(),Promise.resolve(Tn.fromParams("fake",0,0,0,0))}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,r,n=!0){this.stubError()}startTimer(t){this.stopTimer(t),this.expectedTime[t]>0&&(this.timers[t]=window.setTimeout(()=>this.$iApi.notify.show(Fa.WARNING,this.$iApi.$i18n.t(`layer.long${t}`,{id:this.name||this.id})),this.expectedTime[t]))}stopTimer(t){this.timers[t]&&(clearTimeout(this.timers[t]),this.timers[t]=void 0)}}class T1 extends wSe{_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";viewDefProm;esriWatches;constructor(t,r){super(t,r),this._scaleSet=new Ube,this._mouseTolerance=t.mouseTolerance!=null?t.mouseTolerance:5,this._touchTolerance=t.touchTolerance!=null?t.touchTolerance:15,this._drawOrder=[],this._serverVisibility=void 0,this.isCosmetic=t.cosmetic||!1,this.extent=t.extent?Tn.fromConfig(`${this.id}_extent`,t.extent):void 0,this.viewDefProm=new bi,this.esriWatches=[]}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed. Layer id "+this.id),console.trace()}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded. Layer id "+this.id),console.trace()}async onInitiate(){if(await super.onInitiate(),!this.esriLayer){this.noLayerErr();return}this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(St.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(St.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const r={"not-loaded":Hn.LOADING,loading:Hn.LOADING,loaded:Hn.LOADED,failed:Hn.ERROR};t==="loaded"?this.onLoad():t==="failed"?this.onError():this.updateLayerState(r[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",r=>{this.updateDrawState(r?Ia.REFRESH:Ia.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(t=>t.initiate())}async terminate(){this.esriLayer=void 0,await super.terminate(),this.viewDefProm=new bi,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[]}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.removeEsriLayer();const t=Date.now();if(this.$iApi.event.emit(St.LAYER_RELOAD_START,this),this.sublayers.forEach(r=>this.$iApi.event.emit(St.LAYER_RELOAD_START,r)),await this.terminate(),await this.initiate(),!(this.lastCancel>t)){if(!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.insertToEsriMap(this),this.$iApi.event.emit(St.LAYER_RELOAD_END,this),this.sublayers.forEach(r=>this.$iApi.event.emit(St.LAYER_RELOAD_END,r))}}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}removeEsriLayer(){this.esriLayer&&this.$iApi.geo.map.esriMap&&this.$iApi.geo.map.esriMap.layers.findIndex(t=>t.id===this.id)>-1&&this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer)}onLoadActions(){const t=super.onLoadActions();this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify);const r=this.$iApi.geo.proj.checkProj(this.getSR()).then(n=>n?Promise.resolve():Promise.reject());return t.push(r),t}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),console.trace(),!1)}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let r;if(typeof t>"u")if(this.mapCheck())r=this.$iApi.geo.map.getScale();else return!1;else r=t;return this.scaleSet.isOffScale(r).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=t}get touchTolerance(){return this._touchTolerance}set touchTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=t}get layerExists(){return this.initiationState===Sn.INITIATED&&!!this.esriLayer}get drawOrder(){return this._drawOrder}get visibility(){return this.layerExists?this.esriLayer.visible:!1}set visibility(t){this.layerExists?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&this.layerExists&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.layerExists?this.esriLayer.opacity:0}set opacity(t){this.layerExists?this.esriLayer.opacity=t:this.noLayerErr()}getSR(){return this.esriLayer?Yt.fromESRI(this.esriLayer.spatialReference):(this.noLayerErr(),Yt.latLongSR())}}class LH extends T1{attribs;renderer;serviceUrl;canModifyLayer;filter;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.geomType=or.UNKNOWN,this.serviceUrl="",this.fieldList="",this.canModifyLayer=!0,this.filter=new Bbe(t.permanentFilteredQuery||"",t.initialFilteredQuery||""),this.hovertips=t.state?.hovertips??!0,this.attribs=new TSe}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const r=Date.now(),n=await this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl);if(!(r<this.lastCancel))if(this.geomType=n.geometryType,this.attribs.quickCache=new ASe(this.geomType),this.scaleSet.minScale=n.minScale,this.scaleSet.maxScale=n.maxScale,this.dataFormat=n.dataFormat,this.extent=this.extent??n.extent,this._serverVisibility=n.defaultVisibility,this.dataFormat===Us.ESRI_FEATURE){this.supportsFeatures=!0,this.canModifyLayer=this.layerType===Ct.SUBLAYER?n.canModifyLayer:!0,this.fields=n.fields,this.nameField=n.displayField,this.oidField=n.objectIdField,this.sourceSR=n.sourceSR,this.drawOrder.forEach(o=>{o.field&&this.fields.findIndex(a=>a.name===o.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${o.field}`)});const i=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:n.renderer;this.renderer=this.$iApi.geo.symbology.makeRenderer(i,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const s={supportsLimit:(n.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*",permanentFilter:this.getSqlFilter(co.PERMANENT)};this.attribs.attLoader=new ISe(this.$iApi,s),this.origRampConfig.name||(this.name=n.name??this.id)}else this.supportsFeatures=!1,this.supportsIdentify=!1}getAttributes(){return this.attribs.attLoader.getAttribs()}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}getFieldsToTrim(){return this.fields.filter(t=>t.trim).map(t=>t.name)}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,r){let n={},i=new n0;const s=this.$iApi.geo.map;let o=!1,a=!1,l=0;if(r.getAttribs||r.getStyle){const c=this.attribs.quickCache.getAttribs(t);if(c)n=c;else if(this.attribs.attLoader.isLoaded()||this.isFile){const h=await this.attribs.attLoader.getAttribs();n=h.features[h.oidIndex[t]]}else o=!0}if(r.getGeom){l=s.getScale();const c=this.attribs.quickCache.getGeom(t,l);c?i=c:a=!0}if(o||a){const c={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList,fieldsToTrim:this.getFieldsToTrim()};a&&(c.mapSR=s.getSR().wkid?.toString(),this.attribs.quickCache.isPoint||(c.maxOffset=s.esriView?.resolution));const h=await this.$iApi.geo.attributes.loadSingleFeature(c);a&&(this.attribs.quickCache.setGeom(t,h.geometry,l),i=h.geometry),(o||typeof this.attribs.quickCache.getAttribs(t)>"u")&&(this.attribs.quickCache.setAttribs(t,h.attributes),o&&(n=h.attributes))}const u=new Kl(i,"",r.getAttribs?n:void 0);if(r.getStyle){const c=Xt(this.renderer.getGraphicSymbol(n));u.style=this.$iApi.geo.geom.styleEsriToRamp(c)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const r=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(r.attributes||{},this.renderer)}setSqlFilter(t,r){const n=this.filter.getSql(t);if(r===n)return;this.filter.setSql(t,r),this.$iApi.event.emit(St.FILTER_CHANGE,{uid:this.uid,filterKey:t});const i=`${this.uid}-${t}-${r}`;this._lastFilterUpdate=i,setTimeout(()=>{this._lastFilterUpdate===i&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error(`attempted to apply sql filter ${t} to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter`)}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const n=this.filter.getCombinedSql(t),i=!!r;if(!(n||i))return;r&&this.filter.setExtent(r);const s=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(s,i);if(!o){const a={filterGeometry:r,filterSql:n,includeGeometry:!1,sourceSR:this.sourceSR};o=this.queryOIDs(a),this.filter.setCache(o,s,i)}return o}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){const r=await this.queryOIDs(t),n={getGeom:!!t.includeGeometry,getAttribs:!0};return r.map(i=>({oid:i,graphic:this.getGraphic(i,n)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(n=>n.graphic))}configDrawOrder(t,r){Array.isArray(t.drawOrder)&&t.drawOrder.length>0&&(r.orderBy=t.drawOrder.map(n=>{const i=n.ascending??!0?"ascending":"descending";return n.field?{field:n.field,order:i}:{valueExpression:n.arcade,order:i}}),this._drawOrder=t.drawOrder.slice())}}class _Se extends T1{constructor(t,r){super(t,r),this.dataFormat=Us.ESRI_FEATURE,this.layerFormat=yl.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getGraphicCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(r=>r.id===t)}getEsriGraphic(t){return this.esriLayer?.graphics.find(r=>r.id===t)}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.layerExists){this.noLayerErr();return}let r;t instanceof Array?r=t:r=[t];const n=r.filter(l=>this._graphics.findIndex(u=>u.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),i=this.$iApi.geo.map.getSR(),s=n.map(l=>this.$iApi.geo.proj.projectGeometry(i,l.geometry)),o=await Promise.all(s),a=n.map((l,u)=>{const c=new Kl(o[u],l.id,l.attributes);return c.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(c)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.layerExists){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let r;Array.isArray(t)?r=t:r=[t],r.map(n=>typeof n=="string"?n:n.id).forEach(n=>{const i=this.esriLayer.graphics.findIndex(o=>o.id===n);i>-1&&this.esriLayer.graphics.removeAt(i);const s=this._graphics.findIndex(o=>o.id===n);s>-1&&this._graphics.splice(s,1)})}}class xSe extends _Se{constructor(t,r){super(t,r),this.layerType=Ct.GRAPHIC}async onInitiate(){this.esriLayer=wi(new ame(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(Ia.UP_TO_DATE),t}}class I1 extends LH{esriJson;sourceGeoJson;tooltipField;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=Us.ESRI_FEATURE,this.layerFormat=yl.FEATURE,this.tooltipField="",this.layerIdx=0,t.identifyMode&&t.identifyMode!==Hi.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Hi.HYBRID}async reload(){if(this.origRampConfig.caching!==!0&&!this.origRampConfig.url){console.error("Attempted to reload file layer from non server source without caching enabled.");return}await super.reload()}async onInitiate(){if(!this.sourceGeoJson)throw new Error("File Layer is missing source data.");const t={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata,latField:this.origRampConfig.latField||"",lonField:this.origRampConfig.longField||""};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(this.sourceGeoJson,t),this.esriLayer=wi(new pO(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData,delete this.sourceGeoJson,await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),n="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(i=>{r[i]=this.esriJson[i]}),this.origRampConfig.nameField?r.displayField=this.$iApi.geo.attributes.fieldValidator(r.fields,this.origRampConfig.nameField)||n:r.displayField=n,r.outFields=["*"],delete r.url,this.configDrawOrder(t,r),r}onLoadActions(){const t=super.onLoadActions();return this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=jg(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.tooltipField)||this.nameField:this.tooltipField=this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewDefProm.getPromise()),this.filter.getCombinedSql()&&Promise.all(t).then(()=>{this.applySqlFilter()}),t}runIdentify(t){if(!this.canIdentify())return[];const r=new bi,n=Ts({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let i=Promise.resolve(),s=Promise.resolve(),o=[],a=[];if(this.identifyMode===Hi.HYBRID||this.identifyMode===Hi.GEOMETRIC){const l={includeGeometry:!1};this.geomType!==or.POLYGON&&t.geometry.type===or.POINT?l.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):l.filterGeometry=t.geometry,l.filterSql=this.getCombinedSqlFilter(),s=this.queryFeatures(l).then(u=>{o=u})}return t.hitTest&&(this.identifyMode===Hi.HYBRID||this.identifyMode===Hi.SYMBOLIC)&&(i=s.then(async()=>{const l=await t.hitTest;a=await Promise.all(l.filter(u=>u.layerId===this.id&&o.findIndex(c=>u.oid===c.attributes[this.oidField])===-1).map(u=>u.oid))})),Promise.all([i,s]).then(()=>{o.forEach(l=>{n.items.push(Zw.makeRawItem(tg.ESRI,l.attributes))}),a.forEach(l=>{n.items.push(Zw.makeOidItem(l,this))}),n.loaded=!0,r.resolveMe()}).catch(()=>{n.errored=!0,r.resolveMe()}),[n]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=this.extent??Tn.fromESRI(t.fullExtent,this.id+"_extent");const r=wi(t.fields.slice());this.fields=r.map(i=>({name:i.name,alias:i.alias,type:i.type,length:i.length})),this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const n={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1,fieldsToTrim:[]};this.attribs.attLoader=new wQt(this.$iApi,n)}async getGraphic(t,r){let n;if(!r.getGeom&&this.attribs.attLoader.isLoaded()){const i=await this.attribs.attLoader.getAttribs();n=new Kl(new n0,"",i.features[i.oidIndex[t]])}else{const i={filterOIDs:[t],includeGeometry:!!r.getGeom},s=await this.queryFeatures(i);if(s.length===0)throw new Error(`Could not find object id ${t}`);s.length!==1&&console.warn("did not get a single result on a query for a specific object id"),n=s[0]}if(r.getStyle){const i=Xt(this.renderer.getGraphicSymbol(n.attributes));n.style=this.$iApi.geo.geom.styleEsriToRamp(i)}return n}async queryFeatures(t){const r={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(r)}async queryOIDs(t){const r={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(r)).map(n=>n.attributes?n.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);Xt(this.esriView).filter=new DG({where:r})}}class iQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.GEOJSON}async onInitiate(){let t;const r=Date.now();if(this.origRampConfig.rawData)t=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");r>this.lastCancel&&(this.sourceGeoJson=t,await super.onInitiate())}}class sQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.SHAPEFILE}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const n=await this.$iApi.geo.layer.files.shapefileToGeoJson(r);t>this.lastCancel&&(this.sourceGeoJson=n,await super.onInitiate())}}}class oQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;const r=Date.now();if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");if(r>this.lastCancel){const n=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField});r>this.lastCancel&&(this.sourceGeoJson=n,await super.onInitiate())}}}class aQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.GEOJSONZIPPED}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const n=await this.$iApi.geo.layer.files.unzipSingleFile(r);t>this.lastCancel&&(this.sourceGeoJson=JSON.parse(this.$iApi.geo.layer.files.arbToStr(n)),await super.onInitiate())}}}class lQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.FLATGEOBUF}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const n=await this.$iApi.geo.layer.files.fgbToGeoJson(r,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=n,await super.onInitiate())}}}class uQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.FLATGEOBUFZIPPED}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const n=await this.$iApi.geo.layer.files.unzipSingleFile(r);if(t>this.lastCancel){const i=await this.$iApi.geo.layer.files.fgbToGeoJson(n,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=i,await super.onInitiate())}}}}class cQt extends LH{tooltipField;constructor(t,r){super(t,r),this.dataFormat=Us.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=Ct.FEATURE,this.layerFormat=yl.FEATURE,t.identifyMode&&t.identifyMode!==Hi.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Hi.HYBRID}async onInitiate(){wi(this.esriLayer=new pO(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return(t.initialFilteredQuery||t.permanentFilteredQuery)&&(r.definitionExpression=this.filter.getCombinedSql()),this.configDrawOrder(t,r),r}onLoadActions(){const t=Date.now(),r=super.onLoadActions(),n=this.esriLayer&&this.origRampConfig.customRenderer?.type;n&&(this.esriLayer.renderer=jg(this.origRampConfig.customRenderer));const i=this.esriLayer.parsedUrl.path,s=this.$iApi.geo.shared.parseUrlIndex(i).index||0;this.layerIdx=s,this.serviceUrl=i;const o=this.loadLayerMetadata(n?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{t>this.lastCancel&&(this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim()))}),a=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(co.PERMANENT)).then(l=>{t>this.lastCancel&&(this.featureCount=l)});return this.layerTree.name=this.name,this.layerTree.layerIdx=s,r.push(o,a),r}runIdentify(t){if(!this.canIdentify())return[];const r=new bi,n=Ts({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let i=Promise.resolve(),s=Promise.resolve(),o=[];if(this.identifyMode===Hi.HYBRID||this.identifyMode===Hi.GEOMETRIC){const a={includeGeometry:!1,sourceSR:this.sourceSR};this.geomType!==or.POLYGON&&t.geometry.type===or.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),s=this.queryOIDs(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===Hi.HYBRID||this.identifyMode===Hi.SYMBOLIC)&&(i=s.then(async()=>{(await t.hitTest).filter(a=>a.layerId===this.id&&o.findIndex(l=>a.oid===l)===-1).forEach(a=>{o.push(a.oid)})})),Promise.all([i,s]).then(()=>{o.forEach(a=>{n.items.push(Zw.makeOidItem(a,this))}),n.loaded=!0,r.resolveMe()}).catch(()=>{n.errored=!0,r.resolveMe()}),[n]}applySqlFilter(t=[]){if(this.layerExists){const r=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=r}else this.noLayerErr()}getGraphicExtent(t){return new Promise((r,n)=>{if(!this.layerExists)this.noLayerErr(),n();else if(!["multipoint","polyline","polygon"].includes(this.esriLayer.geometryType))console.error(`Attempted to query extent for invalid geometry type ${this.esriLayer.geometryType}.`),n();else{const i=this.attribs.quickCache.getExtent(t);i?r(i):this.esriLayer.queryExtent({objectIds:[t],outSpatialReference:this.$iApi.geo.map.getSR().toESRI()}).then(s=>{const o=Tn.fromESRI(s.extent);this.attribs.quickCache.setExtent(t,o),r(o)}).catch(()=>{console.error(`Extent querying failed for ${t}.`),n()})}})}}class hQt extends T1{isDynamic;origState;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=Ct.MAPIMAGE,this.layerFormat=yl.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=Hi.GEOMETRIC}async onInitiate(){this.esriLayer=wi(new Hz(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return this.origState={visibility:r.visible,opacity:r.opacity},r.visible=!1,t.imageFormat&&(r.imageFormat=t.imageFormat),r}onLoadActions(){const t=super.onLoadActions();if(!this.layerExists)return this.noLayerErr(),t;const r=Date.now();if(this.layerTree.name=this.name,!this.esriLayer.capabilities.exportMap)throw this.$iApi.notify.show(Fa.WARNING,this.$iApi.$i18n.t("layer.noexportmap",{name:this.name||this.id})),new Error("Service does not support Map Image Layer, Map Export is not enabled");this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??Tn.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const n=l=>{const u=this.esriLayer?.allSublayers.find(c=>c.id===l);if(!u)throw new Error("attempt to find map image sublayer failed");return u},i={};this.origRampConfig.sublayers.forEach(l=>{i[l.index||0]=l});const s=[],o=(l,u)=>{const c=l.id,h=i[c];if(l.sublayers&&l.sublayers.length>0){const d=(h?h.name:"")||l.title||"",m=new RC(c,"",d,!1);u.findChildByIdx(c)||u.children.push(m),l.sublayers.reverse().forEach(y=>{o(y,m)})}else{this._sublayers[c]||(this._sublayers[c]=new pQt({id:`${this.id}-${c}`,index:c,layerType:Ct.SUBLAYER,name:h?.name,state:h?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:h?.extent,controls:h?.controls,disabledControls:h?.disabledControls,initialFilteredQuery:h?.initialFilteredQuery,permanentFilteredQuery:h?.permanentFilteredQuery,labels:h?.labels},this.$iApi,this));const d=this._sublayers[c];if(d.isRemoved)return;if(d.name=h?.name||l.title||"",s.push(d),!u.children.map(m=>m.layerIdx).includes(c)){const m=new RC(c,d.uid,d.name,!1);u.children.push(m)}d.esriWatches.push(l.watch("visible",()=>{this.$iApi.event.emit(St.LAYER_VISIBILITYCHANGE,{visibility:d.visibility,layer:d}),d.parentLayer?.checkVisibility()}),l.watch("opacity",m=>{this.$iApi.event.emit(St.LAYER_OPACITYCHANGE,{opacity:m,layer:d})}))}};this.origRampConfig.sublayers.forEach(l=>{if(!l.cosmetic){const u=n(l.index||0);o(u,this.layerTree)}});const a=s.map(async l=>{const u=n(l.layerIdx),c=i[l.layerIdx];if(l.serviceUrl=u.url,l.fetchEsriSublayer(this),await l.initiate(),r<this.lastCancel)return;const h=l.esriSubLayer&&c?.customRenderer?.type;if(h&&(l.esriSubLayer.renderer=jg(c.customRenderer)),await l.loadLayerMetadata(h?{customRenderer:l.esriSubLayer?.renderer}:{}),r<this.lastCancel)return;const d=i[l.layerIdx];if(d?(l.visibility=l.isRemoved?!1:d.state?.visibility??(this.origState.visibility?l._serverVisibility??this.origState.visibility:this.origState.visibility??l._serverVisibility)??!0,l.opacity=d.state?.opacity??this.origState.opacity??1,l.nameField=d.nameField||l.nameField||"",this.$iApi.geo.attributes.applyFieldMetadata(l,d.fieldMetadata),l.canModifyLayer||this.$iApi.notify.show(Fa.WARNING,this.$iApi.$i18n.t("layer.filtersdisabled",{name:l.name||l.id}))):this.$iApi.geo.attributes.applyFieldMetadata(l),l.supportsFeatures){l.updateFieldList(),l.updateFieldsToTrim();const m=await this.$iApi.geo.layer.loadFeatureCount(l.serviceUrl,l.getSqlFilter(co.PERMANENT));r>this.lastCancel&&(l.featureCount=m)}});return t.push(...a),this.esriLayer.allSublayers.forEach(l=>{!l.sublayers&&!s.find(u=>u.layerIdx===l.id)?(l.visible=!1,l.opacity=0):l.sublayers&&(l.visible=!0)}),this.visibility=this.origState.visibility??!0,t}updateLayerState(t,r=!1){super.updateLayerState(t,r),this.sublayers.forEach(n=>n.updateLayerState(t,r))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(r=>r.updateDrawState(t))}runIdentify(t){if(!this.canIdentify())return[];t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(i=>typeof i=="number"?this.layerTree?.findChildByIdx(i)?.uid:i));const r=t.sublayerIds?this._sublayers.filter(i=>t.sublayerIds?.includes(i.uid)):this._sublayers.filter(i=>i.canIdentify());if(r.length===0)return[];let n;return t.geometry.type===or.POINT&&(n=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),r.map(i=>{const s=new bi,o={},a=Ts({items:[],loading:s.getPromise(),loaded:!1,errored:!1,uid:i.uid,layerId:i.id,requestTime:Date.now()});return i.geomType!==or.POLYGON&&n?o.filterGeometry=n:o.filterGeometry=t.geometry,o.filterSql=i.getCombinedSqlFilter(),o.sourceSR=i.sourceSR,i.queryOIDs(o).then(l=>{l.forEach(u=>{a.items.push(Zw.makeOidItem(u,i))}),a.loaded=!0,s.resolveMe()}).catch(()=>{a.errored=!0,s.resolveMe()}),a})}}class pQt extends LH{tooltipField;constructor(t,r,n){if(super(t,r),this.layerType=Ct.SUBLAYER,this.layerFormat=yl.MAPIMAGE,this.isSublayer=!0,this.layerIdx=t.index,this.parentLayer=n,this.dataFormat=Us.ESRI_FEATURE,this.supportsFeatures=!0,this.tooltipField="",this.hovertips=!1,this.url=this.parentLayer?.url,this.canReload=!!(this.url||this.origRampConfig.caching),!n.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(n),(t.initialFilteredQuery||t.permanentFilteredQuery)&&this.applySqlFilter()}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=wi(t.esriLayer.allSublayers.find(r=>r.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=Sn.INITIATED;const t=this.labelVizOverride();t!==void 0&&(this.labelVisibility=t)}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}cancelLoad(){this.parentLayer?.cancelLoad()}get layerExists(){return!!(this.parentLayer?.layerExists&&this.esriSubLayer&&this.initiationState===Sn.INITIATED)}get visibility(){return this.layerExists?this.esriSubLayer.visible:!1}set visibility(t){this.layerExists?this.esriSubLayer.visible=t:this.noLayerErr()}get opacity(){return this.layerExists?this.esriSubLayer.opacity:0}set opacity(t){if(!this.layerExists){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get mouseTolerance(){return this.layerExists?this.parentLayer.mouseTolerance:0}set mouseTolerance(t){this.layerExists?this.parentLayer.mouseTolerance=t:this.noLayerErr()}get touchTolerance(){return this.layerExists?this.parentLayer.touchTolerance:0}set touchTolerance(t){this.layerExists?this.parentLayer.touchTolerance=t:this.noLayerErr()}applySqlFilter(t=[]){if(this.parentLayer?.layerExists&&this.esriSubLayer)if(this.supportsFeatures){const r=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=r}else console.error("Attempted to apply an SQL filter to a sublayer that does not support it (likely Raster datatype)");else this.noLayerErr()}getSR(){return this.parentLayer?.esriLayer?Yt.fromESRI(this._parentLayer?.esriLayer?.spatialReference):(this.noLayerErr(),Yt.latLongSR())}updateFieldList(){this.attribs.attLoader.updateFieldList(this.fieldList)}updateFieldsToTrim(){this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim())}get labelVisibility(){return this.layerExists?this.esriSubLayer.labelsVisible:!1}set labelVisibility(t){this.layerExists?this.esriSubLayer.labelsVisible=t:this.noLayerErr()}labelVizOverride(){let t=this.origRampConfig.labels?.visible;if(t!==void 0||(t=this.$iApi.geo.map.labelsDefault?.visible,t!==void 0))return t}}class dQt extends T1{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=Ct.OSM,this.layerFormat=yl.OSM,this.dataFormat=Us.OSM_TILE,this.supportsFeatures=!1}async onInitiate(){this.esriLayer=wi(new Jz(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),n={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:r.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(n),t}}class fQt extends T1{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=Ct.IMAGERY,this.layerFormat=yl.IMAGERY,this.dataFormat=Us.ESRI_RASTER}async onInitiate(){this.esriLayer=wi(new W0e(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=Date.now(),n=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(i=>{r>this.lastCancel&&(this.legend=i)});return t.push(n),t}}class SSe extends T1{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=Ct.TILE,this.layerFormat=yl.TILE,this.dataFormat=Us.ESRI_TILE}async onInitiate(){this.esriLayer=wi(new Yz(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions(),r=Date.now();this.layerTree.name=this.name;const n=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(i=>{r>this.lastCancel&&(this.legend=i)});return t.push(n),t.push(this.checkProj()),t}checkProj(){const t=this.getSR(),r=this.$iApi.geo.map.getSR().isEqual(t);if(this.layerState===Hn.LOADED&&!r)this.$iApi.notify.show(Fa.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),this.onError();else if(this.layerState===Hn.ERROR&&r)this.reload();else if(this.layerState!==Hn.ERROR&&!r)return this.$iApi.notify.show(Fa.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),Promise.reject();return Promise.resolve()}}class mQt extends T1{sublayerNames;mimeType;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.layerType=Ct.WMS,this.layerFormat=yl.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=Us.OGC_RASTER,this.identifyMode=Hi.GEOMETRIC}async onInitiate(){this.esriLayer=wi(new _ye(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),n=t.sublayers;this.sublayerNames=n.map(s=>s.id||"error_no_wms_id");const i=n.map(s=>s.currentStyle).join();return r.customParameters={styles:i},t.url.indexOf("/geomet")!==-1&&(r.customParameters.layers=n[0].id),r}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=n=>{let i=!1;return n.forEach(s=>{this.sublayerNames.indexOf(s.name)>-1||s.sublayers&&s.sublayers.length>0&&r(s.sublayers)?i=!0:s.visible=!1}),i};return this.layerExists?r(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),t}canIdentify(){return super.canIdentify()}runIdentify(t){if(t.geometry.type!==or.POINT)throw new Error("a point must be used for WMS Identify");if(!this.canIdentify())return[];const r=new bi,n=Ts({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(i=>{if(i){let s=!0,o;typeof i!="string"?o=tg.JSON:i.indexOf("Search returned no results")===-1&&i!==""?o=tg.TEXT:(s=!1,o=tg.UNKNOWN),s&&n.items.push(Zw.makeRawItem(o,i))}n.loaded=!0,r.resolveMe()}).catch(()=>{n.errored=!0,r.resolveMe()}),[n]}setCustomParameter(t,r,n=!0){this.layerExists?(this.esriLayer.customLayerParameters||(this.esriLayer.customLayerParameters={}),this.esriLayer.customLayerParameters[t]=r,n&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,r,n){const i=this.$iApi.geo.map,s=this.esriLayer;if(!i.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!s)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=i.getExtent(),u=s.spatialReferences,c=t.join(","),h=i.esriView.toScreen(r.toESRI()),d=Math.floor(h.x),m=Math.floor(h.y),y={"application/json":"json","text/html":"text","text/plain":"text"}[n]||"text",g=i.getSR();g.wkid?o=g.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(g.latestWkid&&u.indexOf(g.latestWkid)>-1?o=g.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),s.version==="1.3"||s.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:d,J:m,STYLES:"",FORMAT:s.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:d,Y:m},Object.prototype.hasOwnProperty.call(a,"BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const b={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:s.version,WIDTH:i.getPixelWidth(),HEIGHT:i.getPixelHeight(),QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:n},S=s.customLayerParameters;return S&&Object.keys(S).forEach(E=>{E.toLowerCase()!=="styles"&&(b[E]=S[E])}),Object.keys(b).forEach(E=>a[E]=b[E]),Xe(s.url.split("?")[0],{query:a,responseType:y})}getLegendUrls(t){if(!this.layerExists)return this.noLayerErr(),[];const r=new Map;this.esriLayer.allSublayers.forEach(i=>{i.visible&&(i.legendUrl&&this.origRampConfig.sublayers?.forEach(s=>{if(s.id&&s.currentStyle&&s.id===i.name){const o=new XE(i.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==s.currentStyle&&(i.legendUrl=o.updateQuery({STYLE:s.currentStyle}))}}),r.set(i.name,i.legendUrl))});const n=t.map(i=>i.styleLegends&&i.currentStyle?i.styleLegends.find(s=>s.name===i.currentStyle).url:void 0);return n.forEach((i,s)=>{i||(n[s]=r.get(t[s].id))}),n}getWMSLayerTitle(t){if(!this.esriLayer)return"";let r;return this.esriLayer.allSublayers.some(n=>{if(n.name===t)return r=n.title,!0}),r||""}loadSymbology(){const t=Date.now(),r=this.config.sublayers,n=this.getLegendUrls(r.map(i=>({id:i.id,styleLegends:i.styleLegends,currentStyle:i.currentStyle}))).map((i,s)=>{const o=r[s].name||this.getWMSLayerTitle(r[s].id)||r[s].id,a={uid:this.$iApi.geo.shared.generateUUID(),label:o,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(i).then(l=>{t>this.lastCancel&&(a.svgcode=l.svgcode,a.imgHeight=l.imgHeight,a.imgWidth=l.imgWidth)})};return a});this.legend=n}}class yQt extends I1{constructor(t,r){super(t,r),this.layerType=Ct.WFS}async onInitiate(){const t=Date.now(),r=new XE(this.config.url),{offset:n,limit:i}=r.queryMap,s=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(n)||0,parseInt(i)||1e3,void 0,this.config.xyInAttribs);t>this.lastCancel&&(this.sourceGeoJson=s,await super.onInitiate())}}class ESe extends wSe{sourceJson;attribs;_visibility;constructor(t,r){super(t,r),this.dataFormat=Us.ESRI_FEATURE,this.layerFormat=yl.NOLAYER,this.drawState=Ia.NOT_VISUAL,this.attribs=new TSe,this.supportsFeatures=!0,this.mapLayer=!1,this.isFile=!1,this._visibility=t.state?.visibility??!0,this.expectedTime.draw=0}async onInitiate(){if(this.sourceJson){const t=this.sourceJson;if(t.data.length===0||t.fields.length===0)throw new Error("Data layer with no columns or now rows.");const r=t.fields.slice(),n=t.data[0].slice(),i=/ /gi;this.fields=r.map((o,a)=>{let l="",u=o;o.indexOf(" ")>-1&&(l=o,u=o.trim().replace(i,"-"),t.fields[a]=u);const c=this.$iApi.geo.layer.files.inferType(n[a]);return{name:u,alias:l,type:c,length:c===sh.STRING?256:void 0}}),this.oidField="rampOID",this.fields.push({name:this.oidField,type:sh.OID}),t.fields.push(this.oidField),t.data.forEach((o,a)=>o.push(a+1)),this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.fieldList="*";const s={batchSize:-1,sourceDataJson:t,oidField:this.oidField,attribs:"*",fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new _Qt(this.$iApi,s),await this.attribs.attLoader.getAttribs(),this.featureCount=t.data.length,this.origRampConfig.nameField?this.nameField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.nameField)||this.oidField:this.nameField=this.oidField,this.sourceJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData}else throw new Error("Attempted to initiate file based data layer, sourceJson is missing")}async terminate(){await super.terminate()}async reload(){this.$iApi.event.emit(St.LAYER_RELOAD_START,this),await this.terminate(),await this.initiate(),this.layerState!==Hn.ERROR&&this.onLoad(),setTimeout(()=>{this.$iApi.event.emit(St.LAYER_RELOAD_END,this)},300)}onLoadActions(){const t=super.onLoadActions();return this.legend=[{uid:this.$iApi.geo.shared.generateUUID(),label:"",svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.getIcon(0).then(r=>{this.legend[0].svgcode=r})}],t}getAttributes(){return this.attribs.attLoader.getAttribs()}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,r){let n={};if(this.attribs.attLoader.isLoaded()){const i=await this.attribs.attLoader.getAttribs();n=i.features[i.oidIndex[t]]}else throw new Error("Non ESRI data layer did not have attributes populated.");return new Kl(new n0,"",n)}async getIcon(t){return'<svg id="SvgjsSvg1012" width="32" height="32" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 32 32">                      <defs id="SvgjsDefs1013"></defs>                      <rect id="SvgjsRect1014" width="28"  height="28" x="2" y="2" fill="#2e8b57"></rect>                      <text id="SvgjsText1015" font-family="Roboto" font-size="23" fill="#ffffff" font-weight="bold" x="7.6875" y="-6.40000057220459" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}">                          <tspan id="SvgjsTspan1016" class="grid-icons" dy="29.900000000000002" x="7.6875" svgjs:data="{&quot;newLined&quot;:true}">D</tspan>                      </text>                </svg>'}async getFilterOIDs(t=[],r=void 0){}abortAttributeLoad(){}attribLoadAborted(){return!1}clearFeatureCache(){}downloadedAttributes(){return this.featureCount}get layerExists(){return this.isLoaded}get visibility(){return this._visibility}set visibility(t){this._visibility!==t&&(this._visibility=t,this.$iApi.event.emit(St.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this}))}}class gQt extends ESe{constructor(t,r){super(t,r),this.layerType=Ct.DATAJSON}async onInitiate(){const t=Date.now();let r;if(this.origRampConfig.rawData)r=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)r=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Json Data layer config contains no raw data or url");t>this.lastCancel&&(this.sourceJson=r,await super.onInitiate())}}class vQt extends ESe{filter;serviceUrl;constructor(t,r){super(t,r),this.layerType=Ct.DATATABLE,this.serviceUrl=t.url,this.filter=new Bbe(t.permanentFilteredQuery||"",t.initialFilteredQuery||"")}async onInitiate(){}onLoadActions(){const t=super.onLoadActions(),r=Date.now(),n=this.$iApi.geo.shared.parseUrlIndex(this.serviceUrl).index||0,i=this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl).then(o=>{if(r<this.lastCancel)return;this.name||(this.name=o.name),this.layerTree.name=this.name,this.oidField=o.objectIdField,this.nameField=this.origRampConfig.nameField||o.displayField||this.oidField,this.fields=o.fields,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata);const a={supportsLimit:(o.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:this.fieldList,permanentFilter:this.getSqlFilter(co.PERMANENT),fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new ISe(this.$iApi,a),this.attribs.quickCache=new ASe(this.geomType)}),s=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(co.PERMANENT)).then(o=>{r>this.lastCancel&&(this.featureCount=o)});return this.layerTree.layerIdx=n,t.push(i,s),t}async getGraphic(t,r){let n={};const i=this.attribs.quickCache.getAttribs(t);if(i)n=i;else if(this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();n=s.features[s.oidIndex[t]]}else{const s={oid:t,serviceUrl:this.serviceUrl,includeGeometry:!1,attribs:this.fieldList},o=await this.$iApi.geo.attributes.loadSingleFeature(s);this.attribs.quickCache.setAttribs(t,o.attributes),n=o.attributes}return new Kl(new n0,"",n)}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}setSqlFilter(t,r){const n=this.filter.getSql(t);r!==n&&(this.filter.setSql(t,r),this.$iApi.event.emit(St.FILTER_CHANGE,{uid:this.uid,filterKey:t}))}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const n=this.filter.getCombinedSql(t);if(!n)return;const i=this.filter.sqlActiveFilters(t);let s=this.filter.getCache(i,!1);if(!s){const o={filterSql:n,includeGeometry:!1};s=this.queryOIDs(o),this.filter.setCache(s,i,!1)}return s}queryOIDs(t){const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){const r=await this.queryOIDs(t),n={getAttribs:!0};return r.map(i=>({oid:i,graphic:this.getGraphic(i,n)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(n=>n.graphic))}}class bQt extends Si{oidIndexer(t,r){t.features.forEach((n,i)=>{t.oidIndex[n[r]]=i})}async arcGisBatchLoad(t,r){if(r.loadAbortFlag)return[];const n=t.permanentFilter?` AND ${t.permanentFilter}`:"",i={query:{where:`${t.oidField}>${t.maxId}${n}`,outFields:t.attribs,orderByFields:t.oidField,returnGeometry:"false",f:"json"}},[s,o]=await qm(Xe(t.serviceUrl+"/query",i));if(!o)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,s),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!o.data||!o.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));let a=o.data.features;const l=a.length;if(l>0){r.loadedCount+=l;let u;if(t.supportsLimit?u=o.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=l),u=l>=t.batchSize),a=this.trimFeatureSetAttributes(a,t.fieldsToTrim??[]),u){t.maxId=a[l-1].attributes[t.oidField];const c=await this.arcGisBatchLoad(t,r);return r.loadAbortFlag?[]:a.concat(c)}else return r.loadAbortFlag?[]:a}else return[]}async loadArcGisServerAttributes(t,r){t.maxId=-1,t.batchSize=-1;const n={features:(await this.arcGisBatchLoad(t,r)).map(i=>i.attributes),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,n}async loadGraphicsAttributes(t,r){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const n={features:t.sourceGraphics.map(i=>Xt(i).attributes).toArray(),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,r.loadedCount=n.features.length,n}async loadCompactJsonAttributes(t,r){if(!t.sourceDataJson)throw new Error("No .sourceDataJson provided to file data-layer attribute loader");const n=t.sourceDataJson.fields,i=t.fieldsToTrim??[],s={features:t.sourceDataJson.data.map(o=>{const a={};return o.forEach((l,u)=>{a[n[u]]=typeof l=="string"&&i.includes(n[u])?l.trim():l}),a}),oidIndex:{}};return this.oidIndexer(s,t.oidField),r.loadIsDone=!0,r.loadedCount=s.features.length,t.sourceDataJson=void 0,s}async loadSingleFeature(t){const r={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(r.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(r.query.outSR=t.mapSR),typeof t.geometryPrecision<"u"&&t.geometryPrecision>=0&&(r.query.geometryPrecision=t.geometryPrecision);const[n,i]=await qm(Xe(t.serviceUrl+"/query",r));if(!i)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!i.data||!i.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const s=i.data.features;if(s.length>0){let o,a=this.trimFeatureSetAttributes([s[0]],t.fieldsToTrim??[])[0];if(t.includeGeometry){a.geometry.spatialReference=i.data.spatialReference;const l=An(a.geometry);o=this.$iApi.geo.geom.geomEsriToRamp(l)}else o=new n0;return new Kl(o,"",a.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}trimFeatureSetAttributes(t,r){return r.forEach(n=>{t.forEach(i=>{typeof i.attributes[n]=="string"&&(i.attributes[n]=i.attributes[n].trim())})}),t}orderFields(t,r){const n=(s,o)=>s.findIndex(a=>a.name===o),i=(s,o)=>{const a=n(r,s.name),l=n(r,o.name);return a===-1&&l===-1?n(t,s.name)-n(t,o.name):a===-1?1:l===-1?-1:a-l};return t.slice().sort(i)}applyFieldMetadata(t,r=void 0){if(!r||!r.fieldInfo){t.fieldList="*";return}let n=r.fieldInfo.filter(i=>i.trim).map(i=>i.name);if(t.fields.forEach(i=>{n.includes(i.name)&&(i.trim=!0)}),r?.enforceOrder&&r?.fieldInfo&&r?.fieldInfo.length>0&&(t.fields=this.orderFields(t.fields,r.fieldInfo),t.fieldList=r.fieldInfo.map(i=>i.name).join(",")),r.exclusiveFields){r.fieldInfo.find(s=>s.name===t.oidField)||r.fieldInfo.push({name:t.oidField}),t.fieldList=r.fieldInfo.map(s=>s.name).join(",");const i=r.fieldInfo;t.fields=t.fields.filter(s=>i.find(o=>o.name===s.name))}else t.fieldList="*";r.fieldInfo.forEach(i=>{if(i.alias){const s=t.fields.find(o=>o.name===i.name);s&&(s.alias=i.alias)}})}fieldValidator(t,r){if(t.findIndex(n=>n.name===r)===-1){const n=t.find(i=>i.alias===r);return n?n.name:(console.warn(`Cannot find name field in layer field list: ${r}`),"")}else return r}async generateTabularAttributes(t,r){return r.attLoader.tabularAttributesCache||(r.attLoader.tabularAttributesCache=this.$iApi.geo.attributes.generateTabularAttributesWorker(t,r)),r.attLoader.tabularAttributesCache}async generateTabularAttributesWorker(t,r){if(t.dataFormat===Us.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const n=await r.attLoader.getAttribs();if(!n.features||n.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const i=t.fields.filter(o=>Object.prototype.hasOwnProperty.call(n.features[0],Xt(o).name)).map(o=>({data:Xt(o).name,title:Xt(o).alias||Xt(o).name})),s=n.features.map(o=>{const a=X$({},o);return a.rvInteractive="",a.rvSymbol=t.getIcon(o[t.oidField]),a.rvUid=t.uid,a});return i.forEach(o=>{if(o.data.slice(-2)==="()"){const a=function(){return this[o.data]},l=o.data.slice(0,-2);s.forEach(u=>{u[l]=a})}}),{columns:i,rows:s,fields:t.fields,oidField:t.oidField}}}class TSe{_attribLoader;_quickCache;get attLoader(){if(this._attribLoader)return this._attribLoader;throw console.trace(),new Error("Attempted to load attributes prior to layer being loaded.")}set attLoader(t){this._attribLoader=t}get quickCache(){if(this._quickCache)return this._quickCache;throw console.trace(),new Error("Attempted to access attribute cache prior to layer being loaded.")}set quickCache(t){this._quickCache=t}clearAll(){this._attribLoader&&this._attribLoader.destroyAttribs(),this._quickCache&&this._quickCache.clearAll()}}class Xne{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class PH extends Si{aac;loadPromise;details;tabularAttributesCache;constructor(t,r){super(t),this.aac=new Xne,this.details=r}updateFieldList(t){this.details.attribs=t}updateFieldsToTrim(t){this.details.fieldsToTrim=t}getAttribs(){return this.loadPromise||(this.aac=new Xne,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class ISe extends PH{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class wQt extends PH{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class _Qt extends PH{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadCompactJsonAttributes(this.details,this.aac)}}class ASe{attribs;geoms;extents;isPoint;constructor(t){this.attribs={},this.geoms={},this.extents={},this.isPoint=t===or.POINT||t===or.MULTIPOINT}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,r){this.attribs[t]=r}getGeom(t,r=void 0){return this.getGeomStore(r)[t]}setGeom(t,r,n=void 0){const i=this.getGeomStore(n);i[t]=r}getExtent(t){return this.extents[t]}setExtent(t,r){this.extents[t]=r}clearAll(){this.attribs={},this.geoms={},this.extents={}}}class DH{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,r,n=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=n,this.type=jk.Unknown}makeSearchParams(t){return t}searchRenderer(t){const r=this.makeSearchParams(t),n=this.symbolUnits.find(s=>s.match(r));if(n)return n;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${r}`);const i=new gN(this);return i.svgCode="",i}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}getFieldDelimiter(t,r){let n="'";if(!r||r.length===0)return n;const i=r.find(s=>s.name===t);return i&&i.type&&i.type!=="string"&&(n=""),n}cleanFieldName(t,r){if(!t)return t;let n=r.find(i=>i.name===t);if(n)return t;{const i=t.toLowerCase();return n=r.find(s=>s.name.toLowerCase()===i),n?n.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(t=>t.definitionClause).join(" OR ")}))`}}class gN{isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new ra}match(t){return!!t}}class xQt extends DH{constructor(t,r){super(t,r),this.type=jk.Simple;const n=new gN(this);n.label=t.label||"",n.symbol=t.symbol,n.definitionClause="",this.symbolUnits.push(n)}}class SQt extends DH{delim;keyFields;constructor(t,r,n=!1){super(t,r,n),this.type=jk.Unique,this.delim=t.fieldDelimiter||", ";const i=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,r));const s=this.keyFields.map(o=>this.getFieldDelimiter(o,r));if(t.uniqueValueInfos.forEach(o=>{const a=new Qne(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((c,h)=>l[h]==="<Null>"?`${c} IS NULL`:`${c} = ${s[h]}${i(l[h])}${s[h]}`).join(" AND ");a.definitionClause=`(${u})`,a.matchValue=a.matchValue.replace(/<Null>/g,"")}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new Qne(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(r=>{let n=t[r]===null?"":t[r];return typeof n!="string"&&(n=n.toString()),n}).join(this.delim)}}class Qne extends gN{matchValue;constructor(t,r){super(t),typeof r=="number"?this.matchValue=r.toString():this.matchValue=r}match(t){return this.matchValue===t}}class EQt extends DH{valField;constructor(t,r,n=!1){if(super(t,r,n),this.valField=this.cleanFieldName(t.field,r),t.classBreakInfos.forEach((i,s)=>{const o=s===0,a=new Kne(this,i.minValue,i.maxValue,o);a.label=i.label||"",a.symbol=i.symbol,this.falseRenderer||(a.definitionClause=`(${this.valField} >${o?"=":""}  ${i.minValue} AND ${this.valField} <= ${i.maxValue})`),this.symbolUnits.push(a)}),t.defaultSymbol){const i=new Kne(this,0,0,!1);i.isDefault=!0,i.label=t.defaultLabel||"",i.symbol=t.defaultSymbol,i.definitionClause=this.makeElseClause(),this.defaultUnit=i}}makeSearchParams(t){return parseFloat(t[this.valField])}}class Kne extends gN{minValue;maxValue;firstBreak;constructor(t,r,n,i){super(t),this.minValue=r,this.maxValue=n,this.firstBreak=i}match(t){return this.minValue===this.maxValue?this.maxValue===t:this.firstBreak?this.minValue<=t&&this.maxValue>=t:this.minValue<t&&this.maxValue>=t}}var XU={exports:{}},TQt=XU.exports,eie;function IQt(){return eie||(eie=1,function(e,t){(function(r,n){e.exports=r.document?n(r,r.document):function(i){return n(i,i.document)}})(typeof window<"u"?window:TQt,function(r,n){var i=typeof this<"u"?this:r,s=i.SVG=function(v){if(s.supported)return v=new s.Doc(v),s.parser.draw||s.prepare(),v};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.com/svgjs",s.supported=function(){return!!n.createElementNS&&!!n.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(v){return"Svgjs"+b(v)+s.did++},s.create=function(v){var A=n.createElementNS(this.ns,v);return A.setAttribute("id",this.eid(v)),A},s.extend=function(){var v,A,R,U;for(v=[].slice.call(arguments),A=v.pop(),U=v.length-1;U>=0;U--)if(v[U])for(R in A)v[U].prototype[R]=A[R];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(v){var A=typeof v.create=="function"?v.create:function(){this.constructor.call(this,s.create(v.create))};return v.inherit&&(A.prototype=new v.inherit),v.extend&&s.extend(A,v.extend),v.construct&&s.extend(v.parent||s.Container,v.construct),A},s.adopt=function(v){if(!v)return null;if(v.instance)return v.instance;var A;return v.nodeName=="svg"?A=v.parentNode instanceof r.SVGElement?new s.Nested:new s.Doc:v.nodeName=="linearGradient"?A=new s.Gradient("linear"):v.nodeName=="radialGradient"?A=new s.Gradient("radial"):s[b(v.nodeName)]?A=new s[b(v.nodeName)]:A=new s.Element(v),A.type=v.nodeName,A.node=v,v.instance=A,A instanceof s.Doc&&A.namespace().defs(),A.setData(JSON.parse(v.getAttribute("svgjs:data"))||{}),A},s.prepare=function(){var v=n.getElementsByTagName("body")[0],A=(v?new s.Doc(v):s.adopt(n.documentElement).nested()).size(2,0);s.parser={body:v||n.documentElement,draw:A.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:A.polyline().node,path:A.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},n.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(v,A){var R,U=v.length,q=[];for(R=0;R<U;R++)q.push(A(v[R]));return q},filter:function(v,A){var R,U=v.length,q=[];for(R=0;R<U;R++)A(v[R])&&q.push(v[R]);return q},radians:function(v){return v%360*Math.PI/180},degrees:function(v){return v*180/Math.PI%360},filterSVGElements:function(v){return this.filter(v,function(A){return A instanceof r.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(v){var A;this.r=0,this.g=0,this.b=0,v&&(typeof v=="string"?s.regex.isRgb.test(v)?(A=s.regex.rgb.exec(v.replace(s.regex.whitespace,"")),this.r=parseInt(A[1]),this.g=parseInt(A[2]),this.b=parseInt(A[3])):s.regex.isHex.test(v)&&(A=s.regex.hex.exec(S(v)),this.r=parseInt(A[1],16),this.g=parseInt(A[2],16),this.b=parseInt(A[3],16)):typeof v=="object"&&(this.r=v.r,this.g=v.g,this.b=v.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+E(this.r)+E(this.g)+E(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(v){return this.destination=new s.Color(v),this},at:function(v){return this.destination?(v=v<0?0:v>1?1:v,new s.Color({r:~~(this.r+(this.destination.r-this.r)*v),g:~~(this.g+(this.destination.g-this.g)*v),b:~~(this.b+(this.destination.b-this.b)*v)})):this}}),s.Color.test=function(v){return v+="",s.regex.isHex.test(v)||s.regex.isRgb.test(v)},s.Color.isRgb=function(v){return v&&typeof v.r=="number"&&typeof v.g=="number"&&typeof v.b=="number"},s.Color.isColor=function(v){return s.Color.isRgb(v)||s.Color.test(v)},s.Array=function(v,A){v=(v||[]).valueOf(),v.length==0&&A&&(v=A.valueOf()),this.value=this.parse(v)},s.extend(s.Array,{morph:function(v){if(this.destination=this.parse(v),this.value.length!=this.destination.length){for(var A=this.value[this.value.length-1],R=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(R);for(;this.value.length<this.destination.length;)this.value.push(A)}return this},settle:function(){for(var v=0,A=this.value.length,R=[];v<A;v++)R.indexOf(this.value[v])==-1&&R.push(this.value[v]);return this.value=R},at:function(v){if(!this.destination)return this;for(var A=0,R=this.value.length,U=[];A<R;A++)U.push(this.value[A]+(this.destination[A]-this.value[A])*v);return new s.Array(U)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(v){return v=v.valueOf(),Array.isArray(v)?v:this.split(v)},split:function(v){return v.trim().split(s.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var v=new this.constructor;return v.value=d(this.value),v}}),s.PointArray=function(v,A){s.Array.call(this,v,A||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray,s.extend(s.PointArray,{toString:function(){for(var v=0,A=this.value.length,R=[];v<A;v++)R.push(this.value[v].join(","));return R.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(v){if(!this.destination)return this;for(var A=0,R=this.value.length,U=[];A<R;A++)U.push([this.value[A][0]+(this.destination[A][0]-this.value[A][0])*v,this.value[A][1]+(this.destination[A][1]-this.value[A][1])*v]);return new s.PointArray(U)},parse:function(v){var A=[];if(v=v.valueOf(),Array.isArray(v)){if(Array.isArray(v[0]))return v.map(function(q){return q.slice()});if(v[0].x!=null)return v.map(function(q){return[q.x,q.y]})}else v=v.trim().split(s.regex.delimiter).map(parseFloat);v.length%2!==0&&v.pop();for(var R=0,U=v.length;R<U;R=R+2)A.push([v[R],v[R+1]]);return A},move:function(v,A){var R=this.bbox();if(v-=R.x,A-=R.y,!isNaN(v)&&!isNaN(A))for(var U=this.value.length-1;U>=0;U--)this.value[U]=[this.value[U][0]+v,this.value[U][1]+A];return this},size:function(v,A){var R,U=this.bbox();for(R=this.value.length-1;R>=0;R--)U.width&&(this.value[R][0]=(this.value[R][0]-U.x)*v/U.width+U.x),U.height&&(this.value[R][1]=(this.value[R][1]-U.y)*A/U.height+U.y);return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}});for(var o={M:function(v,A,R){return A.x=R.x=v[0],A.y=R.y=v[1],["M",A.x,A.y]},L:function(v,A){return A.x=v[0],A.y=v[1],["L",v[0],v[1]]},H:function(v,A){return A.x=v[0],["H",v[0]]},V:function(v,A){return A.y=v[0],["V",v[0]]},C:function(v,A){return A.x=v[4],A.y=v[5],["C",v[0],v[1],v[2],v[3],v[4],v[5]]},S:function(v,A){return A.x=v[2],A.y=v[3],["S",v[0],v[1],v[2],v[3]]},Q:function(v,A){return A.x=v[2],A.y=v[3],["Q",v[0],v[1],v[2],v[3]]},T:function(v,A){return A.x=v[0],A.y=v[1],["T",v[0],v[1]]},Z:function(v,A,R){return A.x=R.x,A.y=R.y,["Z"]},A:function(v,A){return A.x=v[5],A.y=v[6],["A",v[0],v[1],v[2],v[3],v[4],v[5],v[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(v){return function(A,R,U){if(v=="H")A[0]=A[0]+R.x;else if(v=="V")A[0]=A[0]+R.y;else if(v=="A")A[5]=A[5]+R.x,A[6]=A[6]+R.y;else for(var q=0,Q=A.length;q<Q;++q)A[q]=A[q]+(q%2?R.y:R.x);return o[v](A,R,U)}}(a[l].toUpperCase());s.PathArray=function(v,A){s.Array.call(this,v,A||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return C(this.value)},move:function(v,A){var R=this.bbox();if(v-=R.x,A-=R.y,!isNaN(v)&&!isNaN(A))for(var U,q=this.value.length-1;q>=0;q--)U=this.value[q][0],U=="M"||U=="L"||U=="T"?(this.value[q][1]+=v,this.value[q][2]+=A):U=="H"?this.value[q][1]+=v:U=="V"?this.value[q][1]+=A:U=="C"||U=="S"||U=="Q"?(this.value[q][1]+=v,this.value[q][2]+=A,this.value[q][3]+=v,this.value[q][4]+=A,U=="C"&&(this.value[q][5]+=v,this.value[q][6]+=A)):U=="A"&&(this.value[q][6]+=v,this.value[q][7]+=A);return this},size:function(v,A){var R,U,q=this.bbox();for(R=this.value.length-1;R>=0;R--)U=this.value[R][0],U=="M"||U=="L"||U=="T"?(this.value[R][1]=(this.value[R][1]-q.x)*v/q.width+q.x,this.value[R][2]=(this.value[R][2]-q.y)*A/q.height+q.y):U=="H"?this.value[R][1]=(this.value[R][1]-q.x)*v/q.width+q.x:U=="V"?this.value[R][1]=(this.value[R][1]-q.y)*A/q.height+q.y:U=="C"||U=="S"||U=="Q"?(this.value[R][1]=(this.value[R][1]-q.x)*v/q.width+q.x,this.value[R][2]=(this.value[R][2]-q.y)*A/q.height+q.y,this.value[R][3]=(this.value[R][3]-q.x)*v/q.width+q.x,this.value[R][4]=(this.value[R][4]-q.y)*A/q.height+q.y,U=="C"&&(this.value[R][5]=(this.value[R][5]-q.x)*v/q.width+q.x,this.value[R][6]=(this.value[R][6]-q.y)*A/q.height+q.y)):U=="A"&&(this.value[R][1]=this.value[R][1]*v/q.width,this.value[R][2]=this.value[R][2]*A/q.height,this.value[R][6]=(this.value[R][6]-q.x)*v/q.width+q.x,this.value[R][7]=(this.value[R][7]-q.y)*A/q.height+q.y);return this},equalCommands:function(v){var A,R,U;for(v=new s.PathArray(v),U=this.value.length===v.value.length,A=0,R=this.value.length;U&&A<R;A++)U=this.value[A][0]===v.value[A][0];return U},morph:function(v){return v=new s.PathArray(v),this.equalCommands(v)?this.destination=v:this.destination=null,this},at:function(v){if(!this.destination)return this;var A=this.value,R=this.destination.value,U=[],q=new s.PathArray,Q,ee,Y,ue;for(Q=0,ee=A.length;Q<ee;Q++){for(U[Q]=[A[Q][0]],Y=1,ue=A[Q].length;Y<ue;Y++)U[Q][Y]=A[Q][Y]+(R[Q][Y]-A[Q][Y])*v;U[Q][0]==="A"&&(U[Q][4]=+(U[Q][4]!=0),U[Q][5]=+(U[Q][5]!=0))}return q.value=U,q},parse:function(v){if(v instanceof s.PathArray)return v.valueOf();var A,U,R={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof v=="string"?v=v.replace(s.regex.numbersWithDots,h).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):v=v.reduce(function(ue,de){return[].concat.call(ue,de)},[]);var U=[],q=new s.Point,Q=new s.Point,ee=0,Y=v.length;do s.regex.isPathLetter.test(v[ee])?(A=v[ee],++ee):A=="M"?A="L":A=="m"&&(A="l"),U.push(o[A].call(null,v.slice(ee,ee=ee+R[A.toUpperCase()]).map(parseFloat),q,Q));while(Y>ee);return U},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(v,A){this.value=0,this.unit=A||"",typeof v=="number"?this.value=isNaN(v)?0:isFinite(v)?v:v<0?-34e37:34e37:typeof v=="string"?(A=v.match(s.regex.numberAndUnit),A&&(this.value=parseFloat(A[1]),A[5]=="%"?this.value/=100:A[5]=="s"&&(this.value*=1e3),this.unit=A[5])):v instanceof s.Number&&(this.value=v.valueOf(),this.unit=v.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(v){return v=new s.Number(v),new s.Number(this+v,this.unit||v.unit)},minus:function(v){return v=new s.Number(v),new s.Number(this-v,this.unit||v.unit)},times:function(v){return v=new s.Number(v),new s.Number(this*v,this.unit||v.unit)},divide:function(v){return v=new s.Number(v),new s.Number(this/v,this.unit||v.unit)},to:function(v){var A=new s.Number(this);return typeof v=="string"&&(A.unit=v),A},morph:function(v){return this.destination=new s.Number(v),v.relative&&(this.destination.value+=this.value),this},at:function(v){return this.destination?new s.Number(this.destination).minus(this).times(v).plus(this):this}}}),s.Element=s.invent({create:function(v){this._stroke=s.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=v)&&(this.type=v.nodeName,this.node.instance=this,this._events=v._events||{},this._stroke=v.getAttribute("stroke")||this._stroke)},extend:{x:function(v){return this.attr("x",v)},y:function(v){return this.attr("y",v)},cx:function(v){return v==null?this.x()+this.width()/2:this.x(v-this.width()/2)},cy:function(v){return v==null?this.y()+this.height()/2:this.y(v-this.height()/2)},move:function(v,A){return this.x(v).y(A)},center:function(v,A){return this.cx(v).cy(A)},width:function(v){return this.attr("width",v)},height:function(v){return this.attr("height",v)},size:function(v,A){var R=x(this,v,A);return this.width(new s.Number(R.width)).height(new s.Number(R.height))},clone:function(v){this.writeDataToDom();var A=k(this.node.cloneNode(!0));return v?v.add(A):this.after(A),A},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(v){return this.after(v).remove(),v},addTo:function(v){return v.put(this)},putIn:function(v){return v.add(this)},id:function(v){return this.attr("id",v)},inside:function(v,A){var R=this.bbox();return v>R.x&&A>R.y&&v<R.x+R.width&&A<R.y+R.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var v=this.attr("class");return v==null?[]:v.trim().split(s.regex.delimiter)},hasClass:function(v){return this.classes().indexOf(v)!=-1},addClass:function(v){if(!this.hasClass(v)){var A=this.classes();A.push(v),this.attr("class",A.join(" "))}return this},removeClass:function(v){return this.hasClass(v)&&this.attr("class",this.classes().filter(function(A){return A!=v}).join(" ")),this},toggleClass:function(v){return this.hasClass(v)?this.removeClass(v):this.addClass(v)},reference:function(v){return s.get(this.attr(v))},parent:function(v){var A=this;if(!A.node.parentNode)return null;if(A=s.adopt(A.node.parentNode),!v)return A;for(;A&&A.node instanceof r.SVGElement;){if(typeof v=="string"?A.matches(v):A instanceof v)return A;if(!A.node.parentNode||A.node.parentNode.nodeName=="#document"||A.node.parentNode.nodeName=="#document-fragment")return null;A=s.adopt(A.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(v){var A=[],R=this;do{if(R=R.parent(v),!R||!R.node)break;A.push(R)}while(R.parent);return A},matches:function(v){return y(this.node,v)},native:function(){return this.node},svg:function(v){var A=n.createElement("svg");if(v&&this instanceof s.Parent){A.innerHTML="<svg>"+v.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var R=0,U=A.firstChild.childNodes.length;R<U;R++)this.node.appendChild(A.firstChild.firstChild)}else return A.appendChild(v=n.createElement("svg")),this.writeDataToDom(),v.appendChild(this.node.cloneNode(!0)),A.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var v=this.each?this:this.lines();v.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(v){return this.dom=v,this},is:function(v){return m(this,v)}}}),s.easing={"-":function(v){return v},"<>":function(v){return-Math.cos(v*Math.PI)/2+.5},">":function(v){return Math.sin(v*Math.PI/2)},"<":function(v){return-Math.cos(v*Math.PI/2)+1}},s.morph=function(v){return function(A,R){return new s.MorphObj(A,R).at(v)}},s.Situation=s.invent({create:function(v){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(v.duration).valueOf(),this.delay=new s.Number(v.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=v.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(v){this._target=v,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(v,A,R){typeof v=="object"&&(A=v.ease,R=v.delay,v=v.duration);var U=new s.Situation({duration:v||1e3,delay:R||0,ease:s.easing[A||"-"]||A});return this.queue(U),this},delay:function(v){var A=new s.Situation({duration:v,delay:0,ease:s.easing["-"]});return this.queue(A)},target:function(v){return v&&v instanceof s.Element?(this._target=v,this):this._target},timeToAbsPos:function(v){return(v-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(v){return this.situation.duration/this._speed*v+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=r.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){r.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(v){return(typeof v=="function"||v instanceof s.Situation)&&this.situations.push(v),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var v,A,R,U=this.situation;if(U.init)return this;for(v in U.animations)for(R=this.target()[v](),Array.isArray(R)||(R=[R]),Array.isArray(U.animations[v])||(U.animations[v]=[U.animations[v]]),A=R.length;A--;)U.animations[v][A]instanceof s.Number&&(R[A]=new s.Number(R[A])),U.animations[v][A]=R[A].morph(U.animations[v][A]);for(v in U.attrs)U.attrs[v]=new s.MorphObj(this.target().attr(v),U.attrs[v]);for(v in U.styles)U.styles[v]=new s.MorphObj(this.target().style(v),U.styles[v]);return U.initialTransformation=this.target().matrixify(),U.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(v,A){var R=this.active;return this.active=!1,A&&this.clearQueue(),v&&this.situation&&(!R&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var v=this.situation;this.stop(),this.situation=v,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(v,A){var R=this.situation.duration/this._speed;return this.absPos=v,A||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*R,this.situation.finish=this.situation.start+R,this.step(!0)},speed:function(v){return v===0?this.pause():v?(this._speed=v,this.at(this.absPos,!0)):this._speed},loop:function(v,A){var R=this.last();return R.loops=v??!0,R.loop=0,A&&(R.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(v){var A=this.last();return typeof v>"u"?A.reversed=!A.reversed:A.reversed=v,this},progress:function(v){return v?this.situation.ease(this.pos):this.pos},after:function(v){var A=this.last(),R=function U(q){q.detail.situation==A&&(v.call(this,A),this.off("finished.fx",U))};return this.target().on("finished.fx",R),this._callStart()},during:function(v){var A=this.last(),R=function(U){U.detail.situation==A&&v.call(this,U.detail.pos,s.morph(U.detail.pos),U.detail.eased,A)};return this.target().off("during.fx",R).on("during.fx",R),this.after(function(){this.off("during.fx",R)}),this._callStart()},afterAll:function(v){var A=function R(U){v.call(this),this.off("allfinished.fx",R)};return this.target().off("allfinished.fx",A).on("allfinished.fx",A),this._callStart()},duringAll:function(v){var A=function(R){v.call(this,R.detail.pos,s.morph(R.detail.pos),R.detail.eased,R.detail.situation)};return this.target().off("during.fx",A).on("during.fx",A),this.afterAll(function(){this.off("during.fx",A)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(v,A,R){return this.last()[R||"animations"][v]=A,this._callStart()},step:function(v){if(v||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var A,R,U;A=Math.max(this.absPos,0),R=Math.floor(A),this.situation.loops===!0||R<this.situation.loops?(this.pos=A-R,U=this.situation.loop,this.situation.loop=R):(this.absPos=this.situation.loops,this.pos=1,U=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-U)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var q=this.situation.ease(this.pos);for(var Q in this.situation.once)Q>this.lastPos&&Q<=q&&(this.situation.once[Q].call(this.target(),this.pos,q),delete this.situation.once[Q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:q,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=q,this):this},eachAt:function(){var v,A,R,U=this,q=this.target(),Q=this.situation;for(v in Q.animations)R=[].concat(Q.animations[v]).map(function(Y){return typeof Y!="string"&&Y.at?Y.at(Q.ease(U.pos),U.pos):Y}),q[v].apply(q,R);for(v in Q.attrs)R=[v].concat(Q.attrs[v]).map(function(Y){return typeof Y!="string"&&Y.at?Y.at(Q.ease(U.pos),U.pos):Y}),q.attr.apply(q,R);for(v in Q.styles)R=[v].concat(Q.styles[v]).map(function(Y){return typeof Y!="string"&&Y.at?Y.at(Q.ease(U.pos),U.pos):Y}),q.style.apply(q,R);if(Q.transforms.length){for(R=Q.initialTransformation,v=0,A=Q.transforms.length;v<A;v++){var ee=Q.transforms[v];if(ee instanceof s.Matrix){ee.relative?R=R.multiply(new s.Matrix().morph(ee).at(Q.ease(this.pos))):R=R.morph(ee).at(Q.ease(this.pos));continue}ee.relative||ee.undo(R.extract()),R=R.multiply(ee.at(Q.ease(this.pos)))}q.matrix(R)}return this},once:function(v,A,R){var U=this.last();return R||(v=U.ease(v)),U.once[v]=A,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(v,A,R){return(this.fx||(this.fx=new s.FX(this))).animate(v,A,R)},delay:function(v){return(this.fx||(this.fx=new s.FX(this))).delay(v)},stop:function(v,A){return this.fx&&this.fx.stop(v,A),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(v){if(this.fx){if(v==null)return this.fx.speed();this.fx.speed(v)}return this}}}),s.MorphObj=s.invent({create:function(v,A){if(s.Color.isColor(A))return new s.Color(v).morph(A);if(s.regex.delimiter.test(v))return s.regex.pathLetters.test(v)?new s.PathArray(v).morph(A):new s.Array(v).morph(A);if(s.regex.numberAndUnit.test(A))return new s.Number(v).morph(A);this.value=v,this.destination=A},extend:{at:function(v,A){return A<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(v,A,R){if(typeof v=="object")for(var U in v)this.attr(U,v[U]);else this.add(v,A,"attrs");return this},style:function(v,A){if(typeof v=="object")for(var R in v)this.style(R,v[R]);else this.add(v,A,"styles");return this},x:function(v,A){if(this.target()instanceof s.G)return this.transform({x:v},A),this;var R=new s.Number(v);return R.relative=A,this.add("x",R)},y:function(v,A){if(this.target()instanceof s.G)return this.transform({y:v},A),this;var R=new s.Number(v);return R.relative=A,this.add("y",R)},cx:function(v){return this.add("cx",new s.Number(v))},cy:function(v){return this.add("cy",new s.Number(v))},move:function(v,A){return this.x(v).y(A)},center:function(v,A){return this.cx(v).cy(A)},size:function(v,A){if(this.target()instanceof s.Text)this.attr("font-size",v);else{var R;(!v||!A)&&(R=this.target().bbox()),v||(v=R.width/R.height*A),A||(A=R.height/R.width*v),this.add("width",new s.Number(v)).add("height",new s.Number(A))}return this},width:function(v){return this.add("width",new s.Number(v))},height:function(v){return this.add("height",new s.Number(v))},plot:function(v,A,R,U){return arguments.length==4?this.plot([v,A,R,U]):this.add("plot",new(this.target()).morphArray(v))},leading:function(v){return this.target().leading?this.add("leading",new s.Number(v)):this},viewbox:function(v,A,R,U){return this.target()instanceof s.Container&&this.add("viewbox",new s.ViewBox(v,A,R,U)),this},update:function(v){if(this.target()instanceof s.Stop){if(typeof v=="number"||v instanceof s.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});v.opacity!=null&&this.attr("stop-opacity",v.opacity),v.color!=null&&this.attr("stop-color",v.color),v.offset!=null&&this.attr("offset",v.offset)}return this}}),s.Box=s.invent({create:function(v,A,R,U){if(typeof v=="object"&&!(v instanceof s.Element))return s.Box.call(this,v.left!=null?v.left:v.x,v.top!=null?v.top:v.y,v.width,v.height);arguments.length==4&&(this.x=v,this.y=A,this.width=R,this.height=U),N(this)},extend:{merge:function(v){var A=new this.constructor;return A.x=Math.min(this.x,v.x),A.y=Math.min(this.y,v.y),A.width=Math.max(this.x+this.width,v.x+v.width)-A.x,A.height=Math.max(this.y+this.height,v.y+v.height)-A.y,N(A)},transform:function(v){var A=1/0,R=-1/0,U=1/0,q=-1/0,Q,ee=[new s.Point(this.x,this.y),new s.Point(this.x2,this.y),new s.Point(this.x,this.y2),new s.Point(this.x2,this.y2)];return ee.forEach(function(Y){Y=Y.transform(v),A=Math.min(A,Y.x),R=Math.max(R,Y.x),U=Math.min(U,Y.y),q=Math.max(q,Y.y)}),Q=new this.constructor,Q.x=A,Q.width=R-A,Q.y=U,Q.height=q-U,N(Q),Q}}}),s.BBox=s.invent({create:function(v){if(s.Box.apply(this,[].slice.call(arguments)),v instanceof s.Element){var A;try{if(n.documentElement.contains){if(!n.documentElement.contains(v.node))throw new Exception("Element not in the dom")}else{for(var R=v.node;R.parentNode;)R=R.parentNode;if(R!=n)throw new Exception("Element not in the dom")}A=v.node.getBBox()}catch{if(v instanceof s.Shape){var U=v.clone(s.parser.draw.instance).show();A=U.node.getBBox(),U.remove()}else A={x:v.node.clientLeft,y:v.node.clientTop,width:v.node.clientWidth,height:v.node.clientHeight}}s.Box.call(this,A)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.extend(s.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),s.RBox=s.invent({create:function(v){s.Box.apply(this,[].slice.call(arguments)),v instanceof s.Element&&s.Box.call(this,v.node.getBoundingClientRect())},inherit:s.Box,parent:s.Element,extend:{addOffset:function(){return this.x+=r.pageXOffset,this.y+=r.pageYOffset,this}},construct:{rbox:function(v){return v?new s.RBox(this).transform(v.screenCTM().inverse()):new s.RBox(this).addOffset()}}}),s.RBox.prototype.constructor=s.RBox,s.Matrix=s.invent({create:function(v){var A,R=T([1,0,0,1,0,0]);for(v=v instanceof s.Element?v.matrixify():typeof v=="string"?T(v.split(s.regex.delimiter).map(parseFloat)):arguments.length==6?T([].slice.call(arguments)):Array.isArray(v)?T(v):typeof v=="object"?v:R,A=B.length-1;A>=0;--A)this[B[A]]=v[B[A]]!=null?v[B[A]]:R[B[A]]},extend:{extract:function(){var v=w(this,0,1),A=w(this,1,0),R=180/Math.PI*Math.atan2(v.y,v.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(R*Math.PI/180)+this.f*Math.sin(R*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(R*Math.PI/180)+this.e*Math.sin(-R*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-R,skewY:180/Math.PI*Math.atan2(A.y,A.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:R,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(v){return this.destination=new s.Matrix(v),this},at:function(v){if(!this.destination)return this;var A=new s.Matrix({a:this.a+(this.destination.a-this.a)*v,b:this.b+(this.destination.b-this.b)*v,c:this.c+(this.destination.c-this.c)*v,d:this.d+(this.destination.d-this.d)*v,e:this.e+(this.destination.e-this.e)*v,f:this.f+(this.destination.f-this.f)*v});return A},multiply:function(v){return new s.Matrix(this.native().multiply(I(v).native()))},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(v,A){return new s.Matrix(this.native().translate(v||0,A||0))},scale:function(v,A,R,U){return arguments.length==1?A=v:arguments.length==3&&(U=R,R=A,A=v),this.around(R,U,new s.Matrix(v,0,0,A,0,0))},rotate:function(v,A,R){return v=s.utils.radians(v),this.around(A,R,new s.Matrix(Math.cos(v),Math.sin(v),-Math.sin(v),Math.cos(v),0,0))},flip:function(v,A){return v=="x"?this.scale(-1,1,A,0):v=="y"?this.scale(1,-1,0,A):this.scale(-1,-1,v,A??v)},skew:function(v,A,R,U){return arguments.length==1?A=v:arguments.length==3&&(U=R,R=A,A=v),v=s.utils.radians(v),A=s.utils.radians(A),this.around(R,U,new s.Matrix(1,Math.tan(A),Math.tan(v),1,0,0))},skewX:function(v,A,R){return this.skew(v,0,A,R)},skewY:function(v,A,R){return this.skew(0,v,A,R)},around:function(v,A,R){return this.multiply(new s.Matrix(1,0,0,1,v||0,A||0)).multiply(R).multiply(new s.Matrix(1,0,0,1,-v||0,-A||0))},native:function(){for(var v=s.parser.native.createSVGMatrix(),A=B.length-1;A>=0;A--)v[B[A]]=this[B[A]];return v},toString:function(){return"matrix("+P(this.a)+","+P(this.b)+","+P(this.c)+","+P(this.d)+","+P(this.e)+","+P(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var v=this.rect(1,1),A=v.node.getScreenCTM();return v.remove(),new s.Matrix(A)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(v,A){var R,U={x:0,y:0};R=Array.isArray(v)?{x:v[0],y:v[1]}:typeof v=="object"?{x:v.x,y:v.y}:v!=null?{x:v,y:A??v}:U,this.x=R.x,this.y=R.y},extend:{clone:function(){return new s.Point(this)},morph:function(v,A){return this.destination=new s.Point(v,A),this},at:function(v){if(!this.destination)return this;var A=new s.Point({x:this.x+(this.destination.x-this.x)*v,y:this.y+(this.destination.y-this.y)*v});return A},native:function(){var v=s.parser.native.createSVGPoint();return v.x=this.x,v.y=this.y,v},transform:function(v){return new s.Point(this.native().matrixTransform(v.native()))}}}),s.extend(s.Element,{point:function(v,A){return new s.Point(v,A).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(v,A,R){if(v==null){for(v={},A=this.node.attributes,R=A.length-1;R>=0;R--)v[A[R].nodeName]=s.regex.isNumber.test(A[R].nodeValue)?parseFloat(A[R].nodeValue):A[R].nodeValue;return v}else if(typeof v=="object")for(A in v)this.attr(A,v[A]);else if(A===null)this.node.removeAttribute(v);else{if(A==null)return A=this.node.getAttribute(v),A==null?s.defaults.attrs[v]:s.regex.isNumber.test(A)?parseFloat(A):A;v=="stroke-width"?this.attr("stroke",parseFloat(A)>0?this._stroke:null):v=="stroke"&&(this._stroke=A),(v=="fill"||v=="stroke")&&(s.regex.isImage.test(A)&&(A=this.doc().defs().image(A,0,0)),A instanceof s.Image&&(A=this.doc().defs().pattern(0,0,function(){this.add(A)}))),typeof A=="number"?A=new s.Number(A):s.Color.isColor(A)?A=new s.Color(A):Array.isArray(A)&&(A=new s.Array(A)),v=="leading"?this.leading&&this.leading(A):typeof R=="string"?this.node.setAttributeNS(R,v,A.toString()):this.node.setAttribute(v,A.toString()),this.rebuild&&(v=="font-size"||v=="x")&&this.rebuild(v,A)}return this}}),s.extend(s.Element,{transform:function(v,A){var R=this,U,q;if(typeof v!="object")return U=new s.Matrix(R).extract(),typeof v=="string"?U[v]:U;if(U=new s.Matrix(R),A=!!A||!!v.relative,v.a!=null)U=A?U.multiply(new s.Matrix(v)):new s.Matrix(v);else if(v.rotation!=null)M(v,R),U=A?U.rotate(v.rotation,v.cx,v.cy):U.rotate(v.rotation-U.extract().rotation,v.cx,v.cy);else if(v.scale!=null||v.scaleX!=null||v.scaleY!=null){if(M(v,R),v.scaleX=v.scale!=null?v.scale:v.scaleX!=null?v.scaleX:1,v.scaleY=v.scale!=null?v.scale:v.scaleY!=null?v.scaleY:1,!A){var Q=U.extract();v.scaleX=v.scaleX*1/Q.scaleX,v.scaleY=v.scaleY*1/Q.scaleY}U=U.scale(v.scaleX,v.scaleY,v.cx,v.cy)}else if(v.skew!=null||v.skewX!=null||v.skewY!=null){if(M(v,R),v.skewX=v.skew!=null?v.skew:v.skewX!=null?v.skewX:0,v.skewY=v.skew!=null?v.skew:v.skewY!=null?v.skewY:0,!A){var Q=U.extract();U=U.multiply(new s.Matrix().skew(Q.skewX,Q.skewY,v.cx,v.cy).inverse())}U=U.skew(v.skewX,v.skewY,v.cx,v.cy)}else v.flip?(v.flip=="x"||v.flip=="y"?v.offset=v.offset==null?R.bbox()["c"+v.flip]:v.offset:v.offset==null?(q=R.bbox(),v.flip=q.cx,v.offset=q.cy):v.flip=v.offset,U=new s.Matrix().flip(v.flip,v.offset)):(v.x!=null||v.y!=null)&&(A?U=U.translate(v.x,v.y):(v.x!=null&&(U.e=v.x),v.y!=null&&(U.f=v.y)));return this.attr("transform",U)}}),s.extend(s.FX,{transform:function(v,A){var R=this.target(),U,q;return typeof v!="object"?(U=new s.Matrix(R).extract(),typeof v=="string"?U[v]:U):(A=!!A||!!v.relative,v.a!=null?U=new s.Matrix(v):v.rotation!=null?(M(v,R),U=new s.Rotate(v.rotation,v.cx,v.cy)):v.scale!=null||v.scaleX!=null||v.scaleY!=null?(M(v,R),v.scaleX=v.scale!=null?v.scale:v.scaleX!=null?v.scaleX:1,v.scaleY=v.scale!=null?v.scale:v.scaleY!=null?v.scaleY:1,U=new s.Scale(v.scaleX,v.scaleY,v.cx,v.cy)):v.skewX!=null||v.skewY!=null?(M(v,R),v.skewX=v.skewX!=null?v.skewX:0,v.skewY=v.skewY!=null?v.skewY:0,U=new s.Skew(v.skewX,v.skewY,v.cx,v.cy)):v.flip?(v.flip=="x"||v.flip=="y"?v.offset=v.offset==null?R.bbox()["c"+v.flip]:v.offset:v.offset==null?(q=R.bbox(),v.flip=q.cx,v.offset=q.cy):v.flip=v.offset,U=new s.Matrix().flip(v.flip,v.offset)):(v.x!=null||v.y!=null)&&(U=new s.Translate(v.x,v.y)),U?(U.relative=A,this.last().transforms.push(U),this._callStart()):this)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var v=(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(A){var R=A.trim().split("(");return[R[0],R[1].split(s.regex.delimiter).map(function(U){return parseFloat(U)})]}).reduce(function(A,R){return R[0]=="matrix"?A.multiply(T(R[1])):A[R[0]].apply(A,R[1])},new s.Matrix);return v},toParent:function(v){if(this==v)return this;var A=this.screenCTM(),R=v.screenCTM().inverse();return this.addTo(v).untransform().transform(R.multiply(A)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(v,A){if(arguments.length>1&&typeof A!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(v))for(var R=0,U=this.arguments.length;R<U;++R)this[this.arguments[R]]=v[R];else if(typeof v=="object")for(var R=0,U=this.arguments.length;R<U;++R)this[this.arguments[R]]=v[this.arguments[R]];this.inversed=!1,A===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(v){for(var A=[],R=0,U=this.arguments.length;R<U;++R)A.push(this[this.arguments[R]]);var q=this._undo||new s.Matrix;return q=new s.Matrix().morph(s.Matrix.prototype[this.method].apply(q,A)).at(v),this.inversed?q.inverse():q},undo:function(v){for(var A=0,R=this.arguments.length;A<R;++A)v[this.arguments[A]]=typeof this[this.arguments[A]]>"u"?0:v[this.arguments[A]];return v.cx=this.cx,v.cy=this.cy,this._undo=new s[b(this.method)](v,!0).at(1),this}}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(v,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.Rotate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(v,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(v){var A=new s.Matrix().rotate(new s.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(v),this.cx,this.cy);return this.inversed?A.inverse():A},undo:function(v){return this._undo=v,this}}}),s.Scale=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(v,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),s.Skew=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(v,A){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),s.extend(s.Element,{style:function(v,A){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof v=="object")for(A in v)this.style(A,v[A]);else if(s.regex.isCss.test(v))for(v=v.split(/\s*;\s*/).filter(function(R){return!!R}).map(function(R){return R.split(/\s*:\s*/)});A=v.pop();)this.style(A[0],A[1]);else return this.node.style[g(v)];else this.node.style[g(v)]=A===null||s.regex.isBlank.test(A)?"":A;return this}}),s.Parent=s.invent({create:function(v){this.constructor.call(this,v)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(v){return s.adopt(v)})},add:function(v,A){return A==null?this.node.appendChild(v.node):v.node!=this.node.childNodes[A]&&this.node.insertBefore(v.node,this.node.childNodes[A]),this},put:function(v,A){return this.add(v,A),v},has:function(v){return this.index(v)>=0},index:function(v){return[].slice.call(this.node.childNodes).indexOf(v.node)},get:function(v){return s.adopt(this.node.childNodes[v])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(v,A){var R,U,q=this.children();for(R=0,U=q.length;R<U;R++)q[R]instanceof s.Element&&v.apply(q[R],[R,q]),A&&q[R]instanceof s.Container&&q[R].each(v,A);return this},removeElement:function(v){return this.node.removeChild(v.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(v,A){return A===0||this instanceof s.Defs||this.node==s.parser.draw?this:(v=v||(this instanceof s.Doc?this:this.parent(s.Parent)),A=A||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(v,A-1):this.toParent(v)}),this.node.firstChild||this.remove(),this)},flatten:function(v,A){return this.ungroup(v,A)}}),s.Container=s.invent({create:function(v){this.constructor.call(this,v)},inherit:s.Parent}),s.ViewBox=s.invent({create:function(v){var A=[0,0,0,0],R,U,q,Q,ee,Y,ue,de=1,ce=1,me=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(v instanceof s.Element){for(Y=v,ue=v,ee=(v.attr("viewBox")||"").match(me),v.bbox,q=new s.Number(v.width()),Q=new s.Number(v.height());q.unit=="%";)de*=q.value,q=new s.Number(Y instanceof s.Doc?Y.parent().offsetWidth:Y.parent().width()),Y=Y.parent();for(;Q.unit=="%";)ce*=Q.value,Q=new s.Number(ue instanceof s.Doc?ue.parent().offsetHeight:ue.parent().height()),ue=ue.parent();this.x=0,this.y=0,this.width=q*de,this.height=Q*ce,this.zoom=1,ee&&(R=parseFloat(ee[0]),U=parseFloat(ee[1]),q=parseFloat(ee[2]),Q=parseFloat(ee[3]),this.zoom=this.width/this.height>q/Q?this.height/Q:this.width/q,this.x=R,this.y=U,this.width=q,this.height=Q)}else v=typeof v=="string"?v.match(me).map(function(Se){return parseFloat(Se)}):Array.isArray(v)?v:typeof v=="object"?[v.x,v.y,v.width,v.height]:arguments.length==4?[].slice.call(arguments):A,this.x=v[0],this.y=v[1],this.width=v[2],this.height=v[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(v,A,R,U){return this.destination=new s.ViewBox(v,A,R,U),this},at:function(v){return this.destination?new s.ViewBox([this.x+(this.destination.x-this.x)*v,this.y+(this.destination.y-this.y)*v,this.width+(this.destination.width-this.width)*v,this.height+(this.destination.height-this.height)*v]):this}},parent:s.Container,construct:{viewbox:function(v,A,R,U){return arguments.length==0?new s.ViewBox(this):this.attr("viewBox",new s.ViewBox(v,A,R,U))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(v){s.Element.prototype[v]=function(A){return A==null?s.off(this,v):s.on(this,v,A),this}}),s.listenerId=0,s.on=function(v,A,R,U,q){var Q=R.bind(U||v),ee=v instanceof s.Element?v.node:v;ee.instance=ee.instance||{_events:{}};var Y=ee.instance._events;R._svgjsListenerId||(R._svgjsListenerId=++s.listenerId),A.split(s.regex.delimiter).forEach(function(ue){var de=ue.split(".")[0],ce=ue.split(".")[1]||"*";Y[de]=Y[de]||{},Y[de][ce]=Y[de][ce]||{},Y[de][ce][R._svgjsListenerId]=Q,ee.addEventListener(de,Q,q||!1)})},s.off=function(v,A,R,U){var q=v instanceof s.Element?v.node:v;if(q.instance&&!(typeof R=="function"&&(R=R._svgjsListenerId,!R))){var Q=q.instance._events;(A||"").split(s.regex.delimiter).forEach(function(ee){var Y=ee&&ee.split(".")[0],ue=ee&&ee.split(".")[1],de,ce;if(R)Q[Y]&&Q[Y][ue||"*"]&&(q.removeEventListener(Y,Q[Y][ue||"*"][R],U||!1),delete Q[Y][ue||"*"][R]);else if(Y&&ue){if(Q[Y]&&Q[Y][ue]){for(ce in Q[Y][ue])s.off(q,[Y,ue].join("."),ce);delete Q[Y][ue]}}else if(ue)for(ee in Q)for(de in Q[ee])ue===de&&s.off(q,[ee,ue].join("."));else if(Y){if(Q[Y]){for(de in Q[Y])s.off(q,[Y,de].join("."));delete Q[Y]}}else{for(ee in Q)s.off(q,ee);q.instance._events={}}})}},s.extend(s.Element,{on:function(v,A,R,U){return s.on(this,v,A,R,U),this},off:function(v,A){return s.off(this.node,v,A),this},fire:function(v,A){return v instanceof r.Event?this.node.dispatchEvent(v):this.node.dispatchEvent(v=new s.CustomEvent(v,{detail:A,cancelable:!0})),this._event=v,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(v){return v==null?this.transform("x"):this.transform({x:v-this.x()},!0)},y:function(v){return v==null?this.transform("y"):this.transform({y:v-this.y()},!0)},cx:function(v){return v==null?this.gbox().cx:this.x(v-this.gbox().width/2)},cy:function(v){return v==null?this.gbox().cy:this.y(v-this.gbox().height/2)},gbox:function(){var v=this.bbox(),A=this.transform();return v.x+=A.x,v.x2+=A.x,v.cx+=A.x,v.y+=A.y,v.y2+=A.y,v.cy+=A.y,v}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(v){v&&(v=typeof v=="string"?n.getElementById(v):v,v.nodeName=="svg"?this.constructor.call(this,v):(this.constructor.call(this,s.create("svg")),v.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){if(!this._defs){var v;(v=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(v):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var v=this.node.getScreenCTM();return v&&this.style("left",-v.e%1+"px").style("top",-v.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw.parentNode||this.node.appendChild(s.parser.draw),this},clone:function(v){this.writeDataToDom();var A=this.node,R=k(A.cloneNode(!0));return v?(v.node||v).appendChild(R.node):A.parentNode.insertBefore(R.node,A.nextSibling),R}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var v=this.position()+1,A=this.parent();return A.removeElement(this).add(this,v),A instanceof s.Doc&&A.node.appendChild(A.defs().node),this},backward:function(){var v=this.position();return v>0&&this.parent().removeElement(this).add(this,v-1),this},front:function(){var v=this.parent();return v.node.appendChild(this.node),v instanceof s.Doc&&v.node.appendChild(v.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(v){v.remove();var A=this.position();return this.parent().add(v,A),this},after:function(v){v.remove();var A=this.position();return this.parent().add(v,A+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var v=this.targets.length-1;v>=0;v--)this.targets[v]&&this.targets[v].unmask();return this.targets=[],s.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(v){return this.masker=v instanceof s.Mask?v:this.parent().mask().add(v),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var v=this.targets.length-1;v>=0;v--)this.targets[v]&&this.targets[v].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(v){return this.clipper=v instanceof s.ClipPath?v:this.parent().clip().add(v),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(v){this.constructor.call(this,s.create(v+"Gradient")),this.type=v},inherit:s.Container,extend:{at:function(v,A,R){return this.put(new s.Stop).update(v,A,R)},update:function(v){return this.clear(),typeof v=="function"&&v.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(v,A,R){return v=="transform"&&(v="gradientTransform"),s.Container.prototype.attr.call(this,v,A,R)}},construct:{gradient:function(v,A){return this.defs().gradient(v,A)}}}),s.extend(s.Gradient,s.FX,{from:function(v,A){return(this._target||this).type=="radial"?this.attr({fx:new s.Number(v),fy:new s.Number(A)}):this.attr({x1:new s.Number(v),y1:new s.Number(A)})},to:function(v,A){return(this._target||this).type=="radial"?this.attr({cx:new s.Number(v),cy:new s.Number(A)}):this.attr({x2:new s.Number(v),y2:new s.Number(A)})}}),s.extend(s.Defs,{gradient:function(v,A){return this.put(new s.Gradient(v)).update(A)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(v){return(typeof v=="number"||v instanceof s.Number)&&(v={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),v.opacity!=null&&this.attr("stop-opacity",v.opacity),v.color!=null&&this.attr("stop-color",v.color),v.offset!=null&&this.attr("offset",new s.Number(v.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(v){return this.clear(),typeof v=="function"&&v.call(this,this),this},toString:function(){return this.fill()},attr:function(v,A,R){return v=="transform"&&(v="patternTransform"),s.Container.prototype.attr.call(this,v,A,R)}},construct:{pattern:function(v,A,R){return this.defs().pattern(v,A,R)}}}),s.extend(s.Defs,{pattern:function(v,A,R){return this.put(new s.Pattern).update(R).attr({x:0,y:0,width:v,height:A,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(v){this.constructor.call(this,v)},inherit:s.Element}),s.Bare=s.invent({create:function(v,A){if(this.constructor.call(this,s.create(v)),A)for(var R in A.prototype)typeof A.prototype[R]=="function"&&(this[R]=A.prototype[R])},inherit:s.Element,extend:{words:function(v){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(n.createTextNode(v)),this}}}),s.extend(s.Parent,{element:function(v,A){return this.put(new s.Bare(v,A))}}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(v,A){return this.attr("href",(A||"")+"#"+v,s.xlink)}},construct:{use:function(v,A){return this.put(new s.Use).element(v,A)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(v,A){return this.put(new s.Rect).size(v,A)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(v){return this.put(new s.Circle).rx(new s.Number(v).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(v){return this.attr("r",v)},ry:function(v){return this.rx(v)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(v,A){return this.put(new s.Ellipse).size(v,A).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(v){return this.attr("rx",v)},ry:function(v){return this.attr("ry",v)}}),s.extend(s.Circle,s.Ellipse,{x:function(v){return v==null?this.cx()-this.rx():this.cx(v+this.rx())},y:function(v){return v==null?this.cy()-this.ry():this.cy(v+this.ry())},cx:function(v){return v==null?this.attr("cx"):this.attr("cx",v)},cy:function(v){return v==null?this.attr("cy"):this.attr("cy",v)},width:function(v){return v==null?this.rx()*2:this.rx(new s.Number(v).divide(2))},height:function(v){return v==null?this.ry()*2:this.ry(new s.Number(v).divide(2))},size:function(v,A){var R=x(this,v,A);return this.rx(new s.Number(R.width).divide(2)).ry(new s.Number(R.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(v,A,R,U){return v==null?this.array():(typeof A<"u"?v={x1:v,y1:A,x2:R,y2:U}:v=new s.PointArray(v).toLine(),this.attr(v))},move:function(v,A){return this.attr(this.array().move(v,A).toLine())},size:function(v,A){var R=x(this,v,A);return this.attr(this.array().size(R.width,R.height).toLine())}},construct:{line:function(v,A,R,U){return s.Line.prototype.plot.apply(this.put(new s.Line),v!=null?[v,A,R,U]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(v){return this.put(new s.Polyline).plot(v||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(v){return this.put(new s.Polygon).plot(v||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(v){return v==null?this.array():this.clear().attr("points",typeof v=="string"?v:this._array=new s.PointArray(v))},clear:function(){return delete this._array,this},move:function(v,A){return this.attr("points",this.array().move(v,A))},size:function(v,A){var R=x(this,v,A);return this.attr("points",this.array().size(R.width,R.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(v){return v==null?this.bbox().x:this.move(v,this.bbox().y)},y:function(v){return v==null?this.bbox().y:this.move(this.bbox().x,v)},width:function(v){var A=this.bbox();return v==null?A.width:this.size(v,A.height)},height:function(v){var A=this.bbox();return v==null?A.height:this.size(A.width,v)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(v){return v==null?this.array():this.clear().attr("d",typeof v=="string"?v:this._array=new s.PathArray(v))},clear:function(){return delete this._array,this},move:function(v,A){return this.attr("d",this.array().move(v,A))},x:function(v){return v==null?this.bbox().x:this.move(v,this.bbox().y)},y:function(v){return v==null?this.bbox().y:this.move(this.bbox().x,v)},size:function(v,A){var R=x(this,v,A);return this.attr("d",this.array().size(R.width,R.height))},width:function(v){return v==null?this.bbox().width:this.size(v,this.bbox().height)},height:function(v){return v==null?this.bbox().height:this.size(this.bbox().width,v)}},construct:{path:function(v){return this.put(new s.Path).plot(v||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(v){if(!v)return this;var A=this,R=new r.Image;return s.on(R,"load",function(){s.off(R);var U=A.parent(s.Pattern);U!==null&&(A.width()==0&&A.height()==0&&A.size(R.width,R.height),U&&U.width()==0&&U.height()==0&&U.size(A.width(),A.height()),typeof A._loaded=="function"&&A._loaded.call(A,{width:R.width,height:R.height,ratio:R.width/R.height,url:v}))}),s.on(R,"error",function(U){s.off(R),typeof A._error=="function"&&A._error.call(A,U)}),this.attr("href",R.src=this.src=v,s.xlink)},loaded:function(v){return this._loaded=v,this},error:function(v){return this._error=v,this}},construct:{image:function(v,A,R){return this.put(new s.Image).load(v).size(A||0,R||A||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(v){return v==null?this.attr("x"):this.attr("x",v)},y:function(v){var A=this.attr("y"),R=typeof A=="number"?A-this.bbox().y:0;return v==null?typeof A=="number"?A-R:A:this.attr("y",typeof v.valueOf()=="number"?v+R:v)},cx:function(v){return v==null?this.bbox().cx:this.x(v-this.bbox().width/2)},cy:function(v){return v==null?this.bbox().cy:this.y(v-this.bbox().height/2)},text:function(v){if(typeof v>"u"){for(var v="",A=this.node.childNodes,R=0,U=A.length;R<U;++R)R!=0&&A[R].nodeType!=3&&s.adopt(A[R]).dom.newLined==!0&&(v+=`
`),v+=A[R].textContent;return v}if(this.clear().build(!0),typeof v=="function")v.call(this,this);else{v=v.split(`
`);for(var R=0,q=v.length;R<q;R++)this.tspan(v[R]).newLine()}return this.build(!1).rebuild()},size:function(v){return this.attr("font-size",v).rebuild()},leading:function(v){return v==null?this.dom.leading:(this.dom.leading=new s.Number(v),this.rebuild())},lines:function(){var v=(this.textPath&&this.textPath()||this).node,A=s.utils.map(s.utils.filterSVGElements(v.childNodes),function(R){return s.adopt(R)});return new s.Set(A)},rebuild:function(v){if(typeof v=="boolean"&&(this._rebuild=v),this._rebuild){var A=this,R=0,U=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(A.textPath()||this.attr("x",A.attr("x")),this.text()==`
`?R+=U:(this.attr("dy",U+R),R=0))}),this.fire("rebuild")}return this},build:function(v){return this._build=!!v,this},setData:function(v){return this.dom=v,this.dom.leading=new s.Number(v.leading||1.3),this}},construct:{text:function(v){return this.put(new s.Text).text(v)},plain:function(v){return this.put(new s.Text).plain(v)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(v){return v==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof v=="function"?v.call(this,this):this.plain(v),this)},dx:function(v){return this.attr("dx",v)},dy:function(v){return this.attr("dy",v)},newLine:function(){var v=this.parent(s.Text);return this.dom.newLined=!0,this.dy(v.dom.leading*v.attr("font-size")).attr("x",v.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(v){return this._build===!1&&this.clear(),this.node.appendChild(n.createTextNode(v)),this},tspan:function(v){var A=(this.textPath&&this.textPath()||this).node,R=new s.Tspan;return this._build===!1&&this.clear(),A.appendChild(R.node),R.text(v)},clear:function(){for(var v=(this.textPath&&this.textPath()||this).node;v.hasChildNodes();)v.removeChild(v.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,path:function(v){for(var A=new s.TextPath,R=this.doc().defs().path(v);this.node.hasChildNodes();)A.node.appendChild(this.node.firstChild);return this.node.appendChild(A.node),A.attr("href","#"+R,s.xlink),this},array:function(){var v=this.track();return v?v.array():null},plot:function(v){var A=this.track(),R=null;return A&&(R=A.plot(v)),v==null?R:this},track:function(){var v=this.textPath();if(v)return v.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(v){return this.attr("href",v,s.xlink)},show:function(v){return this.attr("show",v,s.xlink)},target:function(v){return this.attr("target",v)}},construct:{link:function(v){return this.put(new s.A).to(v)}}}),s.extend(s.Element,{linkTo:function(v){var A=new s.A;return typeof v=="function"?v.call(A,A):A.to(v),this.parent().put(A).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(v){return this.attr("markerWidth",v)},height:function(v){return this.attr("markerHeight",v)},ref:function(v,A){return this.attr("refX",v).attr("refY",A)},update:function(v){return this.clear(),typeof v=="function"&&v.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(v,A,R){return this.defs().marker(v,A,R)}}}),s.extend(s.Defs,{marker:function(v,A,R){return this.put(new s.Marker).size(v,A).ref(v/2,A/2).viewbox(0,0,v,A).attr("orient","auto").update(R)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(v,A,R,U){var q=["marker"];return v!="all"&&q.push(v),q=q.join("-"),v=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(A,R,U),this.attr(q,v)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(v,A){return A=="color"?v:v+"-"+A}};["fill","stroke"].forEach(function(v){var A,R={};R[v]=function(U){if(typeof U>"u")return this;if(typeof U=="string"||s.Color.isRgb(U)||U&&typeof U.fill=="function")this.attr(v,U);else for(A=c[v].length-1;A>=0;A--)U[c[v][A]]!=null&&this.attr(c.prefix(v,c[v][A]),U[c[v][A]]);return this},s.extend(s.Element,s.FX,R)}),s.extend(s.Element,s.FX,{rotate:function(v,A,R){return this.transform({rotation:v,cx:A,cy:R})},skew:function(v,A,R,U){return arguments.length==1||arguments.length==3?this.transform({skew:v,cx:A,cy:R}):this.transform({skewX:v,skewY:A,cx:R,cy:U})},scale:function(v,A,R,U){return arguments.length==1||arguments.length==3?this.transform({scale:v,cx:A,cy:R}):this.transform({scaleX:v,scaleY:A,cx:R,cy:U})},translate:function(v,A){return this.transform({x:v,y:A})},flip:function(v,A){return A=typeof v=="number"?v:A,this.transform({flip:v||"both",offset:A})},matrix:function(v){return this.attr("transform",new s.Matrix(arguments.length==6?[].slice.call(arguments):v))},opacity:function(v){return this.attr("opacity",v)},dx:function(v){return this.x(new s.Number(v).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(v){return this.y(new s.Number(v).plus(this instanceof s.FX?0:this.y()),!0)},dmove:function(v,A){return this.dx(v).dy(A)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(v,A){var R=(this._target||this).type;return R=="radial"||R=="circle"?this.attr("r",new s.Number(v)):this.rx(v).ry(A??v)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(v){return this.node.getPointAtLength(v)}}),s.extend(s.Parent,s.Text,s.Tspan,s.FX,{font:function(v,A){if(typeof v=="object")for(A in v)this.font(A,v[A]);return v=="leading"?this.leading(A):v=="anchor"?this.attr("text-anchor",A):v=="size"||v=="family"||v=="weight"||v=="stretch"||v=="variant"||v=="style"?this.attr("font-"+v,A):this.attr(v,A)}}),s.Set=s.invent({create:function(v){v instanceof s.Set?this.members=v.members.slice():Array.isArray(v)?this.members=v:this.clear()},extend:{add:function(){var v,A,R=[].slice.call(arguments);for(v=0,A=R.length;v<A;v++)this.members.push(R[v]);return this},remove:function(v){var A=this.index(v);return A>-1&&this.members.splice(A,1),this},each:function(v){for(var A=0,R=this.members.length;A<R;A++)v.apply(this.members[A],[A,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(v){return this.index(v)>=0},index:function(v){return this.members.indexOf(v)},get:function(v){return this.members[v]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new s.RBox;var v=this.members[0].rbox(this.members[0].doc());return this.each(function(){v=v.merge(this.rbox(this.doc()))}),v}},construct:{set:function(v){return new s.Set(v)}}}),s.FX.Set=s.invent({create:function(v){this.set=v}}),s.Set.inherit=function(){var v,A=[];for(var v in s.Shape.prototype)typeof s.Shape.prototype[v]=="function"&&typeof s.Set.prototype[v]!="function"&&A.push(v);A.forEach(function(R){s.Set.prototype[R]=function(){for(var U=0,q=this.members.length;U<q;U++)this.members[U]&&typeof this.members[U][R]=="function"&&this.members[U][R].apply(this.members[U],arguments);return R=="animate"?this.fx||(this.fx=new s.FX.Set(this)):this}}),A=[];for(var v in s.FX.prototype)typeof s.FX.prototype[v]=="function"&&typeof s.FX.Set.prototype[v]!="function"&&A.push(v);A.forEach(function(R){s.FX.Set.prototype[R]=function(){for(var U=0,q=this.set.members.length;U<q;U++)this.set.members[U].fx[R].apply(this.set.members[U].fx,arguments);return this}})},s.extend(s.Element,{data:function(v,A,R){if(typeof v=="object")for(A in v)this.data(A,v[A]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+v))}catch{return this.attr("data-"+v)}else this.attr("data-"+v,A===null?null:R===!0||typeof A=="string"||typeof A=="number"?A:JSON.stringify(A));return this}}),s.extend(s.Element,{remember:function(v,A){if(typeof arguments[0]=="object")for(var A in v)this.remember(A,v[A]);else{if(arguments.length==1)return this.memory()[v];this.memory()[v]=A}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var v=arguments.length-1;v>=0;v--)delete this.memory()[arguments[v]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(v){var A=n.getElementById(F(v)||v);return s.adopt(A)},s.select=function(v,A){return new s.Set(s.utils.map((A||n).querySelectorAll(v),function(R){return s.adopt(R)}))},s.extend(s.Parent,{select:function(v){return s.select(v,this.node)}});function h(v,A,R,U){return R+U.replace(s.regex.dots," .")}function d(v){for(var A=v.slice(0),R=A.length;R--;)Array.isArray(A[R])&&(A[R]=d(A[R]));return A}function m(v,A){return v instanceof A}function y(v,A){return(v.matches||v.matchesSelector||v.msMatchesSelector||v.mozMatchesSelector||v.webkitMatchesSelector||v.oMatchesSelector).call(v,A)}function g(v){return v.toLowerCase().replace(/-(.)/g,function(A,R){return R.toUpperCase()})}function b(v){return v.charAt(0).toUpperCase()+v.slice(1)}function S(v){return v.length==4?["#",v.substring(1,2),v.substring(1,2),v.substring(2,3),v.substring(2,3),v.substring(3,4),v.substring(3,4)].join(""):v}function E(v){var A=v.toString(16);return A.length==1?"0"+A:A}function x(v,A,R){if(A==null||R==null){var U=v.bbox();A==null?A=U.width/U.height*R:R==null&&(R=U.height/U.width*A)}return{width:A,height:R}}function w(v,A,R){return{x:A*v.a+R*v.c+0,y:A*v.b+R*v.d+0}}function T(v){return{a:v[0],b:v[1],c:v[2],d:v[3],e:v[4],f:v[5]}}function I(v){return v instanceof s.Matrix||(v=new s.Matrix(v)),v}function M(v,A){v.cx=v.cx==null?A.bbox().cx:v.cx,v.cy=v.cy==null?A.bbox().cy:v.cy}function C(v){for(var A=0,R=v.length,U="";A<R;A++)U+=v[A][0],v[A][1]!=null&&(U+=v[A][1],v[A][2]!=null&&(U+=" ",U+=v[A][2],v[A][3]!=null&&(U+=" ",U+=v[A][3],U+=" ",U+=v[A][4],v[A][5]!=null&&(U+=" ",U+=v[A][5],U+=" ",U+=v[A][6],v[A][7]!=null&&(U+=" ",U+=v[A][7])))));return U+" "}function k(v){for(var A=v.childNodes.length-1;A>=0;A--)v.childNodes[A]instanceof r.SVGElement&&k(v.childNodes[A]);return s.adopt(v).id(s.eid(v.nodeName))}function N(v){return v.x==null&&(v.x=0,v.y=0,v.width=0,v.height=0),v.w=v.width,v.h=v.height,v.x2=v.x+v.width,v.y2=v.y+v.height,v.cx=v.x+v.width/2,v.cy=v.y+v.height/2,v}function F(v){var A=(v||"").toString().match(s.regex.reference);if(A)return A[1]}function P(v){return Math.abs(v)>1e-37?v:0}var B="abcdef".split("");if(typeof r.CustomEvent!="function"){var O=function(v,A){A=A||{bubbles:!1,cancelable:!1,detail:void 0};var R=n.createEvent("CustomEvent");return R.initCustomEvent(v,A.bubbles,A.cancelable,A.detail),R};O.prototype=r.Event.prototype,s.CustomEvent=O}else s.CustomEvent=r.CustomEvent;return function(v){for(var A=0,R=["moz","webkit"],U=0;U<R.length&&!r.requestAnimationFrame;++U)v.requestAnimationFrame=v[R[U]+"RequestAnimationFrame"],v.cancelAnimationFrame=v[R[U]+"CancelAnimationFrame"]||v[R[U]+"CancelRequestAnimationFrame"];v.requestAnimationFrame=v.requestAnimationFrame||function(q){var Q=new Date().getTime(),ee=Math.max(0,16-(Q-A)),Y=v.setTimeout(function(){q(Q+ee)},ee);return A=Q+ee,Y},v.cancelAnimationFrame=v.cancelAnimationFrame||v.clearTimeout}(r),s})}(XU)),XU.exports}var AQt=IQt();const J1=D_(AQt);class MQt extends Si{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,r){return r.getGraphicIcon(t)}getGraphicSymbol(t,r){return r.getGraphicSymbol(t)}makeRenderer(t,r,n=!1){switch(t.type){case this.SIMPLE:return new xQt(t,r);case this.CLASS_BREAKS:return new EQt(t,r,n);case this.UNIQUE_VALUE:return new SQt(t,r,n);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const r=J1(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),n={svgcode:"",imgHeight:"",imgWidth:""};if(t){const i=await this.renderSymbologyImage(t);if(i){n.svgcode=i;const s=document.createElement("span");s.innerHTML=i;const o=s.firstElementChild?.lastElementChild;n.imgHeight=o?.getAttribute("height")||"",n.imgWidth=o?.getAttribute("width")||""}else n.svgcode=r.svg()}else n.svgcode=r.svg();return n}listToSymbology(t,r){return r.map(({text:n,image:i})=>{const s={name:n,image:i,svgcode:""};return t(i).then(o=>{s.svgcode=o}),s})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,r=null){r===null&&(r=J1(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const n=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(n===t)return"";const{loader:i}=await this.svgDrawImage(r,n);return r.viewbox(0,0,i.width,i.height),r.svg()}async renderSymbologyIcon(t,r=null){if(r===null){const s=document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(s),r=J1(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const n=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:i}=await this.svgDrawImage(r,n);return i.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(i,this.CONTENT_IMAGE_SIZE),r.svg()}generatePlaceholderSymbology(t,r="#000"){const n=J1(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return n.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(r),n.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).tspan(t[0].toUpperCase()).addClass("grid-icons").attr({dy:"29.900000000000002",x:"7.6875"}),{name:t,svgcode:n.svg()}}async generateBlankSymbology(){return J1(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const r=this,n=1.33333,i=document.createElement("div");i.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(i);const s=J1(i).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:y,path:g}){return s.path(g).size(y*n)},circle({size:y}){return s.circle(y*n)},cross({size:y}){return s.path("M 0,10 L 20,10 M 10,0 L 10,20").size(y*n)},x({size:y}){return s.path("M 0,0 L 20,20 M 20,0 L 0,20").size(y*n)},triangle({size:y}){return s.path("M 20,20 L 10,0 0,20 Z").size(y*n)},diamond({size:y}){return s.path("M 20,10 L 10,0 0,10 10,20 Z").size(y*n)},square({size:y}){return s.path("M 0,0 20,0 20,20 0,20 Z").size(y*n)}},a={[ga.SOLID]:"none",[ga.NONE]:"none",[ga.DASH]:"5.333,4",[ga.DOT]:"1.333,4",[ga.DASHDOT]:"5.333,4,1.333,4",[ga.LONGDASH]:"10.666,4",[ga.LONGDASHDOT]:"10.666,4,1.333,4",[ga.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[ga.SHORTDOT]:"1.333,1.333",[ga.SHORTDASH]:"5.333,1.333",[ga.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[ga.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},c={solid:y=>({color:y.colour,opacity:y.opacity}),none:()=>"transparent",horizontal:(y,g)=>s.pattern(5,5,b=>b.line(0,5/2,5,5/2)).stroke(g),vertical:(y,g)=>s.pattern(5,5,b=>b.line(5/2,0,5/2,5)).stroke(g),"forward-diagonal":(y,g)=>s.pattern(5,5,b=>{b.line(0,0,5,5).stroke(g),b.line(0,0,5,5).move(0,5).stroke(g),b.line(0,0,5,5).move(5,0).stroke(g)}),"backward-diagonal":(y,g)=>s.pattern(5,5,b=>{b.line(5,0,0,5).stroke(g),b.line(5,0,0,5).move(5/2,5/2).stroke(g),b.line(5,0,0,5).move(-5/2,-5/2).stroke(g)}),cross:(y,g)=>s.pattern(5,5,b=>{b.line(5/2,0,5/2,5).stroke(g),b.line(0,5/2,5,5/2).stroke(g)}),"diagonal-cross":(y,g)=>s.pattern(7,7,b=>{b.line(0,0,7,7).stroke(g),b.line(7,0,0,7).stroke(g)})},h={"simple-marker"(){const y=m(t.color);t.outline=t.outline||u;const g=m(t.outline.color),b=d({color:g.colour,opacity:g.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),S=o[t.style](t).fill({color:y.colour,opacity:y.opacity}).stroke(b).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0);r.fitInto(S,r.CONTENT_SIZE)},"simple-line"(){const y=m(t.color),g=d({color:y.colour,opacity:y.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),b=r.CONTENT_PADDING,S=r.CONTAINER_SIZE-r.CONTENT_PADDING;s.line(b,b,S,S).stroke(g)},esriCLS(){this["simple-line"]()},"simple-fill"(){const y=m(t.color),g=d({color:y.colour,opacity:y.opacity}),b=c[t.style](y,g);t.outline=t.outline||u;const S=m(t.outline.color),E=d({color:S.colour,opacity:S.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(b).stroke(E)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const y=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,g=t.width*t.xscale,b=t.height*t.yscale;t.outline=t.outline||u;const S=m(t.outline.color),E=d({color:S.colour,opacity:S.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return r.$iApi.geo.shared.convertImagetoDataURL(y).then(x=>{const w=s.pattern(g,b,T=>T.image(x,g,b));s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(w).stroke(E)})},"picture-marker"(){const y=t.source,g=y&&y.imageData?`data:${y.contentType};base64,${y.imageData}`:t.url;return r.$iApi.geo.shared.convertImagetoDataURL(g).then(b=>r.svgDrawImage(s,b)).then(({image:b})=>{b.center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0),r.fitInto(b,r.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(h[t.type]()),document.body.removeChild(i),s.svg()}catch(y){return console.error(y),this.generateBlankSymbology()}function d(y){return Object.assign({},l,y)}function m(y){return y?{colour:`rgb(${y.r},${y.g},${y.b})`,opacity:y.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}async svgDrawImage(t,r,n=0,i=0,s=!0){return new Promise((o,a)=>{const l=t.image(r,n,i,s).loaded(u=>o({image:l,loader:u})).error(u=>{a(u),console.error(u)})})}fitInto(t,r){const n=t.node.getBoundingClientRect(),i=r/Math.max(n.width,n.height);i<1&&t.scale(i)}rendererToLegend(t){let r;const n=t.symbolUnits.slice(0);if(t.defaultUnit&&n.push(t.defaultUnit),t.falseRenderer)r=n.map(i=>[i]);else{const i=new Map;n.forEach(s=>{const o=i.get(s.label);o?o.push(s):i.set(s.label,[s])}),r=[],i.forEach(s=>r.push(s))}return r.map(i=>{const s=i[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:s.label||"",definitionClause:i.length===1?s.definitionClause:`(${i.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(s.symbol).then(a=>{o.svgcode=a,i.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const r={query:{f:"json"}},n={layers:[]},[i,s]=await qm(Xe(`${t}/legend`,r));return s?s.data?s.data:(console.error(`Error loading legend data for ${t}`),n):(console.error(`Error loading legend for ${t}`,i),n)}mapServerLegendToRenderer(t,r){const n=t.layers.find(s=>s.layerId===r);let i;if(typeof n<"u")return i={type:"uniqueValue",field:"fakefield",uniqueValueInfos:n.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))},this.makeRenderer(jg(i),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const r=t.layers.map(i=>i.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))),n={type:"uniqueValue",field1:"fakefield",uniqueValueInfos:[].concat(...r)};return this.makeRenderer(jg(n),[],!0)}async mapServerToLocalLegend(t,r=void 0){const n=await this.getMapServerLegend(t);let i,s;return typeof r>"u"?(s=0,i=this.mapServerLegendToRendererAll(n)):(s=parseInt(r),i=this.mapServerLegendToRenderer(n,s)),this.rendererToLegend(i)}}class CQt extends Si{constructor(t){super(t)}async arcGisServerQueryIds(t){if(!(t.filterGeometry||t.filterSql))return console.error("arcGisServerQueryIds called without any filter"),[];const r=new ui;r.returnGeometry=!1,t.filterSql&&(r.where=t.filterSql),t.filterGeometry&&(r.geometry=await this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),r.spatialRelationship="intersects");const n=await Cz(t.url,r);return Array.isArray(n)?n:[]}async geoJsonQuery(t){const r=new ui;if(r.returnGeometry=!!t.includeGeometry,r.outFields=["*"],t.filterGeometry&&(r.geometry=await this.queryGeometryHelper(t.filterGeometry,!0),r.spatialRelationship="intersects"),t.filterSql&&(r.where=t.filterSql),t.filterOIDs&&(r.objectIds=t.filterOIDs),await t.layer.loadPromise(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(r)).features.map((n,i)=>{let s;return r.returnGeometry?s=this.$iApi.geo.geom.geomEsriToRamp(n.geometry,`queryResult${i}`):s=new n0,new Kl(s,"",n.attributes)})}async queryGeometryHelper(t,r,n,i){return!r&&t.type===or.EXTENT&&i&&!i.isEqual(t.sr)&&!(n&&n>2e7&&t.sr.wkid===3978&&i.wkid===4326)?(await this.$iApi.geo.proj.projectExtent(i,t)).toESRI():t.toESRI()}makeClickBuffer(t,r=5){const n=this.$iApi.geo.map,i=n.getExtent(),s=r*(i.xmax-i.xmin)/n.getPixelWidth();return new Tn("ze_buffer",[t.x-s,t.y-s],[t.x+s,t.y+s],t.sr)}}class kQt extends Si{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=Eg.geom,this.proj=Eg.proj,this.shared=Eg.sharedUtils,this.map=new TXt(t),this.layer=new nQt(t),this.attributes=new bQt(t),this.query=new CQt(t),this.symbology=new MQt(t),Array.isArray(pr.request.interceptors)||(pr.request.interceptors=[]),pr.request.interceptors.push({before:r=>{r.url.includes("?blankTile=false")&&(r.url=r.url.replace("?blankTile=false","?blankTile=true"))}})}set proxy(t){pr.request.proxyUrl=t}get proxy(){return pr.request.proxyUrl||""}}const RQt=Object.assign({"../fixtures/appbar/index.ts":()=>Me(()=>import("./index-h-lK-OBq-D6XfwCBO.js"),__vite__mapDeps([249,1,2]),import.meta.url),"../fixtures/areas-of-interest/index.ts":()=>Me(()=>import("./index-BqPraQYi-DzQHXW9J.js"),__vite__mapDeps([250,251,1,2]),import.meta.url),"../fixtures/basemap/index.ts":()=>Me(()=>import("./index-Df9T6Yx6-CNWf4VAS.js"),__vite__mapDeps([252,1,2]),import.meta.url),"../fixtures/crosshairs/index.ts":()=>Me(()=>import("./index-CGM-kaEo-CahlkxeZ.js"),__vite__mapDeps([253,1,2]),import.meta.url),"../fixtures/details/index.ts":()=>Me(()=>import("./index-DYBxjHjA-2AXE5PMW.js"),__vite__mapDeps([254,1,2,255]),import.meta.url),"../fixtures/export-footnote/index.ts":()=>Me(()=>import("./index-BdFGz0ZK-DK_J5XDY.js"),__vite__mapDeps([256,257,1,2]),import.meta.url),"../fixtures/export-legend/index.ts":()=>Me(()=>import("./index-r09zd3NW-CRhHQWj4.js"),__vite__mapDeps([258,257,1,2]),import.meta.url),"../fixtures/export-map/index.ts":()=>Me(()=>import("./index-CCTc-ZuK-Cc-iU_D_.js"),__vite__mapDeps([259,257,1,2]),import.meta.url),"../fixtures/export-northarrow/index.ts":()=>Me(()=>import("./index-Dmxwlr4l-C1lDB6vR.js"),__vite__mapDeps([260,257,1,2]),import.meta.url),"../fixtures/export-scalebar/index.ts":()=>Me(()=>import("./index-B3sR5Tw1-NDkDef01.js"),__vite__mapDeps([261,257,1,2]),import.meta.url),"../fixtures/export-timestamp/index.ts":()=>Me(()=>import("./index-8hKUfhZy-DL5e5WQS.js"),__vite__mapDeps([262,257,1,2]),import.meta.url),"../fixtures/export-title/index.ts":()=>Me(()=>import("./index-Dyl_htzs-BVbNVDHz.js"),__vite__mapDeps([263,257,1,2]),import.meta.url),"../fixtures/export/index.ts":()=>Me(()=>import("./index-DFkNa04r-BbCFNOq2.js"),__vite__mapDeps([264,1,2,265]),import.meta.url),"../fixtures/extentguard/index.ts":()=>Me(()=>import("./index-DKcBQ-la-DULXc8jr.js"),__vite__mapDeps([266,1,2]),import.meta.url),"../fixtures/gazebo/index.ts":()=>Me(()=>import("./index-tjx40fMd-kbDFx9vw.js"),__vite__mapDeps([267,1,2]),import.meta.url),"../fixtures/geosearch/index.ts":()=>Me(()=>import("./index-B8jc3R3Y-DRPpukME.js"),__vite__mapDeps([268,1,2]),import.meta.url),"../fixtures/grid/index.ts":()=>Me(()=>import("./index-CabmG4oY-CGkQts9N.js"),__vite__mapDeps([269,1,2,270]),import.meta.url),"../fixtures/help/index.ts":()=>Me(()=>import("./index-DIsrZz1v-CfzCgDS9.js"),__vite__mapDeps([271,1,2]),import.meta.url),"../fixtures/hilight/index.ts":()=>Me(()=>import("./index-DyJM8kjq-u9lMOvrx.js"),__vite__mapDeps([272,255,1,2]),import.meta.url),"../fixtures/layer-reorder/index.ts":()=>Me(()=>import("./index-Bcz8meSs-WA5qj3ta.js"),__vite__mapDeps([273,1,2]),import.meta.url),"../fixtures/legend/index.ts":()=>Me(()=>import("./index-Dr1s3TmU-DJEvoFNu.js"),__vite__mapDeps([274,1,2]),import.meta.url),"../fixtures/mapnav/index.ts":()=>Me(()=>import("./index-Dfj2vO5M-DPcjyD6H.js"),__vite__mapDeps([275,1,2]),import.meta.url),"../fixtures/metadata/index.ts":()=>Me(()=>import("./index-PSDu7VmZ-Ct9vFxOi.js"),__vite__mapDeps([276,1,2]),import.meta.url),"../fixtures/northarrow/index.ts":()=>Me(()=>import("./index-BsxLcVtw-CnGaJN6W.js"),__vite__mapDeps([277,1,2]),import.meta.url),"../fixtures/overviewmap/index.ts":()=>Me(()=>import("./index-25Z1fbt7-zvMEZTOd.js"),__vite__mapDeps([278,1,2]),import.meta.url),"../fixtures/panguard/index.ts":()=>Me(()=>import("./index-BzmEpvZx-D0-O9B3x.js"),__vite__mapDeps([279,1,2]),import.meta.url),"../fixtures/scrollguard/index.ts":()=>Me(()=>import("./index-BdlNnUMT-B_mTzHAk.js"),__vite__mapDeps([280,1,2]),import.meta.url),"../fixtures/settings/index.ts":()=>Me(()=>import("./index-cRInSZkq-D_dfo1il.js"),__vite__mapDeps([281,1,2]),import.meta.url),"../fixtures/snowman/index.ts":()=>Me(()=>import("./index-DOx2BZjw-BJaRak_0.js"),__vite__mapDeps([282,1,2]),import.meta.url),"../fixtures/wizard/index.ts":()=>Me(()=>import("./index-CJnA3qdc-Dtl1hPru.js"),__vite__mapDeps([283,1,2]),import.meta.url)});class OQt extends Si{constructor(t){super(t)}exists(t){return t in Dl(this.$vApp.$pinia).items}async add(t,r){let n;if(t in Dl(this.$vApp.$pinia).items)return this.get(t);if(r){if(typeof r!="function")throw new Error("malformed fixture constructor");n=vN.updateBaseToInstance(new r,t,this.$iApi)}else{const i=(await RQt[`../fixtures/${t}/index.ts`]()).default;n=new i(t,this.$iApi)}return Dl(this.$vApp.$pinia).addFixture(n),this.$iApi.event.emit(St.FIXTURE_ADDED,n),this.$iApi.geo.map.created&&n.initialized?.(),n}remove(t){const r=this.get(t);if(!r)throw new Error(`Could not find fixture ${t} for removal`);return Dl(this.$vApp.$pinia).removeFixture(r),this.$iApi.event.emit(St.FIXTURE_REMOVED,r),r}flush(){const t=Dl(this.$vApp.$pinia);Object.keys(t.items).forEach(r=>{const n=this.get(r);n?.persist&&typeof n?.removed=="function"?n.removed():n&&this.remove(r)})}restore(){const t=Dl(this.$vApp.$pinia);Object.keys(t.items).forEach(r=>{const n=t.items[r];typeof n.added=="function"&&n.added(),this.$iApi.geo.map.created&&typeof n.initialized=="function"&&n.initialized()})}get(t){const r=[];typeof t=="string"?r.push(t):Array.isArray(t)?r.push(...t):r.push(t.id);const n=r.map(i=>{const s=Dl(this.$vApp.$pinia).items[i];if(s)return s});return n.length===1?n[0]:n}isLoaded(t){const r=Dl(this.$vApp.$pinia),n=Array.isArray(t)?t:[t];n.forEach(s=>{r.loadPromises[s]===void 0&&r.addLoadPromise(s)});const i=r.getLoadPromises(n);return Array.isArray(t)?Promise.all(i):i[0]}addDefaultFixtures(t){(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","panguard","scrollguard","settings","wizard"]);const r=Wo(this.$vApp.$pinia);return r.startingFixtures=t,Promise.all(t.map(n=>this.add(n)))}}class vN extends Si{static updateBaseToInstance(t,r,n){const i=new vN(r,n);return Object.defineProperties(t,{id:{value:r},$iApi:{value:n},persist:{value:t.persist??!0},$vApp:{get(){return i.$vApp}},remove:{value:i.remove},extend:{value:i.extend},config:{get(){return i.config}},mount:{value:i.mount}}),t}id;persist;constructor(t,r){super(r),this.id=t,this.persist=!0}remove(){return this.$iApi.fixture.remove(this),this}extend(t,r={}){const n=mr({extends:t,iApi:this.$iApi,data(){return{...r}}}),i=Jg(n),{el:s}=this.mount(n,{props:{...r.propsData},app:i});return s}mount(t,{props:r,children:n,element:i,app:s}={}){let o=i,a=Vl(t,r,n);return s&&s._context&&(a.appContext=s._context),o?Yb(a,o):Yb(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&Yb(null,o),o=null,a=null},el:o}}get config(){return Wo(this.$vApp.$pinia).config.fixtures[this.id]}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){const t={},r=(n,i=void 0)=>{if(n.fixtures&&n.fixtures[this.id]!==void 0){let s=n.id;i!==void 0&&(s=`${i.id}-${n.index}`),t[s]=n.fixtures[this.id]}n.sublayers&&n.sublayers.forEach(s=>r(s,n))};return this.$iApi.geo.layer.allLayers().forEach(n=>r(n.config)),t}handlePanelWidths(t){if(this.config?.panelWidth){const r={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&t.forEach(n=>{r[n]=this.config.panelWidth.default});for(const n in this.config.panelWidth)n!="default"&&(r[n]=this.config.panelWidth[n]);for(const n in r){const i=this.$iApi.panel.get(n);this.$iApi.panel.setStyle(i,{"flex-basis":`${r[n]}px`})}}}handlePanelTeleports(t){if(this.config?.panelTeleport){const r=$m(this.$vApp.$pinia),n=!!this.config.panelTeleport.target;t.forEach(i=>{r.items[i].teleport=n?this.config.panelTeleport:this.config.panelTeleport[i],r.items[i].style.width="100%"})}}}class NQt extends Si{panelStore=$m(this.$vApp.$pinia);updateHTML(t,r,n){const i=this.get(t),s=n?i.screens[n]:Object.values(i.screens)[0];if(owe(s))for(const o in r)s[o].innerHTML=r[o]instanceof HTMLElement?r[o].outerHTML:r[o];else console.error("Screen must be an HTML object")}registerHTMLConfig(t){for(const n in t.content)if(typeof t.content[n]=="string"){const i=document.createElement("div");i.innerHTML=t.content[n],t.content[n]=i}const r={};return r[t.id]={screens:{},style:t.style??{width:"350px"},alertName:t.alertName},r[t.id].screens[t.id]=t.content,r}registerHTML(t){const r=this.get(t.id);if(r)return console.error("panel already exist"),r;const n=this.registerHTMLConfig(t);return this.register(n,t.options)}register(t,r){const n=LQt(t)?{[t.id]:t.config}:t;if(r){const s=r.i18n||{},o=this.$iApi.$i18n;Object.entries(s.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(s.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(s.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const i=Object.entries(n).reduce((s,[o,a])=>(s.push(new pS(this.$iApi,o,a)),s),[]);return i.forEach(s=>this.panelStore.registerPanel(s)),i.length===1?i[0]:i.reduce((s,o)=>(s[o.id]=o,s),{})}async isRegistered(t){const r=Array.isArray(t)?t:[t];r.forEach(i=>{this.panelStore.regPromises[i]===void 0&&this.panelStore.addRegPromise(i)});const n=this.panelStore.getRegPromises(r);return Array.isArray(t)?Promise.all(n):n[0]}remove(t){const r=this.get(t);r&&(r.isOpen&&this.close(r),this.panelStore.removePanel(r))}get(t){const r=typeof t=="string"?t:t.id;return this.panelStore.items[r]}open(t){let r,n,i;if(typeof t=="string"||t instanceof pS?r=this.get(t):(r=this.get(t.id),{screen:n,props:i}=t),!r)return r;if(r.isOpen&&!r.isVisible)r.minimize();else if(r.isOpen)return r;return n||(r.route&&!i?{screen:n,props:i}=r.route:n=Object.keys(r.screens).pop()),this.show(r,{screen:n,props:i})?(this.panelStore.openPanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.open",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(St.PANEL_OPENED,r)):console.error(`Failed to open ${r.id} panel.`),r}get opened(){return this.panelStore.orderedItems.concat(this.panelStore.teleported)}get visible(){return this.panelStore.visible.concat(this.panelStore.teleported)}close(t){const r=this.get(t);return r&&(r.isPinned&&r.pin(!1),this.panelStore.closePanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.close",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(St.PANEL_CLOSED,r),r)}minimize(t){const r=this.get(t);return r&&(r.isPinned&&r.pin(!1),this.panelStore.closePanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.minimize",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(St.PANEL_MINIMIZED,r),r)}move(t,r){const n=this.get(t);return n&&(this.panelStore.movePanel(n,r),n)}toggle(t,r){let n;return typeof t=="string"||t instanceof pS?n=this.get(t):n=this.get(t.id),n&&(r=typeof r<"u"?r:!n.isVisible,r!==n.isVisible&&(r?this.open(t):this.close(n)),n)}toggleMinimize(t,r){let n;return typeof t=="string"||t instanceof pS?n=this.get(t):n=this.get(t.id),n&&(r=typeof r<"u"?r:!n.isVisible,r!==n.isVisible&&(r?this.open(n):this.minimize(n)),n)}pin(t,r){const n=this.get(t);return!n||(r=typeof r<"u"?r:!n.isPinned,!n.isPinned&&!r)||(this.panelStore.pinned=r?n:void 0),n}get pinned(){return this.panelStore.pinned||void 0}show(t,r){const n=this.get(t);if(!n)return n;if(n.screens[r.screen]){if(n.screens[r.screen]?.props){const i=Object.keys(n.screens[r.screen]?.props).filter(o=>o!=="panel"),s=r.props?Object.keys(r.props):[];for(let o=0;o<i.length;o++)if(!s.includes(i[o])&&n.screens[r.screen].props[i[o]].required)return}return r.screen in this.$element._context.components||n.registerScreen(r.screen),n.teleport&&(r.props={header:!!n.teleport?.showHeader,...r.props}),this.panelStore.items[n.id].route=r,n}}setStyle(t,r,n=!1){const i=this.get(t);return i&&(this.panelStore.items[i.id].style=n?r:{...i.style,...r},i)}expand(t,r){const n=this.get(t);return n&&(this.panelStore.items[n.id].expanded=r!==void 0?r:!n.expanded,n)}}function LQt(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const PQt={};function DQt(e,t){const r=di("panel-screen");return qe(),fn(r,{header:!1,class:"screen-spinner"},{content:xi(()=>t[0]||(t[0]=[Ge("div",{class:"loader"},null,-1)])),_:1})}const FQt=Vh(PQt,[["render",DQt],["__scopeId","data-v-a3c61802"]]),jQt=Object.assign({"../fixtures/areas-of-interest/screen.vue":()=>Me(()=>import("./screen-WW-GdCBL-vCy0mcUr.js"),__vite__mapDeps([251,1,2]),import.meta.url),"../fixtures/basemap/screen.vue":()=>Me(()=>import("./screen-BRctjP38-Dtq4IITu.js"),__vite__mapDeps([284,1,2]),import.meta.url),"../fixtures/export/screen.vue":()=>Me(()=>import("./screen-CvvgRI4n-BkC3PrYE.js"),__vite__mapDeps([265,1,2]),import.meta.url),"../fixtures/geosearch/screen.vue":()=>Me(()=>import("./screen-C2TWWEbc-DsENoiQ-.js"),__vite__mapDeps([285,1,2]),import.meta.url),"../fixtures/grid/screen.vue":()=>Me(()=>import("./screen-BcX9zXg8-BdYK3iHm.js"),__vite__mapDeps([286,270,1,2]),import.meta.url),"../fixtures/help/screen.vue":()=>Me(()=>import("./screen-DJOm0-ro-Bls3W9xV.js"),__vite__mapDeps([287,288,1,2]),import.meta.url),"../fixtures/layer-reorder/screen.vue":()=>Me(()=>import("./screen-Ch7JUwmt-D9xgg2v5.js"),__vite__mapDeps([289,290,1,2]),import.meta.url),"../fixtures/legend/screen.vue":()=>Me(()=>import("./screen-DrFdgBNX-zIQkPOIu.js"),__vite__mapDeps([291,1,2]),import.meta.url),"../fixtures/metadata/screen.vue":()=>Me(()=>import("./screen-DJtQ3R-8-yaZSjRmj.js"),__vite__mapDeps([292,288,1,2]),import.meta.url),"../fixtures/settings/screen.vue":()=>Me(()=>import("./screen-BC5DKtOw-Cz5-LxKX.js"),__vite__mapDeps([293,290,294,1,2]),import.meta.url),"../fixtures/wizard/screen.vue":()=>Me(()=>import("./screen-okiN5Pfd-C0PdoCDA.js"),__vite__mapDeps([295,290,1,2]),import.meta.url)});class pS extends Si{id;screens;loadedScreens=[];alertName;teleport;controls;button;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const r=this.screens[t];let n;if(ajt(r)||ojt(r))n=r,this.loadedScreens.push(t);else if(owe(r))n={template:`<panel-screen :panel="this" :screenId="'${t}'">
                           </panel-screen>`};else{let i;typeof r=="string"?i=jQt[`../fixtures/${r}`]():i=r();const s=new Promise((o,a)=>{i.then(l=>{this.loadedScreens.push(t),o(ljt(l)?l.default:l)}),i.catch(l=>a(l))});n=Iq({loader:()=>s,loadingComponent:FQt,delay:200})}this.$iApi.$element.component(t,n)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,r,n){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:r,style:{},expanded:!1,controls:{expand:!1,...n.controls},...n},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(t){return this.$iApi.panel.move(this,t),this}get isLeftMostPanel(){if(this.$iApi.panel.visible.length>0){for(const t of this.$iApi.panel.visible)if(!t.teleport)return this.id===t.id}return!1}get isRightMostPanel(){if(this.$iApi.panel.visible.length>0){for(let t=this.$iApi.panel.visible.length-1;t>=0;t--)if(!this.$iApi.panel.visible[t].teleport)return this.id===this.$iApi.panel.visible[t].id}return!1}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return!!this.$iApi.panel.pinned&&this.$iApi.panel.pinned.id===this.id}show(t){const r=typeof t=="string"?{screen:t}:t;return this.route=r,this.$iApi.panel.show(this,r),this}setStyles(t,r=!1){return this.$iApi.panel.setStyle(this,t,r),this}expand(t){return this.$iApi.panel.expand(this,t),this}}function UQt(e){const t={};(Array.isArray(e)?e:[e]).forEach(s=>{s.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),s.language="en");const o=BQt(s);t[s.language]=o});const r=Object.entries(t).map(s=>{const o=s[1].fixturesEnabled;return delete s[1].fixturesEnabled,o});let n=!1;const i=r.reduce((s,o)=>s.filter(a=>{const l=o.includes(a);return n=n||!l,l}));return n&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),i.push("grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:i,configs:t}}function BQt(e){const t={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0,exposeOid:!1,exposeMeasurements:!0},fixturesEnabled:[]};return GQt(e.services,t),VQt(e.map,t),zQt(e.ui,t),e.plugins&&$Qt(e.plugins,t),t}function VQt(e,t){if(e.layers&&e.layers.forEach(r=>{t.layers.unshift(MSe(r))}),e.initialBasemapId&&(t.map.initialBasemapId=e.initialBasemapId),e.components){if(e.components.geoSearch&&(e.components.geoSearch.enabled&&t.fixturesEnabled.push("geosearch"),typeof e.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof e.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),e.components.overviewMap&&e.components.overviewMap.enabled&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.startMinimized=!e.components.overviewMap.initiallyExpanded,t.fixtures.overviewmap.expandFactor=e.components.overviewMap.expandFactor??1.5),e.components.northArrow&&e.components.northArrow.enabled){const r={};e.components.northArrow.arrowIcon&&(r.arrowIcon=e.components.northArrow.arrowIcon),e.components.northArrow.poleIcon&&(r.poleIcon=e.components.northArrow.poleIcon),r&&(t.fixtures.northarrow=r,t.fixturesEnabled.push("northarrow"))}if(e.components.scaleBar&&e.components.scaleBar.enabled){switch(t.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:e?.components?.scaleBar?.scalebarUnit==="english"||e?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},e.components?.mouseInfo?.spatialReference?.wkid){case 4326:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:t.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:t.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}e.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}e.components.basemap&&e.components.basemap.enabled&&t.fixturesEnabled.push("basemap")}e.extentSets&&(t.map.extentSets=[],e.extentSets.forEach(r=>{const n={id:r.id,default:{xmin:r.default.xmin,xmax:r.default.xmax,ymin:r.default.ymin,ymax:r.default.ymax,spatialReference:r.spatialReference}};r.full&&(n.full={xmin:r.full.xmin,xmax:r.full.xmax,ymin:r.full.ymin,ymax:r.full.ymax,spatialReference:r.spatialReference}),r.maximum&&(n.maximum={xmin:r.maximum.xmin,xmax:r.maximum.xmax,ymin:r.maximum.ymin,ymax:r.maximum.ymax,spatialReference:r.spatialReference}),t.map.extentSets.push(n)})),e.lodSets&&(t.map.lodSets=e.lodSets),e.tileSchemas&&(t.map.tileSchemas=[],e.tileSchemas.forEach(r=>{const n={id:r.id,name:r.name,extentSetId:r.extentSetId,lodSetId:r.lodSetId,thumbnailTileUrls:[],hasNorthPole:r.hasNorthPole||!1};r.overviewUrl&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.basemaps[r.id]={id:r.overviewUrl.id||`overviewmap-basemap-${r.id}`,tileSchemaId:r.id,layers:[{id:r.overviewUrl.id||`overviewmap-basemap-${r.id}-0`,layerType:r.overviewUrl.layerType==="esriDynamic"?Ct.MAPIMAGE:Ct.TILE,url:r.overviewUrl.url,opacity:r.overviewUrl.opacity??1}]}),t.map.tileSchemas.push(n)})),e.baseMaps&&(t.map.basemaps=[],e.baseMaps.forEach(r=>{const n={id:r.id,tileSchemaId:r.tileSchemaId,name:r.name,description:r.description,altText:r.altText,thumbnailUrl:r.thumbnailUrl,layers:[]};r.attribution&&(n.attribution={text:{},logo:{}},r.attribution.text&&(n.attribution.text.disabled=!r.attribution.text.enabled,n.attribution.text.value=r.attribution.text.value),r.attribution.logo&&(n.attribution.logo.disabled=!r.attribution.logo.enabled,n.attribution.logo.altText=r.attribution.logo.altText,n.attribution.logo.value=r.attribution.logo.value,n.attribution.logo.link=r.attribution.logo.link)),r.layers.forEach((i,s)=>{const o={id:i.id||`${r.id}-${s}`,layerType:i.layerType==="esriDynamic"?Ct.MAPIMAGE:Ct.TILE,url:i.url,opacity:i.opacity??1};n.layers.push(o)}),t.map.basemaps.push(n)})),e.legend&&(t.fixturesEnabled.push("legend"),e.legend.type==="autopopulate"?(t.fixtures.legend={root:{name:"I'm root",children:[]}},t.layers&&t.layers.toReversed().forEach(r=>{if(r.type==="esri-map-image"||r.type==="ogc-wms"){const n={name:r.name??`${r.id} Group`,children:[]};r.sublayers.forEach(i=>{const s={layerId:r.id};i.name&&(s.name=i.name),i.controls&&(s.controls=i.controls),i.disabledControls&&(s.disabledControls=i.disabledControls),r.type==="esri-map-image"?s.sublayerIndex=i.index:(s.sublayerId=i.id,console.warn(`sublayerId property defined in legend entry ${s.layerId} is currently not supported.`)),n.children.push(s)}),t.fixtures.legend.root.children.push(n)}else{const n={layerId:r.id};r.controls&&(n.controls=r.controls),r.disabledControls&&(n.disabledControls=r.disabledControls),t.fixtures.legend.root.children.push(n)}})):t.fixtures.legend={root:QU(e.legend.root)})}function QU(e){const t={name:e.name,children:[]};typeof e.hidden<"u"&&(t.hidden=e.hidden),typeof e.expanded<"u"&&(t.expanded=e.expanded);const r=["identify","opacity","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=Jw(e.controls,r),e.controls.includes("visibility")&&t.controls.push("visibilityButton"),(e.controls.length!==1||e.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),t.controls.push("expandButton")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=Jw(e.disabledControls,r),e.disabledControls.includes("visibility")&&t.disabledControls.push("visibilityButton"),(e.disabledControls.length!==1||e.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),e.children.forEach(n=>{if(n.layerId)t.children.push(tie(n));else if(n.infoType)n.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`):(t.children.push({infoType:n.infoType,content:n.content}),typeof n.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`));else if(n.exclusiveVisibility){const i={name:"Visibility Set",children:[],exclusive:!0};typeof n.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`),n.exclusiveVisibility.forEach(s=>{s.layerId?i.children.push(tie(s)):i.children.push(QU(s))}),t.children.push(i)}else t.children.push(QU(n))}),t}function tie(e){const t=e,r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.layerControls=Jw(e.controls,r),t.layerControls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledLayerControls=Jw(e.disabledControls,r)),e.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),delete t.controlledIds),e.entryIndex&&(t.sublayerIndex=e.entryIndex,delete e.entryIndex),e.entryId&&console.warn(`entryId property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),t}function MSe(e){const t=xD(e);switch(t.id=e.id,t.url=e.url,e.refreshInterval&&(t.refreshInterval=e.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),e.expectedResponseTime&&(t.expectedLoadTime=e.expectedResponseTime),e.metadataUrl&&(t.metadata={url:e.metadataUrl}),e.catalogueUrl&&(t.catalogueUrl=e.catalogueUrl),typeof e.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.tooltipField&&(t.tooltipField=e.tooltipField),e.tolerance&&(t.mouseTolerance=e.tolerance,e.layerType==="esriDynamic"&&(t.touchTolerance=e.tolerance+10)),e.customRenderer&&(t.customRenderer=e.customRenderer),e.layerType){case"esriDynamic":t.layerType="esri-map-image",typeof e.singleEntryCollapse<"u"&&(t.singleEntryCollapse=e.singleEntryCollapse),e.imageFormat&&(t.imageFormat=e.imageFormat),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const n=xD(r);n.index=r.index,t.sublayers.push(n)}));break;case"esriFeature":t.layerType="esri-feature",e.fileType&&(t.layerType=e.fileType==="shapefile"?"file-shape":`file-${e.fileType}`,e.colour&&(t.colour=e.colour),e.latField&&(t.latField=e.latField),e.longField&&(t.longField=e.longField));break;case"ogcWfs":t.layerType="ogc-wfs",e.colour&&(t.colour=e.colour),typeof e.xyInAttribs<"u"&&(t.xyInAttribs=e.xyInAttribs);break;case"ogcWms":t.layerType="ogc-wms",e.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.featureInfoMimeType&&(e.featureInfoMimeType==="text/html;fgpv=summary"?t.featureInfoMimeType="text/html":t.featureInfoMimeType=e.featureInfoMimeType),e.legendMimeType&&console.warn(`legendMimeType property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const n=xD(r);n.id=r.id,r.currentStyle&&(n.currentStyle=r.currentStyle,console.warn(`currentStyle property provided in layer entry ${r.id} of layer ${e.id} is currently not supported.`)),r.allStyles&&console.warn(`allStyles property provided in layer entry ${r.id} of layer ${e.id} cannot be mapped and will be skipped.`),t.sublayers.push(n)}));break;case"esriImage":t.layerType="esri-imagery";break;case"esriTile":t.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${e.layerType}`)}return e.details&&console.warn(`Details config provided in layer ${e.id} cannot be mapped and will be skipped.`),t}function xD(e){const t={};e.name&&(t.name=e.name),e.nameField&&(t.nameField=e.nameField),e.extent&&(t.extent=e.extent);const r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=Jw(e.controls,r),t.controls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=Jw(e.disabledControls,r)),e.state&&(t.state={opacity:e.state.opacity??1,visibility:e.state.visibility??!0,identify:e.state.query??!0,hovertips:e.state.hovertips??!0},typeof e.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`)),typeof e.stateOnly<"u"&&(t.cosmetic=e.stateOnly),e.initialFilteredQuery&&(t.initialFilteredQuery=e.initialFilteredQuery),qQt(e,t),(typeof e.toggleSymbology<"u"||e.table)&&(t.fixtures={},typeof e.toggleSymbology<"u"&&(t.fixtures.legend={toggleSymbology:e.toggleSymbology}),e.table&&(t.fixtures.grid={},e.table.title&&(t.fixtures.grid.title=e.table.title),e.table.description&&console.warn(`description property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.search&&(e.table.search.enabled&&(t.fixtures.grid.search=e.table.search.enabled),e.table.search.value&&(t.fixtures.grid.searchFilter=e.table.search.value)),typeof e.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.applyMap<"u"&&(t.fixtures.grid.applyMap=e.table.applyMap),typeof e.table.showFilter<"u"&&(t.fixtures.grid.showFilter=e.table.showFilter),typeof e.table.filterByExtent<"u"&&(t.fixtures.grid.filterByExtent=e.table.filterByExtent),typeof e.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.columns&&(t.fixtures.grid.columns=[],e.table.columns.forEach(n=>{const i={field:n.data};n.title&&(i.title=n.title),n.description&&console.warn(`description property provided in column property in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof n.visible<"u"&&(i.visible=n.visible),n.width&&(i.width=n.width),n.sort&&(i.sort=n.sort),typeof n.searchable<"u"&&(i.searchable=n.searchable),n.filter&&(i.filter=n.filter),t.fixtures.grid.columns.push(i)})))),t}function Jw(e,t){const r=[];return e.forEach(n=>{t.includes("identify")&&n==="query"?r.push("identify"):t.includes("datatable")&&n==="data"?r.push("datatable"):t.includes(n)?r.push(n):console.warn(`Ignored invalid control: ${n}`)}),r}function GQt(e,t){e&&(e.search&&(t.fixtures.geosearch={},t.fixtures.geosearch.serviceUrls={geoNames:e.search.serviceUrls.geoNames,geoLocation:e.search.serviceUrls.geoLocation,geoProvince:e.search.serviceUrls.provinces,geoTypes:e.search.serviceUrls.types},e.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),e.search.settings&&(t.fixtures.geosearch.settings=e.search.settings),e.search.disabledSearches&&(t.fixtures.geosearch.settings.disabledSearchTypes=e.search.disabledSearches.filter(r=>r!=="SCALE"))),e.export&&(t.fixtures.export||(t.fixtures.export={},t.fixturesEnabled.push("export")),e.export.title&&(t.fixtures.export.title={selected:e.export.title.isSelected??!0,selectable:e.export.title.isSelectable??!0,value:e.export.title.value??"RAMP-Map / PCAR-Carte"}),e.export.map&&(t.fixtures.export.map={selected:e.export.map.isSelected??!0,selectable:e.export.map.isSelectable??!0},e.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),e.export.mapElements&&(t.fixtures.export.mapElements={selected:e.export.mapElements.isSelected??!0,selectable:e.export.mapElements.isSelectable??!0},e.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),e.export.legend&&(t.fixtures.export.legend={selected:e.export.legend.isSelected??!0,selectable:e.export.legend.isSelectable??!0},e.export.legend.columnWidth&&(t.fixtures.export.legend.columnWidth=e.export.legend.columnWidth),e.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),e.export.footnote&&(t.fixtures.export.footnote={selected:e.export.footnote.isSelected??!0,selectable:e.export.footnote.isSelectable??!0,value:e.export.footnote.value??""}),e.export.timestamp&&(t.fixtures.export.timestamp={selected:e.export.timestamp.isSelected??!0,selectable:e.export.timestamp.isSelectable??!0},e.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),e.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof e.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),e.proxyUrl&&(t.system.proxyUrl=e.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(r=>{typeof e[r]<"u"&&console.warn(`${r} property provided in services config cannot be mapped and will be skipped.`)}))}function zQt(e,t){if(e.navBar){t.fixtures.mapnav={zoomOption:e.navBar.zoom||"buttons",items:[]};const n=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];e.navBar.extra.forEach(i=>{const s=i.toLowerCase();n.includes(s)?t.fixtures.mapnav.items.push(s):console.warn(`Ignored invalid mapnav item: ${i}`)}),t.fixturesEnabled.push("mapnav")}if(e.help&&(t.fixtures.help={location:e.help.folderName&&e.help.folderName!=="default"?`./${e.help.folderName}`:"./help",panelWidth:350},t.fixturesEnabled.push("help")),e.legend){const n=["groupToggle","visibilityToggle"];e.legend.reorderable&&n.push("layerReorder"),e.legend.allowImport&&n.push("wizard"),t.fixtures.legend?t.fixtures.legend.headerControls=n:(t.fixturesEnabled.push("legend"),t.fixtures.legend={headerControls:n,root:{}}),e.legend.isOpen&&e.legend.isOpen.large&&t.panels.open.push({id:"legend"})}t.fixtures.appbar={items:[]},t.fixturesEnabled.push("appbar");const r=["layers","basemap","export","help","geoSearch"];e.appBar?(e.appBar.layers!==!1&&(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")),e.appBar.geoSearch!==!1&&t.fixturesEnabled.includes("geosearch")&&t.fixtures.appbar.items.push("geosearch"),e.appBar.basemap!==!1&&t.fixtures.appbar.items.push("basemap")):(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend"),t.fixtures.appbar.items.push("geosearch"),t.fixtures.appbar.items.push("basemap")),e.sideMenu&&e.sideMenu.items&&e.sideMenu.items.length>0&&e.sideMenu.items.forEach(n=>{n.forEach(i=>{i==="layers"&&!t.fixtures.appbar.items.includes("legend")?(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")):i!=="layers"&&r.includes(i)&&!t.fixtures.appbar.items.includes(i.toLowerCase())&&(t.fixtures.appbar.items.push(i.toLowerCase()),(i.toLowerCase()==="help"||i.toLowerCase()==="export"&&!t.fixturesEnabled.includes(i.toLowerCase()))&&t.fixturesEnabled.push(i.toLowerCase()))})}),e.tableIsOpen&&e.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(n=>{typeof e[n]<"u"&&console.warn(`${n} property provided in services config cannot be mapped and will be skipped.`)})}function $Qt(e,t){e.areasOfInterest.enable&&(t.fixturesEnabled.includes("areas-of-interest")||t.fixturesEnabled.push("areas-of-interest"),e.areasOfInterest.areas&&(t.fixtures["areas-of-interest"]={areas:e.areasOfInterest.areas.map(r=>({title:`${r["title-en-CA"]} / ${r["title-fr-CA"]}`,thumbnail:r.thumbnailUrl,altText:r.altText??"",description:r.description??"",extent:{xmin:r.xmin,xmax:r.xmax,ymin:r.ymin,ymax:r.ymax,spatialReference:{wkid:r.wkid}}}))}))}function qQt(e,t){const r=e.outfields&&e.outfields!=="*";if(!r&&!e.fieldMetadata)return;const n={fieldInfo:[],exclusiveFields:!1,enforceOrder:!1};e.fieldMetadata?(n.fieldInfo=e.fieldMetadata.map(i=>{const s={name:i.data};return i.alias&&(s.alias=i.alias),s}),r&&(e.outfields.split(",").map(i=>i.trim()).forEach(i=>{n.fieldInfo.findIndex(s=>s.name===i)===-1&&n.fieldInfo.push({name:i})}),n.exclusiveFields=!0)):r&&(n.fieldInfo=e.outfields.split(",").map(i=>({name:i.trim()})),n.exclusiveFields=!0),t.fieldMetadata=n}var Qv={major:"4",minor:"10",patch:"0",timestamp:"Thu Dec 19 14:34:34 2024 -0500",hash:"1f32f5c4dedad7ac35a7895e7f740d9e48359903"};console.info(`RAMP v${Qv.major}.${Qv.minor}.${Qv.patch} [${Qv.hash.slice(0,9)}] (Built on ${new Date(Qv.timestamp.toString()).toLocaleString()})`);const Kv=Qv;function HQt(e){return UQt(e)}function WQt(e){return MSe(e)}const FH=(e,t,r)=>new _Xt(e,t,r),Eg=new sjt,Enr=Object.freeze(Object.defineProperty({__proto__:null,$:F_t,A:X$,B:qo,get C(){return Er},D:it,E:Kb,F:vN,G:Pe,H:Y1e,I:Zn,J:Gr,K:X0e,L:Vht,M:b3,N:hhe,O:phe,P:dhe,Q:xe,R:Uoe,S:sg,T:se,U:Xe,V:$_t,W:z_t,X:Ko,Y:Vae,Z:Bae,_:Cg,a:Xfe,a$:ts,a0:cu,a1:dl,a2:oAt,a3:S0t,a4:u_,a5:gn,a6:Im,a7:Va,a8:st,a9:Co,get aA(){return WE},aB:Iy,get aC(){return Bu},aD:_B,aE:SB,aF:EB,aG:Vot,aH:bse,aI:uat,aJ:fLt,get aK(){return Fj},get aL(){return ZE},aM:PLt,aN:$T,aO:PNt,aP:dve,get aQ(){return Tj},get aR(){return Aj},get aS(){return Mj},get aT(){return Ij},aU:$i,aV:nxt,aW:oxt,aX:ixt,aY:Ke,aZ:yn,a_:Ca,aa:bhe,ab:whe,ac:_he,ad:The,ae:Mhe,af:fG,ag:pG,ah:dG,ai:Ahe,aj:khe,ak:Rhe,al:F$,am:$1e,an:rve,ao:vC,ap:Cd,aq:o1,ar:t3,as:CT,at:MT,au:Tmt,av:vR,aw:Th,ax:Dut,get ay(){return wC},get az(){return Cj},b:ppe,b$:_mt,b0:hl,b1:MB,b2:Zo,b3:Bs,b4:rw,b5:Gx,b6:cR,b7:uR,b8:gh,b9:f_,bA:TB,bB:zk,bC:rpt,bD:nu,bE:k_,bF:ww,bG:cae,bH:nR,bI:iR,bJ:hae,bK:BT,bL:VT,bM:Loe,bN:But,bO:DMt,bP:Az,bQ:Pye,bR:X5,bS:zs,bT:md,bU:n1,bV:zue,bW:_0t,bX:x0t,bY:fmt,bZ:bmt,b_:xmt,ba:zpt,bb:lz,bc:Xae,bd:hm,get be(){return n9},get bf(){return i9},bg:npt,bh:gr,get bi(){return H5},bj:$at,bk:Io,bl:xa,bm:Ut,bn:jt,bo:Xo,bp:eat,bq:an,br:$s,bs:As,bt:p,bu:f,bv:W,get bw(){return we},bx:Qm,by:sAt,bz:s_,c:AT,c$:uF,c0:gd,c1:wmt,get c2(){return vm},c3:O1e,c4:tOt,get c5(){return ir},c6:nOt,c7:Fi,c8:wd,c9:ru,get cA(){return nn},cB:Age,cC:_b,cD:pr,cE:w_,cF:G5,cG:qpt,cH:yyt,cI:Iyt,cJ:fd,cK:YB,cL:Dm,cM:rd,cN:e5,cO:lve,cP:gB,cQ:rr,cR:H$,cS:dbe,cT:pDt,cU:Kve,cV:wDt,cW:CPt,cX:tbe,cY:uae,cZ:Lvt,c_:Qvt,ca:Kmt,cb:ZT,cc:Et,cd:vs,ce:Ad,cf:jg,cg:Xm,ch:pn,ci:Qo,cj:Pd,ck:bd,cl:Dd,cm:wc,get cn(){return x5},get co(){return hn},get cp(){return _5},get cq(){return E5},get cr(){return yE},cs:rz,ct:B$,get cu(){return vt},get cv(){return Aw},get cw(){return Li},get cx(){return HE},cy:V$,get cz(){return Lj},d:Ah,d$:_yt,d0:$ue,d1:km,d2:lce,d3:Kvt,d4:jh,d5:Tyt,d6:BAt,d7:Bpt,d8:Pm,d9:na,dA:IR,dB:k$,dC:N$,dD:D$,dE:D1e,dF:L1e,dG:ea,dH:lat,dI:joe,dJ:Mg,dK:eR,dL:kse,dM:d3,dN:SE,dO:Gpe,dP:nle,dQ:P1e,dR:L$,dS:C$,dT:Q1e,dU:spt,dV:IG,dW:Ld,dX:H1e,dY:Qpe,get dZ(){return xE},d_:BR,da:vE,db:e3,dc:jpe,dd:jue,de:u0t,df:Qz,dg:tR,dh:OAt,di:Kz,dj:$z,dk:zz,dl:RAt,dm:kAt,dn:Lue,dp:NV,dq:que,dr:R0t,ds:LV,dt:E0t,du:xo,dv:upt,dw:Aa,dx:LAt,dy:GT,dz:Mz,e:ta,e$:SPt,e0:Ryt,e1:qct,e2:Y_t,e3:tt,e4:eO,e5:Gat,e6:Wk,e7:o_,e8:b_,e9:mt,eA:oR,eB:p_,get eC(){return sw},eD:_o,eE:Na,eF:Nae,eG:DT,eH:Lae,eI:ZG,eJ:Eut,eK:Mht,eL:Di,get eM(){return et},eN:tw,eO:Re,eP:c1,eQ:pO,eR:Ppt,eS:Vfe,eT:Vpt,eU:Npt,eV:_i,eW:ame,eX:v6,eY:i_,eZ:XPt,e_:LPt,ea:Km,eb:g1,ec:m1,ed:y1,ee:t0,ef:kd,eg:Ee,eh:jG,ei:rO,ej:M_,ek:Is,el:No,em:vh,en:ra,eo:yc,ep:Od,eq:a3,er:c3,es:JR,et:fV,eu:U1e,ev:B1e,ew:K1e,ex:Hde,ey:DB,ez:OT,f:Qfe,f$:Le,f0:_c,f1:An,f2:EG,f3:bc,f4:zy,f5:ym,f6:Fot,get f7(){return bm},f8:NT,f9:mat,fA:d_,fB:nde,fC:hce,fD:ide,fE:ude,fF:ypt,fG:br,fH:ANt,fI:mr,fJ:Cn,fK:$m,fL:sSe,fM:cr,fN:di,fO:qr,fP:$r,fQ:qe,fR:fn,fS:xi,fT:Ge,fU:pt,fV:o0,fW:Jn,fX:on,fY:Tt,fZ:Zr,f_:Ki,fa:ld,fb:fat,fc:eTt,fd:Gfe,fe:RS,ff:zct,fg:Fut,fh:Pt,fi:pc,fj:lye,fk:vfe,fl:Fpe,fm:B_t,fn:Nde,fo:U_t,fp:kde,fq:Ro,fr:XR,fs:vB,ft:OB,fu:dAt,fv:ui,fw:z0e,fx:vce,fy:bce,fz:wce,g:dpe,g$:mc,g0:VC,g1:dT,g2:B3,g3:_s,g4:qs,g5:Sc,g6:xh,g7:En,g8:oSe,g9:St,gA:S$,gB:yC,gC:zg,gD:E$,gE:c1e,gF:OO,gG:RD,gH:zS,gI:JM,gJ:Fm,gK:e_,gL:o5,gM:hR,get gN(){return Oj},gO:ew,gP:qoe,gQ:Qk,gR:dd,get gS(){return tl},gT:Opt,gU:o1e,gV:qi,gW:l1e,gX:x$,gY:DG,gZ:e1,g_:Pn,ga:Tn,gb:ur,gc:f1e,gd:cpt,ge:s1e,gf:W1e,gg:sht,gh:n6,gi:tV,gj:rV,gk:TG,gl:G1e,gm:AG,gn:Jpe,go:lpt,gp:aae,gq:HF,gr:xxt,gs:Sxt,get gt(){return be},gu:Xpe,gv:Dfe,gw:l3,gx:nO,gy:Lye,gz:Hk,h:TD,h$:QC,h0:r_,h1:Yi,h2:Ze,get h3(){return th},h4:ar,h5:Iq,h6:$Tt,h7:Hot,h8:Z1e,h9:V1e,hA:Eye,hB:Sye,hC:d6,hD:UT,get hE(){return Xu},hF:Qi,hG:_a,hH:CR,hI:tat,hJ:w6,hK:uO,hL:mw,hM:iO,hN:FG,hO:Ft,hP:Yde,hQ:Jde,hR:Zde,hS:iSe,hT:wi,hU:pT,hV:hSe,get hW(){return Ej},hX:_St,hY:u1e,get hZ(){return Bj},get h_(){return Sj},ha:Nr,hb:bme,hc:UE,hd:Wz,he:Vt,hf:Mm,hg:Pfe,hh:Nfe,hi:jde,hj:f3,hk:U5,hl:OV,hm:hO,hn:Qde,ho:Dg,hp:tO,hq:C_,hr:r4,hs:NE,ht:A_,hu:T_,hv:_G,hw:qde,hx:lO,hy:rme,hz:Tye,i:Yfe,i$:YR,i0:pSe,i1:M5,get i2(){return aC},i3:jye,i4:Fct,i5:jct,i6:Uct,i7:Bct,i8:Vct,i9:Gct,iA:YG,iB:r3,iC:pae,iD:cce,get iE(){return VE},iF:j1e,iG:R$,iH:Ht,iI:eC,iJ:a3t,iK:_7,iL:S0e,iM:w0e,iN:$St,iO:qSt,iP:Eme,iQ:WSt,iR:HSt,iS:JSt,iT:q0e,iU:LE,iV:d1,iW:Td,iX:q1e,iY:P$,iZ:h3,i_:$pe,ia:l_,ib:It,ic:Dot,get id(){return _C},get ie(){return Gb},ig:b$,ih:GR,ii:iS,ij:D_,ik:om,il:bw,im:Xz,io:ZR,ip:oC,iq:vgt,ir:yS,is:D0e,it:gce,iu:F1e,iv:tve,iw:nve,ix:d1e,iy:Che,iz:lae,j:jR,j$:MG,j0:Hpe,j1:Wpe,j2:GS,j3:JG,j4:soe,j5:xw,j6:Ape,j7:Sfe,j8:Pde,j9:rfe,jA:mfe,jB:sfe,jC:ofe,jD:afe,jE:lfe,jF:ufe,jG:cfe,jH:iz,jI:Rse,jJ:Ds,get jK(){return L5},jL:tz,jM:cSe,jN:KO,jO:Vh,jP:mye,jQ:cat,jR:jpt,jS:td,jT,jU:ole,jV:zq,jW:Zw,jX:KT,jY:s1,jZ:Ji,j_:Ga,ja:VG,jb:hfe,jc:cO,jd:BB,je:$B,jf:Hfe,jg:t1,jh:Bh,ji:f1,jj:p1,jk:cEt,jl:J1t,jm:lEt,jn:fEt,jo:pfe,jp:yfe,jq:$de,jr:aG,js:oG,jt:sG,ju:bfe,jv:efe,jw:tfe,jx:Ll,jy:nfe,jz:ife,get k(){return Cb},k$:TDt,k0:Ede,k1:Tde,get k2(){return _j},k3:mNt,k4:yNt,k5:_Nt,k6:xNt,k7:gNt,k8:vNt,k9:bNt,kA:Bwe,kB:hE,kC:$ae,kD:AR,kE:gyt,kF:myt,kG:Hse,kH:qat,kI:uAt,kJ:lAt,kK:kz,kL:Rz,kM:Vbe,kN:QO,kO:hT,kP:wr,kQ:F0e,kR:Uk,kS:Bk,kT:lr,kU:pl,kV:lC,kW:Z,kX:Act,kY:fye,get kZ(){return Pp},k_:Zz,ka:wNt,kb:$3,kc:Gq,kd:aSe,ke:lSe,kf:JU,kg:jp,kh:OH,ki:yN,kj:Ct,kk:dSe,kl:Wo,km:Ts,kn:Hc,ko:Kl,kp:ed,kq:Fd,kr:Si,ks:J3,kt:XE,ku:ySe,kv:sR,kw:Aae,kx:wq,ky:Qu,kz:XO,l:Fxt,l$:BSt,l0:_Dt,l1:xPt,l2:k3,l3:C3,l4:LO,l5:Jo,l6:qve,l7:tge,l8:wse,l9:Oa,lA:kNt,lB:pve,lC:qgt,lD:Hgt,lE:$gt,lF:bG,lG:VAt,lH:vAt,lI:Bz,lJ:Vz,lK:Uz,lL:Tae,lM:Cae,lN:Gz,lO:h_,lP:lht,lQ:_Se,lR:SSe,lS:xSe,lT:mSe,lU:yV,lV:sC,lW:uye,lX:D7,lY:ji,lZ:QIt,l_:Rm,la:Ba,lb:ic,lc:xut,ld:Coe,le:ll,lf:PT,lg:Uut,lh:vve,get li(){return xC},lj:cLt,get lk(){return Rj},get ll(){return al},lm:U$,get ln(){return nh},get lo(){return kj},lp:dLt,lq:jAt,lr:L7,ls:wj,lt:ele,lu:Kae,lv:vpt,lw:Upt,lx:qE,ly:MNt,lz:CNt,m:ubt,m$:iAt,m0:XSt,m1:Zot,m2:Jot,m3:Wot,m4:Hm,m5:Doe,m6:vSe,m7:fSe,m8:jbe,m9:Cw,mA:J7,mB:Rye,mC:qV,mD:A$,mE:XMt,mF:YMt,mG:Rg,mH:eae,mI:LB,mJ:tlt,mK:elt,mL:V0e,mM:Cde,mN:j0e,mO:vIt,mP:DAt,mQ:PAt,mR:eoe,mS:Kse,mT:B0e,mU:$ot,mV:mse,mW:Dpt,mX:rce,mY:PE,mZ:Gmt,m_:wfe,ma:gSe,get mb(){return Xy},mc:jm,md:Tve,me:kve,mf:Rve,mg:FT,mh:Fs,mi:Yt,mj:rg,mk:eve,ml:_1e,mm:x1e,mn:dse,mo:VR,mp:Eyt,mq:Mge,mr:O$,ms:fm,mt:Cq,mu:Evt,mv:wV,mw:ble,mx:Spt,my:mn,mz:n_,n:z5,n$:r1t,n0:nAt,get n1(){return sd},n2:$F,n3:GG,n4:dw,n5:tme,n6:Kpe,n7:Zpe,n8:Ype,n9:qse,nA:pwe,nB:dwe,nC:fwe,nD:uq,nE:ia,nF:cwe,nG:uGt,nH:Hjt,nI:_V,nJ:vd,nK:Ade,nL:Mde,nM:Fde,nN:Rfe,nO:Lfe,nP:xB,get nQ(){return Fu},nR:tu,nS:WB,nT:gut,nU:nV,nV:qD,nW:hV,nX:Gve,nY:$ut,nZ:Fn,n_:A2t,na:BNt,nb:p$,nc:_$,nd:Tw,ne:MO,nf:mC,ng:a$,nh:L_,ni:glt,nj:yve,nk:T$,nl:Lr,nm:La,nn:zr,no:Kr,np:iu,nq:x1,nr:ws,ns:yr,nt:wt,nu:uwe,nv:w1,nw:mg,nx:iq,ny:Sm,nz:mwe,o:hbt,o$:FE,o0:yhe,o1:hpt,o2:a1e,o3:jge,o4:Fge,o5:N_,o6:ipt,o7:SR,o8:VLt,o9:Tut,oA:qIt,oB:sEt,oC:kme,oD:t9,oE:n3,oF:e9,oG:nm,oH:mo,oI:iC,oJ:e2t,get oK(){return J5},oL:tae,oM:UV,oN:t2t,oO:N1e,oP:qpe,oQ:XEt,oR:KEt,oS:gO,oT:yO,oU:WEt,oV:ZEt,oW:fO,oX:Gg,oY:od,oZ:Vme,o_:_r,oa:RB,ob:co,oc:oi,od:Xt,oe:Ku,of:Sk,og:RH,oh:V_e,oi:uSe,oj:qm,ok:Sn,ol:Mn,om:Kp,on:Hn,oo:QT,op:rhe,oq:py,or:PG,os:UG,ot:BV,get ou(){return Nj},ov:uLt,ow:gve,get ox(){return Dj},get oy(){return Pj},oz:h1e,p:r1,p$:vse,p0:jE,p1:Cse,p2:Pme,p3:T0e,p4:Zme,p5:pz,p6:Wme,p7:g0e,p8:m0e,p9:Jme,pA:H0e,pB:Xg,pC:xc,pD:wxe,pE:cc,pF:j_,pG:rs,pH:Sxe,pI:rSe,pJ:or,pK:jLt,pL:hyt,pM:cyt,pN:Mce,pO:fyt,pP:pyt,pQ:Kk,pR:sde,pS:rde,pT:z1e,pU:tde,pV:kce,pW:CB,pX:Nq,pY:Aq,pZ:Ns,p_:Iw,pa:JTt,pb:d0e,pc:Sz,pd:ZTt,pe:f0e,pf:Gme,pg:TSt,ph:Rae,pi:m3,pj:Sct,pk:l3t,pl:c0e,pm:Xr,pn:GSt,po:k0e,pp:N7,pq:vO,pr:r0e,ps:s0e,pt:gz,pu:vz,pv:lg,pw:o0e,px:i0e,py:g3,pz:wO,q:zpe,get q$(){return o9},q0:y1e,q1:cpe,q2:upe,q3:Xyt,q4:Qyt,q5:Kyt,q6:Gl,q7:INt,get q8(){return jj},q9:hNt,qA:XNt,qB:YNt,qC:uNt,qD:cNt,get qE(){return s9},qF:$u,qG:zge,qH:T3,qI:R5,qJ:fNt,qK:$ge,qL:h$,get qM(){return Vj},qN:z$,qO:qNt,qP:HNt,qQ:WNt,qR:ZNt,qS:ONt,qT:LNt,qU:NNt,qV:sye,qW:Ive,get qX(){return Ni},qY:PR,qZ:lNt,q_:Xvt,qa:Sbe,qb:Hl,qc:I3,qd:Z0t,qe:m$,qf:w$,qg:Qge,qh:Ekt,qi:e1e,qj:cg,qk:Akt,ql:vhe,qm:eb,qn:Hbt,qo:Cce,qp:fc,qq:Cm,qr:Rue,qs:kue,qt:Efe,qu:JNt,qv:j$,get qw(){return v9},get qx(){return w9},qy:dpt,qz:wvt,r:kut,r$:SNt,r0:nme,r1:Tb,r2:Dde,r3:tMt,r4:a0t,r5:Hmt,r6:Ymt,r7:Zmt,r8:Xmt,r9:Mo,rA:Khe,rB:lvt,rC:k9,rD:M9,rE:C9,rF:mvt,rG:fvt,rH:yvt,rI:gvt,rJ:Qhe,rK:i3,rL:VNt,rM:kO,rN:bh,rO:epe,rP:UNt,rQ:jNt,rR:ivt,rS:bve,rT:FNt,get rU(){return Uj},rV:pNt,rW:dNt,rX:zNt,rY:GNt,rZ:QNt,r_:KNt,ra:O0t,rb:NLt,rc:AD,rd:zmt,re:Yb,rf:Vl,rg:Vq,rh:tg,ri:pS,rj:sh,rk:Fa,rl:bi,rm:LLt,rn:oEt,ro:Svt,get rp(){return W5},rq:avt,rr:Z5,rs:xvt,rt:mG,ru:K1t,rv:gG,rw:zR,rx:uvt,ry:ovt,rz:npe,s:ie,get s$(){return QF},s0:eLt,s1:tLt,s2:hve,s3:fve,s4:RNt,s5:$$,s6:Ag,s7:$Nt,s8:Lut,s9:_me,sA:ibt,sB:bj,sC:ASt,sD:ISt,sE:r0,sF:xme,sG:h3t,sH:Qr,sI:OR,sJ:cme,sK:iSt,sL:NR,sM:fme,sN:Vg,sO:aSt,sP:Tv,sQ:o4,sR:R_,sS:NSt,sT:b0e,sU:e7,sV:Zy,sW:p3t,get sX(){return KF},sY:d3t,sZ:_0e,s_:Tz,sa:ez,sb:p1e,sc:dO,sd:MLt,se:CLt,sf:kLt,sg:Eve,sh:G$,si:ENt,sj:TNt,sk:Sve,sl:RLt,sm:aNt,sn:rwt,so:rye,sp:b4,sq:w4,sr:sV,ss:R0e,st:zAt,su:L0e,sv:P0e,sw:U0e,sx:FAt,sy:Lpe,sz:sbt,t:Bht,t$:svt,t0:jSt,t1:OSt,t2:DSt,t3:m6,t4:FSt,t5:uz,t6:PSt,t7:mme,t8:x0e,t9:c3t,tA:sce,tB:oj,tC:SEt,tD:Nme,tE:Lme,tF:Ebe,tG:Xse,get tH(){return m9},get tI(){return p9},tJ:Wae,get tK(){return d9},tL:gpt,tM:tpe,get tN(){return b9},get tO(){return f9},tP:$pt,get tQ(){return y9},get tR(){return _9},get tS(){return x9},get tT(){return S9},tU:dle,tV:Ept,tW:Zae,get tX(){return E9},tY:Cpt,tZ:jyt,t_:i1e,ta:Av,tb:x7,tc:a4,td:Ez,te:Wue,tf:Emt,tg:ac,th:p5t,ti:h5t,tj:Kye,tk:Qye,tl:wR,tm:SS,tn:Bot,to:Yue,tp:o$,tq:$ve,tr:Jue,ts:hw,tt:pw,tu:Fg,tv:rat,tw:JDt,tx:Jxt,ty:ER,tz:ice,u:Dxt,u$:Vge,u0:bvt,u1:pvt,u2:dvt,get u3(){return I9},get u4(){return c9},get u5(){return a9},get u6(){return l9},get u7(){return u9},get u8(){return g9},get u9(){return T9},uA:Qae,uB:Pge,uC:l$,uD:u$,uE:zE,uF:X1e,uG:GE,uH:Bge,uI:Fye,uJ:Uge,uK:kge,uL:$ct,uM:lge,uN:Jct,uO:yae,uP:Pct,uQ:Dct,uR:Yse,uS:Hve,uT:W0t,uU:aV,uV:bE,uW:Hct,get uX(){return Sw},uY:PB,uZ:E3,u_:xge,get ua(){return A9},get ub(){return h9},uc:JT,ud:Lpt,ue:cvt,uf:hvt,ug:sme,get uh(){return fs},ui:Woe,uj:xyt,uk:Syt,ul:pde,um:hde,un:Ew,uo:c$,up:Md,uq:eV,ur:rR,get us(){return T5},ut:Imt,uu:oV,uv:wae,uw:gae,ux:Wge,uy:CO,uz:wpt,v:ime,v0:Nhe,v1:Gge,v2:xpt,v3:mj,v4:zgt,v5:Y0t,v6:Nge,v7:Lge,v8:J1e,v9:Z1t,vA:FH,vB:Eg,vC:kgt,vD:Ext,vE:Lxt,vF:ome,vG:XIt,vH:nMt,vI:iMt,vJ:sMt,vK:uMt,vL:TMt,vM:XLt,va:ju,vb:Cge,vc:E_,vd:use,ve:pE,vf:zot,vg:ode,vh:cde,vi:hG,vj:ade,vk:J0t,vl:Uot,vm:ase,vn:jot,vo:wyt,vp:byt,vq:mLt,vr:Bhe,vs:Ohe,vt:Vhe,vu:Fpt,vv:Ayt,vw:Nd,vx:Kv,vy:HQt,vz:WQt,w:nz,x:Om,y:cbt,z:dz},Symbol.toStringTag,{value:"Module"}));var Wp;(function(e){e.Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values"})(Wp||(Wp={}));var Uo;(function(e){e[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue"})(Uo||(Uo={}));function ZQt(e){return Ek(e)&&typeof e.from=="function"}function Ek(e){return typeof e=="object"&&typeof e.to=="function"}function rie(e){e.parentElement.removeChild(e)}function KU(e){return e!=null}function nie(e){e.preventDefault()}function JQt(e){return e.filter(function(t){return this[t]?!1:this[t]=!0},{})}function YQt(e,t){return Math.round(e/t)*t}function XQt(e,t){var r=e.getBoundingClientRect(),n=e.ownerDocument,i=n.documentElement,s=CSe(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(s.x=0),t?r.top+s.y-i.clientTop:r.left+s.x-i.clientLeft}function hc(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function iie(e,t,r){r>0&&(ao(e,t),setTimeout(function(){X4(e,t)},r))}function sie(e){return Math.max(Math.min(e,100),0)}function bN(e){return Array.isArray(e)?e:[e]}function QQt(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function ao(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function X4(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function KQt(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function CSe(e){var t=window.pageXOffset!==void 0,r=(e.compatMode||"")==="CSS1Compat",n=t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,i=t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop;return{x:n,y:i}}function eKt(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function tKt(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}function rKt(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function jH(e,t){return 100/(t-e)}function eB(e,t,r){return t*100/(e[r+1]-e[r])}function nKt(e,t){return eB(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function iKt(e,t){return t*(e[1]-e[0])/100+e[0]}function ST(e,t){for(var r=1;e>=t[r];)r+=1;return r}function sKt(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=ST(r,e),i=e[n-1],s=e[n],o=t[n-1],a=t[n];return o+nKt([i,s],r)/jH(o,a)}function oKt(e,t,r){if(r>=100)return e.slice(-1)[0];var n=ST(r,t),i=e[n-1],s=e[n],o=t[n-1],a=t[n];return iKt([i,s],(r-o)*jH(o,a))}function aKt(e,t,r,n){if(n===100)return n;var i=ST(n,e),s=e[i-1],o=e[i];return r?n-s>(o-s)/2?o:s:t[i-1]?e[i-1]+YQt(n-e[i-1],t[i-1]):n}var kSe=function(){function e(t,r,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=r;var i,s=[];for(Object.keys(t).forEach(function(o){s.push([bN(t[o]),o])}),s.sort(function(o,a){return o[0][0]-a[0][0]}),i=0;i<s.length;i++)this.handleEntryPoint(s[i][1],s[i][0]);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)this.handleStepPoint(i,this.xNumSteps[i])}return e.prototype.getDistance=function(t){for(var r=[],n=0;n<this.xNumSteps.length-1;n++)r[n]=eB(this.xVal,t,n);return r},e.prototype.getAbsoluteDistance=function(t,r,n){var i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);!n&&t===this.xPct[i+1]&&i++,r===null&&(r=[]);var s,o=1,a=r[i],l=0,u=0,c=0,h=0;for(n?s=(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):s=(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);a>0;)l=this.xPct[i+1+h]-this.xPct[i+h],r[i+h]*o+100-s*100>100?(u=l*s,o=(a-100*s)/r[i+h],s=1):(u=r[i+h]*l/100*o,o=0),n?(c=c-u,this.xPct.length+h>=1&&h--):(c=c+u,this.xPct.length-h>=1&&h++),a=r[i+h]*o;return t+c},e.prototype.toStepping=function(t){return t=sKt(this.xVal,this.xPct,t),t},e.prototype.fromStepping=function(t){return oKt(this.xVal,this.xPct,t)},e.prototype.getStep=function(t){return t=aKt(this.xPct,this.xSteps,this.snap,t),t},e.prototype.getDefaultStep=function(t,r,n){var i=ST(t,this.xPct);return(t===100||r&&t===this.xPct[i-1])&&(i=Math.max(i-1,1)),(this.xVal[i]-this.xVal[i-1])/n},e.prototype.getNearbySteps=function(t){var r=ST(t,this.xPct);return{stepBefore:{startValue:this.xVal[r-2],step:this.xNumSteps[r-2],highestStep:this.xHighestCompleteStep[r-2]},thisStep:{startValue:this.xVal[r-1],step:this.xNumSteps[r-1],highestStep:this.xHighestCompleteStep[r-1]},stepAfter:{startValue:this.xVal[r],step:this.xNumSteps[r],highestStep:this.xHighestCompleteStep[r]}}},e.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(QQt);return Math.max.apply(null,t)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(t){return this.getStep(this.toStepping(t))},e.prototype.handleEntryPoint=function(t,r){var n;if(t==="min"?n=0:t==="max"?n=100:n=parseFloat(t),!hc(n)||!hc(r[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(r[0]);var i=Number(r[1]);n?this.xSteps.push(isNaN(i)?!1:i):isNaN(i)||(this.xSteps[0]=i),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(t,r){if(r){if(this.xVal[t]===this.xVal[t+1]){this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t];return}this.xSteps[t]=eB([this.xVal[t],this.xVal[t+1]],r,0)/jH(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),s=this.xVal[t]+this.xNumSteps[t]*i;this.xHighestCompleteStep[t]=s}},e}(),oie={to:function(e){return e===void 0?"":e.toFixed(2)},from:Number},RSe={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},sf={tooltips:".__tooltips",aria:".__aria"};function lKt(e,t){if(!hc(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function uKt(e,t){if(!hc(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function cKt(e,t){if(!hc(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function hKt(e,t){if(!hc(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function pKt(e,t){if(typeof t!="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===void 0||t.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new kSe(t,e.snap||!1,e.singleStep)}function dKt(e,t){if(t=bN(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function fKt(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function mKt(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function yKt(e,t){if(typeof t!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function OSe(e,t){var r=[!1],n;if(t==="lower"?t=[!0,!1]:t==="upper"&&(t=[!1,!0]),t===!0||t===!1){for(n=1;n<e.handles;n++)r.push(t);r.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=t}e.connect=r}function gKt(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function NSe(e,t){if(!hc(t))throw new Error("noUiSlider: 'margin' option must be numeric.");t!==0&&(e.margin=e.spectrum.getDistance(t))}function vKt(e,t){if(!hc(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function bKt(e,t){var r;if(!hc(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||hc(t[0])||hc(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t!==0){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1],i=e.spectrum.xVal[0],s=e.spectrum.xVal[e.spectrum.xVal.length-1];if(n/(s-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function wKt(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function _Kt(e,t){if(typeof t!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,s=t.indexOf("snap")>=0,o=t.indexOf("hover")>=0,a=t.indexOf("unconstrained")>=0,l=t.indexOf("invert-connects")>=0,u=t.indexOf("drag-all")>=0,c=t.indexOf("smooth-steps")>=0;if(i){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");NSe(e,e.start[1]-e.start[0])}if(l&&e.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(a&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||s,drag:n,dragAll:u,smoothSteps:c,fixed:i,snap:s,hover:o,unconstrained:a,invertConnects:l}}function xKt(e,t){if(t!==!1)if(t===!0||Ek(t)){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(t)}else{if(t=bN(t),t.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(n){if(typeof n!="boolean"&&!Ek(n))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=t}}function SKt(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function EKt(e,t){if(!Ek(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function TKt(e,t){if(!ZQt(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=t}function IKt(e,t){if(typeof t!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function AKt(e,t){e.documentElement=t}function MKt(e,t){if(typeof t!="string"&&t!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function CKt(e,t){if(typeof t!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof e.cssPrefix=="string"?(e.cssClasses={},Object.keys(t).forEach(function(r){e.cssClasses[r]=e.cssPrefix+t[r]})):e.cssClasses=t}function LSe(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:oie,format:oie},r={step:{r:!1,t:lKt},keyboardPageMultiplier:{r:!1,t:uKt},keyboardMultiplier:{r:!1,t:cKt},keyboardDefaultStep:{r:!1,t:hKt},start:{r:!0,t:dKt},connect:{r:!0,t:OSe},direction:{r:!0,t:wKt},snap:{r:!1,t:fKt},animate:{r:!1,t:mKt},animationDuration:{r:!1,t:yKt},range:{r:!0,t:pKt},orientation:{r:!1,t:gKt},margin:{r:!1,t:NSe},limit:{r:!1,t:vKt},padding:{r:!1,t:bKt},behaviour:{r:!0,t:_Kt},ariaFormat:{r:!1,t:EKt},format:{r:!1,t:TKt},tooltips:{r:!1,t:xKt},keyboardSupport:{r:!0,t:IKt},documentElement:{r:!1,t:AKt},cssPrefix:{r:!0,t:MKt},cssClasses:{r:!0,t:CKt},handleAttributes:{r:!1,t:SKt}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:RSe,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach(function(l){if(!KU(e[l])&&n[l]===void 0){if(r[l].r)throw new Error("noUiSlider: '"+l+"' is required.");return}r[l].t(t,KU(e[l])?e[l]:n[l])}),t.pips=e.pips;var i=document.createElement("div"),s=i.style.msTransform!==void 0,o=i.style.transform!==void 0;t.transformRule=o?"transform":s?"msTransform":"webkitTransform";var a=[["left","top"],["right","bottom"]];return t.style=a[t.dir][t.ort],t}function kKt(e,t,r){var n=eKt(),i=rKt(),s=i&&tKt(),o=e,a,l,u,c,h,d,m=t.spectrum,y=[],g=[],b=[],S=0,E={},x=!1,w=e.ownerDocument,T=t.documentElement||w.documentElement,I=w.body,M=w.dir==="rtl"||t.ort===1?0:100;function C(oe,ge){var _e=w.createElement("div");return ge&&ao(_e,ge),oe.appendChild(_e),_e}function k(oe,ge){var _e=C(oe,t.cssClasses.origin),Ve=C(_e,t.cssClasses.handle);if(C(Ve,t.cssClasses.touchArea),Ve.setAttribute("data-handle",String(ge)),t.keyboardSupport&&(Ve.setAttribute("tabindex","0"),Ve.addEventListener("keydown",function(Ue){return L(Ue,ge)})),t.handleAttributes!==void 0){var he=t.handleAttributes[ge];Object.keys(he).forEach(function(Ue){Ve.setAttribute(Ue,he[Ue])})}return Ve.setAttribute("role","slider"),Ve.setAttribute("aria-orientation",t.ort?"vertical":"horizontal"),ge===0?ao(Ve,t.cssClasses.handleLower):ge===t.handles-1&&ao(Ve,t.cssClasses.handleUpper),_e.handle=Ve,_e}function N(oe,ge){return ge?C(oe,t.cssClasses.connect):!1}function F(oe,ge){l=C(ge,t.cssClasses.connects),u=[],c=[],c.push(N(l,oe[0]));for(var _e=0;_e<t.handles;_e++)u.push(k(ge,_e)),b[_e]=_e,c.push(N(l,oe[_e+1]))}function P(oe){ao(oe,t.cssClasses.target),t.dir===0?ao(oe,t.cssClasses.ltr):ao(oe,t.cssClasses.rtl),t.ort===0?ao(oe,t.cssClasses.horizontal):ao(oe,t.cssClasses.vertical);var ge=getComputedStyle(oe).direction;return ge==="rtl"?ao(oe,t.cssClasses.textDirectionRtl):ao(oe,t.cssClasses.textDirectionLtr),C(oe,t.cssClasses.base)}function B(oe,ge){return!t.tooltips||!t.tooltips[ge]?!1:C(oe.firstChild,t.cssClasses.tooltip)}function O(){return o.hasAttribute("disabled")}function v(oe){var ge=u[oe];return ge.hasAttribute("disabled")}function A(oe){oe!=null?(u[oe].setAttribute("disabled",""),u[oe].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),u.forEach(function(ge){ge.handle.removeAttribute("tabindex")}))}function R(oe){oe!=null?(u[oe].removeAttribute("disabled"),u[oe].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),u.forEach(function(ge){ge.removeAttribute("disabled"),ge.handle.setAttribute("tabindex","0")}))}function U(){d&&($("update"+sf.tooltips),d.forEach(function(oe){oe&&rie(oe)}),d=null)}function q(){U(),d=u.map(B),j("update"+sf.tooltips,function(oe,ge,_e){if(!(!d||!t.tooltips)&&d[ge]!==!1){var Ve=oe[ge];t.tooltips[ge]!==!0&&(Ve=t.tooltips[ge].to(_e[ge])),d[ge].innerHTML=Ve}})}function Q(){$("update"+sf.aria),j("update"+sf.aria,function(oe,ge,_e,Ve,he){b.forEach(function(Ue){var xt=u[Ue],rt=X(g,Ue,0,!0,!0,!0),vr=X(g,Ue,100,!0,!0,!0),Je=he[Ue],Dr=String(t.ariaFormat.to(_e[Ue]));rt=m.fromStepping(rt).toFixed(1),vr=m.fromStepping(vr).toFixed(1),Je=m.fromStepping(Je).toFixed(1),xt.children[0].setAttribute("aria-valuemin",rt),xt.children[0].setAttribute("aria-valuemax",vr),xt.children[0].setAttribute("aria-valuenow",Je),xt.children[0].setAttribute("aria-valuetext",Dr)})})}function ee(oe){if(oe.mode===Wp.Range||oe.mode===Wp.Steps)return m.xVal;if(oe.mode===Wp.Count){if(oe.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var ge=oe.values-1,_e=100/ge,Ve=[];ge--;)Ve[ge]=ge*_e;return Ve.push(100),Y(Ve,oe.stepped)}return oe.mode===Wp.Positions?Y(oe.values,oe.stepped):oe.mode===Wp.Values?oe.stepped?oe.values.map(function(he){return m.fromStepping(m.getStep(m.toStepping(he)))}):oe.values:[]}function Y(oe,ge){return oe.map(function(_e){return m.fromStepping(ge?m.getStep(_e):_e)})}function ue(oe){function ge(Je,Dr){return Number((Je+Dr).toFixed(7))}var _e=ee(oe),Ve={},he=m.xVal[0],Ue=m.xVal[m.xVal.length-1],xt=!1,rt=!1,vr=0;return _e=JQt(_e.slice().sort(function(Je,Dr){return Je-Dr})),_e[0]!==he&&(_e.unshift(he),xt=!0),_e[_e.length-1]!==Ue&&(_e.push(Ue),rt=!0),_e.forEach(function(Je,Dr){var Gt,dr,kn,Hr=Je,jn=_e[Dr+1],Qn,Nt,h0,Vd,A1,p0,Gd,hu=oe.mode===Wp.Steps;for(hu&&(Gt=m.xNumSteps[Dr]),Gt||(Gt=jn-Hr),jn===void 0&&(jn=Hr),Gt=Math.max(Gt,1e-7),dr=Hr;dr<=jn;dr=ge(dr,Gt)){for(Qn=m.toStepping(dr),Nt=Qn-vr,A1=Nt/(oe.density||1),p0=Math.round(A1),Gd=Nt/p0,kn=1;kn<=p0;kn+=1)h0=vr+kn*Gd,Ve[h0.toFixed(5)]=[m.fromStepping(h0),0];Vd=_e.indexOf(dr)>-1?Uo.LargeValue:hu?Uo.SmallValue:Uo.NoValue,!Dr&&xt&&dr!==jn&&(Vd=0),dr===jn&&rt||(Ve[Qn.toFixed(5)]=[dr,Vd]),vr=Qn}}),Ve}function de(oe,ge,_e){var Ve,he,Ue=w.createElement("div"),xt=(Ve={},Ve[Uo.None]="",Ve[Uo.NoValue]=t.cssClasses.valueNormal,Ve[Uo.LargeValue]=t.cssClasses.valueLarge,Ve[Uo.SmallValue]=t.cssClasses.valueSub,Ve),rt=(he={},he[Uo.None]="",he[Uo.NoValue]=t.cssClasses.markerNormal,he[Uo.LargeValue]=t.cssClasses.markerLarge,he[Uo.SmallValue]=t.cssClasses.markerSub,he),vr=[t.cssClasses.valueHorizontal,t.cssClasses.valueVertical],Je=[t.cssClasses.markerHorizontal,t.cssClasses.markerVertical];ao(Ue,t.cssClasses.pips),ao(Ue,t.ort===0?t.cssClasses.pipsHorizontal:t.cssClasses.pipsVertical);function Dr(dr,kn){var Hr=kn===t.cssClasses.value,jn=Hr?vr:Je,Qn=Hr?xt:rt;return kn+" "+jn[t.ort]+" "+Qn[dr]}function Gt(dr,kn,Hr){if(Hr=ge?ge(kn,Hr):Hr,Hr!==Uo.None){var jn=C(Ue,!1);jn.className=Dr(Hr,t.cssClasses.marker),jn.style[t.style]=dr+"%",Hr>Uo.NoValue&&(jn=C(Ue,!1),jn.className=Dr(Hr,t.cssClasses.value),jn.setAttribute("data-value",String(kn)),jn.style[t.style]=dr+"%",jn.innerHTML=String(_e.to(kn)))}}return Object.keys(oe).forEach(function(dr){Gt(dr,oe[dr][0],oe[dr][1])}),Ue}function ce(){h&&(rie(h),h=null)}function me(oe){ce();var ge=ue(oe),_e=oe.filter,Ve=oe.format||{to:function(he){return String(Math.round(he))}};return h=o.appendChild(de(ge,_e,Ve)),h}function Se(){var oe=a.getBoundingClientRect(),ge="offset"+["Width","Height"][t.ort];return t.ort===0?oe.width||a[ge]:oe.height||a[ge]}function Oe(oe,ge,_e,Ve){var he=function(xt){var rt=ye(xt,Ve.pageOffset,Ve.target||ge);if(!rt||O()&&!Ve.doNotReject||KQt(o,t.cssClasses.tap)&&!Ve.doNotReject||oe===n.start&&rt.buttons!==void 0&&rt.buttons>1||Ve.hover&&rt.buttons)return!1;s||rt.preventDefault(),rt.calcPoint=rt.points[t.ort],_e(rt,Ve)},Ue=[];return oe.split(" ").forEach(function(xt){ge.addEventListener(xt,he,s?{passive:!0}:!1),Ue.push([xt,he])}),Ue}function ye(oe,ge,_e){var Ve=oe.type.indexOf("touch")===0,he=oe.type.indexOf("mouse")===0,Ue=oe.type.indexOf("pointer")===0,xt=0,rt=0;if(oe.type.indexOf("MSPointer")===0&&(Ue=!0),oe.type==="mousedown"&&!oe.buttons&&!oe.touches)return!1;if(Ve){var vr=function(Gt){var dr=Gt.target;return dr===_e||_e.contains(dr)||oe.composed&&oe.composedPath().shift()===_e};if(oe.type==="touchstart"){var Je=Array.prototype.filter.call(oe.touches,vr);if(Je.length>1)return!1;xt=Je[0].pageX,rt=Je[0].pageY}else{var Dr=Array.prototype.find.call(oe.changedTouches,vr);if(!Dr)return!1;xt=Dr.pageX,rt=Dr.pageY}}return ge=ge||CSe(w),(he||Ue)&&(xt=oe.clientX+ge.x,rt=oe.clientY+ge.y),oe.pageOffset=ge,oe.points=[xt,rt],oe.cursor=he||Ue,oe}function Fe(oe){var ge=oe-XQt(a,t.ort),_e=ge*100/Se();return _e=sie(_e),t.dir?100-_e:_e}function ze(oe){var ge=100,_e=!1;return u.forEach(function(Ve,he){if(!v(he)){var Ue=g[he],xt=Math.abs(Ue-oe),rt=xt===100&&ge===100,vr=xt<ge,Je=xt<=ge&&oe>Ue;(vr||Je||rt)&&(_e=he,ge=xt)}}),_e}function dt(oe,ge){oe.type==="mouseout"&&oe.target.nodeName==="HTML"&&oe.relatedTarget===null&&D(oe,ge)}function re(oe,ge){if(navigator.appVersion.indexOf("MSIE 9")===-1&&oe.buttons===0&&ge.buttonsProperty!==0)return D(oe,ge);var _e=(t.dir?-1:1)*(oe.calcPoint-ge.startCalcPoint),Ve=_e*100/ge.baseSize;le(_e>0,Ve,ge.locations,ge.handleNumbers,ge.connect)}function D(oe,ge){ge.handle&&(X4(ge.handle,t.cssClasses.active),S-=1),ge.listeners.forEach(function(_e){T.removeEventListener(_e[0],_e[1])}),S===0&&(X4(o,t.cssClasses.drag),je(),oe.cursor&&(I.style.cursor="",I.removeEventListener("selectstart",nie))),t.events.smoothSteps&&(ge.handleNumbers.forEach(function(_e){yt(_e,g[_e],!0,!0,!1,!1)}),ge.handleNumbers.forEach(function(_e){J("update",_e)})),ge.handleNumbers.forEach(function(_e){J("change",_e),J("set",_e),J("end",_e)})}function K(oe,ge){if(!ge.handleNumbers.some(v)){var _e;if(ge.handleNumbers.length===1){var Ve=u[ge.handleNumbers[0]];_e=Ve.children[0],S+=1,ao(_e,t.cssClasses.active)}oe.stopPropagation();var he=[],Ue=Oe(n.move,T,re,{target:oe.target,handle:_e,connect:ge.connect,listeners:he,startCalcPoint:oe.calcPoint,baseSize:Se(),pageOffset:oe.pageOffset,handleNumbers:ge.handleNumbers,buttonsProperty:oe.buttons,locations:g.slice()}),xt=Oe(n.end,T,D,{target:oe.target,handle:_e,listeners:he,doNotReject:!0,handleNumbers:ge.handleNumbers}),rt=Oe("mouseout",T,dt,{target:oe.target,handle:_e,listeners:he,doNotReject:!0,handleNumbers:ge.handleNumbers});he.push.apply(he,Ue.concat(xt,rt)),oe.cursor&&(I.style.cursor=getComputedStyle(oe.target).cursor,u.length>1&&ao(o,t.cssClasses.drag),I.addEventListener("selectstart",nie,!1)),ge.handleNumbers.forEach(function(vr){J("start",vr)})}}function H(oe){oe.stopPropagation();var ge=Fe(oe.calcPoint),_e=ze(ge);_e!==!1&&(t.events.snap||iie(o,t.cssClasses.tap,t.animationDuration),yt(_e,ge,!0,!0),je(),J("slide",_e,!0),J("update",_e,!0),t.events.snap?K(oe,{handleNumbers:[_e]}):(J("change",_e,!0),J("set",_e,!0)))}function z(oe){var ge=Fe(oe.calcPoint),_e=m.getStep(ge),Ve=m.fromStepping(_e);Object.keys(E).forEach(function(he){he.split(".")[0]==="hover"&&E[he].forEach(function(Ue){Ue.call(za,Ve)})})}function L(oe,ge){if(O()||v(ge))return!1;var _e=["Left","Right"],Ve=["Down","Up"],he=["PageDown","PageUp"],Ue=["Home","End"];t.dir&&!t.ort?_e.reverse():t.ort&&!t.dir&&(Ve.reverse(),he.reverse());var xt=oe.key.replace("Arrow",""),rt=xt===he[0],vr=xt===he[1],Je=xt===Ve[0]||xt===_e[0]||rt,Dr=xt===Ve[1]||xt===_e[1]||vr,Gt=xt===Ue[0],dr=xt===Ue[1];if(!Je&&!Dr&&!Gt&&!dr)return!0;oe.preventDefault();var kn;if(Dr||Je){var Hr=Je?0:1,jn=Wt(ge),Qn=jn[Hr];if(Qn===null)return!1;Qn===!1&&(Qn=m.getDefaultStep(g[ge],Je,t.keyboardDefaultStep)),vr||rt?Qn*=t.keyboardPageMultiplier:Qn*=t.keyboardMultiplier,Qn=Math.max(Qn,1e-7),Qn=(Je?-1:1)*Qn,kn=y[ge]+Qn}else dr?kn=t.spectrum.xVal[t.spectrum.xVal.length-1]:kn=t.spectrum.xVal[0];return yt(ge,m.toStepping(kn),!0,!0),J("slide",ge),J("update",ge),J("change",ge),J("set",ge),!1}function G(oe){oe.fixed||u.forEach(function(ge,_e){Oe(n.start,ge.children[0],K,{handleNumbers:[_e]})}),oe.tap&&Oe(n.start,a,H,{}),oe.hover&&Oe(n.move,a,z,{hover:!0}),oe.drag&&c.forEach(function(ge,_e){if(!(ge===!1||_e===0||_e===c.length-1)){var Ve=u[_e-1],he=u[_e],Ue=[ge],xt=[Ve,he],rt=[_e-1,_e];ao(ge,t.cssClasses.draggable),oe.fixed&&(Ue.push(Ve.children[0]),Ue.push(he.children[0])),oe.dragAll&&(xt=u,rt=b),Ue.forEach(function(vr){Oe(n.start,vr,K,{handles:xt,handleNumbers:rt,connect:ge})})}})}function j(oe,ge){E[oe]=E[oe]||[],E[oe].push(ge),oe.split(".")[0]==="update"&&u.forEach(function(_e,Ve){J("update",Ve)})}function V(oe){return oe===sf.aria||oe===sf.tooltips}function $(oe){var ge=oe&&oe.split(".")[0],_e=ge?oe.substring(ge.length):oe;Object.keys(E).forEach(function(Ve){var he=Ve.split(".")[0],Ue=Ve.substring(he.length);(!ge||ge===he)&&(!_e||_e===Ue)&&(!V(Ue)||_e===Ue)&&delete E[Ve]})}function J(oe,ge,_e){Object.keys(E).forEach(function(Ve){var he=Ve.split(".")[0];oe===he&&E[Ve].forEach(function(Ue){Ue.call(za,y.map(t.format.to),ge,y.slice(),_e||!1,g.slice(),za)})})}function X(oe,ge,_e,Ve,he,Ue,xt){var rt;return u.length>1&&!t.events.unconstrained&&(Ve&&ge>0&&(rt=m.getAbsoluteDistance(oe[ge-1],t.margin,!1),_e=Math.max(_e,rt)),he&&ge<u.length-1&&(rt=m.getAbsoluteDistance(oe[ge+1],t.margin,!0),_e=Math.min(_e,rt))),u.length>1&&t.limit&&(Ve&&ge>0&&(rt=m.getAbsoluteDistance(oe[ge-1],t.limit,!1),_e=Math.min(_e,rt)),he&&ge<u.length-1&&(rt=m.getAbsoluteDistance(oe[ge+1],t.limit,!0),_e=Math.max(_e,rt))),t.padding&&(ge===0&&(rt=m.getAbsoluteDistance(0,t.padding[0],!1),_e=Math.max(_e,rt)),ge===u.length-1&&(rt=m.getAbsoluteDistance(100,t.padding[1],!0),_e=Math.min(_e,rt))),xt||(_e=m.getStep(_e)),_e=sie(_e),_e===oe[ge]&&!Ue?!1:_e}function te(oe,ge){var _e=t.ort;return(_e?ge:oe)+", "+(_e?oe:ge)}function le(oe,ge,_e,Ve,he){var Ue=_e.slice(),xt=Ve[0],rt=t.events.smoothSteps,vr=[!oe,oe],Je=[oe,!oe];Ve=Ve.slice(),oe&&Ve.reverse(),Ve.length>1?Ve.forEach(function(Gt,dr){var kn=X(Ue,Gt,Ue[Gt]+ge,vr[dr],Je[dr],!1,rt);kn===!1?ge=0:(ge=kn-Ue[Gt],Ue[Gt]=kn)}):vr=Je=[!0];var Dr=!1;Ve.forEach(function(Gt,dr){Dr=yt(Gt,_e[Gt]+ge,vr[dr],Je[dr],!1,rt)||Dr}),Dr&&(Ve.forEach(function(Gt){J("update",Gt),J("slide",Gt)}),he!=null&&J("drag",xt))}function ve(oe,ge){return t.dir?100-oe-ge:oe}function ke(oe,ge){g[oe]=ge,y[oe]=m.fromStepping(ge);var _e=ve(ge,0)-M,Ve="translate("+te(_e+"%","0")+")";if(u[oe].style[t.transformRule]=Ve,t.events.invertConnects&&g.length>1){var he=g.every(function(Ue,xt,rt){return xt===0||Ue>=rt[xt-1]});if(x!==!he){Ei();return}}ft(oe),ft(oe+1),x&&(ft(oe-1),ft(oe+2))}function je(){b.forEach(function(oe){var ge=g[oe]>50?-1:1,_e=3+(u.length+ge*oe);u[oe].style.zIndex=String(_e)})}function yt(oe,ge,_e,Ve,he,Ue){return he||(ge=X(g,oe,ge,_e,Ve,!1,Ue)),ge===!1?!1:(ke(oe,ge),!0)}function ft(oe){if(c[oe]){var ge=g.slice();x&&ge.sort(function(rt,vr){return rt-vr});var _e=0,Ve=100;oe!==0&&(_e=ge[oe-1]),oe!==c.length-1&&(Ve=ge[oe]);var he=Ve-_e,Ue="translate("+te(ve(_e,he)+"%","0")+")",xt="scale("+te(he/100,"1")+")";c[oe].style[t.transformRule]=Ue+" "+xt}}function Ot(oe,ge){return oe===null||oe===!1||oe===void 0||(typeof oe=="number"&&(oe=String(oe)),oe=t.format.from(oe),oe!==!1&&(oe=m.toStepping(oe)),oe===!1||isNaN(oe))?g[ge]:oe}function ct(oe,ge,_e){var Ve=bN(oe),he=g[0]===void 0;ge=ge===void 0?!0:ge,t.animate&&!he&&iie(o,t.cssClasses.tap,t.animationDuration),b.forEach(function(rt){yt(rt,Ot(Ve[rt],rt),!0,!1,_e)});var Ue=b.length===1?0:1;if(he&&m.hasNoSize()&&(_e=!0,g[0]=0,b.length>1)){var xt=100/(b.length-1);b.forEach(function(rt){g[rt]=rt*xt})}for(;Ue<b.length;++Ue)b.forEach(function(rt){yt(rt,g[rt],!0,!0,_e)});je(),b.forEach(function(rt){J("update",rt),Ve[rt]!==null&&ge&&J("set",rt)})}function Te(oe){ct(t.start,oe)}function ht(oe,ge,_e,Ve){if(oe=Number(oe),!(oe>=0&&oe<b.length))throw new Error("noUiSlider: invalid handle number, got: "+oe);yt(oe,Ot(ge,oe),!0,!0,Ve),J("update",oe),_e&&J("set",oe)}function nt(oe){if(oe===void 0&&(oe=!1),oe)return y.length===1?y[0]:y.slice(0);var ge=y.map(t.format.to);return ge.length===1?ge[0]:ge}function $t(){for($(sf.aria),$(sf.tooltips),Object.keys(t.cssClasses).forEach(function(oe){X4(o,t.cssClasses[oe])});o.firstChild;)o.removeChild(o.firstChild);delete o.noUiSlider}function Wt(oe){var ge=g[oe],_e=m.getNearbySteps(ge),Ve=y[oe],he=_e.thisStep.step,Ue=null;if(t.snap)return[Ve-_e.stepBefore.startValue||null,_e.stepAfter.startValue-Ve||null];he!==!1&&Ve+he>_e.stepAfter.startValue&&(he=_e.stepAfter.startValue-Ve),Ve>_e.thisStep.startValue?Ue=_e.thisStep.step:_e.stepBefore.step===!1?Ue=!1:Ue=Ve-_e.stepBefore.highestStep,ge===100?he=null:ge===0&&(Ue=null);var xt=m.countStepDecimals();return he!==null&&he!==!1&&(he=Number(he.toFixed(xt))),Ue!==null&&Ue!==!1&&(Ue=Number(Ue.toFixed(xt))),[Ue,he]}function vn(){return b.map(Wt)}function Xn(oe,ge){var _e=nt(),Ve=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];Ve.forEach(function(Ue){oe[Ue]!==void 0&&(r[Ue]=oe[Ue])});var he=LSe(r);Ve.forEach(function(Ue){oe[Ue]!==void 0&&(t[Ue]=he[Ue])}),m=he.spectrum,t.margin=he.margin,t.limit=he.limit,t.padding=he.padding,t.pips?me(t.pips):ce(),t.tooltips?q():U(),g=[],ct(KU(oe.start)?oe.start:_e,ge),oe.connect&&ss()}function ss(){for(;l.firstChild;)l.removeChild(l.firstChild);for(var oe=0;oe<=t.handles;oe++)c[oe]=N(l,t.connect[oe]),ft(oe);G({drag:t.events.drag,fixed:!0})}function Ei(){x=!x,OSe(t,t.connect.map(function(oe){return!oe})),ss()}function os(){a=P(o),F(t.connect,a),G(t.events),ct(t.start),t.pips&&me(t.pips),t.tooltips&&q(),Q()}os();var za={destroy:$t,steps:vn,on:j,off:$,get:nt,set:ct,setHandle:ht,reset:Te,disable:A,enable:R,__moveHandles:function(oe,ge,_e){le(oe,ge,g,_e)},options:r,updateOptions:Xn,target:o,removePips:ce,removeTooltips:U,getPositions:function(){return g.slice()},getTooltips:function(){return d},getOrigins:function(){return u},pips:me};return za}function RKt(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var r=LSe(t),n=kKt(e,r,t);return e.noUiSlider=n,n}const OKt={__spectrum:kSe,cssClasses:RSe,create:RKt},NKt=["content","aria-label"],LKt={key:0,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#595959"},PKt={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#595959"},DKt={class:"my-2.5 text-base range-display"},FKt={class:""},jKt={key:0,class:""},UKt=["content","aria-label"],BKt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"6 6 36 36",height:"24",width:"24",fill:"#595959"},VKt={key:1,xmlns:"http://www.w3.org/2000/svg",height:"24",width:"24",viewBox:"6 6 36 36",fill:"#595959"},GKt=Jt({__name:"time-slider",props:{config:{type:Object,required:!0},rInstance:{type:Object}},setup(e){const t=e,r=Ye(!1),n=Ye(),i=Ye(),s=Ye(),o=Ye(),a=Ye(["",""]),l=Ye(-1);ns(()=>{s.value=i.value,o.value=OKt.create(s.value,{start:t.config.start,range:{min:t.config.range[0],max:t.config.range[1]},connect:!0,step:1,pips:{mode:Wp.Steps,density:1,filter:y=>y%1===0?1:-1},...t.config.sliderConfig}),o.value.on("update",()=>{const y=o.value.get();Array.isArray(y)?a.value=y.map(b=>b.split(".")[0]):a.value=[y.split(".")[0]];let g;switch(a.value.length){case 1:g=`${t.config.attribute} = ${a.value[0]}`;break;default:g=`${t.config.attribute} >= ${a.value[0]} AND ${t.config.attribute} <= ${a.value[1]}`;break}!t.config.layers||t.config.layers.length===0?t.rInstance.geo.layer.allLayers().filter(b=>b.supportsFeatures&&!b.isCosmetic).forEach(b=>{b.setSqlFilter("time_slider",g)}):t.config.layers.forEach(b=>{t.rInstance.geo.layer.getLayer(b)?.setSqlFilter("time_slider",g)})}),s.value.querySelectorAll(".noUi-handle").forEach(y=>{y.setAttribute("tabindex","-2")})});const u=()=>{const m=o.value.get();Array.isArray(m)&&o.value.set(m.map(()=>m[0])),l.value=window.setInterval(c,1400)},c=()=>{const m=o.value.get(!0);let y;Array.isArray(m)?y=m.map(()=>m[0]===t.config.range[1]?t.config.range[0]:m[0]+1):y=[m===t.config.range[1]?t.config.range[0]:m+1],o.value.set(y)},h=()=>{clearInterval(l.value),l.value=-1},d=()=>{r.value=!r.value,r.value?n.value.parentElement.classList.add("minimized"):n.value.parentElement.classList.remove("minimized")};return(m,y)=>{const g=Yw("tippy");return Ie(),Ne("div",{ref_key:"el",ref:n,class:"time-slider absolute w-full h-full left-0 flex flex-col items-center bg-white"},[fi((Ie(),Ne("button",{class:"absolute left-4 play-button",onClick:y[0]||(y[0]=b=>l.value>=0?h():u()),content:m.$t(l.value>=0?"timeslider.pause":"timeslider.play"),"aria-label":m.$t(l.value>=0?"timeslider.pause":"timeslider.play")},[l.value===-1?(Ie(),Ne("svg",LKt,y[2]||(y[2]=[Ce("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ce("path",{d:"M8 5v14l11-7z"},null,-1)]))):(Ie(),Ne("svg",PKt,y[3]||(y[3]=[Ce("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Ce("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},null,-1)])))],8,NKt)),[[g,{placement:"top",hideOnClick:!1,animateFill:!0}]]),Ce("span",DKt,[Ce("span",FKt,Vr(a.value[0]),1),a.value[1]?(Ie(),Ne("span",jKt," - "+Vr(a.value[1]),1)):sn("",!0)]),fi((Ie(),Ne("button",{class:"absolute right-4 minimize-button",onClick:y[1]||(y[1]=b=>d()),content:m.$t(r.value?"timeslider.expand":"timeslider.minimize"),"aria-label":m.$t(r.value?"timeslider.expand":"timeslider.minimize")},[r.value?(Ie(),Ne("svg",VKt,y[5]||(y[5]=[Ce("path",{d:"M14.15 30.75 12 28.6l12-12 12 11.95-2.15 2.15L24 20.85Z"},null,-1)]))):(Ie(),Ne("svg",BKt,y[4]||(y[4]=[Ce("path",{d:"m24 30.75-12-12 2.15-2.15L24 26.5l9.85-9.85L36 18.8Z"},null,-1)])))],8,UKt)),[[g,{placement:"top",hideOnClick:!1,animateFill:!0}]]),y[6]||(y[6]=Ce("div",{class:"time-slider-backdrop"},null,-1)),fi(Ce("div",{ref_key:"sliderTarget",ref:i,class:"noUi-target noUiSlider"},null,512),[[Qb,!r.value]])],512)}}});class zKt{timeSliderPanel;removed(){this.$vApp.$el.querySelector(".inner-shell")?.removeChild(this.timeSliderPanel)}initTimeSlider(t,r){const n=this.$iApi;this.timeSliderPanel=document.createElement("div"),gEe({setup(s){return()=>pe(GKt,{props:{config:s.config,rInstance:s.rInt}})}},{config:t,rInstance:n}).use(r).use(vEe,{directive:"tippy",component:"tippy"}).mount(this.timeSliderPanel),this.timeSliderPanel.classList.add("time-slider-container"),this.$vApp.$el.querySelector(".inner-shell")?.appendChild(this.timeSliderPanel)}}const $Kt={key:1,class:"grid-teleport flex sm:flex-row flex-col w-full min-h-0 sm:h-story"},qKt=["id"],HKt=["id"],WKt=["innerHTML"],ZKt=Jt({__name:"map-panel",props:{config:{type:Object,required:!0},slideIdx:{type:Number},lang:{type:String},configFileStructure:{type:Object},background:{type:Boolean},isSlideshowItem:{type:Boolean}},setup(e){const t=e,r=Ye(),n=Ye(),i=Ye(-1),s=Ye(void 0),o=new Kg({html:!0});ns(()=>{const u=new IntersectionObserver(([c])=>{c.isIntersecting?i.value=window.setTimeout(()=>{a(),u.disconnect(),s.value?.querySelector(".map-loading")?.remove()},350):clearTimeout(i.value)},{threshold:[0]});u.observe(r.value)});const a=async()=>{if(t.config.title?s.value=t.config.teleportGrid?r.value.children[1].children[1]:r.value.children[1]:s.value=t.config.teleportGrid?r.value.children[0].children[1]:r.value.children[0],t.configFileStructure){const u=`${t.config.config.substring(t.config.config.indexOf("/")+1)}`,c=t.configFileStructure.zip.file(u);c&&c.async("string").then(h=>{l(JSON.parse(h))})}else fetch(t.config.config).then(u=>{u.json().then(c=>{l(c)})})},l=u=>{t.config.teleportGrid&&(u.configs.en.fixtures.grid.panelTeleport.target=n.value,u.configs.fr.fixtures.grid.panelTeleport.target=n.value);const c=FH(s.value,u);if(t.config.teleportGrid){const d=u.configs[t.lang].layers[0].id;c.event.on("layer/layerstatechange",()=>{c.geo.layer.allLayers().every(m=>m.isLoaded)&&(c.event.emit("grid/toggle",c.geo.layer.getLayer(d)),c.event.off("initial_grid"))},"initial_grid")}t.config.scrollguard&&c.fixture.add("scrollguard").then(d=>{d.setEnabled(!0)}),t.config.timeSlider&&c.fixture.add("time-slider",zKt).then(d=>{d.initTimeSlider(t.config.timeSlider,bEe)});const h=new CustomEvent("map-created",{detail:{rInstance:c,customTemplates:t.config.customTemplates}});document.dispatchEvent(h)};return(u,c)=>(Ie(),Ne("div",{ref_key:"el",ref:r,class:Jr(["flex flex-col h-full align-middle w-full",{"map-box":!e.isSlideshowItem&&!e.config.teleportGrid}])},[e.config.title?(Ie(),Ne("div",{key:0,class:Jr(["px-10 mb-0 chapter-title top-20 map-title text-center",{"has-background":e.background}])},Vr(e.config.title),3)):sn("",!0),e.config.teleportGrid?(Ie(),Ne("div",$Kt,[Ce("div",{class:Jr(["storylines-grid-container flex-1 min-w-0 min-h-0 ramp-styles",{"sm:order-1 order-2":e.config.teleportGrid==="left","order-2":e.config.teleportGrid==="right"}]),ref_key:"grid",ref:n},null,2),Ce("div",{id:`ramp-map-${e.slideIdx}`,class:"rv-map flex-2 min-w-0 bg-gray-200"},null,8,qKt)])):(Ie(),Ne("div",{key:2,id:`ramp-map-${e.slideIdx}`,class:"rv-map w-full bg-gray-200 sm:h-story min-h-0 flex-1"},null,8,HKt)),e.config.caption?(Ie(),Ne("div",{key:3,class:Jr(["text-center text-sm max-w-full map-caption",{"caption-has-background":e.background}]),innerHTML:yi(o).render(e.config.caption)},null,10,WKt)):sn("",!0)],2))}}),JKt=ml(ZKt,[["__scopeId","data-v-b0180681"]]),YKt={class:"relative bg-white fullscreen-wrapper rounded-lg"},XKt=["aria-label","content"],QKt={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#595959"},KKt={xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#595959"},PSe=Jt({__name:"fullscreen",props:{expandable:{type:Boolean},type:{type:String}},setup(e){const t=Ye(!1),r=Ye(),n=async()=>{await JH.toggle(r.value.querySelector(".fullscreen-wrapper"),{teleport:!0,pageOnly:!0,fullscreenClass:"fullscreenElement"}),t.value=JH.isFullscreen};return(i,s)=>{const o=Yw("tippy");return Ie(),Ne("div",{ref_key:"el",ref:r},[Ce("div",YKt,[e.expandable===void 0||e.expandable?fi((Ie(),Ne("button",{key:0,class:Jr(["fullscreenButton expand-button absolute items-center justify-center p-3 z-10",[t.value?"top-0":"bottom-0",e.type==="image"?"right-10":"right-2"]]),"aria-label":i.$t("image.fullscreen"),content:i.$t(t.value?"fullscreen.deactivate":"fullscreen.activate"),onClick:n},[fi((Ie(),Ne("svg",QKt,s[0]||(s[0]=[Ce("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",fill:"#666666"},null,-1)]),512)),[[Qb,t.value]]),fi((Ie(),Ne("svg",KKt,s[1]||(s[1]=[Ce("path",{d:"M10,21V19H6.41L10.91,14.5L9.5,13.09L5,17.59V14H3V21H10M14.5,10.91L19,6.41V10H21V3H14V5H17.59L13.09,9.5L14.5,10.91Z"},null,-1)]),512)),[[Qb,!t.value]])],10,XKt)),[[o,{placement:"top",hideOnClick:!1,animateFill:!0}]]):sn("",!0),Pie(i.$slots,"default")])],512)}}}),eer={class:"flex"},ter=["innerHTML"],rer={class:"flex-1"},ner=["src","alt"],ier=["innerHTML"],ser=["innerHTML"],oer=Jt({__name:"point-of-interest-item",props:{point:{type:Object,required:!0}},emits:["return-home","poi-changed"],setup(e,{emit:t}){const r=Ye(),n=t,i=new Kg({html:!0}),s=Ye(""),o=Ye(.6),a=e;ns(()=>{a.point.text&&(s.value=i.render(a.point.text).replace(/<table/g,'<div class="table-container"><table').replace(/<\/table>/g,"</table></div>")),new ResizeObserver(function(h){c.disconnect();const d=window.innerHeight,m=r.value.clientHeight;m>d*.6&&(o.value=d*.6/m*.6),c=new IntersectionObserver(l,{threshold:o.value}),c.observe(r.value)}).observe(r.value);let c=new IntersectionObserver(l,{threshold:o.value});c.observe(r.value)});const l=(u,c)=>{u.forEach(h=>{if(h.intersectionRatio===0)return;const d=a.point.target;h.isIntersecting&&(d.returnHome?n("return-home"):n("poi-changed",d.layerId,d.oid,d.layerIndex))})};return(u,c)=>(Ie(),Ne("div",{ref_key:"poi",ref:r,class:"relative point-of-interest-content"},[Ce("div",eer,[e.point.target.icon?(Ie(),Ne("span",{key:0,class:"absolute bg-white border-black border-2 point-of-interest-icon w-50 h-50 z-10",innerHTML:e.point.target.icon},null,8,ter)):sn("",!0)]),Ce("div",rer,[e.point.image?(Ie(),Ss(PSe,{key:0,expandable:!0},{default:mi(()=>[Ce("img",{src:e.point.image,alt:e.point.altText},null,8,ner)]),_:1})):sn("",!0),e.point.title||e.point.text?(Ie(),Ne("div",{key:1,class:Jr(["point-of-interest-text",{"no-image":!e.point.image}])},[Ce("h1",{class:"text-xl font-bold",innerHTML:e.point.title},null,8,ier),Ce("span",{class:"prose",innerHTML:s.value},null,8,ser)],2)):sn("",!0)])],512))}}),aie=ml(oer,[["__scopeId","data-v-ecf54cef"]]),aer={key:0,class:"flex teleport-container sm:flex-row flex-col h-full w-full"},ler={class:"overflow-x-auto overflow-y-hidden sm:self-start flex-2 sticky z-40"},uer=["id"],cer={class:"flex-1"},her={key:1,class:"h-full align-middle w-full interactive-container sticky"},per={class:"interactive-content z-50"},der=["id"],fer=Jt({__name:"interactive-map",props:{config:{type:Object,required:!0},slideIdx:{type:Number},lang:{type:String},configFileStructure:{type:Object}},setup(e){const t=e,r=Ye(),n=Ye(void 0),i=Ye();ns(()=>{const l=`${t.config.config.substring(t.config.config.indexOf("/")+1)}`;if(t.configFileStructure){const u=t.configFileStructure.zip.file(l);u&&u.async("string").then(c=>{t.config.config=c})}s()});const s=async()=>{n.value=t.config.teleportAOI?r.value.children[0].children[0].children[0]:r.value.children[0].children[1],fetch(t.config.config).then(l=>{l.json().then(u=>{i.value=FH(n.value,u);const c=i.value;c.event.on("map/created",()=>{c.fixture.get("appbar")&&c.fixture.remove("appbar")}),c.geo.map.viewPromise.then(()=>{t.config.points.forEach(async h=>{const d=h.target,m=c.geo.layer.getLayer(d.layerId);m.loadPromise().then(()=>{if(d.layerIndex!==void 0){const y=m.getSublayer(d.layerIndex);y.loadPromise().then(()=>{y.getIcon(d.oid).then(g=>{h.target.icon=g})})}else m.getIcon(d.oid).then(y=>{h.target.icon=y})})})})})})},o=(l,u,c)=>{!l||!u||i.value.geo.map.viewPromise.then(()=>{const h=i.value,d=h.fixture.get("hilight"),m=h.geo.layer.getLayer(l);if(m.layerType==="esri-map-image"&&c===void 0){console.warn(`Layer ${l} is a map image layer and requires that layerIndex is specified in the config.`);return}const y=c!==void 0?m.getSublayer(c):m;y.loadPromise().then(async()=>{await d.removeHilight();const g=await y.getGraphic(u,{getGeom:!0,getStyle:!0});await h.geo.map.zoomMapTo(g.geometry,4622324434309e-6,!0,t.config.duration||void 0)})})},a=async()=>{const l=i.value.geo.map.getExtentSet();await i.value.geo.map.zoomMapTo(l.fullExtent,null,!0,t.config.duration||void 0)};return(l,u)=>(Ie(),Ne("div",{ref_key:"el",ref:r,class:"h-full align-middle w-full"},[e.config.teleportAOI?(Ie(),Ne("div",aer,[Ce("div",ler,[Ce("div",{id:`ramp-map-${e.slideIdx}`,class:"bg-gray-200 rv-map"},null,8,uer)]),Ce("div",cer,[(Ie(!0),Ne(Dn,null,Wn(e.config.points,(c,h)=>(Ie(),Ne("div",{key:"poi-"+h,class:"point-of-interest-container"},[Zi(aie,{class:"point-of-interest",point:c,index:h,onPoiChanged:o,onReturnHome:a},null,8,["point","index"])]))),128))])])):(Ie(),Ne("div",her,[Ce("div",per,[(Ie(!0),Ne(Dn,null,Wn(e.config.points,(c,h)=>(Ie(),Ne("div",{key:"poi-"+h,class:"point-of-interest-container"},[Zi(aie,{point:c,index:h,onPoiChanged:o,onReturnHome:a},null,8,["point","index"])]))),128))]),Ce("div",{id:`ramp-map-${e.slideIdx}`,class:"bg-gray-200 h-story rv-map sticky interactive-content"},null,8,der)]))],512))}}),mer=ml(fer,[["__scopeId","data-v-56a2c2eb"]]),yer={class:"graphic self-start justify-center flex flex-col h-full align-middle pb-5 w-full"},ger=["src","alt"],ver=["innerHTML"],ber=Jt({__name:"image-panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},slideIdx:{type:Number,default:0},background:{type:Boolean},lazyLoad:{type:Boolean}},setup(e){const t=e,r=Ye(),n=new Kg({html:!0}),i=nc({src:""}),s=Ye(void 0);return ns(()=>{if(i.src=t.config.src?t.config.src:"",t.lazyLoad&&t.slideIdx>2&&(s.value=new IntersectionObserver(([o])=>{o.isIntersecting&&(r.value.setAttribute("src",t.config.src),Ik()?.proxy?.$forceUpdate(),s.value.disconnect())})),t.configFileStructure){const o=t.config,a=`${o.src.substring(o.src.indexOf("/")+1)}`,l=t.configFileStructure?.zip.file(a);l&&l.async("blob").then(u=>{i.src=t.config.src=URL.createObjectURL(u)})}s.value?.observe(r.value)}),(o,a)=>(Ie(),Ne("div",yer,[Zi(PSe,{expandable:e.config.fullscreen,type:e.config.type},{default:mi(()=>[Ce("img",{ref_key:"img",ref:r,src:e.lazyLoad&&e.slideIdx>2?"":i.src,class:Jr([[e.config.class,e.config.caption?"rounded-t-lg":"rounded-lg"],"graphic-image mx-auto flex object-contain sm:max-w-screen sm:max-h-screen"]),alt:e.config.altText||"",style:tr({width:`${e.config.width}px`,height:`${e.config.height}px`})},null,14,ger)]),_:1},8,["expandable","type"]),e.config.caption?(Ie(),Ne("div",{key:0,class:Jr(["text-center text-sm max-w-full graphic-caption",{"has-background":e.background}]),innerHTML:yi(n).render(e.config.caption)},null,10,ver)):sn("",!0)]))}}),wer=ml(ber,[["__scopeId","data-v-5e81a92e"]]),_er={class:"bg-gray-100 text-center inline-block h-full align-middle"},xer=Jt({__name:"audio-panel",props:{config:{type:Object}},setup(e){return(t,r)=>(Ie(),Ne("div",_er,r[0]||(r[0]=[Ce("h1",{class:"align-middle"},"Temporary Audio Panel",-1)])))}}),Ser=["src","height"],Eer=["src","title","height","poster"],Ter=["type","src"],Ier=["src","srclang","label"],Aer={class:"bg-gray-200 rounded"},Mer={class:"font-semibold"},Cer={key:0},ker={key:0,class:"float-right"},Rer={key:0,class:"h-6 w-6"},Oer={key:1,class:"h-6 w-6"},Ner={class:"content border border-gray-300 p-4"},Ler=["innerHTML"],Per=Jt({__name:"video-panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object}},setup(e){const t=new Kg({html:!0}),r=Ak(),n=e,i=Ye("en"),s=Ye({en:"English",fr:"French"}),o=Ye(""),a=Ye("");Ye("");const l=Ye(""),u=Ye(!1),c=Ye(""),h=Ye("");wEe(()=>{if(i.value=r?.params.lang?r?.params.lang:"en",n.config.videoType==="external"||n.config.videoType==="local"){const g=y(n.config.src);l.value=`video/${g}`}}),ns(()=>{if(n.configFileStructure)n.config.videoType==="local"&&d(`${n.config.src.substring(n.config.src.indexOf("/")+1)}`,"video"),n.config.caption&&d(`${n.config.caption.substring(n.config.caption.indexOf("/")+1)}`,"captions"),n.config.transcript&&d(`${n.config.transcript.substring(n.config.transcript.indexOf("/")+1)}`,"transcript");else if(n.config.transcript){const g=y(n.config.transcript);fetch(n.config.transcript).then(b=>{b.text().then(S=>{c.value=S,h.value=g==="md"?t.render(c.value):c.value})})}});const d=(g,b)=>{const S=n.configFileStructure?.zip.file(g);S&&S.async("blob").then(E=>{if(b==="video"){const x=new Blob([E],{type:"video/mp4"});o.value=URL.createObjectURL(x)}else b==="transcript"?E.text().then(x=>{c.value=x,h.value=c.value}):a.value=URL.createObjectURL(E)})},m=()=>{u.value=!u.value},y=g=>g.substring(g.lastIndexOf("/")+1).split(".").pop();return(g,b)=>(Ie(),Ne("div",{class:"video-container self-start justify-center flex flex-col h-full align-middle pb-5 w-full",style:tr({width:e.config.width?`${e.config.width}`:"100%"})},[e.config.videoType==="YouTube"?(Ie(),Ne("iframe",{key:0,class:"media-player",src:e.config.src,height:e.config.height?`${e.config.height}`:"500px",allowfullscreen:""},null,8,Ser)):sn("",!0),e.config.videoType==="local"||e.config.videoType==="external"?(Ie(),Ne("video",{key:1,class:"media-player",src:o.value?o.value:void 0,title:e.config.title,height:e.config.height?`${e.config.height}`:"500px",poster:e.config.thumbnailUrl,controls:""},[o.value?sn("",!0):(Ie(),Ne("source",{key:0,type:l.value,src:o.value?o.value:e.config.src},null,8,Ter)),e.config.caption?(Ie(),Ne("track",{key:1,kind:"captions",src:a.value?a.value:e.config.caption,srclang:i.value,label:s.value[i.value]},null,8,Ier)):sn("",!0)],8,Eer)):sn("",!0),Ce("figcaption",Aer,[Ce("button",{class:Jr(["flex w-full items-center justify-between p-4",{"hover:bg-gray-300":e.config.transcript,"cursor-pointer":e.config.transcript,"pointer-events-none":!h.value}]),onClick:b[0]||(b[0]=S=>m())},[Ce("span",Mer,[eg(Vr(e.config.title)+" ",1),e.config.transcript?(Ie(),Ne("span",Cer,"("+Vr(g.$t("video.transcript"))+")",1)):sn("",!0)]),e.config.transcript?(Ie(),Ne("div",ker,[u.value?(Ie(),Ne("svg",Rer,b[1]||(b[1]=[Ce("g",{id:"chevron-down"},[Ce("path",{d:"M 7.41348,8.58407L 11.9995,13.1701L 16.5855,8.58407L 17.9995,9.99807L 11.9995,15.9981L 5.99948,9.99807L 7.41348,8.58407 Z "})],-1)]))):(Ie(),Ne("svg",Oer,b[2]||(b[2]=[Ce("g",{id:"chevron-up"},[Ce("path",{d:"M 7.41351,15.4121L 11.9995,10.8261L 16.5855,15.4121L 17.9995,13.9981L 11.9995,7.99807L 5.99951,13.9981L 7.41351,15.4121 Z "})],-1)])))])):sn("",!0)],2),fi(Ce("div",Ner,[Ce("div",{innerHTML:h.value},null,8,Ler)],512),[[Qb,u.value]])])],4))}});/**
 * Vue 3 Carousel 0.3.3
 * (c) 2024
 * @license MIT
 */const Ri={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},lie={itemsToShow:{default:Ri.itemsToShow,type:Number},itemsToScroll:{default:Ri.itemsToScroll,type:Number},wrapAround:{default:Ri.wrapAround,type:Boolean},throttle:{default:Ri.throttle,type:Number},snapAlign:{default:Ri.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:Ri.transition,type:Number},breakpoints:{default:Ri.breakpoints,type:Object},autoplay:{default:Ri.autoplay,type:Number},pauseAutoplayOnHover:{default:Ri.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:Ri.mouseDrag,type:Boolean},touchDrag:{default:Ri.touchDrag,type:Boolean},dir:{default:Ri.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:Ri.i18n,type:Object},settings:{default(){return{}},type:Object}};function Der({config:e,slidesCount:t}){const{snapAlign:r,wrapAround:n,itemsToShow:i=1}=e;if(n)return Math.max(t-1,0);let s;switch(r){case"start":s=t-i;break;case"end":s=t-1;break;case"center":case"center-odd":s=t-Math.ceil((i-.5)/2);break;case"center-even":s=t-Math.ceil(i/2);break;default:s=0;break}return Math.max(s,0)}function Fer({config:e,slidesCount:t}){const{wrapAround:r,snapAlign:n,itemsToShow:i=1}=e;let s=0;if(r||i>t)return s;switch(n){case"start":s=0;break;case"end":s=i-1;break;case"center":case"center-odd":s=Math.floor((i-1)/2);break;case"center-even":s=Math.floor((i-2)/2);break;default:s=0;break}return s}function tB({val:e,max:t,min:r}){return t<r?e:Math.min(Math.max(e,r),t)}function jer({config:e,currentSlide:t,slidesCount:r}){const{snapAlign:n,wrapAround:i,itemsToShow:s=1}=e;let o=t;switch(n){case"center":case"center-odd":o-=(s-1)/2;break;case"center-even":o-=(s-2)/2;break;case"end":o-=s-1;break}return i?o:tB({val:o,max:r-s,min:0})}function DSe(e){return e?e.reduce((t,r)=>{var n;return r.type===Dn?[...t,...DSe(r.children)]:((n=r.type)===null||n===void 0?void 0:n.name)==="CarouselSlide"?[...t,r]:t},[]):[]}function Tk({val:e,max:t,min:r=0}){return e>t?Tk({val:e-(t+1),max:t,min:r}):e<r?Tk({val:e+(t+1),max:t,min:r}):e}function Uer(e,t){let r;return t?function(...n){const i=this;r||(e.apply(i,n),r=!0,setTimeout(()=>r=!1,t))}:e}function Ber(e,t){let r;return function(...n){r&&clearTimeout(r),r=setTimeout(()=>{e(...n),r=null},t)}}function FSe(e="",t={}){return Object.entries(t).reduce((r,[n,i])=>r.replace(`{${n}}`,String(i)),e)}var Ver=Jt({name:"ARIA",setup(){const e=Wi("config",nc(Object.assign({},Ri))),t=Wi("currentSlide",Ye(0)),r=Wi("slidesCount",Ye(0));return()=>pe("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},FSe(e.i18n.itemXofY,{currentSlide:t.value+1,slidesCount:r.value}))}}),Ger=Jt({name:"Carousel",props:lie,setup(e,{slots:t,emit:r,expose:n}){var i;const s=Ye(null),o=Ye([]),a=Ye(0),l=Ye(0),u=nc(Object.assign({},Ri));let c=Object.assign({},Ri),h;const d=Ye((i=e.modelValue)!==null&&i!==void 0?i:0),m=Ye(0),y=Ye(0),g=Ye(0),b=Ye(0);let S,E;zh("config",u),zh("slidesCount",l),zh("currentSlide",d),zh("maxSlide",g),zh("minSlide",b),zh("slideWidth",a);function x(){h=Object.assign({},e.breakpoints),c=Object.assign(Object.assign(Object.assign({},c),e),{i18n:Object.assign(Object.assign({},c.i18n),e.i18n),breakpoints:void 0}),T(c)}function w(){if(!h||!Object.keys(h).length)return;const D=Object.keys(h).map(H=>Number(H)).sort((H,z)=>+z-+H);let K=Object.assign({},c);D.some(H=>{const z=window.matchMedia(`(min-width: ${H}px)`).matches;return z&&(K=Object.assign(Object.assign({},K),h[H])),z}),T(K)}function T(D){Object.entries(D).forEach(([K,H])=>u[K]=H)}const I=Ber(()=>{w(),C(),M()},16);function M(){if(!s.value)return;const D=s.value.getBoundingClientRect();a.value=D.width/u.itemsToShow}function C(){l.value<=0||(y.value=Math.ceil((l.value-1)/2),g.value=Der({config:u,slidesCount:l.value}),b.value=Fer({config:u,slidesCount:l.value}),u.wrapAround||(d.value=tB({val:d.value,max:g.value,min:b.value})))}ns(()=>{_Ee(()=>M()),setTimeout(()=>M(),1e3),w(),Q(),window.addEventListener("resize",I,{passive:!0}),r("init")}),xEe(()=>{E&&clearTimeout(E),S&&clearInterval(S),window.removeEventListener("resize",I,{passive:!0})});let k=!1;const N={x:0,y:0},F={x:0,y:0},P=nc({x:0,y:0}),B=Ye(!1),O=Ye(!1),v=()=>{B.value=!0},A=()=>{B.value=!1};function R(D){["INPUT","TEXTAREA","SELECT"].includes(D.target.tagName)||(k=D.type==="touchstart",k||D.preventDefault(),!(!k&&D.button!==0||Y.value)&&(N.x=k?D.touches[0].clientX:D.clientX,N.y=k?D.touches[0].clientY:D.clientY,document.addEventListener(k?"touchmove":"mousemove",U,!0),document.addEventListener(k?"touchend":"mouseup",q,!0)))}const U=Uer(D=>{O.value=!0,F.x=k?D.touches[0].clientX:D.clientX,F.y=k?D.touches[0].clientY:D.clientY;const K=F.x-N.x,H=F.y-N.y;P.y=H,P.x=K},u.throttle);function q(){const D=u.dir==="rtl"?-1:1,K=Math.sign(P.x)*.4,H=Math.round(P.x/a.value+K)*D;if(H&&!k){const z=L=>{window.removeEventListener("click",z,!0)};window.addEventListener("click",z,!0)}ue(d.value-H),P.x=0,P.y=0,O.value=!1,document.removeEventListener(k?"touchmove":"mousemove",U,!0),document.removeEventListener(k?"touchend":"mouseup",q,!0)}function Q(){!u.autoplay||u.autoplay<=0||(S=setInterval(()=>{u.pauseAutoplayOnHover&&B.value||de()},u.autoplay))}function ee(){S&&(clearInterval(S),S=null),Q()}const Y=Ye(!1);function ue(D){const K=u.wrapAround?D:tB({val:D,max:g.value,min:b.value});d.value===K||Y.value||(r("slide-start",{slidingToIndex:D,currentSlideIndex:d.value,prevSlideIndex:m.value,slidesCount:l.value}),Y.value=!0,m.value=d.value,d.value=K,E=setTimeout(()=>{if(u.wrapAround){const H=Tk({val:K,max:g.value,min:0});H!==d.value&&(d.value=H,r("loop",{currentSlideIndex:d.value,slidingToIndex:D}))}r("update:modelValue",d.value),r("slide-end",{currentSlideIndex:d.value,prevSlideIndex:m.value,slidesCount:l.value}),Y.value=!1,ee()},u.transition))}function de(){ue(d.value+u.itemsToScroll)}function ce(){ue(d.value-u.itemsToScroll)}const me={slideTo:ue,next:de,prev:ce};zh("nav",me),zh("isSliding",Y);const Se=Mr(()=>jer({config:u,currentSlide:d.value,slidesCount:l.value}));zh("slidesToScroll",Se);const Oe=Mr(()=>{const D=u.dir==="rtl"?-1:1,K=Se.value*a.value*D;return{transform:`translateX(${P.x-K}px)`,transition:`${Y.value?u.transition:0}ms`,margin:u.wrapAround?`0 -${l.value*a.value}px`:"",width:"100%"}});function ye(){x(),w(),C(),M(),ee()}Object.keys(lie).forEach(D=>{["modelValue"].includes(D)||Ky(()=>e[D],ye)}),Ky(()=>e.modelValue,D=>{D!==d.value&&ue(Number(D))}),Ky(l,C),r("before-init"),x();const Fe={config:u,slidesCount:l,slideWidth:a,next:de,prev:ce,slideTo:ue,currentSlide:d,maxSlide:g,minSlide:b,middleSlide:y};n({updateBreakpointsConfigs:w,updateSlidesData:C,updateSlideWidth:M,initDefaultConfigs:x,restartCarousel:ye,slideTo:ue,next:de,prev:ce,nav:me,data:Fe});const ze=t.default||t.slides,dt=t.addons,re=nc(Fe);return()=>{const D=DSe(ze?.(re)),K=dt?.(re)||[];D.forEach((G,j)=>G.props.index=j);let H=D;if(u.wrapAround){const G=D.map((V,$)=>YH(V,{index:-D.length+$,isClone:!0,key:`clone-before-${$}`})),j=D.map((V,$)=>YH(V,{index:D.length+$,isClone:!0,key:`clone-after-${$}`}));H=[...G,...D,...j]}o.value=D,l.value=Math.max(D.length,1);const z=pe("ol",{class:"carousel__track",style:Oe.value,onMousedownCapture:u.mouseDrag?R:null,onTouchstartPassiveCapture:u.touchDrag?R:null},H),L=pe("div",{class:"carousel__viewport"},z);return pe("section",{ref:s,class:{carousel:!0,"is-sliding":Y.value,"is-dragging":O.value,"is-hover":B.value,"carousel--rtl":u.dir==="rtl"},dir:u.dir,"aria-label":u.i18n.ariaGallery,tabindex:"0",onMouseenter:v,onMouseleave:A},[L,K,pe(Ver)])}}}),rB;(function(e){e.arrowUp="arrowUp",e.arrowDown="arrowDown",e.arrowRight="arrowRight",e.arrowLeft="arrowLeft"})(rB||(rB={}));const zer={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function $er(e){return e in rB}const nB=e=>{const t=Wi("config",nc(Object.assign({},Ri))),r=String(e.name),n=`icon${r.charAt(0).toUpperCase()+r.slice(1)}`;if(!r||typeof r!="string"||!$er(r))return;const i=zer[r],s=pe("path",{d:i}),o=t.i18n[n]||e.title||r,a=pe("title",o);return pe("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":o},[a,s])};nB.props={name:String,title:String};const qer=(e,{slots:t,attrs:r})=>{const{next:n,prev:i}=t||{},s=Wi("config",nc(Object.assign({},Ri))),o=Wi("maxSlide",Ye(1)),a=Wi("minSlide",Ye(1)),l=Wi("currentSlide",Ye(1)),u=Wi("nav",{}),{dir:c,wrapAround:h,i18n:d}=s,m=c==="rtl",y=pe("button",{type:"button",class:["carousel__prev",!h&&l.value<=a.value&&"carousel__prev--disabled",r?.class],"aria-label":d.ariaPreviousSlide,onClick:u.prev},i?.()||pe(nB,{name:m?"arrowRight":"arrowLeft"})),g=pe("button",{type:"button",class:["carousel__next",!h&&l.value>=o.value&&"carousel__next--disabled",r?.class],"aria-label":d.ariaNextSlide,onClick:u.next},n?.()||pe(nB,{name:m?"arrowLeft":"arrowRight"}));return[y,g]},Her=()=>{const e=Wi("config",nc(Object.assign({},Ri))),t=Wi("maxSlide",Ye(1)),r=Wi("minSlide",Ye(1)),n=Wi("currentSlide",Ye(1)),i=Wi("nav",{}),s=a=>Tk({val:n.value,max:t.value,min:0})===a,o=[];for(let a=r.value;a<t.value+1;a++){const l=pe("button",{type:"button",class:{"carousel__pagination-button":!0,"carousel__pagination-button--active":s(a)},"aria-label":FSe(e.i18n.ariaNavigateToSlide,{slideNumber:a+1}),onClick:()=>i.slideTo(a)}),u=pe("li",{class:"carousel__pagination-item",key:a},l);o.push(u)}return pe("ol",{class:"carousel__pagination"},o)};var Wer=Jt({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:t}){const r=Wi("config",nc(Object.assign({},Ri))),n=Wi("currentSlide",Ye(0)),i=Wi("slidesToScroll",Ye(0)),s=Wi("isSliding",Ye(!1)),o=Mr(()=>e.index===n.value),a=Mr(()=>e.index===n.value-1),l=Mr(()=>e.index===n.value+1),u=Mr(()=>{const c=Math.floor(i.value),h=Math.ceil(i.value+r.itemsToShow-1);return e.index>=c&&e.index<=h});return()=>{var c;return pe("li",{style:{width:`${100/r.itemsToShow}%`},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":u.value,"carousel__slide--active":o.value,"carousel__slide--prev":a.value,"carousel__slide--next":l.value,"carousel__slide--sliding":s.value},"aria-hidden":!u.value},(c=t.default)===null||c===void 0?void 0:c.call(t,{isActive:o.value,isClone:e.isClone,isPrev:a.value,isNext:l.value,isSliding:s.value,isVisible:u.value}))}}});const Zer={class:"flex"},Jer=["innerHTML"],Yer=Jt({__name:"slideshow-panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},slideIdx:{type:Number,required:!0},background:{type:Boolean}},setup(e){const t=new Kg({html:!0}),r=Ye(),n=Ye(-1);return ns(()=>{setTimeout(()=>{n.value=r.value.clientWidth},100)}),window.addEventListener("resize",()=>{n.value=r.value.clientWidth}),(i,s)=>(Ie(),Ne("div",{ref_key:"el",ref:r},[Ce("div",Zer,[Ce("div",{ref:"slideshow",class:"carousel-container self-center px-10 mx-auto bg-gray-200_",style:tr({width:`${n.value}px`})},[n.value!==-1?(Ie(),Ss(yi(Ger),{key:0,ref:"carousel",class:"h-full bg-white","wrap-around":e.config.loop,mouseDrag:!1,touchDrag:!1},{addons:mi(()=>[Zi(yi(qer),null,{next:mi(()=>s[0]||(s[0]=[Ce("svg",{class:"icon icon-arrowRight",viewBox:"0 0 24 24",width:"24px",height:"24px"},[Ce("path",{d:"M0 0h24v24H0z",fill:"none"}),Ce("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})],-1)])),prev:mi(()=>s[1]||(s[1]=[Ce("svg",{class:"icon icon-arrowLeft",viewBox:"0 0 24 24",width:"24px",height:"24px"},[Ce("path",{d:"M0 0h24v24H0z",fill:"none"}),Ce("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"})],-1)])),_:1}),Zi(yi(Her))]),default:mi(()=>[(Ie(!0),Ne(Dn,null,Wn(e.config.items,(o,a)=>(Ie(),Ss(yi(Wer),{key:a,index:a},{default:mi(()=>[Zi(HSe,{config:o,configFileStructure:e.configFileStructure,slideIdx:e.slideIdx,isSlideshowItem:!0,class:Jr(o.type==="map"?"map-carousel-item":"carousel-item")},null,8,["config","configFileStructure","slideIdx","class"])]),_:2},1032,["index"]))),128))]),_:1},8,["wrap-around"])):sn("",!0),e.config.caption?(Ie(),Ne("div",{key:1,class:Jr(["text-center mt-5 text-sm",{"has-background":e.background}]),innerHTML:yi(t).render(e.config.caption)},null,10,Jer)):sn("",!0)],4)])],512))}}),Xer=ml(Yer,[["__scopeId","data-v-2990c516"]]);var Qer=SEe();const HA=Qg(Qer);var jSe={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(n,i,s,o){n.hasOwnProperty(i)||(n[i]=o.apply(null,s))}t=t?t._modules:{},r(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,i){var s=n.doc,o=i.createElement,a=i.discardElement,l=i.merge,u=i.objectEach,c={ajax:function(h){var d=l(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},h);h={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var m=new XMLHttpRequest;if(!d.url)return!1;m.open(d.type.toUpperCase(),d.url,!0),d.headers["Content-Type"]||m.setRequestHeader("Content-Type",h[d.dataType]||h.text),u(d.headers,function(y,g){m.setRequestHeader(g,y)}),m.onreadystatechange=function(){if(m.readyState===4){if(m.status===200){var y=m.responseText;if(d.dataType==="json")try{y=JSON.parse(y)}catch(g){d.error&&d.error(m,g);return}return d.success&&d.success(y)}d.error&&d.error(m,m.responseText)}};try{d.data=JSON.stringify(d.data)}catch{}m.send(d.data||!0)},getJSON:function(h,d){c.ajax({url:h,success:d,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(h,d,m){var y=o("form",l({method:"post",action:h,enctype:"multipart/form-data"},m),{display:"none"},s.body);u(d,function(g,b){o("input",{type:"hidden",name:b,value:g},null,y)}),y.submit(),a(y)}};return c}),r(t,"Extensions/Data.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],function(n,i,s,o,a,l){var u=i.doc,c=s.ajax,h=a.seriesTypes;s=l.addEvent;var d=l.defined,m=l.extend,y=l.fireEvent,g=l.isNumber,b=l.merge,S=l.objectEach,E=l.pick,x=l.splat;l=function(){function T(I,M,C){this.options=this.rawColumns=this.firstRowAsNames=this.chartOptions=this.chart=void 0,this.dateFormats={"YYYY/mm/dd":{regex:/^([0-9]{4})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{1,2})$/,parser:function(k){return k?Date.UTC(+k[1],k[2]-1,+k[3]):NaN}},"dd/mm/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(k){return k?Date.UTC(+k[3],k[2]-1,+k[1]):NaN},alternative:"mm/dd/YYYY"},"mm/dd/YYYY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{4})$/,parser:function(k){return k?Date.UTC(+k[3],k[1]-1,+k[2]):NaN}},"dd/mm/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(k){if(!k)return NaN;var N=+k[3];return N=N>new Date().getFullYear()-2e3?N+1900:N+2e3,Date.UTC(N,k[2]-1,+k[1])},alternative:"mm/dd/YY"},"mm/dd/YY":{regex:/^([0-9]{1,2})[\-\/\.]([0-9]{1,2})[\-\/\.]([0-9]{2})$/,parser:function(k){return k?Date.UTC(+k[3]+2e3,k[1]-1,+k[2]):NaN}}},this.init(I,M,C)}return T.prototype.init=function(I,M,C){var k=I.decimalPoint;if(M&&(this.chartOptions=M),C&&(this.chart=C),k!=="."&&k!==","&&(k=void 0),this.options=I,this.columns=I.columns||this.rowsToColumns(I.rows)||[],this.firstRowAsNames=E(I.firstRowAsNames,this.firstRowAsNames,!0),this.decimalRegex=k&&new RegExp("^(-?[0-9]+)"+k+"([0-9]+)$"),this.rawColumns=[],this.columns.length){this.dataFound();var N=!0}this.hasURLOption(I)&&(clearTimeout(this.liveDataTimeout),N=!1),N||(N=this.fetchLiveData()),N||(N=!!this.parseCSV().length),N||(N=!!this.parseTable().length),N||(N=this.parseGoogleSpreadsheet()),!N&&I.afterComplete&&I.afterComplete()},T.prototype.hasURLOption=function(I){return!(!I||!(I.rowsURL||I.csvURL||I.columnsURL))},T.prototype.getColumnDistribution=function(){var I=this.chartOptions,M=this.options,C=[],k=function(v){return(h[v||"line"].prototype.pointArrayMap||[0]).length},N=I&&I.chart&&I.chart.type,F=[],P=[],B=0;M=M&&M.seriesMapping||I&&I.series&&I.series.map(function(){return{x:0}})||[];var O;(I&&I.series||[]).forEach(function(v){F.push(k(v.type||N))}),M.forEach(function(v){C.push(v.x||0)}),C.length===0&&C.push(0),M.forEach(function(v){var A=new w,R=F[B]||k(N),U=(I&&I.series||[])[B]||{},q=h[U.type||N||"line"].prototype.pointArrayMap,Q=q||["y"];for((d(v.x)||U.isCartesian||!q)&&A.addColumnReader(v.x,"x"),S(v,function(ee,Y){Y!=="x"&&A.addColumnReader(ee,Y)}),O=0;O<R;O++)A.hasReader(Q[O])||A.addColumnReader(void 0,Q[O]);P.push(A),B++}),M=h[N||"line"].prototype.pointArrayMap,typeof M>"u"&&(M=["y"]),this.valueCount={global:k(N),xColumns:C,individual:F,seriesBuilders:P,globalPointArrayMap:M}},T.prototype.dataFound=function(){this.options.switchRowsAndColumns&&(this.columns=this.rowsToColumns(this.columns)),this.getColumnDistribution(),this.parseTypes(),this.parsed()!==!1&&this.complete()},T.prototype.parseCSV=function(I){function M(Y,ue,de,ce){function me(H){Fe=Y[H],ze=Y[H-1],dt=Y[H+1]}function Se(H){R.length<K+1&&R.push([H]),R[K][R[K].length-1]!==H&&R[K].push(H)}function Oe(){O>D||D>v?(++D,re=""):(!isNaN(parseFloat(re))&&isFinite(re)?(re=parseFloat(re),Se("number")):isNaN(Date.parse(re))?Se("string"):(re=re.replace(/\//g,"-"),Se("date")),q.length<K+1&&q.push([]),q[K][ue]=re,re="",++K,++D)}var ye=0,Fe="",ze="",dt="",re="",D=0,K=0;if(Y.trim().length&&Y.trim()[0]!=="#"){for(;ye<Y.length;ye++)if(me(ye),Fe==='"')for(me(++ye);ye<Y.length&&(Fe!=='"'||ze==='"'||dt==='"');)(Fe!=='"'||Fe==='"'&&ze!=='"')&&(re+=Fe),me(++ye);else Fe===Q?Oe():re+=Fe;Oe()}}function C(Y){var ue=0,de=0,ce=!1;return Y.some(function(me,Se){var Oe=!1,ye="";if(13<Se)return!0;for(var Fe=0;Fe<me.length;Fe++){Se=me[Fe];var ze=me[Fe+1],dt=me[Fe-1];if(Se==="#")break;if(Se==='"')if(Oe){if(dt!=='"'&&ze!=='"'){for(;ze===" "&&Fe<me.length;)ze=me[++Fe];typeof U[ze]<"u"&&U[ze]++,Oe=!1}}else Oe=!0;else typeof U[Se]<"u"?(ye=ye.trim(),isNaN(Date.parse(ye))&&!isNaN(ye)&&isFinite(ye)||U[Se]++,ye=""):ye+=Se;Se===","&&de++,Se==="."&&ue++}}),ce=U[";"]>U[","]?";":",",F.decimalPoint||(F.decimalPoint=ue>de?".":",",N.decimalRegex=new RegExp("^(-?[0-9]+)"+F.decimalPoint+"([0-9]+)$")),ce}function k(Y,ue){var de=[],ce=0,me=!1,Se=[],Oe=[],ye;for((!ue||ue>Y.length)&&(ue=Y.length);ce<ue;ce++)if(typeof Y[ce]<"u"&&Y[ce]&&Y[ce].length){var Fe=Y[ce].trim().replace(/\//g," ").replace(/\-/g," ").replace(/\./g," ").split(" ");for(de=["","",""],ye=0;ye<Fe.length;ye++)ye<de.length&&(Fe[ye]=parseInt(Fe[ye],10),Fe[ye]&&(Oe[ye]=!Oe[ye]||Oe[ye]<Fe[ye]?Fe[ye]:Oe[ye],typeof Se[ye]<"u"?Se[ye]!==Fe[ye]&&(Se[ye]=!1):Se[ye]=Fe[ye],31<Fe[ye]?de[ye]=100>Fe[ye]?"YY":"YYYY":12<Fe[ye]&&31>=Fe[ye]?(de[ye]="dd",me=!0):de[ye].length||(de[ye]="mm")))}if(me){for(ye=0;ye<Se.length;ye++)Se[ye]!==!1?12<Oe[ye]&&de[ye]!=="YY"&&de[ye]!=="YYYY"&&(de[ye]="YY"):12<Oe[ye]&&de[ye]==="mm"&&(de[ye]="dd");return de.length===3&&de[1]==="dd"&&de[2]==="dd"&&(de[2]="YY"),Y=de.join("/"),(F.dateFormats||N.dateFormats)[Y]?Y:(y("deduceDateFailed"),"YYYY/mm/dd")}return"YYYY/mm/dd"}var N=this,F=I||this.options,P=F.csv;I=typeof F.startRow<"u"&&F.startRow?F.startRow:0;var B=F.endRow||Number.MAX_VALUE,O=typeof F.startColumn<"u"&&F.startColumn?F.startColumn:0,v=F.endColumn||Number.MAX_VALUE,A=0,R=[],U={",":0,";":0,"	":0},q=this.columns=[];if(P&&F.beforeParse&&(P=F.beforeParse.call(this,P)),P){if(P=P.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(F.lineDelimiter||`
`),(!I||0>I)&&(I=0),(!B||B>=P.length)&&(B=P.length-1),F.itemDelimiter)var Q=F.itemDelimiter;else Q=null,Q=C(P);var ee=0;for(A=I;A<=B;A++)P[A][0]==="#"?ee++:M(P[A],A-I-ee);F.columnTypes&&F.columnTypes.length!==0||!R.length||!R[0].length||R[0][1]!=="date"||F.dateFormat||(F.dateFormat=k(q[0])),this.dataFound()}return q},T.prototype.parseTable=function(){var I=this.options,M=I.table,C=this.columns||[],k=I.startRow||0,N=I.endRow||Number.MAX_VALUE,F=I.startColumn||0,P=I.endColumn||Number.MAX_VALUE;return M&&(typeof M=="string"&&(M=u.getElementById(M)),[].forEach.call(M.getElementsByTagName("tr"),function(B,O){O>=k&&O<=N&&[].forEach.call(B.children,function(v,A){var R=C[A-F],U=1;if((v.tagName==="TD"||v.tagName==="TH")&&A>=F&&A<=P)for(C[A-F]||(C[A-F]=[]),C[A-F][O-k]=v.innerHTML;O-k>=U&&R[O-k-U]===void 0;)R[O-k-U]=null,U++})}),this.dataFound()),C},T.prototype.fetchLiveData=function(){function I(O){function v(A,R,U){function q(){F&&C.liveDataURL===A&&(M.liveDataTimeout=setTimeout(I,P))}return!A||!/^(http|\/|\.\/|\.\.\/)/.test(A)?(A&&k.error&&k.error("Invalid URL"),!1):(O&&(clearTimeout(M.liveDataTimeout),C.liveDataURL=A),c({url:A,dataType:U||"json",success:function(Q){C&&C.series&&R(Q),q()},error:function(Q,ee){return 3>++N&&q(),k.error&&k.error(ee,Q)}}),!0)}v(B.csvURL,function(A){C.update({data:{csv:A}})},"text")||v(B.rowsURL,function(A){C.update({data:{rows:A}})})||v(B.columnsURL,function(A){C.update({data:{columns:A}})})}var M=this,C=this.chart,k=this.options,N=0,F=k.enablePolling,P=1e3*(k.dataRefreshRate||2),B=b(k);return this.hasURLOption(k)?(1e3>P&&(P=1e3),delete k.csvURL,delete k.rowsURL,delete k.columnsURL,I(!0),this.hasURLOption(k)):!1},T.prototype.parseGoogleSpreadsheet=function(){function I(B){var O=["https://sheets.googleapis.com/v4/spreadsheets",k,"values",P(),"?alt=json&majorDimension=COLUMNS&valueRenderOption=UNFORMATTED_VALUE&dateTimeRenderOption=FORMATTED_STRING&key="+C.googleAPIKey].join("/");c({url:O,dataType:"json",success:function(v){B(v),C.enablePolling&&setTimeout(function(){I(B)},F)},error:function(v,A){return C.error&&C.error(A,v)}})}var M=this,C=this.options,k=C.googleSpreadsheetKey,N=this.chart,F=Math.max(1e3*(C.dataRefreshRate||2),4e3),P=function(){if(C.googleSpreadsheetRange)return C.googleSpreadsheetRange;var B=("ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C.startColumn||0)||"A")+((C.startRow||0)+1),O="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E(C.endColumn,-1))||"ZZ";return d(C.endRow)&&(O+=C.endRow+1),B+":"+O};return k&&(delete C.googleSpreadsheetKey,I(function(B){if(B=B.values,!B||B.length===0)return!1;var O=B.reduce(function(v,A){return Math.max(v,A.length)},0);B.forEach(function(v){for(var A=0;A<O;A++)typeof v[A]>"u"&&(v[A]=null)}),N&&N.series?N.update({data:{columns:B}}):(M.columns=B,M.dataFound())})),!1},T.prototype.trim=function(I,M){return typeof I=="string"&&(I=I.replace(/^\s+|\s+$/g,""),M&&/^[0-9\s]+$/.test(I)&&(I=I.replace(/\s/g,"")),this.decimalRegex&&(I=I.replace(this.decimalRegex,"$1.$2"))),I},T.prototype.parseTypes=function(){for(var I=this.columns,M=I.length;M--;)this.parseColumn(I[M],M)},T.prototype.parseColumn=function(I,M){var C=this.rawColumns,k=this.columns,N=I.length,F=this.firstRowAsNames,P=this.valueCount.xColumns.indexOf(M)!==-1,B,O=[],v=this.chartOptions,A,R=(this.options.columnTypes||[])[M];for(v=P&&(v&&v.xAxis&&x(v.xAxis)[0].type==="category"||R==="string"),C[M]||(C[M]=[]);N--;){var U=O[N]||I[N],q=this.trim(U),Q=this.trim(U,!0),ee=parseFloat(Q);typeof C[M][N]>"u"&&(C[M][N]=q),v||N===0&&F?I[N]=""+q:+Q===ee?(I[N]=ee,31536e6<ee&&R!=="float"?I.isDatetime=!0:I.isNumeric=!0,typeof I[N+1]<"u"&&(A=ee>I[N+1])):(q&&q.length&&(B=this.parseDate(U)),P&&g(B)&&R!=="float"?(O[N]=U,I[N]=B,I.isDatetime=!0,typeof I[N+1]<"u"&&(U=B>I[N+1],U!==A&&typeof A<"u"&&(this.alternativeFormat?(this.dateFormat=this.alternativeFormat,N=I.length,this.alternativeFormat=this.dateFormats[this.dateFormat].alternative):I.unsorted=!0),A=U)):(I[N]=q===""?null:q,N!==0&&(I.isDatetime||I.isNumeric)&&(I.mixed=!0)))}if(P&&I.mixed&&(k[M]=C[M]),P&&A&&this.options.sort)for(M=0;M<k.length;M++)k[M].reverse(),F&&k[M].unshift(k[M].pop())},T.prototype.parseDate=function(I){var M=this.options.parseDate,C,k=this.options.dateFormat||this.dateFormat,N;if(M)var F=M(I);else if(typeof I=="string"){if(k)(M=this.dateFormats[k])||(M=this.dateFormats["YYYY/mm/dd"]),(N=I.match(M.regex))&&(F=M.parser(N));else for(C in this.dateFormats)if(M=this.dateFormats[C],N=I.match(M.regex)){this.dateFormat=C,this.alternativeFormat=M.alternative,F=M.parser(N);break}N||(I.match(/:.+(GMT|UTC|[Z+-])/)&&(I=I.replace(/\s*(?:GMT|UTC)?([+-])(\d\d)(\d\d)$/,"$1$2:$3").replace(/(?:\s+|GMT|UTC)([+-])/,"$1").replace(/(\d)\s*(?:GMT|UTC|Z)$/,"$1+00:00")),N=Date.parse(I),typeof N=="object"&&N!==null&&N.getTime?F=N.getTime()-6e4*N.getTimezoneOffset():g(N)&&(F=N-6e4*new Date(N).getTimezoneOffset()))}return F},T.prototype.rowsToColumns=function(I){var M,C;if(I){var k=[],N=I.length;for(M=0;M<N;M++){var F=I[M].length;for(C=0;C<F;C++)k[C]||(k[C]=[]),k[C][M]=I[M][C]}}return k},T.prototype.getData=function(){if(this.columns)return this.rowsToColumns(this.columns).slice(1)},T.prototype.parsed=function(){if(this.options.parsed)return this.options.parsed.call(this,this.columns)},T.prototype.getFreeIndexes=function(I,M){var C,k=[],N=[];for(C=0;C<I;C+=1)k.push(!0);for(I=0;I<M.length;I+=1){var F=M[I].getReferencedColumnIndexes();for(C=0;C<F.length;C+=1)k[F[C]]=!1}for(C=0;C<k.length;C+=1)k[C]&&N.push(C);return N},T.prototype.complete=function(){var I=this.columns,M,C=this.options,k,N,F=[];if(C.complete||C.afterComplete){if(this.firstRowAsNames)for(k=0;k<I.length;k++){var P=I[k];d(P.name)||(P.name=E(P.shift(),"").toString())}P=[];var B=this.getFreeIndexes(I.length,this.valueCount.seriesBuilders);for(k=0;k<this.valueCount.seriesBuilders.length;k++){var O=this.valueCount.seriesBuilders[k];O.populateColumns(B)&&F.push(O)}for(;0<B.length;){for(O=new w,O.addColumnReader(0,"x"),k=B.indexOf(0),k!==-1&&B.splice(k,1),k=0;k<this.valueCount.global;k++)O.addColumnReader(void 0,this.valueCount.globalPointArrayMap[k]);O.populateColumns(B)&&F.push(O)}if(0<F.length&&0<F[0].readers.length&&(O=I[F[0].readers[0].columnIndex],typeof O<"u"&&(O.isDatetime?M="datetime":O.isNumeric||(M="category"))),M==="category")for(k=0;k<F.length;k++)for(O=F[k],B=0;B<O.readers.length;B++)O.readers[B].configName==="x"&&(O.readers[B].configName="name");for(k=0;k<F.length;k++){for(O=F[k],B=[],N=0;N<I[0].length;N++)B[N]=O.read(I,N);P[k]={data:B},O.name&&(P[k].name=O.name),M==="category"&&(P[k].turboThreshold=0)}I={series:P},M&&(I.xAxis={type:M},M==="category"&&(I.xAxis.uniqueNames=!1)),C.complete&&C.complete(I),C.afterComplete&&C.afterComplete(I)}},T.prototype.update=function(I,M){var C=this.chart;I&&(I.afterComplete=function(k){k&&(k.xAxis&&C.xAxis[0]&&k.xAxis.type===C.xAxis[0].options.type&&delete k.xAxis,C.update(k,M,!0))},b(!0,C.options.data,I),this.init(C.options.data))},T}(),i.data=function(T,I,M){return new i.Data(T,I,M)},s(n,"init",function(T){var I=this,M=T.args[0]||{},C=T.args[1];M&&M.data&&!I.hasDataDef&&(I.hasDataDef=!0,I.data=new i.Data(m(M.data,{afterComplete:function(k){var N;if(Object.hasOwnProperty.call(M,"series"))if(typeof M.series=="object")for(N=Math.max(M.series.length,k&&k.series?k.series.length:0);N--;){var F=M.series[N]||{};M.series[N]=b(F,k&&k.series?k.series[N]:{})}else delete M.series;M=b(k,M),I.init(M,C)}}),M,I),T.preventDefault())});var w=function(){function T(){this.readers=[],this.pointIsArray=!0,this.name=void 0}return T.prototype.populateColumns=function(I){var M=!0;return this.readers.forEach(function(C){typeof C.columnIndex>"u"&&(C.columnIndex=I.shift())}),this.readers.forEach(function(C){typeof C.columnIndex>"u"&&(M=!1)}),M},T.prototype.read=function(I,M){var C=this.pointIsArray,k=C?[]:{};if(this.readers.forEach(function(F){var P=I[F.columnIndex][M];C?k.push(P):0<F.configName.indexOf(".")?o.prototype.setNestedProperty(k,P,F.configName):k[F.configName]=P}),typeof this.name>"u"&&2<=this.readers.length){var N=this.getReferencedColumnIndexes();2<=N.length&&(N.shift(),N.sort(function(F,P){return F-P}),this.name=I[N.shift()].name)}return k},T.prototype.addColumnReader=function(I,M){this.readers.push({columnIndex:I,configName:M}),M!=="x"&&M!=="y"&&typeof M<"u"&&(this.pointIsArray=!1)},T.prototype.getReferencedColumnIndexes=function(){var I,M=[];for(I=0;I<this.readers.length;I+=1){var C=this.readers[I];typeof C.columnIndex<"u"&&M.push(C.columnIndex)}return M},T.prototype.hasReader=function(I){var M;for(M=0;M<this.readers.length;M+=1){var C=this.readers[M];if(C.configName===I)return!0}},T}();return i.Data=l,i.Data}),r(t,"masters/modules/data.src.js",[t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Extensions/Data.js"]],function(n,i,s){n.ajax=i.ajax,n.getJSON=i.getJSON,n.post=i.post,n.Data=s,n.HttpUtilities=i})})})(jSe);var Ker=jSe.exports;const etr=Qg(Ker);var USe={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(n,i,s,o){n.hasOwnProperty(i)||(n[i]=o.apply(null,s))}t=t?t._modules:{},r(t,"Extensions/FullScreen.js",[t["Core/Chart/Chart.js"],t["Core/Globals.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Utilities.js"]],function(n,i,s,o){var a=o.addEvent;return o=function(){function l(u){this.chart=u,this.isOpen=!1,u=u.renderTo,this.browserProps||(typeof u.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:u.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:u.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:u.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}return l.prototype.close=function(){var u=this.chart,c=u.options.chart;this.isOpen&&this.browserProps&&u.container.ownerDocument instanceof Document&&u.container.ownerDocument[this.browserProps.exitFullscreen](),this.unbindFullscreenEvent&&(this.unbindFullscreenEvent=this.unbindFullscreenEvent()),u.setSize(this.origWidth,this.origHeight,!1),this.origHeight=this.origWidth=void 0,c.width=this.origWidthOption,c.height=this.origHeightOption,this.origHeightOption=this.origWidthOption=void 0,this.isOpen=!1,this.setButtonText()},l.prototype.open=function(){var u=this,c=u.chart,h=c.options.chart;if(h&&(u.origWidthOption=h.width,u.origHeightOption=h.height),u.origWidth=c.chartWidth,u.origHeight=c.chartHeight,u.browserProps){var d=a(c.container.ownerDocument,u.browserProps.fullscreenChange,function(){u.isOpen?(u.isOpen=!1,u.close()):(c.setSize(null,null,!1),u.isOpen=!0,u.setButtonText())}),m=a(c,"destroy",d);u.unbindFullscreenEvent=function(){d(),m()},(h=c.renderTo[u.browserProps.requestFullscreen]())&&h.catch(function(){alert("Full screen is not supported inside a frame.")})}},l.prototype.setButtonText=function(){var u=this.chart,c=u.exportDivElements,h=u.options.exporting,d=h&&h.buttons&&h.buttons.contextButton.menuItems;u=u.options.lang,h&&h.menuItemDefinitions&&u&&u.exitFullscreen&&u.viewFullscreen&&d&&c&&(c=c[d.indexOf("viewFullscreen")])&&s.setElementHTML(c,this.isOpen?u.exitFullscreen:h.menuItemDefinitions.viewFullscreen.text||u.viewFullscreen)},l.prototype.toggle=function(){this.isOpen?this.close():this.open()},l}(),i.Fullscreen=o,a(n,"beforeRender",function(){this.fullscreen=new i.Fullscreen(this)}),i.Fullscreen}),r(t,"Core/Chart/ChartNavigationComposition.js",[],function(){var n;return function(i){i.compose=function(o){return o.navigation||(o.navigation=new s(o)),o};var s=function(){function o(a){this.updates=[],this.chart=a}return o.prototype.addUpdate=function(a){this.chart.navigation.updates.push(a)},o.prototype.update=function(a,l){var u=this;this.updates.forEach(function(c){c.call(u.chart,a,l)})},o}();i.Additions=s}(n||(n={})),n}),r(t,"Extensions/Exporting/ExportingDefaults.js",[t["Core/Globals.js"]],function(n){return{exporting:{type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:"viewFullscreen printChart separator downloadPNG downloadJPEG downloadPDF downloadSVG".split(" ")}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){this.exportChart()}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{padding:5}},menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",color:"#333333",background:"none",fontSize:n.isTouchDevice?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"}}}}),r(t,"Extensions/Exporting/ExportingSymbols.js",[],function(){var n;return function(i){function s(l,u,c,h){return[["M",l,u+2.5],["L",l+c,u+2.5],["M",l,u+h/2+.5],["L",l+c,u+h/2+.5],["M",l,u+h-1.5],["L",l+c,u+h-1.5]]}function o(l,u,c,h){return l=h/3-2,h=[],h=h.concat(this.circle(c-l,u,l,l),this.circle(c-l,u+l+4,l,l),this.circle(c-l,u+2*(l+4),l,l))}var a=[];i.compose=function(l){a.indexOf(l)===-1&&(a.push(l),l=l.prototype.symbols,l.menu=s,l.menuball=o.bind(l))}}(n||(n={})),n}),r(t,"Core/HttpUtilities.js",[t["Core/Globals.js"],t["Core/Utilities.js"]],function(n,i){var s=n.doc,o=i.createElement,a=i.discardElement,l=i.merge,u=i.objectEach,c={ajax:function(h){var d=l(!0,{url:!1,type:"get",dataType:"json",success:!1,error:!1,data:!1,headers:{}},h);h={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"};var m=new XMLHttpRequest;if(!d.url)return!1;m.open(d.type.toUpperCase(),d.url,!0),d.headers["Content-Type"]||m.setRequestHeader("Content-Type",h[d.dataType]||h.text),u(d.headers,function(y,g){m.setRequestHeader(g,y)}),m.onreadystatechange=function(){if(m.readyState===4){if(m.status===200){var y=m.responseText;if(d.dataType==="json")try{y=JSON.parse(y)}catch(g){d.error&&d.error(m,g);return}return d.success&&d.success(y)}d.error&&d.error(m,m.responseText)}};try{d.data=JSON.stringify(d.data)}catch{}m.send(d.data||!0)},getJSON:function(h,d){c.ajax({url:h,success:d,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(h,d,m){var y=o("form",l({method:"post",action:h,enctype:"multipart/form-data"},m),{display:"none"},s.body);u(d,function(g,b){o("input",{type:"hidden",name:b,value:g},null,y)}),y.submit(),a(y)}};return c}),r(t,"Extensions/Exporting/Exporting.js",[t["Core/Renderer/HTML/AST.js"],t["Core/Chart/Chart.js"],t["Core/Chart/ChartNavigationComposition.js"],t["Core/DefaultOptions.js"],t["Extensions/Exporting/ExportingDefaults.js"],t["Extensions/Exporting/ExportingSymbols.js"],t["Core/Globals.js"],t["Core/HttpUtilities.js"],t["Core/Utilities.js"]],function(n,i,s,o,a,l,u,c,h){i=o.defaultOptions;var d=u.doc,m=u.win,y=h.addEvent,g=h.css,b=h.createElement,S=h.discardElement,E=h.extend,x=h.find,w=h.fireEvent,T=h.isObject,I=h.merge,M=h.objectEach,C=h.pick,k=h.removeEvent,N=h.uniqueKey,F;return function(P){function B(H){var z=this,L=z.renderer,G=I(z.options.navigation.buttonOptions,H),j=G.onclick,V=G.menuItems,$=G.symbolSize||12;if(z.btnCount||(z.btnCount=0),z.exportDivElements||(z.exportDivElements=[],z.exportSVGElements=[]),G.enabled!==!1&&G.theme){var J=G.theme,X=J.states,te=X&&X.hover;X=X&&X.select;var le;z.styledMode||(J.fill=C(J.fill,"#ffffff"),J.stroke=C(J.stroke,"none")),delete J.states,j?le=function(je){je&&je.stopPropagation(),j.call(z,je)}:V&&(le=function(je){je&&je.stopPropagation(),z.contextMenu(ve.menuClassName,V,ve.translateX,ve.translateY,ve.width,ve.height,ve),ve.setState(2)}),G.text&&G.symbol?J.paddingLeft=C(J.paddingLeft,30):G.text||E(J,{width:G.width,height:G.height,padding:0}),z.styledMode||(J["stroke-linecap"]="round",J.fill=C(J.fill,"#ffffff"),J.stroke=C(J.stroke,"none"));var ve=L.button(G.text,0,0,le,J,te,X).addClass(H.className).attr({title:C(z.options.lang[G._titleKey||G.titleKey],"")});if(ve.menuClassName=H.menuClassName||"highcharts-menu-"+z.btnCount++,G.symbol){var ke=L.symbol(G.symbol,G.symbolX-$/2,G.symbolY-$/2,$,$,{width:$,height:$}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(ve);z.styledMode||ke.attr({stroke:G.symbolStroke,fill:G.symbolFill,"stroke-width":G.symbolStrokeWidth||1})}ve.add(z.exportingGroup).align(E(G,{width:ve.width,x:C(G.x,z.buttonOffset)}),!0,"spacingBox"),z.buttonOffset+=(ve.width+G.buttonSpacing)*(G.align==="right"?-1:1),z.exportSVGElements.push(ve,ke)}}function O(){if(this.printReverseInfo){var H=this.printReverseInfo,z=H.childNodes,L=H.origDisplay;H=H.resetParams,this.moveContainers(this.renderTo),[].forEach.call(z,function(G,j){G.nodeType===1&&(G.style.display=L[j]||"")}),this.isPrinting=!1,H&&this.setSize.apply(this,H),delete this.printReverseInfo,K=void 0,w(this,"afterPrint")}}function v(){var H=d.body,z=this.options.exporting.printMaxWidth,L={childNodes:H.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,this.pointer.reset(null,0),w(this,"beforePrint"),z&&this.chartWidth>z&&(L.resetParams=[this.options.chart.width,void 0,!1],this.setSize(z,void 0,!1)),[].forEach.call(L.childNodes,function(G,j){G.nodeType===1&&(L.origDisplay[j]=G.style.display,G.style.display="none")}),this.moveContainers(H),this.printReverseInfo=L}function A(H){H.renderExporting(),y(H,"redraw",H.renderExporting),y(H,"destroy",H.destroyExport)}function R(H,z,L,G,j,V,$){var J=this,X=J.options.navigation,te=J.chartWidth,le=J.chartHeight,ve="cache-"+H,ke=Math.max(j,V),je=J[ve];if(!je){J.exportContextMenu=J[ve]=je=b("div",{className:H},{position:"absolute",zIndex:1e3,padding:ke+"px",pointerEvents:"auto"},J.fixedDiv||J.container);var yt=b("ul",{className:"highcharts-menu"},{listStyle:"none",margin:0,padding:0},je);J.styledMode||g(yt,E({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},X.menuStyle)),je.hideMenu=function(){g(je,{display:"none"}),$&&$.setState(0),J.openMenu=!1,g(J.renderTo,{overflow:"hidden"}),g(J.container,{overflow:"hidden"}),h.clearTimeout(je.hideTimer),w(J,"exportMenuHidden")},J.exportEvents.push(y(je,"mouseleave",function(){je.hideTimer=m.setTimeout(je.hideMenu,500)}),y(je,"mouseenter",function(){h.clearTimeout(je.hideTimer)}),y(d,"mouseup",function(ft){J.pointer.inClass(ft.target,H)||je.hideMenu()}),y(je,"click",function(){J.openMenu&&je.hideMenu()})),z.forEach(function(ft){if(typeof ft=="string"&&(ft=J.options.exporting.menuItemDefinitions[ft]),T(ft,!0)){var Ot=void 0;ft.separator?Ot=b("hr",void 0,void 0,yt):(ft.textKey==="viewData"&&J.isDataTableVisible&&(ft.textKey="hideData"),Ot=b("li",{className:"highcharts-menu-item",onclick:function(ct){ct&&ct.stopPropagation(),je.hideMenu(),ft.onclick&&ft.onclick.apply(J,arguments)}},void 0,yt),n.setElementHTML(Ot,ft.text||J.options.lang[ft.textKey]),J.styledMode||(Ot.onmouseover=function(){g(this,X.menuItemHoverStyle)},Ot.onmouseout=function(){g(this,X.menuItemStyle)},g(Ot,E({cursor:"pointer"},X.menuItemStyle)))),J.exportDivElements.push(Ot)}}),J.exportDivElements.push(yt,je),J.exportMenuWidth=je.offsetWidth,J.exportMenuHeight=je.offsetHeight}z={display:"block"},L+J.exportMenuWidth>te?z.right=te-L-j-ke+"px":z.left=L-ke+"px",G+V+J.exportMenuHeight>le&&$.alignOptions.verticalAlign!=="top"?z.bottom=le-G-ke+"px":z.top=G+V-ke+"px",g(je,z),g(J.renderTo,{overflow:""}),g(J.container,{overflow:""}),J.openMenu=!0,w(J,"exportMenuShown")}function U(H){var z=H?H.target:this,L=z.exportSVGElements,G=z.exportDivElements;H=z.exportEvents;var j;L&&(L.forEach(function(V,$){V&&(V.onclick=V.ontouchstart=null,j="cache-"+V.menuClassName,z[j]&&delete z[j],L[$]=V.destroy())}),L.length=0),z.exportingGroup&&(z.exportingGroup.destroy(),delete z.exportingGroup),G&&(G.forEach(function(V,$){V&&(h.clearTimeout(V.hideTimer),k(V,"mouseleave"),G[$]=V.onmouseout=V.onmouseover=V.ontouchstart=V.onclick=null,S(V))}),G.length=0),H&&(H.forEach(function(V){V()}),H.length=0)}function q(H,z){z=this.getSVGForExport(H,z),H=I(this.options.exporting,H),c.post(H.url,{filename:H.filename?H.filename.replace(/\//g,"-"):this.getFilename(),type:H.type,width:H.width||0,scale:H.scale,svg:z},H.formAttributes)}function Q(){return this.styledMode&&this.inlineStyles(),this.container.innerHTML}function ee(){var H=this.userOptions.title&&this.userOptions.title.text,z=this.options.exporting.filename;return z?z.replace(/\//g,"-"):(typeof H=="string"&&(z=H.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!z||5>z.length)&&(z="chart"),z)}function Y(H){var z,L=I(this.options,H);L.plotOptions=I(this.userOptions.plotOptions,H&&H.plotOptions),L.time=I(this.userOptions.time,H&&H.time);var G=b("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},d.body),j=this.renderTo.style.width,V=this.renderTo.style.height;j=L.exporting.sourceWidth||L.chart.width||/px$/.test(j)&&parseInt(j,10)||(L.isGantt?800:600),V=L.exporting.sourceHeight||L.chart.height||/px$/.test(V)&&parseInt(V,10)||400,E(L.chart,{animation:!1,renderTo:G,forExport:!0,renderer:"SVGRenderer",width:j,height:V}),L.exporting.enabled=!1,delete L.data,L.series=[],this.series.forEach(function(X){z=I(X.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:X.visible}),z.isInternal||L.series.push(z)});var $={};this.axes.forEach(function(X){X.userOptions.internalKey||(X.userOptions.internalKey=N()),X.options.isInternal||($[X.coll]||($[X.coll]=!0,L[X.coll]=[]),L[X.coll].push(I(X.userOptions,{visible:X.visible})))});var J=new this.constructor(L,this.callback);return H&&["xAxis","yAxis","series"].forEach(function(X){var te={};H[X]&&(te[X]=H[X],J.update(te))}),this.axes.forEach(function(X){var te=x(J.axes,function(ke){return ke.options.internalKey===X.userOptions.internalKey}),le=X.getExtremes(),ve=le.userMin;le=le.userMax,te&&(typeof ve<"u"&&ve!==te.min||typeof le<"u"&&le!==te.max)&&te.setExtremes(ve,le,!0,!1)}),V=J.getChartHTML(),w(this,"getSVG",{chartCopy:J}),V=this.sanitizeSVG(V,L),L=null,J.destroy(),S(G),V}function ue(H,z){var L=this.options.exporting;return this.getSVG(I({chart:{borderRadius:0}},L.chartOptions,z,{exporting:{sourceWidth:H&&H.sourceWidth||L.sourceWidth,sourceHeight:H&&H.sourceHeight||L.sourceHeight}}))}function de(H){return H.replace(/([A-Z])/g,function(z,L){return"-"+L.toLowerCase()})}function ce(){function H(J){function X(ct,Te){if(le=ve=!1,L.length){for(ke=L.length;ke--&&!ve;)ve=L[ke].test(Te);le=!ve}for(Te==="transform"&&ct==="none"&&(le=!0),ke=z.length;ke--&&!le;)le=z[ke].test(Te)||typeof ct=="function";le||yt[Te]===ct&&J.nodeName!=="svg"||G[J.nodeName][Te]===ct||(re&&re.indexOf(Te)===-1?te+=de(Te)+":"+ct+";":ct&&J.setAttribute(de(Te),ct))}var te="",le,ve,ke;if(J.nodeType===1&&D.indexOf(J.nodeName)===-1){var je=m.getComputedStyle(J,null),yt=J.nodeName==="svg"?{}:m.getComputedStyle(J.parentNode,null);if(!G[J.nodeName]){j=$.getElementsByTagName("svg")[0];var ft=$.createElementNS(J.namespaceURI,J.nodeName);j.appendChild(ft),G[J.nodeName]=I(m.getComputedStyle(ft,null)),J.nodeName==="text"&&delete G.text.fill,j.removeChild(ft)}if(u.isFirefox||u.isMS)for(var Ot in je)X(je[Ot],Ot);else M(je,X);te&&(je=J.getAttribute("style"),J.setAttribute("style",(je?je+";":"")+te)),J.nodeName==="svg"&&J.setAttribute("stroke-width","1px"),J.nodeName!=="text"&&[].forEach.call(J.children||J.childNodes,H)}}var z=dt,L=P.inlineWhitelist,G={},j,V=d.createElement("iframe");g(V,{width:"1px",height:"1px",visibility:"hidden"}),d.body.appendChild(V);var $=V.contentWindow.document;$.open(),$.write('<svg xmlns="http://www.w3.org/2000/svg"></svg>'),$.close(),H(this.container.querySelector("svg")),j.parentNode.removeChild(j),V.parentNode.removeChild(V)}function me(H){(this.fixedDiv?[this.fixedDiv,this.scrollingContainer]:[this.container]).forEach(function(z){H.appendChild(z)})}function Se(){var H=this;H.exporting={update:function(z,L){H.isDirtyExporting=!0,I(!0,H.options.exporting,z),C(L,!0)&&H.redraw()}},s.compose(H).navigation.addUpdate(function(z,L){H.isDirtyExporting=!0,I(!0,H.options.navigation,z),C(L,!0)&&H.redraw()})}function Oe(){var H=this;H.isPrinting||(K=H,u.isSafari||H.beforePrint(),setTimeout(function(){m.focus(),m.print(),u.isSafari||setTimeout(function(){H.afterPrint()},1e3)},1))}function ye(){var H=this,z=H.options.exporting,L=z.buttons,G=H.isDirtyExporting||!H.exportSVGElements;H.buttonOffset=0,H.isDirtyExporting&&H.destroyExport(),G&&z.enabled!==!1&&(H.exportEvents=[],H.exportingGroup=H.exportingGroup||H.renderer.g("exporting-group").attr({zIndex:3}).add(),M(L,function(j){H.addButton(j)}),H.isDirtyExporting=!1)}function Fe(H,z){var L=H.indexOf("</svg>")+6,G=H.substr(L);return H=H.substr(0,L),z&&z.exporting&&z.exporting.allowHTML&&G&&(G='<foreignObject x="0" y="0" width="'+z.chart.width+'" height="'+z.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+G.replace(/(<(?:img|br).*?(?=>))>/g,"$1 />")+"</body></foreignObject>",H=H.replace("</svg>",G+"</svg>")),H=H.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;);?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (|NS[0-9]+:)href=/g," xlink:href=").replace(/\n/," ").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,""),this.ieSanitizeSVG&&(H=this.ieSanitizeSVG(H)),H}var ze=[],dt=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/],re="fill stroke strokeLinecap strokeLinejoin strokeWidth textAnchor x y".split(" ");P.inlineWhitelist=[];var D=["clipPath","defs","desc"],K;P.compose=function(H,z){l.compose(z),ze.indexOf(H)===-1&&(ze.push(H),z=H.prototype,z.afterPrint=O,z.exportChart=q,z.inlineStyles=ce,z.print=Oe,z.sanitizeSVG=Fe,z.getChartHTML=Q,z.getSVG=Y,z.getSVGForExport=ue,z.getFilename=ee,z.moveContainers=me,z.beforePrint=v,z.contextMenu=R,z.addButton=B,z.destroyExport=U,z.renderExporting=ye,z.callbacks.push(A),y(H,"init",Se),u.isSafari&&u.win.matchMedia("print").addListener(function(L){K&&(L.matches?K.beforePrint():K.afterPrint())}))}}(F||(F={})),i.exporting=I(a.exporting,i.exporting),i.lang=I(a.lang,i.lang),i.navigation=I(a.navigation,i.navigation),F}),r(t,"masters/modules/exporting.src.js",[t["Core/Globals.js"],t["Extensions/Exporting/Exporting.js"],t["Core/HttpUtilities.js"]],function(n,i,s){n.HttpUtilities=s,n.ajax=s.ajax,n.getJSON=s.getJSON,n.post=s.post,i.compose(n.Chart,n.Renderer)})})})(USe);var ttr=USe.exports;const rtr=Qg(ttr);var BSe={exports:{}};(function(e){(function(t){e.exports?(t.default=t,e.exports=t):t(typeof Highcharts<"u"?Highcharts:void 0)})(function(t){function r(n,i,s,o){n.hasOwnProperty(i)||(n[i]=o.apply(null,s))}t=t?t._modules:{},r(t,"Extensions/DownloadURL.js",[t["Core/Globals.js"]],function(n){var i=n.isSafari,s=n.win,o=s.document,a=s.URL||s.webkitURL||s,l=n.dataURLtoBlob=function(u){if((u=u.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/))&&3<u.length&&s.atob&&s.ArrayBuffer&&s.Uint8Array&&s.Blob&&a.createObjectURL){var c=s.atob(u[3]),h=new s.ArrayBuffer(c.length);h=new s.Uint8Array(h);for(var d=0;d<h.length;++d)h[d]=c.charCodeAt(d);return u=new s.Blob([h],{type:u[1]}),a.createObjectURL(u)}};return n=n.downloadURL=function(u,c){var h=s.navigator,d=o.createElement("a");if(typeof u=="string"||u instanceof String||!h.msSaveOrOpenBlob){if(u=""+u,h=/Edge\/\d+/.test(h.userAgent),(i&&typeof u=="string"&&u.indexOf("data:application/pdf")===0||h||2e6<u.length)&&(u=l(u)||"",!u))throw Error("Failed to convert to blob");if(typeof d.download<"u")d.href=u,d.download=c,o.body.appendChild(d),d.click(),o.body.removeChild(d);else try{var m=s.open(u,"chart");if(typeof m>"u"||m===null)throw Error("Failed to open window")}catch{s.location.href=u}}else h.msSaveOrOpenBlob(u,c)},{dataURLtoBlob:l,downloadURL:n}}),r(t,"Extensions/ExportData.js",[t["Core/Axis/Axis.js"],t["Core/Chart/Chart.js"],t["Core/Renderer/HTML/AST.js"],t["Core/Globals.js"],t["Core/DefaultOptions.js"],t["Core/Utilities.js"],t["Extensions/DownloadURL.js"]],function(n,i,s,o,a,l,u){function c(M,C){var k=m.navigator,N=-1<k.userAgent.indexOf("WebKit")&&0>k.userAgent.indexOf("Chrome"),F=m.URL||m.webkitURL||m;try{if(k.msSaveOrOpenBlob&&m.MSBlobBuilder){var P=new m.MSBlobBuilder;return P.append(M),P.getBlob("image/svg+xml")}if(!N)return F.createObjectURL(new m.Blob(["\uFEFF"+M],{type:C}))}catch{}}var h=o.doc,d=o.seriesTypes,m=o.win;o=a.getOptions,a=a.setOptions;var y=l.addEvent,g=l.defined,b=l.extend,S=l.find,E=l.fireEvent,x=l.isNumber,w=l.pick,T=u.downloadURL;a({exporting:{csv:{annotations:{itemDelimiter:"; ",join:!1},columnHeaderFormatter:null,dateFormat:"%Y-%m-%d %H:%M:%S",decimalPoint:null,itemDelimiter:null,lineDelimiter:`
`},showTable:!1,useMultiLevelHeaders:!0,useRowspanHeaders:!0},lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",exportData:{annotationHeader:"Annotations",categoryHeader:"Category",categoryDatetimeHeader:"DateTime"},viewData:"View data table",hideData:"Hide data table"}}),y(i,"render",function(){this.options&&this.options.exporting&&this.options.exporting.showTable&&!this.options.chart.forExport&&!this.dataTableDiv&&this.viewData()}),i.prototype.setUpKeyToAxis=function(){d.arearange&&(d.arearange.prototype.keyToAxis={low:"y",high:"y"}),d.gantt&&(d.gantt.prototype.keyToAxis={start:"x",end:"x"})},i.prototype.getDataRows=function(M){var C=this.hasParallelCoordinates,k=this.time,N=this.options.exporting&&this.options.exporting.csv||{},F=this.xAxis,P={},B=[],O=[],v=[],A,R=this.options.lang.exportData,U=R.categoryHeader,q=R.categoryDatetimeHeader,Q=function(ye,Fe,ze){if(N.columnHeaderFormatter){var dt=N.columnHeaderFormatter(ye,Fe,ze);if(dt!==!1)return dt}return ye?ye instanceof n?ye.options.title&&ye.options.title.text||(ye.dateTime?q:U):M?{columnTitle:1<ze?Fe:ye.name,topLevelColumnTitle:ye.name}:ye.name+(1<ze?" ("+Fe+")":""):U},ee=function(ye,Fe,ze){var dt={},re={};return Fe.forEach(function(D){var K=(ye.keyToAxis&&ye.keyToAxis[D]||D)+"Axis";K=x(ze)?ye.chart[K][ze]:ye[K],dt[D]=K&&K.categories||[],re[D]=K&&K.dateTime}),{categoryMap:dt,dateTimeValueAxisMap:re}},Y=function(ye,Fe){return ye.data.filter(function(ze){return typeof ze.y<"u"&&ze.name}).length&&Fe&&!Fe.categories&&!ye.keyToAxis?ye.pointArrayMap&&ye.pointArrayMap.filter(function(ze){return ze==="x"}).length?(ye.pointArrayMap.unshift("x"),ye.pointArrayMap):["x","y"]:ye.pointArrayMap||["y"]},ue=[],de=0;this.setUpKeyToAxis(),this.series.forEach(function(ye){var Fe=ye.xAxis,ze=ye.options.keys||Y(ye,Fe),dt=ze.length,re=!ye.requireSorting&&{},D=F.indexOf(Fe),K=ee(ye,ze),H;if(ye.options.includeInDataExport!==!1&&!ye.options.isInternal&&ye.visible!==!1){for(S(ue,function(L){return L[0]===D})||ue.push([D,de]),H=0;H<dt;)A=Q(ye,ze[H],ze.length),v.push(A.columnTitle||A),M&&O.push(A.topLevelColumnTitle||A),H++;var z={chart:ye.chart,autoIncrement:ye.autoIncrement,options:ye.options,pointArrayMap:ye.pointArrayMap};ye.options.data.forEach(function(L,G){C&&(K=ee(ye,ze,G));var j={series:z};ye.pointClass.prototype.applyOptions.apply(j,[L]),L=j.x;var V=ye.data[G]&&ye.data[G].name;for(H=0,(!Fe||ye.exportKey==="name"||!C&&Fe&&Fe.hasNames&&V)&&(L=V),re&&(re[L]&&(L+="|"+G),re[L]=!0),P[L]||(P[L]=[],P[L].xValues=[]),P[L].x=j.x,P[L].name=V,P[L].xValues[D]=j.x;H<dt;)G=ze[H],V=j[G],P[L][de+H]=w(K.categoryMap[G][V],K.dateTimeValueAxisMap[G]?k.dateFormat(N.dateFormat,V):null,V),H++}),de+=H}});for(ce in P)Object.hasOwnProperty.call(P,ce)&&B.push(P[ce]);var ce=M?[O,v]:[v];for(de=ue.length;de--;){var me=ue[de][0],Se=ue[de][1],Oe=F[me];B.sort(function(ye,Fe){return ye.xValues[me]-Fe.xValues[me]}),R=Q(Oe),ce[0].splice(Se,0,R),M&&ce[1]&&ce[1].splice(Se,0,R),B.forEach(function(ye){var Fe=ye.name;Oe&&!g(Fe)&&(Oe.dateTime?(ye.x instanceof Date&&(ye.x=ye.x.getTime()),Fe=k.dateFormat(N.dateFormat,ye.x)):Fe=Oe.categories?w(Oe.names[ye.x],Oe.categories[ye.x],ye.x):ye.x),ye.splice(Se,0,Fe)})}return ce=ce.concat(B),E(this,"exportData",{dataRows:ce}),ce},i.prototype.getCSV=function(M){var C="",k=this.getDataRows(),N=this.options.exporting.csv,F=w(N.decimalPoint,N.itemDelimiter!==","&&M?1.1.toLocaleString()[1]:"."),P=w(N.itemDelimiter,F===","?";":","),B=N.lineDelimiter;return k.forEach(function(O,v){for(var A,R=O.length;R--;)A=O[R],typeof A=="string"&&(A='"'+A+'"'),typeof A=="number"&&F!=="."&&(A=A.toString().replace(".",F)),O[R]=A;C+=O.join(P),v<k.length-1&&(C+=B)}),C},i.prototype.getTable=function(M){var C=function(k){if(!k.tagName||k.tagName==="#text")return k.textContent||"";var N=k.attributes,F="<"+k.tagName;return N&&Object.keys(N).forEach(function(P){F+=" "+P+'="'+N[P]+'"'}),F+=">",F+=k.textContent||"",(k.children||[]).forEach(function(P){F+=C(P)}),F+="</"+k.tagName+">"};return M=this.getTableAST(M),C(M)},i.prototype.getTableAST=function(M){var C=0,k=[],N=this.options,F=M?1.1.toLocaleString()[1]:".",P=w(N.exporting.useMultiLevelHeaders,!0);M=this.getDataRows(P);var B=P?M.shift():null,O=M.shift(),v=function(q,Q,ee,Y){var ue=w(Y,"");return Q="text"+(Q?" "+Q:""),typeof ue=="number"?(ue=ue.toString(),F===","&&(ue=ue.replace(".",F)),Q="number"):Y||(Q="empty"),ee=b({class:Q},ee),{tagName:q,attributes:ee,textContent:ue}};N.exporting.tableCaption!==!1&&k.push({tagName:"caption",attributes:{class:"highcharts-table-caption"},textContent:w(N.exporting.tableCaption,N.title.text?N.title.text:"Chart")});for(var A=0,R=M.length;A<R;++A)M[A].length>C&&(C=M[A].length);k.push(function(q,Q,ee){var Y=[],ue=0;ee=ee||Q&&Q.length;var de=0,ce;if(ce=P&&q&&Q){e:if(ce=q.length,Q.length===ce){for(;ce--;)if(q[ce]!==Q[ce]){ce=!1;break e}ce=!0}else ce=!1;ce=!ce}if(ce){for(ce=[];ue<ee;++ue){var me=q[ue],Se=q[ue+1];me===Se?++de:de?(ce.push(v("th","highcharts-table-topheading",{scope:"col",colspan:de+1},me)),de=0):(me===Q[ue]?N.exporting.useRowspanHeaders?(Se=2,delete Q[ue]):(Se=1,Q[ue]=""):Se=1,me=v("th","highcharts-table-topheading",{scope:"col"},me),1<Se&&me.attributes&&(me.attributes.valign="top",me.attributes.rowspan=Se),ce.push(me))}Y.push({tagName:"tr",children:ce})}if(Q){for(ce=[],ue=0,ee=Q.length;ue<ee;++ue)typeof Q[ue]<"u"&&ce.push(v("th",null,{scope:"col"},Q[ue]));Y.push({tagName:"tr",children:ce})}return{tagName:"thead",children:Y}}(B,O,Math.max(C,O.length)));var U=[];return M.forEach(function(q){for(var Q=[],ee=0;ee<C;ee++)Q.push(v(ee?"td":"th",null,ee?{}:{scope:"row"},q[ee]));U.push({tagName:"tr",children:Q})}),k.push({tagName:"tbody",children:U}),k={tree:{tagName:"table",id:"highcharts-data-table-"+this.index,children:k}},E(this,"aftergetTableAST",k),k.tree},i.prototype.downloadCSV=function(){var M=this.getCSV(!0);T(c(M,"text/csv")||"data:text/csv,\uFEFF"+encodeURIComponent(M),this.getFilename()+".csv")},i.prototype.downloadXLS=function(){var M='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";} .text{ mso-number-format:"@";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";T(c(M,"application/vnd.ms-excel")||"data:application/vnd.ms-excel;base64,"+m.btoa(unescape(encodeURIComponent(M))),this.getFilename()+".xls")},i.prototype.viewData=function(){this.toggleDataTable(!0)},i.prototype.hideData=function(){this.toggleDataTable(!1)},i.prototype.toggleDataTable=function(M){(M=w(M,!this.isDataTableVisible))&&!this.dataTableDiv&&(this.dataTableDiv=h.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv&&(this.dataTableDiv.style.display=M?"block":"none",M&&(this.dataTableDiv.innerHTML=s.emptyHTML,new s([this.getTableAST()]).addToDOM(this.dataTableDiv),E(this,"afterViewData",this.dataTableDiv))),this.isDataTableVisible=M,M=this.exportDivElements;var C=this.options.exporting,k=C&&C.buttons&&C.buttons.contextButton.menuItems;C=this.options.lang,I&&I.menuItemDefinitions&&C&&C.viewData&&C.hideData&&k&&M&&(M=M[k.indexOf("viewData")])&&s.setElementHTML(M,this.isDataTableVisible?C.hideData:C.viewData)};var I=o().exporting;I&&(b(I.menuItemDefinitions,{downloadCSV:{textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},downloadXLS:{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},viewData:{textKey:"viewData",onclick:function(){this.toggleDataTable()}}}),I.buttons&&I.buttons.contextButton.menuItems.push("separator","downloadCSV","downloadXLS","viewData")),d.map&&(d.map.prototype.exportKey="name"),d.mapbubble&&(d.mapbubble.prototype.exportKey="name"),d.treemap&&(d.treemap.prototype.exportKey="name")}),r(t,"masters/modules/export-data.src.js",[],function(){})})})(BSe);var ntr=BSe.exports;const itr=Qg(ntr),str=["aria-label"],otr=Jt({__name:"chart",props:{config:{type:Object,required:!0},configFileStructure:{type:Object}},emits:["loaded"],setup(e,{emit:t}){etr(HA),rtr(HA),itr(HA);const r=t,n=e,{t:i}=Lie(),s=Ye(),o=Ak(),a=Ye({}),l=Ye(""),u=Ye(!0),c=["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"],h=Wi("$papa");ns(()=>{s.value.clientWidth<=640||c.push("viewData");const S={viewFullscreen:i("chart.viewFullscreen"),printChart:i("chart.printChart"),downloadPNG:i("chart.downloadPNG"),downloadJPEG:i("chart.downloadJPEG"),downloadPDF:i("chart.downloadPDF"),downloadSVG:i("chart.downloadSVG"),downloadCSV:i("chart.downloadCSV"),downloadXLS:i("chart.downloadXLS"),viewData:i("chart.viewData")};if((o&&o.params.lang)==="fr"&&HA.setOptions({lang:S}),n.config.config)a.value=n.config.config,l.value=a.value.title.text,u.value=!1,a.value.exporting?a.value.exporting.buttons={contextButton:{menuItems:c}}:a.value.exporting={buttons:{contextButton:{menuItems:c}}};else if(n.config.src){const E=n.config.src.split(".").pop(),x=`${n.config.src.substring(n.config.src.indexOf("/")+1)}`;if(E==="json")if(n.configFileStructure){const w=n.configFileStructure.zip.file(x);w&&w.async("string").then(T=>{const I=JSON.parse(T);d(I)})}else fetch(n.config.src).then(w=>{w.json().then(T=>{d(T)},T=>{console.error(`Error fetching chart JSON file: ${T}`)})});else if(E==="csv")if(n.configFileStructure){const w=n.configFileStructure.zip.file(x);w&&w.async("blob").then(T=>{m(T)})}else fetch(n.config.src).then(w=>{m(w)})}});const d=b=>{a.value=b,l.value=a.value.title.text,u.value=!1,a.value.exporting?a.value.exporting.buttons={contextButton:{menuItems:c}}:a.value.exporting={buttons:{contextButton:{menuItems:c}}},r("loaded",a.value)},m=b=>{const S=n.config.options,E={buttons:{contextButton:{menuItems:c}},enabled:S?.export!==void 0?S?.export:!0},x={chart:{renderTo:"dv-chart-container",type:S?.type,...S?.height&&s.value.clientHeight>=S.height&&{height:S.height},...S?.width&&s.value.clientWidth>=S.width&&{width:S.width}},...S?.title&&{title:{text:S?.title}},...S?.subtitle&&{subtitle:{text:S?.subtitle}},...S?.colours&&{colors:S?.colours},exporting:E,credits:{enabled:S?.credits!==void 0?S?.credits:!1}};h.parse(b.url?b.url:b,{header:S?.type!=="pie",dynamicTyping:!0,download:!!b.url,complete:w=>{S?.type==="pie"?y(w.data,x):g(w.meta.fields,w.data,x)}}),u.value=!1},y=(b,S)=>{let E={name:"",data:[]};E.name=b[0][0];const x=b[0][1];b.slice(1).forEach(T=>{E.data.push({name:T[0],y:parseFloat(T[1])})});const w={pie:{name:"",allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}};a.value={...S,plotOptions:w,series:E,yAxis:{title:{text:x}}},r("loaded",a.value)},g=(b,S,E)=>{const x=n.config.options,w=b.shift(),T={title:{text:x?.xAxisLabel?x?.xAxisLabel:""},categories:S.map(M=>M[w])};let I=[];b.forEach(M=>{const C=S.map(k=>k[M]);I.push({name:M,data:C})}),a.value={...E,series:I,xAxis:T,yAxis:{title:{text:x?.yAxisLabel?x?.yAxisLabel:""}}},r("loaded",a.value)};return(b,S)=>{const E=ET("charts");return Ie(),Ne("div",{ref_key:"el",ref:s,class:"dv-chart justify-center flex align-middle","dv-config":"config"},[u.value?sn("",!0):(Ie(),Ne("div",{key:0,class:"dv-chart-container items-stretch h-full w-full",role:"region","aria-hidden":"false","aria-label":l.value},[Zi(E,{options:a.value},null,8,["options"])],8,str))],512)}}}),atr={class:"chart self-center mb-8 mx-auto bg-gray-200_"},ltr=Jt({__name:"chart-panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},background:{type:Boolean}},setup(e){return(t,r)=>(Ie(),Ne("div",atr,[Zi(otr,{config:e.config,configFileStructure:e.configFileStructure},null,8,["config","configFileStructure"]),Ce("div",{class:Jr(["text-center w-full p-2 text-sm",{"has-background":e.background}])},Vr(e.config.caption),3)]))}}),utr=ml(ltr,[["__scopeId","data-v-c644de17"]]),ctr=["id"],htr=["innerHTML"],ptr={key:0,class:"return-button-container"},dtr=["alt"],ftr=Jt({__name:"dynamic-panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},slideIdx:{type:Number},background:{type:Boolean}},setup(e){const t=EEe(()=>Me(()=>import("./panel-CSvhyPPE.js"),__vite__mapDeps([296,1,2]),import.meta.url)),r=e,n=Ye(),i=Ye(),s=r.config.children[0],o=Ye(s.panel),a=Ye(s.id),l=Ye(!1),u=new Kg({html:!0}),c=Ik()?.vnode.key;ns(()=>{document.querySelectorAll(".storyramp-app a:not([target])").forEach(y=>y.target="_blank"),h(),l.value=window.innerWidth<=640,window.addEventListener("resize",()=>{l.value=window.innerWidth<=640})});const h=()=>{Array.from(n.value.querySelectorAll("a[panel]")).forEach(g=>{const b=g.attributes.getNamedItem("panel")?.value;g.style.setProperty("text-decoration-style","dotted"),g.style.setProperty("text-underline-offset","3px"),g.href="javascript:;",g.target="_self",g.onclick=()=>{const S=r.config.children.find(E=>b==E.id);S&&(o.value={type:"loading"},setTimeout(()=>{o.value=S.panel,a.value=S.id},10),setTimeout(()=>{const E=i.value?.$el.getBoundingClientRect().top;window.scrollTo({top:window.scrollY+E-d(),left:0,behavior:"smooth"})},50))}})},d=()=>{const y=i.value?.$el.closest(".toc-horizontal"),g=document.getElementById("h-navbar")?.clientHeight,b=document.getElementById("story-header").clientHeight;return y&&g?b+g:b},m=()=>{o.value={type:"loading"},setTimeout(()=>{o.value=s.panel,a.value=s.id},10),setTimeout(()=>{const y=i.value?.$el.getBoundingClientRect().top;window.scrollTo({top:window.scrollY+y-d(),left:0,behavior:"smooth"})},50)};return(y,g)=>(Ie(),Ne("div",{ref_key:"el",ref:n,id:yi(c),class:Jr(["story-slide w-full h-full flex flex-col",e.config.reversed?"sm:flex-row-reverse":"sm:flex-row"])},[Zi(Fk,{class:Jr(["dynamic-content-slide order-2 sm:order-1 prose max-w-none min-w-0 mb-5 mx-1 py-5",{"has-background":e.background,"flex-1":!e.config.contentWidth}]),style:tr({color:e.config.textColour??"#000",width:l.value?void 0:`${e.config.contentWidth}`})},{default:mi(()=>[(Ie(),Ss(sB(e.config.titleTag||"h2"),{class:"px-10 mb-0 chapter-title top-20",style:tr(a.value!==yi(s).id?"margin-top: 0px;":"")},{default:mi(()=>[eg(Vr(e.config.title),1)]),_:1},8,["style"])),Ce("div",{class:"px-10 md-content",innerHTML:yi(u).render(e.config.content)},null,8,htr)]),_:1},8,["class","style"]),Ce("div",{class:Jr(o.value.type!=="text"?"sticky top-0 sm:self-start flex-2 order-1 sm:order-2 z-40 dynamic-content-media sm:flex-col min-w-0":"flex-2 order-2 sm:order-1 dynamic-content-text")},[a.value!==yi(s).id&&!e.config.hideReturn?(Ie(),Ne("span",ptr,[Ce("button",{class:Jr(["py-1 text-base absolute",e.config.reversed?"return-button-reversed":"return-button right-0"]),onClick:m},[Ce("img",{style:{display:"inline",margin:"0px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAB4UlEQVRIie3WP08WQRAG8J+2SolRQaLyKvR+BTsVaQnfwD9YCH4PS6I2ViAS1GhMKLWESkzUmBAT7azECoS8Fjcvqxe52zuMseBJNpebe2ae2dmdveUA/wiHGnCHcBWXcBqDYf+CT3iOp/j8t5IbwCy20a0ZO3gUie0L4/geQTcxhwmM4EiMkbDNB6eLDYy1Fb2lmEEXj3E2w2cYi9Lsp5qKjofjNm43dcZ0+O9oMPNBqbxtRHuYkcp+MsfhgVTe/WIpYt2rIw4pyrtp7zU9hlW8zhDuRKxtqf3+iJuR4VyF6FpwVjKEKdqri+tVpJdBmqgRXYv3HEyGz4sq0scgnSvZ+/Emvr3D8UxRij7v4n0VaSNIfSX7qvpTqzfKa98n7e5dHG6QeS66bZw+hOP5kr1c6hMNYo7+4reL8ozX43mhZP+Ki3gbgZblb65erPUq0o3Ibn6P723aaSH416pIp6QDZLhCfAWvMkQ72MIPNQcI3I8MFzMC1+FJxJrNIQ9IbTW9D9E7EeObBptxTPqtzbQU7flfaeo8JV0ElhTrVYeOVN4dxdnfCmNS2bcUB/6koqWOxhgN20JweuW93Fa0h37cVezMnMveQxlr2uR6Oyhdb8/4/Xq7rvj7PIv3A/w/+Am/TqGFCMnpPgAAAABJRU5ErkJggg==",alt:y.$t("dynamic.back")},null,8,dtr),eg(" "+Vr(y.$t("dynamic.back")),1)],2)])):sn("",!0),Zi(yi(t),{class:"flex-2",config:o.value,configFileStructure:e.configFileStructure,slideIdx:e.slideIdx,dynamicIdx:a.value,ratio:!1,background:e.background,ref_key:"content",ref:i},null,8,["config","configFileStructure","slideIdx","dynamicIdx","background"])],2)],10,ctr))}}),mtr=ml(ftr,[["__scopeId","data-v-2debc311"]]);function WA(){}function uie(){return typeof WeakMap<"u"?new WeakMap:ytr()}function ytr(){return{add:WA,delete:WA,get:WA,set:WA,has:function(e){return!1}}}var gtr=Object.prototype.hasOwnProperty,iB=function(e,t){return gtr.call(e,t)};function SD(e,t){for(var r in t)iB(t,r)&&(e[r]=t[r]);return e}var vtr=/^[ \t]*(?:\r\n|\r|\n)/,btr=/(?:\r\n|\r|\n)[ \t]*$/,wtr=/^(?:[\r\n]|$)/,_tr=/(?:\r\n|\r|\n)([ \t]*)(?:[^ \t\r\n]|$)/,xtr=/^[ \t]*[\r\n][ \t\r\n]*$/;function cie(e,t,r){var n=0,i=e[0].match(_tr);i&&(n=i[1].length);var s="(\\r\\n|\\r|\\n).{0,"+n+"}",o=new RegExp(s,"g");t&&(e=e.slice(1));var a=r.newline,l=r.trimLeadingNewline,u=r.trimTrailingNewline,c=typeof a=="string",h=e.length,d=e.map(function(m,y){return m=m.replace(o,"$1"),y===0&&l&&(m=m.replace(vtr,"")),y===h-1&&u&&(m=m.replace(btr,"")),c&&(m=m.replace(/\r\n|\n|\r/g,function(g){return a})),m});return d}function Str(e,t){for(var r="",n=0,i=e.length;n<i;n++)r+=e[n],n<i-1&&(r+=t[n]);return r}function Etr(e){return iB(e,"raw")&&iB(e,"length")}function VSe(e){var t=uie(),r=uie();function n(s){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(Etr(s)){var l=s,u=(o[0]===n||o[0]===Kf)&&xtr.test(l[0])&&wtr.test(l[1]),c=u?r:t,h=c.get(l);if(h||(h=cie(l,u,e),c.set(l,h)),o.length===0)return h[0];var d=Str(h,u?o.slice(1):o);return d}else return VSe(SD(SD({},e),s||{}))}var i=SD(n,{string:function(s){return cie([s],!1,e)[0]}});return i}var Kf=VSe({trimLeadingNewline:!0,trimTrailingNewline:!0});if(typeof module<"u")try{module.exports=Kf,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.default=Kf,Kf.outdent=Kf}catch{}function Ttr(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}const GSe={size:{type:[Number,String],default:"1em"},color:String};let hie=!1;function zSe(e){if(!hie){const t=Kf`
			.vue-spinner {
				vertical-align: middle;
			}
		`;Ttr(t),hie=!0}return{cSize:Mr(()=>e.size),classes:Mr(()=>"vue-spinner"),style:Mr(()=>({color:e.color}))}}var pie=[],I2=[];function Itr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=pie.indexOf(s);o===-1&&(o=pie.push(s)-1,I2[o]={}),r=I2[o]&&I2[o][n]?I2[o][n]:I2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Atr=`
.vue-spinner-mat {
	animation: vue-spinner-spin 2s linear infinite;
	transform-origin: center center;
}
.vue-spinner-mat .path {
	stroke-dasharray: 1, 200;
	stroke-dashoffset: 0;
	animation: vue-spinner-mat-dash 1.5s ease-in-out infinite;
}
@keyframes vue-spinner-spin {
0% {
		transform: rotate3d(0, 0, 1, 0deg);
}
25% {
		transform: rotate3d(0, 0, 1, 90deg);
}
50% {
		transform: rotate3d(0, 0, 1, 180deg);
}
75% {
		transform: rotate3d(0, 0, 1, 270deg);
}
100% {
		transform: rotate3d(0, 0, 1, 359deg);
}
}
@keyframes vue-spinner-mat-dash {
0% {
		stroke-dasharray: 1, 200;
		stroke-dashoffset: 0;
}
50% {
		stroke-dasharray: 89, 200;
		stroke-dashoffset: -35px;
}
100% {
		stroke-dasharray: 89, 200;
		stroke-dashoffset: -124px;
}
}
`;Itr(Atr,{});Jt({name:"VueSpinner",props:{...GSe,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:r,style:n}=zSe(e);return()=>pe("svg",{style:n.value,class:r.value+" vue-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[pe("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});pe("g",{transform:"matrix(1 0 0 -1 0 80)"},[pe("rect",{width:"10",height:"20",rx:"3"},[pe("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"15",width:"10",height:"80",rx:"3"},[pe("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"30",width:"10",height:"50",rx:"3"},[pe("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"45",width:"10",height:"30",rx:"3"},[pe("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"})])]);pe("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[pe("circle",{cx:"5",cy:"50",r:"5"},[pe("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"27",cy:"5",r:"5"},[pe("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"49",cy:"50",r:"5"},[pe("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])]);function Ui(e){const t={color:{type:String,default:"#000000"}},r={size:{type:[String,Number],default:e.size},margin:{type:String,default:e.margin},height:{type:[String,Number],default:e.height},width:{type:[String,Number],default:e.width},radius:{type:[String,Number],default:e.radius}},n={...t};for(const i of Object.keys(e))n[i]=r[i];return n}var $Se={exports:{}},Mtr=[{value:"#B0171F",name:"indian red"},{value:"#DC143C",css:!0,name:"crimson"},{value:"#FFB6C1",css:!0,name:"lightpink"},{value:"#FFAEB9",name:"lightpink 1"},{value:"#EEA2AD",name:"lightpink 2"},{value:"#CD8C95",name:"lightpink 3"},{value:"#8B5F65",name:"lightpink 4"},{value:"#FFC0CB",css:!0,name:"pink"},{value:"#FFB5C5",name:"pink 1"},{value:"#EEA9B8",name:"pink 2"},{value:"#CD919E",name:"pink 3"},{value:"#8B636C",name:"pink 4"},{value:"#DB7093",css:!0,name:"palevioletred"},{value:"#FF82AB",name:"palevioletred 1"},{value:"#EE799F",name:"palevioletred 2"},{value:"#CD6889",name:"palevioletred 3"},{value:"#8B475D",name:"palevioletred 4"},{value:"#FFF0F5",name:"lavenderblush 1"},{value:"#FFF0F5",css:!0,name:"lavenderblush"},{value:"#EEE0E5",name:"lavenderblush 2"},{value:"#CDC1C5",name:"lavenderblush 3"},{value:"#8B8386",name:"lavenderblush 4"},{value:"#FF3E96",name:"violetred 1"},{value:"#EE3A8C",name:"violetred 2"},{value:"#CD3278",name:"violetred 3"},{value:"#8B2252",name:"violetred 4"},{value:"#FF69B4",css:!0,name:"hotpink"},{value:"#FF6EB4",name:"hotpink 1"},{value:"#EE6AA7",name:"hotpink 2"},{value:"#CD6090",name:"hotpink 3"},{value:"#8B3A62",name:"hotpink 4"},{value:"#872657",name:"raspberry"},{value:"#FF1493",name:"deeppink 1"},{value:"#FF1493",css:!0,name:"deeppink"},{value:"#EE1289",name:"deeppink 2"},{value:"#CD1076",name:"deeppink 3"},{value:"#8B0A50",name:"deeppink 4"},{value:"#FF34B3",name:"maroon 1"},{value:"#EE30A7",name:"maroon 2"},{value:"#CD2990",name:"maroon 3"},{value:"#8B1C62",name:"maroon 4"},{value:"#C71585",css:!0,name:"mediumvioletred"},{value:"#D02090",name:"violetred"},{value:"#DA70D6",css:!0,name:"orchid"},{value:"#FF83FA",name:"orchid 1"},{value:"#EE7AE9",name:"orchid 2"},{value:"#CD69C9",name:"orchid 3"},{value:"#8B4789",name:"orchid 4"},{value:"#D8BFD8",css:!0,name:"thistle"},{value:"#FFE1FF",name:"thistle 1"},{value:"#EED2EE",name:"thistle 2"},{value:"#CDB5CD",name:"thistle 3"},{value:"#8B7B8B",name:"thistle 4"},{value:"#FFBBFF",name:"plum 1"},{value:"#EEAEEE",name:"plum 2"},{value:"#CD96CD",name:"plum 3"},{value:"#8B668B",name:"plum 4"},{value:"#DDA0DD",css:!0,name:"plum"},{value:"#EE82EE",css:!0,name:"violet"},{value:"#FF00FF",vga:!0,name:"magenta"},{value:"#FF00FF",vga:!0,css:!0,name:"fuchsia"},{value:"#EE00EE",name:"magenta 2"},{value:"#CD00CD",name:"magenta 3"},{value:"#8B008B",name:"magenta 4"},{value:"#8B008B",css:!0,name:"darkmagenta"},{value:"#800080",vga:!0,css:!0,name:"purple"},{value:"#BA55D3",css:!0,name:"mediumorchid"},{value:"#E066FF",name:"mediumorchid 1"},{value:"#D15FEE",name:"mediumorchid 2"},{value:"#B452CD",name:"mediumorchid 3"},{value:"#7A378B",name:"mediumorchid 4"},{value:"#9400D3",css:!0,name:"darkviolet"},{value:"#9932CC",css:!0,name:"darkorchid"},{value:"#BF3EFF",name:"darkorchid 1"},{value:"#B23AEE",name:"darkorchid 2"},{value:"#9A32CD",name:"darkorchid 3"},{value:"#68228B",name:"darkorchid 4"},{value:"#4B0082",css:!0,name:"indigo"},{value:"#8A2BE2",css:!0,name:"blueviolet"},{value:"#9B30FF",name:"purple 1"},{value:"#912CEE",name:"purple 2"},{value:"#7D26CD",name:"purple 3"},{value:"#551A8B",name:"purple 4"},{value:"#9370DB",css:!0,name:"mediumpurple"},{value:"#AB82FF",name:"mediumpurple 1"},{value:"#9F79EE",name:"mediumpurple 2"},{value:"#8968CD",name:"mediumpurple 3"},{value:"#5D478B",name:"mediumpurple 4"},{value:"#483D8B",css:!0,name:"darkslateblue"},{value:"#8470FF",name:"lightslateblue"},{value:"#7B68EE",css:!0,name:"mediumslateblue"},{value:"#6A5ACD",css:!0,name:"slateblue"},{value:"#836FFF",name:"slateblue 1"},{value:"#7A67EE",name:"slateblue 2"},{value:"#6959CD",name:"slateblue 3"},{value:"#473C8B",name:"slateblue 4"},{value:"#F8F8FF",css:!0,name:"ghostwhite"},{value:"#E6E6FA",css:!0,name:"lavender"},{value:"#0000FF",vga:!0,css:!0,name:"blue"},{value:"#0000EE",name:"blue 2"},{value:"#0000CD",name:"blue 3"},{value:"#0000CD",css:!0,name:"mediumblue"},{value:"#00008B",name:"blue 4"},{value:"#00008B",css:!0,name:"darkblue"},{value:"#000080",vga:!0,css:!0,name:"navy"},{value:"#191970",css:!0,name:"midnightblue"},{value:"#3D59AB",name:"cobalt"},{value:"#4169E1",css:!0,name:"royalblue"},{value:"#4876FF",name:"royalblue 1"},{value:"#436EEE",name:"royalblue 2"},{value:"#3A5FCD",name:"royalblue 3"},{value:"#27408B",name:"royalblue 4"},{value:"#6495ED",css:!0,name:"cornflowerblue"},{value:"#B0C4DE",css:!0,name:"lightsteelblue"},{value:"#CAE1FF",name:"lightsteelblue 1"},{value:"#BCD2EE",name:"lightsteelblue 2"},{value:"#A2B5CD",name:"lightsteelblue 3"},{value:"#6E7B8B",name:"lightsteelblue 4"},{value:"#778899",css:!0,name:"lightslategray"},{value:"#708090",css:!0,name:"slategray"},{value:"#C6E2FF",name:"slategray 1"},{value:"#B9D3EE",name:"slategray 2"},{value:"#9FB6CD",name:"slategray 3"},{value:"#6C7B8B",name:"slategray 4"},{value:"#1E90FF",name:"dodgerblue 1"},{value:"#1E90FF",css:!0,name:"dodgerblue"},{value:"#1C86EE",name:"dodgerblue 2"},{value:"#1874CD",name:"dodgerblue 3"},{value:"#104E8B",name:"dodgerblue 4"},{value:"#F0F8FF",css:!0,name:"aliceblue"},{value:"#4682B4",css:!0,name:"steelblue"},{value:"#63B8FF",name:"steelblue 1"},{value:"#5CACEE",name:"steelblue 2"},{value:"#4F94CD",name:"steelblue 3"},{value:"#36648B",name:"steelblue 4"},{value:"#87CEFA",css:!0,name:"lightskyblue"},{value:"#B0E2FF",name:"lightskyblue 1"},{value:"#A4D3EE",name:"lightskyblue 2"},{value:"#8DB6CD",name:"lightskyblue 3"},{value:"#607B8B",name:"lightskyblue 4"},{value:"#87CEFF",name:"skyblue 1"},{value:"#7EC0EE",name:"skyblue 2"},{value:"#6CA6CD",name:"skyblue 3"},{value:"#4A708B",name:"skyblue 4"},{value:"#87CEEB",css:!0,name:"skyblue"},{value:"#00BFFF",name:"deepskyblue 1"},{value:"#00BFFF",css:!0,name:"deepskyblue"},{value:"#00B2EE",name:"deepskyblue 2"},{value:"#009ACD",name:"deepskyblue 3"},{value:"#00688B",name:"deepskyblue 4"},{value:"#33A1C9",name:"peacock"},{value:"#ADD8E6",css:!0,name:"lightblue"},{value:"#BFEFFF",name:"lightblue 1"},{value:"#B2DFEE",name:"lightblue 2"},{value:"#9AC0CD",name:"lightblue 3"},{value:"#68838B",name:"lightblue 4"},{value:"#B0E0E6",css:!0,name:"powderblue"},{value:"#98F5FF",name:"cadetblue 1"},{value:"#8EE5EE",name:"cadetblue 2"},{value:"#7AC5CD",name:"cadetblue 3"},{value:"#53868B",name:"cadetblue 4"},{value:"#00F5FF",name:"turquoise 1"},{value:"#00E5EE",name:"turquoise 2"},{value:"#00C5CD",name:"turquoise 3"},{value:"#00868B",name:"turquoise 4"},{value:"#5F9EA0",css:!0,name:"cadetblue"},{value:"#00CED1",css:!0,name:"darkturquoise"},{value:"#F0FFFF",name:"azure 1"},{value:"#F0FFFF",css:!0,name:"azure"},{value:"#E0EEEE",name:"azure 2"},{value:"#C1CDCD",name:"azure 3"},{value:"#838B8B",name:"azure 4"},{value:"#E0FFFF",name:"lightcyan 1"},{value:"#E0FFFF",css:!0,name:"lightcyan"},{value:"#D1EEEE",name:"lightcyan 2"},{value:"#B4CDCD",name:"lightcyan 3"},{value:"#7A8B8B",name:"lightcyan 4"},{value:"#BBFFFF",name:"paleturquoise 1"},{value:"#AEEEEE",name:"paleturquoise 2"},{value:"#AEEEEE",css:!0,name:"paleturquoise"},{value:"#96CDCD",name:"paleturquoise 3"},{value:"#668B8B",name:"paleturquoise 4"},{value:"#2F4F4F",css:!0,name:"darkslategray"},{value:"#97FFFF",name:"darkslategray 1"},{value:"#8DEEEE",name:"darkslategray 2"},{value:"#79CDCD",name:"darkslategray 3"},{value:"#528B8B",name:"darkslategray 4"},{value:"#00FFFF",name:"cyan"},{value:"#00FFFF",css:!0,name:"aqua"},{value:"#00EEEE",name:"cyan 2"},{value:"#00CDCD",name:"cyan 3"},{value:"#008B8B",name:"cyan 4"},{value:"#008B8B",css:!0,name:"darkcyan"},{value:"#008080",vga:!0,css:!0,name:"teal"},{value:"#48D1CC",css:!0,name:"mediumturquoise"},{value:"#20B2AA",css:!0,name:"lightseagreen"},{value:"#03A89E",name:"manganeseblue"},{value:"#40E0D0",css:!0,name:"turquoise"},{value:"#808A87",name:"coldgrey"},{value:"#00C78C",name:"turquoiseblue"},{value:"#7FFFD4",name:"aquamarine 1"},{value:"#7FFFD4",css:!0,name:"aquamarine"},{value:"#76EEC6",name:"aquamarine 2"},{value:"#66CDAA",name:"aquamarine 3"},{value:"#66CDAA",css:!0,name:"mediumaquamarine"},{value:"#458B74",name:"aquamarine 4"},{value:"#00FA9A",css:!0,name:"mediumspringgreen"},{value:"#F5FFFA",css:!0,name:"mintcream"},{value:"#00FF7F",css:!0,name:"springgreen"},{value:"#00EE76",name:"springgreen 1"},{value:"#00CD66",name:"springgreen 2"},{value:"#008B45",name:"springgreen 3"},{value:"#3CB371",css:!0,name:"mediumseagreen"},{value:"#54FF9F",name:"seagreen 1"},{value:"#4EEE94",name:"seagreen 2"},{value:"#43CD80",name:"seagreen 3"},{value:"#2E8B57",name:"seagreen 4"},{value:"#2E8B57",css:!0,name:"seagreen"},{value:"#00C957",name:"emeraldgreen"},{value:"#BDFCC9",name:"mint"},{value:"#3D9140",name:"cobaltgreen"},{value:"#F0FFF0",name:"honeydew 1"},{value:"#F0FFF0",css:!0,name:"honeydew"},{value:"#E0EEE0",name:"honeydew 2"},{value:"#C1CDC1",name:"honeydew 3"},{value:"#838B83",name:"honeydew 4"},{value:"#8FBC8F",css:!0,name:"darkseagreen"},{value:"#C1FFC1",name:"darkseagreen 1"},{value:"#B4EEB4",name:"darkseagreen 2"},{value:"#9BCD9B",name:"darkseagreen 3"},{value:"#698B69",name:"darkseagreen 4"},{value:"#98FB98",css:!0,name:"palegreen"},{value:"#9AFF9A",name:"palegreen 1"},{value:"#90EE90",name:"palegreen 2"},{value:"#90EE90",css:!0,name:"lightgreen"},{value:"#7CCD7C",name:"palegreen 3"},{value:"#548B54",name:"palegreen 4"},{value:"#32CD32",css:!0,name:"limegreen"},{value:"#228B22",css:!0,name:"forestgreen"},{value:"#00FF00",vga:!0,name:"green 1"},{value:"#00FF00",vga:!0,css:!0,name:"lime"},{value:"#00EE00",name:"green 2"},{value:"#00CD00",name:"green 3"},{value:"#008B00",name:"green 4"},{value:"#008000",vga:!0,css:!0,name:"green"},{value:"#006400",css:!0,name:"darkgreen"},{value:"#308014",name:"sapgreen"},{value:"#7CFC00",css:!0,name:"lawngreen"},{value:"#7FFF00",name:"chartreuse 1"},{value:"#7FFF00",css:!0,name:"chartreuse"},{value:"#76EE00",name:"chartreuse 2"},{value:"#66CD00",name:"chartreuse 3"},{value:"#458B00",name:"chartreuse 4"},{value:"#ADFF2F",css:!0,name:"greenyellow"},{value:"#CAFF70",name:"darkolivegreen 1"},{value:"#BCEE68",name:"darkolivegreen 2"},{value:"#A2CD5A",name:"darkolivegreen 3"},{value:"#6E8B3D",name:"darkolivegreen 4"},{value:"#556B2F",css:!0,name:"darkolivegreen"},{value:"#6B8E23",css:!0,name:"olivedrab"},{value:"#C0FF3E",name:"olivedrab 1"},{value:"#B3EE3A",name:"olivedrab 2"},{value:"#9ACD32",name:"olivedrab 3"},{value:"#9ACD32",css:!0,name:"yellowgreen"},{value:"#698B22",name:"olivedrab 4"},{value:"#FFFFF0",name:"ivory 1"},{value:"#FFFFF0",css:!0,name:"ivory"},{value:"#EEEEE0",name:"ivory 2"},{value:"#CDCDC1",name:"ivory 3"},{value:"#8B8B83",name:"ivory 4"},{value:"#F5F5DC",css:!0,name:"beige"},{value:"#FFFFE0",name:"lightyellow 1"},{value:"#FFFFE0",css:!0,name:"lightyellow"},{value:"#EEEED1",name:"lightyellow 2"},{value:"#CDCDB4",name:"lightyellow 3"},{value:"#8B8B7A",name:"lightyellow 4"},{value:"#FAFAD2",css:!0,name:"lightgoldenrodyellow"},{value:"#FFFF00",vga:!0,name:"yellow 1"},{value:"#FFFF00",vga:!0,css:!0,name:"yellow"},{value:"#EEEE00",name:"yellow 2"},{value:"#CDCD00",name:"yellow 3"},{value:"#8B8B00",name:"yellow 4"},{value:"#808069",name:"warmgrey"},{value:"#808000",vga:!0,css:!0,name:"olive"},{value:"#BDB76B",css:!0,name:"darkkhaki"},{value:"#FFF68F",name:"khaki 1"},{value:"#EEE685",name:"khaki 2"},{value:"#CDC673",name:"khaki 3"},{value:"#8B864E",name:"khaki 4"},{value:"#F0E68C",css:!0,name:"khaki"},{value:"#EEE8AA",css:!0,name:"palegoldenrod"},{value:"#FFFACD",name:"lemonchiffon 1"},{value:"#FFFACD",css:!0,name:"lemonchiffon"},{value:"#EEE9BF",name:"lemonchiffon 2"},{value:"#CDC9A5",name:"lemonchiffon 3"},{value:"#8B8970",name:"lemonchiffon 4"},{value:"#FFEC8B",name:"lightgoldenrod 1"},{value:"#EEDC82",name:"lightgoldenrod 2"},{value:"#CDBE70",name:"lightgoldenrod 3"},{value:"#8B814C",name:"lightgoldenrod 4"},{value:"#E3CF57",name:"banana"},{value:"#FFD700",name:"gold 1"},{value:"#FFD700",css:!0,name:"gold"},{value:"#EEC900",name:"gold 2"},{value:"#CDAD00",name:"gold 3"},{value:"#8B7500",name:"gold 4"},{value:"#FFF8DC",name:"cornsilk 1"},{value:"#FFF8DC",css:!0,name:"cornsilk"},{value:"#EEE8CD",name:"cornsilk 2"},{value:"#CDC8B1",name:"cornsilk 3"},{value:"#8B8878",name:"cornsilk 4"},{value:"#DAA520",css:!0,name:"goldenrod"},{value:"#FFC125",name:"goldenrod 1"},{value:"#EEB422",name:"goldenrod 2"},{value:"#CD9B1D",name:"goldenrod 3"},{value:"#8B6914",name:"goldenrod 4"},{value:"#B8860B",css:!0,name:"darkgoldenrod"},{value:"#FFB90F",name:"darkgoldenrod 1"},{value:"#EEAD0E",name:"darkgoldenrod 2"},{value:"#CD950C",name:"darkgoldenrod 3"},{value:"#8B6508",name:"darkgoldenrod 4"},{value:"#FFA500",name:"orange 1"},{value:"#FF8000",css:!0,name:"orange"},{value:"#EE9A00",name:"orange 2"},{value:"#CD8500",name:"orange 3"},{value:"#8B5A00",name:"orange 4"},{value:"#FFFAF0",css:!0,name:"floralwhite"},{value:"#FDF5E6",css:!0,name:"oldlace"},{value:"#F5DEB3",css:!0,name:"wheat"},{value:"#FFE7BA",name:"wheat 1"},{value:"#EED8AE",name:"wheat 2"},{value:"#CDBA96",name:"wheat 3"},{value:"#8B7E66",name:"wheat 4"},{value:"#FFE4B5",css:!0,name:"moccasin"},{value:"#FFEFD5",css:!0,name:"papayawhip"},{value:"#FFEBCD",css:!0,name:"blanchedalmond"},{value:"#FFDEAD",name:"navajowhite 1"},{value:"#FFDEAD",css:!0,name:"navajowhite"},{value:"#EECFA1",name:"navajowhite 2"},{value:"#CDB38B",name:"navajowhite 3"},{value:"#8B795E",name:"navajowhite 4"},{value:"#FCE6C9",name:"eggshell"},{value:"#D2B48C",css:!0,name:"tan"},{value:"#9C661F",name:"brick"},{value:"#FF9912",name:"cadmiumyellow"},{value:"#FAEBD7",css:!0,name:"antiquewhite"},{value:"#FFEFDB",name:"antiquewhite 1"},{value:"#EEDFCC",name:"antiquewhite 2"},{value:"#CDC0B0",name:"antiquewhite 3"},{value:"#8B8378",name:"antiquewhite 4"},{value:"#DEB887",css:!0,name:"burlywood"},{value:"#FFD39B",name:"burlywood 1"},{value:"#EEC591",name:"burlywood 2"},{value:"#CDAA7D",name:"burlywood 3"},{value:"#8B7355",name:"burlywood 4"},{value:"#FFE4C4",name:"bisque 1"},{value:"#FFE4C4",css:!0,name:"bisque"},{value:"#EED5B7",name:"bisque 2"},{value:"#CDB79E",name:"bisque 3"},{value:"#8B7D6B",name:"bisque 4"},{value:"#E3A869",name:"melon"},{value:"#ED9121",name:"carrot"},{value:"#FF8C00",css:!0,name:"darkorange"},{value:"#FF7F00",name:"darkorange 1"},{value:"#EE7600",name:"darkorange 2"},{value:"#CD6600",name:"darkorange 3"},{value:"#8B4500",name:"darkorange 4"},{value:"#FFA54F",name:"tan 1"},{value:"#EE9A49",name:"tan 2"},{value:"#CD853F",name:"tan 3"},{value:"#CD853F",css:!0,name:"peru"},{value:"#8B5A2B",name:"tan 4"},{value:"#FAF0E6",css:!0,name:"linen"},{value:"#FFDAB9",name:"peachpuff 1"},{value:"#FFDAB9",css:!0,name:"peachpuff"},{value:"#EECBAD",name:"peachpuff 2"},{value:"#CDAF95",name:"peachpuff 3"},{value:"#8B7765",name:"peachpuff 4"},{value:"#FFF5EE",name:"seashell 1"},{value:"#FFF5EE",css:!0,name:"seashell"},{value:"#EEE5DE",name:"seashell 2"},{value:"#CDC5BF",name:"seashell 3"},{value:"#8B8682",name:"seashell 4"},{value:"#F4A460",css:!0,name:"sandybrown"},{value:"#C76114",name:"rawsienna"},{value:"#D2691E",css:!0,name:"chocolate"},{value:"#FF7F24",name:"chocolate 1"},{value:"#EE7621",name:"chocolate 2"},{value:"#CD661D",name:"chocolate 3"},{value:"#8B4513",name:"chocolate 4"},{value:"#8B4513",css:!0,name:"saddlebrown"},{value:"#292421",name:"ivoryblack"},{value:"#FF7D40",name:"flesh"},{value:"#FF6103",name:"cadmiumorange"},{value:"#8A360F",name:"burntsienna"},{value:"#A0522D",css:!0,name:"sienna"},{value:"#FF8247",name:"sienna 1"},{value:"#EE7942",name:"sienna 2"},{value:"#CD6839",name:"sienna 3"},{value:"#8B4726",name:"sienna 4"},{value:"#FFA07A",name:"lightsalmon 1"},{value:"#FFA07A",css:!0,name:"lightsalmon"},{value:"#EE9572",name:"lightsalmon 2"},{value:"#CD8162",name:"lightsalmon 3"},{value:"#8B5742",name:"lightsalmon 4"},{value:"#FF7F50",css:!0,name:"coral"},{value:"#FF4500",name:"orangered 1"},{value:"#FF4500",css:!0,name:"orangered"},{value:"#EE4000",name:"orangered 2"},{value:"#CD3700",name:"orangered 3"},{value:"#8B2500",name:"orangered 4"},{value:"#5E2612",name:"sepia"},{value:"#E9967A",css:!0,name:"darksalmon"},{value:"#FF8C69",name:"salmon 1"},{value:"#EE8262",name:"salmon 2"},{value:"#CD7054",name:"salmon 3"},{value:"#8B4C39",name:"salmon 4"},{value:"#FF7256",name:"coral 1"},{value:"#EE6A50",name:"coral 2"},{value:"#CD5B45",name:"coral 3"},{value:"#8B3E2F",name:"coral 4"},{value:"#8A3324",name:"burntumber"},{value:"#FF6347",name:"tomato 1"},{value:"#FF6347",css:!0,name:"tomato"},{value:"#EE5C42",name:"tomato 2"},{value:"#CD4F39",name:"tomato 3"},{value:"#8B3626",name:"tomato 4"},{value:"#FA8072",css:!0,name:"salmon"},{value:"#FFE4E1",name:"mistyrose 1"},{value:"#FFE4E1",css:!0,name:"mistyrose"},{value:"#EED5D2",name:"mistyrose 2"},{value:"#CDB7B5",name:"mistyrose 3"},{value:"#8B7D7B",name:"mistyrose 4"},{value:"#FFFAFA",name:"snow 1"},{value:"#FFFAFA",css:!0,name:"snow"},{value:"#EEE9E9",name:"snow 2"},{value:"#CDC9C9",name:"snow 3"},{value:"#8B8989",name:"snow 4"},{value:"#BC8F8F",css:!0,name:"rosybrown"},{value:"#FFC1C1",name:"rosybrown 1"},{value:"#EEB4B4",name:"rosybrown 2"},{value:"#CD9B9B",name:"rosybrown 3"},{value:"#8B6969",name:"rosybrown 4"},{value:"#F08080",css:!0,name:"lightcoral"},{value:"#CD5C5C",css:!0,name:"indianred"},{value:"#FF6A6A",name:"indianred 1"},{value:"#EE6363",name:"indianred 2"},{value:"#8B3A3A",name:"indianred 4"},{value:"#CD5555",name:"indianred 3"},{value:"#A52A2A",css:!0,name:"brown"},{value:"#FF4040",name:"brown 1"},{value:"#EE3B3B",name:"brown 2"},{value:"#CD3333",name:"brown 3"},{value:"#8B2323",name:"brown 4"},{value:"#B22222",css:!0,name:"firebrick"},{value:"#FF3030",name:"firebrick 1"},{value:"#EE2C2C",name:"firebrick 2"},{value:"#CD2626",name:"firebrick 3"},{value:"#8B1A1A",name:"firebrick 4"},{value:"#FF0000",vga:!0,name:"red 1"},{value:"#FF0000",vga:!0,css:!0,name:"red"},{value:"#EE0000",name:"red 2"},{value:"#CD0000",name:"red 3"},{value:"#8B0000",name:"red 4"},{value:"#8B0000",css:!0,name:"darkred"},{value:"#800000",vga:!0,css:!0,name:"maroon"},{value:"#8E388E",name:"sgi beet"},{value:"#7171C6",name:"sgi slateblue"},{value:"#7D9EC0",name:"sgi lightblue"},{value:"#388E8E",name:"sgi teal"},{value:"#71C671",name:"sgi chartreuse"},{value:"#8E8E38",name:"sgi olivedrab"},{value:"#C5C1AA",name:"sgi brightgray"},{value:"#C67171",name:"sgi salmon"},{value:"#555555",name:"sgi darkgray"},{value:"#1E1E1E",name:"sgi gray 12"},{value:"#282828",name:"sgi gray 16"},{value:"#515151",name:"sgi gray 32"},{value:"#5B5B5B",name:"sgi gray 36"},{value:"#848484",name:"sgi gray 52"},{value:"#8E8E8E",name:"sgi gray 56"},{value:"#AAAAAA",name:"sgi lightgray"},{value:"#B7B7B7",name:"sgi gray 72"},{value:"#C1C1C1",name:"sgi gray 76"},{value:"#EAEAEA",name:"sgi gray 92"},{value:"#F4F4F4",name:"sgi gray 96"},{value:"#FFFFFF",vga:!0,css:!0,name:"white"},{value:"#F5F5F5",name:"white smoke"},{value:"#F5F5F5",name:"gray 96"},{value:"#DCDCDC",css:!0,name:"gainsboro"},{value:"#D3D3D3",css:!0,name:"lightgrey"},{value:"#C0C0C0",vga:!0,css:!0,name:"silver"},{value:"#A9A9A9",css:!0,name:"darkgray"},{value:"#808080",vga:!0,css:!0,name:"gray"},{value:"#696969",css:!0,name:"dimgray"},{value:"#696969",name:"gray 42"},{value:"#000000",vga:!0,css:!0,name:"black"},{value:"#FCFCFC",name:"gray 99"},{value:"#FAFAFA",name:"gray 98"},{value:"#F7F7F7",name:"gray 97"},{value:"#F2F2F2",name:"gray 95"},{value:"#F0F0F0",name:"gray 94"},{value:"#EDEDED",name:"gray 93"},{value:"#EBEBEB",name:"gray 92"},{value:"#E8E8E8",name:"gray 91"},{value:"#E5E5E5",name:"gray 90"},{value:"#E3E3E3",name:"gray 89"},{value:"#E0E0E0",name:"gray 88"},{value:"#DEDEDE",name:"gray 87"},{value:"#DBDBDB",name:"gray 86"},{value:"#D9D9D9",name:"gray 85"},{value:"#D6D6D6",name:"gray 84"},{value:"#D4D4D4",name:"gray 83"},{value:"#D1D1D1",name:"gray 82"},{value:"#CFCFCF",name:"gray 81"},{value:"#CCCCCC",name:"gray 80"},{value:"#C9C9C9",name:"gray 79"},{value:"#C7C7C7",name:"gray 78"},{value:"#C4C4C4",name:"gray 77"},{value:"#C2C2C2",name:"gray 76"},{value:"#BFBFBF",name:"gray 75"},{value:"#BDBDBD",name:"gray 74"},{value:"#BABABA",name:"gray 73"},{value:"#B8B8B8",name:"gray 72"},{value:"#B5B5B5",name:"gray 71"},{value:"#B3B3B3",name:"gray 70"},{value:"#B0B0B0",name:"gray 69"},{value:"#ADADAD",name:"gray 68"},{value:"#ABABAB",name:"gray 67"},{value:"#A8A8A8",name:"gray 66"},{value:"#A6A6A6",name:"gray 65"},{value:"#A3A3A3",name:"gray 64"},{value:"#A1A1A1",name:"gray 63"},{value:"#9E9E9E",name:"gray 62"},{value:"#9C9C9C",name:"gray 61"},{value:"#999999",name:"gray 60"},{value:"#969696",name:"gray 59"},{value:"#949494",name:"gray 58"},{value:"#919191",name:"gray 57"},{value:"#8F8F8F",name:"gray 56"},{value:"#8C8C8C",name:"gray 55"},{value:"#8A8A8A",name:"gray 54"},{value:"#878787",name:"gray 53"},{value:"#858585",name:"gray 52"},{value:"#828282",name:"gray 51"},{value:"#7F7F7F",name:"gray 50"},{value:"#7D7D7D",name:"gray 49"},{value:"#7A7A7A",name:"gray 48"},{value:"#787878",name:"gray 47"},{value:"#757575",name:"gray 46"},{value:"#737373",name:"gray 45"},{value:"#707070",name:"gray 44"},{value:"#6E6E6E",name:"gray 43"},{value:"#666666",name:"gray 40"},{value:"#636363",name:"gray 39"},{value:"#616161",name:"gray 38"},{value:"#5E5E5E",name:"gray 37"},{value:"#5C5C5C",name:"gray 36"},{value:"#595959",name:"gray 35"},{value:"#575757",name:"gray 34"},{value:"#545454",name:"gray 33"},{value:"#525252",name:"gray 32"},{value:"#4F4F4F",name:"gray 31"},{value:"#4D4D4D",name:"gray 30"},{value:"#4A4A4A",name:"gray 29"},{value:"#474747",name:"gray 28"},{value:"#454545",name:"gray 27"},{value:"#424242",name:"gray 26"},{value:"#404040",name:"gray 25"},{value:"#3D3D3D",name:"gray 24"},{value:"#3B3B3B",name:"gray 23"},{value:"#383838",name:"gray 22"},{value:"#363636",name:"gray 21"},{value:"#333333",name:"gray 20"},{value:"#303030",name:"gray 19"},{value:"#2E2E2E",name:"gray 18"},{value:"#2B2B2B",name:"gray 17"},{value:"#292929",name:"gray 16"},{value:"#262626",name:"gray 15"},{value:"#242424",name:"gray 14"},{value:"#212121",name:"gray 13"},{value:"#1F1F1F",name:"gray 12"},{value:"#1C1C1C",name:"gray 11"},{value:"#1A1A1A",name:"gray 10"},{value:"#171717",name:"gray 9"},{value:"#141414",name:"gray 8"},{value:"#121212",name:"gray 7"},{value:"#0F0F0F",name:"gray 6"},{value:"#0D0D0D",name:"gray 5"},{value:"#0A0A0A",name:"gray 4"},{value:"#080808",name:"gray 3"},{value:"#050505",name:"gray 2"},{value:"#030303",name:"gray 1"},{value:"#F5F5F5",css:!0,name:"whitesmoke"}];(function(e){var t=Mtr,r=t.filter(function(i){return!!i.css}),n=t.filter(function(i){return!!i.vga});e.exports=function(i){var s=e.exports.get(i);return s&&s.value},e.exports.get=function(i){return i=i||"",i=i.trim().toLowerCase(),t.filter(function(s){return s.name.toLowerCase()===i}).pop()},e.exports.all=e.exports.get.all=function(){return t},e.exports.get.css=function(i){return i?(i=i||"",i=i.trim().toLowerCase(),r.filter(function(s){return s.name.toLowerCase()===i}).pop()):r},e.exports.get.vga=function(i){return i?(i=i||"",i=i.trim().toLowerCase(),n.filter(function(s){return s.name.toLowerCase()===i}).pop()):n}})($Se);var Ctr=$Se.exports;const ktr=Qg(Ctr),Rtr=(e,t)=>{let r="";const n=ktr(e);if(n!==void 0?r=n.slice(1):e.startsWith("#")&&(r=e.slice(1)),r.length===3){let o="";for(const a of r)o+=a,o+=a;r=o}const i=r.match(/.{2}/g);if(i===null)throw new Error(`Could not identify RGB value of color \`${e}\``);return`rgba(${i.map(o=>Number.parseInt(o,16)).join(", ")}, ${t})`};var Otr=function(t,r){r||(r=[0,""]),t=String(t);var n=parseFloat(t,10);return r[0]=n,r[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r};const Ntr=Qg(Otr);function xr(e){return Mr(()=>{const t=e();let[r,n]=Ntr(String(t));return n=n===void 0||n===""?"px":n,{value:r,unit:n,string:`${r}${n}`}})}var die=[],A2=[];function Ltr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=die.indexOf(s);o===-1&&(o=die.push(s)-1,A2[o]={}),r=A2[o]&&A2[o][n]?A2[o][n]:A2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Ptr=`
@keyframes vue-spinner-long {
0% {
		left: -35%;
		right: 100%;
}
60% {
		left: 100%;
		right: -90%;
}
100% {
		left: 100%;
		right: -90%;
}
}
@keyframes vue-spinner-short {
0% {
		left: -200%;
		right: 100%;
}
60% {
		left: 107%;
		right: -8%;
}
100% {
		left: 107%;
		right: -8%;
}
}
`;Ltr(Ptr,{});const Dtr={name:"VueSpinnerBar"};({...Dtr,props:Ui({height:4,width:100})});pe("rect",{y:"10",width:"15",height:"120",rx:"6"},[pe("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[pe("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"60",width:"15",height:"140",rx:"6"},[pe("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[pe("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),pe("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[pe("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]);var fie=[],M2=[];function Ftr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=fie.indexOf(s);o===-1&&(o=fie.push(s)-1,M2[o]={}),r=M2[o]&&M2[o][n]?M2[o][n]:M2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var jtr=`
@keyframes vue-spinner-beat {
50% {
		transform: scale(0.75);
		opacity: 0.2;
}
100% {
		transform: scale(1);
		opacity: 1;
}
}
`;Ftr(jtr,{});Ui({size:15,margin:"2px"});var mie=[],C2=[];function Utr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=mie.indexOf(s);o===-1&&(o=mie.push(s)-1,C2[o]={}),r=C2[o]&&C2[o][n]?C2[o][n]:C2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Btr=`
@keyframes vue-spinner-bounce {
0%,
	100% {
		transform: scale(0);
}
50% {
		transform: scale(1);
}
}
`;Utr(Btr,{});const Vtr={name:"VueSpinnerBeat"};({...Vtr,props:Ui({size:60})});pe("rect",{x:"25",y:"25",width:"50",height:"50",fill:"none","stroke-width":"4",stroke:"currentColor"},[pe("animateTransform",{id:"spinnerBox",attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",dur:"0.5s",begin:"rectBox.end"})]),pe("rect",{x:"27",y:"27",width:"46",height:"50",fill:"currentColor"},[pe("animate",{id:"rectBox",attributeName:"height",begin:"0s;spinnerBox.end",dur:"1.3s",from:"50",to:"0",fill:"freeze"})]);var yie=[],k2=[];function Gtr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=yie.indexOf(s);o===-1&&(o=yie.push(s)-1,k2[o]={}),r=k2[o]&&k2[o][n]?k2[o][n]:k2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var ztr=`
@keyframes vue-spinner-circle {
0% {
		transform: rotate(0deg);
}
50% {
		transform: rotate(180deg);
}
100% {
		transform: rotate(360deg);
}
}
`;Gtr(ztr,{});const $tr={name:"VueSpinnerCircle"};({...$tr,props:Ui({size:50})});var gie=[],R2=[];function qtr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=gie.indexOf(s);o===-1&&(o=gie.push(s)-1,R2[o]={}),r=R2[o]&&R2[o][n]?R2[o][n]:R2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Htr=`
@keyframes vue-spinner-climbing-box {
0% {
		transform: translate(0, -1em) rotate(-45deg);
}
5% {
		transform: translate(0, -1em) rotate(-50deg);
}
20% {
		transform: translate(1em, -2em) rotate(47deg);
}
25% {
		transform: translate(1em, -2em) rotate(45deg);
}
30% {
		transform: translate(1em, -2em) rotate(40deg);
}
45% {
		transform: translate(2em, -3em) rotate(137deg);
}
50% {
		transform: translate(2em, -3em) rotate(135deg);
}
55% {
		transform: translate(2em, -3em) rotate(130deg);
}
70% {
		transform: translate(3em, -4em) rotate(217deg);
}
75% {
		transform: translate(3em, -4em) rotate(220deg);
}
100% {
		transform: translate(0, -1em) rotate(-225deg);
}
}
`;qtr(Htr,{});const Wtr={name:"VueSpinnerClimbingBox"};({...Wtr,props:Ui({size:15})});var vie=[],O2=[];function Ztr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=vie.indexOf(s);o===-1&&(o=vie.push(s)-1,O2[o]={}),r=O2[o]&&O2[o][n]?O2[o][n]:O2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Jtr=`
@keyframes vue-spinner-clip {
0% {
		transform: rotate(0deg) scale(1);
}
50% {
		transform: rotate(180deg) scale(0.8);
}
100% {
		transform: rotate(360deg) scale(1);
}
}
`;Ztr(Jtr,{});const Ytr={name:"VueSpinnerClip"};({...Ytr,props:Ui({size:35})});pe("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),pe("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),pe("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})]);pe("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none"}),pe("path",{d:"M78,19H22c-6.6,0-12,5.4-12,12v31c0,6.6,5.4,12,12,12h37.2c0.4,3,1.8,5.6,3.7,7.6c2.4,2.5,5.1,4.1,9.1,4 c-1.4-2.1-2-7.2-2-10.3c0-0.4,0-0.8,0-1.3h8c6.6,0,12-5.4,12-12V31C90,24.4,84.6,19,78,19z",fill:"currentColor"}),pe("circle",{cx:"30",cy:"47",r:"5",fill:"#fff"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",values:"0;1;1",keyTimes:"0;0.2;1",dur:"1s",repeatCount:"indefinite"})]),pe("circle",{cx:"50",cy:"47",r:"5",fill:"#fff"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",values:"0;0;1;1",keyTimes:"0;0.2;0.4;1",dur:"1s",repeatCount:"indefinite"})]),pe("circle",{cx:"70",cy:"47",r:"5",fill:"#fff"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",values:"0;0;1;1",keyTimes:"0;0.4;0.6;1",dur:"1s",repeatCount:"indefinite"})]);pe("rect",{x:"0",y:"0",width:"100",height:"100",fill:"none"}),pe("g",{transform:"translate(25 25)"},[pe("rect",{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.9"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"})])]),pe("g",{transform:"translate(75 25)"},[pe("rect",{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.8"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.1s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"})])]),pe("g",{transform:"translate(25 75)"},[pe("rect",{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.7"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.3s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"})])]),pe("g",{transform:"translate(75 75)"},[pe("rect",{x:"-20",y:"-20",width:"40",height:"40",fill:"currentColor",opacity:"0.6"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"1.5",to:"1",repeatCount:"indefinite",begin:"0.2s",dur:"1s",calcMode:"spline",keySplines:"0.2 0.8 0.2 0.8",keyTimes:"0;1"})])]);var bie=[],N2=[];function Xtr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=bie.indexOf(s);o===-1&&(o=bie.push(s)-1,N2[o]={}),r=N2[o]&&N2[o][n]?N2[o][n]:N2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Qtr=`
@keyframes vue-spinner-rotate {
100% {
		transform: rotate(360deg);
}
}
@keyframes vue-spinner-bounce {
0%,
	100% {
		transform: scale(0);
}
50% {
		transform: scale(1);
}
}
`;Xtr(Qtr,{});const Ktr={name:"VueSpinnerDot"};({...Ktr,props:Ui({size:60})});pe("circle",{cx:"15",cy:"15",r:"15"},[pe("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[pe("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"105",cy:"15",r:"15"},[pe("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]);pe("g",{transform:"translate(20 50)"},[pe("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),pe("g",{transform:"translate(50 50)"},[pe("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),pe("g",{transform:"translate(80 50)"},[pe("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[pe("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]);var wie=[],L2=[];function trr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=wie.indexOf(s);o===-1&&(o=wie.push(s)-1,L2[o]={}),r=L2[o]&&L2[o][n]?L2[o][n]:L2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var rrr=`
@keyframes vue-spinner-fade {
50% {
		opacity: 0.3;
}
100% {
		opacity: 1;
}
}
`;trr(rrr,{});const nrr={name:"VueSpinnerFade"};({...nrr,props:Ui({color:"#000000",height:"15px",width:"5px",margin:"2px",radius:"2px"})});pe("g",{transform:"translate(-20,-20)"},[pe("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),pe("g",{transform:"translate(20,20) rotate(15 50 50)"},[pe("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])]);pe("circle",{cx:"12.5",cy:"12.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"12.5",cy:"52.5",r:"12.5","fill-opacity":".5"},[pe("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"52.5",cy:"12.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"52.5",cy:"52.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"92.5",cy:"12.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"92.5",cy:"52.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"12.5",cy:"92.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"52.5",cy:"92.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"92.5",cy:"92.5",r:"12.5"},[pe("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})]);var _ie=[],P2=[];function irr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=_ie.indexOf(s);o===-1&&(o=_ie.push(s)-1,P2[o]={}),r=P2[o]&&P2[o][n]?P2[o][n]:P2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var srr=`
@keyframes vue-spinner-grid {
0% {
		transform: scale(1);
}
50% {
		transform: scale(0.5);
		opacity: 0.7;
}
100% {
		transform: scale(1);
		opacity: 1;
}
}
`;irr(srr,{});const orr={name:"VueSpinnerGridPop"};({...orr,props:Ui({size:15,margin:"2px"})});pe("path",{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.716-6.002 11.47-7.65 17.304-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z","fill-opacity":".5"},[pe("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})]),pe("path",{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.593-2.32 17.308 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z","fill-opacity":".5"},[pe("animate",{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})]),pe("path",{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"});pe("g",[pe("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),pe("clipPath",{id:"uil-hourglass-clip1"},[pe("rect",{x:"15",y:"20",width:"70",height:"25"},[pe("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),pe("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),pe("clipPath",{id:"uil-hourglass-clip2"},[pe("rect",{x:"15",y:"55",width:"70",height:"25"},[pe("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),pe("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),pe("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),pe("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})]);pe("path",{d:"M24.3,30C11.4,30,5,43.3,5,50s6.4,20,19.3,20c19.3,0,32.1-40,51.4-40C88.6,30,95,43.3,95,50s-6.4,20-19.3,20C56.4,70,43.6,30,24.3,30z",fill:"none",stroke:"currentColor","stroke-width":"8","stroke-dasharray":"10.691205342610678 10.691205342610678","stroke-dashoffset":"0"},[pe("animate",{attributeName:"stroke-dashoffset",from:"0",to:"21.382410685221355",begin:"0",dur:"2s",repeatCount:"indefinite",fill:"freeze"})]);pe("g",{"stroke-width":"4","stroke-linecap":"round"},[pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),pe("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[pe("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])]);var xie=[],D2=[];function arr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=xie.indexOf(s);o===-1&&(o=xie.push(s)-1,D2[o]={}),r=D2[o]&&D2[o][n]?D2[o][n]:D2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var lrr=`
@keyframes vue-spinner-moon {
100% {
		transform: rotate(360deg);
}
}
`;arr(lrr,{});const urr={name:"VueSpinnerMoon"};({...urr,props:Ui({size:60})});pe("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),pe("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})]);const crr=[pe("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[pe("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),pe("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])],qSe=Jt({name:"VueSpinnerOval",props:GSe,setup(e){const{cSize:t,classes:r,style:n}=zSe(e);return()=>pe("svg",{style:n.value,class:r.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},crr)}});var wN=hrr;function hrr(e,t,r){if(e!=null&&typeof e!="number")throw new Error("start must be a number or null");if(t!=null&&typeof t!="number")throw new Error("stop must be a number or null");if(r!=null&&typeof r!="number")throw new Error("step must be a number or null");t==null&&(t=e||0,e=0),r==null&&(r=t>e?1:-1);for(var n=[],i=e<t;i?e<t:e>t;e+=r)n.push(e);return n}var Sie=[],F2=[];function prr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Sie.indexOf(s);o===-1&&(o=Sie.push(s)-1,F2[o]={}),r=F2[o]&&F2[o][n]?F2[o][n]:F2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var drr=`
@keyframes vue-spinner-pacman0 {
0% {
		transform: rotate(0deg);
}
50% {
		transform: rotate(-44deg);
}
}
@keyframes vue-spinner-pacman1 {
0% {
		transform: rotate(0deg);
}
50% {
		transform: rotate(44deg);
}
}
@keyframes vue-spinner-pacman-ball-animation {
75% {
		opacity: 0.7;
}
100% {
		transform: translate(
			var(--6ccace4f-___-4___size_value___size_unit__),
			var(--6ccace4f-___-size_value___4___size_unit__)
		);
}
}
`;prr(drr,{});const frr={name:"VueSpinnerPacman"};({...frr,props:Ui({size:"25px",margin:"2px"})});pe("path",{d:"M0 50A50 50 0 0 1 50 0L50 50L0 50",fill:"currentColor",opacity:"0.5"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"0.8s",repeatCount:"indefinite"})]),pe("path",{d:"M50 0A50 50 0 0 1 100 50L50 50L50 0",fill:"currentColor",opacity:"0.5"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"1.6s",repeatCount:"indefinite"})]),pe("path",{d:"M100 50A50 50 0 0 1 50 100L50 50L100 50",fill:"currentColor",opacity:"0.5"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2.4s",repeatCount:"indefinite"})]),pe("path",{d:"M50 100A50 50 0 0 1 0 50L50 50L50 100",fill:"currentColor",opacity:"0.5"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"3.2s",repeatCount:"indefinite"})]);var Eie=[],j2=[];function mrr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Eie.indexOf(s);o===-1&&(o=Eie.push(s)-1,j2[o]={}),r=j2[o]&&j2[o][n]?j2[o][n]:j2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var yrr=`
@keyframes vue-spinner-propagate0 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___left__)) scale(0.75);
}
50% {
		transform: translateX(var(--4d723eb2-getDistance_1___left__)) scale(0.6);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_2___left__)) scale(0.5);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
@keyframes vue-spinner-propagate1 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___left__)) scale(0.75);
}
50% {
		transform: translateX(var(--4d723eb2-getDistance_1___left__)) scale(0.6);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_1___left__)) scale(0.6);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
@keyframes vue-spinner-propagate2 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___left__)) scale(0.75);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_0___left__)) scale(0.75);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
@keyframes vue-spinner-propagate3 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___right__)) scale(0.75);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_0___right__)) scale(0.75);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
@keyframes vue-spinner-propagate4 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___right__)) scale(0.75);
}
50% {
		transform: translateX(var(--4d723eb2-getDistance_1___right__)) scale(0.6);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_1___right__)) scale(0.6);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
@keyframes vue-spinner-propagate5 {
25% {
		transform: translateX(var(--4d723eb2-getDistance_0___right__)) scale(0.75);
}
50% {
		transform: translateX(var(--4d723eb2-getDistance_1___right__)) scale(0.6);
}
75% {
		transform: translateX(var(--4d723eb2-getDistance_2___right__)) scale(0.5);
}
95% {
		transform: translateX(0rem) scale(1);
}
}
`;mrr(yrr,{});const grr={name:"VueSpinnerPropagate"};({...grr,props:Ui({size:"15px"})});pe("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[pe("circle",{cx:"22",cy:"22",r:"1"},[pe("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),pe("circle",{cx:"22",cy:"22",r:"1"},[pe("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])]);var Tie=[],U2=[];function vrr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Tie.indexOf(s);o===-1&&(o=Tie.push(s)-1,U2[o]={}),r=U2[o]&&U2[o][n]?U2[o][n]:U2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var brr=`
@keyframes vue-spinner-pulse {
0% {
		transform: scale(1);
		opacity: 1;
}
45% {
		transform: scale(0.1);
		opacity: 0.7;
}
80% {
		transform: scale(1);
		opacity: 1;
}
}
`;vrr(brr,{});const wrr={name:"VueSpinnerPulse"};({...wrr,props:Ui({size:"15px",margin:"2px"})});pe("g",{transform:"scale(0.55)"},[pe("circle",{cx:"30",cy:"150",r:"30",fill:"currentColor"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"})]),pe("path",{d:"M90,150h30c0-49.7-40.3-90-90-90v30C63.1,90,90,116.9,90,150z",fill:"currentColor"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0.1",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"})]),pe("path",{d:"M150,150h30C180,67.2,112.8,0,30,0v30C96.3,30,150,83.7,150,150z",fill:"currentColor"},[pe("animate",{attributeName:"opacity",from:"0",to:"1",dur:"1s",begin:"0.2",repeatCount:"indefinite",keyTimes:"0;0.5;1",values:"0;1;1"})])]);var Iie=[],B2=[];function _rr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Iie.indexOf(s);o===-1&&(o=Iie.push(s)-1,B2[o]={}),r=B2[o]&&B2[o][n]?B2[o][n]:B2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var xrr=`
@keyframes vue-spinner-right {
0% {
		transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
}
100% {
		transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg);
}
}
@keyframes vue-spinner-left {
0% {
		transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg);
}
100% {
		transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg);
}
}
`;_rr(xrr,{});const Srr={name:"VueSpinnerRing"};({...Srr,props:Ui({size:"60px"})});pe("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[pe("circle",{cx:"22",cy:"22",r:"6"},[pe("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"22",cy:"22",r:"6"},[pe("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),pe("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),pe("circle",{cx:"22",cy:"22",r:"8"},[pe("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])]);var Aie=[],V2=[];function Err(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Aie.indexOf(s);o===-1&&(o=Aie.push(s)-1,V2[o]={}),r=V2[o]&&V2[o][n]?V2[o][n]:V2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Trr=`
@keyframes vue-spinner-even {
0% {
		transform: scale(1.1);
}
25% {
		transform: translateY(var(--515f9cd0--riseAmount____px_));
}
50% {
		transform: scale(0.4);
}
75% {
		transform: translateY(var(--515f9cd0-riseAmount____px_));
}
100% {
		transform: translateY(0) scale(1);
}
}
@keyframes vue-spinner-odd {
0% {
		transform: scale(0.4);
}
25% {
		transform: translateY(var(--515f9cd0-riseAmount____px_));
}
50% {
		transform: scale(1.1);
}
75% {
		transform: translateY(var(--515f9cd0--riseAmount____px_));
}
100% {
		transform: translateY(0) scale(0.75);
}
}
`;Err(Trr,{});const Irr={name:"VueSpinnerRise"};({...Irr,props:Ui({size:"15px",margin:"2px"})});var Mie=[],G2=[];function Arr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Mie.indexOf(s);o===-1&&(o=Mie.push(s)-1,G2[o]={}),r=G2[o]&&G2[o][n]?G2[o][n]:G2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Mrr=`
@keyframes vue-spinner-rotate-079b92bc {
0% {
		transform: rotate(0deg);
}
50% {
		transform: rotate(180deg);
}
100% {
		transform: rotate(360deg);
}
}
`;Arr(Mrr,{});const Crr={name:"VueSpinnerRotate"};({...Crr,props:Ui({size:"15px",margin:"2px"})});var Cie=[],z2=[];function krr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Cie.indexOf(s);o===-1&&(o=Cie.push(s)-1,z2[o]={}),r=z2[o]&&z2[o][n]?z2[o][n]:z2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Rrr=`
@keyframes vue-spinner-scale {
0% {
		transform: scaleY(1);
}
50% {
		transform: scaleY(0.4);
}
100% {
		transform: scaleY(1);
}
}
`;krr(Rrr,{});const Orr={name:"VueSpinnerScale"};({...Orr,props:Ui({height:"35px",width:"4px",radius:"2px",margin:"2px"})});var kie=[],$2=[];function Nrr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=kie.indexOf(s);o===-1&&(o=kie.push(s)-1,$2[o]={}),r=$2[o]&&$2[o][n]?$2[o][n]:$2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Lrr=`
@keyframes vue-spinner-skew {
25% {
		transform: perspective(100px) rotateX(180deg) rotateY(0);
}
50% {
		transform: perspective(100px) rotateX(180deg) rotateY(180deg);
}
75% {
		transform: perspective(100px) rotateX(0) rotateY(180deg);
}
100% {
		transform: perspective(100px) rotateX(0) rotateY(0);
}
}
`;Nrr(Lrr,{});const Prr={name:"VueSpinnerSkew"};({...Prr,props:Ui({size:"20px"})});var Rie=[],q2=[];function Drr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Rie.indexOf(s);o===-1&&(o=Rie.push(s)-1,q2[o]={}),r=q2[o]&&q2[o][n]?q2[o][n]:q2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Frr=`
@keyframes vue-spinner-square {
25% {
		transform: rotateX(180deg) rotateY(0);
}
50% {
		transform: rotateX(180deg) rotateY(180deg);
}
75% {
		transform: rotateX(0) rotateY(180deg);
}
100% {
		transform: rotateX(0) rotateY(0);
}
}
`;Drr(Frr,{});const jrr={name:"VueSpinnerSquare"};({...jrr,props:Ui({size:"50px"})});var Oie=[],H2=[];function Urr(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,s=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var o=Oie.indexOf(s);o===-1&&(o=Oie.push(s)-1,H2[o]={}),r=H2[o]&&H2[o][n]?H2[o][n]:H2[o][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var h=n==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(h,l),l}}var Brr=`
@keyframes vue-spinner-sync {
33% {
		transform: translateY(10px);
}
66% {
		transform: translateY(-10px);
}
100% {
		transform: translateY(0);
}
}
`;Urr(Brr,{});const Vrr={name:"VueSpinnerBounce"};({...Vrr,props:Ui({size:"15px",margin:"2px"})});pe("defs",[pe("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[pe("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),pe("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),pe("stop",{"stop-color":"currentColor",offset:"100%"})])]),pe("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[pe("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),pe("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[pe("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])]);const Grr={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},zrr=Jt({__name:"loading-panel",setup(e){return(t,r)=>(Ie(),Ss(Fk,{class:"flex-1 prose max-w-none my-5"},{default:mi(()=>[Ce("div",Grr,[Zi(yi(qSe),{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])]),_:1}))}}),HSe=Jt({__name:"panel",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},ratio:{type:Boolean},slideIdx:{type:Number},lang:{type:String},background:{type:Boolean},lazyLoad:{type:Boolean},isSlideshowItem:{type:Boolean,required:!1}},setup(e){const t=e,r=()=>({[ms.Text]:Pot,[ms.Map]:JKt,[ms.InteractiveMap]:mer,[ms.Image]:wer,[ms.Audio]:xer,[ms.Video]:Per,[ms.Slideshow]:Xer,[ms.Chart]:utr,[ms.Dynamic]:mtr,[ms.Loading]:zrr})[t.config.type];return(n,i)=>(Ie(),Ne("div",{class:Jr([e.config.type!==yi(ms).Text?`${e.config.type===yi(ms).Map?"overflow-x-auto overflow-y-hidden":""} sm:self-start flex-2 min-w-0`:"flex flex-1","flex-col relative"])},[(Ie(),Ss(sB(r()),{config:e.config,configFileStructure:e.configFileStructure,slideIdx:e.slideIdx,lang:e.lang,style:tr(e.config.customStyles),class:Jr(e.config.cssClasses),isSlideshowItem:e.isSlideshowItem,lazyLoad:e.lazyLoad,background:e.background},null,8,["config","configFileStructure","slideIdx","lang","style","class","isSlideshowItem","lazyLoad","background"]))],2))}}),$rr=["id"],ZA=.75,qrr=Jt({__name:"slide",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},slideIdx:{type:Number},lang:{type:String},background:{type:Boolean},lazyLoad:{type:Boolean}},emits:["slide-changed"],setup(e,{emit:t}){const r=Ik()?.vnode.key,n=t,i=e,s=Ye(!1),o=Ye(ZA),a=Ye(),l=Ye(void 0);ns(()=>{const c=i.config.panel;if(new ResizeObserver(function(d){l.value?.disconnect();const m=window.innerHeight,y=a.value.clientHeight;y>m*ZA&&(o.value=m*ZA/y*ZA),l.value=new IntersectionObserver(([g])=>{g.isIntersecting&&n("slide-changed",i.slideIdx)},{threshold:o.value}),l.value.observe(a.value)}).observe(a.value),l.value=new IntersectionObserver(([d])=>{d.isIntersecting&&n("slide-changed",i.slideIdx)},{rootMargin:"0px",threshold:o.value}),l.value?.observe(a.value),c.length==2&&!c[0]?.width&&!c[1]?.width){const d=c[0]?.type===ms.Text,m=c[1]?.type===ms.Text;(d&&!m||!d&&m)&&(s.value=!0)}});const u=c=>{if(i.config.panel.length===1)return"";const h=i.config.panel[c],d=i.config.panel[1-c];return h.type!=ms.Text&&d.type!=ms.Text?c===0?"order-2 sm:order-1 sm:mr-4 sticky z-40":"order-1 sm:order-2 sticky z-41 mr-4":h.type===ms.Text?`order-2 sm:mr-4 sm:order-${c+1}`:`sticky order-1 sm:order-${c+1} z-40`};return(c,h)=>(Ie(),Ne("div",{ref_key:"slide",ref:a,id:yi(r),class:Jr(["story-slide pb-24 h-full w-full flex sm:flex-row flex-col",{"bg-gray-50":e.config.backgroundImage===void 0,"pt-24":e.slideIdx===0}])},[(Ie(!0),Ne(Dn,null,Wn(e.config.panel,(d,m)=>(Ie(),Ss(HSe,{key:m,config:d,configFileStructure:e.configFileStructure,index:m,ratio:s.value,slideIdx:e.slideIdx,lazyLoad:e.lazyLoad,lang:e.lang,class:Jr(u(m)),background:!!e.config.backgroundImage&&e.background},null,8,["config","configFileStructure","index","ratio","slideIdx","lazyLoad","lang","class","background"]))),128))],10,$rr))}}),Hrr={class:"grid-container z-20 story-scrollama w-full flex-grow min-w-0"},Wrr=["data-chapter-index","id","name"],Zrr=Jt({__name:"story-content",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},lang:{type:String,required:!0},plugin:{type:Boolean},headerHeight:{type:Number}},emits:["step"],setup(e,{emit:t}){const r=Ak(),n=t,i=e,s=Mr(()=>i.config.slides.map((g,b)=>({...g,index:b})).filter(g=>g.includeInToc!==!1)),o=Ye(-1),a=Ye(0),l=Ye("none"),u=Ye(!1),c=Ye("");ns(()=>{const g=r?.hash.substring(1);g&&setTimeout(()=>{const b=decodeURIComponent(g),S=document.getElementById(b);if(S){const E=S?.getBoundingClientRect().top-(document.getElementById("h-navbar")?.clientHeight||0)-(document.getElementById("story-header")?.clientHeight||0);window.scrollTo({top:E})}},200),h(0)});const h=g=>{const b=i.config.slides[g].backgroundImage;l.value=b||"none";const S=i.config.slides[g].bgCssClasses;c.value=S||""},d=g=>{u.value=g},m=({element:g})=>{o.value=parseInt(g.dataset.chapterIndex||"-1"),n("step",o.value);const b=document.getElementById("h-navbar");b&&(a.value=b.clientHeight*.75)},y=g=>g>0&&!i.config.slides[g-1].backgroundImage&&i.config.slides[g].backgroundImage?"pt-8":"";return(g,b)=>(Ie(),Ne("div",{class:Jr(["items-stretch",g.$props.config?.tocOrientation==="horizontal"?"toc-horizontal":"flex toc-vertical"])},[g.$props.config?.tocOrientation==="horizontal"?(Ie(),Ss(dTe,{key:0,class:"top-menu","active-chapter-index":o.value,"return-to-top":e.config.returnTop??!0,slides:s.value,plugin:!!e.configFileStructure||!!e.plugin,lang:e.lang,style:tr({top:e.headerHeight+"px"})},null,8,["active-chapter-index","return-to-top","slides","plugin","lang","style"])):(Ie(),Ss(iTe,{key:1,class:"side-menu","active-chapter-index":o.value,"return-to-top":e.config.returnTop??!0,slides:s.value,plugin:!!e.configFileStructure||!!e.plugin,lang:e.lang},null,8,["active-chapter-index","return-to-top","slides","plugin","lang"])),Ce("div",Hrr,[Zi(wTe,{src:l.value,configFileStructure:e.configFileStructure,cssClasses:c.value,onBackgroundChanged:d},null,8,["src","configFileStructure","cssClasses"]),Zi(Fk,{class:"grid-content z-20",onStepEnter:m},{default:mi(()=>[(Ie(!0),Ne(Dn,null,Wn(e.config.slides,(S,E)=>(Ie(),Ne("div",{class:"flex",key:E,"data-chapter-index":E,id:`${E}-${S.title.toLowerCase().replaceAll(" ","-")}`,name:`${E}-${S.title.toLowerCase().replaceAll(" ","-")}`},[Zi(qrr,{config:S,configFileStructure:e.configFileStructure,class:Jr(y(E)),slideIdx:E,lang:e.lang,background:u.value,lazyLoad:e.config.lazyLoad??!0,onSlideChanged:h},null,8,["config","configFileStructure","class","slideIdx","lang","background","lazyLoad"])],8,Wrr))),128))]),_:1})])],2))}}),Jrr=ml(Zrr,[["__scopeId","data-v-e801528c"]]),Yrr={class:"intro-grid items-center"},Xrr={key:0,class:"intro-background shadow-md w-full h-full"},Qrr=["src"],Krr={class:"py-24 text-center intro-content",id:"intro"},enr=["src","alt"],tnr={class:"w-auto h-24 m-auto",width:"90",height:"104.84",viewBox:"0 0 90 104.83",xmlns:"http://www.w3.org/2000/svg"},rnr=["stroke"],nnr=["fill","stroke"],inr={class:"w-auto h-24 m-auto",width:"90",height:"104.84",viewBox:"0 0 90 104.83",xmlns:"http://www.w3.org/2000/svg"},snr=["stroke"],onr=["fill","stroke"],anr=Jt({__name:"introduction",props:{config:{type:Object,required:!0},configFileStructure:{type:Object},plugin:{type:Boolean}},setup(e){const t=e,r=nc({logo:"",backgroundImage:""});ns(()=>{if(r.logo=t.config.logo?t.config.logo.src:"",r.backgroundImage=t.config.backgroundImage??"",t.configFileStructure){const i=t.config.logo?.src,s=t.config.backgroundImage;if(i){const o=`${i.substring(i.indexOf("/")+1)}`,a=t.configFileStructure.zip.file(o);a&&a.async("blob").then(l=>{r.logo=t.config.logo.src=URL.createObjectURL(l)})}if(s){const o=`${s.substring(s.indexOf("/")+1)}`,a=t.configFileStructure.zip.file(o);a&&a.async("blob").then(l=>{r.backgroundImage=t.config.backgroundImage=URL.createObjectURL(l)})}}});const n=()=>{const i=document.getElementById("story");i&&i.scrollIntoView({behavior:"smooth"})};return(i,s)=>{const o=ET("router-link");return Ie(),Ne("div",Yrr,[r.backgroundImage?(Ie(),Ne("div",Xrr,[Ce("img",{src:r.backgroundImage,class:"h-full w-full object-cover",alt:"",role:"presentation"},null,8,Qrr)])):sn("",!0),Ce("div",Krr,[r.logo?(Ie(),Ne("img",{key:0,class:"inline-block",src:r.logo,alt:e.config.logo.altText},null,8,enr)):sn("",!0),Ce("h1",{class:"m-10 text-5xl font-bold",style:tr({color:e.config.titleColour??"#1f2937"})},Vr(e.config.title),5),Ce("p",{class:"w-1/2 m-auto text-2xl font-semibold",style:tr({color:e.config.subtitleColour??"#6b7280"})},Vr(e.config.subtitle),5),e.configFileStructure||e.plugin?(Ie(),Ne("button",{key:1,class:"inline-block mt-10 scroll-arrow",onClick:n},[(Ie(),Ne("svg",tnr,[Ce("path",{d:"m89.51 77.659-44.51 25.698-44.51-25.698 3.86e-4 -51.395 44.51-25.698 44.51 25.698z",fill:"none",stroke:e.config.buttonColour??"#00d2d3","stroke-dasharray":"4.8960465, 4.8960465","stroke-dashoffset":"2.7","stroke-width":".5"},null,8,rnr),Ce("path",{d:"m45 104.27-44.51-25.697v-10.646l44.51 25.697 44.51-25.697v10.646z",fill:e.config.buttonColour??"#00d2d3",stroke:e.config.buttonColour??"#00d2d3","stroke-width":".97921"},null,8,nnr)]))])):(Ie(),Ss(o,{key:2,to:{hash:"#story"},class:"inline-block mt-10 scroll-arrow",title:"scroll to story",target:""},{default:mi(()=>[(Ie(),Ne("svg",inr,[Ce("path",{d:"m89.51 77.659-44.51 25.698-44.51-25.698 3.86e-4 -51.395 44.51-25.698 44.51 25.698z",fill:"none",stroke:e.config.buttonColour??"#00d2d3","stroke-dasharray":"4.8960465, 4.8960465","stroke-dashoffset":"2.7","stroke-width":".5"},null,8,snr),Ce("path",{d:"m45 104.27-44.51-25.697v-10.646l44.51 25.697 44.51-25.697v10.646z",fill:e.config.buttonColour??"#00d2d3",stroke:e.config.buttonColour??"#00d2d3","stroke-width":".97921"},null,8,onr)]))]),_:1}))])])}}}),lnr={key:0},unr={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},cnr={key:1},hnr={class:"block py-20 align-middle text-center h-full",style:{margin:"0 auto"}},pnr={key:2},dnr={key:0,class:"storyramp-app bg-white",id:"top"},fnr={id:"story-header",class:"story-header sticky top-0 w-full h-16 leading-9 bg-white border-b border-gray-200"},mnr={class:"flex w-full sm:px-6 py-3 mx-auto"},ynr={class:"flex-none w-mobile-full truncate"},gnr={class:"w-full mx-auto pb-10 mb-6",id:"story"},vnr={class:"p-8 pt-2 text-right text-sm"},bnr=["href"],wnr={key:0,class:"storyramp-modified"},_nr=Jt({__name:"story",setup(e){const t=Ak(),r=Ye(void 0),n=Ye("loading"),i=Ye(-1),s=Ye(0),o=Ye("en");ns(()=>{const h=t.params.uid;o.value=t.params.lang?t.params.lang:"en",h?l(h,o.value):(console.error("Please supply the language and id URL params in the form of /[lang]/[uid]."),window.location.href="https://www.canada.ca/errors/404.html"),document.documentElement.setAttribute("lang",o.value);const m=Ik();m?.proxy?.$i18n&&(m.proxy.$i18n.locale=o.value)});const a=()=>{document.getElementById("top")?.scrollIntoView({behavior:"smooth"})},l=(h,d)=>{fetch(`${h}/${h}_${d}.json`).then(m=>{m.json().then(y=>{r.value=y,n.value="loaded",r.value&&(document.title=r.value.title+" - Canada.ca",r.value.slides=r.value.slides.filter(b=>b&&Object.keys(b).length)),r.value.stylesheets&&u(r.value.stylesheets);const g=new CustomEvent("Storylines-Loaded",{detail:{config:r.value}});document.dispatchEvent(g)}).catch(()=>{window.location.href="https://www.canada.ca/errors/404.html"})}).catch(m=>{m.code==="MODULE_NOT_FOUND"?(console.error(`There exists no config given by the URL params: ${m}`),window.location.href="https://www.canada.ca/errors/404.html"):(n.value="error",console.error(m.stack))})},u=h=>{h.forEach(d=>{const m=document.createElement("link");m.setAttribute("rel","stylesheet"),m.setAttribute("href",d),document.head.appendChild(m)})},c=h=>{i.value=h;const d=document.getElementById("story-header");d&&(s.value=d.clientHeight)};return(h,d)=>{const m=Yw("tippy");return n.value==="loading"?(Ie(),Ne("div",lnr,[Ce("div",unr,[Zi(yi(qSe),{size:"120px",color:"#009cd1",style:{margin:"0 auto"}})])])):n.value==="error"?(Ie(),Ne("div",cnr,[Ce("div",hnr,[d[0]||(d[0]=Ce("div",{style:{"font-size":"200px"}},"!",-1)),Ce("div",null,Vr(h.$t("story.error")),1)])])):n.value==="loaded"?(Ie(),Ne("div",pnr,[r.value!==void 0?(Ie(),Ne("div",dnr,[Ce("header",fnr,[Ce("div",mnr,[Zi(zEe,{class:"mobile-menu","active-chapter-index":i.value,"return-to-top":r.value.returnTop??!0,slides:r.value.slides,lang:o.value},null,8,["active-chapter-index","return-to-top","slides","lang"]),Ce("div",ynr,[fi((Ie(),Ne("button",{class:"text-lg font-semibold hover:underline",onClick:a},[eg(Vr(r.value.title),1)])),[[m,{delay:"200",placement:"right",content:h.$t("chapters.return"),animateFill:!0}]])]),d[1]||(d[1]=Ce("div",{class:"flex justify-end flex-auto space-x-6"},null,-1))])]),Zi(anr,{config:r.value.introSlide},null,8,["config"]),Ce("div",gnr,[Zi(Jrr,{config:r.value,lang:o.value,headerHeight:s.value,onStep:c},null,8,["config","lang","headerHeight"])]),Ce("footer",vnr,[d[2]||(d[2]=eg(" Context: ")),Ce("a",{class:"text-blue-700 font-semibold",href:r.value.contextLink,target:"_NEW"},Vr(r.value.contextLabel),9,bnr),d[3]||(d[3]=eg(" | ")),d[4]||(d[4]=Ce("a",{href:"https://github.com/ramp4-pcar4/story-ramp",target:"_NEW",class:"font-semibold text-blue-700"},"ramp4-pcar4/story-ramp",-1))]),r.value.dateModified?(Ie(),Ne("div",wnr,Vr(h.$t("story.date"))+" "+Vr(r.value.dateModified),1)):sn("",!0)])):sn("",!0)])):sn("",!0)}}}),Tnr=Object.freeze(Object.defineProperty({__proto__:null,default:_nr},Symbol.toStringTag,{value:"Module"}));export{y1 as $,cat as A,m1 as B,qo as C,Gr as D,Ee as E,jh as F,M_ as G,pr as H,ic as I,h3 as J,dd as K,Xe as L,Od as M,C3 as N,LO as O,EG as P,Pe as Q,tge as R,Mg as S,gr as T,_b as U,vB as V,Ko as W,PT as X,_c as Y,mt as Z,HSe as _,wse as a,Rg as a$,e3 as a0,An as a1,$z as a2,it as a3,Ut as a4,Xo as a5,yV as a6,ts as a7,Ca as a8,n1 as a9,kut as aA,Bht as aB,Xz as aC,tR as aD,Fi as aE,gd as aF,jue as aG,gn as aH,Va as aI,om as aJ,bw as aK,Pm as aL,na as aM,Qz as aN,vE as aO,Lue as aP,u0t as aQ,Zo as aR,bm as aS,FG as aT,Et as aU,Di as aV,Fm as aW,CR as aX,ui as aY,BR as aZ,s_ as a_,jt as aa,wc as ab,hpt as ac,eO as ad,ta as ae,bc as af,fV as ag,R5 as ah,$B as ai,Ke as aj,xe as ak,td as al,se as am,ppe as an,r1 as ao,Uoe as ap,dpe as aq,ubt as ar,jR as as,Om as at,Cb as au,z5 as av,hbt as aw,cbt as ax,Ah as ay,zpe as az,Uut as b,w_ as b$,Y_t as b0,MB as b1,LB as b2,tlt as b3,elt as b4,AT as b5,mc as b6,XR as b7,V0e as b8,Cde as b9,cR as bA,D0e as bB,ZR as bC,xa as bD,oC as bE,vgt as bF,yS as bG,O1e as bH,e_ as bI,o5 as bJ,lce as bK,hE as bL,rwt as bM,bj as bN,RD as bO,AD as bP,cpe as bQ,pn as bR,sbt as bS,ibt as bT,wj as bU,rg as bV,wd as bW,N1e as bX,R0e as bY,zAt as bZ,hR as b_,j0e as ba,vIt as bb,DAt as bc,F0e as bd,PAt as be,eoe as bf,Npt as bg,aC as bh,Kse as bi,BAt as bj,Upt as bk,Opt as bl,B0e as bm,$ot as bn,mse as bo,Dpt as bp,eae as bq,Wz as br,jpe as bs,OAt as bt,Kz as bu,zs as bv,zz as bw,RAt as bx,kAt as by,upt as bz,p as c,s1 as c$,Ro as c0,b4 as c1,w4 as c2,L7 as c3,sV as c4,U0e as c5,Evt as c6,FAt as c7,br as c8,hl as c9,LE as cA,Cd as cB,D1e as cC,IR as cD,L$ as cE,V1e as cF,rd as cG,P1e as cH,L1e as cI,F$ as cJ,spt as cK,Q1e as cL,$1e as cM,k$ as cN,vC as cO,d_ as cP,cpt as cQ,CT as cR,Tmt as cS,vR as cT,Th as cU,Dut as cV,ime as cW,sg as cX,st as cY,nz as cZ,Ji as c_,qE as ca,Lpe as cb,Gz as cc,Fn as cd,L0e as ce,P0e as cf,iC as cg,rye as ch,Hot as ci,Qo as cj,k_ as ck,Z1e as cl,tt as cm,Ht as cn,eC as co,a3t as cp,_7 as cq,S0e as cr,w0e as cs,$St as ct,qSt as cu,Eme as cv,WSt as cw,HSt as cx,JSt as cy,q0e as cz,f as d,Cae as d$,KT as d0,r1t as d1,yhe as d2,eat as d3,Ga as d4,qoe as d5,uae as d6,Bs as d7,Lvt as d8,Qvt as d9,xo as dA,e5 as dB,rz as dC,YMt as dD,$T as dE,nle as dF,gh as dG,zpt as dH,LV as dI,wV as dJ,ble as dK,Kae as dL,Spt as dM,gB as dN,hhe as dO,phe as dP,dhe as dQ,Bpt as dR,VAt as dS,h_ as dT,lht as dU,vAt as dV,Bz as dW,Vz as dX,Uz as dY,jAt as dZ,Tae as d_,uF as da,$ue as db,km as dc,Kvt as dd,$Tt as de,zue as df,_0t as dg,x0t as dh,fmt as di,bmt as dj,xmt as dk,_mt as dl,wmt as dm,Tyt as dn,rw as dp,mn as dq,n_ as dr,J7 as ds,Rye as dt,cu as du,qV as dv,G5 as dw,yyt as dx,A$ as dy,XMt as dz,qve as e,zg as e$,lve as e0,whe as e1,qi as e2,rpt as e3,Bu as e4,TB as e5,zk as e6,rr as e7,ude as e8,TG as e9,Xpe as eA,Dfe as eB,l3 as eC,Ld as eD,nu as eE,ww as eF,Kb as eG,Y1e as eH,Im as eI,NV as eJ,que as eK,R0t as eL,E0t as eM,Cce as eN,JNt as eO,Aw as eP,j$ as eQ,_j as eR,Rue as eS,Efe as eT,_V as eU,fc as eV,Cm as eW,kue as eX,BNt as eY,p$ as eZ,_$ as e_,G1e as ea,AG as eb,Jpe as ec,IG as ed,f1e as ee,lpt as ef,zct as eg,$i as eh,s1e as ei,W1e as ej,sht as ek,n6 as el,tV as em,rV as en,H1e as eo,aae as ep,cae as eq,nR as er,iR as es,hae as et,BT as eu,VT as ev,HF as ew,xxt as ex,Sxt as ey,be as ez,Oa as f,$pt as f$,Tw as f0,MO as f1,mC as f2,a$ as f3,L_ as f4,glt as f5,Pn as f6,Ze as f7,LAt as f8,GT as f9,xvt as fA,cNt as fB,uNt as fC,uR as fD,bvt as fE,pl as fF,yvt as fG,gvt as fH,M9 as fI,C9 as fJ,k9 as fK,pvt as fL,dvt as fM,Lpt as fN,cvt as fO,hvt as fP,dpt as fQ,Td as fR,kNt as fS,RNt as fT,VNt as fU,Wae as fV,m9 as fW,d9 as fX,gpt as fY,tpe as fZ,f9 as f_,Mz as fa,OB as fb,p9 as fc,Dot as fd,I9 as fe,ovt as ff,v9 as fg,w9 as fh,o9 as fi,c9 as fj,a9 as fk,l9 as fl,u9 as fm,g9 as fn,T9 as fo,A9 as fp,h9 as fq,oG as fr,b9 as fs,Z5 as ft,fvt as fu,mvt as fv,JT as fw,GS as fx,f_ as fy,svt as fz,xut as g,Mn as g$,y9 as g0,dle as g1,Ept as g2,Zae as g3,jyt as g4,h$ as g5,i1e as g6,$u as g7,T$ as g8,T3 as g9,wC as gA,U$ as gB,uat as gC,nh as gD,kj as gE,dLt as gF,vve as gG,Iy as gH,_B as gI,SB as gJ,EB as gK,Vot as gL,Co as gM,bhe as gN,_he as gO,The as gP,Mhe as gQ,fG as gR,pG as gS,dG as gT,Ahe as gU,khe as gV,Rhe as gW,rve as gX,o1 as gY,t3 as gZ,Pt as g_,YNt as ga,XNt as gb,_9 as gc,x9 as gd,S9 as ge,E9 as gf,Cpt as gg,yve as gh,B$ as gi,V$ as gj,dve as gk,s9 as gl,wvt as gm,zge as gn,ANt as go,n9 as gp,i9 as gq,ypt as gr,xC as gs,WE as gt,Oj as gu,nn as gv,cLt as gw,Rj as gx,al as gy,Cj as gz,Zn as h,a4 as h$,Ft as h0,QT as h1,rhe as h2,gce as h3,F1e as h4,tve as h5,nve as h6,d1e as h7,u1e as h8,Che as h9,aSt as hA,Tv as hB,o4 as hC,R_ as hD,NSt as hE,b0e as hF,e7 as hG,Zy as hH,p3t as hI,KF as hJ,d3t as hK,_0e as hL,Tz as hM,TSt as hN,QF as hO,jSt as hP,OSt as hQ,DSt as hR,m6 as hS,FSt as hT,uz as hU,PSt as hV,mme as hW,x0e as hX,c3t as hY,Av as hZ,x7 as h_,lae as ha,YG as hb,r3 as hc,K1e as hd,B1e as he,pae as hf,N$ as hg,cce as hh,VE as hi,U1e as hj,C$ as hk,j1e as hl,R$ as hm,wce as hn,ur as ho,m3 as hp,ji as hq,OR as hr,cme as hs,Re as ht,r0 as hu,xme as hv,h3t as hw,iSt as hx,NR as hy,Vg as hz,Qk as i,E_ as i$,Ez as i0,ASt as i1,ISt as i2,Qr as i3,n3 as i4,fme as i5,Pd as i6,bd as i7,Dd as i8,x5 as i9,nm as iA,vs as iB,use as iC,pE as iD,zot as iE,N_ as iF,ode as iG,cde as iH,cg as iI,Bge as iJ,hG as iK,Z0t as iL,eb as iM,ade as iN,J0t as iO,a1e as iP,o1e as iQ,ase as iR,ir as iS,soe as iT,Bhe as iU,sme as iV,Ryt as iW,hce as iX,_yt as iY,Ayt as iZ,AR as i_,hn as ia,_5 as ib,E5 as ic,yE as id,D$ as ie,d1 as ig,Qpe as ih,xE as ii,P$ as ij,q1e as ik,$ae as il,Uk as im,Bk as io,ea as ip,lat as iq,joe as ir,eR as is,kse as it,d3 as iu,SE as iv,Gpe as iw,mo as ix,t9 as iy,e9 as iz,W as j,lye as j$,Uot as j0,jot as j1,Eyt as j2,gyt as j3,wyt as j4,byt as j5,fLt as j6,mLt as j7,Bot as j8,HE as j9,bse as jA,Aj as jB,Mj as jC,Ij as jD,an as jE,$s as jF,As as jG,yn as jH,$_t as jI,z_t as jJ,Vae as jK,Bae as jL,Cg as jM,F_t as jN,dl as jO,oAt as jP,S0t as jQ,u_ as jR,Vht as jS,TD as jT,Fxt as jU,Xfe as jV,Qfe as jW,Yfe as jX,Dxt as jY,pc as jZ,NT as j_,Nhe as ja,jge as jb,Ohe as jc,BV as jd,Vhe as je,Nd as jf,Ej as jg,_C as jh,Fpt as ji,Tj as jj,Gb as jk,$at as jl,Sj as jm,Nj as jn,DT as jo,Hm as jp,Li as jq,Woe as jr,Xr as js,xyt as jt,Syt as ju,Zpe as jv,Mge as jw,fs as jx,pde as jy,hde as jz,k3 as k,ER as k$,vfe as k0,Fpe as k1,B_t as k2,Nde as k3,U_t as k4,kde as k5,_i as k6,dAt as k7,z0e as k8,Gfe as k9,ru as kA,sde as kB,rde as kC,z1e as kD,tde as kE,nO as kF,Az as kG,md as kH,Loe as kI,But as kJ,DMt as kK,Lye as kL,Pye as kM,X5 as kN,jT as kO,ole as kP,jpt as kQ,rce as kR,wR as kS,Jue as kT,b_ as kU,pO as kV,pw as kW,Jxt as kX,Wk as kY,ac as kZ,Vfe as k_,RS as ka,Fut as kb,X0e as kc,b3 as kd,ide as ke,vce as kf,bce as kg,nde as kh,Qm as ki,sAt as kj,Mm as kk,Mce as kl,FT as km,kce as kn,pyt as ko,Ll as kp,CB as kq,p_ as kr,jLt as ks,hyt as kt,cyt as ku,fyt as kv,myt as kw,Kk as kx,qse as ky,L5 as kz,r_ as l,zR as l$,ice as l0,sce as l1,oj as l2,Ebe as l3,yc as l4,ym as l5,Xse as l6,O0t as l7,UG as l8,p5t as l9,Uct as lA,Bct as lB,Vct as lC,Gct as lD,Nr as lE,bme as lF,xw as lG,$$ as lH,Ag as lI,zS as lJ,$Nt as lK,Fj as lL,vt as lM,e1 as lN,ew as lO,QIt as lP,ez as lQ,p1e as lR,dO as lS,_1e as lT,yC as lU,E$ as lV,c1e as lW,mG as lX,K1t as lY,gG as lZ,bG as l_,h5t as la,Kye as lb,Qye as lc,PG as ld,Yue as le,o$ as lf,$ve as lg,hw as lh,Fg as li,rat as lj,JDt as lk,SEt as ll,fEt as lm,Nme as ln,Lme as lo,Cse as lp,cEt as lq,Wue as lr,Emt as ls,SS as lt,M5 as lu,l_ as lv,It as lw,jye as lx,Fct as ly,jct as lz,Coe as m,HNt as m$,uvt as m0,npe as m1,Khe as m2,lvt as m3,Qhe as m4,i3 as m5,kO as m6,QNt as m7,Lut as m8,zy as m9,tLt as mA,hve as mB,fve as mC,G$ as mD,z$ as mE,CLt as mF,kLt as mG,Eve as mH,ENt as mI,TNt as mJ,Sve as mK,MLt as mL,RLt as mM,hNt as mN,Vj as mO,Gve as mP,OO as mQ,aNt as mR,PR as mS,lr as mT,jj as mU,PNt as mV,MG as mW,Ede as mX,Tde as mY,Bj as mZ,qNt as m_,_me as ma,Svt as mb,H5 as mc,W5 as md,avt as me,bh as mf,FNt as mg,Uj as mh,pNt as mi,dNt as mj,epe as mk,Hk as ml,zNt as mm,KNt as mn,h1e as mo,MNt as mp,CNt as mq,VLt as mr,UNt as ms,jNt as mt,ivt as mu,bve as mv,GNt as mw,GR as mx,SNt as my,eLt as mz,Jo as n,ra as n$,WNt as n0,ZNt as n1,x$ as n2,$ge as n3,fNt as n4,ONt as n5,npt as n6,NNt as n7,Ive as n8,LNt as n9,nxt as nA,oxt as nB,ixt as nC,Gx as nD,lz as nE,Xae as nF,hm as nG,S$ as nH,mNt as nI,yNt as nJ,_Nt as nK,xNt as nL,gNt as nM,vNt as nN,bNt as nO,wNt as nP,vm as nQ,tOt as nR,nOt as nS,Xy as nT,fd as nU,jm as nV,_a as nW,Tve as nX,kve as nY,Rve as nZ,w6 as n_,sye as na,Hl as nb,pve as nc,INt as nd,ld as ne,Yi as nf,Sbe as ng,I3 as nh,m$ as ni,w$ as nj,Qge as nk,Ekt as nl,e1e as nm,Akt as nn,uLt as no,gve as np,Dj as nq,Pj as nr,qgt as ns,Hgt as nt,$gt as nu,_St as nv,ele as nw,vpt as nx,ZE as ny,PLt as nz,BB as o,iS as o$,Rm as o0,D7 as o1,sC as o2,uye as o3,Kmt as o4,ZT as o5,NLt as o6,zmt as o7,DG as o8,Tb as o9,pz as oA,oEt as oB,b$ as oC,Age as oD,Lj as oE,qpt as oF,Iyt as oG,tl as oH,sR as oI,Aae as oJ,l1e as oK,Dm as oL,Kp as oM,upe as oN,Iw as oO,vse as oP,y1e as oQ,ame as oR,th as oS,wDt as oT,CPt as oU,pDt as oV,dbe as oW,H$ as oX,Kve as oY,tbe as oZ,D_ as o_,Dde as oa,JG as ob,Gmt as oc,tMt as od,a0t as oe,Hmt as of,Ymt as og,Zmt as oh,Xmt as oi,Mo as oj,nme as ok,Ni as ol,No as om,lNt as on,Xvt as oo,JM as op,Ad as oq,jg as or,Xm as os,YB as ot,BSt as ou,XSt as ov,qIt as ow,sEt as ox,kme as oy,LLt as oz,MT as p,jp as p$,mr as p0,Vh as p1,St as p2,pT as p3,Cn as p4,Ki as p5,cr as p6,di as p7,qe as p8,fn as p9,wxe as pA,rs as pB,Xg as pC,wi as pD,iSe as pE,hSe as pF,zq as pG,Zw as pH,X$ as pI,Vbe as pJ,Io as pK,sSe as pL,oSe as pM,Tn as pN,Fd as pO,xh as pP,aSe as pQ,QC as pR,lSe as pS,Ct as pT,Si as pU,_Se as pV,Wo as pW,SSe as pX,xSe as pY,cSe as pZ,JU as p_,xi as pa,Ge as pb,Jn as pc,Tt as pd,En as pe,Le as pf,_s as pg,qs as ph,Sc as pi,qr as pj,pt as pk,$r as pl,KO as pm,Qu as pn,cc as po,on as pp,$m as pq,B3 as pr,j_ as ps,xc as pt,Zr as pu,o0 as pv,Cq as pw,ar as px,Sxe as py,vN as pz,ie as q,Sm as q$,OH as q0,yN as q1,fm as q2,pSe as q3,dSe as q4,Ts as q5,dT as q6,Hc as q7,Kl as q8,ed as q9,co as qA,bi as qB,QO as qC,wr as qD,Hn as qE,ia as qF,cwe as qG,Lr as qH,La as qI,zr as qJ,Kr as qK,iu as qL,x1 as qM,ws as qN,yr as qO,wt as qP,uwe as qQ,w1 as qR,mg as qS,mwe as qT,pwe as qU,dwe as qV,fwe as qW,uq as qX,uGt as qY,Hjt as qZ,iq as q_,fSe as qa,vSe as qb,jbe as qc,Cw as qd,gSe as qe,mSe as qf,ySe as qg,J3 as qh,XE as qi,VC as qj,$3 as qk,Gq as ql,Fs as qm,Yt as qn,Vl as qo,Xt as qp,hT as qq,Vq as qr,Ku as qs,pS as qt,sh as qu,Fa as qv,Yb as qw,tg as qx,or as qy,rSe as qz,Aa as r,Ds as r$,Iq as r0,oi as r1,Bwe as r2,wq as r3,XO as r4,Nq as r5,Aq as r6,Ns as r7,XPt as r8,_Dt as r9,Hpe as rA,Wpe as rB,qct as rC,Gat as rD,oR as rE,NE as rF,jde as rG,U5 as rH,Qde as rI,Ape as rJ,C_ as rK,r4 as rL,tO as rM,Yde as rN,Jde as rO,T_ as rP,et as rQ,Sfe as rR,Pde as rS,Pfe as rT,f3 as rU,rfe as rV,VG as rW,hfe as rX,cO as rY,uO as rZ,o_ as r_,TDt as ra,LPt as rb,SPt as rc,xPt as rd,Km as re,t0 as rf,g1 as rg,UE as rh,Vt as ri,e2t as rj,hO as rk,_G as rl,A_ as rm,UV as rn,c3 as ro,JR as rp,UT as rq,t2t as rr,rO as rs,Hde as rt,J5 as ru,rme as rv,tae as rw,jG as rx,$pe as ry,YR as rz,we as s,sw as s$,tz as s0,Nfe as s1,OV as s2,Dg as s3,qde as s4,lO as s5,Is as s6,vh as s7,Tye as s8,Eye as s9,s0e as sA,gz as sB,vz as sC,lg as sD,o0e as sE,i0e as sF,g3 as sG,wO as sH,Pme as sI,T0e as sJ,Zme as sK,Wme as sL,g0e as sM,m0e as sN,Jme as sO,JTt as sP,d0e as sQ,Sz as sR,ZTt as sS,f0e as sT,Sct as sU,r0e as sV,Gme as sW,Rae as sX,Hfe as sY,DB as sZ,OT as s_,Sye as sa,d6 as sb,Xu as sc,Qi as sd,H0e as se,_r as sf,qpe as sg,XEt as sh,KEt as si,gO as sj,yO as sk,WEt as sl,ZEt as sm,fO as sn,Gg as so,od as sp,Vme as sq,FE as sr,jE as ss,l3t as st,c0e as su,GSt as sv,k0e as sw,Fu as sx,N7 as sy,vO as sz,ll as t,aG as t$,_o as t0,Na as t1,Nae as t2,Lae as t3,ZG as t4,Eut as t5,Mht as t6,tat as t7,tw as t8,vd as t9,nAt as tA,sd as tB,$F as tC,GG as tD,dw as tE,PE as tF,iO as tG,t1 as tH,pfe as tI,yfe as tJ,$de as tK,efe as tL,tfe as tM,nfe as tN,ife as tO,mfe as tP,sfe as tQ,ofe as tR,afe as tS,lfe as tT,ufe as tU,cfe as tV,Bh as tW,f1 as tX,p1 as tY,J1t as tZ,lEt as t_,Ade as ta,Mde as tb,Fde as tc,Rfe as td,Lfe as te,iz as tf,tme as tg,Rse as th,c1 as ti,Ppt as tj,Vpt as tk,v6 as tl,Fge as tm,SR as tn,ipt as to,Tut as tp,RB as tq,Xyt as tr,Qyt as ts,Kyt as tt,mw as tu,WB as tv,Gl as tw,bfe as tx,wfe as ty,iAt as tz,Er as u,u$,sG as u0,i_ as u1,tu as u2,qD as u3,hV as u4,xB as u5,gut as u6,nV as u7,A2t as u8,$ut as u9,Kpe as uA,Ype as uB,Fot as uC,mat as uD,fat as uE,Sk as uF,RH as uG,V_e as uH,uSe as uI,qm as uJ,Sn as uK,Md as uL,Hve as uM,W0t as uN,PB as uO,Ew as uP,Z1t as uQ,ju as uR,Cge as uS,c$ as uT,eV as uU,oV as uV,wae as uW,gae as uX,wpt as uY,Qae as uZ,l$ as u_,eTt as ua,vhe as ub,Hbt as uc,O$ as ud,Zde as ue,fye as uf,Pp as ug,Zz as uh,lC as ui,Z as uj,Act as uk,py as ul,uAt as um,lAt as un,kz as uo,Rz as up,Hse as uq,qat as ur,x1e as us,dse as ut,VR as uu,eve as uv,Zot as uw,Jot as ux,Wot as uy,Doe as uz,dz as v,Pge as v0,lge as v1,Sw as v2,xpt as v3,mj as v4,zgt as v5,Y0t as v6,GE as v7,Nge as v8,Lge as v9,Wge as va,CO as vb,X1e as vc,Fye as vd,Jct as ve,Imt as vf,yae as vg,Pct as vh,Dct as vi,Yse as vj,aV as vk,E3 as vl,xge as vm,Vge as vn,Gge as vo,rR as vp,T5 as vq,Uge as vr,kge as vs,$ct as vt,J1e as vu,zE as vv,bE as vw,Hct as vx,Enr as vy,Tnr as vz,Ba as w,mye as x,a3 as y,kd as z};
