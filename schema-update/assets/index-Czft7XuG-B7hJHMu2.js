import{eT as p,eU as d,g6 as i,eX as g,eY as u,f6 as v,eZ as h,f8 as f,eV as $,f9 as m,e$ as A,fb as b,f2 as w,fg as _,f4 as C,fq as E}from"./story-B9xumwLI.js";import"./main-BtP7c6vW.js";const y={en:{"scrollguard.instructions":"Use ctrl + scroll to zoom the map"},fr:{"scrollguard.instructions":"Utilisez les touches Ctrl et + pour faire un zoom de la carte"}},q={class:"sg-label"},L=p({__name:"map-scrollguard",setup(o){const e=i(),{t:r}=g(),s=u("iApi"),t=v(),c=h(()=>e.enabled);f(()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.addEventListener("wheel",l,{capture:!0}),s.event.on($.MAP_CREATED,()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.addEventListener("wheel",l,{capture:!0})})}),m(()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.removeEventListener("wheel",l,{capture:!0})});const l=n=>{if(!c.value)return;const a=t.value.classList;n.ctrlKey?(a.remove("sg-active"),a.add("sg-scrolling")):(n.stopPropagation(),a.remove("sg-scrolling"),a.add("sg-active"),window.setTimeout(()=>a.remove("sg-active"),2e3))};return(n,a)=>(A(),b("div",{class:"sg",ref_key:"scrollGuard",ref:t},[w("p",q,_(C(r)("scrollguard.instructions")),1)],512))}}),x=d(L,[["__scopeId","data-v-bf6386a4"]]);class z extends E{setEnabled(e){i(this.$vApp.$pinia).enabled=e}_parseConfig(e){i(this.$vApp.$pinia).enabled=e?.enabled||!1}get config(){return super.config}}class N extends z{added(){Object.entries(y).forEach(t=>this.$iApi.$i18n.mergeLocaleMessage(...t)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,t=>this._parseConfig(t)),{destroy:r,el:s}=this.mount(x,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(s.childNodes[0]),this.removed=()=>{e(),r(),i(this.$vApp.$pinia).$reset()}}}export{N as default};
